(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const y of document.querySelectorAll('link[rel="modulepreload"]'))o(y);new MutationObserver(y=>{for(const R of y)if(R.type==="childList")for(const G of R.addedNodes)G.tagName==="LINK"&&G.rel==="modulepreload"&&o(G)}).observe(document,{childList:!0,subtree:!0});function t(y){const R={};return y.integrity&&(R.integrity=y.integrity),y.referrerPolicy&&(R.referrerPolicy=y.referrerPolicy),y.crossOrigin==="use-credentials"?R.credentials="include":y.crossOrigin==="anonymous"?R.credentials="omit":R.credentials="same-origin",R}function o(y){if(y.ep)return;y.ep=!0;const R=t(y);fetch(y.href,R)}})();var commonjsGlobal$2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function getAugmentedNamespace(r){if(Object.prototype.hasOwnProperty.call(r,"__esModule"))return r;var e=r.default;if(typeof e=="function"){var t=function o(){return this instanceof o?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(o){var y=Object.getOwnPropertyDescriptor(r,o);Object.defineProperty(t,o,y.get?y:{enumerable:!0,get:function(){return r[o]}})}),t}var jsxRuntime={exports:{}},reactJsxRuntime_production={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactJsxRuntime_production;function requireReactJsxRuntime_production(){if(hasRequiredReactJsxRuntime_production)return reactJsxRuntime_production;hasRequiredReactJsxRuntime_production=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(o,y,R){var G=null;if(R!==void 0&&(G=""+R),y.key!==void 0&&(G=""+y.key),"key"in y){R={};for(var K in y)K!=="key"&&(R[K]=y[K])}else R=y;return y=R.ref,{$$typeof:r,type:o,key:G,ref:y!==void 0?y:null,props:R}}return reactJsxRuntime_production.Fragment=e,reactJsxRuntime_production.jsx=t,reactJsxRuntime_production.jsxs=t,reactJsxRuntime_production}var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,jsxRuntime.exports=requireReactJsxRuntime_production()),jsxRuntime.exports}var jsxRuntimeExports=requireJsxRuntime(),react={exports:{}},react_production={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReact_production;function requireReact_production(){if(hasRequiredReact_production)return react_production;hasRequiredReact_production=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),y=Symbol.for("react.profiler"),R=Symbol.for("react.consumer"),G=Symbol.for("react.context"),K=Symbol.for("react.forward_ref"),Y=Symbol.for("react.suspense"),Q=Symbol.for("react.memo"),ee=Symbol.for("react.lazy"),ie=Symbol.iterator;function re(Te){return Te===null||typeof Te!="object"?null:(Te=ie&&Te[ie]||Te["@@iterator"],typeof Te=="function"?Te:null)}var se={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},le=Object.assign,ce={};function oe(Te,Ne,Ye){this.props=Te,this.context=Ne,this.refs=ce,this.updater=Ye||se}oe.prototype.isReactComponent={},oe.prototype.setState=function(Te,Ne){if(typeof Te!="object"&&typeof Te!="function"&&Te!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Te,Ne,"setState")},oe.prototype.forceUpdate=function(Te){this.updater.enqueueForceUpdate(this,Te,"forceUpdate")};function ue(){}ue.prototype=oe.prototype;function ge(Te,Ne,Ye){this.props=Te,this.context=Ne,this.refs=ce,this.updater=Ye||se}var ve=ge.prototype=new ue;ve.constructor=ge,le(ve,oe.prototype),ve.isPureReactComponent=!0;var _e=Array.isArray,be={H:null,A:null,T:null,S:null,V:null},Re=Object.prototype.hasOwnProperty;function Se(Te,Ne,Ye,Qe,qe,Ze){return Ye=Ze.ref,{$$typeof:r,type:Te,key:Ne,ref:Ye!==void 0?Ye:null,props:Ze}}function Ee(Te,Ne){return Se(Te.type,Ne,void 0,void 0,void 0,Te.props)}function ye(Te){return typeof Te=="object"&&Te!==null&&Te.$$typeof===r}function de(Te){var Ne={"=":"=0",":":"=2"};return"$"+Te.replace(/[=:]/g,function(Ye){return Ne[Ye]})}var Me=/\/+/g;function Le(Te,Ne){return typeof Te=="object"&&Te!==null&&Te.key!=null?de(""+Te.key):Ne.toString(36)}function Pe(){}function Ue(Te){switch(Te.status){case"fulfilled":return Te.value;case"rejected":throw Te.reason;default:switch(typeof Te.status=="string"?Te.then(Pe,Pe):(Te.status="pending",Te.then(function(Ne){Te.status==="pending"&&(Te.status="fulfilled",Te.value=Ne)},function(Ne){Te.status==="pending"&&(Te.status="rejected",Te.reason=Ne)})),Te.status){case"fulfilled":return Te.value;case"rejected":throw Te.reason}}throw Te}function $e(Te,Ne,Ye,Qe,qe){var Ze=typeof Te;(Ze==="undefined"||Ze==="boolean")&&(Te=null);var ct=!1;if(Te===null)ct=!0;else switch(Ze){case"bigint":case"string":case"number":ct=!0;break;case"object":switch(Te.$$typeof){case r:case e:ct=!0;break;case ee:return ct=Te._init,$e(ct(Te._payload),Ne,Ye,Qe,qe)}}if(ct)return qe=qe(Te),ct=Qe===""?"."+Le(Te,0):Qe,_e(qe)?(Ye="",ct!=null&&(Ye=ct.replace(Me,"$&/")+"/"),$e(qe,Ne,Ye,"",function(Vn){return Vn})):qe!=null&&(ye(qe)&&(qe=Ee(qe,Ye+(qe.key==null||Te&&Te.key===qe.key?"":(""+qe.key).replace(Me,"$&/")+"/")+ct)),Ne.push(qe)),1;ct=0;var xt=Qe===""?".":Qe+":";if(_e(Te))for(var un=0;un<Te.length;un++)Qe=Te[un],Ze=xt+Le(Qe,un),ct+=$e(Qe,Ne,Ye,Ze,qe);else if(un=re(Te),typeof un=="function")for(Te=un.call(Te),un=0;!(Qe=Te.next()).done;)Qe=Qe.value,Ze=xt+Le(Qe,un++),ct+=$e(Qe,Ne,Ye,Ze,qe);else if(Ze==="object"){if(typeof Te.then=="function")return $e(Ue(Te),Ne,Ye,Qe,qe);throw Ne=String(Te),Error("Objects are not valid as a React child (found: "+(Ne==="[object Object]"?"object with keys {"+Object.keys(Te).join(", ")+"}":Ne)+"). If you meant to render a collection of children, use an array instead.")}return ct}function Ve(Te,Ne,Ye){if(Te==null)return Te;var Qe=[],qe=0;return $e(Te,Qe,"","",function(Ze){return Ne.call(Ye,Ze,qe++)}),Qe}function Ce(Te){if(Te._status===-1){var Ne=Te._result;Ne=Ne(),Ne.then(function(Ye){(Te._status===0||Te._status===-1)&&(Te._status=1,Te._result=Ye)},function(Ye){(Te._status===0||Te._status===-1)&&(Te._status=2,Te._result=Ye)}),Te._status===-1&&(Te._status=0,Te._result=Ne)}if(Te._status===1)return Te._result.default;throw Te._result}var De=typeof reportError=="function"?reportError:function(Te){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Ne=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Te=="object"&&Te!==null&&typeof Te.message=="string"?String(Te.message):String(Te),error:Te});if(!window.dispatchEvent(Ne))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Te);return}console.error(Te)};function Oe(){}return react_production.Children={map:Ve,forEach:function(Te,Ne,Ye){Ve(Te,function(){Ne.apply(this,arguments)},Ye)},count:function(Te){var Ne=0;return Ve(Te,function(){Ne++}),Ne},toArray:function(Te){return Ve(Te,function(Ne){return Ne})||[]},only:function(Te){if(!ye(Te))throw Error("React.Children.only expected to receive a single React element child.");return Te}},react_production.Component=oe,react_production.Fragment=t,react_production.Profiler=y,react_production.PureComponent=ge,react_production.StrictMode=o,react_production.Suspense=Y,react_production.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=be,react_production.__COMPILER_RUNTIME={__proto__:null,c:function(Te){return be.H.useMemoCache(Te)}},react_production.cache=function(Te){return function(){return Te.apply(null,arguments)}},react_production.cloneElement=function(Te,Ne,Ye){if(Te==null)throw Error("The argument must be a React element, but you passed "+Te+".");var Qe=le({},Te.props),qe=Te.key,Ze=void 0;if(Ne!=null)for(ct in Ne.ref!==void 0&&(Ze=void 0),Ne.key!==void 0&&(qe=""+Ne.key),Ne)!Re.call(Ne,ct)||ct==="key"||ct==="__self"||ct==="__source"||ct==="ref"&&Ne.ref===void 0||(Qe[ct]=Ne[ct]);var ct=arguments.length-2;if(ct===1)Qe.children=Ye;else if(1<ct){for(var xt=Array(ct),un=0;un<ct;un++)xt[un]=arguments[un+2];Qe.children=xt}return Se(Te.type,qe,void 0,void 0,Ze,Qe)},react_production.createContext=function(Te){return Te={$$typeof:G,_currentValue:Te,_currentValue2:Te,_threadCount:0,Provider:null,Consumer:null},Te.Provider=Te,Te.Consumer={$$typeof:R,_context:Te},Te},react_production.createElement=function(Te,Ne,Ye){var Qe,qe={},Ze=null;if(Ne!=null)for(Qe in Ne.key!==void 0&&(Ze=""+Ne.key),Ne)Re.call(Ne,Qe)&&Qe!=="key"&&Qe!=="__self"&&Qe!=="__source"&&(qe[Qe]=Ne[Qe]);var ct=arguments.length-2;if(ct===1)qe.children=Ye;else if(1<ct){for(var xt=Array(ct),un=0;un<ct;un++)xt[un]=arguments[un+2];qe.children=xt}if(Te&&Te.defaultProps)for(Qe in ct=Te.defaultProps,ct)qe[Qe]===void 0&&(qe[Qe]=ct[Qe]);return Se(Te,Ze,void 0,void 0,null,qe)},react_production.createRef=function(){return{current:null}},react_production.forwardRef=function(Te){return{$$typeof:K,render:Te}},react_production.isValidElement=ye,react_production.lazy=function(Te){return{$$typeof:ee,_payload:{_status:-1,_result:Te},_init:Ce}},react_production.memo=function(Te,Ne){return{$$typeof:Q,type:Te,compare:Ne===void 0?null:Ne}},react_production.startTransition=function(Te){var Ne=be.T,Ye={};be.T=Ye;try{var Qe=Te(),qe=be.S;qe!==null&&qe(Ye,Qe),typeof Qe=="object"&&Qe!==null&&typeof Qe.then=="function"&&Qe.then(Oe,De)}catch(Ze){De(Ze)}finally{be.T=Ne}},react_production.unstable_useCacheRefresh=function(){return be.H.useCacheRefresh()},react_production.use=function(Te){return be.H.use(Te)},react_production.useActionState=function(Te,Ne,Ye){return be.H.useActionState(Te,Ne,Ye)},react_production.useCallback=function(Te,Ne){return be.H.useCallback(Te,Ne)},react_production.useContext=function(Te){return be.H.useContext(Te)},react_production.useDebugValue=function(){},react_production.useDeferredValue=function(Te,Ne){return be.H.useDeferredValue(Te,Ne)},react_production.useEffect=function(Te,Ne,Ye){var Qe=be.H;if(typeof Ye=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Qe.useEffect(Te,Ne)},react_production.useId=function(){return be.H.useId()},react_production.useImperativeHandle=function(Te,Ne,Ye){return be.H.useImperativeHandle(Te,Ne,Ye)},react_production.useInsertionEffect=function(Te,Ne){return be.H.useInsertionEffect(Te,Ne)},react_production.useLayoutEffect=function(Te,Ne){return be.H.useLayoutEffect(Te,Ne)},react_production.useMemo=function(Te,Ne){return be.H.useMemo(Te,Ne)},react_production.useOptimistic=function(Te,Ne){return be.H.useOptimistic(Te,Ne)},react_production.useReducer=function(Te,Ne,Ye){return be.H.useReducer(Te,Ne,Ye)},react_production.useRef=function(Te){return be.H.useRef(Te)},react_production.useState=function(Te){return be.H.useState(Te)},react_production.useSyncExternalStore=function(Te,Ne,Ye){return be.H.useSyncExternalStore(Te,Ne,Ye)},react_production.useTransition=function(){return be.H.useTransition()},react_production.version="19.1.0",react_production}var hasRequiredReact;function requireReact(){return hasRequiredReact||(hasRequiredReact=1,react.exports=requireReact_production()),react.exports}var reactExports=requireReact();const React=getDefaultExportFromCjs(reactExports);var client={exports:{}},reactDomClient_production={},scheduler$2={exports:{}},scheduler_production$2={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredScheduler_production$2;function requireScheduler_production$2(){return hasRequiredScheduler_production$2||(hasRequiredScheduler_production$2=1,function(r){function e(Ve,Ce){var De=Ve.length;Ve.push(Ce);e:for(;0<De;){var Oe=De-1>>>1,Te=Ve[Oe];if(0<y(Te,Ce))Ve[Oe]=Ce,Ve[De]=Te,De=Oe;else break e}}function t(Ve){return Ve.length===0?null:Ve[0]}function o(Ve){if(Ve.length===0)return null;var Ce=Ve[0],De=Ve.pop();if(De!==Ce){Ve[0]=De;e:for(var Oe=0,Te=Ve.length,Ne=Te>>>1;Oe<Ne;){var Ye=2*(Oe+1)-1,Qe=Ve[Ye],qe=Ye+1,Ze=Ve[qe];if(0>y(Qe,De))qe<Te&&0>y(Ze,Qe)?(Ve[Oe]=Ze,Ve[qe]=De,Oe=qe):(Ve[Oe]=Qe,Ve[Ye]=De,Oe=Ye);else if(qe<Te&&0>y(Ze,De))Ve[Oe]=Ze,Ve[qe]=De,Oe=qe;else break e}}return Ce}function y(Ve,Ce){var De=Ve.sortIndex-Ce.sortIndex;return De!==0?De:Ve.id-Ce.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var R=performance;r.unstable_now=function(){return R.now()}}else{var G=Date,K=G.now();r.unstable_now=function(){return G.now()-K}}var Y=[],Q=[],ee=1,ie=null,re=3,se=!1,le=!1,ce=!1,oe=!1,ue=typeof setTimeout=="function"?setTimeout:null,ge=typeof clearTimeout=="function"?clearTimeout:null,ve=typeof setImmediate<"u"?setImmediate:null;function _e(Ve){for(var Ce=t(Q);Ce!==null;){if(Ce.callback===null)o(Q);else if(Ce.startTime<=Ve)o(Q),Ce.sortIndex=Ce.expirationTime,e(Y,Ce);else break;Ce=t(Q)}}function be(Ve){if(ce=!1,_e(Ve),!le)if(t(Y)!==null)le=!0,Re||(Re=!0,Le());else{var Ce=t(Q);Ce!==null&&$e(be,Ce.startTime-Ve)}}var Re=!1,Se=-1,Ee=5,ye=-1;function de(){return oe?!0:!(r.unstable_now()-ye<Ee)}function Me(){if(oe=!1,Re){var Ve=r.unstable_now();ye=Ve;var Ce=!0;try{e:{le=!1,ce&&(ce=!1,ge(Se),Se=-1),se=!0;var De=re;try{t:{for(_e(Ve),ie=t(Y);ie!==null&&!(ie.expirationTime>Ve&&de());){var Oe=ie.callback;if(typeof Oe=="function"){ie.callback=null,re=ie.priorityLevel;var Te=Oe(ie.expirationTime<=Ve);if(Ve=r.unstable_now(),typeof Te=="function"){ie.callback=Te,_e(Ve),Ce=!0;break t}ie===t(Y)&&o(Y),_e(Ve)}else o(Y);ie=t(Y)}if(ie!==null)Ce=!0;else{var Ne=t(Q);Ne!==null&&$e(be,Ne.startTime-Ve),Ce=!1}}break e}finally{ie=null,re=De,se=!1}Ce=void 0}}finally{Ce?Le():Re=!1}}}var Le;if(typeof ve=="function")Le=function(){ve(Me)};else if(typeof MessageChannel<"u"){var Pe=new MessageChannel,Ue=Pe.port2;Pe.port1.onmessage=Me,Le=function(){Ue.postMessage(null)}}else Le=function(){ue(Me,0)};function $e(Ve,Ce){Se=ue(function(){Ve(r.unstable_now())},Ce)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(Ve){Ve.callback=null},r.unstable_forceFrameRate=function(Ve){0>Ve||125<Ve?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Ee=0<Ve?Math.floor(1e3/Ve):5},r.unstable_getCurrentPriorityLevel=function(){return re},r.unstable_next=function(Ve){switch(re){case 1:case 2:case 3:var Ce=3;break;default:Ce=re}var De=re;re=Ce;try{return Ve()}finally{re=De}},r.unstable_requestPaint=function(){oe=!0},r.unstable_runWithPriority=function(Ve,Ce){switch(Ve){case 1:case 2:case 3:case 4:case 5:break;default:Ve=3}var De=re;re=Ve;try{return Ce()}finally{re=De}},r.unstable_scheduleCallback=function(Ve,Ce,De){var Oe=r.unstable_now();switch(typeof De=="object"&&De!==null?(De=De.delay,De=typeof De=="number"&&0<De?Oe+De:Oe):De=Oe,Ve){case 1:var Te=-1;break;case 2:Te=250;break;case 5:Te=1073741823;break;case 4:Te=1e4;break;default:Te=5e3}return Te=De+Te,Ve={id:ee++,callback:Ce,priorityLevel:Ve,startTime:De,expirationTime:Te,sortIndex:-1},De>Oe?(Ve.sortIndex=De,e(Q,Ve),t(Y)===null&&Ve===t(Q)&&(ce?(ge(Se),Se=-1):ce=!0,$e(be,De-Oe))):(Ve.sortIndex=Te,e(Y,Ve),le||se||(le=!0,Re||(Re=!0,Le()))),Ve},r.unstable_shouldYield=de,r.unstable_wrapCallback=function(Ve){var Ce=re;return function(){var De=re;re=Ce;try{return Ve.apply(this,arguments)}finally{re=De}}}}(scheduler_production$2)),scheduler_production$2}var hasRequiredScheduler$2;function requireScheduler$2(){return hasRequiredScheduler$2||(hasRequiredScheduler$2=1,scheduler$2.exports=requireScheduler_production$2()),scheduler$2.exports}var reactDom={exports:{}},reactDom_production={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDom_production;function requireReactDom_production(){if(hasRequiredReactDom_production)return reactDom_production;hasRequiredReactDom_production=1;var r=requireReact();function e(Y){var Q="https://react.dev/errors/"+Y;if(1<arguments.length){Q+="?args[]="+encodeURIComponent(arguments[1]);for(var ee=2;ee<arguments.length;ee++)Q+="&args[]="+encodeURIComponent(arguments[ee])}return"Minified React error #"+Y+"; visit "+Q+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var o={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},y=Symbol.for("react.portal");function R(Y,Q,ee){var ie=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:y,key:ie==null?null:""+ie,children:Y,containerInfo:Q,implementation:ee}}var G=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function K(Y,Q){if(Y==="font")return"";if(typeof Q=="string")return Q==="use-credentials"?Q:""}return reactDom_production.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,reactDom_production.createPortal=function(Y,Q){var ee=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Q||Q.nodeType!==1&&Q.nodeType!==9&&Q.nodeType!==11)throw Error(e(299));return R(Y,Q,null,ee)},reactDom_production.flushSync=function(Y){var Q=G.T,ee=o.p;try{if(G.T=null,o.p=2,Y)return Y()}finally{G.T=Q,o.p=ee,o.d.f()}},reactDom_production.preconnect=function(Y,Q){typeof Y=="string"&&(Q?(Q=Q.crossOrigin,Q=typeof Q=="string"?Q==="use-credentials"?Q:"":void 0):Q=null,o.d.C(Y,Q))},reactDom_production.prefetchDNS=function(Y){typeof Y=="string"&&o.d.D(Y)},reactDom_production.preinit=function(Y,Q){if(typeof Y=="string"&&Q&&typeof Q.as=="string"){var ee=Q.as,ie=K(ee,Q.crossOrigin),re=typeof Q.integrity=="string"?Q.integrity:void 0,se=typeof Q.fetchPriority=="string"?Q.fetchPriority:void 0;ee==="style"?o.d.S(Y,typeof Q.precedence=="string"?Q.precedence:void 0,{crossOrigin:ie,integrity:re,fetchPriority:se}):ee==="script"&&o.d.X(Y,{crossOrigin:ie,integrity:re,fetchPriority:se,nonce:typeof Q.nonce=="string"?Q.nonce:void 0})}},reactDom_production.preinitModule=function(Y,Q){if(typeof Y=="string")if(typeof Q=="object"&&Q!==null){if(Q.as==null||Q.as==="script"){var ee=K(Q.as,Q.crossOrigin);o.d.M(Y,{crossOrigin:ee,integrity:typeof Q.integrity=="string"?Q.integrity:void 0,nonce:typeof Q.nonce=="string"?Q.nonce:void 0})}}else Q==null&&o.d.M(Y)},reactDom_production.preload=function(Y,Q){if(typeof Y=="string"&&typeof Q=="object"&&Q!==null&&typeof Q.as=="string"){var ee=Q.as,ie=K(ee,Q.crossOrigin);o.d.L(Y,ee,{crossOrigin:ie,integrity:typeof Q.integrity=="string"?Q.integrity:void 0,nonce:typeof Q.nonce=="string"?Q.nonce:void 0,type:typeof Q.type=="string"?Q.type:void 0,fetchPriority:typeof Q.fetchPriority=="string"?Q.fetchPriority:void 0,referrerPolicy:typeof Q.referrerPolicy=="string"?Q.referrerPolicy:void 0,imageSrcSet:typeof Q.imageSrcSet=="string"?Q.imageSrcSet:void 0,imageSizes:typeof Q.imageSizes=="string"?Q.imageSizes:void 0,media:typeof Q.media=="string"?Q.media:void 0})}},reactDom_production.preloadModule=function(Y,Q){if(typeof Y=="string")if(Q){var ee=K(Q.as,Q.crossOrigin);o.d.m(Y,{as:typeof Q.as=="string"&&Q.as!=="script"?Q.as:void 0,crossOrigin:ee,integrity:typeof Q.integrity=="string"?Q.integrity:void 0})}else o.d.m(Y)},reactDom_production.requestFormReset=function(Y){o.d.r(Y)},reactDom_production.unstable_batchedUpdates=function(Y,Q){return Y(Q)},reactDom_production.useFormState=function(Y,Q,ee){return G.H.useFormState(Y,Q,ee)},reactDom_production.useFormStatus=function(){return G.H.useHostTransitionStatus()},reactDom_production.version="19.1.0",reactDom_production}var hasRequiredReactDom;function requireReactDom(){if(hasRequiredReactDom)return reactDom.exports;hasRequiredReactDom=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),reactDom.exports=requireReactDom_production(),reactDom.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDomClient_production;function requireReactDomClient_production(){if(hasRequiredReactDomClient_production)return reactDomClient_production;hasRequiredReactDomClient_production=1;var r=requireScheduler$2(),e=requireReact(),t=requireReactDom();function o(q){var Z="https://react.dev/errors/"+q;if(1<arguments.length){Z+="?args[]="+encodeURIComponent(arguments[1]);for(var ne=2;ne<arguments.length;ne++)Z+="&args[]="+encodeURIComponent(arguments[ne])}return"Minified React error #"+q+"; visit "+Z+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function y(q){return!(!q||q.nodeType!==1&&q.nodeType!==9&&q.nodeType!==11)}function R(q){var Z=q,ne=q;if(q.alternate)for(;Z.return;)Z=Z.return;else{q=Z;do Z=q,(Z.flags&4098)!==0&&(ne=Z.return),q=Z.return;while(q)}return Z.tag===3?ne:null}function G(q){if(q.tag===13){var Z=q.memoizedState;if(Z===null&&(q=q.alternate,q!==null&&(Z=q.memoizedState)),Z!==null)return Z.dehydrated}return null}function K(q){if(R(q)!==q)throw Error(o(188))}function Y(q){var Z=q.alternate;if(!Z){if(Z=R(q),Z===null)throw Error(o(188));return Z!==q?null:q}for(var ne=q,ae=Z;;){var pe=ne.return;if(pe===null)break;var xe=pe.alternate;if(xe===null){if(ae=pe.return,ae!==null){ne=ae;continue}break}if(pe.child===xe.child){for(xe=pe.child;xe;){if(xe===ne)return K(pe),q;if(xe===ae)return K(pe),Z;xe=xe.sibling}throw Error(o(188))}if(ne.return!==ae.return)ne=pe,ae=xe;else{for(var Be=!1,ke=pe.child;ke;){if(ke===ne){Be=!0,ne=pe,ae=xe;break}if(ke===ae){Be=!0,ae=pe,ne=xe;break}ke=ke.sibling}if(!Be){for(ke=xe.child;ke;){if(ke===ne){Be=!0,ne=xe,ae=pe;break}if(ke===ae){Be=!0,ae=xe,ne=pe;break}ke=ke.sibling}if(!Be)throw Error(o(189))}}if(ne.alternate!==ae)throw Error(o(190))}if(ne.tag!==3)throw Error(o(188));return ne.stateNode.current===ne?q:Z}function Q(q){var Z=q.tag;if(Z===5||Z===26||Z===27||Z===6)return q;for(q=q.child;q!==null;){if(Z=Q(q),Z!==null)return Z;q=q.sibling}return null}var ee=Object.assign,ie=Symbol.for("react.element"),re=Symbol.for("react.transitional.element"),se=Symbol.for("react.portal"),le=Symbol.for("react.fragment"),ce=Symbol.for("react.strict_mode"),oe=Symbol.for("react.profiler"),ue=Symbol.for("react.provider"),ge=Symbol.for("react.consumer"),ve=Symbol.for("react.context"),_e=Symbol.for("react.forward_ref"),be=Symbol.for("react.suspense"),Re=Symbol.for("react.suspense_list"),Se=Symbol.for("react.memo"),Ee=Symbol.for("react.lazy"),ye=Symbol.for("react.activity"),de=Symbol.for("react.memo_cache_sentinel"),Me=Symbol.iterator;function Le(q){return q===null||typeof q!="object"?null:(q=Me&&q[Me]||q["@@iterator"],typeof q=="function"?q:null)}var Pe=Symbol.for("react.client.reference");function Ue(q){if(q==null)return null;if(typeof q=="function")return q.$$typeof===Pe?null:q.displayName||q.name||null;if(typeof q=="string")return q;switch(q){case le:return"Fragment";case oe:return"Profiler";case ce:return"StrictMode";case be:return"Suspense";case Re:return"SuspenseList";case ye:return"Activity"}if(typeof q=="object")switch(q.$$typeof){case se:return"Portal";case ve:return(q.displayName||"Context")+".Provider";case ge:return(q._context.displayName||"Context")+".Consumer";case _e:var Z=q.render;return q=q.displayName,q||(q=Z.displayName||Z.name||"",q=q!==""?"ForwardRef("+q+")":"ForwardRef"),q;case Se:return Z=q.displayName||null,Z!==null?Z:Ue(q.type)||"Memo";case Ee:Z=q._payload,q=q._init;try{return Ue(q(Z))}catch{}}return null}var $e=Array.isArray,Ve=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ce=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,De={pending:!1,data:null,method:null,action:null},Oe=[],Te=-1;function Ne(q){return{current:q}}function Ye(q){0>Te||(q.current=Oe[Te],Oe[Te]=null,Te--)}function Qe(q,Z){Te++,Oe[Te]=q.current,q.current=Z}var qe=Ne(null),Ze=Ne(null),ct=Ne(null),xt=Ne(null);function un(q,Z){switch(Qe(ct,Z),Qe(Ze,q),Qe(qe,null),Z.nodeType){case 9:case 11:q=(q=Z.documentElement)&&(q=q.namespaceURI)?Dp(q):0;break;default:if(q=Z.tagName,Z=Z.namespaceURI)Z=Dp(Z),q=Vp(Z,q);else switch(q){case"svg":q=1;break;case"math":q=2;break;default:q=0}}Ye(qe),Qe(qe,q)}function Vn(){Ye(qe),Ye(Ze),Ye(ct)}function In(q){q.memoizedState!==null&&Qe(xt,q);var Z=qe.current,ne=Vp(Z,q.type);Z!==ne&&(Qe(Ze,q),Qe(qe,ne))}function Un(q){Ze.current===q&&(Ye(qe),Ye(Ze)),xt.current===q&&(Ye(xt),Sf._currentValue=De)}var kn=Object.prototype.hasOwnProperty,Ln=r.unstable_scheduleCallback,Ke=r.unstable_cancelCallback,Qn=r.unstable_shouldYield,yn=r.unstable_requestPaint,kt=r.unstable_now,cn=r.unstable_getCurrentPriorityLevel,Mn=r.unstable_ImmediatePriority,Qt=r.unstable_UserBlockingPriority,He=r.unstable_NormalPriority,ze=r.unstable_LowPriority,Mt=r.unstable_IdlePriority,hn=r.log,En=r.unstable_setDisableYieldValue,an=null,Cn=null;function Pn(q){if(typeof hn=="function"&&En(q),Cn&&typeof Cn.setStrictMode=="function")try{Cn.setStrictMode(an,q)}catch{}}var Fn=Math.clz32?Math.clz32:Kn,pi=Math.log,On=Math.LN2;function Kn(q){return q>>>=0,q===0?32:31-(pi(q)/On|0)|0}var ei=256,ti=4194304;function Gn(q){var Z=q&42;if(Z!==0)return Z;switch(q&-q){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return q&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return q&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return q}}function yt(q,Z,ne){var ae=q.pendingLanes;if(ae===0)return 0;var pe=0,xe=q.suspendedLanes,Be=q.pingedLanes;q=q.warmLanes;var ke=ae&134217727;return ke!==0?(ae=ke&~xe,ae!==0?pe=Gn(ae):(Be&=ke,Be!==0?pe=Gn(Be):ne||(ne=ke&~q,ne!==0&&(pe=Gn(ne))))):(ke=ae&~xe,ke!==0?pe=Gn(ke):Be!==0?pe=Gn(Be):ne||(ne=ae&~q,ne!==0&&(pe=Gn(ne)))),pe===0?0:Z!==0&&Z!==pe&&(Z&xe)===0&&(xe=pe&-pe,ne=Z&-Z,xe>=ne||xe===32&&(ne&4194048)!==0)?Z:pe}function xn(q,Z){return(q.pendingLanes&~(q.suspendedLanes&~q.pingedLanes)&Z)===0}function Xn(q,Z){switch(q){case 1:case 2:case 4:case 8:case 64:return Z+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return Z+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pt(){var q=ei;return ei<<=1,(ei&4194048)===0&&(ei=256),q}function Nn(){var q=ti;return ti<<=1,(ti&62914560)===0&&(ti=4194304),q}function gn(q){for(var Z=[],ne=0;31>ne;ne++)Z.push(q);return Z}function Tn(q,Z){q.pendingLanes|=Z,Z!==268435456&&(q.suspendedLanes=0,q.pingedLanes=0,q.warmLanes=0)}function $n(q,Z,ne,ae,pe,xe){var Be=q.pendingLanes;q.pendingLanes=ne,q.suspendedLanes=0,q.pingedLanes=0,q.warmLanes=0,q.expiredLanes&=ne,q.entangledLanes&=ne,q.errorRecoveryDisabledLanes&=ne,q.shellSuspendCounter=0;var ke=q.entanglements,Je=q.expirationTimes,ln=q.hiddenUpdates;for(ne=Be&~ne;0<ne;){var An=31-Fn(ne),wn=1<<An;ke[An]=0,Je[An]=-1;var mn=ln[An];if(mn!==null)for(ln[An]=null,An=0;An<mn.length;An++){var _n=mn[An];_n!==null&&(_n.lane&=-536870913)}ne&=~wn}ae!==0&&Hn(q,ae,0),xe!==0&&pe===0&&q.tag!==0&&(q.suspendedLanes|=xe&~(Be&~Z))}function Hn(q,Z,ne){q.pendingLanes|=Z,q.suspendedLanes&=~Z;var ae=31-Fn(Z);q.entangledLanes|=Z,q.entanglements[ae]=q.entanglements[ae]|1073741824|ne&4194090}function ri(q,Z){var ne=q.entangledLanes|=Z;for(q=q.entanglements;ne;){var ae=31-Fn(ne),pe=1<<ae;pe&Z|q[ae]&Z&&(q[ae]|=Z),ne&=~pe}}function Ei(q){switch(q){case 2:q=1;break;case 8:q=4;break;case 32:q=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:q=128;break;case 268435456:q=134217728;break;default:q=0}return q}function Hi(q){return q&=-q,2<q?8<q?(q&134217727)!==0?32:268435456:8:2}function gi(){var q=Ce.p;return q!==0?q:(q=window.event,q===void 0?32:Qp(q.type))}function vr(q,Z){var ne=Ce.p;try{return Ce.p=q,Z()}finally{Ce.p=ne}}var Ci=Math.random().toString(36).slice(2),Er="__reactFiber$"+Ci,pr="__reactProps$"+Ci,Cr="__reactContainer$"+Ci,ms="__reactEvents$"+Ci,xl="__reactListeners$"+Ci,Jr="__reactHandles$"+Ci,ls="__reactResources$"+Ci,Hs="__reactMarker$"+Ci;function ji(q){delete q[Er],delete q[pr],delete q[ms],delete q[xl],delete q[Jr]}function Vs(q){var Z=q[Er];if(Z)return Z;for(var ne=q.parentNode;ne;){if(Z=ne[Cr]||ne[Er]){if(ne=Z.alternate,Z.child!==null||ne!==null&&ne.child!==null)for(q=Fp(q);q!==null;){if(ne=q[Er])return ne;q=Fp(q)}return Z}q=ne,ne=q.parentNode}return null}function Ts(q){if(q=q[Er]||q[Cr]){var Z=q.tag;if(Z===5||Z===6||Z===13||Z===26||Z===27||Z===3)return q}return null}function js(q){var Z=q.tag;if(Z===5||Z===26||Z===27||Z===6)return q.stateNode;throw Error(o(33))}function es(q){var Z=q[ls];return Z||(Z=q[ls]={hoistableStyles:new Map,hoistableScripts:new Map}),Z}function Sr(q){q[Hs]=!0}var po=new Set,Wa={};function bs(q,Z){Ge(q,Z),Ge(q+"Capture",Z)}function Ge(q,Z){for(Wa[q]=Z,q=0;q<Z.length;q++)po.add(Z[q])}var Ct=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),dn={},pn={};function Ot(q){return kn.call(pn,q)?!0:kn.call(dn,q)?!1:Ct.test(q)?pn[q]=!0:(dn[q]=!0,!1)}function Dn(q,Z,ne){if(Ot(Z))if(ne===null)q.removeAttribute(Z);else{switch(typeof ne){case"undefined":case"function":case"symbol":q.removeAttribute(Z);return;case"boolean":var ae=Z.toLowerCase().slice(0,5);if(ae!=="data-"&&ae!=="aria-"){q.removeAttribute(Z);return}}q.setAttribute(Z,""+ne)}}function jn(q,Z,ne){if(ne===null)q.removeAttribute(Z);else{switch(typeof ne){case"undefined":case"function":case"symbol":case"boolean":q.removeAttribute(Z);return}q.setAttribute(Z,""+ne)}}function qn(q,Z,ne,ae){if(ae===null)q.removeAttribute(ne);else{switch(typeof ae){case"undefined":case"function":case"symbol":case"boolean":q.removeAttribute(ne);return}q.setAttributeNS(Z,ne,""+ae)}}var Zn,ui;function si(q){if(Zn===void 0)try{throw Error()}catch(ne){var Z=ne.stack.trim().match(/\n( *(at )?)/);Zn=Z&&Z[1]||"",ui=-1<ne.stack.indexOf(`
    at`)?" (<anonymous>)":-1<ne.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Zn+q+ui}var ii=!1;function Mi(q,Z){if(!q||ii)return"";ii=!0;var ne=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var ae={DetermineComponentFrameRoot:function(){try{if(Z){var wn=function(){throw Error()};if(Object.defineProperty(wn.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(wn,[])}catch(_n){var mn=_n}Reflect.construct(q,[],wn)}else{try{wn.call()}catch(_n){mn=_n}q.call(wn.prototype)}}else{try{throw Error()}catch(_n){mn=_n}(wn=q())&&typeof wn.catch=="function"&&wn.catch(function(){})}}catch(_n){if(_n&&mn&&typeof _n.stack=="string")return[_n.stack,mn.stack]}return[null,null]}};ae.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var pe=Object.getOwnPropertyDescriptor(ae.DetermineComponentFrameRoot,"name");pe&&pe.configurable&&Object.defineProperty(ae.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var xe=ae.DetermineComponentFrameRoot(),Be=xe[0],ke=xe[1];if(Be&&ke){var Je=Be.split(`
`),ln=ke.split(`
`);for(pe=ae=0;ae<Je.length&&!Je[ae].includes("DetermineComponentFrameRoot");)ae++;for(;pe<ln.length&&!ln[pe].includes("DetermineComponentFrameRoot");)pe++;if(ae===Je.length||pe===ln.length)for(ae=Je.length-1,pe=ln.length-1;1<=ae&&0<=pe&&Je[ae]!==ln[pe];)pe--;for(;1<=ae&&0<=pe;ae--,pe--)if(Je[ae]!==ln[pe]){if(ae!==1||pe!==1)do if(ae--,pe--,0>pe||Je[ae]!==ln[pe]){var An=`
`+Je[ae].replace(" at new "," at ");return q.displayName&&An.includes("<anonymous>")&&(An=An.replace("<anonymous>",q.displayName)),An}while(1<=ae&&0<=pe);break}}}finally{ii=!1,Error.prepareStackTrace=ne}return(ne=q?q.displayName||q.name:"")?si(ne):""}function Vi(q){switch(q.tag){case 26:case 27:case 5:return si(q.type);case 16:return si("Lazy");case 13:return si("Suspense");case 19:return si("SuspenseList");case 0:case 15:return Mi(q.type,!1);case 11:return Mi(q.type.render,!1);case 1:return Mi(q.type,!0);case 31:return si("Activity");default:return""}}function nr(q){try{var Z="";do Z+=Vi(q),q=q.return;while(q);return Z}catch(ne){return`
Error generating stack: `+ne.message+`
`+ne.stack}}function Pi(q){switch(typeof q){case"bigint":case"boolean":case"number":case"string":case"undefined":return q;case"object":return q;default:return""}}function Ii(q){var Z=q.type;return(q=q.nodeName)&&q.toLowerCase()==="input"&&(Z==="checkbox"||Z==="radio")}function oi(q){var Z=Ii(q)?"checked":"value",ne=Object.getOwnPropertyDescriptor(q.constructor.prototype,Z),ae=""+q[Z];if(!q.hasOwnProperty(Z)&&typeof ne<"u"&&typeof ne.get=="function"&&typeof ne.set=="function"){var pe=ne.get,xe=ne.set;return Object.defineProperty(q,Z,{configurable:!0,get:function(){return pe.call(this)},set:function(Be){ae=""+Be,xe.call(this,Be)}}),Object.defineProperty(q,Z,{enumerable:ne.enumerable}),{getValue:function(){return ae},setValue:function(Be){ae=""+Be},stopTracking:function(){q._valueTracker=null,delete q[Z]}}}}function mr(q){q._valueTracker||(q._valueTracker=oi(q))}function Li(q){if(!q)return!1;var Z=q._valueTracker;if(!Z)return!0;var ne=Z.getValue(),ae="";return q&&(ae=Ii(q)?q.checked?"true":"false":q.value),q=ae,q!==ne?(Z.setValue(q),!0):!1}function Gr(q){if(q=q||(typeof document<"u"?document:void 0),typeof q>"u")return null;try{return q.activeElement||q.body}catch{return q.body}}var la=/[\n"\\]/g;function zi(q){return q.replace(la,function(Z){return"\\"+Z.charCodeAt(0).toString(16)+" "})}function Hr(q,Z,ne,ae,pe,xe,Be,ke){q.name="",Be!=null&&typeof Be!="function"&&typeof Be!="symbol"&&typeof Be!="boolean"?q.type=Be:q.removeAttribute("type"),Z!=null?Be==="number"?(Z===0&&q.value===""||q.value!=Z)&&(q.value=""+Pi(Z)):q.value!==""+Pi(Z)&&(q.value=""+Pi(Z)):Be!=="submit"&&Be!=="reset"||q.removeAttribute("value"),Z!=null?Pr(q,Be,Pi(Z)):ne!=null?Pr(q,Be,Pi(ne)):ae!=null&&q.removeAttribute("value"),pe==null&&xe!=null&&(q.defaultChecked=!!xe),pe!=null&&(q.checked=pe&&typeof pe!="function"&&typeof pe!="symbol"),ke!=null&&typeof ke!="function"&&typeof ke!="symbol"&&typeof ke!="boolean"?q.name=""+Pi(ke):q.removeAttribute("name")}function qi(q,Z,ne,ae,pe,xe,Be,ke){if(xe!=null&&typeof xe!="function"&&typeof xe!="symbol"&&typeof xe!="boolean"&&(q.type=xe),Z!=null||ne!=null){if(!(xe!=="submit"&&xe!=="reset"||Z!=null))return;ne=ne!=null?""+Pi(ne):"",Z=Z!=null?""+Pi(Z):ne,ke||Z===q.value||(q.value=Z),q.defaultValue=Z}ae=ae??pe,ae=typeof ae!="function"&&typeof ae!="symbol"&&!!ae,q.checked=ke?q.checked:!!ae,q.defaultChecked=!!ae,Be!=null&&typeof Be!="function"&&typeof Be!="symbol"&&typeof Be!="boolean"&&(q.name=Be)}function Pr(q,Z,ne){Z==="number"&&Gr(q.ownerDocument)===q||q.defaultValue===""+ne||(q.defaultValue=""+ne)}function xr(q,Z,ne,ae){if(q=q.options,Z){Z={};for(var pe=0;pe<ne.length;pe++)Z["$"+ne[pe]]=!0;for(ne=0;ne<q.length;ne++)pe=Z.hasOwnProperty("$"+q[ne].value),q[ne].selected!==pe&&(q[ne].selected=pe),pe&&ae&&(q[ne].defaultSelected=!0)}else{for(ne=""+Pi(ne),Z=null,pe=0;pe<q.length;pe++){if(q[pe].value===ne){q[pe].selected=!0,ae&&(q[pe].defaultSelected=!0);return}Z!==null||q[pe].disabled||(Z=q[pe])}Z!==null&&(Z.selected=!0)}}function Si(q,Z,ne){if(Z!=null&&(Z=""+Pi(Z),Z!==q.value&&(q.value=Z),ne==null)){q.defaultValue!==Z&&(q.defaultValue=Z);return}q.defaultValue=ne!=null?""+Pi(ne):""}function Tr(q,Z,ne,ae){if(Z==null){if(ae!=null){if(ne!=null)throw Error(o(92));if($e(ae)){if(1<ae.length)throw Error(o(93));ae=ae[0]}ne=ae}ne==null&&(ne=""),Z=ne}ne=Pi(Z),q.defaultValue=ne,ae=q.textContent,ae===ne&&ae!==""&&ae!==null&&(q.value=ae)}function Lr(q,Z){if(Z){var ne=q.firstChild;if(ne&&ne===q.lastChild&&ne.nodeType===3){ne.nodeValue=Z;return}}q.textContent=Z}var gs=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Tl(q,Z,ne){var ae=Z.indexOf("--")===0;ne==null||typeof ne=="boolean"||ne===""?ae?q.setProperty(Z,""):Z==="float"?q.cssFloat="":q[Z]="":ae?q.setProperty(Z,ne):typeof ne!="number"||ne===0||gs.has(Z)?Z==="float"?q.cssFloat=ne:q[Z]=(""+ne).trim():q[Z]=ne+"px"}function Uo(q,Z,ne){if(Z!=null&&typeof Z!="object")throw Error(o(62));if(q=q.style,ne!=null){for(var ae in ne)!ne.hasOwnProperty(ae)||Z!=null&&Z.hasOwnProperty(ae)||(ae.indexOf("--")===0?q.setProperty(ae,""):ae==="float"?q.cssFloat="":q[ae]="");for(var pe in Z)ae=Z[pe],Z.hasOwnProperty(pe)&&ne[pe]!==ae&&Tl(q,pe,ae)}else for(var xe in Z)Z.hasOwnProperty(xe)&&Tl(q,xe,Z[xe])}function Ql(q){if(q.indexOf("-")===-1)return!1;switch(q){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),wu=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function bl(q){return wu.test(""+q)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":q}var Xa=null;function qs(q){return q=q.target||q.srcElement||window,q.correspondingUseElement&&(q=q.correspondingUseElement),q.nodeType===3?q.parentNode:q}var wa=null,$a=null;function Jl(q){var Z=Ts(q);if(Z&&(q=Z.stateNode)){var ne=q[pr]||null;e:switch(q=Z.stateNode,Z.type){case"input":if(Hr(q,ne.value,ne.defaultValue,ne.defaultValue,ne.checked,ne.defaultChecked,ne.type,ne.name),Z=ne.name,ne.type==="radio"&&Z!=null){for(ne=q;ne.parentNode;)ne=ne.parentNode;for(ne=ne.querySelectorAll('input[name="'+zi(""+Z)+'"][type="radio"]'),Z=0;Z<ne.length;Z++){var ae=ne[Z];if(ae!==q&&ae.form===q.form){var pe=ae[pr]||null;if(!pe)throw Error(o(90));Hr(ae,pe.value,pe.defaultValue,pe.defaultValue,pe.checked,pe.defaultChecked,pe.type,pe.name)}}for(Z=0;Z<ne.length;Z++)ae=ne[Z],ae.form===q.form&&Li(ae)}break e;case"textarea":Si(q,ne.value,ne.defaultValue);break e;case"select":Z=ne.value,Z!=null&&xr(q,!!ne.multiple,Z,!1)}}}var ca=!1;function jc(q,Z,ne){if(ca)return q(Z,ne);ca=!0;try{var ae=q(Z);return ae}finally{if(ca=!1,(wa!==null||$a!==null)&&(uo(),wa&&(Z=wa,q=$a,$a=wa=null,Jl(Z),q)))for(Z=0;Z<q.length;Z++)Jl(q[Z])}}function zo(q,Z){var ne=q.stateNode;if(ne===null)return null;var ae=ne[pr]||null;if(ae===null)return null;ne=ae[Z];e:switch(Z){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(ae=!ae.disabled)||(q=q.type,ae=!(q==="button"||q==="input"||q==="select"||q==="textarea")),q=!ae;break e;default:q=!1}if(q)return null;if(ne&&typeof ne!="function")throw Error(o(231,Z,typeof ne));return ne}var ua=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ls=!1;if(ua)try{var ko={};Object.defineProperty(ko,"passive",{get:function(){Ls=!0}}),window.addEventListener("test",ko,ko),window.removeEventListener("test",ko,ko)}catch{Ls=!1}var Ia=null,Go=null,mo=null;function ec(){if(mo)return mo;var q,Z=Go,ne=Z.length,ae,pe="value"in Ia?Ia.value:Ia.textContent,xe=pe.length;for(q=0;q<ne&&Z[q]===pe[q];q++);var Be=ne-q;for(ae=1;ae<=Be&&Z[ne-ae]===pe[xe-ae];ae++);return mo=pe.slice(q,1<ae?1-ae:void 0)}function Os(q){var Z=q.keyCode;return"charCode"in q?(q=q.charCode,q===0&&Z===13&&(q=13)):q=Z,q===10&&(q=13),32<=q||q===13?q:0}function ha(){return!0}function Ho(){return!1}function $r(q){function Z(ne,ae,pe,xe,Be){this._reactName=ne,this._targetInst=pe,this.type=ae,this.nativeEvent=xe,this.target=Be,this.currentTarget=null;for(var ke in q)q.hasOwnProperty(ke)&&(ne=q[ke],this[ke]=ne?ne(xe):xe[ke]);return this.isDefaultPrevented=(xe.defaultPrevented!=null?xe.defaultPrevented:xe.returnValue===!1)?ha:Ho,this.isPropagationStopped=Ho,this}return ee(Z.prototype,{preventDefault:function(){this.defaultPrevented=!0;var ne=this.nativeEvent;ne&&(ne.preventDefault?ne.preventDefault():typeof ne.returnValue!="unknown"&&(ne.returnValue=!1),this.isDefaultPrevented=ha)},stopPropagation:function(){var ne=this.nativeEvent;ne&&(ne.stopPropagation?ne.stopPropagation():typeof ne.cancelBubble!="unknown"&&(ne.cancelBubble=!0),this.isPropagationStopped=ha)},persist:function(){},isPersistent:ha}),Z}var Yi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(q){return q.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},jo=$r(Yi),qo=ee({},Yi,{view:0,detail:0}),qc=$r(qo),fa,go,Da,yo=ee({},qo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_o,button:0,buttons:0,relatedTarget:function(q){return q.relatedTarget===void 0?q.fromElement===q.srcElement?q.toElement:q.fromElement:q.relatedTarget},movementX:function(q){return"movementX"in q?q.movementX:(q!==Da&&(Da&&q.type==="mousemove"?(fa=q.screenX-Da.screenX,go=q.screenY-Da.screenY):go=fa=0,Da=q),fa)},movementY:function(q){return"movementY"in q?q.movementY:go}}),Ws=$r(yo),Wc=ee({},yo,{dataTransfer:0}),Ah=$r(Wc),br=ee({},qo,{relatedTarget:0}),Al=$r(br),tc=ee({},Yi,{animationName:0,elapsedTime:0,pseudoElement:0}),Ml=$r(tc),Xc=ee({},Yi,{clipboardData:function(q){return"clipboardData"in q?q.clipboardData:window.clipboardData}}),Rl=$r(Xc),Cl=ee({},Yi,{data:0}),Pl=$r(Cl),Wo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$c={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Kc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function wl(q){var Z=this.nativeEvent;return Z.getModifierState?Z.getModifierState(q):(q=Kc[q])?!!Z[q]:!1}function _o(){return wl}var Yc=ee({},qo,{key:function(q){if(q.key){var Z=Wo[q.key]||q.key;if(Z!=="Unidentified")return Z}return q.type==="keypress"?(q=Os(q),q===13?"Enter":String.fromCharCode(q)):q.type==="keydown"||q.type==="keyup"?$c[q.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_o,charCode:function(q){return q.type==="keypress"?Os(q):0},keyCode:function(q){return q.type==="keydown"||q.type==="keyup"?q.keyCode:0},which:function(q){return q.type==="keypress"?Os(q):q.type==="keydown"||q.type==="keyup"?q.keyCode:0}}),Xo=$r(Yc),nc=ee({},yo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Il=$r(nc),Ka=ee({},qo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_o}),ic=$r(Ka),Zc=ee({},Yi,{propertyName:0,elapsedTime:0,pseudoElement:0}),da=$r(Zc),rc=ee({},yo,{deltaX:function(q){return"deltaX"in q?q.deltaX:"wheelDeltaX"in q?-q.wheelDeltaX:0},deltaY:function(q){return"deltaY"in q?q.deltaY:"wheelDeltaY"in q?-q.wheelDeltaY:"wheelDelta"in q?-q.wheelDelta:0},deltaZ:0,deltaMode:0}),sc=$r(rc),ys=ee({},Yi,{newState:0,oldState:0}),Va=$r(ys),pa=[9,13,27,32],ma=ua&&"CompositionEvent"in window,fe=null;ua&&"documentMode"in document&&(fe=document.documentMode);var we=ua&&"TextEvent"in window&&!fe,Fe=ua&&(!ma||fe&&8<fe&&11>=fe),We=" ",Lt=!1;function Sn(q,Z){switch(q){case"keyup":return pa.indexOf(Z.keyCode)!==-1;case"keydown":return Z.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Wn(q){return q=q.detail,typeof q=="object"&&"data"in q?q.data:null}var Ni=!1;function Ar(q,Z){switch(q){case"compositionend":return Wn(Z);case"keypress":return Z.which!==32?null:(Lt=!0,We);case"textInput":return q=Z.data,q===We&&Lt?null:q;default:return null}}function Fi(q,Z){if(Ni)return q==="compositionend"||!ma&&Sn(q,Z)?(q=ec(),mo=Go=Ia=null,Ni=!1,q):null;switch(q){case"paste":return null;case"keypress":if(!(Z.ctrlKey||Z.altKey||Z.metaKey)||Z.ctrlKey&&Z.altKey){if(Z.char&&1<Z.char.length)return Z.char;if(Z.which)return String.fromCharCode(Z.which)}return null;case"compositionend":return Fe&&Z.locale!=="ko"?null:Z.data;default:return null}}var Or={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jr(q){var Z=q&&q.nodeName&&q.nodeName.toLowerCase();return Z==="input"?!!Or[q.type]:Z==="textarea"}function Nr(q,Z,ne,ae){wa?$a?$a.push(ae):$a=[ae]:wa=ae,Z=bd(Z,"onChange"),0<Z.length&&(ne=new jo("onChange","change",null,ne,ae),q.push({event:ne,listeners:Z}))}var ts=null,ga=null;function ac(q){Rp(q,0)}function Qc(q){var Z=js(q);if(Li(Z))return q}function Iu(q,Z){if(q==="change")return Z}var Du=!1;if(ua){var Vu;if(ua){var oc="oninput"in document;if(!oc){var lc=document.createElement("div");lc.setAttribute("oninput","return;"),oc=typeof lc.oninput=="function"}Vu=oc}else Vu=!1;Du=Vu&&(!document.documentMode||9<document.documentMode)}function _r(){ts&&(ts.detachEvent("onpropertychange",Mf),ga=ts=null)}function Mf(q){if(q.propertyName==="value"&&Qc(ga)){var Z=[];Nr(Z,ga,q,qs(q)),jc(ac,Z)}}function Ud(q,Z,ne){q==="focusin"?(_r(),ts=Z,ga=ne,ts.attachEvent("onpropertychange",Mf)):q==="focusout"&&_r()}function Rf(q){if(q==="selectionchange"||q==="keyup"||q==="keydown")return Qc(ga)}function Jc(q,Z){if(q==="click")return Qc(Z)}function $o(q,Z){if(q==="input"||q==="change")return Qc(Z)}function Cf(q,Z){return q===Z&&(q!==0||1/q===1/Z)||q!==q&&Z!==Z}var Ns=typeof Object.is=="function"?Object.is:Cf;function La(q,Z){if(Ns(q,Z))return!0;if(typeof q!="object"||q===null||typeof Z!="object"||Z===null)return!1;var ne=Object.keys(q),ae=Object.keys(Z);if(ne.length!==ae.length)return!1;for(ae=0;ae<ne.length;ae++){var pe=ne[ae];if(!kn.call(Z,pe)||!Ns(q[pe],Z[pe]))return!1}return!0}function Fs(q){for(;q&&q.firstChild;)q=q.firstChild;return q}function Mh(q,Z){var ne=Fs(q);q=0;for(var ae;ne;){if(ne.nodeType===3){if(ae=q+ne.textContent.length,q<=Z&&ae>=Z)return{node:ne,offset:Z-q};q=ae}e:{for(;ne;){if(ne.nextSibling){ne=ne.nextSibling;break e}ne=ne.parentNode}ne=void 0}ne=Fs(ne)}}function Rh(q,Z){return q&&Z?q===Z?!0:q&&q.nodeType===3?!1:Z&&Z.nodeType===3?Rh(q,Z.parentNode):"contains"in q?q.contains(Z):q.compareDocumentPosition?!!(q.compareDocumentPosition(Z)&16):!1:!1}function Ch(q){q=q!=null&&q.ownerDocument!=null&&q.ownerDocument.defaultView!=null?q.ownerDocument.defaultView:window;for(var Z=Gr(q.document);Z instanceof q.HTMLIFrameElement;){try{var ne=typeof Z.contentWindow.location.href=="string"}catch{ne=!1}if(ne)q=Z.contentWindow;else break;Z=Gr(q.document)}return Z}function eu(q){var Z=q&&q.nodeName&&q.nodeName.toLowerCase();return Z&&(Z==="input"&&(q.type==="text"||q.type==="search"||q.type==="tel"||q.type==="url"||q.type==="password")||Z==="textarea"||q.contentEditable==="true")}var Ph=ua&&"documentMode"in document&&11>=document.documentMode,vo=null,Lu=null,tu=null,Ou=!1;function wh(q,Z,ne){var ae=ne.window===ne?ne.document:ne.nodeType===9?ne:ne.ownerDocument;Ou||vo==null||vo!==Gr(ae)||(ae=vo,"selectionStart"in ae&&eu(ae)?ae={start:ae.selectionStart,end:ae.selectionEnd}:(ae=(ae.ownerDocument&&ae.ownerDocument.defaultView||window).getSelection(),ae={anchorNode:ae.anchorNode,anchorOffset:ae.anchorOffset,focusNode:ae.focusNode,focusOffset:ae.focusOffset}),tu&&La(tu,ae)||(tu=ae,ae=bd(Lu,"onSelect"),0<ae.length&&(Z=new jo("onSelect","select",null,Z,ne),q.push({event:Z,listeners:ae}),Z.target=vo)))}function cs(q,Z){var ne={};return ne[q.toLowerCase()]=Z.toLowerCase(),ne["Webkit"+q]="webkit"+Z,ne["Moz"+q]="moz"+Z,ne}var Ko={animationend:cs("Animation","AnimationEnd"),animationiteration:cs("Animation","AnimationIteration"),animationstart:cs("Animation","AnimationStart"),transitionrun:cs("Transition","TransitionRun"),transitionstart:cs("Transition","TransitionStart"),transitioncancel:cs("Transition","TransitionCancel"),transitionend:cs("Transition","TransitionEnd")},Nu={},Pf={};ua&&(Pf=document.createElement("div").style,"AnimationEvent"in window||(delete Ko.animationend.animation,delete Ko.animationiteration.animation,delete Ko.animationstart.animation),"TransitionEvent"in window||delete Ko.transitionend.transition);function Eo(q){if(Nu[q])return Nu[q];if(!Ko[q])return q;var Z=Ko[q],ne;for(ne in Z)if(Z.hasOwnProperty(ne)&&ne in Pf)return Nu[q]=Z[ne];return q}var As=Eo("animationend"),Ih=Eo("animationiteration"),Bs=Eo("animationstart"),wf=Eo("transitionrun"),So=Eo("transitionstart"),cc=Eo("transitioncancel"),xo=Eo("transitionend"),Fu=new Map,nu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");nu.push("scrollEnd");function ns(q,Z){Fu.set(q,Z),bs(Z,[q])}var Dh=new WeakMap;function us(q,Z){if(typeof q=="object"&&q!==null){var ne=Dh.get(q);return ne!==void 0?ne:(Z={value:q,source:Z,stack:nr(Z)},Dh.set(q,Z),Z)}return{value:q,source:Z,stack:nr(Z)}}var _s=[],ya=0,Bu=0;function iu(){for(var q=ya,Z=Bu=ya=0;Z<q;){var ne=_s[Z];_s[Z++]=null;var ae=_s[Z];_s[Z++]=null;var pe=_s[Z];_s[Z++]=null;var xe=_s[Z];if(_s[Z++]=null,ae!==null&&pe!==null){var Be=ae.pending;Be===null?pe.next=pe:(pe.next=Be.next,Be.next=pe),ae.pending=pe}xe!==0&&Vh(ne,pe,xe)}}function Yo(q,Z,ne,ae){_s[ya++]=q,_s[ya++]=Z,_s[ya++]=ne,_s[ya++]=ae,Bu|=ae,q.lanes|=ae,q=q.alternate,q!==null&&(q.lanes|=ae)}function Uu(q,Z,ne,ae){return Yo(q,Z,ne,ae),uc(q)}function To(q,Z){return Yo(q,null,null,Z),uc(q)}function Vh(q,Z,ne){q.lanes|=ne;var ae=q.alternate;ae!==null&&(ae.lanes|=ne);for(var pe=!1,xe=q.return;xe!==null;)xe.childLanes|=ne,ae=xe.alternate,ae!==null&&(ae.childLanes|=ne),xe.tag===22&&(q=xe.stateNode,q===null||q._visibility&1||(pe=!0)),q=xe,xe=xe.return;return q.tag===3?(xe=q.stateNode,pe&&Z!==null&&(pe=31-Fn(ne),q=xe.hiddenUpdates,ae=q[pe],ae===null?q[pe]=[Z]:ae.push(Z),Z.lane=ne|536870912),xe):null}function uc(q){if(50<co)throw co=0,Kl=null,Error(o(185));for(var Z=q.return;Z!==null;)q=Z,Z=q.return;return q.tag===3?q.stateNode:null}var Zo={};function Lh(q,Z,ne,ae){this.tag=q,this.key=ne,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=Z,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=ae,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Us(q,Z,ne,ae){return new Lh(q,Z,ne,ae)}function ru(q){return q=q.prototype,!(!q||!q.isReactComponent)}function Fr(q,Z){var ne=q.alternate;return ne===null?(ne=Us(q.tag,Z,q.key,q.mode),ne.elementType=q.elementType,ne.type=q.type,ne.stateNode=q.stateNode,ne.alternate=q,q.alternate=ne):(ne.pendingProps=Z,ne.type=q.type,ne.flags=0,ne.subtreeFlags=0,ne.deletions=null),ne.flags=q.flags&65011712,ne.childLanes=q.childLanes,ne.lanes=q.lanes,ne.child=q.child,ne.memoizedProps=q.memoizedProps,ne.memoizedState=q.memoizedState,ne.updateQueue=q.updateQueue,Z=q.dependencies,ne.dependencies=Z===null?null:{lanes:Z.lanes,firstContext:Z.firstContext},ne.sibling=q.sibling,ne.index=q.index,ne.ref=q.ref,ne.refCleanup=q.refCleanup,ne}function Oh(q,Z){q.flags&=65011714;var ne=q.alternate;return ne===null?(q.childLanes=0,q.lanes=Z,q.child=null,q.subtreeFlags=0,q.memoizedProps=null,q.memoizedState=null,q.updateQueue=null,q.dependencies=null,q.stateNode=null):(q.childLanes=ne.childLanes,q.lanes=ne.lanes,q.child=ne.child,q.subtreeFlags=0,q.deletions=null,q.memoizedProps=ne.memoizedProps,q.memoizedState=ne.memoizedState,q.updateQueue=ne.updateQueue,q.type=ne.type,Z=ne.dependencies,q.dependencies=Z===null?null:{lanes:Z.lanes,firstContext:Z.firstContext}),q}function rs(q,Z,ne,ae,pe,xe){var Be=0;if(ae=q,typeof q=="function")ru(q)&&(Be=1);else if(typeof q=="string")Be=Vm(q,ne,qe.current)?26:q==="html"||q==="head"||q==="body"?27:5;else e:switch(q){case ye:return q=Us(31,ne,Z,pe),q.elementType=ye,q.lanes=xe,q;case le:return Qo(ne.children,pe,xe,Z);case ce:Be=8,pe|=24;break;case oe:return q=Us(12,ne,Z,pe|2),q.elementType=oe,q.lanes=xe,q;case be:return q=Us(13,ne,Z,pe),q.elementType=be,q.lanes=xe,q;case Re:return q=Us(19,ne,Z,pe),q.elementType=Re,q.lanes=xe,q;default:if(typeof q=="object"&&q!==null)switch(q.$$typeof){case ue:case ve:Be=10;break e;case ge:Be=9;break e;case _e:Be=11;break e;case Se:Be=14;break e;case Ee:Be=16,ae=null;break e}Be=29,ne=Error(o(130,q===null?"null":typeof q,"")),ae=null}return Z=Us(Be,ne,Z,pe),Z.elementType=q,Z.type=ae,Z.lanes=xe,Z}function Qo(q,Z,ne,ae){return q=Us(7,q,ae,Z),q.lanes=ne,q}function su(q,Z,ne){return q=Us(6,q,null,Z),q.lanes=ne,q}function zu(q,Z,ne){return Z=Us(4,q.children!==null?q.children:[],q.key,Z),Z.lanes=ne,Z.stateNode={containerInfo:q.containerInfo,pendingChildren:null,implementation:q.implementation},Z}var hc=[],zs=0,au=null,fc=0,hs=[],Xs=0,Jo=null,Ya=1,Za="";function bo(q,Z){hc[zs++]=fc,hc[zs++]=au,au=q,fc=Z}function ku(q,Z,ne){hs[Xs++]=Ya,hs[Xs++]=Za,hs[Xs++]=Jo,Jo=q;var ae=Ya;q=Za;var pe=32-Fn(ae)-1;ae&=~(1<<pe),ne+=1;var xe=32-Fn(Z)+pe;if(30<xe){var Be=pe-pe%5;xe=(ae&(1<<Be)-1).toString(32),ae>>=Be,pe-=Be,Ya=1<<32-Fn(Z)+pe|ne<<pe|ae,Za=xe+q}else Ya=1<<xe|ne<<pe|ae,Za=q}function Nh(q){q.return!==null&&(bo(q,1),ku(q,1,0))}function Fh(q){for(;q===au;)au=hc[--zs],hc[zs]=null,fc=hc[--zs],hc[zs]=null;for(;q===Jo;)Jo=hs[--Xs],hs[Xs]=null,Za=hs[--Xs],hs[Xs]=null,Ya=hs[--Xs],hs[Xs]=null}var Ms=null,Mr=null,$i=!1,_a=null,$s=!1,Gu=Error(o(519));function el(q){var Z=Error(o(418,""));throw Dl(us(Z,q)),Gu}function If(q){var Z=q.stateNode,ne=q.type,ae=q.memoizedProps;switch(Z[Er]=q,Z[pr]=ae,ne){case"dialog":ki("cancel",Z),ki("close",Z);break;case"iframe":case"object":case"embed":ki("load",Z);break;case"video":case"audio":for(ne=0;ne<mf.length;ne++)ki(mf[ne],Z);break;case"source":ki("error",Z);break;case"img":case"image":case"link":ki("error",Z),ki("load",Z);break;case"details":ki("toggle",Z);break;case"input":ki("invalid",Z),qi(Z,ae.value,ae.defaultValue,ae.checked,ae.defaultChecked,ae.type,ae.name,!0),mr(Z);break;case"select":ki("invalid",Z);break;case"textarea":ki("invalid",Z),Tr(Z,ae.value,ae.defaultValue,ae.children),mr(Z)}ne=ae.children,typeof ne!="string"&&typeof ne!="number"&&typeof ne!="bigint"||Z.textContent===""+ne||ae.suppressHydrationWarning===!0||Ip(Z.textContent,ne)?(ae.popover!=null&&(ki("beforetoggle",Z),ki("toggle",Z)),ae.onScroll!=null&&ki("scroll",Z),ae.onScrollEnd!=null&&ki("scrollend",Z),ae.onClick!=null&&(Z.onclick=Ad),Z=!0):Z=!1,Z||el(q)}function Bh(q){for(Ms=q.return;Ms;)switch(Ms.tag){case 5:case 13:$s=!1;return;case 27:case 3:$s=!0;return;default:Ms=Ms.return}}function Oa(q){if(q!==Ms)return!1;if(!$i)return Bh(q),$i=!0,!1;var Z=q.tag,ne;if((ne=Z!==3&&Z!==27)&&((ne=Z===5)&&(ne=q.type,ne=!(ne!=="form"&&ne!=="button")||ap(q.type,q.memoizedProps)),ne=!ne),ne&&Mr&&el(q),Bh(q),Z===13){if(q=q.memoizedState,q=q!==null?q.dehydrated:null,!q)throw Error(o(317));e:{for(q=q.nextSibling,Z=0;q;){if(q.nodeType===8)if(ne=q.data,ne==="/$"){if(Z===0){Mr=Bo(q.nextSibling);break e}Z--}else ne!=="$"&&ne!=="$!"&&ne!=="$?"||Z++;q=q.nextSibling}Mr=null}}else Z===27?(Z=Mr,Fc(q.type)?(q=hp,hp=null,Mr=q):Mr=Z):Mr=Ms?Bo(q.stateNode.nextSibling):null;return!0}function dc(){Mr=Ms=null,$i=!1}function Zi(){var q=_a;return q!==null&&(fi===null?fi=q:fi.push.apply(fi,q),_a=null),q}function Dl(q){_a===null?_a=[q]:_a.push(q)}var Uh=Ne(null),tl=null,Ao=null;function nl(q,Z,ne){Qe(Uh,Z._currentValue),Z._currentValue=ne}function Mo(q){q._currentValue=Uh.current,Ye(Uh)}function zh(q,Z,ne){for(;q!==null;){var ae=q.alternate;if((q.childLanes&Z)!==Z?(q.childLanes|=Z,ae!==null&&(ae.childLanes|=Z)):ae!==null&&(ae.childLanes&Z)!==Z&&(ae.childLanes|=Z),q===ne)break;q=q.return}}function ou(q,Z,ne,ae){var pe=q.child;for(pe!==null&&(pe.return=q);pe!==null;){var xe=pe.dependencies;if(xe!==null){var Be=pe.child;xe=xe.firstContext;e:for(;xe!==null;){var ke=xe;xe=pe;for(var Je=0;Je<Z.length;Je++)if(ke.context===Z[Je]){xe.lanes|=ne,ke=xe.alternate,ke!==null&&(ke.lanes|=ne),zh(xe.return,ne,q),ae||(Be=null);break e}xe=ke.next}}else if(pe.tag===18){if(Be=pe.return,Be===null)throw Error(o(341));Be.lanes|=ne,xe=Be.alternate,xe!==null&&(xe.lanes|=ne),zh(Be,ne,q),Be=null}else Be=pe.child;if(Be!==null)Be.return=pe;else for(Be=pe;Be!==null;){if(Be===q){Be=null;break}if(pe=Be.sibling,pe!==null){pe.return=Be.return,Be=pe;break}Be=Be.return}pe=Be}}function va(q,Z,ne,ae){q=null;for(var pe=Z,xe=!1;pe!==null;){if(!xe){if((pe.flags&524288)!==0)xe=!0;else if((pe.flags&262144)!==0)break}if(pe.tag===10){var Be=pe.alternate;if(Be===null)throw Error(o(387));if(Be=Be.memoizedProps,Be!==null){var ke=pe.type;Ns(pe.pendingProps.value,Be.value)||(q!==null?q.push(ke):q=[ke])}}else if(pe===xt.current){if(Be=pe.alternate,Be===null)throw Error(o(387));Be.memoizedState.memoizedState!==pe.memoizedState.memoizedState&&(q!==null?q.push(Sf):q=[Sf])}pe=pe.return}q!==null&&ou(Z,q,ne,ae),Z.flags|=262144}function lu(q){for(q=q.firstContext;q!==null;){if(!Ns(q.context._currentValue,q.memoizedValue))return!0;q=q.next}return!1}function Qa(q){tl=q,Ao=null,q=q.dependencies,q!==null&&(q.firstContext=null)}function wr(q){return Hu(tl,q)}function cu(q,Z){return tl===null&&Qa(q),Hu(q,Z)}function Hu(q,Z){var ne=Z._currentValue;if(Z={context:Z,memoizedValue:ne,next:null},Ao===null){if(q===null)throw Error(o(308));Ao=Z,q.dependencies={lanes:0,firstContext:Z},q.flags|=524288}else Ao=Ao.next=Z;return ne}var kh=typeof AbortController<"u"?AbortController:function(){var q=[],Z=this.signal={aborted:!1,addEventListener:function(ne,ae){q.push(ae)}};this.abort=function(){Z.aborted=!0,q.forEach(function(ne){return ne()})}},zd=r.unstable_scheduleCallback,Df=r.unstable_NormalPriority,qr={$$typeof:ve,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ju(){return{controller:new kh,data:new Map,refCount:0}}function pc(q){q.refCount--,q.refCount===0&&zd(Df,function(){q.controller.abort()})}var mc=null,uu=0,bi=0,gc=null;function Ks(q,Z){if(mc===null){var ne=mc=[];uu=0,bi=Yd(),gc={status:"pending",value:void 0,then:function(ae){ne.push(ae)}}}return uu++,Z.then(qu,qu),Z}function qu(){if(--uu===0&&mc!==null){gc!==null&&(gc.status="fulfilled");var q=mc;mc=null,bi=0,gc=null;for(var Z=0;Z<q.length;Z++)(0,q[Z])()}}function kd(q,Z){var ne=[],ae={status:"pending",value:null,reason:null,then:function(pe){ne.push(pe)}};return q.then(function(){ae.status="fulfilled",ae.value=Z;for(var pe=0;pe<ne.length;pe++)(0,ne[pe])(Z)},function(pe){for(ae.status="rejected",ae.reason=pe,pe=0;pe<ne.length;pe++)(0,ne[pe])(void 0)}),ae}var hu=Ve.S;Ve.S=function(q,Z){typeof Z=="object"&&Z!==null&&typeof Z.then=="function"&&Ks(q,Z),hu!==null&&hu(q,Z)};var Ea=Ne(null);function il(){var q=Ea.current;return q!==null?q:xi.pooledCache}function fu(q,Z){Z===null?Qe(Ea,Ea.current):Qe(Ea,Z.pool)}function Wu(){var q=il();return q===null?null:{parent:qr._currentValue,pool:q}}var du=Error(o(460)),Gh=Error(o(474)),Na=Error(o(542)),pu={then:function(){}};function Xu(q){return q=q.status,q==="fulfilled"||q==="rejected"}function yc(){}function $u(q,Z,ne){switch(ne=q[ne],ne===void 0?q.push(Z):ne!==Z&&(Z.then(yc,yc),Z=ne),Z.status){case"fulfilled":return Z.value;case"rejected":throw q=Z.reason,Vf(q),q;default:if(typeof Z.status=="string")Z.then(yc,yc);else{if(q=xi,q!==null&&100<q.shellSuspendCounter)throw Error(o(482));q=Z,q.status="pending",q.then(function(ae){if(Z.status==="pending"){var pe=Z;pe.status="fulfilled",pe.value=ae}},function(ae){if(Z.status==="pending"){var pe=Z;pe.status="rejected",pe.reason=ae}})}switch(Z.status){case"fulfilled":return Z.value;case"rejected":throw q=Z.reason,Vf(q),q}throw Sa=Z,du}}var Sa=null;function Hh(){if(Sa===null)throw Error(o(459));var q=Sa;return Sa=null,q}function Vf(q){if(q===du||q===Na)throw Error(o(483))}var Ro=!1;function jh(q){q.updateQueue={baseState:q.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function yi(q,Z){q=q.updateQueue,Z.updateQueue===q&&(Z.updateQueue={baseState:q.baseState,firstBaseUpdate:q.firstBaseUpdate,lastBaseUpdate:q.lastBaseUpdate,shared:q.shared,callbacks:null})}function Ja(q){return{lane:q,tag:0,payload:null,callback:null,next:null}}function Co(q,Z,ne){var ae=q.updateQueue;if(ae===null)return null;if(ae=ae.shared,(Qi&2)!==0){var pe=ae.pending;return pe===null?Z.next=Z:(Z.next=pe.next,pe.next=Z),ae.pending=Z,Z=uc(q),Vh(q,null,ne),Z}return Yo(q,ae,Z,ne),uc(q)}function Vl(q,Z,ne){if(Z=Z.updateQueue,Z!==null&&(Z=Z.shared,(ne&4194048)!==0)){var ae=Z.lanes;ae&=q.pendingLanes,ne|=ae,Z.lanes=ne,ri(q,ne)}}function _c(q,Z){var ne=q.updateQueue,ae=q.alternate;if(ae!==null&&(ae=ae.updateQueue,ne===ae)){var pe=null,xe=null;if(ne=ne.firstBaseUpdate,ne!==null){do{var Be={lane:ne.lane,tag:ne.tag,payload:ne.payload,callback:null,next:null};xe===null?pe=xe=Be:xe=xe.next=Be,ne=ne.next}while(ne!==null);xe===null?pe=xe=Z:xe=xe.next=Z}else pe=xe=Z;ne={baseState:ae.baseState,firstBaseUpdate:pe,lastBaseUpdate:xe,shared:ae.shared,callbacks:ae.callbacks},q.updateQueue=ne;return}q=ne.lastBaseUpdate,q===null?ne.firstBaseUpdate=Z:q.next=Z,ne.lastBaseUpdate=Z}var qh=!1;function mu(){if(qh){var q=gc;if(q!==null)throw q}}function vc(q,Z,ne,ae){qh=!1;var pe=q.updateQueue;Ro=!1;var xe=pe.firstBaseUpdate,Be=pe.lastBaseUpdate,ke=pe.shared.pending;if(ke!==null){pe.shared.pending=null;var Je=ke,ln=Je.next;Je.next=null,Be===null?xe=ln:Be.next=ln,Be=Je;var An=q.alternate;An!==null&&(An=An.updateQueue,ke=An.lastBaseUpdate,ke!==Be&&(ke===null?An.firstBaseUpdate=ln:ke.next=ln,An.lastBaseUpdate=Je))}if(xe!==null){var wn=pe.baseState;Be=0,An=ln=Je=null,ke=xe;do{var mn=ke.lane&-536870913,_n=mn!==ke.lane;if(_n?(ci&mn)===mn:(ae&mn)===mn){mn!==0&&mn===bi&&(qh=!0),An!==null&&(An=An.next={lane:0,tag:ke.tag,payload:ke.payload,callback:null,next:null});e:{var vi=q,di=ke;mn=Z;var dr=ne;switch(di.tag){case 1:if(vi=di.payload,typeof vi=="function"){wn=vi.call(dr,wn,mn);break e}wn=vi;break e;case 3:vi.flags=vi.flags&-65537|128;case 0:if(vi=di.payload,mn=typeof vi=="function"?vi.call(dr,wn,mn):vi,mn==null)break e;wn=ee({},wn,mn);break e;case 2:Ro=!0}}mn=ke.callback,mn!==null&&(q.flags|=64,_n&&(q.flags|=8192),_n=pe.callbacks,_n===null?pe.callbacks=[mn]:_n.push(mn))}else _n={lane:mn,tag:ke.tag,payload:ke.payload,callback:ke.callback,next:null},An===null?(ln=An=_n,Je=wn):An=An.next=_n,Be|=mn;if(ke=ke.next,ke===null){if(ke=pe.shared.pending,ke===null)break;_n=ke,ke=_n.next,_n.next=null,pe.lastBaseUpdate=_n,pe.shared.pending=null}}while(!0);An===null&&(Je=wn),pe.baseState=Je,pe.firstBaseUpdate=ln,pe.lastBaseUpdate=An,xe===null&&(pe.shared.lanes=0),ja|=Be,q.lanes=Be,q.memoizedState=wn}}function Ec(q,Z){if(typeof q!="function")throw Error(o(191,q));q.call(Z)}function Lf(q,Z){var ne=q.callbacks;if(ne!==null)for(q.callbacks=null,q=0;q<ne.length;q++)Ec(ne[q],Z)}var Sc=Ne(null),Ku=Ne(0);function Of(q,Z){q=Ra,Qe(Ku,q),Qe(Sc,Z),Ra=q|Z.baseLanes}function Wh(){Qe(Ku,Ra),Qe(Sc,Sc.current)}function gu(){Ra=Ku.current,Ye(Sc),Ye(Ku)}var Po=0,Ai=null,tr=null,Wr=null,Yu=!1,rl=!1,Rs=!1,Kr=0,xa=0,fs=null,Nf=0;function Br(){throw Error(o(321))}function vs(q,Z){if(Z===null)return!1;for(var ne=0;ne<Z.length&&ne<q.length;ne++)if(!Ns(q[ne],Z[ne]))return!1;return!0}function wo(q,Z,ne,ae,pe,xe){return Po=xe,Ai=Z,Z.memoizedState=null,Z.updateQueue=null,Z.lanes=0,Ve.H=q===null||q.memoizedState===null?sh:cf,Rs=!1,xe=ne(ae,pe),Rs=!1,rl&&(xe=Bf(Z,ne,ae,pe)),Ff(q),xe}function Ff(q){Ve.H=vu;var Z=tr!==null&&tr.next!==null;if(Po=0,Wr=tr=Ai=null,Yu=!1,xa=0,fs=null,Z)throw Error(o(300));q===null||ss||(q=q.dependencies,q!==null&&lu(q)&&(ss=!0))}function Bf(q,Z,ne,ae){Ai=q;var pe=0;do{if(rl&&(fs=null),xa=0,rl=!1,25<=pe)throw Error(o(301));if(pe+=1,Wr=tr=null,q.updateQueue!=null){var xe=q.updateQueue;xe.lastEffect=null,xe.events=null,xe.stores=null,xe.memoCache!=null&&(xe.memoCache.index=0)}Ve.H=hd,xe=Z(ne,ae)}while(rl);return xe}function Gd(){var q=Ve.H,Z=q.useState()[0];return Z=typeof Z.then=="function"?Fa(Z):Z,q=q.useState()[0],(tr!==null?tr.memoizedState:null)!==q&&(Ai.flags|=1024),Z}function Xh(){var q=Kr!==0;return Kr=0,q}function Zu(q,Z,ne){Z.updateQueue=q.updateQueue,Z.flags&=-2053,q.lanes&=~ne}function $h(q){if(Yu){for(q=q.memoizedState;q!==null;){var Z=q.queue;Z!==null&&(Z.pending=null),q=q.next}Yu=!1}Po=0,Wr=tr=Ai=null,rl=!1,xa=Kr=0,fs=null}function Cs(){var q={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Wr===null?Ai.memoizedState=Wr=q:Wr=Wr.next=q,Wr}function Xr(){if(tr===null){var q=Ai.alternate;q=q!==null?q.memoizedState:null}else q=tr.next;var Z=Wr===null?Ai.memoizedState:Wr.next;if(Z!==null)Wr=Z,tr=q;else{if(q===null)throw Ai.alternate===null?Error(o(467)):Error(o(310));tr=q,q={memoizedState:tr.memoizedState,baseState:tr.baseState,baseQueue:tr.baseQueue,queue:tr.queue,next:null},Wr===null?Ai.memoizedState=Wr=q:Wr=Wr.next=q}return Wr}function sl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Fa(q){var Z=xa;return xa+=1,fs===null&&(fs=[]),q=$u(fs,q,Z),Z=Ai,(Wr===null?Z.memoizedState:Wr.next)===null&&(Z=Z.alternate,Ve.H=Z===null||Z.memoizedState===null?sh:cf),q}function Qu(q){if(q!==null&&typeof q=="object"){if(typeof q.then=="function")return Fa(q);if(q.$$typeof===ve)return wr(q)}throw Error(o(438,String(q)))}function Kh(q){var Z=null,ne=Ai.updateQueue;if(ne!==null&&(Z=ne.memoCache),Z==null){var ae=Ai.alternate;ae!==null&&(ae=ae.updateQueue,ae!==null&&(ae=ae.memoCache,ae!=null&&(Z={data:ae.data.map(function(pe){return pe.slice()}),index:0})))}if(Z==null&&(Z={data:[],index:0}),ne===null&&(ne=sl(),Ai.updateQueue=ne),ne.memoCache=Z,ne=Z.data[Z.index],ne===void 0)for(ne=Z.data[Z.index]=Array(q),ae=0;ae<q;ae++)ne[ae]=de;return Z.index++,ne}function Io(q,Z){return typeof Z=="function"?Z(q):Z}function al(q){var Z=Xr();return Yh(Z,tr,q)}function Yh(q,Z,ne){var ae=q.queue;if(ae===null)throw Error(o(311));ae.lastRenderedReducer=ne;var pe=q.baseQueue,xe=ae.pending;if(xe!==null){if(pe!==null){var Be=pe.next;pe.next=xe.next,xe.next=Be}Z.baseQueue=pe=xe,ae.pending=null}if(xe=q.baseState,pe===null)q.memoizedState=xe;else{Z=pe.next;var ke=Be=null,Je=null,ln=Z,An=!1;do{var wn=ln.lane&-536870913;if(wn!==ln.lane?(ci&wn)===wn:(Po&wn)===wn){var mn=ln.revertLane;if(mn===0)Je!==null&&(Je=Je.next={lane:0,revertLane:0,action:ln.action,hasEagerState:ln.hasEagerState,eagerState:ln.eagerState,next:null}),wn===bi&&(An=!0);else if((Po&mn)===mn){ln=ln.next,mn===bi&&(An=!0);continue}else wn={lane:0,revertLane:ln.revertLane,action:ln.action,hasEagerState:ln.hasEagerState,eagerState:ln.eagerState,next:null},Je===null?(ke=Je=wn,Be=xe):Je=Je.next=wn,Ai.lanes|=mn,ja|=mn;wn=ln.action,Rs&&ne(xe,wn),xe=ln.hasEagerState?ln.eagerState:ne(xe,wn)}else mn={lane:wn,revertLane:ln.revertLane,action:ln.action,hasEagerState:ln.hasEagerState,eagerState:ln.eagerState,next:null},Je===null?(ke=Je=mn,Be=xe):Je=Je.next=mn,Ai.lanes|=wn,ja|=wn;ln=ln.next}while(ln!==null&&ln!==Z);if(Je===null?Be=xe:Je.next=ke,!Ns(xe,q.memoizedState)&&(ss=!0,An&&(ne=gc,ne!==null)))throw ne;q.memoizedState=xe,q.baseState=Be,q.baseQueue=Je,ae.lastRenderedState=xe}return pe===null&&(ae.lanes=0),[q.memoizedState,ae.dispatch]}function Zh(q){var Z=Xr(),ne=Z.queue;if(ne===null)throw Error(o(311));ne.lastRenderedReducer=q;var ae=ne.dispatch,pe=ne.pending,xe=Z.memoizedState;if(pe!==null){ne.pending=null;var Be=pe=pe.next;do xe=q(xe,Be.action),Be=Be.next;while(Be!==pe);Ns(xe,Z.memoizedState)||(ss=!0),Z.memoizedState=xe,Z.baseQueue===null&&(Z.baseState=xe),ne.lastRenderedState=xe}return[xe,ae]}function Uf(q,Z,ne){var ae=Ai,pe=Xr(),xe=$i;if(xe){if(ne===void 0)throw Error(o(407));ne=ne()}else ne=Z();var Be=!Ns((tr||pe).memoizedState,ne);Be&&(pe.memoizedState=ne,ss=!0),pe=pe.queue;var ke=kf.bind(null,ae,pe,q);if(bc(2048,8,ke,[q]),pe.getSnapshot!==Z||Be||Wr!==null&&Wr.memoizedState.tag&1){if(ae.flags|=2048,Tc(9,yu(),zf.bind(null,ae,pe,ne,Z),null),xi===null)throw Error(o(349));xe||(Po&124)!==0||xc(ae,Z,ne)}return ne}function xc(q,Z,ne){q.flags|=16384,q={getSnapshot:Z,value:ne},Z=Ai.updateQueue,Z===null?(Z=sl(),Ai.updateQueue=Z,Z.stores=[q]):(ne=Z.stores,ne===null?Z.stores=[q]:ne.push(q))}function zf(q,Z,ne,ae){Z.value=ne,Z.getSnapshot=ae,Gf(Z)&&Hf(q)}function kf(q,Z,ne){return ne(function(){Gf(Z)&&Hf(q)})}function Gf(q){var Z=q.getSnapshot;q=q.value;try{var ne=Z();return!Ns(q,ne)}catch{return!0}}function Hf(q){var Z=To(q,2);Z!==null&&Is(Z,q,2)}function Qh(q){var Z=Cs();if(typeof q=="function"){var ne=q;if(q=ne(),Rs){Pn(!0);try{ne()}finally{Pn(!1)}}}return Z.memoizedState=Z.baseState=q,Z.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Io,lastRenderedState:q},Z}function jf(q,Z,ne,ae){return q.baseState=ne,Yh(q,tr,typeof ae=="function"?ae:Io)}function Hd(q,Z,ne,ae,pe){if(rh(q))throw Error(o(485));if(q=Z.action,q!==null){var xe={payload:pe,action:q,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Be){xe.listeners.push(Be)}};Ve.T!==null?ne(!0):xe.isTransition=!1,ae(xe),ne=Z.pending,ne===null?(xe.next=Z.pending=xe,qf(Z,xe)):(xe.next=ne.next,Z.pending=ne.next=xe)}}function qf(q,Z){var ne=Z.action,ae=Z.payload,pe=q.state;if(Z.isTransition){var xe=Ve.T,Be={};Ve.T=Be;try{var ke=ne(pe,ae),Je=Ve.S;Je!==null&&Je(Be,ke),Wf(q,Z,ke)}catch(ln){Jh(q,Z,ln)}finally{Ve.T=xe}}else try{xe=ne(pe,ae),Wf(q,Z,xe)}catch(ln){Jh(q,Z,ln)}}function Wf(q,Z,ne){ne!==null&&typeof ne=="object"&&typeof ne.then=="function"?ne.then(function(ae){Xf(q,Z,ae)},function(ae){return Jh(q,Z,ae)}):Xf(q,Z,ne)}function Xf(q,Z,ne){Z.status="fulfilled",Z.value=ne,$f(Z),q.state=ne,Z=q.pending,Z!==null&&(ne=Z.next,ne===Z?q.pending=null:(ne=ne.next,Z.next=ne,qf(q,ne)))}function Jh(q,Z,ne){var ae=q.pending;if(q.pending=null,ae!==null){ae=ae.next;do Z.status="rejected",Z.reason=ne,$f(Z),Z=Z.next;while(Z!==ae)}q.action=null}function $f(q){q=q.listeners;for(var Z=0;Z<q.length;Z++)(0,q[Z])()}function ef(q,Z){return Z}function Kf(q,Z){if($i){var ne=xi.formState;if(ne!==null){e:{var ae=Ai;if($i){if(Mr){t:{for(var pe=Mr,xe=$s;pe.nodeType!==8;){if(!xe){pe=null;break t}if(pe=Bo(pe.nextSibling),pe===null){pe=null;break t}}xe=pe.data,pe=xe==="F!"||xe==="F"?pe:null}if(pe){Mr=Bo(pe.nextSibling),ae=pe.data==="F!";break e}}el(ae)}ae=!1}ae&&(Z=ne[0])}}return ne=Cs(),ne.memoizedState=ne.baseState=Z,ae={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ef,lastRenderedState:Z},ne.queue=ae,ne=cd.bind(null,Ai,ae),ae.dispatch=ne,ae=Qh(!1),xe=ih.bind(null,Ai,!1,ae.queue),ae=Cs(),pe={state:Z,dispatch:null,action:q,pending:null},ae.queue=pe,ne=Hd.bind(null,Ai,pe,xe,ne),pe.dispatch=ne,ae.memoizedState=q,[Z,ne,!1]}function Yf(q){var Z=Xr();return Zf(Z,tr,q)}function Zf(q,Z,ne){if(Z=Yh(q,Z,ef)[0],q=al(Io)[0],typeof Z=="object"&&Z!==null&&typeof Z.then=="function")try{var ae=Fa(Z)}catch(Be){throw Be===du?Na:Be}else ae=Z;Z=Xr();var pe=Z.queue,xe=pe.dispatch;return ne!==Z.memoizedState&&(Ai.flags|=2048,Tc(9,yu(),jd.bind(null,pe,ne),null)),[ae,xe,q]}function jd(q,Z){q.action=Z}function Qf(q){var Z=Xr(),ne=tr;if(ne!==null)return Zf(Z,ne,q);Xr(),Z=Z.memoizedState,ne=Xr();var ae=ne.queue.dispatch;return ne.memoizedState=q,[Z,ae,!1]}function Tc(q,Z,ne,ae){return q={tag:q,create:ne,deps:ae,inst:Z,next:null},Z=Ai.updateQueue,Z===null&&(Z=sl(),Ai.updateQueue=Z),ne=Z.lastEffect,ne===null?Z.lastEffect=q.next=q:(ae=ne.next,ne.next=q,q.next=ae,Z.lastEffect=q),q}function yu(){return{destroy:void 0,resource:void 0}}function tf(){return Xr().memoizedState}function Ju(q,Z,ne,ae){var pe=Cs();ae=ae===void 0?null:ae,Ai.flags|=q,pe.memoizedState=Tc(1|Z,yu(),ne,ae)}function bc(q,Z,ne,ae){var pe=Xr();ae=ae===void 0?null:ae;var xe=pe.memoizedState.inst;tr!==null&&ae!==null&&vs(ae,tr.memoizedState.deps)?pe.memoizedState=Tc(Z,xe,ne,ae):(Ai.flags|=q,pe.memoizedState=Tc(1|Z,xe,ne,ae))}function nf(q,Z){Ju(8390656,8,q,Z)}function rf(q,Z){bc(2048,8,q,Z)}function eh(q,Z){return bc(4,2,q,Z)}function th(q,Z){return bc(4,4,q,Z)}function Jf(q,Z){if(typeof Z=="function"){q=q();var ne=Z(q);return function(){typeof ne=="function"?ne():Z(null)}}if(Z!=null)return q=q(),Z.current=q,function(){Z.current=null}}function ed(q,Z,ne){ne=ne!=null?ne.concat([q]):null,bc(4,4,Jf.bind(null,Z,q),ne)}function sf(){}function td(q,Z){var ne=Xr();Z=Z===void 0?null:Z;var ae=ne.memoizedState;return Z!==null&&vs(Z,ae[1])?ae[0]:(ne.memoizedState=[q,Z],q)}function af(q,Z){var ne=Xr();Z=Z===void 0?null:Z;var ae=ne.memoizedState;if(Z!==null&&vs(Z,ae[1]))return ae[0];if(ae=q(),Rs){Pn(!0);try{q()}finally{Pn(!1)}}return ne.memoizedState=[ae,Z],ae}function nh(q,Z,ne){return ne===void 0||(Po&1073741824)!==0?q.memoizedState=Z:(q.memoizedState=ne,q=gh(),Ai.lanes|=q,ja|=q,ne)}function nd(q,Z,ne,ae){return Ns(ne,Z)?ne:Sc.current!==null?(q=nh(q,ne,ae),Ns(q,Z)||(ss=!0),q):(Po&42)===0?(ss=!0,q.memoizedState=ne):(q=gh(),Ai.lanes|=q,ja|=q,Z)}function rd(q,Z,ne,ae,pe){var xe=Ce.p;Ce.p=xe!==0&&8>xe?xe:8;var Be=Ve.T,ke={};Ve.T=ke,ih(q,!1,Z,ne);try{var Je=pe(),ln=Ve.S;if(ln!==null&&ln(ke,Je),Je!==null&&typeof Je=="object"&&typeof Je.then=="function"){var An=kd(Je,ae);_u(q,Z,An,Vr(q))}else _u(q,Z,ae,Vr(q))}catch(wn){_u(q,Z,{then:function(){},status:"rejected",reason:wn},Vr())}finally{Ce.p=xe,Ve.T=Be}}function qd(){}function of(q,Z,ne,ae){if(q.tag!==5)throw Error(o(476));var pe=sd(q).queue;rd(q,pe,Z,De,ne===null?qd:function(){return ad(q),ne(ae)})}function sd(q){var Z=q.memoizedState;if(Z!==null)return Z;Z={memoizedState:De,baseState:De,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Io,lastRenderedState:De},next:null};var ne={};return Z.next={memoizedState:ne,baseState:ne,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Io,lastRenderedState:ne},next:null},q.memoizedState=Z,q=q.alternate,q!==null&&(q.memoizedState=Z),Z}function ad(q){var Z=sd(q).next.queue;_u(q,Z,{},Vr())}function lf(){return wr(Sf)}function od(){return Xr().memoizedState}function ld(){return Xr().memoizedState}function Wd(q){for(var Z=q.return;Z!==null;){switch(Z.tag){case 24:case 3:var ne=Vr();q=Ja(ne);var ae=Co(Z,q,ne);ae!==null&&(Is(ae,Z,ne),Vl(ae,Z,ne)),Z={cache:ju()},q.payload=Z;return}Z=Z.return}}function Xd(q,Z,ne){var ae=Vr();ne={lane:ae,revertLane:0,action:ne,hasEagerState:!1,eagerState:null,next:null},rh(q)?ud(Z,ne):(ne=Uu(q,Z,ne,ae),ne!==null&&(Is(ne,q,ae),Ys(ne,Z,ae)))}function cd(q,Z,ne){var ae=Vr();_u(q,Z,ne,ae)}function _u(q,Z,ne,ae){var pe={lane:ae,revertLane:0,action:ne,hasEagerState:!1,eagerState:null,next:null};if(rh(q))ud(Z,pe);else{var xe=q.alternate;if(q.lanes===0&&(xe===null||xe.lanes===0)&&(xe=Z.lastRenderedReducer,xe!==null))try{var Be=Z.lastRenderedState,ke=xe(Be,ne);if(pe.hasEagerState=!0,pe.eagerState=ke,Ns(ke,Be))return Yo(q,Z,pe,0),xi===null&&iu(),!1}catch{}finally{}if(ne=Uu(q,Z,pe,ae),ne!==null)return Is(ne,q,ae),Ys(ne,Z,ae),!0}return!1}function ih(q,Z,ne,ae){if(ae={lane:2,revertLane:Yd(),action:ae,hasEagerState:!1,eagerState:null,next:null},rh(q)){if(Z)throw Error(o(479))}else Z=Uu(q,ne,ae,2),Z!==null&&Is(Z,q,2)}function rh(q){var Z=q.alternate;return q===Ai||Z!==null&&Z===Ai}function ud(q,Z){rl=Yu=!0;var ne=q.pending;ne===null?Z.next=Z:(Z.next=ne.next,ne.next=Z),q.pending=Z}function Ys(q,Z,ne){if((ne&4194048)!==0){var ae=Z.lanes;ae&=q.pendingLanes,ne|=ae,Z.lanes=ne,ri(q,ne)}}var vu={readContext:wr,use:Qu,useCallback:Br,useContext:Br,useEffect:Br,useImperativeHandle:Br,useLayoutEffect:Br,useInsertionEffect:Br,useMemo:Br,useReducer:Br,useRef:Br,useState:Br,useDebugValue:Br,useDeferredValue:Br,useTransition:Br,useSyncExternalStore:Br,useId:Br,useHostTransitionStatus:Br,useFormState:Br,useActionState:Br,useOptimistic:Br,useMemoCache:Br,useCacheRefresh:Br},sh={readContext:wr,use:Qu,useCallback:function(q,Z){return Cs().memoizedState=[q,Z===void 0?null:Z],q},useContext:wr,useEffect:nf,useImperativeHandle:function(q,Z,ne){ne=ne!=null?ne.concat([q]):null,Ju(4194308,4,Jf.bind(null,Z,q),ne)},useLayoutEffect:function(q,Z){return Ju(4194308,4,q,Z)},useInsertionEffect:function(q,Z){Ju(4,2,q,Z)},useMemo:function(q,Z){var ne=Cs();Z=Z===void 0?null:Z;var ae=q();if(Rs){Pn(!0);try{q()}finally{Pn(!1)}}return ne.memoizedState=[ae,Z],ae},useReducer:function(q,Z,ne){var ae=Cs();if(ne!==void 0){var pe=ne(Z);if(Rs){Pn(!0);try{ne(Z)}finally{Pn(!1)}}}else pe=Z;return ae.memoizedState=ae.baseState=pe,q={pending:null,lanes:0,dispatch:null,lastRenderedReducer:q,lastRenderedState:pe},ae.queue=q,q=q.dispatch=Xd.bind(null,Ai,q),[ae.memoizedState,q]},useRef:function(q){var Z=Cs();return q={current:q},Z.memoizedState=q},useState:function(q){q=Qh(q);var Z=q.queue,ne=cd.bind(null,Ai,Z);return Z.dispatch=ne,[q.memoizedState,ne]},useDebugValue:sf,useDeferredValue:function(q,Z){var ne=Cs();return nh(ne,q,Z)},useTransition:function(){var q=Qh(!1);return q=rd.bind(null,Ai,q.queue,!0,!1),Cs().memoizedState=q,[!1,q]},useSyncExternalStore:function(q,Z,ne){var ae=Ai,pe=Cs();if($i){if(ne===void 0)throw Error(o(407));ne=ne()}else{if(ne=Z(),xi===null)throw Error(o(349));(ci&124)!==0||xc(ae,Z,ne)}pe.memoizedState=ne;var xe={value:ne,getSnapshot:Z};return pe.queue=xe,nf(kf.bind(null,ae,xe,q),[q]),ae.flags|=2048,Tc(9,yu(),zf.bind(null,ae,xe,ne,Z),null),ne},useId:function(){var q=Cs(),Z=xi.identifierPrefix;if($i){var ne=Za,ae=Ya;ne=(ae&~(1<<32-Fn(ae)-1)).toString(32)+ne,Z="«"+Z+"R"+ne,ne=Kr++,0<ne&&(Z+="H"+ne.toString(32)),Z+="»"}else ne=Nf++,Z="«"+Z+"r"+ne.toString(32)+"»";return q.memoizedState=Z},useHostTransitionStatus:lf,useFormState:Kf,useActionState:Kf,useOptimistic:function(q){var Z=Cs();Z.memoizedState=Z.baseState=q;var ne={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return Z.queue=ne,Z=ih.bind(null,Ai,!0,ne),ne.dispatch=Z,[q,Z]},useMemoCache:Kh,useCacheRefresh:function(){return Cs().memoizedState=Wd.bind(null,Ai)}},cf={readContext:wr,use:Qu,useCallback:td,useContext:wr,useEffect:rf,useImperativeHandle:ed,useInsertionEffect:eh,useLayoutEffect:th,useMemo:af,useReducer:al,useRef:tf,useState:function(){return al(Io)},useDebugValue:sf,useDeferredValue:function(q,Z){var ne=Xr();return nd(ne,tr.memoizedState,q,Z)},useTransition:function(){var q=al(Io)[0],Z=Xr().memoizedState;return[typeof q=="boolean"?q:Fa(q),Z]},useSyncExternalStore:Uf,useId:od,useHostTransitionStatus:lf,useFormState:Yf,useActionState:Yf,useOptimistic:function(q,Z){var ne=Xr();return jf(ne,tr,q,Z)},useMemoCache:Kh,useCacheRefresh:ld},hd={readContext:wr,use:Qu,useCallback:td,useContext:wr,useEffect:rf,useImperativeHandle:ed,useInsertionEffect:eh,useLayoutEffect:th,useMemo:af,useReducer:Zh,useRef:tf,useState:function(){return Zh(Io)},useDebugValue:sf,useDeferredValue:function(q,Z){var ne=Xr();return tr===null?nh(ne,q,Z):nd(ne,tr.memoizedState,q,Z)},useTransition:function(){var q=Zh(Io)[0],Z=Xr().memoizedState;return[typeof q=="boolean"?q:Fa(q),Z]},useSyncExternalStore:Uf,useId:od,useHostTransitionStatus:lf,useFormState:Qf,useActionState:Qf,useOptimistic:function(q,Z){var ne=Xr();return tr!==null?jf(ne,tr,q,Z):(ne.baseState=q,[q,ne.queue.dispatch])},useMemoCache:Kh,useCacheRefresh:ld},Ll=null,Eu=0;function Su(q){var Z=Eu;return Eu+=1,Ll===null&&(Ll=[]),$u(Ll,q,Z)}function Ac(q,Z){Z=Z.props.ref,q.ref=Z!==void 0?Z:null}function ah(q,Z){throw Z.$$typeof===ie?Error(o(525)):(q=Object.prototype.toString.call(Z),Error(o(31,q==="[object Object]"?"object with keys {"+Object.keys(Z).join(", ")+"}":q)))}function fd(q){var Z=q._init;return Z(q._payload)}function dd(q){function Z(Ft,wt){if(q){var rn=Ft.deletions;rn===null?(Ft.deletions=[wt],Ft.flags|=16):rn.push(wt)}}function ne(Ft,wt){if(!q)return null;for(;wt!==null;)Z(Ft,wt),wt=wt.sibling;return null}function ae(Ft){for(var wt=new Map;Ft!==null;)Ft.key!==null?wt.set(Ft.key,Ft):wt.set(Ft.index,Ft),Ft=Ft.sibling;return wt}function pe(Ft,wt){return Ft=Fr(Ft,wt),Ft.index=0,Ft.sibling=null,Ft}function xe(Ft,wt,rn){return Ft.index=rn,q?(rn=Ft.alternate,rn!==null?(rn=rn.index,rn<wt?(Ft.flags|=67108866,wt):rn):(Ft.flags|=67108866,wt)):(Ft.flags|=1048576,wt)}function Be(Ft){return q&&Ft.alternate===null&&(Ft.flags|=67108866),Ft}function ke(Ft,wt,rn,Rn){return wt===null||wt.tag!==6?(wt=su(rn,Ft.mode,Rn),wt.return=Ft,wt):(wt=pe(wt,rn),wt.return=Ft,wt)}function Je(Ft,wt,rn,Rn){var ni=rn.type;return ni===le?An(Ft,wt,rn.props.children,Rn,rn.key):wt!==null&&(wt.elementType===ni||typeof ni=="object"&&ni!==null&&ni.$$typeof===Ee&&fd(ni)===wt.type)?(wt=pe(wt,rn.props),Ac(wt,rn),wt.return=Ft,wt):(wt=rs(rn.type,rn.key,rn.props,null,Ft.mode,Rn),Ac(wt,rn),wt.return=Ft,wt)}function ln(Ft,wt,rn,Rn){return wt===null||wt.tag!==4||wt.stateNode.containerInfo!==rn.containerInfo||wt.stateNode.implementation!==rn.implementation?(wt=zu(rn,Ft.mode,Rn),wt.return=Ft,wt):(wt=pe(wt,rn.children||[]),wt.return=Ft,wt)}function An(Ft,wt,rn,Rn,ni){return wt===null||wt.tag!==7?(wt=Qo(rn,Ft.mode,Rn,ni),wt.return=Ft,wt):(wt=pe(wt,rn),wt.return=Ft,wt)}function wn(Ft,wt,rn){if(typeof wt=="string"&&wt!==""||typeof wt=="number"||typeof wt=="bigint")return wt=su(""+wt,Ft.mode,rn),wt.return=Ft,wt;if(typeof wt=="object"&&wt!==null){switch(wt.$$typeof){case re:return rn=rs(wt.type,wt.key,wt.props,null,Ft.mode,rn),Ac(rn,wt),rn.return=Ft,rn;case se:return wt=zu(wt,Ft.mode,rn),wt.return=Ft,wt;case Ee:var Rn=wt._init;return wt=Rn(wt._payload),wn(Ft,wt,rn)}if($e(wt)||Le(wt))return wt=Qo(wt,Ft.mode,rn,null),wt.return=Ft,wt;if(typeof wt.then=="function")return wn(Ft,Su(wt),rn);if(wt.$$typeof===ve)return wn(Ft,cu(Ft,wt),rn);ah(Ft,wt)}return null}function mn(Ft,wt,rn,Rn){var ni=wt!==null?wt.key:null;if(typeof rn=="string"&&rn!==""||typeof rn=="number"||typeof rn=="bigint")return ni!==null?null:ke(Ft,wt,""+rn,Rn);if(typeof rn=="object"&&rn!==null){switch(rn.$$typeof){case re:return rn.key===ni?Je(Ft,wt,rn,Rn):null;case se:return rn.key===ni?ln(Ft,wt,rn,Rn):null;case Ee:return ni=rn._init,rn=ni(rn._payload),mn(Ft,wt,rn,Rn)}if($e(rn)||Le(rn))return ni!==null?null:An(Ft,wt,rn,Rn,null);if(typeof rn.then=="function")return mn(Ft,wt,Su(rn),Rn);if(rn.$$typeof===ve)return mn(Ft,wt,cu(Ft,rn),Rn);ah(Ft,rn)}return null}function _n(Ft,wt,rn,Rn,ni){if(typeof Rn=="string"&&Rn!==""||typeof Rn=="number"||typeof Rn=="bigint")return Ft=Ft.get(rn)||null,ke(wt,Ft,""+Rn,ni);if(typeof Rn=="object"&&Rn!==null){switch(Rn.$$typeof){case re:return Ft=Ft.get(Rn.key===null?rn:Rn.key)||null,Je(wt,Ft,Rn,ni);case se:return Ft=Ft.get(Rn.key===null?rn:Rn.key)||null,ln(wt,Ft,Rn,ni);case Ee:var Ui=Rn._init;return Rn=Ui(Rn._payload),_n(Ft,wt,rn,Rn,ni)}if($e(Rn)||Le(Rn))return Ft=Ft.get(rn)||null,An(wt,Ft,Rn,ni,null);if(typeof Rn.then=="function")return _n(Ft,wt,rn,Su(Rn),ni);if(Rn.$$typeof===ve)return _n(Ft,wt,rn,cu(wt,Rn),ni);ah(wt,Rn)}return null}function vi(Ft,wt,rn,Rn){for(var ni=null,Ui=null,li=wt,mi=wt=0,xs=null;li!==null&&mi<rn.length;mi++){li.index>mi?(xs=li,li=null):xs=li.sibling;var er=mn(Ft,li,rn[mi],Rn);if(er===null){li===null&&(li=xs);break}q&&li&&er.alternate===null&&Z(Ft,li),wt=xe(er,wt,mi),Ui===null?ni=er:Ui.sibling=er,Ui=er,li=xs}if(mi===rn.length)return ne(Ft,li),$i&&bo(Ft,mi),ni;if(li===null){for(;mi<rn.length;mi++)li=wn(Ft,rn[mi],Rn),li!==null&&(wt=xe(li,wt,mi),Ui===null?ni=li:Ui.sibling=li,Ui=li);return $i&&bo(Ft,mi),ni}for(li=ae(li);mi<rn.length;mi++)xs=_n(li,Ft,mi,rn[mi],Rn),xs!==null&&(q&&xs.alternate!==null&&li.delete(xs.key===null?mi:xs.key),wt=xe(xs,wt,mi),Ui===null?ni=xs:Ui.sibling=xs,Ui=xs);return q&&li.forEach(function(Gc){return Z(Ft,Gc)}),$i&&bo(Ft,mi),ni}function di(Ft,wt,rn,Rn){if(rn==null)throw Error(o(151));for(var ni=null,Ui=null,li=wt,mi=wt=0,xs=null,er=rn.next();li!==null&&!er.done;mi++,er=rn.next()){li.index>mi?(xs=li,li=null):xs=li.sibling;var Gc=mn(Ft,li,er.value,Rn);if(Gc===null){li===null&&(li=xs);break}q&&li&&Gc.alternate===null&&Z(Ft,li),wt=xe(Gc,wt,mi),Ui===null?ni=Gc:Ui.sibling=Gc,Ui=Gc,li=xs}if(er.done)return ne(Ft,li),$i&&bo(Ft,mi),ni;if(li===null){for(;!er.done;mi++,er=rn.next())er=wn(Ft,er.value,Rn),er!==null&&(wt=xe(er,wt,mi),Ui===null?ni=er:Ui.sibling=er,Ui=er);return $i&&bo(Ft,mi),ni}for(li=ae(li);!er.done;mi++,er=rn.next())er=_n(li,Ft,mi,er.value,Rn),er!==null&&(q&&er.alternate!==null&&li.delete(er.key===null?mi:er.key),wt=xe(er,wt,mi),Ui===null?ni=er:Ui.sibling=er,Ui=er);return q&&li.forEach(function(qm){return Z(Ft,qm)}),$i&&bo(Ft,mi),ni}function dr(Ft,wt,rn,Rn){if(typeof rn=="object"&&rn!==null&&rn.type===le&&rn.key===null&&(rn=rn.props.children),typeof rn=="object"&&rn!==null){switch(rn.$$typeof){case re:e:{for(var ni=rn.key;wt!==null;){if(wt.key===ni){if(ni=rn.type,ni===le){if(wt.tag===7){ne(Ft,wt.sibling),Rn=pe(wt,rn.props.children),Rn.return=Ft,Ft=Rn;break e}}else if(wt.elementType===ni||typeof ni=="object"&&ni!==null&&ni.$$typeof===Ee&&fd(ni)===wt.type){ne(Ft,wt.sibling),Rn=pe(wt,rn.props),Ac(Rn,rn),Rn.return=Ft,Ft=Rn;break e}ne(Ft,wt);break}else Z(Ft,wt);wt=wt.sibling}rn.type===le?(Rn=Qo(rn.props.children,Ft.mode,Rn,rn.key),Rn.return=Ft,Ft=Rn):(Rn=rs(rn.type,rn.key,rn.props,null,Ft.mode,Rn),Ac(Rn,rn),Rn.return=Ft,Ft=Rn)}return Be(Ft);case se:e:{for(ni=rn.key;wt!==null;){if(wt.key===ni)if(wt.tag===4&&wt.stateNode.containerInfo===rn.containerInfo&&wt.stateNode.implementation===rn.implementation){ne(Ft,wt.sibling),Rn=pe(wt,rn.children||[]),Rn.return=Ft,Ft=Rn;break e}else{ne(Ft,wt);break}else Z(Ft,wt);wt=wt.sibling}Rn=zu(rn,Ft.mode,Rn),Rn.return=Ft,Ft=Rn}return Be(Ft);case Ee:return ni=rn._init,rn=ni(rn._payload),dr(Ft,wt,rn,Rn)}if($e(rn))return vi(Ft,wt,rn,Rn);if(Le(rn)){if(ni=Le(rn),typeof ni!="function")throw Error(o(150));return rn=ni.call(rn),di(Ft,wt,rn,Rn)}if(typeof rn.then=="function")return dr(Ft,wt,Su(rn),Rn);if(rn.$$typeof===ve)return dr(Ft,wt,cu(Ft,rn),Rn);ah(Ft,rn)}return typeof rn=="string"&&rn!==""||typeof rn=="number"||typeof rn=="bigint"?(rn=""+rn,wt!==null&&wt.tag===6?(ne(Ft,wt.sibling),Rn=pe(wt,rn),Rn.return=Ft,Ft=Rn):(ne(Ft,wt),Rn=su(rn,Ft.mode,Rn),Rn.return=Ft,Ft=Rn),Be(Ft)):ne(Ft,wt)}return function(Ft,wt,rn,Rn){try{Eu=0;var ni=dr(Ft,wt,rn,Rn);return Ll=null,ni}catch(li){if(li===du||li===Na)throw li;var Ui=Us(29,li,null,Ft.mode);return Ui.lanes=Rn,Ui.return=Ft,Ui}finally{}}}var Ol=dd(!0),pd=dd(!1),rr=Ne(null),Ba=null;function ol(q){var Z=q.alternate;Qe(Ur,Ur.current&1),Qe(rr,q),Ba===null&&(Z===null||Sc.current!==null||Z.memoizedState!==null)&&(Ba=q)}function md(q){if(q.tag===22){if(Qe(Ur,Ur.current),Qe(rr,q),Ba===null){var Z=q.alternate;Z!==null&&Z.memoizedState!==null&&(Ba=q)}}else ll()}function ll(){Qe(Ur,Ur.current),Qe(rr,rr.current)}function eo(q){Ye(rr),Ba===q&&(Ba=null),Ye(Ur)}var Ur=Ne(0);function Do(q){for(var Z=q;Z!==null;){if(Z.tag===13){var ne=Z.memoizedState;if(ne!==null&&(ne=ne.dehydrated,ne===null||ne.data==="$?"||up(ne)))return Z}else if(Z.tag===19&&Z.memoizedProps.revealOrder!==void 0){if((Z.flags&128)!==0)return Z}else if(Z.child!==null){Z.child.return=Z,Z=Z.child;continue}if(Z===q)break;for(;Z.sibling===null;){if(Z.return===null||Z.return===q)return null;Z=Z.return}Z.sibling.return=Z.return,Z=Z.sibling}return null}function cl(q,Z,ne,ae){Z=q.memoizedState,ne=ne(ae,Z),ne=ne==null?Z:ee({},Z,ne),q.memoizedState=ne,q.lanes===0&&(q.updateQueue.baseState=ne)}var Ps={enqueueSetState:function(q,Z,ne){q=q._reactInternals;var ae=Vr(),pe=Ja(ae);pe.payload=Z,ne!=null&&(pe.callback=ne),Z=Co(q,pe,ae),Z!==null&&(Is(Z,q,ae),Vl(Z,q,ae))},enqueueReplaceState:function(q,Z,ne){q=q._reactInternals;var ae=Vr(),pe=Ja(ae);pe.tag=1,pe.payload=Z,ne!=null&&(pe.callback=ne),Z=Co(q,pe,ae),Z!==null&&(Is(Z,q,ae),Vl(Z,q,ae))},enqueueForceUpdate:function(q,Z){q=q._reactInternals;var ne=Vr(),ae=Ja(ne);ae.tag=2,Z!=null&&(ae.callback=Z),Z=Co(q,ae,ne),Z!==null&&(Is(Z,q,ne),Vl(Z,q,ne))}};function gd(q,Z,ne,ae,pe,xe,Be){return q=q.stateNode,typeof q.shouldComponentUpdate=="function"?q.shouldComponentUpdate(ae,xe,Be):Z.prototype&&Z.prototype.isPureReactComponent?!La(ne,ae)||!La(pe,xe):!0}function yd(q,Z,ne,ae){q=Z.state,typeof Z.componentWillReceiveProps=="function"&&Z.componentWillReceiveProps(ne,ae),typeof Z.UNSAFE_componentWillReceiveProps=="function"&&Z.UNSAFE_componentWillReceiveProps(ne,ae),Z.state!==q&&Ps.enqueueReplaceState(Z,Z.state,null)}function to(q,Z){var ne=Z;if("ref"in Z){ne={};for(var ae in Z)ae!=="ref"&&(ne[ae]=Z[ae])}if(q=q.defaultProps){ne===Z&&(ne=ee({},ne));for(var pe in q)ne[pe]===void 0&&(ne[pe]=q[pe])}return ne}var Nl=typeof reportError=="function"?reportError:function(q){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof q=="object"&&q!==null&&typeof q.message=="string"?String(q.message):String(q),error:q});if(!window.dispatchEvent(Z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",q);return}console.error(q)};function xu(q){Nl(q)}function oh(q){console.error(q)}function _d(q){Nl(q)}function lh(q,Z){try{var ne=q.onUncaughtError;ne(Z.value,{componentStack:Z.stack})}catch(ae){setTimeout(function(){throw ae})}}function Ta(q,Z,ne){try{var ae=q.onCaughtError;ae(ne.value,{componentStack:ne.stack,errorBoundary:Z.tag===1?Z.stateNode:null})}catch(pe){setTimeout(function(){throw pe})}}function ch(q,Z,ne){return ne=Ja(ne),ne.tag=3,ne.payload={element:null},ne.callback=function(){lh(q,Z)},ne}function vd(q){return q=Ja(q),q.tag=3,q}function uh(q,Z,ne,ae){var pe=ne.type.getDerivedStateFromError;if(typeof pe=="function"){var xe=ae.value;q.payload=function(){return pe(xe)},q.callback=function(){Ta(Z,ne,ae)}}var Be=ne.stateNode;Be!==null&&typeof Be.componentDidCatch=="function"&&(q.callback=function(){Ta(Z,ne,ae),typeof pe!="function"&&(ra===null?ra=new Set([this]):ra.add(this));var ke=ae.stack;this.componentDidCatch(ae.value,{componentStack:ke!==null?ke:""})})}function $d(q,Z,ne,ae,pe){if(ne.flags|=32768,ae!==null&&typeof ae=="object"&&typeof ae.then=="function"){if(Z=ne.alternate,Z!==null&&va(Z,ne,pe,!0),ne=rr.current,ne!==null){switch(ne.tag){case 13:return Ba===null?J():ne.alternate===null&&gr===0&&(gr=3),ne.flags&=-257,ne.flags|=65536,ne.lanes=pe,ae===pu?ne.flags|=16384:(Z=ne.updateQueue,Z===null?ne.updateQueue=new Set([ae]):Z.add(ae),vn(q,ae,pe)),!1;case 22:return ne.flags|=65536,ae===pu?ne.flags|=16384:(Z=ne.updateQueue,Z===null?(Z={transitions:null,markerInstances:null,retryQueue:new Set([ae])},ne.updateQueue=Z):(ne=Z.retryQueue,ne===null?Z.retryQueue=new Set([ae]):ne.add(ae)),vn(q,ae,pe)),!1}throw Error(o(435,ne.tag))}return vn(q,ae,pe),J(),!1}if($i)return Z=rr.current,Z!==null?((Z.flags&65536)===0&&(Z.flags|=256),Z.flags|=65536,Z.lanes=pe,ae!==Gu&&(q=Error(o(422),{cause:ae}),Dl(us(q,ne)))):(ae!==Gu&&(Z=Error(o(423),{cause:ae}),Dl(us(Z,ne))),q=q.current.alternate,q.flags|=65536,pe&=-pe,q.lanes|=pe,ae=us(ae,ne),pe=ch(q.stateNode,ae,pe),_c(q,pe),gr!==4&&(gr=2)),!1;var xe=Error(o(520),{cause:ae});if(xe=us(xe,ne),Ji===null?Ji=[xe]:Ji.push(xe),gr!==4&&(gr=2),Z===null)return!0;ae=us(ae,ne),ne=Z;do{switch(ne.tag){case 3:return ne.flags|=65536,q=pe&-pe,ne.lanes|=q,q=ch(ne.stateNode,ae,q),_c(ne,q),!1;case 1:if(Z=ne.type,xe=ne.stateNode,(ne.flags&128)===0&&(typeof Z.getDerivedStateFromError=="function"||xe!==null&&typeof xe.componentDidCatch=="function"&&(ra===null||!ra.has(xe))))return ne.flags|=65536,pe&=-pe,ne.lanes|=pe,pe=vd(pe),uh(pe,q,ne,ae),_c(ne,pe),!1}ne=ne.return}while(ne!==null);return!1}var Ed=Error(o(461)),ss=!1;function zr(q,Z,ne,ae){Z.child=q===null?pd(Z,null,ne,ae):Ol(Z,q.child,ne,ae)}function ks(q,Z,ne,ae,pe){ne=ne.render;var xe=Z.ref;if("ref"in ae){var Be={};for(var ke in ae)ke!=="ref"&&(Be[ke]=ae[ke])}else Be=ae;return Qa(Z),ae=wo(q,Z,ne,Be,xe,pe),ke=Xh(),q!==null&&!ss?(Zu(q,Z,pe),as(q,Z,pe)):($i&&ke&&Nh(Z),Z.flags|=1,zr(q,Z,ae,pe),Z.child)}function Gs(q,Z,ne,ae,pe){if(q===null){var xe=ne.type;return typeof xe=="function"&&!ru(xe)&&xe.defaultProps===void 0&&ne.compare===null?(Z.tag=15,Z.type=xe,uf(q,Z,xe,ae,pe)):(q=rs(ne.type,null,ae,Z,Z.mode,pe),q.ref=Z.ref,q.return=Z,Z.child=q)}if(xe=q.child,!Tu(q,pe)){var Be=xe.memoizedProps;if(ne=ne.compare,ne=ne!==null?ne:La,ne(Be,ae)&&q.ref===Z.ref)return as(q,Z,pe)}return Z.flags|=1,q=Fr(xe,ae),q.ref=Z.ref,q.return=Z,Z.child=q}function uf(q,Z,ne,ae,pe){if(q!==null){var xe=q.memoizedProps;if(La(xe,ae)&&q.ref===Z.ref)if(ss=!1,Z.pendingProps=ae=xe,Tu(q,pe))(q.flags&131072)!==0&&(ss=!0);else return Z.lanes=q.lanes,as(q,Z,pe)}return Mc(q,Z,ne,ae,pe)}function Fl(q,Z,ne){var ae=Z.pendingProps,pe=ae.children,xe=q!==null?q.memoizedState:null;if(ae.mode==="hidden"){if((Z.flags&128)!==0){if(ae=xe!==null?xe.baseLanes|ne:ne,q!==null){for(pe=Z.child=q.child,xe=0;pe!==null;)xe=xe|pe.lanes|pe.childLanes,pe=pe.sibling;Z.childLanes=xe&~ae}else Z.childLanes=0,Z.child=null;return Bl(q,Z,ae,ne)}if((ne&536870912)!==0)Z.memoizedState={baseLanes:0,cachePool:null},q!==null&&fu(Z,xe!==null?xe.cachePool:null),xe!==null?Of(Z,xe):Wh(),md(Z);else return Z.lanes=Z.childLanes=536870912,Bl(q,Z,xe!==null?xe.baseLanes|ne:ne,ne)}else xe!==null?(fu(Z,xe.cachePool),Of(Z,xe),ll(),Z.memoizedState=null):(q!==null&&fu(Z,null),Wh(),ll());return zr(q,Z,pe,ne),Z.child}function Bl(q,Z,ne,ae){var pe=il();return pe=pe===null?null:{parent:qr._currentValue,pool:pe},Z.memoizedState={baseLanes:ne,cachePool:pe},q!==null&&fu(Z,null),Wh(),md(Z),q!==null&&va(q,Z,ae,!0),null}function Ul(q,Z){var ne=Z.ref;if(ne===null)q!==null&&q.ref!==null&&(Z.flags|=4194816);else{if(typeof ne!="function"&&typeof ne!="object")throw Error(o(284));(q===null||q.ref!==ne)&&(Z.flags|=4194816)}}function Mc(q,Z,ne,ae,pe){return Qa(Z),ne=wo(q,Z,ne,ae,void 0,pe),ae=Xh(),q!==null&&!ss?(Zu(q,Z,pe),as(q,Z,pe)):($i&&ae&&Nh(Z),Z.flags|=1,zr(q,Z,ne,pe),Z.child)}function Zs(q,Z,ne,ae,pe,xe){return Qa(Z),Z.updateQueue=null,ne=Bf(Z,ae,ne,pe),Ff(q),ae=Xh(),q!==null&&!ss?(Zu(q,Z,xe),as(q,Z,xe)):($i&&ae&&Nh(Z),Z.flags|=1,zr(q,Z,ne,xe),Z.child)}function Qs(q,Z,ne,ae,pe){if(Qa(Z),Z.stateNode===null){var xe=Zo,Be=ne.contextType;typeof Be=="object"&&Be!==null&&(xe=wr(Be)),xe=new ne(ae,xe),Z.memoizedState=xe.state!==null&&xe.state!==void 0?xe.state:null,xe.updater=Ps,Z.stateNode=xe,xe._reactInternals=Z,xe=Z.stateNode,xe.props=ae,xe.state=Z.memoizedState,xe.refs={},jh(Z),Be=ne.contextType,xe.context=typeof Be=="object"&&Be!==null?wr(Be):Zo,xe.state=Z.memoizedState,Be=ne.getDerivedStateFromProps,typeof Be=="function"&&(cl(Z,ne,Be,ae),xe.state=Z.memoizedState),typeof ne.getDerivedStateFromProps=="function"||typeof xe.getSnapshotBeforeUpdate=="function"||typeof xe.UNSAFE_componentWillMount!="function"&&typeof xe.componentWillMount!="function"||(Be=xe.state,typeof xe.componentWillMount=="function"&&xe.componentWillMount(),typeof xe.UNSAFE_componentWillMount=="function"&&xe.UNSAFE_componentWillMount(),Be!==xe.state&&Ps.enqueueReplaceState(xe,xe.state,null),vc(Z,ae,xe,pe),mu(),xe.state=Z.memoizedState),typeof xe.componentDidMount=="function"&&(Z.flags|=4194308),ae=!0}else if(q===null){xe=Z.stateNode;var ke=Z.memoizedProps,Je=to(ne,ke);xe.props=Je;var ln=xe.context,An=ne.contextType;Be=Zo,typeof An=="object"&&An!==null&&(Be=wr(An));var wn=ne.getDerivedStateFromProps;An=typeof wn=="function"||typeof xe.getSnapshotBeforeUpdate=="function",ke=Z.pendingProps!==ke,An||typeof xe.UNSAFE_componentWillReceiveProps!="function"&&typeof xe.componentWillReceiveProps!="function"||(ke||ln!==Be)&&yd(Z,xe,ae,Be),Ro=!1;var mn=Z.memoizedState;xe.state=mn,vc(Z,ae,xe,pe),mu(),ln=Z.memoizedState,ke||mn!==ln||Ro?(typeof wn=="function"&&(cl(Z,ne,wn,ae),ln=Z.memoizedState),(Je=Ro||gd(Z,ne,Je,ae,mn,ln,Be))?(An||typeof xe.UNSAFE_componentWillMount!="function"&&typeof xe.componentWillMount!="function"||(typeof xe.componentWillMount=="function"&&xe.componentWillMount(),typeof xe.UNSAFE_componentWillMount=="function"&&xe.UNSAFE_componentWillMount()),typeof xe.componentDidMount=="function"&&(Z.flags|=4194308)):(typeof xe.componentDidMount=="function"&&(Z.flags|=4194308),Z.memoizedProps=ae,Z.memoizedState=ln),xe.props=ae,xe.state=ln,xe.context=Be,ae=Je):(typeof xe.componentDidMount=="function"&&(Z.flags|=4194308),ae=!1)}else{xe=Z.stateNode,yi(q,Z),Be=Z.memoizedProps,An=to(ne,Be),xe.props=An,wn=Z.pendingProps,mn=xe.context,ln=ne.contextType,Je=Zo,typeof ln=="object"&&ln!==null&&(Je=wr(ln)),ke=ne.getDerivedStateFromProps,(ln=typeof ke=="function"||typeof xe.getSnapshotBeforeUpdate=="function")||typeof xe.UNSAFE_componentWillReceiveProps!="function"&&typeof xe.componentWillReceiveProps!="function"||(Be!==wn||mn!==Je)&&yd(Z,xe,ae,Je),Ro=!1,mn=Z.memoizedState,xe.state=mn,vc(Z,ae,xe,pe),mu();var _n=Z.memoizedState;Be!==wn||mn!==_n||Ro||q!==null&&q.dependencies!==null&&lu(q.dependencies)?(typeof ke=="function"&&(cl(Z,ne,ke,ae),_n=Z.memoizedState),(An=Ro||gd(Z,ne,An,ae,mn,_n,Je)||q!==null&&q.dependencies!==null&&lu(q.dependencies))?(ln||typeof xe.UNSAFE_componentWillUpdate!="function"&&typeof xe.componentWillUpdate!="function"||(typeof xe.componentWillUpdate=="function"&&xe.componentWillUpdate(ae,_n,Je),typeof xe.UNSAFE_componentWillUpdate=="function"&&xe.UNSAFE_componentWillUpdate(ae,_n,Je)),typeof xe.componentDidUpdate=="function"&&(Z.flags|=4),typeof xe.getSnapshotBeforeUpdate=="function"&&(Z.flags|=1024)):(typeof xe.componentDidUpdate!="function"||Be===q.memoizedProps&&mn===q.memoizedState||(Z.flags|=4),typeof xe.getSnapshotBeforeUpdate!="function"||Be===q.memoizedProps&&mn===q.memoizedState||(Z.flags|=1024),Z.memoizedProps=ae,Z.memoizedState=_n),xe.props=ae,xe.state=_n,xe.context=Je,ae=An):(typeof xe.componentDidUpdate!="function"||Be===q.memoizedProps&&mn===q.memoizedState||(Z.flags|=4),typeof xe.getSnapshotBeforeUpdate!="function"||Be===q.memoizedProps&&mn===q.memoizedState||(Z.flags|=1024),ae=!1)}return xe=ae,Ul(q,Z),ae=(Z.flags&128)!==0,xe||ae?(xe=Z.stateNode,ne=ae&&typeof ne.getDerivedStateFromError!="function"?null:xe.render(),Z.flags|=1,q!==null&&ae?(Z.child=Ol(Z,q.child,null,pe),Z.child=Ol(Z,null,ne,pe)):zr(q,Z,ne,pe),Z.memoizedState=xe.state,q=Z.child):q=as(q,Z,pe),q}function ul(q,Z,ne,ae){return dc(),Z.flags|=256,zr(q,Z,ne,ae),Z.child}var Ua={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function za(q){return{baseLanes:q,cachePool:Wu()}}function Yr(q,Z,ne){return q=q!==null?q.childLanes&~ne:0,Z&&(q|=Ca),q}function Rc(q,Z,ne){var ae=Z.pendingProps,pe=!1,xe=(Z.flags&128)!==0,Be;if((Be=xe)||(Be=q!==null&&q.memoizedState===null?!1:(Ur.current&2)!==0),Be&&(pe=!0,Z.flags&=-129),Be=(Z.flags&32)!==0,Z.flags&=-33,q===null){if($i){if(pe?ol(Z):ll(),$i){var ke=Mr,Je;if(Je=ke){e:{for(Je=ke,ke=$s;Je.nodeType!==8;){if(!ke){ke=null;break e}if(Je=Bo(Je.nextSibling),Je===null){ke=null;break e}}ke=Je}ke!==null?(Z.memoizedState={dehydrated:ke,treeContext:Jo!==null?{id:Ya,overflow:Za}:null,retryLane:536870912,hydrationErrors:null},Je=Us(18,null,null,0),Je.stateNode=ke,Je.return=Z,Z.child=Je,Ms=Z,Mr=null,Je=!0):Je=!1}Je||el(Z)}if(ke=Z.memoizedState,ke!==null&&(ke=ke.dehydrated,ke!==null))return up(ke)?Z.lanes=32:Z.lanes=536870912,null;eo(Z)}return ke=ae.children,ae=ae.fallback,pe?(ll(),pe=Z.mode,ke=zl({mode:"hidden",children:ke},pe),ae=Qo(ae,pe,ne,null),ke.return=Z,ae.return=Z,ke.sibling=ae,Z.child=ke,pe=Z.child,pe.memoizedState=za(ne),pe.childLanes=Yr(q,Be,ne),Z.memoizedState=Ua,ae):(ol(Z),no(Z,ke))}if(Je=q.memoizedState,Je!==null&&(ke=Je.dehydrated,ke!==null)){if(xe)Z.flags&256?(ol(Z),Z.flags&=-257,Z=ds(q,Z,ne)):Z.memoizedState!==null?(ll(),Z.child=q.child,Z.flags|=128,Z=null):(ll(),pe=ae.fallback,ke=Z.mode,ae=zl({mode:"visible",children:ae.children},ke),pe=Qo(pe,ke,ne,null),pe.flags|=2,ae.return=Z,pe.return=Z,ae.sibling=pe,Z.child=ae,Ol(Z,q.child,null,ne),ae=Z.child,ae.memoizedState=za(ne),ae.childLanes=Yr(q,Be,ne),Z.memoizedState=Ua,Z=pe);else if(ol(Z),up(ke)){if(Be=ke.nextSibling&&ke.nextSibling.dataset,Be)var ln=Be.dgst;Be=ln,ae=Error(o(419)),ae.stack="",ae.digest=Be,Dl({value:ae,source:null,stack:null}),Z=ds(q,Z,ne)}else if(ss||va(q,Z,ne,!1),Be=(ne&q.childLanes)!==0,ss||Be){if(Be=xi,Be!==null&&(ae=ne&-ne,ae=(ae&42)!==0?1:Ei(ae),ae=(ae&(Be.suspendedLanes|ne))!==0?0:ae,ae!==0&&ae!==Je.retryLane))throw Je.retryLane=ae,To(q,ae),Is(Be,q,ae),Ed;ke.data==="$?"||J(),Z=ds(q,Z,ne)}else ke.data==="$?"?(Z.flags|=192,Z.child=q.child,Z=null):(q=Je.treeContext,Mr=Bo(ke.nextSibling),Ms=Z,$i=!0,_a=null,$s=!1,q!==null&&(hs[Xs++]=Ya,hs[Xs++]=Za,hs[Xs++]=Jo,Ya=q.id,Za=q.overflow,Jo=Z),Z=no(Z,ae.children),Z.flags|=4096);return Z}return pe?(ll(),pe=ae.fallback,ke=Z.mode,Je=q.child,ln=Je.sibling,ae=Fr(Je,{mode:"hidden",children:ae.children}),ae.subtreeFlags=Je.subtreeFlags&65011712,ln!==null?pe=Fr(ln,pe):(pe=Qo(pe,ke,ne,null),pe.flags|=2),pe.return=Z,ae.return=Z,ae.sibling=pe,Z.child=ae,ae=pe,pe=Z.child,ke=q.child.memoizedState,ke===null?ke=za(ne):(Je=ke.cachePool,Je!==null?(ln=qr._currentValue,Je=Je.parent!==ln?{parent:ln,pool:ln}:Je):Je=Wu(),ke={baseLanes:ke.baseLanes|ne,cachePool:Je}),pe.memoizedState=ke,pe.childLanes=Yr(q,Be,ne),Z.memoizedState=Ua,ae):(ol(Z),ne=q.child,q=ne.sibling,ne=Fr(ne,{mode:"visible",children:ae.children}),ne.return=Z,ne.sibling=null,q!==null&&(Be=Z.deletions,Be===null?(Z.deletions=[q],Z.flags|=16):Be.push(q)),Z.child=ne,Z.memoizedState=null,ne)}function no(q,Z){return Z=zl({mode:"visible",children:Z},q.mode),Z.return=q,q.child=Z}function zl(q,Z){return q=Us(22,q,null,Z),q.lanes=0,q.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},q}function ds(q,Z,ne){return Ol(Z,q.child,null,ne),q=no(Z,Z.pendingProps.children),q.flags|=2,Z.memoizedState=null,q}function ps(q,Z,ne){q.lanes|=Z;var ae=q.alternate;ae!==null&&(ae.lanes|=Z),zh(q.return,Z,ne)}function Gi(q,Z,ne,ae,pe){var xe=q.memoizedState;xe===null?q.memoizedState={isBackwards:Z,rendering:null,renderingStartTime:0,last:ae,tail:ne,tailMode:pe}:(xe.isBackwards=Z,xe.rendering=null,xe.renderingStartTime=0,xe.last=ae,xe.tail=ne,xe.tailMode=pe)}function ba(q,Z,ne){var ae=Z.pendingProps,pe=ae.revealOrder,xe=ae.tail;if(zr(q,Z,ae.children,ne),ae=Ur.current,(ae&2)!==0)ae=ae&1|2,Z.flags|=128;else{if(q!==null&&(q.flags&128)!==0)e:for(q=Z.child;q!==null;){if(q.tag===13)q.memoizedState!==null&&ps(q,ne,Z);else if(q.tag===19)ps(q,ne,Z);else if(q.child!==null){q.child.return=q,q=q.child;continue}if(q===Z)break e;for(;q.sibling===null;){if(q.return===null||q.return===Z)break e;q=q.return}q.sibling.return=q.return,q=q.sibling}ae&=1}switch(Qe(Ur,ae),pe){case"forwards":for(ne=Z.child,pe=null;ne!==null;)q=ne.alternate,q!==null&&Do(q)===null&&(pe=ne),ne=ne.sibling;ne=pe,ne===null?(pe=Z.child,Z.child=null):(pe=ne.sibling,ne.sibling=null),Gi(Z,!1,pe,ne,xe);break;case"backwards":for(ne=null,pe=Z.child,Z.child=null;pe!==null;){if(q=pe.alternate,q!==null&&Do(q)===null){Z.child=pe;break}q=pe.sibling,pe.sibling=ne,ne=pe,pe=q}Gi(Z,!0,ne,null,xe);break;case"together":Gi(Z,!1,null,null,void 0);break;default:Z.memoizedState=null}return Z.child}function as(q,Z,ne){if(q!==null&&(Z.dependencies=q.dependencies),ja|=Z.lanes,(ne&Z.childLanes)===0)if(q!==null){if(va(q,Z,ne,!1),(ne&Z.childLanes)===0)return null}else return null;if(q!==null&&Z.child!==q.child)throw Error(o(153));if(Z.child!==null){for(q=Z.child,ne=Fr(q,q.pendingProps),Z.child=ne,ne.return=Z;q.sibling!==null;)q=q.sibling,ne=ne.sibling=Fr(q,q.pendingProps),ne.return=Z;ne.sibling=null}return Z.child}function Tu(q,Z){return(q.lanes&Z)!==0?!0:(q=q.dependencies,!!(q!==null&&lu(q)))}function Aa(q,Z,ne){switch(Z.tag){case 3:un(Z,Z.stateNode.containerInfo),nl(Z,qr,q.memoizedState.cache),dc();break;case 27:case 5:In(Z);break;case 4:un(Z,Z.stateNode.containerInfo);break;case 10:nl(Z,Z.type,Z.memoizedProps.value);break;case 13:var ae=Z.memoizedState;if(ae!==null)return ae.dehydrated!==null?(ol(Z),Z.flags|=128,null):(ne&Z.child.childLanes)!==0?Rc(q,Z,ne):(ol(Z),q=as(q,Z,ne),q!==null?q.sibling:null);ol(Z);break;case 19:var pe=(q.flags&128)!==0;if(ae=(ne&Z.childLanes)!==0,ae||(va(q,Z,ne,!1),ae=(ne&Z.childLanes)!==0),pe){if(ae)return ba(q,Z,ne);Z.flags|=128}if(pe=Z.memoizedState,pe!==null&&(pe.rendering=null,pe.tail=null,pe.lastEffect=null),Qe(Ur,Ur.current),ae)break;return null;case 22:case 23:return Z.lanes=0,Fl(q,Z,ne);case 24:nl(Z,qr,q.memoizedState.cache)}return as(q,Z,ne)}function kl(q,Z,ne){if(q!==null)if(q.memoizedProps!==Z.pendingProps)ss=!0;else{if(!Tu(q,ne)&&(Z.flags&128)===0)return ss=!1,Aa(q,Z,ne);ss=(q.flags&131072)!==0}else ss=!1,$i&&(Z.flags&1048576)!==0&&ku(Z,fc,Z.index);switch(Z.lanes=0,Z.tag){case 16:e:{q=Z.pendingProps;var ae=Z.elementType,pe=ae._init;if(ae=pe(ae._payload),Z.type=ae,typeof ae=="function")ru(ae)?(q=to(ae,q),Z.tag=1,Z=Qs(null,Z,ae,q,ne)):(Z.tag=0,Z=Mc(null,Z,ae,q,ne));else{if(ae!=null){if(pe=ae.$$typeof,pe===_e){Z.tag=11,Z=ks(null,Z,ae,q,ne);break e}else if(pe===Se){Z.tag=14,Z=Gs(null,Z,ae,q,ne);break e}}throw Z=Ue(ae)||ae,Error(o(306,Z,""))}}return Z;case 0:return Mc(q,Z,Z.type,Z.pendingProps,ne);case 1:return ae=Z.type,pe=to(ae,Z.pendingProps),Qs(q,Z,ae,pe,ne);case 3:e:{if(un(Z,Z.stateNode.containerInfo),q===null)throw Error(o(387));ae=Z.pendingProps;var xe=Z.memoizedState;pe=xe.element,yi(q,Z),vc(Z,ae,null,ne);var Be=Z.memoizedState;if(ae=Be.cache,nl(Z,qr,ae),ae!==xe.cache&&ou(Z,[qr],ne,!0),mu(),ae=Be.element,xe.isDehydrated)if(xe={element:ae,isDehydrated:!1,cache:Be.cache},Z.updateQueue.baseState=xe,Z.memoizedState=xe,Z.flags&256){Z=ul(q,Z,ae,ne);break e}else if(ae!==pe){pe=us(Error(o(424)),Z),Dl(pe),Z=ul(q,Z,ae,ne);break e}else{switch(q=Z.stateNode.containerInfo,q.nodeType){case 9:q=q.body;break;default:q=q.nodeName==="HTML"?q.ownerDocument.body:q}for(Mr=Bo(q.firstChild),Ms=Z,$i=!0,_a=null,$s=!0,ne=pd(Z,null,ae,ne),Z.child=ne;ne;)ne.flags=ne.flags&-3|4096,ne=ne.sibling}else{if(dc(),ae===pe){Z=as(q,Z,ne);break e}zr(q,Z,ae,ne)}Z=Z.child}return Z;case 26:return Ul(q,Z),q===null?(ne=kp(Z.type,null,Z.pendingProps,null))?Z.memoizedState=ne:$i||(ne=Z.type,q=Z.pendingProps,ae=Md(ct.current).createElement(ne),ae[Er]=Z,ae[pr]=q,Ds(ae,ne,q),Sr(ae),Z.stateNode=ae):Z.memoizedState=kp(Z.type,q.memoizedProps,Z.pendingProps,q.memoizedState),null;case 27:return In(Z),q===null&&$i&&(ae=Z.stateNode=Bp(Z.type,Z.pendingProps,ct.current),Ms=Z,$s=!0,pe=Mr,Fc(Z.type)?(hp=pe,Mr=Bo(ae.firstChild)):Mr=pe),zr(q,Z,Z.pendingProps.children,ne),Ul(q,Z),q===null&&(Z.flags|=4194304),Z.child;case 5:return q===null&&$i&&((pe=ae=Mr)&&(ae=Em(ae,Z.type,Z.pendingProps,$s),ae!==null?(Z.stateNode=ae,Ms=Z,Mr=Bo(ae.firstChild),$s=!1,pe=!0):pe=!1),pe||el(Z)),In(Z),pe=Z.type,xe=Z.pendingProps,Be=q!==null?q.memoizedProps:null,ae=xe.children,ap(pe,xe)?ae=null:Be!==null&&ap(pe,Be)&&(Z.flags|=32),Z.memoizedState!==null&&(pe=wo(q,Z,Gd,null,null,ne),Sf._currentValue=pe),Ul(q,Z),zr(q,Z,ae,ne),Z.child;case 6:return q===null&&$i&&((q=ne=Mr)&&(ne=Sm(ne,Z.pendingProps,$s),ne!==null?(Z.stateNode=ne,Ms=Z,Mr=null,q=!0):q=!1),q||el(Z)),null;case 13:return Rc(q,Z,ne);case 4:return un(Z,Z.stateNode.containerInfo),ae=Z.pendingProps,q===null?Z.child=Ol(Z,null,ae,ne):zr(q,Z,ae,ne),Z.child;case 11:return ks(q,Z,Z.type,Z.pendingProps,ne);case 7:return zr(q,Z,Z.pendingProps,ne),Z.child;case 8:return zr(q,Z,Z.pendingProps.children,ne),Z.child;case 12:return zr(q,Z,Z.pendingProps.children,ne),Z.child;case 10:return ae=Z.pendingProps,nl(Z,Z.type,ae.value),zr(q,Z,ae.children,ne),Z.child;case 9:return pe=Z.type._context,ae=Z.pendingProps.children,Qa(Z),pe=wr(pe),ae=ae(pe),Z.flags|=1,zr(q,Z,ae,ne),Z.child;case 14:return Gs(q,Z,Z.type,Z.pendingProps,ne);case 15:return uf(q,Z,Z.type,Z.pendingProps,ne);case 19:return ba(q,Z,ne);case 31:return ae=Z.pendingProps,ne=Z.mode,ae={mode:ae.mode,children:ae.children},q===null?(ne=zl(ae,ne),ne.ref=Z.ref,Z.child=ne,ne.return=Z,Z=ne):(ne=Fr(q.child,ae),ne.ref=Z.ref,Z.child=ne,ne.return=Z,Z=ne),Z;case 22:return Fl(q,Z,ne);case 24:return Qa(Z),ae=wr(qr),q===null?(pe=il(),pe===null&&(pe=xi,xe=ju(),pe.pooledCache=xe,xe.refCount++,xe!==null&&(pe.pooledCacheLanes|=ne),pe=xe),Z.memoizedState={parent:ae,cache:pe},jh(Z),nl(Z,qr,pe)):((q.lanes&ne)!==0&&(yi(q,Z),vc(Z,null,null,ne),mu()),pe=q.memoizedState,xe=Z.memoizedState,pe.parent!==ae?(pe={parent:ae,cache:ae},Z.memoizedState=pe,Z.lanes===0&&(Z.memoizedState=Z.updateQueue.baseState=pe),nl(Z,qr,ae)):(ae=xe.cache,nl(Z,qr,ae),ae!==pe.cache&&ou(Z,[qr],ne,!0))),zr(q,Z,Z.pendingProps.children,ne),Z.child;case 29:throw Z.pendingProps}throw Error(o(156,Z.tag))}function ka(q){q.flags|=4}function bu(q,Z){if(Z.type!=="stylesheet"||(Z.state.loading&4)!==0)q.flags&=-16777217;else if(q.flags|=16777216,!Wp(Z)){if(Z=rr.current,Z!==null&&((ci&4194048)===ci?Ba!==null:(ci&62914560)!==ci&&(ci&536870912)===0||Z!==Ba))throw Sa=pu,Gh;q.flags|=8192}}function Vo(q,Z){Z!==null&&(q.flags|=4),q.flags&16384&&(Z=q.tag!==22?Nn():536870912,q.lanes|=Z,Xi|=Z)}function Gl(q,Z){if(!$i)switch(q.tailMode){case"hidden":Z=q.tail;for(var ne=null;Z!==null;)Z.alternate!==null&&(ne=Z),Z=Z.sibling;ne===null?q.tail=null:ne.sibling=null;break;case"collapsed":ne=q.tail;for(var ae=null;ne!==null;)ne.alternate!==null&&(ae=ne),ne=ne.sibling;ae===null?Z||q.tail===null?q.tail=null:q.tail.sibling=null:ae.sibling=null}}function lr(q){var Z=q.alternate!==null&&q.alternate.child===q.child,ne=0,ae=0;if(Z)for(var pe=q.child;pe!==null;)ne|=pe.lanes|pe.childLanes,ae|=pe.subtreeFlags&65011712,ae|=pe.flags&65011712,pe.return=q,pe=pe.sibling;else for(pe=q.child;pe!==null;)ne|=pe.lanes|pe.childLanes,ae|=pe.subtreeFlags,ae|=pe.flags,pe.return=q,pe=pe.sibling;return q.subtreeFlags|=ae,q.childLanes=ne,Z}function hf(q,Z,ne){var ae=Z.pendingProps;switch(Fh(Z),Z.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return lr(Z),null;case 1:return lr(Z),null;case 3:return ne=Z.stateNode,ae=null,q!==null&&(ae=q.memoizedState.cache),Z.memoizedState.cache!==ae&&(Z.flags|=2048),Mo(qr),Vn(),ne.pendingContext&&(ne.context=ne.pendingContext,ne.pendingContext=null),(q===null||q.child===null)&&(Oa(Z)?ka(Z):q===null||q.memoizedState.isDehydrated&&(Z.flags&256)===0||(Z.flags|=1024,Zi())),lr(Z),null;case 26:return ne=Z.memoizedState,q===null?(ka(Z),ne!==null?(lr(Z),bu(Z,ne)):(lr(Z),Z.flags&=-16777217)):ne?ne!==q.memoizedState?(ka(Z),lr(Z),bu(Z,ne)):(lr(Z),Z.flags&=-16777217):(q.memoizedProps!==ae&&ka(Z),lr(Z),Z.flags&=-16777217),null;case 27:Un(Z),ne=ct.current;var pe=Z.type;if(q!==null&&Z.stateNode!=null)q.memoizedProps!==ae&&ka(Z);else{if(!ae){if(Z.stateNode===null)throw Error(o(166));return lr(Z),null}q=qe.current,Oa(Z)?If(Z):(q=Bp(pe,ae,ne),Z.stateNode=q,ka(Z))}return lr(Z),null;case 5:if(Un(Z),ne=Z.type,q!==null&&Z.stateNode!=null)q.memoizedProps!==ae&&ka(Z);else{if(!ae){if(Z.stateNode===null)throw Error(o(166));return lr(Z),null}if(q=qe.current,Oa(Z))If(Z);else{switch(pe=Md(ct.current),q){case 1:q=pe.createElementNS("http://www.w3.org/2000/svg",ne);break;case 2:q=pe.createElementNS("http://www.w3.org/1998/Math/MathML",ne);break;default:switch(ne){case"svg":q=pe.createElementNS("http://www.w3.org/2000/svg",ne);break;case"math":q=pe.createElementNS("http://www.w3.org/1998/Math/MathML",ne);break;case"script":q=pe.createElement("div"),q.innerHTML="<script><\/script>",q=q.removeChild(q.firstChild);break;case"select":q=typeof ae.is=="string"?pe.createElement("select",{is:ae.is}):pe.createElement("select"),ae.multiple?q.multiple=!0:ae.size&&(q.size=ae.size);break;default:q=typeof ae.is=="string"?pe.createElement(ne,{is:ae.is}):pe.createElement(ne)}}q[Er]=Z,q[pr]=ae;e:for(pe=Z.child;pe!==null;){if(pe.tag===5||pe.tag===6)q.appendChild(pe.stateNode);else if(pe.tag!==4&&pe.tag!==27&&pe.child!==null){pe.child.return=pe,pe=pe.child;continue}if(pe===Z)break e;for(;pe.sibling===null;){if(pe.return===null||pe.return===Z)break e;pe=pe.return}pe.sibling.return=pe.return,pe=pe.sibling}Z.stateNode=q;e:switch(Ds(q,ne,ae),ne){case"button":case"input":case"select":case"textarea":q=!!ae.autoFocus;break e;case"img":q=!0;break e;default:q=!1}q&&ka(Z)}}return lr(Z),Z.flags&=-16777217,null;case 6:if(q&&Z.stateNode!=null)q.memoizedProps!==ae&&ka(Z);else{if(typeof ae!="string"&&Z.stateNode===null)throw Error(o(166));if(q=ct.current,Oa(Z)){if(q=Z.stateNode,ne=Z.memoizedProps,ae=null,pe=Ms,pe!==null)switch(pe.tag){case 27:case 5:ae=pe.memoizedProps}q[Er]=Z,q=!!(q.nodeValue===ne||ae!==null&&ae.suppressHydrationWarning===!0||Ip(q.nodeValue,ne)),q||el(Z)}else q=Md(q).createTextNode(ae),q[Er]=Z,Z.stateNode=q}return lr(Z),null;case 13:if(ae=Z.memoizedState,q===null||q.memoizedState!==null&&q.memoizedState.dehydrated!==null){if(pe=Oa(Z),ae!==null&&ae.dehydrated!==null){if(q===null){if(!pe)throw Error(o(318));if(pe=Z.memoizedState,pe=pe!==null?pe.dehydrated:null,!pe)throw Error(o(317));pe[Er]=Z}else dc(),(Z.flags&128)===0&&(Z.memoizedState=null),Z.flags|=4;lr(Z),pe=!1}else pe=Zi(),q!==null&&q.memoizedState!==null&&(q.memoizedState.hydrationErrors=pe),pe=!0;if(!pe)return Z.flags&256?(eo(Z),Z):(eo(Z),null)}if(eo(Z),(Z.flags&128)!==0)return Z.lanes=ne,Z;if(ne=ae!==null,q=q!==null&&q.memoizedState!==null,ne){ae=Z.child,pe=null,ae.alternate!==null&&ae.alternate.memoizedState!==null&&ae.alternate.memoizedState.cachePool!==null&&(pe=ae.alternate.memoizedState.cachePool.pool);var xe=null;ae.memoizedState!==null&&ae.memoizedState.cachePool!==null&&(xe=ae.memoizedState.cachePool.pool),xe!==pe&&(ae.flags|=2048)}return ne!==q&&ne&&(Z.child.flags|=8192),Vo(Z,Z.updateQueue),lr(Z),null;case 4:return Vn(),q===null&&ep(Z.stateNode.containerInfo),lr(Z),null;case 10:return Mo(Z.type),lr(Z),null;case 19:if(Ye(Ur),pe=Z.memoizedState,pe===null)return lr(Z),null;if(ae=(Z.flags&128)!==0,xe=pe.rendering,xe===null)if(ae)Gl(pe,!1);else{if(gr!==0||q!==null&&(q.flags&128)!==0)for(q=Z.child;q!==null;){if(xe=Do(q),xe!==null){for(Z.flags|=128,Gl(pe,!1),q=xe.updateQueue,Z.updateQueue=q,Vo(Z,q),Z.subtreeFlags=0,q=ne,ne=Z.child;ne!==null;)Oh(ne,q),ne=ne.sibling;return Qe(Ur,Ur.current&1|2),Z.child}q=q.sibling}pe.tail!==null&&kt()>Es&&(Z.flags|=128,ae=!0,Gl(pe,!1),Z.lanes=4194304)}else{if(!ae)if(q=Do(xe),q!==null){if(Z.flags|=128,ae=!0,q=q.updateQueue,Z.updateQueue=q,Vo(Z,q),Gl(pe,!0),pe.tail===null&&pe.tailMode==="hidden"&&!xe.alternate&&!$i)return lr(Z),null}else 2*kt()-pe.renderingStartTime>Es&&ne!==536870912&&(Z.flags|=128,ae=!0,Gl(pe,!1),Z.lanes=4194304);pe.isBackwards?(xe.sibling=Z.child,Z.child=xe):(q=pe.last,q!==null?q.sibling=xe:Z.child=xe,pe.last=xe)}return pe.tail!==null?(Z=pe.tail,pe.rendering=Z,pe.tail=Z.sibling,pe.renderingStartTime=kt(),Z.sibling=null,q=Ur.current,Qe(Ur,ae?q&1|2:q&1),Z):(lr(Z),null);case 22:case 23:return eo(Z),gu(),ae=Z.memoizedState!==null,q!==null?q.memoizedState!==null!==ae&&(Z.flags|=8192):ae&&(Z.flags|=8192),ae?(ne&536870912)!==0&&(Z.flags&128)===0&&(lr(Z),Z.subtreeFlags&6&&(Z.flags|=8192)):lr(Z),ne=Z.updateQueue,ne!==null&&Vo(Z,ne.retryQueue),ne=null,q!==null&&q.memoizedState!==null&&q.memoizedState.cachePool!==null&&(ne=q.memoizedState.cachePool.pool),ae=null,Z.memoizedState!==null&&Z.memoizedState.cachePool!==null&&(ae=Z.memoizedState.cachePool.pool),ae!==ne&&(Z.flags|=2048),q!==null&&Ye(Ea),null;case 24:return ne=null,q!==null&&(ne=q.memoizedState.cache),Z.memoizedState.cache!==ne&&(Z.flags|=2048),Mo(qr),lr(Z),null;case 25:return null;case 30:return null}throw Error(o(156,Z.tag))}function Cc(q,Z){switch(Fh(Z),Z.tag){case 1:return q=Z.flags,q&65536?(Z.flags=q&-65537|128,Z):null;case 3:return Mo(qr),Vn(),q=Z.flags,(q&65536)!==0&&(q&128)===0?(Z.flags=q&-65537|128,Z):null;case 26:case 27:case 5:return Un(Z),null;case 13:if(eo(Z),q=Z.memoizedState,q!==null&&q.dehydrated!==null){if(Z.alternate===null)throw Error(o(340));dc()}return q=Z.flags,q&65536?(Z.flags=q&-65537|128,Z):null;case 19:return Ye(Ur),null;case 4:return Vn(),null;case 10:return Mo(Z.type),null;case 22:case 23:return eo(Z),gu(),q!==null&&Ye(Ea),q=Z.flags,q&65536?(Z.flags=q&-65537|128,Z):null;case 24:return Mo(qr),null;case 25:return null;default:return null}}function Pc(q,Z){switch(Fh(Z),Z.tag){case 3:Mo(qr),Vn();break;case 26:case 27:case 5:Un(Z);break;case 4:Vn();break;case 13:eo(Z);break;case 19:Ye(Ur);break;case 10:Mo(Z.type);break;case 22:case 23:eo(Z),gu(),q!==null&&Ye(Ea);break;case 24:Mo(qr)}}function Hl(q,Z){try{var ne=Z.updateQueue,ae=ne!==null?ne.lastEffect:null;if(ae!==null){var pe=ae.next;ne=pe;do{if((ne.tag&q)===q){ae=void 0;var xe=ne.create,Be=ne.inst;ae=xe(),Be.destroy=ae}ne=ne.next}while(ne!==pe)}}catch(ke){Rt(Z,Z.return,ke)}}function Js(q,Z,ne){try{var ae=Z.updateQueue,pe=ae!==null?ae.lastEffect:null;if(pe!==null){var xe=pe.next;ae=xe;do{if((ae.tag&q)===q){var Be=ae.inst,ke=Be.destroy;if(ke!==void 0){Be.destroy=void 0,pe=Z;var Je=ne,ln=ke;try{ln()}catch(An){Rt(pe,Je,An)}}}ae=ae.next}while(ae!==xe)}}catch(An){Rt(Z,Z.return,An)}}function jl(q){var Z=q.updateQueue;if(Z!==null){var ne=q.stateNode;try{Lf(Z,ne)}catch(ae){Rt(q,q.return,ae)}}}function Lo(q,Z,ne){ne.props=to(q.type,q.memoizedProps),ne.state=q.memoizedState;try{ne.componentWillUnmount()}catch(ae){Rt(q,Z,ae)}}function ql(q,Z){try{var ne=q.ref;if(ne!==null){switch(q.tag){case 26:case 27:case 5:var ae=q.stateNode;break;case 30:ae=q.stateNode;break;default:ae=q.stateNode}typeof ne=="function"?q.refCleanup=ne(ae):ne.current=ae}}catch(pe){Rt(q,Z,pe)}}function io(q,Z){var ne=q.ref,ae=q.refCleanup;if(ne!==null)if(typeof ae=="function")try{ae()}catch(pe){Rt(q,Z,pe)}finally{q.refCleanup=null,q=q.alternate,q!=null&&(q.refCleanup=null)}else if(typeof ne=="function")try{ne(null)}catch(pe){Rt(q,Z,pe)}else ne.current=null}function wc(q){var Z=q.type,ne=q.memoizedProps,ae=q.stateNode;try{e:switch(Z){case"button":case"input":case"select":case"textarea":ne.autoFocus&&ae.focus();break e;case"img":ne.src?ae.src=ne.src:ne.srcSet&&(ae.srcset=ne.srcSet)}}catch(pe){Rt(q,q.return,pe)}}function Au(q,Z,ne){try{var ae=q.stateNode;mm(ae,q.type,ne,Z),ae[pr]=Z}catch(pe){Rt(q,q.return,pe)}}function Mu(q){return q.tag===5||q.tag===3||q.tag===26||q.tag===27&&Fc(q.type)||q.tag===4}function hl(q){e:for(;;){for(;q.sibling===null;){if(q.return===null||Mu(q.return))return null;q=q.return}for(q.sibling.return=q.return,q=q.sibling;q.tag!==5&&q.tag!==6&&q.tag!==18;){if(q.tag===27&&Fc(q.type)||q.flags&2||q.child===null||q.tag===4)continue e;q.child.return=q,q=q.child}if(!(q.flags&2))return q.stateNode}}function fl(q,Z,ne){var ae=q.tag;if(ae===5||ae===6)q=q.stateNode,Z?(ne.nodeType===9?ne.body:ne.nodeName==="HTML"?ne.ownerDocument.body:ne).insertBefore(q,Z):(Z=ne.nodeType===9?ne.body:ne.nodeName==="HTML"?ne.ownerDocument.body:ne,Z.appendChild(q),ne=ne._reactRootContainer,ne!=null||Z.onclick!==null||(Z.onclick=Ad));else if(ae!==4&&(ae===27&&Fc(q.type)&&(ne=q.stateNode,Z=null),q=q.child,q!==null))for(fl(q,Z,ne),q=q.sibling;q!==null;)fl(q,Z,ne),q=q.sibling}function dl(q,Z,ne){var ae=q.tag;if(ae===5||ae===6)q=q.stateNode,Z?ne.insertBefore(q,Z):ne.appendChild(q);else if(ae!==4&&(ae===27&&Fc(q.type)&&(ne=q.stateNode),q=q.child,q!==null))for(dl(q,Z,ne),q=q.sibling;q!==null;)dl(q,Z,ne),q=q.sibling}function pl(q){var Z=q.stateNode,ne=q.memoizedProps;try{for(var ae=q.type,pe=Z.attributes;pe.length;)Z.removeAttributeNode(pe[0]);Ds(Z,ae,ne),Z[Er]=q,Z[pr]=ne}catch(xe){Rt(q,q.return,xe)}}var ro=!1,cr=!1,Ic=!1,ea=typeof WeakSet=="function"?WeakSet:Set,sr=null;function Zr(q,Z){if(q=q.containerInfo,rp=Dd,q=Ch(q),eu(q)){if("selectionStart"in q)var ne={start:q.selectionStart,end:q.selectionEnd};else e:{ne=(ne=q.ownerDocument)&&ne.defaultView||window;var ae=ne.getSelection&&ne.getSelection();if(ae&&ae.rangeCount!==0){ne=ae.anchorNode;var pe=ae.anchorOffset,xe=ae.focusNode;ae=ae.focusOffset;try{ne.nodeType,xe.nodeType}catch{ne=null;break e}var Be=0,ke=-1,Je=-1,ln=0,An=0,wn=q,mn=null;t:for(;;){for(var _n;wn!==ne||pe!==0&&wn.nodeType!==3||(ke=Be+pe),wn!==xe||ae!==0&&wn.nodeType!==3||(Je=Be+ae),wn.nodeType===3&&(Be+=wn.nodeValue.length),(_n=wn.firstChild)!==null;)mn=wn,wn=_n;for(;;){if(wn===q)break t;if(mn===ne&&++ln===pe&&(ke=Be),mn===xe&&++An===ae&&(Je=Be),(_n=wn.nextSibling)!==null)break;wn=mn,mn=wn.parentNode}wn=_n}ne=ke===-1||Je===-1?null:{start:ke,end:Je}}else ne=null}ne=ne||{start:0,end:0}}else ne=null;for(sp={focusedElem:q,selectionRange:ne},Dd=!1,sr=Z;sr!==null;)if(Z=sr,q=Z.child,(Z.subtreeFlags&1024)!==0&&q!==null)q.return=Z,sr=q;else for(;sr!==null;){switch(Z=sr,xe=Z.alternate,q=Z.flags,Z.tag){case 0:break;case 11:case 15:break;case 1:if((q&1024)!==0&&xe!==null){q=void 0,ne=Z,pe=xe.memoizedProps,xe=xe.memoizedState,ae=ne.stateNode;try{var vi=to(ne.type,pe,ne.elementType===ne.type);q=ae.getSnapshotBeforeUpdate(vi,xe),ae.__reactInternalSnapshotBeforeUpdate=q}catch(di){Rt(ne,ne.return,di)}}break;case 3:if((q&1024)!==0){if(q=Z.stateNode.containerInfo,ne=q.nodeType,ne===9)cp(q);else if(ne===1)switch(q.nodeName){case"HEAD":case"HTML":case"BODY":cp(q);break;default:q.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((q&1024)!==0)throw Error(o(163))}if(q=Z.sibling,q!==null){q.return=Z.return,sr=q;break}sr=Z.return}}function Oo(q,Z,ne){var ae=ne.flags;switch(ne.tag){case 0:case 11:case 15:ws(q,ne),ae&4&&Hl(5,ne);break;case 1:if(ws(q,ne),ae&4)if(q=ne.stateNode,Z===null)try{q.componentDidMount()}catch(Be){Rt(ne,ne.return,Be)}else{var pe=to(ne.type,Z.memoizedProps);Z=Z.memoizedState;try{q.componentDidUpdate(pe,Z,q.__reactInternalSnapshotBeforeUpdate)}catch(Be){Rt(ne,ne.return,Be)}}ae&64&&jl(ne),ae&512&&ql(ne,ne.return);break;case 3:if(ws(q,ne),ae&64&&(q=ne.updateQueue,q!==null)){if(Z=null,ne.child!==null)switch(ne.child.tag){case 27:case 5:Z=ne.child.stateNode;break;case 1:Z=ne.child.stateNode}try{Lf(q,Z)}catch(Be){Rt(ne,ne.return,Be)}}break;case 27:Z===null&&ae&4&&pl(ne);case 26:case 5:ws(q,ne),Z===null&&ae&4&&wc(ne),ae&512&&ql(ne,ne.return);break;case 12:ws(q,ne);break;case 13:ws(q,ne),ae&4&&ml(q,ne),ae&64&&(q=ne.memoizedState,q!==null&&(q=q.dehydrated,q!==null&&(ne=yr.bind(null,ne),xm(q,ne))));break;case 22:if(ae=ne.memoizedState!==null||ro,!ae){Z=Z!==null&&Z.memoizedState!==null||cr,pe=ro;var xe=cr;ro=ae,(cr=Z)&&!xe?so(q,ne,(ne.subtreeFlags&8772)!==0):ws(q,ne),ro=pe,cr=xe}break;case 30:break;default:ws(q,ne)}}function wi(q){var Z=q.alternate;Z!==null&&(q.alternate=null,wi(Z)),q.child=null,q.deletions=null,q.sibling=null,q.tag===5&&(Z=q.stateNode,Z!==null&&ji(Z)),q.stateNode=null,q.return=null,q.dependencies=null,q.memoizedProps=null,q.memoizedState=null,q.pendingProps=null,q.stateNode=null,q.updateQueue=null}var hi=null,Wi=!1;function Ma(q,Z,ne){for(ne=ne.child;ne!==null;)Wl(q,Z,ne),ne=ne.sibling}function Wl(q,Z,ne){if(Cn&&typeof Cn.onCommitFiberUnmount=="function")try{Cn.onCommitFiberUnmount(an,ne)}catch{}switch(ne.tag){case 26:cr||io(ne,Z),Ma(q,Z,ne),ne.memoizedState?ne.memoizedState.count--:ne.stateNode&&(ne=ne.stateNode,ne.parentNode.removeChild(ne));break;case 27:cr||io(ne,Z);var ae=hi,pe=Wi;Fc(ne.type)&&(hi=ne.stateNode,Wi=!1),Ma(q,Z,ne),yf(ne.stateNode),hi=ae,Wi=pe;break;case 5:cr||io(ne,Z);case 6:if(ae=hi,pe=Wi,hi=null,Ma(q,Z,ne),hi=ae,Wi=pe,hi!==null)if(Wi)try{(hi.nodeType===9?hi.body:hi.nodeName==="HTML"?hi.ownerDocument.body:hi).removeChild(ne.stateNode)}catch(xe){Rt(ne,Z,xe)}else try{hi.removeChild(ne.stateNode)}catch(xe){Rt(ne,Z,xe)}break;case 18:hi!==null&&(Wi?(q=hi,Np(q.nodeType===9?q.body:q.nodeName==="HTML"?q.ownerDocument.body:q,ne.stateNode),Af(q)):Np(hi,ne.stateNode));break;case 4:ae=hi,pe=Wi,hi=ne.stateNode.containerInfo,Wi=!0,Ma(q,Z,ne),hi=ae,Wi=pe;break;case 0:case 11:case 14:case 15:cr||Js(2,ne,Z),cr||Js(4,ne,Z),Ma(q,Z,ne);break;case 1:cr||(io(ne,Z),ae=ne.stateNode,typeof ae.componentWillUnmount=="function"&&Lo(ne,Z,ae)),Ma(q,Z,ne);break;case 21:Ma(q,Z,ne);break;case 22:cr=(ae=cr)||ne.memoizedState!==null,Ma(q,Z,ne),cr=ae;break;default:Ma(q,Z,ne)}}function ml(q,Z){if(Z.memoizedState===null&&(q=Z.alternate,q!==null&&(q=q.memoizedState,q!==null&&(q=q.dehydrated,q!==null))))try{Af(q)}catch(ne){Rt(Z,Z.return,ne)}}function hh(q){switch(q.tag){case 13:case 19:var Z=q.stateNode;return Z===null&&(Z=q.stateNode=new ea),Z;case 22:return q=q.stateNode,Z=q._retryCache,Z===null&&(Z=q._retryCache=new ea),Z;default:throw Error(o(435,q.tag))}}function Xl(q,Z){var ne=hh(q);Z.forEach(function(ae){var pe=_i.bind(null,q,ae);ne.has(ae)||(ne.add(ae),ae.then(pe,pe))})}function os(q,Z){var ne=Z.deletions;if(ne!==null)for(var ae=0;ae<ne.length;ae++){var pe=ne[ae],xe=q,Be=Z,ke=Be;e:for(;ke!==null;){switch(ke.tag){case 27:if(Fc(ke.type)){hi=ke.stateNode,Wi=!1;break e}break;case 5:hi=ke.stateNode,Wi=!1;break e;case 3:case 4:hi=ke.stateNode.containerInfo,Wi=!0;break e}ke=ke.return}if(hi===null)throw Error(o(160));Wl(xe,Be,pe),hi=null,Wi=!1,xe=pe.alternate,xe!==null&&(xe.return=null),pe.return=null}if(Z.subtreeFlags&13878)for(Z=Z.child;Z!==null;)fh(Z,q),Z=Z.sibling}var Ga=null;function fh(q,Z){var ne=q.alternate,ae=q.flags;switch(q.tag){case 0:case 11:case 14:case 15:os(Z,q),Ir(q),ae&4&&(Js(3,q,q.return),Hl(3,q),Js(5,q,q.return));break;case 1:os(Z,q),Ir(q),ae&512&&(cr||ne===null||io(ne,ne.return)),ae&64&&ro&&(q=q.updateQueue,q!==null&&(ae=q.callbacks,ae!==null&&(ne=q.shared.hiddenCallbacks,q.shared.hiddenCallbacks=ne===null?ae:ne.concat(ae))));break;case 26:var pe=Ga;if(os(Z,q),Ir(q),ae&512&&(cr||ne===null||io(ne,ne.return)),ae&4){var xe=ne!==null?ne.memoizedState:null;if(ae=q.memoizedState,ne===null)if(ae===null)if(q.stateNode===null){e:{ae=q.type,ne=q.memoizedProps,pe=pe.ownerDocument||pe;t:switch(ae){case"title":xe=pe.getElementsByTagName("title")[0],(!xe||xe[Hs]||xe[Er]||xe.namespaceURI==="http://www.w3.org/2000/svg"||xe.hasAttribute("itemprop"))&&(xe=pe.createElement(ae),pe.head.insertBefore(xe,pe.querySelector("head > title"))),Ds(xe,ae,ne),xe[Er]=q,Sr(xe),ae=xe;break e;case"link":var Be=jp("link","href",pe).get(ae+(ne.href||""));if(Be){for(var ke=0;ke<Be.length;ke++)if(xe=Be[ke],xe.getAttribute("href")===(ne.href==null||ne.href===""?null:ne.href)&&xe.getAttribute("rel")===(ne.rel==null?null:ne.rel)&&xe.getAttribute("title")===(ne.title==null?null:ne.title)&&xe.getAttribute("crossorigin")===(ne.crossOrigin==null?null:ne.crossOrigin)){Be.splice(ke,1);break t}}xe=pe.createElement(ae),Ds(xe,ae,ne),pe.head.appendChild(xe);break;case"meta":if(Be=jp("meta","content",pe).get(ae+(ne.content||""))){for(ke=0;ke<Be.length;ke++)if(xe=Be[ke],xe.getAttribute("content")===(ne.content==null?null:""+ne.content)&&xe.getAttribute("name")===(ne.name==null?null:ne.name)&&xe.getAttribute("property")===(ne.property==null?null:ne.property)&&xe.getAttribute("http-equiv")===(ne.httpEquiv==null?null:ne.httpEquiv)&&xe.getAttribute("charset")===(ne.charSet==null?null:ne.charSet)){Be.splice(ke,1);break t}}xe=pe.createElement(ae),Ds(xe,ae,ne),pe.head.appendChild(xe);break;default:throw Error(o(468,ae))}xe[Er]=q,Sr(xe),ae=xe}q.stateNode=ae}else qp(pe,q.type,q.stateNode);else q.stateNode=Hp(pe,ae,q.memoizedProps);else xe!==ae?(xe===null?ne.stateNode!==null&&(ne=ne.stateNode,ne.parentNode.removeChild(ne)):xe.count--,ae===null?qp(pe,q.type,q.stateNode):Hp(pe,ae,q.memoizedProps)):ae===null&&q.stateNode!==null&&Au(q,q.memoizedProps,ne.memoizedProps)}break;case 27:os(Z,q),Ir(q),ae&512&&(cr||ne===null||io(ne,ne.return)),ne!==null&&ae&4&&Au(q,q.memoizedProps,ne.memoizedProps);break;case 5:if(os(Z,q),Ir(q),ae&512&&(cr||ne===null||io(ne,ne.return)),q.flags&32){pe=q.stateNode;try{Lr(pe,"")}catch(_n){Rt(q,q.return,_n)}}ae&4&&q.stateNode!=null&&(pe=q.memoizedProps,Au(q,pe,ne!==null?ne.memoizedProps:pe)),ae&1024&&(Ic=!0);break;case 6:if(os(Z,q),Ir(q),ae&4){if(q.stateNode===null)throw Error(o(162));ae=q.memoizedProps,ne=q.stateNode;try{ne.nodeValue=ae}catch(_n){Rt(q,q.return,_n)}}break;case 3:if(Pd=null,pe=Ga,Ga=Rd(Z.containerInfo),os(Z,q),Ga=pe,Ir(q),ae&4&&ne!==null&&ne.memoizedState.isDehydrated)try{Af(Z.containerInfo)}catch(_n){Rt(q,q.return,_n)}Ic&&(Ic=!1,gl(q));break;case 4:ae=Ga,Ga=Rd(q.stateNode.containerInfo),os(Z,q),Ir(q),Ga=ae;break;case 12:os(Z,q),Ir(q);break;case 13:os(Z,q),Ir(q),q.child.flags&8192&&q.memoizedState!==null!=(ne!==null&&ne.memoizedState!==null)&&(ir=kt()),ae&4&&(ae=q.updateQueue,ae!==null&&(q.updateQueue=null,Xl(q,ae)));break;case 22:pe=q.memoizedState!==null;var Je=ne!==null&&ne.memoizedState!==null,ln=ro,An=cr;if(ro=ln||pe,cr=An||Je,os(Z,q),cr=An,ro=ln,Ir(q),ae&8192)e:for(Z=q.stateNode,Z._visibility=pe?Z._visibility&-2:Z._visibility|1,pe&&(ne===null||Je||ro||cr||ta(q)),ne=null,Z=q;;){if(Z.tag===5||Z.tag===26){if(ne===null){Je=ne=Z;try{if(xe=Je.stateNode,pe)Be=xe.style,typeof Be.setProperty=="function"?Be.setProperty("display","none","important"):Be.display="none";else{ke=Je.stateNode;var wn=Je.memoizedProps.style,mn=wn!=null&&wn.hasOwnProperty("display")?wn.display:null;ke.style.display=mn==null||typeof mn=="boolean"?"":(""+mn).trim()}}catch(_n){Rt(Je,Je.return,_n)}}}else if(Z.tag===6){if(ne===null){Je=Z;try{Je.stateNode.nodeValue=pe?"":Je.memoizedProps}catch(_n){Rt(Je,Je.return,_n)}}}else if((Z.tag!==22&&Z.tag!==23||Z.memoizedState===null||Z===q)&&Z.child!==null){Z.child.return=Z,Z=Z.child;continue}if(Z===q)break e;for(;Z.sibling===null;){if(Z.return===null||Z.return===q)break e;ne===Z&&(ne=null),Z=Z.return}ne===Z&&(ne=null),Z.sibling.return=Z.return,Z=Z.sibling}ae&4&&(ae=q.updateQueue,ae!==null&&(ne=ae.retryQueue,ne!==null&&(ae.retryQueue=null,Xl(q,ne))));break;case 19:os(Z,q),Ir(q),ae&4&&(ae=q.updateQueue,ae!==null&&(q.updateQueue=null,Xl(q,ae)));break;case 30:break;case 21:break;default:os(Z,q),Ir(q)}}function Ir(q){var Z=q.flags;if(Z&2){try{for(var ne,ae=q.return;ae!==null;){if(Mu(ae)){ne=ae;break}ae=ae.return}if(ne==null)throw Error(o(160));switch(ne.tag){case 27:var pe=ne.stateNode,xe=hl(q);dl(q,xe,pe);break;case 5:var Be=ne.stateNode;ne.flags&32&&(Lr(Be,""),ne.flags&=-33);var ke=hl(q);dl(q,ke,Be);break;case 3:case 4:var Je=ne.stateNode.containerInfo,ln=hl(q);fl(q,ln,Je);break;default:throw Error(o(161))}}catch(An){Rt(q,q.return,An)}q.flags&=-3}Z&4096&&(q.flags&=-4097)}function gl(q){if(q.subtreeFlags&1024)for(q=q.child;q!==null;){var Z=q;gl(Z),Z.tag===5&&Z.flags&1024&&Z.stateNode.reset(),q=q.sibling}}function ws(q,Z){if(Z.subtreeFlags&8772)for(Z=Z.child;Z!==null;)Oo(q,Z.alternate,Z),Z=Z.sibling}function ta(q){for(q=q.child;q!==null;){var Z=q;switch(Z.tag){case 0:case 11:case 14:case 15:Js(4,Z,Z.return),ta(Z);break;case 1:io(Z,Z.return);var ne=Z.stateNode;typeof ne.componentWillUnmount=="function"&&Lo(Z,Z.return,ne),ta(Z);break;case 27:yf(Z.stateNode);case 26:case 5:io(Z,Z.return),ta(Z);break;case 22:Z.memoizedState===null&&ta(Z);break;case 30:ta(Z);break;default:ta(Z)}q=q.sibling}}function so(q,Z,ne){for(ne=ne&&(Z.subtreeFlags&8772)!==0,Z=Z.child;Z!==null;){var ae=Z.alternate,pe=q,xe=Z,Be=xe.flags;switch(xe.tag){case 0:case 11:case 15:so(pe,xe,ne),Hl(4,xe);break;case 1:if(so(pe,xe,ne),ae=xe,pe=ae.stateNode,typeof pe.componentDidMount=="function")try{pe.componentDidMount()}catch(ln){Rt(ae,ae.return,ln)}if(ae=xe,pe=ae.updateQueue,pe!==null){var ke=ae.stateNode;try{var Je=pe.shared.hiddenCallbacks;if(Je!==null)for(pe.shared.hiddenCallbacks=null,pe=0;pe<Je.length;pe++)Ec(Je[pe],ke)}catch(ln){Rt(ae,ae.return,ln)}}ne&&Be&64&&jl(xe),ql(xe,xe.return);break;case 27:pl(xe);case 26:case 5:so(pe,xe,ne),ne&&ae===null&&Be&4&&wc(xe),ql(xe,xe.return);break;case 12:so(pe,xe,ne);break;case 13:so(pe,xe,ne),ne&&Be&4&&ml(pe,xe);break;case 22:xe.memoizedState===null&&so(pe,xe,ne),ql(xe,xe.return);break;case 30:break;default:so(pe,xe,ne)}Z=Z.sibling}}function dh(q,Z){var ne=null;q!==null&&q.memoizedState!==null&&q.memoizedState.cachePool!==null&&(ne=q.memoizedState.cachePool.pool),q=null,Z.memoizedState!==null&&Z.memoizedState.cachePool!==null&&(q=Z.memoizedState.cachePool.pool),q!==ne&&(q!=null&&q.refCount++,ne!=null&&pc(ne))}function ph(q,Z){q=null,Z.alternate!==null&&(q=Z.alternate.memoizedState.cache),Z=Z.memoizedState.cache,Z!==q&&(Z.refCount++,q!=null&&pc(q))}function ar(q,Z,ne,ae){if(Z.subtreeFlags&10256)for(Z=Z.child;Z!==null;)mh(q,Z,ne,ae),Z=Z.sibling}function mh(q,Z,ne,ae){var pe=Z.flags;switch(Z.tag){case 0:case 11:case 15:ar(q,Z,ne,ae),pe&2048&&Hl(9,Z);break;case 1:ar(q,Z,ne,ae);break;case 3:ar(q,Z,ne,ae),pe&2048&&(q=null,Z.alternate!==null&&(q=Z.alternate.memoizedState.cache),Z=Z.memoizedState.cache,Z!==q&&(Z.refCount++,q!=null&&pc(q)));break;case 12:if(pe&2048){ar(q,Z,ne,ae),q=Z.stateNode;try{var xe=Z.memoizedProps,Be=xe.id,ke=xe.onPostCommit;typeof ke=="function"&&ke(Be,Z.alternate===null?"mount":"update",q.passiveEffectDuration,-0)}catch(Je){Rt(Z,Z.return,Je)}}else ar(q,Z,ne,ae);break;case 13:ar(q,Z,ne,ae);break;case 23:break;case 22:xe=Z.stateNode,Be=Z.alternate,Z.memoizedState!==null?xe._visibility&2?ar(q,Z,ne,ae):Ha(q,Z):xe._visibility&2?ar(q,Z,ne,ae):(xe._visibility|=2,No(q,Z,ne,ae,(Z.subtreeFlags&10256)!==0)),pe&2048&&dh(Be,Z);break;case 24:ar(q,Z,ne,ae),pe&2048&&ph(Z.alternate,Z);break;default:ar(q,Z,ne,ae)}}function No(q,Z,ne,ae,pe){for(pe=pe&&(Z.subtreeFlags&10256)!==0,Z=Z.child;Z!==null;){var xe=q,Be=Z,ke=ne,Je=ae,ln=Be.flags;switch(Be.tag){case 0:case 11:case 15:No(xe,Be,ke,Je,pe),Hl(8,Be);break;case 23:break;case 22:var An=Be.stateNode;Be.memoizedState!==null?An._visibility&2?No(xe,Be,ke,Je,pe):Ha(xe,Be):(An._visibility|=2,No(xe,Be,ke,Je,pe)),pe&&ln&2048&&dh(Be.alternate,Be);break;case 24:No(xe,Be,ke,Je,pe),pe&&ln&2048&&ph(Be.alternate,Be);break;default:No(xe,Be,ke,Je,pe)}Z=Z.sibling}}function Ha(q,Z){if(Z.subtreeFlags&10256)for(Z=Z.child;Z!==null;){var ne=q,ae=Z,pe=ae.flags;switch(ae.tag){case 22:Ha(ne,ae),pe&2048&&dh(ae.alternate,ae);break;case 24:Ha(ne,ae),pe&2048&&ph(ae.alternate,ae);break;default:Ha(ne,ae)}Z=Z.sibling}}var na=8192;function Dc(q){if(q.subtreeFlags&na)for(q=q.child;q!==null;)Sd(q),q=q.sibling}function Sd(q){switch(q.tag){case 26:Dc(q),q.flags&na&&q.memoizedState!==null&&Om(Ga,q.memoizedState,q.memoizedProps);break;case 5:Dc(q);break;case 3:case 4:var Z=Ga;Ga=Rd(q.stateNode.containerInfo),Dc(q),Ga=Z;break;case 22:q.memoizedState===null&&(Z=q.alternate,Z!==null&&Z.memoizedState!==null?(Z=na,na=16777216,Dc(q),na=Z):Dc(q));break;default:Dc(q)}}function xd(q){var Z=q.alternate;if(Z!==null&&(q=Z.child,q!==null)){Z.child=null;do Z=q.sibling,q.sibling=null,q=Z;while(q!==null)}}function ur(q){var Z=q.deletions;if((q.flags&16)!==0){if(Z!==null)for(var ne=0;ne<Z.length;ne++){var ae=Z[ne];sr=ae,oo(ae,q)}xd(q)}if(q.subtreeFlags&10256)for(q=q.child;q!==null;)ff(q),q=q.sibling}function ff(q){switch(q.tag){case 0:case 11:case 15:ur(q),q.flags&2048&&Js(9,q,q.return);break;case 3:ur(q);break;case 12:ur(q);break;case 22:var Z=q.stateNode;q.memoizedState!==null&&Z._visibility&2&&(q.return===null||q.return.tag!==13)?(Z._visibility&=-3,ao(q)):ur(q);break;default:ur(q)}}function ao(q){var Z=q.deletions;if((q.flags&16)!==0){if(Z!==null)for(var ne=0;ne<Z.length;ne++){var ae=Z[ne];sr=ae,oo(ae,q)}xd(q)}for(q=q.child;q!==null;){switch(Z=q,Z.tag){case 0:case 11:case 15:Js(8,Z,Z.return),ao(Z);break;case 22:ne=Z.stateNode,ne._visibility&2&&(ne._visibility&=-3,ao(Z));break;default:ao(Z)}q=q.sibling}}function oo(q,Z){for(;sr!==null;){var ne=sr;switch(ne.tag){case 0:case 11:case 15:Js(8,ne,Z);break;case 23:case 22:if(ne.memoizedState!==null&&ne.memoizedState.cachePool!==null){var ae=ne.memoizedState.cachePool.pool;ae!=null&&ae.refCount++}break;case 24:pc(ne.memoizedState.cache)}if(ae=ne.child,ae!==null)ae.return=ne,sr=ae;else e:for(ne=q;sr!==null;){ae=sr;var pe=ae.sibling,xe=ae.return;if(wi(ae),ae===ne){sr=null;break e}if(pe!==null){pe.return=xe,sr=pe;break e}sr=xe}}}var Dr={getCacheForType:function(q){var Z=wr(qr),ne=Z.data.get(q);return ne===void 0&&(ne=q(),Z.data.set(q,ne)),ne}},df=typeof WeakMap=="function"?WeakMap:Map,Qi=0,xi=null,Di=null,ci=0,Ri=0,Rr=null,ia=!1,Vc=!1,Lc=!1,Ra=0,gr=0,ja=0,lo=0,$l=0,Ca=0,Xi=0,Ji=null,fi=null,Bi=!1,ir=0,Es=1/0,Pa=null,ra=null,Qr=0,Ss=null,or=null,sa=0,Fo=0,Ru=null,aa=null,co=0,Kl=null;function Vr(){if((Qi&2)!==0&&ci!==0)return ci&-ci;if(Ve.T!==null){var q=bi;return q!==0?q:Yd()}return gi()}function gh(){Ca===0&&(Ca=(ci&536870912)===0||$i?pt():536870912);var q=rr.current;return q!==null&&(q.flags|=32),Ca}function Is(q,Z,ne){(q===xi&&(Ri===2||Ri===9)||q.cancelPendingCommit!==null)&&(_l(q,0),qa(q,ci,Ca,!1)),Tn(q,ne),((Qi&2)===0||q!==xi)&&(q===xi&&((Qi&2)===0&&(lo|=ne),gr===4&&qa(q,ci,Ca,!1)),Sl(q))}function Oc(q,Z,ne){if((Qi&6)!==0)throw Error(o(327));var ae=!ne&&(Z&124)===0&&(Z&q.expiredLanes)===0||xn(q,Z),pe=ae?me(q,Z):te(q,Z,!0),xe=ae;do{if(pe===0){Vc&&!ae&&qa(q,Z,0,!1);break}else{if(ne=q.current.alternate,xe&&!yl(ne)){pe=te(q,Z,!1),xe=!1;continue}if(pe===2){if(xe=Z,q.errorRecoveryDisabledLanes&xe)var Be=0;else Be=q.pendingLanes&-536870913,Be=Be!==0?Be:Be&536870912?536870912:0;if(Be!==0){Z=Be;e:{var ke=q;pe=Ji;var Je=ke.current.memoizedState.isDehydrated;if(Je&&(_l(ke,Be).flags|=256),Be=te(ke,Be,!1),Be!==2){if(Lc&&!Je){ke.errorRecoveryDisabledLanes|=xe,lo|=xe,pe=4;break e}xe=fi,fi=pe,xe!==null&&(fi===null?fi=xe:fi.push.apply(fi,xe))}pe=Be}if(xe=!1,pe!==2)continue}}if(pe===1){_l(q,0),qa(q,Z,0,!0);break}e:{switch(ae=q,xe=pe,xe){case 0:case 1:throw Error(o(345));case 4:if((Z&4194048)!==Z)break;case 6:qa(ae,Z,Ca,!ia);break e;case 2:fi=null;break;case 3:case 5:break;default:throw Error(o(329))}if((Z&62914560)===Z&&(pe=ir+300-kt(),10<pe)){if(qa(ae,Z,Ca,!ia),yt(ae,0,!0)!==0)break e;ae.timeoutHandle=Lp(Cu.bind(null,ae,ne,fi,Pa,Bi,Z,Ca,lo,Xi,ia,xe,2,-0,0),pe);break e}Cu(ae,ne,fi,Pa,Bi,Z,Ca,lo,Xi,ia,xe,0,-0,0)}}break}while(!0);Sl(q)}function Cu(q,Z,ne,ae,pe,xe,Be,ke,Je,ln,An,wn,mn,_n){if(q.timeoutHandle=-1,wn=Z.subtreeFlags,(wn&8192||(wn&16785408)===16785408)&&(Ef={stylesheets:null,count:0,unsuspend:Lm},Sd(Z),wn=Nm(),wn!==null)){q.cancelPendingCommit=wn(zn.bind(null,q,Z,xe,ne,ae,pe,Be,ke,Je,An,1,mn,_n)),qa(q,xe,Be,!ln);return}zn(q,Z,xe,ne,ae,pe,Be,ke,Je)}function yl(q){for(var Z=q;;){var ne=Z.tag;if((ne===0||ne===11||ne===15)&&Z.flags&16384&&(ne=Z.updateQueue,ne!==null&&(ne=ne.stores,ne!==null)))for(var ae=0;ae<ne.length;ae++){var pe=ne[ae],xe=pe.getSnapshot;pe=pe.value;try{if(!Ns(xe(),pe))return!1}catch{return!1}}if(ne=Z.child,Z.subtreeFlags&16384&&ne!==null)ne.return=Z,Z=ne;else{if(Z===q)break;for(;Z.sibling===null;){if(Z.return===null||Z.return===q)return!0;Z=Z.return}Z.sibling.return=Z.return,Z=Z.sibling}}return!0}function qa(q,Z,ne,ae){Z&=~$l,Z&=~lo,q.suspendedLanes|=Z,q.pingedLanes&=~Z,ae&&(q.warmLanes|=Z),ae=q.expirationTimes;for(var pe=Z;0<pe;){var xe=31-Fn(pe),Be=1<<xe;ae[xe]=-1,pe&=~Be}ne!==0&&Hn(q,ne,Z)}function uo(){return(Qi&6)===0?(pf(0),!1):!0}function Yl(){if(Di!==null){if(Ri===0)var q=Di.return;else q=Di,Ao=tl=null,$h(q),Ll=null,Eu=0,q=Di;for(;q!==null;)Pc(q.alternate,q),q=q.return;Di=null}}function _l(q,Z){var ne=q.timeoutHandle;ne!==-1&&(q.timeoutHandle=-1,ym(ne)),ne=q.cancelPendingCommit,ne!==null&&(q.cancelPendingCommit=null,ne()),Yl(),xi=q,Di=ne=Fr(q.current,null),ci=Z,Ri=0,Rr=null,ia=!1,Vc=xn(q,Z),Lc=!1,Xi=Ca=$l=lo=ja=gr=0,fi=Ji=null,Bi=!1,(Z&8)!==0&&(Z|=Z&32);var ae=q.entangledLanes;if(ae!==0)for(q=q.entanglements,ae&=Z;0<ae;){var pe=31-Fn(ae),xe=1<<pe;Z|=q[pe],ae&=~xe}return Ra=Z,iu(),ne}function yh(q,Z){Ai=null,Ve.H=vu,Z===du||Z===Na?(Z=Hh(),Ri=3):Z===Gh?(Z=Hh(),Ri=4):Ri=Z===Ed?8:Z!==null&&typeof Z=="object"&&typeof Z.then=="function"?6:1,Rr=Z,Di===null&&(gr=1,lh(q,us(Z,q.current)))}function Nc(){var q=Ve.H;return Ve.H=vu,q===null?vu:q}function _h(){var q=Ve.A;return Ve.A=Dr,q}function J(){gr=4,ia||(ci&4194048)!==ci&&rr.current!==null||(Vc=!0),(ja&134217727)===0&&(lo&134217727)===0||xi===null||qa(xi,ci,Ca,!1)}function te(q,Z,ne){var ae=Qi;Qi|=2;var pe=Nc(),xe=_h();(xi!==q||ci!==Z)&&(Pa=null,_l(q,Z)),Z=!1;var Be=gr;e:do try{if(Ri!==0&&Di!==null){var ke=Di,Je=Rr;switch(Ri){case 8:Yl(),Be=6;break e;case 3:case 2:case 9:case 6:rr.current===null&&(Z=!0);var ln=Ri;if(Ri=0,Rr=null,lt(q,ke,Je,ln),ne&&Vc){Be=0;break e}break;default:ln=Ri,Ri=0,Rr=null,lt(q,ke,Je,ln)}}he(),Be=gr;break}catch(An){yh(q,An)}while(!0);return Z&&q.shellSuspendCounter++,Ao=tl=null,Qi=ae,Ve.H=pe,Ve.A=xe,Di===null&&(xi=null,ci=0,iu()),Be}function he(){for(;Di!==null;)Ie(Di)}function me(q,Z){var ne=Qi;Qi|=2;var ae=Nc(),pe=_h();xi!==q||ci!==Z?(Pa=null,Es=kt()+500,_l(q,Z)):Vc=xn(q,Z);e:do try{if(Ri!==0&&Di!==null){Z=Di;var xe=Rr;t:switch(Ri){case 1:Ri=0,Rr=null,lt(q,Z,xe,1);break;case 2:case 9:if(Xu(xe)){Ri=0,Rr=null,je(Z);break}Z=function(){Ri!==2&&Ri!==9||xi!==q||(Ri=7),Sl(q)},xe.then(Z,Z);break e;case 3:Ri=7;break e;case 4:Ri=5;break e;case 7:Xu(xe)?(Ri=0,Rr=null,je(Z)):(Ri=0,Rr=null,lt(q,Z,xe,7));break;case 5:var Be=null;switch(Di.tag){case 26:Be=Di.memoizedState;case 5:case 27:var ke=Di;if(!Be||Wp(Be)){Ri=0,Rr=null;var Je=ke.sibling;if(Je!==null)Di=Je;else{var ln=ke.return;ln!==null?(Di=ln,qt(ln)):Di=null}break t}}Ri=0,Rr=null,lt(q,Z,xe,5);break;case 6:Ri=0,Rr=null,lt(q,Z,xe,6);break;case 8:Yl(),gr=6;break e;default:throw Error(o(462))}}Ae();break}catch(An){yh(q,An)}while(!0);return Ao=tl=null,Ve.H=ae,Ve.A=pe,Qi=ne,Di!==null?0:(xi=null,ci=0,iu(),gr)}function Ae(){for(;Di!==null&&!Qn();)Ie(Di)}function Ie(q){var Z=kl(q.alternate,q,Ra);q.memoizedProps=q.pendingProps,Z===null?qt(q):Di=Z}function je(q){var Z=q,ne=Z.alternate;switch(Z.tag){case 15:case 0:Z=Zs(ne,Z,Z.pendingProps,Z.type,void 0,ci);break;case 11:Z=Zs(ne,Z,Z.pendingProps,Z.type.render,Z.ref,ci);break;case 5:$h(Z);default:Pc(ne,Z),Z=Di=Oh(Z,Ra),Z=kl(ne,Z,Ra)}q.memoizedProps=q.pendingProps,Z===null?qt(q):Di=Z}function lt(q,Z,ne,ae){Ao=tl=null,$h(Z),Ll=null,Eu=0;var pe=Z.return;try{if($d(q,pe,Z,ne,ci)){gr=1,lh(q,us(ne,q.current)),Di=null;return}}catch(xe){if(pe!==null)throw Di=pe,xe;gr=1,lh(q,us(ne,q.current)),Di=null;return}Z.flags&32768?($i||ae===1?q=!0:Vc||(ci&536870912)!==0?q=!1:(ia=q=!0,(ae===2||ae===9||ae===3||ae===6)&&(ae=rr.current,ae!==null&&ae.tag===13&&(ae.flags|=16384))),bn(Z,q)):qt(Z)}function qt(q){var Z=q;do{if((Z.flags&32768)!==0){bn(Z,ia);return}q=Z.return;var ne=hf(Z.alternate,Z,Ra);if(ne!==null){Di=ne;return}if(Z=Z.sibling,Z!==null){Di=Z;return}Di=Z=q}while(Z!==null);gr===0&&(gr=5)}function bn(q,Z){do{var ne=Cc(q.alternate,q);if(ne!==null){ne.flags&=32767,Di=ne;return}if(ne=q.return,ne!==null&&(ne.flags|=32768,ne.subtreeFlags=0,ne.deletions=null),!Z&&(q=q.sibling,q!==null)){Di=q;return}Di=q=ne}while(q!==null);gr=6,Di=null}function zn(q,Z,ne,ae,pe,xe,Be,ke,Je){q.cancelPendingCommit=null;do vl();while(Qr!==0);if((Qi&6)!==0)throw Error(o(327));if(Z!==null){if(Z===q.current)throw Error(o(177));if(xe=Z.lanes|Z.childLanes,xe|=Bu,$n(q,ne,xe,Be,ke,Je),q===xi&&(Di=xi=null,ci=0),or=Z,Ss=q,sa=ne,Fo=xe,Ru=pe,aa=ae,(Z.subtreeFlags&10256)!==0||(Z.flags&10256)!==0?(q.callbackNode=null,q.callbackPriority=0,Ki(He,function(){return El(),null})):(q.callbackNode=null,q.callbackPriority=0),ae=(Z.flags&13878)!==0,(Z.subtreeFlags&13878)!==0||ae){ae=Ve.T,Ve.T=null,pe=Ce.p,Ce.p=2,Be=Qi,Qi|=4;try{Zr(q,Z,ne)}finally{Qi=Be,Ce.p=pe,Ve.T=ae}}Qr=1,Yn(),Jn(),Ti()}}function Yn(){if(Qr===1){Qr=0;var q=Ss,Z=or,ne=(Z.flags&13878)!==0;if((Z.subtreeFlags&13878)!==0||ne){ne=Ve.T,Ve.T=null;var ae=Ce.p;Ce.p=2;var pe=Qi;Qi|=4;try{fh(Z,q);var xe=sp,Be=Ch(q.containerInfo),ke=xe.focusedElem,Je=xe.selectionRange;if(Be!==ke&&ke&&ke.ownerDocument&&Rh(ke.ownerDocument.documentElement,ke)){if(Je!==null&&eu(ke)){var ln=Je.start,An=Je.end;if(An===void 0&&(An=ln),"selectionStart"in ke)ke.selectionStart=ln,ke.selectionEnd=Math.min(An,ke.value.length);else{var wn=ke.ownerDocument||document,mn=wn&&wn.defaultView||window;if(mn.getSelection){var _n=mn.getSelection(),vi=ke.textContent.length,di=Math.min(Je.start,vi),dr=Je.end===void 0?di:Math.min(Je.end,vi);!_n.extend&&di>dr&&(Be=dr,dr=di,di=Be);var Ft=Mh(ke,di),wt=Mh(ke,dr);if(Ft&&wt&&(_n.rangeCount!==1||_n.anchorNode!==Ft.node||_n.anchorOffset!==Ft.offset||_n.focusNode!==wt.node||_n.focusOffset!==wt.offset)){var rn=wn.createRange();rn.setStart(Ft.node,Ft.offset),_n.removeAllRanges(),di>dr?(_n.addRange(rn),_n.extend(wt.node,wt.offset)):(rn.setEnd(wt.node,wt.offset),_n.addRange(rn))}}}}for(wn=[],_n=ke;_n=_n.parentNode;)_n.nodeType===1&&wn.push({element:_n,left:_n.scrollLeft,top:_n.scrollTop});for(typeof ke.focus=="function"&&ke.focus(),ke=0;ke<wn.length;ke++){var Rn=wn[ke];Rn.element.scrollLeft=Rn.left,Rn.element.scrollTop=Rn.top}}Dd=!!rp,sp=rp=null}finally{Qi=pe,Ce.p=ae,Ve.T=ne}}q.current=Z,Qr=2}}function Jn(){if(Qr===2){Qr=0;var q=Ss,Z=or,ne=(Z.flags&8772)!==0;if((Z.subtreeFlags&8772)!==0||ne){ne=Ve.T,Ve.T=null;var ae=Ce.p;Ce.p=2;var pe=Qi;Qi|=4;try{Oo(q,Z.alternate,Z)}finally{Qi=pe,Ce.p=ae,Ve.T=ne}}Qr=3}}function Ti(){if(Qr===4||Qr===3){Qr=0,yn();var q=Ss,Z=or,ne=sa,ae=aa;(Z.subtreeFlags&10256)!==0||(Z.flags&10256)!==0?Qr=5:(Qr=0,or=Ss=null,oa(q,q.pendingLanes));var pe=q.pendingLanes;if(pe===0&&(ra=null),Hi(ne),Z=Z.stateNode,Cn&&typeof Cn.onCommitFiberRoot=="function")try{Cn.onCommitFiberRoot(an,Z,void 0,(Z.current.flags&128)===128)}catch{}if(ae!==null){Z=Ve.T,pe=Ce.p,Ce.p=2,Ve.T=null;try{for(var xe=q.onRecoverableError,Be=0;Be<ae.length;Be++){var ke=ae[Be];xe(ke.value,{componentStack:ke.stack})}}finally{Ve.T=Z,Ce.p=pe}}(sa&3)!==0&&vl(),Sl(q),pe=q.pendingLanes,(ne&4194090)!==0&&(pe&42)!==0?q===Kl?co++:(co=0,Kl=q):co=0,pf(0)}}function oa(q,Z){(q.pooledCacheLanes&=Z)===0&&(Z=q.pooledCache,Z!=null&&(q.pooledCache=null,pc(Z)))}function vl(q){return Yn(),Jn(),Ti(),El()}function El(){if(Qr!==5)return!1;var q=Ss,Z=Fo;Fo=0;var ne=Hi(sa),ae=Ve.T,pe=Ce.p;try{Ce.p=32>ne?32:ne,Ve.T=null,ne=Ru,Ru=null;var xe=Ss,Be=sa;if(Qr=0,or=Ss=null,sa=0,(Qi&6)!==0)throw Error(o(331));var ke=Qi;if(Qi|=4,ff(xe.current),mh(xe,xe.current,Be,ne),Qi=ke,pf(0,!1),Cn&&typeof Cn.onPostCommitFiberRoot=="function")try{Cn.onPostCommitFiberRoot(an,xe)}catch{}return!0}finally{Ce.p=pe,Ve.T=ae,oa(q,Z)}}function fn(q,Z,ne){Z=us(ne,Z),Z=ch(q.stateNode,Z,2),q=Co(q,Z,2),q!==null&&(Tn(q,2),Sl(q))}function Rt(q,Z,ne){if(q.tag===3)fn(q,q,ne);else for(;Z!==null;){if(Z.tag===3){fn(Z,q,ne);break}else if(Z.tag===1){var ae=Z.stateNode;if(typeof Z.type.getDerivedStateFromError=="function"||typeof ae.componentDidCatch=="function"&&(ra===null||!ra.has(ae))){q=us(ne,q),ne=vd(2),ae=Co(Z,ne,2),ae!==null&&(uh(ne,ae,Z,q),Tn(ae,2),Sl(ae));break}}Z=Z.return}}function vn(q,Z,ne){var ae=q.pingCache;if(ae===null){ae=q.pingCache=new df;var pe=new Set;ae.set(Z,pe)}else pe=ae.get(Z),pe===void 0&&(pe=new Set,ae.set(Z,pe));pe.has(ne)||(Lc=!0,pe.add(ne),q=Bn.bind(null,q,Z,ne),Z.then(q,q))}function Bn(q,Z,ne){var ae=q.pingCache;ae!==null&&ae.delete(Z),q.pingedLanes|=q.suspendedLanes&ne,q.warmLanes&=~ne,xi===q&&(ci&ne)===ne&&(gr===4||gr===3&&(ci&62914560)===ci&&300>kt()-ir?(Qi&2)===0&&_l(q,0):$l|=ne,Xi===ci&&(Xi=0)),Sl(q)}function ai(q,Z){Z===0&&(Z=Nn()),q=To(q,Z),q!==null&&(Tn(q,Z),Sl(q))}function yr(q){var Z=q.memoizedState,ne=0;Z!==null&&(ne=Z.retryLane),ai(q,ne)}function _i(q,Z){var ne=0;switch(q.tag){case 13:var ae=q.stateNode,pe=q.memoizedState;pe!==null&&(ne=pe.retryLane);break;case 19:ae=q.stateNode;break;case 22:ae=q.stateNode._retryCache;break;default:throw Error(o(314))}ae!==null&&ae.delete(Z),ai(q,ne)}function Ki(q,Z){return Ln(q,Z)}var kr=null,Oi=null,ho=!1,Eh=!1,Kd=!1,Pu=0;function Sl(q){q!==Oi&&q.next===null&&(Oi===null?kr=Oi=q:Oi=Oi.next=q),Eh=!0,ho||(ho=!0,lm())}function pf(q,Z){if(!Kd&&Eh){Kd=!0;do for(var ne=!1,ae=kr;ae!==null;){if(q!==0){var pe=ae.pendingLanes;if(pe===0)var xe=0;else{var Be=ae.suspendedLanes,ke=ae.pingedLanes;xe=(1<<31-Fn(42|q)+1)-1,xe&=pe&~(Be&~ke),xe=xe&201326741?xe&201326741|1:xe?xe|2:0}xe!==0&&(ne=!0,bp(ae,xe))}else xe=ci,xe=yt(ae,ae===xi?xe:0,ae.cancelPendingCommit!==null||ae.timeoutHandle!==-1),(xe&3)===0||xn(ae,xe)||(ne=!0,bp(ae,xe));ae=ae.next}while(ne);Kd=!1}}function om(){Sp()}function Sp(){Eh=ho=!1;var q=0;Pu!==0&&(gm()&&(q=Pu),Pu=0);for(var Z=kt(),ne=null,ae=kr;ae!==null;){var pe=ae.next,xe=xp(ae,Z);xe===0?(ae.next=null,ne===null?kr=pe:ne.next=pe,pe===null&&(Oi=ne)):(ne=ae,(q!==0||(xe&3)!==0)&&(Eh=!0)),ae=pe}pf(q)}function xp(q,Z){for(var ne=q.suspendedLanes,ae=q.pingedLanes,pe=q.expirationTimes,xe=q.pendingLanes&-62914561;0<xe;){var Be=31-Fn(xe),ke=1<<Be,Je=pe[Be];Je===-1?((ke&ne)===0||(ke&ae)!==0)&&(pe[Be]=Xn(ke,Z)):Je<=Z&&(q.expiredLanes|=ke),xe&=~ke}if(Z=xi,ne=ci,ne=yt(q,q===Z?ne:0,q.cancelPendingCommit!==null||q.timeoutHandle!==-1),ae=q.callbackNode,ne===0||q===Z&&(Ri===2||Ri===9)||q.cancelPendingCommit!==null)return ae!==null&&ae!==null&&Ke(ae),q.callbackNode=null,q.callbackPriority=0;if((ne&3)===0||xn(q,ne)){if(Z=ne&-ne,Z===q.callbackPriority)return Z;switch(ae!==null&&Ke(ae),Hi(ne)){case 2:case 8:ne=Qt;break;case 32:ne=He;break;case 268435456:ne=Mt;break;default:ne=He}return ae=Tp.bind(null,q),ne=Ln(ne,ae),q.callbackPriority=Z,q.callbackNode=ne,Z}return ae!==null&&ae!==null&&Ke(ae),q.callbackPriority=2,q.callbackNode=null,2}function Tp(q,Z){if(Qr!==0&&Qr!==5)return q.callbackNode=null,q.callbackPriority=0,null;var ne=q.callbackNode;if(vl()&&q.callbackNode!==ne)return null;var ae=ci;return ae=yt(q,q===xi?ae:0,q.cancelPendingCommit!==null||q.timeoutHandle!==-1),ae===0?null:(Oc(q,ae,Z),xp(q,kt()),q.callbackNode!=null&&q.callbackNode===ne?Tp.bind(null,q):null)}function bp(q,Z){if(vl())return null;Oc(q,Z,!0)}function lm(){_m(function(){(Qi&6)!==0?Ln(Mn,om):Sp()})}function Yd(){return Pu===0&&(Pu=pt()),Pu}function Ap(q){return q==null||typeof q=="symbol"||typeof q=="boolean"?null:typeof q=="function"?q:bl(""+q)}function Mp(q,Z){var ne=Z.ownerDocument.createElement("input");return ne.name=Z.name,ne.value=Z.value,q.id&&ne.setAttribute("form",q.id),Z.parentNode.insertBefore(ne,Z),q=new FormData(q),ne.parentNode.removeChild(ne),q}function cm(q,Z,ne,ae,pe){if(Z==="submit"&&ne&&ne.stateNode===pe){var xe=Ap((pe[pr]||null).action),Be=ae.submitter;Be&&(Z=(Z=Be[pr]||null)?Ap(Z.formAction):Be.getAttribute("formAction"),Z!==null&&(xe=Z,Be=null));var ke=new jo("action","action",null,ae,pe);q.push({event:ke,listeners:[{instance:null,listener:function(){if(ae.defaultPrevented){if(Pu!==0){var Je=Be?Mp(pe,Be):new FormData(pe);of(ne,{pending:!0,data:Je,method:pe.method,action:xe},null,Je)}}else typeof xe=="function"&&(ke.preventDefault(),Je=Be?Mp(pe,Be):new FormData(pe),of(ne,{pending:!0,data:Je,method:pe.method,action:xe},xe,Je))},currentTarget:pe}]})}}for(var Zd=0;Zd<nu.length;Zd++){var Qd=nu[Zd],um=Qd.toLowerCase(),hm=Qd[0].toUpperCase()+Qd.slice(1);ns(um,"on"+hm)}ns(As,"onAnimationEnd"),ns(Ih,"onAnimationIteration"),ns(Bs,"onAnimationStart"),ns("dblclick","onDoubleClick"),ns("focusin","onFocus"),ns("focusout","onBlur"),ns(wf,"onTransitionRun"),ns(So,"onTransitionStart"),ns(cc,"onTransitionCancel"),ns(xo,"onTransitionEnd"),Ge("onMouseEnter",["mouseout","mouseover"]),Ge("onMouseLeave",["mouseout","mouseover"]),Ge("onPointerEnter",["pointerout","pointerover"]),Ge("onPointerLeave",["pointerout","pointerover"]),bs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),bs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),bs("onBeforeInput",["compositionend","keypress","textInput","paste"]),bs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),bs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),bs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var mf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fm=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(mf));function Rp(q,Z){Z=(Z&4)!==0;for(var ne=0;ne<q.length;ne++){var ae=q[ne],pe=ae.event;ae=ae.listeners;e:{var xe=void 0;if(Z)for(var Be=ae.length-1;0<=Be;Be--){var ke=ae[Be],Je=ke.instance,ln=ke.currentTarget;if(ke=ke.listener,Je!==xe&&pe.isPropagationStopped())break e;xe=ke,pe.currentTarget=ln;try{xe(pe)}catch(An){Nl(An)}pe.currentTarget=null,xe=Je}else for(Be=0;Be<ae.length;Be++){if(ke=ae[Be],Je=ke.instance,ln=ke.currentTarget,ke=ke.listener,Je!==xe&&pe.isPropagationStopped())break e;xe=ke,pe.currentTarget=ln;try{xe(pe)}catch(An){Nl(An)}pe.currentTarget=null,xe=Je}}}}function ki(q,Z){var ne=Z[ms];ne===void 0&&(ne=Z[ms]=new Set);var ae=q+"__bubble";ne.has(ae)||(Cp(Z,q,2,!1),ne.add(ae))}function Jd(q,Z,ne){var ae=0;Z&&(ae|=4),Cp(ne,q,ae,Z)}var Td="_reactListening"+Math.random().toString(36).slice(2);function ep(q){if(!q[Td]){q[Td]=!0,po.forEach(function(ne){ne!=="selectionchange"&&(fm.has(ne)||Jd(ne,!1,q),Jd(ne,!0,q))});var Z=q.nodeType===9?q:q.ownerDocument;Z===null||Z[Td]||(Z[Td]=!0,Jd("selectionchange",!1,Z))}}function Cp(q,Z,ne,ae){switch(Qp(Z)){case 2:var pe=Um;break;case 8:pe=zm;break;default:pe=gp}ne=pe.bind(null,Z,ne,q),pe=void 0,!Ls||Z!=="touchstart"&&Z!=="touchmove"&&Z!=="wheel"||(pe=!0),ae?pe!==void 0?q.addEventListener(Z,ne,{capture:!0,passive:pe}):q.addEventListener(Z,ne,!0):pe!==void 0?q.addEventListener(Z,ne,{passive:pe}):q.addEventListener(Z,ne,!1)}function tp(q,Z,ne,ae,pe){var xe=ae;if((Z&1)===0&&(Z&2)===0&&ae!==null)e:for(;;){if(ae===null)return;var Be=ae.tag;if(Be===3||Be===4){var ke=ae.stateNode.containerInfo;if(ke===pe)break;if(Be===4)for(Be=ae.return;Be!==null;){var Je=Be.tag;if((Je===3||Je===4)&&Be.stateNode.containerInfo===pe)return;Be=Be.return}for(;ke!==null;){if(Be=Vs(ke),Be===null)return;if(Je=Be.tag,Je===5||Je===6||Je===26||Je===27){ae=xe=Be;continue e}ke=ke.parentNode}}ae=ae.return}jc(function(){var ln=xe,An=qs(ne),wn=[];e:{var mn=Fu.get(q);if(mn!==void 0){var _n=jo,vi=q;switch(q){case"keypress":if(Os(ne)===0)break e;case"keydown":case"keyup":_n=Xo;break;case"focusin":vi="focus",_n=Al;break;case"focusout":vi="blur",_n=Al;break;case"beforeblur":case"afterblur":_n=Al;break;case"click":if(ne.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_n=Ws;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_n=Ah;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_n=ic;break;case As:case Ih:case Bs:_n=Ml;break;case xo:_n=da;break;case"scroll":case"scrollend":_n=qc;break;case"wheel":_n=sc;break;case"copy":case"cut":case"paste":_n=Rl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_n=Il;break;case"toggle":case"beforetoggle":_n=Va}var di=(Z&4)!==0,dr=!di&&(q==="scroll"||q==="scrollend"),Ft=di?mn!==null?mn+"Capture":null:mn;di=[];for(var wt=ln,rn;wt!==null;){var Rn=wt;if(rn=Rn.stateNode,Rn=Rn.tag,Rn!==5&&Rn!==26&&Rn!==27||rn===null||Ft===null||(Rn=zo(wt,Ft),Rn!=null&&di.push(gf(wt,Rn,rn))),dr)break;wt=wt.return}0<di.length&&(mn=new _n(mn,vi,null,ne,An),wn.push({event:mn,listeners:di}))}}if((Z&7)===0){e:{if(mn=q==="mouseover"||q==="pointerover",_n=q==="mouseout"||q==="pointerout",mn&&ne!==Xa&&(vi=ne.relatedTarget||ne.fromElement)&&(Vs(vi)||vi[Cr]))break e;if((_n||mn)&&(mn=An.window===An?An:(mn=An.ownerDocument)?mn.defaultView||mn.parentWindow:window,_n?(vi=ne.relatedTarget||ne.toElement,_n=ln,vi=vi?Vs(vi):null,vi!==null&&(dr=R(vi),di=vi.tag,vi!==dr||di!==5&&di!==27&&di!==6)&&(vi=null)):(_n=null,vi=ln),_n!==vi)){if(di=Ws,Rn="onMouseLeave",Ft="onMouseEnter",wt="mouse",(q==="pointerout"||q==="pointerover")&&(di=Il,Rn="onPointerLeave",Ft="onPointerEnter",wt="pointer"),dr=_n==null?mn:js(_n),rn=vi==null?mn:js(vi),mn=new di(Rn,wt+"leave",_n,ne,An),mn.target=dr,mn.relatedTarget=rn,Rn=null,Vs(An)===ln&&(di=new di(Ft,wt+"enter",vi,ne,An),di.target=rn,di.relatedTarget=dr,Rn=di),dr=Rn,_n&&vi)t:{for(di=_n,Ft=vi,wt=0,rn=di;rn;rn=Sh(rn))wt++;for(rn=0,Rn=Ft;Rn;Rn=Sh(Rn))rn++;for(;0<wt-rn;)di=Sh(di),wt--;for(;0<rn-wt;)Ft=Sh(Ft),rn--;for(;wt--;){if(di===Ft||Ft!==null&&di===Ft.alternate)break t;di=Sh(di),Ft=Sh(Ft)}di=null}else di=null;_n!==null&&Pp(wn,mn,_n,di,!1),vi!==null&&dr!==null&&Pp(wn,dr,vi,di,!0)}}e:{if(mn=ln?js(ln):window,_n=mn.nodeName&&mn.nodeName.toLowerCase(),_n==="select"||_n==="input"&&mn.type==="file")var ni=Iu;else if(jr(mn))if(Du)ni=$o;else{ni=Rf;var Ui=Ud}else _n=mn.nodeName,!_n||_n.toLowerCase()!=="input"||mn.type!=="checkbox"&&mn.type!=="radio"?ln&&Ql(ln.elementType)&&(ni=Iu):ni=Jc;if(ni&&(ni=ni(q,ln))){Nr(wn,ni,ne,An);break e}Ui&&Ui(q,mn,ln),q==="focusout"&&ln&&mn.type==="number"&&ln.memoizedProps.value!=null&&Pr(mn,"number",mn.value)}switch(Ui=ln?js(ln):window,q){case"focusin":(jr(Ui)||Ui.contentEditable==="true")&&(vo=Ui,Lu=ln,tu=null);break;case"focusout":tu=Lu=vo=null;break;case"mousedown":Ou=!0;break;case"contextmenu":case"mouseup":case"dragend":Ou=!1,wh(wn,ne,An);break;case"selectionchange":if(Ph)break;case"keydown":case"keyup":wh(wn,ne,An)}var li;if(ma)e:{switch(q){case"compositionstart":var mi="onCompositionStart";break e;case"compositionend":mi="onCompositionEnd";break e;case"compositionupdate":mi="onCompositionUpdate";break e}mi=void 0}else Ni?Sn(q,ne)&&(mi="onCompositionEnd"):q==="keydown"&&ne.keyCode===229&&(mi="onCompositionStart");mi&&(Fe&&ne.locale!=="ko"&&(Ni||mi!=="onCompositionStart"?mi==="onCompositionEnd"&&Ni&&(li=ec()):(Ia=An,Go="value"in Ia?Ia.value:Ia.textContent,Ni=!0)),Ui=bd(ln,mi),0<Ui.length&&(mi=new Pl(mi,q,null,ne,An),wn.push({event:mi,listeners:Ui}),li?mi.data=li:(li=Wn(ne),li!==null&&(mi.data=li)))),(li=we?Ar(q,ne):Fi(q,ne))&&(mi=bd(ln,"onBeforeInput"),0<mi.length&&(Ui=new Pl("onBeforeInput","beforeinput",null,ne,An),wn.push({event:Ui,listeners:mi}),Ui.data=li)),cm(wn,q,ln,ne,An)}Rp(wn,Z)})}function gf(q,Z,ne){return{instance:q,listener:Z,currentTarget:ne}}function bd(q,Z){for(var ne=Z+"Capture",ae=[];q!==null;){var pe=q,xe=pe.stateNode;if(pe=pe.tag,pe!==5&&pe!==26&&pe!==27||xe===null||(pe=zo(q,ne),pe!=null&&ae.unshift(gf(q,pe,xe)),pe=zo(q,Z),pe!=null&&ae.push(gf(q,pe,xe))),q.tag===3)return ae;q=q.return}return[]}function Sh(q){if(q===null)return null;do q=q.return;while(q&&q.tag!==5&&q.tag!==27);return q||null}function Pp(q,Z,ne,ae,pe){for(var xe=Z._reactName,Be=[];ne!==null&&ne!==ae;){var ke=ne,Je=ke.alternate,ln=ke.stateNode;if(ke=ke.tag,Je!==null&&Je===ae)break;ke!==5&&ke!==26&&ke!==27||ln===null||(Je=ln,pe?(ln=zo(ne,xe),ln!=null&&Be.unshift(gf(ne,ln,Je))):pe||(ln=zo(ne,xe),ln!=null&&Be.push(gf(ne,ln,Je)))),ne=ne.return}Be.length!==0&&q.push({event:Z,listeners:Be})}var dm=/\r\n?/g,pm=/\u0000|\uFFFD/g;function wp(q){return(typeof q=="string"?q:""+q).replace(dm,`
`).replace(pm,"")}function Ip(q,Z){return Z=wp(Z),wp(q)===Z}function Ad(){}function hr(q,Z,ne,ae,pe,xe){switch(ne){case"children":typeof ae=="string"?Z==="body"||Z==="textarea"&&ae===""||Lr(q,ae):(typeof ae=="number"||typeof ae=="bigint")&&Z!=="body"&&Lr(q,""+ae);break;case"className":jn(q,"class",ae);break;case"tabIndex":jn(q,"tabindex",ae);break;case"dir":case"role":case"viewBox":case"width":case"height":jn(q,ne,ae);break;case"style":Uo(q,ae,xe);break;case"data":if(Z!=="object"){jn(q,"data",ae);break}case"src":case"href":if(ae===""&&(Z!=="a"||ne!=="href")){q.removeAttribute(ne);break}if(ae==null||typeof ae=="function"||typeof ae=="symbol"||typeof ae=="boolean"){q.removeAttribute(ne);break}ae=bl(""+ae),q.setAttribute(ne,ae);break;case"action":case"formAction":if(typeof ae=="function"){q.setAttribute(ne,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof xe=="function"&&(ne==="formAction"?(Z!=="input"&&hr(q,Z,"name",pe.name,pe,null),hr(q,Z,"formEncType",pe.formEncType,pe,null),hr(q,Z,"formMethod",pe.formMethod,pe,null),hr(q,Z,"formTarget",pe.formTarget,pe,null)):(hr(q,Z,"encType",pe.encType,pe,null),hr(q,Z,"method",pe.method,pe,null),hr(q,Z,"target",pe.target,pe,null)));if(ae==null||typeof ae=="symbol"||typeof ae=="boolean"){q.removeAttribute(ne);break}ae=bl(""+ae),q.setAttribute(ne,ae);break;case"onClick":ae!=null&&(q.onclick=Ad);break;case"onScroll":ae!=null&&ki("scroll",q);break;case"onScrollEnd":ae!=null&&ki("scrollend",q);break;case"dangerouslySetInnerHTML":if(ae!=null){if(typeof ae!="object"||!("__html"in ae))throw Error(o(61));if(ne=ae.__html,ne!=null){if(pe.children!=null)throw Error(o(60));q.innerHTML=ne}}break;case"multiple":q.multiple=ae&&typeof ae!="function"&&typeof ae!="symbol";break;case"muted":q.muted=ae&&typeof ae!="function"&&typeof ae!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(ae==null||typeof ae=="function"||typeof ae=="boolean"||typeof ae=="symbol"){q.removeAttribute("xlink:href");break}ne=bl(""+ae),q.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",ne);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":ae!=null&&typeof ae!="function"&&typeof ae!="symbol"?q.setAttribute(ne,""+ae):q.removeAttribute(ne);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":ae&&typeof ae!="function"&&typeof ae!="symbol"?q.setAttribute(ne,""):q.removeAttribute(ne);break;case"capture":case"download":ae===!0?q.setAttribute(ne,""):ae!==!1&&ae!=null&&typeof ae!="function"&&typeof ae!="symbol"?q.setAttribute(ne,ae):q.removeAttribute(ne);break;case"cols":case"rows":case"size":case"span":ae!=null&&typeof ae!="function"&&typeof ae!="symbol"&&!isNaN(ae)&&1<=ae?q.setAttribute(ne,ae):q.removeAttribute(ne);break;case"rowSpan":case"start":ae==null||typeof ae=="function"||typeof ae=="symbol"||isNaN(ae)?q.removeAttribute(ne):q.setAttribute(ne,ae);break;case"popover":ki("beforetoggle",q),ki("toggle",q),Dn(q,"popover",ae);break;case"xlinkActuate":qn(q,"http://www.w3.org/1999/xlink","xlink:actuate",ae);break;case"xlinkArcrole":qn(q,"http://www.w3.org/1999/xlink","xlink:arcrole",ae);break;case"xlinkRole":qn(q,"http://www.w3.org/1999/xlink","xlink:role",ae);break;case"xlinkShow":qn(q,"http://www.w3.org/1999/xlink","xlink:show",ae);break;case"xlinkTitle":qn(q,"http://www.w3.org/1999/xlink","xlink:title",ae);break;case"xlinkType":qn(q,"http://www.w3.org/1999/xlink","xlink:type",ae);break;case"xmlBase":qn(q,"http://www.w3.org/XML/1998/namespace","xml:base",ae);break;case"xmlLang":qn(q,"http://www.w3.org/XML/1998/namespace","xml:lang",ae);break;case"xmlSpace":qn(q,"http://www.w3.org/XML/1998/namespace","xml:space",ae);break;case"is":Dn(q,"is",ae);break;case"innerText":case"textContent":break;default:(!(2<ne.length)||ne[0]!=="o"&&ne[0]!=="O"||ne[1]!=="n"&&ne[1]!=="N")&&(ne=Hc.get(ne)||ne,Dn(q,ne,ae))}}function np(q,Z,ne,ae,pe,xe){switch(ne){case"style":Uo(q,ae,xe);break;case"dangerouslySetInnerHTML":if(ae!=null){if(typeof ae!="object"||!("__html"in ae))throw Error(o(61));if(ne=ae.__html,ne!=null){if(pe.children!=null)throw Error(o(60));q.innerHTML=ne}}break;case"children":typeof ae=="string"?Lr(q,ae):(typeof ae=="number"||typeof ae=="bigint")&&Lr(q,""+ae);break;case"onScroll":ae!=null&&ki("scroll",q);break;case"onScrollEnd":ae!=null&&ki("scrollend",q);break;case"onClick":ae!=null&&(q.onclick=Ad);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Wa.hasOwnProperty(ne))e:{if(ne[0]==="o"&&ne[1]==="n"&&(pe=ne.endsWith("Capture"),Z=ne.slice(2,pe?ne.length-7:void 0),xe=q[pr]||null,xe=xe!=null?xe[ne]:null,typeof xe=="function"&&q.removeEventListener(Z,xe,pe),typeof ae=="function")){typeof xe!="function"&&xe!==null&&(ne in q?q[ne]=null:q.hasAttribute(ne)&&q.removeAttribute(ne)),q.addEventListener(Z,ae,pe);break e}ne in q?q[ne]=ae:ae===!0?q.setAttribute(ne,""):Dn(q,ne,ae)}}}function Ds(q,Z,ne){switch(Z){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ki("error",q),ki("load",q);var ae=!1,pe=!1,xe;for(xe in ne)if(ne.hasOwnProperty(xe)){var Be=ne[xe];if(Be!=null)switch(xe){case"src":ae=!0;break;case"srcSet":pe=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,Z));default:hr(q,Z,xe,Be,ne,null)}}pe&&hr(q,Z,"srcSet",ne.srcSet,ne,null),ae&&hr(q,Z,"src",ne.src,ne,null);return;case"input":ki("invalid",q);var ke=xe=Be=pe=null,Je=null,ln=null;for(ae in ne)if(ne.hasOwnProperty(ae)){var An=ne[ae];if(An!=null)switch(ae){case"name":pe=An;break;case"type":Be=An;break;case"checked":Je=An;break;case"defaultChecked":ln=An;break;case"value":xe=An;break;case"defaultValue":ke=An;break;case"children":case"dangerouslySetInnerHTML":if(An!=null)throw Error(o(137,Z));break;default:hr(q,Z,ae,An,ne,null)}}qi(q,xe,ke,Je,ln,Be,pe,!1),mr(q);return;case"select":ki("invalid",q),ae=Be=xe=null;for(pe in ne)if(ne.hasOwnProperty(pe)&&(ke=ne[pe],ke!=null))switch(pe){case"value":xe=ke;break;case"defaultValue":Be=ke;break;case"multiple":ae=ke;default:hr(q,Z,pe,ke,ne,null)}Z=xe,ne=Be,q.multiple=!!ae,Z!=null?xr(q,!!ae,Z,!1):ne!=null&&xr(q,!!ae,ne,!0);return;case"textarea":ki("invalid",q),xe=pe=ae=null;for(Be in ne)if(ne.hasOwnProperty(Be)&&(ke=ne[Be],ke!=null))switch(Be){case"value":ae=ke;break;case"defaultValue":pe=ke;break;case"children":xe=ke;break;case"dangerouslySetInnerHTML":if(ke!=null)throw Error(o(91));break;default:hr(q,Z,Be,ke,ne,null)}Tr(q,ae,pe,xe),mr(q);return;case"option":for(Je in ne)if(ne.hasOwnProperty(Je)&&(ae=ne[Je],ae!=null))switch(Je){case"selected":q.selected=ae&&typeof ae!="function"&&typeof ae!="symbol";break;default:hr(q,Z,Je,ae,ne,null)}return;case"dialog":ki("beforetoggle",q),ki("toggle",q),ki("cancel",q),ki("close",q);break;case"iframe":case"object":ki("load",q);break;case"video":case"audio":for(ae=0;ae<mf.length;ae++)ki(mf[ae],q);break;case"image":ki("error",q),ki("load",q);break;case"details":ki("toggle",q);break;case"embed":case"source":case"link":ki("error",q),ki("load",q);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ln in ne)if(ne.hasOwnProperty(ln)&&(ae=ne[ln],ae!=null))switch(ln){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,Z));default:hr(q,Z,ln,ae,ne,null)}return;default:if(Ql(Z)){for(An in ne)ne.hasOwnProperty(An)&&(ae=ne[An],ae!==void 0&&np(q,Z,An,ae,ne,void 0));return}}for(ke in ne)ne.hasOwnProperty(ke)&&(ae=ne[ke],ae!=null&&hr(q,Z,ke,ae,ne,null))}function mm(q,Z,ne,ae){switch(Z){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var pe=null,xe=null,Be=null,ke=null,Je=null,ln=null,An=null;for(_n in ne){var wn=ne[_n];if(ne.hasOwnProperty(_n)&&wn!=null)switch(_n){case"checked":break;case"value":break;case"defaultValue":Je=wn;default:ae.hasOwnProperty(_n)||hr(q,Z,_n,null,ae,wn)}}for(var mn in ae){var _n=ae[mn];if(wn=ne[mn],ae.hasOwnProperty(mn)&&(_n!=null||wn!=null))switch(mn){case"type":xe=_n;break;case"name":pe=_n;break;case"checked":ln=_n;break;case"defaultChecked":An=_n;break;case"value":Be=_n;break;case"defaultValue":ke=_n;break;case"children":case"dangerouslySetInnerHTML":if(_n!=null)throw Error(o(137,Z));break;default:_n!==wn&&hr(q,Z,mn,_n,ae,wn)}}Hr(q,Be,ke,Je,ln,An,xe,pe);return;case"select":_n=Be=ke=mn=null;for(xe in ne)if(Je=ne[xe],ne.hasOwnProperty(xe)&&Je!=null)switch(xe){case"value":break;case"multiple":_n=Je;default:ae.hasOwnProperty(xe)||hr(q,Z,xe,null,ae,Je)}for(pe in ae)if(xe=ae[pe],Je=ne[pe],ae.hasOwnProperty(pe)&&(xe!=null||Je!=null))switch(pe){case"value":mn=xe;break;case"defaultValue":ke=xe;break;case"multiple":Be=xe;default:xe!==Je&&hr(q,Z,pe,xe,ae,Je)}Z=ke,ne=Be,ae=_n,mn!=null?xr(q,!!ne,mn,!1):!!ae!=!!ne&&(Z!=null?xr(q,!!ne,Z,!0):xr(q,!!ne,ne?[]:"",!1));return;case"textarea":_n=mn=null;for(ke in ne)if(pe=ne[ke],ne.hasOwnProperty(ke)&&pe!=null&&!ae.hasOwnProperty(ke))switch(ke){case"value":break;case"children":break;default:hr(q,Z,ke,null,ae,pe)}for(Be in ae)if(pe=ae[Be],xe=ne[Be],ae.hasOwnProperty(Be)&&(pe!=null||xe!=null))switch(Be){case"value":mn=pe;break;case"defaultValue":_n=pe;break;case"children":break;case"dangerouslySetInnerHTML":if(pe!=null)throw Error(o(91));break;default:pe!==xe&&hr(q,Z,Be,pe,ae,xe)}Si(q,mn,_n);return;case"option":for(var vi in ne)if(mn=ne[vi],ne.hasOwnProperty(vi)&&mn!=null&&!ae.hasOwnProperty(vi))switch(vi){case"selected":q.selected=!1;break;default:hr(q,Z,vi,null,ae,mn)}for(Je in ae)if(mn=ae[Je],_n=ne[Je],ae.hasOwnProperty(Je)&&mn!==_n&&(mn!=null||_n!=null))switch(Je){case"selected":q.selected=mn&&typeof mn!="function"&&typeof mn!="symbol";break;default:hr(q,Z,Je,mn,ae,_n)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var di in ne)mn=ne[di],ne.hasOwnProperty(di)&&mn!=null&&!ae.hasOwnProperty(di)&&hr(q,Z,di,null,ae,mn);for(ln in ae)if(mn=ae[ln],_n=ne[ln],ae.hasOwnProperty(ln)&&mn!==_n&&(mn!=null||_n!=null))switch(ln){case"children":case"dangerouslySetInnerHTML":if(mn!=null)throw Error(o(137,Z));break;default:hr(q,Z,ln,mn,ae,_n)}return;default:if(Ql(Z)){for(var dr in ne)mn=ne[dr],ne.hasOwnProperty(dr)&&mn!==void 0&&!ae.hasOwnProperty(dr)&&np(q,Z,dr,void 0,ae,mn);for(An in ae)mn=ae[An],_n=ne[An],!ae.hasOwnProperty(An)||mn===_n||mn===void 0&&_n===void 0||np(q,Z,An,mn,ae,_n);return}}for(var Ft in ne)mn=ne[Ft],ne.hasOwnProperty(Ft)&&mn!=null&&!ae.hasOwnProperty(Ft)&&hr(q,Z,Ft,null,ae,mn);for(wn in ae)mn=ae[wn],_n=ne[wn],!ae.hasOwnProperty(wn)||mn===_n||mn==null&&_n==null||hr(q,Z,wn,mn,ae,_n)}var rp=null,sp=null;function Md(q){return q.nodeType===9?q:q.ownerDocument}function Dp(q){switch(q){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Vp(q,Z){if(q===0)switch(Z){case"svg":return 1;case"math":return 2;default:return 0}return q===1&&Z==="foreignObject"?0:q}function ap(q,Z){return q==="textarea"||q==="noscript"||typeof Z.children=="string"||typeof Z.children=="number"||typeof Z.children=="bigint"||typeof Z.dangerouslySetInnerHTML=="object"&&Z.dangerouslySetInnerHTML!==null&&Z.dangerouslySetInnerHTML.__html!=null}var lp=null;function gm(){var q=window.event;return q&&q.type==="popstate"?q===lp?!1:(lp=q,!0):(lp=null,!1)}var Lp=typeof setTimeout=="function"?setTimeout:void 0,ym=typeof clearTimeout=="function"?clearTimeout:void 0,Op=typeof Promise=="function"?Promise:void 0,_m=typeof queueMicrotask=="function"?queueMicrotask:typeof Op<"u"?function(q){return Op.resolve(null).then(q).catch(vm)}:Lp;function vm(q){setTimeout(function(){throw q})}function Fc(q){return q==="head"}function Np(q,Z){var ne=Z,ae=0,pe=0;do{var xe=ne.nextSibling;if(q.removeChild(ne),xe&&xe.nodeType===8)if(ne=xe.data,ne==="/$"){if(0<ae&&8>ae){ne=ae;var Be=q.ownerDocument;if(ne&1&&yf(Be.documentElement),ne&2&&yf(Be.body),ne&4)for(ne=Be.head,yf(ne),Be=ne.firstChild;Be;){var ke=Be.nextSibling,Je=Be.nodeName;Be[Hs]||Je==="SCRIPT"||Je==="STYLE"||Je==="LINK"&&Be.rel.toLowerCase()==="stylesheet"||ne.removeChild(Be),Be=ke}}if(pe===0){q.removeChild(xe),Af(Z);return}pe--}else ne==="$"||ne==="$?"||ne==="$!"?pe++:ae=ne.charCodeAt(0)-48;else ae=0;ne=xe}while(ne);Af(Z)}function cp(q){var Z=q.firstChild;for(Z&&Z.nodeType===10&&(Z=Z.nextSibling);Z;){var ne=Z;switch(Z=Z.nextSibling,ne.nodeName){case"HTML":case"HEAD":case"BODY":cp(ne),ji(ne);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(ne.rel.toLowerCase()==="stylesheet")continue}q.removeChild(ne)}}function Em(q,Z,ne,ae){for(;q.nodeType===1;){var pe=ne;if(q.nodeName.toLowerCase()!==Z.toLowerCase()){if(!ae&&(q.nodeName!=="INPUT"||q.type!=="hidden"))break}else if(ae){if(!q[Hs])switch(Z){case"meta":if(!q.hasAttribute("itemprop"))break;return q;case"link":if(xe=q.getAttribute("rel"),xe==="stylesheet"&&q.hasAttribute("data-precedence"))break;if(xe!==pe.rel||q.getAttribute("href")!==(pe.href==null||pe.href===""?null:pe.href)||q.getAttribute("crossorigin")!==(pe.crossOrigin==null?null:pe.crossOrigin)||q.getAttribute("title")!==(pe.title==null?null:pe.title))break;return q;case"style":if(q.hasAttribute("data-precedence"))break;return q;case"script":if(xe=q.getAttribute("src"),(xe!==(pe.src==null?null:pe.src)||q.getAttribute("type")!==(pe.type==null?null:pe.type)||q.getAttribute("crossorigin")!==(pe.crossOrigin==null?null:pe.crossOrigin))&&xe&&q.hasAttribute("async")&&!q.hasAttribute("itemprop"))break;return q;default:return q}}else if(Z==="input"&&q.type==="hidden"){var xe=pe.name==null?null:""+pe.name;if(pe.type==="hidden"&&q.getAttribute("name")===xe)return q}else return q;if(q=Bo(q.nextSibling),q===null)break}return null}function Sm(q,Z,ne){if(Z==="")return null;for(;q.nodeType!==3;)if((q.nodeType!==1||q.nodeName!=="INPUT"||q.type!=="hidden")&&!ne||(q=Bo(q.nextSibling),q===null))return null;return q}function up(q){return q.data==="$!"||q.data==="$?"&&q.ownerDocument.readyState==="complete"}function xm(q,Z){var ne=q.ownerDocument;if(q.data!=="$?"||ne.readyState==="complete")Z();else{var ae=function(){Z(),ne.removeEventListener("DOMContentLoaded",ae)};ne.addEventListener("DOMContentLoaded",ae),q._reactRetry=ae}}function Bo(q){for(;q!=null;q=q.nextSibling){var Z=q.nodeType;if(Z===1||Z===3)break;if(Z===8){if(Z=q.data,Z==="$"||Z==="$!"||Z==="$?"||Z==="F!"||Z==="F")break;if(Z==="/$")return null}}return q}var hp=null;function Fp(q){q=q.previousSibling;for(var Z=0;q;){if(q.nodeType===8){var ne=q.data;if(ne==="$"||ne==="$!"||ne==="$?"){if(Z===0)return q;Z--}else ne==="/$"&&Z++}q=q.previousSibling}return null}function Bp(q,Z,ne){switch(Z=Md(ne),q){case"html":if(q=Z.documentElement,!q)throw Error(o(452));return q;case"head":if(q=Z.head,!q)throw Error(o(453));return q;case"body":if(q=Z.body,!q)throw Error(o(454));return q;default:throw Error(o(451))}}function yf(q){for(var Z=q.attributes;Z.length;)q.removeAttributeNode(Z[0]);ji(q)}var fo=new Map,Up=new Set;function Rd(q){return typeof q.getRootNode=="function"?q.getRootNode():q.nodeType===9?q:q.ownerDocument}var Zl=Ce.d;Ce.d={f:Tm,r:bm,D:Am,C:Mm,L:Rm,m:Cm,X:wm,S:Pm,M:Im};function Tm(){var q=Zl.f(),Z=uo();return q||Z}function bm(q){var Z=Ts(q);Z!==null&&Z.tag===5&&Z.type==="form"?ad(Z):Zl.r(q)}var xh=typeof document>"u"?null:document;function zp(q,Z,ne){var ae=xh;if(ae&&typeof Z=="string"&&Z){var pe=zi(Z);pe='link[rel="'+q+'"][href="'+pe+'"]',typeof ne=="string"&&(pe+='[crossorigin="'+ne+'"]'),Up.has(pe)||(Up.add(pe),q={rel:q,crossOrigin:ne,href:Z},ae.querySelector(pe)===null&&(Z=ae.createElement("link"),Ds(Z,"link",q),Sr(Z),ae.head.appendChild(Z)))}}function Am(q){Zl.D(q),zp("dns-prefetch",q,null)}function Mm(q,Z){Zl.C(q,Z),zp("preconnect",q,Z)}function Rm(q,Z,ne){Zl.L(q,Z,ne);var ae=xh;if(ae&&q&&Z){var pe='link[rel="preload"][as="'+zi(Z)+'"]';Z==="image"&&ne&&ne.imageSrcSet?(pe+='[imagesrcset="'+zi(ne.imageSrcSet)+'"]',typeof ne.imageSizes=="string"&&(pe+='[imagesizes="'+zi(ne.imageSizes)+'"]')):pe+='[href="'+zi(q)+'"]';var xe=pe;switch(Z){case"style":xe=Th(q);break;case"script":xe=bh(q)}fo.has(xe)||(q=ee({rel:"preload",href:Z==="image"&&ne&&ne.imageSrcSet?void 0:q,as:Z},ne),fo.set(xe,q),ae.querySelector(pe)!==null||Z==="style"&&ae.querySelector(_f(xe))||Z==="script"&&ae.querySelector(vf(xe))||(Z=ae.createElement("link"),Ds(Z,"link",q),Sr(Z),ae.head.appendChild(Z)))}}function Cm(q,Z){Zl.m(q,Z);var ne=xh;if(ne&&q){var ae=Z&&typeof Z.as=="string"?Z.as:"script",pe='link[rel="modulepreload"][as="'+zi(ae)+'"][href="'+zi(q)+'"]',xe=pe;switch(ae){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":xe=bh(q)}if(!fo.has(xe)&&(q=ee({rel:"modulepreload",href:q},Z),fo.set(xe,q),ne.querySelector(pe)===null)){switch(ae){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(ne.querySelector(vf(xe)))return}ae=ne.createElement("link"),Ds(ae,"link",q),Sr(ae),ne.head.appendChild(ae)}}}function Pm(q,Z,ne){Zl.S(q,Z,ne);var ae=xh;if(ae&&q){var pe=es(ae).hoistableStyles,xe=Th(q);Z=Z||"default";var Be=pe.get(xe);if(!Be){var ke={loading:0,preload:null};if(Be=ae.querySelector(_f(xe)))ke.loading=5;else{q=ee({rel:"stylesheet",href:q,"data-precedence":Z},ne),(ne=fo.get(xe))&&fp(q,ne);var Je=Be=ae.createElement("link");Sr(Je),Ds(Je,"link",q),Je._p=new Promise(function(ln,An){Je.onload=ln,Je.onerror=An}),Je.addEventListener("load",function(){ke.loading|=1}),Je.addEventListener("error",function(){ke.loading|=2}),ke.loading|=4,Cd(Be,Z,ae)}Be={type:"stylesheet",instance:Be,count:1,state:ke},pe.set(xe,Be)}}}function wm(q,Z){Zl.X(q,Z);var ne=xh;if(ne&&q){var ae=es(ne).hoistableScripts,pe=bh(q),xe=ae.get(pe);xe||(xe=ne.querySelector(vf(pe)),xe||(q=ee({src:q,async:!0},Z),(Z=fo.get(pe))&&dp(q,Z),xe=ne.createElement("script"),Sr(xe),Ds(xe,"link",q),ne.head.appendChild(xe)),xe={type:"script",instance:xe,count:1,state:null},ae.set(pe,xe))}}function Im(q,Z){Zl.M(q,Z);var ne=xh;if(ne&&q){var ae=es(ne).hoistableScripts,pe=bh(q),xe=ae.get(pe);xe||(xe=ne.querySelector(vf(pe)),xe||(q=ee({src:q,async:!0,type:"module"},Z),(Z=fo.get(pe))&&dp(q,Z),xe=ne.createElement("script"),Sr(xe),Ds(xe,"link",q),ne.head.appendChild(xe)),xe={type:"script",instance:xe,count:1,state:null},ae.set(pe,xe))}}function kp(q,Z,ne,ae){var pe=(pe=ct.current)?Rd(pe):null;if(!pe)throw Error(o(446));switch(q){case"meta":case"title":return null;case"style":return typeof ne.precedence=="string"&&typeof ne.href=="string"?(Z=Th(ne.href),ne=es(pe).hoistableStyles,ae=ne.get(Z),ae||(ae={type:"style",instance:null,count:0,state:null},ne.set(Z,ae)),ae):{type:"void",instance:null,count:0,state:null};case"link":if(ne.rel==="stylesheet"&&typeof ne.href=="string"&&typeof ne.precedence=="string"){q=Th(ne.href);var xe=es(pe).hoistableStyles,Be=xe.get(q);if(Be||(pe=pe.ownerDocument||pe,Be={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},xe.set(q,Be),(xe=pe.querySelector(_f(q)))&&!xe._p&&(Be.instance=xe,Be.state.loading=5),fo.has(q)||(ne={rel:"preload",as:"style",href:ne.href,crossOrigin:ne.crossOrigin,integrity:ne.integrity,media:ne.media,hrefLang:ne.hrefLang,referrerPolicy:ne.referrerPolicy},fo.set(q,ne),xe||Dm(pe,q,ne,Be.state))),Z&&ae===null)throw Error(o(528,""));return Be}if(Z&&ae!==null)throw Error(o(529,""));return null;case"script":return Z=ne.async,ne=ne.src,typeof ne=="string"&&Z&&typeof Z!="function"&&typeof Z!="symbol"?(Z=bh(ne),ne=es(pe).hoistableScripts,ae=ne.get(Z),ae||(ae={type:"script",instance:null,count:0,state:null},ne.set(Z,ae)),ae):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,q))}}function Th(q){return'href="'+zi(q)+'"'}function _f(q){return'link[rel="stylesheet"]['+q+"]"}function Gp(q){return ee({},q,{"data-precedence":q.precedence,precedence:null})}function Dm(q,Z,ne,ae){q.querySelector('link[rel="preload"][as="style"]['+Z+"]")?ae.loading=1:(Z=q.createElement("link"),ae.preload=Z,Z.addEventListener("load",function(){return ae.loading|=1}),Z.addEventListener("error",function(){return ae.loading|=2}),Ds(Z,"link",ne),Sr(Z),q.head.appendChild(Z))}function bh(q){return'[src="'+zi(q)+'"]'}function vf(q){return"script[async]"+q}function Hp(q,Z,ne){if(Z.count++,Z.instance===null)switch(Z.type){case"style":var ae=q.querySelector('style[data-href~="'+zi(ne.href)+'"]');if(ae)return Z.instance=ae,Sr(ae),ae;var pe=ee({},ne,{"data-href":ne.href,"data-precedence":ne.precedence,href:null,precedence:null});return ae=(q.ownerDocument||q).createElement("style"),Sr(ae),Ds(ae,"style",pe),Cd(ae,ne.precedence,q),Z.instance=ae;case"stylesheet":pe=Th(ne.href);var xe=q.querySelector(_f(pe));if(xe)return Z.state.loading|=4,Z.instance=xe,Sr(xe),xe;ae=Gp(ne),(pe=fo.get(pe))&&fp(ae,pe),xe=(q.ownerDocument||q).createElement("link"),Sr(xe);var Be=xe;return Be._p=new Promise(function(ke,Je){Be.onload=ke,Be.onerror=Je}),Ds(xe,"link",ae),Z.state.loading|=4,Cd(xe,ne.precedence,q),Z.instance=xe;case"script":return xe=bh(ne.src),(pe=q.querySelector(vf(xe)))?(Z.instance=pe,Sr(pe),pe):(ae=ne,(pe=fo.get(xe))&&(ae=ee({},ne),dp(ae,pe)),q=q.ownerDocument||q,pe=q.createElement("script"),Sr(pe),Ds(pe,"link",ae),q.head.appendChild(pe),Z.instance=pe);case"void":return null;default:throw Error(o(443,Z.type))}else Z.type==="stylesheet"&&(Z.state.loading&4)===0&&(ae=Z.instance,Z.state.loading|=4,Cd(ae,ne.precedence,q));return Z.instance}function Cd(q,Z,ne){for(var ae=ne.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),pe=ae.length?ae[ae.length-1]:null,xe=pe,Be=0;Be<ae.length;Be++){var ke=ae[Be];if(ke.dataset.precedence===Z)xe=ke;else if(xe!==pe)break}xe?xe.parentNode.insertBefore(q,xe.nextSibling):(Z=ne.nodeType===9?ne.head:ne,Z.insertBefore(q,Z.firstChild))}function fp(q,Z){q.crossOrigin==null&&(q.crossOrigin=Z.crossOrigin),q.referrerPolicy==null&&(q.referrerPolicy=Z.referrerPolicy),q.title==null&&(q.title=Z.title)}function dp(q,Z){q.crossOrigin==null&&(q.crossOrigin=Z.crossOrigin),q.referrerPolicy==null&&(q.referrerPolicy=Z.referrerPolicy),q.integrity==null&&(q.integrity=Z.integrity)}var Pd=null;function jp(q,Z,ne){if(Pd===null){var ae=new Map,pe=Pd=new Map;pe.set(ne,ae)}else pe=Pd,ae=pe.get(ne),ae||(ae=new Map,pe.set(ne,ae));if(ae.has(q))return ae;for(ae.set(q,null),ne=ne.getElementsByTagName(q),pe=0;pe<ne.length;pe++){var xe=ne[pe];if(!(xe[Hs]||xe[Er]||q==="link"&&xe.getAttribute("rel")==="stylesheet")&&xe.namespaceURI!=="http://www.w3.org/2000/svg"){var Be=xe.getAttribute(Z)||"";Be=q+Be;var ke=ae.get(Be);ke?ke.push(xe):ae.set(Be,[xe])}}return ae}function qp(q,Z,ne){q=q.ownerDocument||q,q.head.insertBefore(ne,Z==="title"?q.querySelector("head > title"):null)}function Vm(q,Z,ne){if(ne===1||Z.itemProp!=null)return!1;switch(q){case"meta":case"title":return!0;case"style":if(typeof Z.precedence!="string"||typeof Z.href!="string"||Z.href==="")break;return!0;case"link":if(typeof Z.rel!="string"||typeof Z.href!="string"||Z.href===""||Z.onLoad||Z.onError)break;switch(Z.rel){case"stylesheet":return q=Z.disabled,typeof Z.precedence=="string"&&q==null;default:return!0}case"script":if(Z.async&&typeof Z.async!="function"&&typeof Z.async!="symbol"&&!Z.onLoad&&!Z.onError&&Z.src&&typeof Z.src=="string")return!0}return!1}function Wp(q){return!(q.type==="stylesheet"&&(q.state.loading&3)===0)}var Ef=null;function Lm(){}function Om(q,Z,ne){if(Ef===null)throw Error(o(475));var ae=Ef;if(Z.type==="stylesheet"&&(typeof ne.media!="string"||matchMedia(ne.media).matches!==!1)&&(Z.state.loading&4)===0){if(Z.instance===null){var pe=Th(ne.href),xe=q.querySelector(_f(pe));if(xe){q=xe._p,q!==null&&typeof q=="object"&&typeof q.then=="function"&&(ae.count++,ae=wd.bind(ae),q.then(ae,ae)),Z.state.loading|=4,Z.instance=xe,Sr(xe);return}xe=q.ownerDocument||q,ne=Gp(ne),(pe=fo.get(pe))&&fp(ne,pe),xe=xe.createElement("link"),Sr(xe);var Be=xe;Be._p=new Promise(function(ke,Je){Be.onload=ke,Be.onerror=Je}),Ds(xe,"link",ne),Z.instance=xe}ae.stylesheets===null&&(ae.stylesheets=new Map),ae.stylesheets.set(Z,q),(q=Z.state.preload)&&(Z.state.loading&3)===0&&(ae.count++,Z=wd.bind(ae),q.addEventListener("load",Z),q.addEventListener("error",Z))}}function Nm(){if(Ef===null)throw Error(o(475));var q=Ef;return q.stylesheets&&q.count===0&&pp(q,q.stylesheets),0<q.count?function(Z){var ne=setTimeout(function(){if(q.stylesheets&&pp(q,q.stylesheets),q.unsuspend){var ae=q.unsuspend;q.unsuspend=null,ae()}},6e4);return q.unsuspend=Z,function(){q.unsuspend=null,clearTimeout(ne)}}:null}function wd(){if(this.count--,this.count===0){if(this.stylesheets)pp(this,this.stylesheets);else if(this.unsuspend){var q=this.unsuspend;this.unsuspend=null,q()}}}var Id=null;function pp(q,Z){q.stylesheets=null,q.unsuspend!==null&&(q.count++,Id=new Map,Z.forEach(Fm,q),Id=null,wd.call(q))}function Fm(q,Z){if(!(Z.state.loading&4)){var ne=Id.get(q);if(ne)var ae=ne.get(null);else{ne=new Map,Id.set(q,ne);for(var pe=q.querySelectorAll("link[data-precedence],style[data-precedence]"),xe=0;xe<pe.length;xe++){var Be=pe[xe];(Be.nodeName==="LINK"||Be.getAttribute("media")!=="not all")&&(ne.set(Be.dataset.precedence,Be),ae=Be)}ae&&ne.set(null,ae)}pe=Z.instance,Be=pe.getAttribute("data-precedence"),xe=ne.get(Be)||ae,xe===ae&&ne.set(null,pe),ne.set(Be,pe),this.count++,ae=wd.bind(this),pe.addEventListener("load",ae),pe.addEventListener("error",ae),xe?xe.parentNode.insertBefore(pe,xe.nextSibling):(q=q.nodeType===9?q.head:q,q.insertBefore(pe,q.firstChild)),Z.state.loading|=4}}var Sf={$$typeof:ve,Provider:null,Consumer:null,_currentValue:De,_currentValue2:De,_threadCount:0};function Bm(q,Z,ne,ae,pe,xe,Be,ke){this.tag=1,this.containerInfo=q,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=gn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gn(0),this.hiddenUpdates=gn(null),this.identifierPrefix=ae,this.onUncaughtError=pe,this.onCaughtError=xe,this.onRecoverableError=Be,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ke,this.incompleteTransitions=new Map}function Xp(q,Z,ne,ae,pe,xe,Be,ke,Je,ln,An,wn){return q=new Bm(q,Z,ne,Be,ke,Je,ln,wn),Z=1,xe===!0&&(Z|=24),xe=Us(3,null,null,Z),q.current=xe,xe.stateNode=q,Z=ju(),Z.refCount++,q.pooledCache=Z,Z.refCount++,xe.memoizedState={element:ae,isDehydrated:ne,cache:Z},jh(xe),q}function $p(q){return q?(q=Zo,q):Zo}function Kp(q,Z,ne,ae,pe,xe){pe=$p(pe),ae.context===null?ae.context=pe:ae.pendingContext=pe,ae=Ja(Z),ae.payload={element:ne},xe=xe===void 0?null:xe,xe!==null&&(ae.callback=xe),ne=Co(q,ae,Z),ne!==null&&(Is(ne,q,Z),Vl(ne,q,Z))}function Yp(q,Z){if(q=q.memoizedState,q!==null&&q.dehydrated!==null){var ne=q.retryLane;q.retryLane=ne!==0&&ne<Z?ne:Z}}function mp(q,Z){Yp(q,Z),(q=q.alternate)&&Yp(q,Z)}function Zp(q){if(q.tag===13){var Z=To(q,67108864);Z!==null&&Is(Z,q,67108864),mp(q,67108864)}}var Dd=!0;function Um(q,Z,ne,ae){var pe=Ve.T;Ve.T=null;var xe=Ce.p;try{Ce.p=2,gp(q,Z,ne,ae)}finally{Ce.p=xe,Ve.T=pe}}function zm(q,Z,ne,ae){var pe=Ve.T;Ve.T=null;var xe=Ce.p;try{Ce.p=8,gp(q,Z,ne,ae)}finally{Ce.p=xe,Ve.T=pe}}function gp(q,Z,ne,ae){if(Dd){var pe=yp(ae);if(pe===null)tp(q,Z,ae,Vd,ne),Jp(q,ae);else if(Gm(pe,q,Z,ne,ae))ae.stopPropagation();else if(Jp(q,ae),Z&4&&-1<km.indexOf(q)){for(;pe!==null;){var xe=Ts(pe);if(xe!==null)switch(xe.tag){case 3:if(xe=xe.stateNode,xe.current.memoizedState.isDehydrated){var Be=Gn(xe.pendingLanes);if(Be!==0){var ke=xe;for(ke.pendingLanes|=2,ke.entangledLanes|=2;Be;){var Je=1<<31-Fn(Be);ke.entanglements[1]|=Je,Be&=~Je}Sl(xe),(Qi&6)===0&&(Es=kt()+500,pf(0))}}break;case 13:ke=To(xe,2),ke!==null&&Is(ke,xe,2),uo(),mp(xe,2)}if(xe=yp(ae),xe===null&&tp(q,Z,ae,Vd,ne),xe===pe)break;pe=xe}pe!==null&&ae.stopPropagation()}else tp(q,Z,ae,null,ne)}}function yp(q){return q=qs(q),_p(q)}var Vd=null;function _p(q){if(Vd=null,q=Vs(q),q!==null){var Z=R(q);if(Z===null)q=null;else{var ne=Z.tag;if(ne===13){if(q=G(Z),q!==null)return q;q=null}else if(ne===3){if(Z.stateNode.current.memoizedState.isDehydrated)return Z.tag===3?Z.stateNode.containerInfo:null;q=null}else Z!==q&&(q=null)}}return Vd=q,null}function Qp(q){switch(q){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(cn()){case Mn:return 2;case Qt:return 8;case He:case ze:return 32;case Mt:return 268435456;default:return 32}default:return 32}}var vp=!1,Bc=null,Uc=null,zc=null,xf=new Map,Tf=new Map,kc=[],km="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Jp(q,Z){switch(q){case"focusin":case"focusout":Bc=null;break;case"dragenter":case"dragleave":Uc=null;break;case"mouseover":case"mouseout":zc=null;break;case"pointerover":case"pointerout":xf.delete(Z.pointerId);break;case"gotpointercapture":case"lostpointercapture":Tf.delete(Z.pointerId)}}function bf(q,Z,ne,ae,pe,xe){return q===null||q.nativeEvent!==xe?(q={blockedOn:Z,domEventName:ne,eventSystemFlags:ae,nativeEvent:xe,targetContainers:[pe]},Z!==null&&(Z=Ts(Z),Z!==null&&Zp(Z)),q):(q.eventSystemFlags|=ae,Z=q.targetContainers,pe!==null&&Z.indexOf(pe)===-1&&Z.push(pe),q)}function Gm(q,Z,ne,ae,pe){switch(Z){case"focusin":return Bc=bf(Bc,q,Z,ne,ae,pe),!0;case"dragenter":return Uc=bf(Uc,q,Z,ne,ae,pe),!0;case"mouseover":return zc=bf(zc,q,Z,ne,ae,pe),!0;case"pointerover":var xe=pe.pointerId;return xf.set(xe,bf(xf.get(xe)||null,q,Z,ne,ae,pe)),!0;case"gotpointercapture":return xe=pe.pointerId,Tf.set(xe,bf(Tf.get(xe)||null,q,Z,ne,ae,pe)),!0}return!1}function em(q){var Z=Vs(q.target);if(Z!==null){var ne=R(Z);if(ne!==null){if(Z=ne.tag,Z===13){if(Z=G(ne),Z!==null){q.blockedOn=Z,vr(q.priority,function(){if(ne.tag===13){var ae=Vr();ae=Ei(ae);var pe=To(ne,ae);pe!==null&&Is(pe,ne,ae),mp(ne,ae)}});return}}else if(Z===3&&ne.stateNode.current.memoizedState.isDehydrated){q.blockedOn=ne.tag===3?ne.stateNode.containerInfo:null;return}}}q.blockedOn=null}function Ld(q){if(q.blockedOn!==null)return!1;for(var Z=q.targetContainers;0<Z.length;){var ne=yp(q.nativeEvent);if(ne===null){ne=q.nativeEvent;var ae=new ne.constructor(ne.type,ne);Xa=ae,ne.target.dispatchEvent(ae),Xa=null}else return Z=Ts(ne),Z!==null&&Zp(Z),q.blockedOn=ne,!1;Z.shift()}return!0}function tm(q,Z,ne){Ld(q)&&ne.delete(Z)}function Hm(){vp=!1,Bc!==null&&Ld(Bc)&&(Bc=null),Uc!==null&&Ld(Uc)&&(Uc=null),zc!==null&&Ld(zc)&&(zc=null),xf.forEach(tm),Tf.forEach(tm)}function Od(q,Z){q.blockedOn===Z&&(q.blockedOn=null,vp||(vp=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Hm)))}var Nd=null;function im(q){Nd!==q&&(Nd=q,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Nd===q&&(Nd=null);for(var Z=0;Z<q.length;Z+=3){var ne=q[Z],ae=q[Z+1],pe=q[Z+2];if(typeof ae!="function"){if(_p(ae||ne)===null)continue;break}var xe=Ts(ne);xe!==null&&(q.splice(Z,3),Z-=3,of(xe,{pending:!0,data:pe,method:ne.method,action:ae},ae,pe))}}))}function Af(q){function Z(Je){return Od(Je,q)}Bc!==null&&Od(Bc,q),Uc!==null&&Od(Uc,q),zc!==null&&Od(zc,q),xf.forEach(Z),Tf.forEach(Z);for(var ne=0;ne<kc.length;ne++){var ae=kc[ne];ae.blockedOn===q&&(ae.blockedOn=null)}for(;0<kc.length&&(ne=kc[0],ne.blockedOn===null);)em(ne),ne.blockedOn===null&&kc.shift();if(ne=(q.ownerDocument||q).$$reactFormReplay,ne!=null)for(ae=0;ae<ne.length;ae+=3){var pe=ne[ae],xe=ne[ae+1],Be=pe[pr]||null;if(typeof xe=="function")Be||im(ne);else if(Be){var ke=null;if(xe&&xe.hasAttribute("formAction")){if(pe=xe,Be=xe[pr]||null)ke=Be.formAction;else if(_p(pe)!==null)continue}else ke=Be.action;typeof ke=="function"?ne[ae+1]=ke:(ne.splice(ae,3),ae-=3),im(ne)}}}function Ep(q){this._internalRoot=q}Fd.prototype.render=Ep.prototype.render=function(q){var Z=this._internalRoot;if(Z===null)throw Error(o(409));var ne=Z.current,ae=Vr();Kp(ne,ae,q,Z,null,null)},Fd.prototype.unmount=Ep.prototype.unmount=function(){var q=this._internalRoot;if(q!==null){this._internalRoot=null;var Z=q.containerInfo;Kp(q.current,2,null,q,null,null),uo(),Z[Cr]=null}};function Fd(q){this._internalRoot=q}Fd.prototype.unstable_scheduleHydration=function(q){if(q){var Z=gi();q={blockedOn:null,target:q,priority:Z};for(var ne=0;ne<kc.length&&Z!==0&&Z<kc[ne].priority;ne++);kc.splice(ne,0,q),ne===0&&em(q)}};var rm=e.version;if(rm!=="19.1.0")throw Error(o(527,rm,"19.1.0"));Ce.findDOMNode=function(q){var Z=q._reactInternals;if(Z===void 0)throw typeof q.render=="function"?Error(o(188)):(q=Object.keys(q).join(","),Error(o(268,q)));return q=Y(Z),q=q!==null?Q(q):null,q=q===null?null:q.stateNode,q};var jm={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:Ve,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bd.isDisabled&&Bd.supportsFiber)try{an=Bd.inject(jm),Cn=Bd}catch{}}return reactDomClient_production.createRoot=function(q,Z){if(!y(q))throw Error(o(299));var ne=!1,ae="",pe=xu,xe=oh,Be=_d,ke=null;return Z!=null&&(Z.unstable_strictMode===!0&&(ne=!0),Z.identifierPrefix!==void 0&&(ae=Z.identifierPrefix),Z.onUncaughtError!==void 0&&(pe=Z.onUncaughtError),Z.onCaughtError!==void 0&&(xe=Z.onCaughtError),Z.onRecoverableError!==void 0&&(Be=Z.onRecoverableError),Z.unstable_transitionCallbacks!==void 0&&(ke=Z.unstable_transitionCallbacks)),Z=Xp(q,1,!1,null,null,ne,ae,pe,xe,Be,ke,null),q[Cr]=Z.current,ep(q),new Ep(Z)},reactDomClient_production.hydrateRoot=function(q,Z,ne){if(!y(q))throw Error(o(299));var ae=!1,pe="",xe=xu,Be=oh,ke=_d,Je=null,ln=null;return ne!=null&&(ne.unstable_strictMode===!0&&(ae=!0),ne.identifierPrefix!==void 0&&(pe=ne.identifierPrefix),ne.onUncaughtError!==void 0&&(xe=ne.onUncaughtError),ne.onCaughtError!==void 0&&(Be=ne.onCaughtError),ne.onRecoverableError!==void 0&&(ke=ne.onRecoverableError),ne.unstable_transitionCallbacks!==void 0&&(Je=ne.unstable_transitionCallbacks),ne.formState!==void 0&&(ln=ne.formState)),Z=Xp(q,1,!0,Z,ne??null,ae,pe,xe,Be,ke,Je,ln),Z.context=$p(null),ne=Z.current,ae=Vr(),ae=Ei(ae),pe=Ja(ae),pe.callback=null,Co(ne,pe,ae),ne=ae,Z.current.lanes=ne,Tn(Z,ne),Sl(Z),q[Cr]=Z.current,ep(q),new Fd(Z)},reactDomClient_production.version="19.1.0",reactDomClient_production}var hasRequiredClient;function requireClient(){if(hasRequiredClient)return client.exports;hasRequiredClient=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),client.exports=requireReactDomClient_production(),client.exports}var clientExports=requireClient();const v$2="5.5.2",fr=29.9700012207031,ip=0,op=150.000006109625,w$1=1080,h$3=1080,nm="MoneyIQArrow",ddd=0,assets=[],layers=[{ddd:0,ind:1,ty:4,nm:"MoneyIQArrow Outlines",sr:1,ks:{o:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:-9,s:[100]},{t:146.000005946702,s:[0]}],ix:11},r:{a:0,k:0,ix:10},p:{a:1,k:[{i:{x:.833,y:.833},o:{x:.167,y:.167},t:-2,s:[540,360,0],to:[0,1.481,0],ti:[0,-1.696,0]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:0,s:[540,64.768,0],to:[0,22.41,0],ti:[0,-184.543,0]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:44,s:[540,589.635,0],to:[0,12.069,0],ti:[0,-10.966,0]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:48,s:[540,606.93,0],to:[0,121.303,0],ti:[0,-9.368,0]},{t:145.000005905971,s:[540,720,0]}],ix:2},a:{a:0,k:[540,540,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[24.627,-12.313],[0,0],[10.427,5.214],[0,0],[0,-27.534],[0,0],[-12.548,-6.273],[0,0],[-10.426,5.214],[0,0],[0,14.03],[0,0]],o:[[0,0],[-10.426,5.214],[0,0],[-24.626,-12.313],[0,0],[0,14.029],[0,0],[10.427,5.214],[0,0],[12.548,-6.273],[0,0],[0,-27.534]],v:[[393.625,-183.888],[16.563,4.642],[-16.563,4.642],[-393.625,-183.888],[-447.227,-150.76],[-447.227,-47.235],[-426.753,-14.108],[-16.563,190.987],[16.563,190.987],[426.753,-14.108],[447.227,-47.236],[447.227,-150.76]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.3137,.7569,.3294,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[540.864,685.364],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:0,s:[0]},{t:7.00000028511585,s:[100]}],ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[24.627,-12.313],[0,0],[10.427,5.214],[0,0],[0,-27.533],[0,0],[-12.548,-6.274],[0,0],[-10.426,5.214],[0,0],[0,14.029],[0,0]],o:[[0,0],[-10.427,5.214],[0,0],[-24.626,-12.313],[0,0],[0,14.029],[0,0],[10.427,5.214],[0,0],[12.548,-6.274],[0,0],[0,-27.534]],v:[[393.625,-183.888],[16.563,4.642],[-16.563,4.642],[-393.625,-183.888],[-447.227,-150.76],[-447.227,-47.235],[-426.753,-14.107],[-16.563,190.987],[16.563,190.987],[426.753,-14.108],[447.227,-47.235],[447.227,-150.76]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.3137,.7569,.3294,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[539.773,387.762],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:46,s:[0]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:59,s:[25]},{t:135.000005498663,s:[100]}],ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 2",np:2,cix:2,bm:0,ix:2,mn:"ADBE Vector Group",hd:!1}],ip:0,op:153.000006231818,st:0,bm:0}],markers=[],arrow={v:v$2,fr,ip,op,w:w$1,h:h$3,nm,ddd,assets,layers,markers};function ownKeys$1(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);e&&(o=o.filter(function(y){return Object.getOwnPropertyDescriptor(r,y).enumerable})),t.push.apply(t,o)}return t}function _objectSpread2(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ownKeys$1(Object(t),!0).forEach(function(o){_defineProperty$1(r,o,t[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):ownKeys$1(Object(t)).forEach(function(o){Object.defineProperty(r,o,Object.getOwnPropertyDescriptor(t,o))})}return r}function asyncGeneratorStep(r,e,t,o,y,R,G){try{var K=r[R](G),Y=K.value}catch(Q){return void t(Q)}K.done?e(Y):Promise.resolve(Y).then(o,y)}function _asyncToGenerator(r){return function(){var e=this,t=arguments;return new Promise(function(o,y){var R=r.apply(e,t);function G(Y){asyncGeneratorStep(R,o,y,G,K,"next",Y)}function K(Y){asyncGeneratorStep(R,o,y,G,K,"throw",Y)}G(void 0)})}}function _defineProperty$1(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function _taggedTemplateLiteral(r,e){return e||(e=r.slice(0)),Object.freeze(Object.defineProperties(r,{raw:{value:Object.freeze(e)}}))}function __decorate(r,e,t,o){var y,R=arguments.length,G=R<3?e:o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")G=Reflect.decorate(r,e,t,o);else for(var K=r.length-1;K>=0;K--)(y=r[K])&&(G=(R<3?y(G):R>3?y(e,t,G):y(e,t))||G);return R>3&&G&&Object.defineProperty(e,t,G),G}var t$3=window.ShadowRoot&&(window.ShadyCSS===void 0||window.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,e$8=Symbol(),n$5=new Map;class s$3{constructor(e,t){if(this._$cssResult$=!0,t!==e$8)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e}get styleSheet(){var e=n$5.get(this.cssText);return t$3&&e===void 0&&(n$5.set(this.cssText,e=new CSSStyleSheet),e.replaceSync(this.cssText)),e}toString(){return this.cssText}}var o$5=r=>new s$3(typeof r=="string"?r:r+"",e$8),r$3=function(r){for(var e=arguments.length,t=new Array(e>1?e-1:0),o=1;o<e;o++)t[o-1]=arguments[o];var y=r.length===1?r[0]:t.reduce((R,G,K)=>R+(Y=>{if(Y._$cssResult$===!0)return Y.cssText;if(typeof Y=="number")return Y;throw Error("Value passed to 'css' function must be a 'css' function result: "+Y+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(G)+r[K+1],r[0]);return new s$3(y,e$8)},i$3=(r,e)=>{t$3?r.adoptedStyleSheets=e.map(t=>t instanceof CSSStyleSheet?t:t.styleSheet):e.forEach(t=>{var o=document.createElement("style"),y=window.litNonce;y!==void 0&&o.setAttribute("nonce",y),o.textContent=t.cssText,r.appendChild(o)})},S$1=t$3?r=>r:r=>r instanceof CSSStyleSheet?(e=>{var t="";for(var o of e.cssRules)t+=o.cssText;return o$5(t)})(r):r,s$2,e$7=window.trustedTypes,r$2=e$7?e$7.emptyScript:"",h$2=window.reactiveElementPolyfillSupport,o$4={toAttribute(r,e){switch(e){case Boolean:r=r?r$2:null;break;case Object:case Array:r=r==null?r:JSON.stringify(r)}return r},fromAttribute(r,e){var t=r;switch(e){case Boolean:t=r!==null;break;case Number:t=r===null?null:Number(r);break;case Object:case Array:try{t=JSON.parse(r)}catch{t=null}}return t}},n$4=(r,e)=>e!==r&&(e==e||r==r),l$3={attribute:!0,type:String,converter:o$4,reflect:!1,hasChanged:n$4},t$2;class a$1 extends HTMLElement{constructor(){super(),this._$Et=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Ei=null,this.o()}static addInitializer(e){var t;(t=this.l)!==null&&t!==void 0||(this.l=[]),this.l.push(e)}static get observedAttributes(){this.finalize();var e=[];return this.elementProperties.forEach((t,o)=>{var y=this._$Eh(o,t);y!==void 0&&(this._$Eu.set(y,o),e.push(y))}),e}static createProperty(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:l$3;if(t.state&&(t.attribute=!1),this.finalize(),this.elementProperties.set(e,t),!t.noAccessor&&!this.prototype.hasOwnProperty(e)){var o=typeof e=="symbol"?Symbol():"__"+e,y=this.getPropertyDescriptor(e,o,t);y!==void 0&&Object.defineProperty(this.prototype,e,y)}}static getPropertyDescriptor(e,t,o){return{get(){return this[t]},set(y){var R=this[e];this[t]=y,this.requestUpdate(e,R,o)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)||l$3}static finalize(){if(this.hasOwnProperty("finalized"))return!1;this.finalized=!0;var e=Object.getPrototypeOf(this);if(e.finalize(),this.elementProperties=new Map(e.elementProperties),this._$Eu=new Map,this.hasOwnProperty("properties")){var t=this.properties,o=[...Object.getOwnPropertyNames(t),...Object.getOwnPropertySymbols(t)];for(var y of o)this.createProperty(y,t[y])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(e){var t=[];if(Array.isArray(e)){var o=new Set(e.flat(1/0).reverse());for(var y of o)t.unshift(S$1(y))}else e!==void 0&&t.push(S$1(e));return t}static _$Eh(e,t){var o=t.attribute;return o===!1?void 0:typeof o=="string"?o:typeof e=="string"?e.toLowerCase():void 0}o(){var e;this._$Ep=new Promise(t=>this.enableUpdating=t),this._$AL=new Map,this._$Em(),this.requestUpdate(),(e=this.constructor.l)===null||e===void 0||e.forEach(t=>t(this))}addController(e){var t,o;((t=this._$Eg)!==null&&t!==void 0?t:this._$Eg=[]).push(e),this.renderRoot!==void 0&&this.isConnected&&((o=e.hostConnected)===null||o===void 0||o.call(e))}removeController(e){var t;(t=this._$Eg)===null||t===void 0||t.splice(this._$Eg.indexOf(e)>>>0,1)}_$Em(){this.constructor.elementProperties.forEach((e,t)=>{this.hasOwnProperty(t)&&(this._$Et.set(t,this[t]),delete this[t])})}createRenderRoot(){var e,t=(e=this.shadowRoot)!==null&&e!==void 0?e:this.attachShadow(this.constructor.shadowRootOptions);return i$3(t,this.constructor.elementStyles),t}connectedCallback(){var e;this.renderRoot===void 0&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$Eg)===null||e===void 0||e.forEach(t=>{var o;return(o=t.hostConnected)===null||o===void 0?void 0:o.call(t)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$Eg)===null||e===void 0||e.forEach(t=>{var o;return(o=t.hostDisconnected)===null||o===void 0?void 0:o.call(t)})}attributeChangedCallback(e,t,o){this._$AK(e,o)}_$ES(e,t){var o,y,R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:l$3,G=this.constructor._$Eh(e,R);if(G!==void 0&&R.reflect===!0){var K=((y=(o=R.converter)===null||o===void 0?void 0:o.toAttribute)!==null&&y!==void 0?y:o$4.toAttribute)(t,R.type);this._$Ei=e,K==null?this.removeAttribute(G):this.setAttribute(G,K),this._$Ei=null}}_$AK(e,t){var o,y,R,G=this.constructor,K=G._$Eu.get(e);if(K!==void 0&&this._$Ei!==K){var Y=G.getPropertyOptions(K),Q=Y.converter,ee=(R=(y=(o=Q)===null||o===void 0?void 0:o.fromAttribute)!==null&&y!==void 0?y:typeof Q=="function"?Q:null)!==null&&R!==void 0?R:o$4.fromAttribute;this._$Ei=K,this[K]=ee(t,Y.type),this._$Ei=null}}requestUpdate(e,t,o){var y=!0;e!==void 0&&(((o=o||this.constructor.getPropertyOptions(e)).hasChanged||n$4)(this[e],t)?(this._$AL.has(e)||this._$AL.set(e,t),o.reflect===!0&&this._$Ei!==e&&(this._$E_===void 0&&(this._$E_=new Map),this._$E_.set(e,o))):y=!1),!this.isUpdatePending&&y&&(this._$Ep=this._$EC())}_$EC(){var e=this;return _asyncToGenerator(function*(){e.isUpdatePending=!0;try{yield e._$Ep}catch(o){Promise.reject(o)}var t=e.scheduleUpdate();return t!=null&&(yield t),!e.isUpdatePending})()}scheduleUpdate(){return this.performUpdate()}performUpdate(){var e;if(this.isUpdatePending){this.hasUpdated,this._$Et&&(this._$Et.forEach((y,R)=>this[R]=y),this._$Et=void 0);var t=!1,o=this._$AL;try{(t=this.shouldUpdate(o))?(this.willUpdate(o),(e=this._$Eg)===null||e===void 0||e.forEach(y=>{var R;return(R=y.hostUpdate)===null||R===void 0?void 0:R.call(y)}),this.update(o)):this._$EU()}catch(y){throw t=!1,this._$EU(),y}t&&this._$AE(o)}}willUpdate(e){}_$AE(e){var t;(t=this._$Eg)===null||t===void 0||t.forEach(o=>{var y;return(y=o.hostUpdated)===null||y===void 0?void 0:y.call(o)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EU(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$Ep}shouldUpdate(e){return!0}update(e){this._$E_!==void 0&&(this._$E_.forEach((t,o)=>this._$ES(o,this[o],t)),this._$E_=void 0),this._$EU()}updated(e){}firstUpdated(e){}}a$1.finalized=!0,a$1.elementProperties=new Map,a$1.elementStyles=[],a$1.shadowRootOptions={mode:"open"},h$2==null||h$2({ReactiveElement:a$1}),((s$2=globalThis.reactiveElementVersions)!==null&&s$2!==void 0?s$2:globalThis.reactiveElementVersions=[]).push("1.2.1");var i$2=globalThis.trustedTypes,s$1=i$2?i$2.createPolicy("lit-html",{createHTML:r=>r}):void 0,e$6="lit$".concat((Math.random()+"").slice(9),"$"),o$3="?"+e$6,n$3="<".concat(o$3,">"),l$2=document,h$1=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return l$2.createComment(r)},r$1=r=>r===null||typeof r!="object"&&typeof r!="function",d=Array.isArray,u=r=>{var e;return d(r)||typeof((e=r)===null||e===void 0?void 0:e[Symbol.iterator])=="function"},c$1=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,v$1=/-->/g,a$2=/>/g,f=/>|[ 	\n\r](?:([^\s"'>=/]+)([ 	\n\r]*=[ 	\n\r]*(?:[^ 	\n\r"'`<>=]|("|')|))|$)/g,_=/'/g,m$1=/"/g,g$1=/^(?:script|style|textarea)$/i,p$1=r=>function(e){for(var t=arguments.length,o=new Array(t>1?t-1:0),y=1;y<t;y++)o[y-1]=arguments[y];return{_$litType$:r,strings:e,values:o}},$$1=p$1(1),b$1=Symbol.for("lit-noChange"),w=Symbol.for("lit-nothing"),T=new WeakMap,x$2=(r,e,t)=>{var o,y,R=(o=t==null?void 0:t.renderBefore)!==null&&o!==void 0?o:e,G=R._$litPart$;if(G===void 0){var K=(y=t==null?void 0:t.renderBefore)!==null&&y!==void 0?y:null;R._$litPart$=G=new N$1(e.insertBefore(h$1(),K),K,void 0,t??{})}return G._$AI(r),G},A=l$2.createTreeWalker(l$2,129,null,!1),C$1=(r,e)=>{for(var t,o=r.length-1,y=[],R=e===2?"<svg>":"",G=c$1,K=0;K<o;K++){for(var Y=r[K],Q=void 0,ee=void 0,ie=-1,re=0;re<Y.length&&(G.lastIndex=re,(ee=G.exec(Y))!==null);)re=G.lastIndex,G===c$1?ee[1]==="!--"?G=v$1:ee[1]!==void 0?G=a$2:ee[2]!==void 0?(g$1.test(ee[2])&&(t=RegExp("</"+ee[2],"g")),G=f):ee[3]!==void 0&&(G=f):G===f?ee[0]===">"?(G=t??c$1,ie=-1):ee[1]===void 0?ie=-2:(ie=G.lastIndex-ee[2].length,Q=ee[1],G=ee[3]===void 0?f:ee[3]==='"'?m$1:_):G===m$1||G===_?G=f:G===v$1||G===a$2?G=c$1:(G=f,t=void 0);var se=G===f&&r[K+1].startsWith("/>")?" ":"";R+=G===c$1?Y+n$3:ie>=0?(y.push(Q),Y.slice(0,ie)+"$lit$"+Y.slice(ie)+e$6+se):Y+e$6+(ie===-2?(y.push(void 0),K):se)}var le=R+(r[o]||"<?>")+(e===2?"</svg>":"");if(!Array.isArray(r)||!r.hasOwnProperty("raw"))throw Error("invalid template strings array");return[s$1!==void 0?s$1.createHTML(le):le,y]};let E$1=class sm{constructor(e,t){var o,{strings:y,_$litType$:R}=e;this.parts=[];var G=0,K=0,Y=y.length-1,Q=this.parts,[ee,ie]=C$1(y,R);if(this.el=sm.createElement(ee,t),A.currentNode=this.el.content,R===2){var re=this.el.content,se=re.firstChild;se.remove(),re.append(...se.childNodes)}for(;(o=A.nextNode())!==null&&Q.length<Y;){if(o.nodeType===1){if(o.hasAttributes()){var le=[];for(var ce of o.getAttributeNames())if(ce.endsWith("$lit$")||ce.startsWith(e$6)){var oe=ie[K++];if(le.push(ce),oe!==void 0){var ue=o.getAttribute(oe.toLowerCase()+"$lit$").split(e$6),ge=/([.?@])?(.*)/.exec(oe);Q.push({type:1,index:G,name:ge[2],strings:ue,ctor:ge[1]==="."?M$1:ge[1]==="?"?H:ge[1]==="@"?I:S$2})}else Q.push({type:6,index:G})}for(var ve of le)o.removeAttribute(ve)}if(g$1.test(o.tagName)){var _e=o.textContent.split(e$6),be=_e.length-1;if(be>0){o.textContent=i$2?i$2.emptyScript:"";for(var Re=0;Re<be;Re++)o.append(_e[Re],h$1()),A.nextNode(),Q.push({type:2,index:++G});o.append(_e[be],h$1())}}}else if(o.nodeType===8)if(o.data===o$3)Q.push({type:2,index:G});else for(var Se=-1;(Se=o.data.indexOf(e$6,Se+1))!==-1;)Q.push({type:7,index:G}),Se+=e$6.length-1;G++}}static createElement(e,t){var o=l$2.createElement("template");return o.innerHTML=e,o}};function P(r,e){var t,o,y,R,G=arguments.length>2&&arguments[2]!==void 0?arguments[2]:r,K=arguments.length>3?arguments[3]:void 0;if(e===b$1)return e;var Y=K!==void 0?(t=G._$Cl)===null||t===void 0?void 0:t[K]:G._$Cu,Q=r$1(e)?void 0:e._$litDirective$;return(Y==null?void 0:Y.constructor)!==Q&&((o=Y==null?void 0:Y._$AO)===null||o===void 0||o.call(Y,!1),Q===void 0?Y=void 0:(Y=new Q(r))._$AT(r,G,K),K!==void 0?((y=(R=G)._$Cl)!==null&&y!==void 0?y:R._$Cl=[])[K]=Y:G._$Cu=Y),Y!==void 0&&(e=P(r,Y._$AS(r,e.values),Y,K)),e}class V{constructor(e,t){this.v=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}p(e){var t,{el:{content:o},parts:y}=this._$AD,R=((t=e==null?void 0:e.creationScope)!==null&&t!==void 0?t:l$2).importNode(o,!0);A.currentNode=R;for(var G=A.nextNode(),K=0,Y=0,Q=y[0];Q!==void 0;){if(K===Q.index){var ee=void 0;Q.type===2?ee=new N$1(G,G.nextSibling,this,e):Q.type===1?ee=new Q.ctor(G,Q.name,Q.strings,this,e):Q.type===6&&(ee=new L$1(G,this,e)),this.v.push(ee),Q=y[++Y]}K!==(Q==null?void 0:Q.index)&&(G=A.nextNode(),K++)}return R}m(e){var t=0;for(var o of this.v)o!==void 0&&(o.strings!==void 0?(o._$AI(e,o,t),t+=o.strings.length-2):o._$AI(e[t])),t++}}let N$1=class am{constructor(e,t,o,y){var R;this.type=2,this._$AH=w,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=o,this.options=y,this._$Cg=(R=y==null?void 0:y.isConnected)===null||R===void 0||R}get _$AU(){var e,t;return(t=(e=this._$AM)===null||e===void 0?void 0:e._$AU)!==null&&t!==void 0?t:this._$Cg}get parentNode(){var e=this._$AA.parentNode,t=this._$AM;return t!==void 0&&e.nodeType===11&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e){e=P(this,e,arguments.length>1&&arguments[1]!==void 0?arguments[1]:this),r$1(e)?e===w||e==null||e===""?(this._$AH!==w&&this._$AR(),this._$AH=w):e!==this._$AH&&e!==b$1&&this.$(e):e._$litType$!==void 0?this.T(e):e.nodeType!==void 0?this.S(e):u(e)?this.A(e):this.$(e)}M(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._$AB;return this._$AA.parentNode.insertBefore(e,t)}S(e){this._$AH!==e&&(this._$AR(),this._$AH=this.M(e))}$(e){this._$AH!==w&&r$1(this._$AH)?this._$AA.nextSibling.data=e:this.S(l$2.createTextNode(e)),this._$AH=e}T(e){var t,{values:o,_$litType$:y}=e,R=typeof y=="number"?this._$AC(e):(y.el===void 0&&(y.el=E$1.createElement(y.h,this.options)),y);if(((t=this._$AH)===null||t===void 0?void 0:t._$AD)===R)this._$AH.m(o);else{var G=new V(R,this),K=G.p(this.options);G.m(o),this.S(K),this._$AH=G}}_$AC(e){var t=T.get(e.strings);return t===void 0&&T.set(e.strings,t=new E$1(e)),t}A(e){d(this._$AH)||(this._$AH=[],this._$AR());var t,o=this._$AH,y=0;for(var R of e)y===o.length?o.push(t=new am(this.M(h$1()),this.M(h$1()),this,this.options)):t=o[y],t._$AI(R),y++;y<o.length&&(this._$AR(t&&t._$AB.nextSibling,y),o.length=y)}_$AR(){var e,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this._$AA.nextSibling,o=arguments.length>1?arguments[1]:void 0;for((e=this._$AP)===null||e===void 0||e.call(this,!1,!0,o);t&&t!==this._$AB;){var y=t.nextSibling;t.remove(),t=y}}setConnected(e){var t;this._$AM===void 0&&(this._$Cg=e,(t=this._$AP)===null||t===void 0||t.call(this,e))}},S$2=class{constructor(e,t,o,y,R){this.type=1,this._$AH=w,this._$AN=void 0,this.element=e,this.name=t,this._$AM=y,this.options=R,o.length>2||o[0]!==""||o[1]!==""?(this._$AH=Array(o.length-1).fill(new String),this.strings=o):this._$AH=w}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this,o=arguments.length>2?arguments[2]:void 0,y=arguments.length>3?arguments[3]:void 0,R=this.strings,G=!1;if(R===void 0)e=P(this,e,t,0),(G=!r$1(e)||e!==this._$AH&&e!==b$1)&&(this._$AH=e);else{var K,Y,Q=e;for(e=R[0],K=0;K<R.length-1;K++)(Y=P(this,Q[o+K],t,K))===b$1&&(Y=this._$AH[K]),G||(G=!r$1(Y)||Y!==this._$AH[K]),Y===w?e=w:e!==w&&(e+=(Y??"")+R[K+1]),this._$AH[K]=Y}G&&!y&&this.k(e)}k(e){e===w?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}},M$1=class extends S$2{constructor(){super(...arguments),this.type=3}k(e){this.element[this.name]=e===w?void 0:e}};var k$1=i$2?i$2.emptyScript:"";class H extends S$2{constructor(){super(...arguments),this.type=4}k(e){e&&e!==w?this.element.setAttribute(this.name,k$1):this.element.removeAttribute(this.name)}}class I extends S$2{constructor(e,t,o,y,R){super(e,t,o,y,R),this.type=5}_$AI(e){var t;if((e=(t=P(this,e,arguments.length>1&&arguments[1]!==void 0?arguments[1]:this,0))!==null&&t!==void 0?t:w)!==b$1){var o=this._$AH,y=e===w&&o!==w||e.capture!==o.capture||e.once!==o.once||e.passive!==o.passive,R=e!==w&&(o===w||y);y&&this.element.removeEventListener(this.name,this,o),R&&this.element.addEventListener(this.name,this,e),this._$AH=e}}handleEvent(e){var t,o;typeof this._$AH=="function"?this._$AH.call((o=(t=this.options)===null||t===void 0?void 0:t.host)!==null&&o!==void 0?o:this.element,e):this._$AH.handleEvent(e)}}let L$1=class{constructor(e,t,o){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=o}get _$AU(){return this._$AM._$AU}_$AI(e){P(this,e)}};var z=window.litHtmlPolyfillSupport,l$1,o$2;z==null||z(E$1,N$1),((t$2=globalThis.litHtmlVersions)!==null&&t$2!==void 0?t$2:globalThis.litHtmlVersions=[]).push("2.1.2");class s extends a$1{constructor(){super(...arguments),this.renderOptions={host:this},this._$Dt=void 0}createRenderRoot(){var e,t,o=super.createRenderRoot();return(e=(t=this.renderOptions).renderBefore)!==null&&e!==void 0||(t.renderBefore=o.firstChild),o}update(e){var t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Dt=x$2(t,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Dt)===null||e===void 0||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Dt)===null||e===void 0||e.setConnected(!1)}render(){return b$1}}s.finalized=!0,s._$litElement$=!0,(l$1=globalThis.litElementHydrateSupport)===null||l$1===void 0||l$1.call(globalThis,{LitElement:s});var n$2=globalThis.litElementPolyfillSupport;n$2==null||n$2({LitElement:s});((o$2=globalThis.litElementVersions)!==null&&o$2!==void 0?o$2:globalThis.litElementVersions=[]).push("3.1.2");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var n$1=r=>e=>typeof e=="function"?((t,o)=>(window.customElements.define(t,o),o))(r,e):((t,o)=>{var{kind:y,elements:R}=o;return{kind:y,elements:R,finisher(G){window.customElements.define(t,G)}}})(r,e),i$1$1=(r,e)=>e.kind==="method"&&e.descriptor&&!("value"in e.descriptor)?_objectSpread2(_objectSpread2({},e),{},{finisher(t){t.createProperty(e.key,r)}}):{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:e.key,initializer(){typeof e.initializer=="function"&&(this[e.key]=e.initializer.call(this))},finisher(t){t.createProperty(e.key,r)}};function e$5(r){return(e,t)=>t!==void 0?((o,y,R)=>{y.constructor.createProperty(R,o)})(r,e,t):i$1$1(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var o$1=r=>{var{finisher:e,descriptor:t}=r;return(o,y)=>{var R;if(y===void 0){var G=(R=o.originalKey)!==null&&R!==void 0?R:o.key,K=t!=null?{kind:"method",placement:"prototype",key:G,descriptor:t(o.key)}:_objectSpread2(_objectSpread2({},o),{},{key:G});return e!=null&&(K.finisher=function(Q){e(Q,G)}),K}var Y=o.constructor;t!==void 0&&Object.defineProperty(o,y,t(y)),e==null||e(Y,y)}},n;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function i$4(r,e){return o$1({descriptor:t=>{var o={get(){var y,R;return(R=(y=this.renderRoot)===null||y===void 0?void 0:y.querySelector(r))!==null&&R!==void 0?R:null},enumerable:!0,configurable:!0};return o}})}/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */((n=window.HTMLSlotElement)===null||n===void 0?void 0:n.prototype.assignedElements)!=null;var lottie$1={exports:{}};(function(module,exports){var factory;typeof navigator<"u"&&(factory=function(){var svgNS="http://www.w3.org/2000/svg",locationHref="",_useWebWorker=!1,initialDefaultFrame=-999999,setWebWorker=function(r){_useWebWorker=!!r},getWebWorker=function(){return _useWebWorker},setLocationHref=function(r){locationHref=r},getLocationHref=function(){return locationHref};function createTag(r){return document.createElement(r)}function extendPrototype(r,e){var t,o,y=r.length;for(t=0;t<y;t+=1)for(var R in o=r[t].prototype)Object.prototype.hasOwnProperty.call(o,R)&&(e.prototype[R]=o[R])}function getDescriptor(r,e){return Object.getOwnPropertyDescriptor(r,e)}function createProxyFunction(r){function e(){}return e.prototype=r,e}var audioControllerFactory=function(){function r(e){this.audios=[],this.audioFactory=e,this._volume=1,this._isMuted=!1}return r.prototype={addAudio:function(e){this.audios.push(e)},pause:function(){var e,t=this.audios.length;for(e=0;e<t;e+=1)this.audios[e].pause()},resume:function(){var e,t=this.audios.length;for(e=0;e<t;e+=1)this.audios[e].resume()},setRate:function(e){var t,o=this.audios.length;for(t=0;t<o;t+=1)this.audios[t].setRate(e)},createAudio:function(e){return this.audioFactory?this.audioFactory(e):window.Howl?new window.Howl({src:[e]}):{isPlaying:!1,play:function(){this.isPlaying=!0},seek:function(){this.isPlaying=!1},playing:function(){},rate:function(){},setVolume:function(){}}},setAudioFactory:function(e){this.audioFactory=e},setVolume:function(e){this._volume=e,this._updateVolume()},mute:function(){this._isMuted=!0,this._updateVolume()},unmute:function(){this._isMuted=!1,this._updateVolume()},getVolume:function(){return this._volume},_updateVolume:function(){var e,t=this.audios.length;for(e=0;e<t;e+=1)this.audios[e].volume(this._volume*(this._isMuted?0:1))}},function(){return new r}}(),createTypedArray=function(){function r(e,t){var o,y=0,R=[];switch(e){case"int16":case"uint8c":o=1;break;default:o=1.1}for(y=0;y<t;y+=1)R.push(o);return R}return typeof Uint8ClampedArray=="function"&&typeof Float32Array=="function"?function(e,t){return e==="float32"?new Float32Array(t):e==="int16"?new Int16Array(t):e==="uint8c"?new Uint8ClampedArray(t):r(e,t)}:r}();function createSizedArray(r){return Array.apply(null,{length:r})}function _typeof$6(r){return _typeof$6=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$6(r)}var subframeEnabled=!0,expressionsPlugin=null,expressionsInterfaces=null,idPrefix$1="",isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),bmPow=Math.pow,bmSqrt=Math.sqrt,bmFloor=Math.floor,bmMax=Math.max,bmMin=Math.min,BMMath={};(function(){var r,e=["abs","acos","acosh","asin","asinh","atan","atanh","atan2","ceil","cbrt","expm1","clz32","cos","cosh","exp","floor","fround","hypot","imul","log","log1p","log2","log10","max","min","pow","random","round","sign","sin","sinh","sqrt","tan","tanh","trunc","E","LN10","LN2","LOG10E","LOG2E","PI","SQRT1_2","SQRT2"],t=e.length;for(r=0;r<t;r+=1)BMMath[e[r]]=Math[e[r]]})(),BMMath.random=Math.random,BMMath.abs=function(r){if(_typeof$6(r)==="object"&&r.length){var e,t=createSizedArray(r.length),o=r.length;for(e=0;e<o;e+=1)t[e]=Math.abs(r[e]);return t}return Math.abs(r)};var defaultCurveSegments=150,degToRads=Math.PI/180,roundCorner=.5519;function styleDiv(r){r.style.position="absolute",r.style.top=0,r.style.left=0,r.style.display="block",r.style.transformOrigin="0 0",r.style.webkitTransformOrigin="0 0",r.style.backfaceVisibility="visible",r.style.webkitBackfaceVisibility="visible",r.style.transformStyle="preserve-3d",r.style.webkitTransformStyle="preserve-3d",r.style.mozTransformStyle="preserve-3d"}function BMEnterFrameEvent(r,e,t,o){this.type=r,this.currentTime=e,this.totalTime=t,this.direction=o<0?-1:1}function BMCompleteEvent(r,e){this.type=r,this.direction=e<0?-1:1}function BMCompleteLoopEvent(r,e,t,o){this.type=r,this.currentLoop=t,this.totalLoops=e,this.direction=o<0?-1:1}function BMSegmentStartEvent(r,e,t){this.type=r,this.firstFrame=e,this.totalFrames=t}function BMDestroyEvent(r,e){this.type=r,this.target=e}function BMRenderFrameErrorEvent(r,e){this.type="renderFrameError",this.nativeError=r,this.currentTime=e}function BMConfigErrorEvent(r){this.type="configError",this.nativeError=r}var createElementID=(_count=0,function(){return idPrefix$1+"__lottie_element_"+(_count+=1)}),_count;function HSVtoRGB(r,e,t){var o,y,R,G,K,Y,Q,ee;switch(Y=t*(1-e),Q=t*(1-(K=6*r-(G=Math.floor(6*r)))*e),ee=t*(1-(1-K)*e),G%6){case 0:o=t,y=ee,R=Y;break;case 1:o=Q,y=t,R=Y;break;case 2:o=Y,y=t,R=ee;break;case 3:o=Y,y=Q,R=t;break;case 4:o=ee,y=Y,R=t;break;case 5:o=t,y=Y,R=Q}return[o,y,R]}function RGBtoHSV(r,e,t){var o,y=Math.max(r,e,t),R=Math.min(r,e,t),G=y-R,K=y===0?0:G/y,Y=y/255;switch(y){case R:o=0;break;case r:o=e-t+G*(e<t?6:0),o/=6*G;break;case e:o=t-r+2*G,o/=6*G;break;case t:o=r-e+4*G,o/=6*G}return[o,K,Y]}function addSaturationToRGB(r,e){var t=RGBtoHSV(255*r[0],255*r[1],255*r[2]);return t[1]+=e,t[1]>1?t[1]=1:t[1]<=0&&(t[1]=0),HSVtoRGB(t[0],t[1],t[2])}function addBrightnessToRGB(r,e){var t=RGBtoHSV(255*r[0],255*r[1],255*r[2]);return t[2]+=e,t[2]>1?t[2]=1:t[2]<0&&(t[2]=0),HSVtoRGB(t[0],t[1],t[2])}function addHueToRGB(r,e){var t=RGBtoHSV(255*r[0],255*r[1],255*r[2]);return t[0]+=e/360,t[0]>1?t[0]-=1:t[0]<0&&(t[0]+=1),HSVtoRGB(t[0],t[1],t[2])}var rgbToHex=function(){var r,e,t=[];for(r=0;r<256;r+=1)e=r.toString(16),t[r]=e.length===1?"0"+e:e;return function(o,y,R){return o<0&&(o=0),y<0&&(y=0),R<0&&(R=0),"#"+t[o]+t[y]+t[R]}}(),setSubframeEnabled=function(r){subframeEnabled=!!r},getSubframeEnabled=function(){return subframeEnabled},setExpressionsPlugin=function(r){expressionsPlugin=r},getExpressionsPlugin=function(){return expressionsPlugin},setExpressionInterfaces=function(r){expressionsInterfaces=r},getExpressionInterfaces=function(){return expressionsInterfaces},setDefaultCurveSegments=function(r){defaultCurveSegments=r},getDefaultCurveSegments=function(){return defaultCurveSegments},setIdPrefix=function(r){idPrefix$1=r};function createNS(r){return document.createElementNS(svgNS,r)}function _typeof$5(r){return _typeof$5=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$5(r)}var dataManager=function(){var r,e,t=1,o=[],y={onmessage:function(){},postMessage:function(Y){r({data:Y})}},R={postMessage:function(Y){y.onmessage({data:Y})}};function G(){e||(e=function(Y){if(window.Worker&&window.Blob&&getWebWorker()){var Q=new Blob(["var _workerSelf = self; self.onmessage = ",Y.toString()],{type:"text/javascript"}),ee=URL.createObjectURL(Q);return new Worker(ee)}return r=Y,y}(function(Y){if(R.dataManager||(R.dataManager=function(){function ee(Se,Ee){var ye,de,Me,Le,Pe,Ue,$e=Se.length;for(de=0;de<$e;de+=1)if("ks"in(ye=Se[de])&&!ye.completed){if(ye.completed=!0,ye.hasMask){var Ve=ye.masksProperties;for(Le=Ve.length,Me=0;Me<Le;Me+=1)if(Ve[Me].pt.k.i)se(Ve[Me].pt.k);else for(Ue=Ve[Me].pt.k.length,Pe=0;Pe<Ue;Pe+=1)Ve[Me].pt.k[Pe].s&&se(Ve[Me].pt.k[Pe].s[0]),Ve[Me].pt.k[Pe].e&&se(Ve[Me].pt.k[Pe].e[0])}ye.ty===0?(ye.layers=ie(ye.refId,Ee),ee(ye.layers,Ee)):ye.ty===4?re(ye.shapes):ye.ty===5&&be(ye)}}function ie(Se,Ee){var ye=function(de,Me){for(var Le=0,Pe=Me.length;Le<Pe;){if(Me[Le].id===de)return Me[Le];Le+=1}return null}(Se,Ee);return ye?ye.layers.__used?JSON.parse(JSON.stringify(ye.layers)):(ye.layers.__used=!0,ye.layers):null}function re(Se){var Ee,ye,de;for(Ee=Se.length-1;Ee>=0;Ee-=1)if(Se[Ee].ty==="sh")if(Se[Ee].ks.k.i)se(Se[Ee].ks.k);else for(de=Se[Ee].ks.k.length,ye=0;ye<de;ye+=1)Se[Ee].ks.k[ye].s&&se(Se[Ee].ks.k[ye].s[0]),Se[Ee].ks.k[ye].e&&se(Se[Ee].ks.k[ye].e[0]);else Se[Ee].ty==="gr"&&re(Se[Ee].it)}function se(Se){var Ee,ye=Se.i.length;for(Ee=0;Ee<ye;Ee+=1)Se.i[Ee][0]+=Se.v[Ee][0],Se.i[Ee][1]+=Se.v[Ee][1],Se.o[Ee][0]+=Se.v[Ee][0],Se.o[Ee][1]+=Se.v[Ee][1]}function le(Se,Ee){var ye=Ee?Ee.split("."):[100,100,100];return Se[0]>ye[0]||!(ye[0]>Se[0])&&(Se[1]>ye[1]||!(ye[1]>Se[1])&&(Se[2]>ye[2]||!(ye[2]>Se[2])&&null))}var ce,oe=function(){var Se=[4,4,14];function Ee(ye){var de,Me,Le,Pe=ye.length;for(de=0;de<Pe;de+=1)ye[de].ty===5&&(Le=void 0,Le=(Me=ye[de]).t.d,Me.t.d={k:[{s:Le,t:0}]})}return function(ye){if(le(Se,ye.v)&&(Ee(ye.layers),ye.assets)){var de,Me=ye.assets.length;for(de=0;de<Me;de+=1)ye.assets[de].layers&&Ee(ye.assets[de].layers)}}}(),ue=(ce=[4,7,99],function(Se){if(Se.chars&&!le(ce,Se.v)){var Ee,ye=Se.chars.length;for(Ee=0;Ee<ye;Ee+=1){var de=Se.chars[Ee];de.data&&de.data.shapes&&(re(de.data.shapes),de.data.ip=0,de.data.op=99999,de.data.st=0,de.data.sr=1,de.data.ks={p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0}},Se.chars[Ee].t||(de.data.shapes.push({ty:"no"}),de.data.shapes[0].it.push({p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0},sk:{k:0,a:0},sa:{k:0,a:0},ty:"tr"})))}}}),ge=function(){var Se=[5,7,15];function Ee(ye){var de,Me,Le=ye.length;for(de=0;de<Le;de+=1)ye[de].ty===5&&(Me=void 0,typeof(Me=ye[de].t.p).a=="number"&&(Me.a={a:0,k:Me.a}),typeof Me.p=="number"&&(Me.p={a:0,k:Me.p}),typeof Me.r=="number"&&(Me.r={a:0,k:Me.r}))}return function(ye){if(le(Se,ye.v)&&(Ee(ye.layers),ye.assets)){var de,Me=ye.assets.length;for(de=0;de<Me;de+=1)ye.assets[de].layers&&Ee(ye.assets[de].layers)}}}(),ve=function(){var Se=[4,1,9];function Ee(de){var Me,Le,Pe,Ue=de.length;for(Me=0;Me<Ue;Me+=1)if(de[Me].ty==="gr")Ee(de[Me].it);else if(de[Me].ty==="fl"||de[Me].ty==="st")if(de[Me].c.k&&de[Me].c.k[0].i)for(Pe=de[Me].c.k.length,Le=0;Le<Pe;Le+=1)de[Me].c.k[Le].s&&(de[Me].c.k[Le].s[0]/=255,de[Me].c.k[Le].s[1]/=255,de[Me].c.k[Le].s[2]/=255,de[Me].c.k[Le].s[3]/=255),de[Me].c.k[Le].e&&(de[Me].c.k[Le].e[0]/=255,de[Me].c.k[Le].e[1]/=255,de[Me].c.k[Le].e[2]/=255,de[Me].c.k[Le].e[3]/=255);else de[Me].c.k[0]/=255,de[Me].c.k[1]/=255,de[Me].c.k[2]/=255,de[Me].c.k[3]/=255}function ye(de){var Me,Le=de.length;for(Me=0;Me<Le;Me+=1)de[Me].ty===4&&Ee(de[Me].shapes)}return function(de){if(le(Se,de.v)&&(ye(de.layers),de.assets)){var Me,Le=de.assets.length;for(Me=0;Me<Le;Me+=1)de.assets[Me].layers&&ye(de.assets[Me].layers)}}}(),_e=function(){var Se=[4,4,18];function Ee(de){var Me,Le,Pe;for(Me=de.length-1;Me>=0;Me-=1)if(de[Me].ty==="sh")if(de[Me].ks.k.i)de[Me].ks.k.c=de[Me].closed;else for(Pe=de[Me].ks.k.length,Le=0;Le<Pe;Le+=1)de[Me].ks.k[Le].s&&(de[Me].ks.k[Le].s[0].c=de[Me].closed),de[Me].ks.k[Le].e&&(de[Me].ks.k[Le].e[0].c=de[Me].closed);else de[Me].ty==="gr"&&Ee(de[Me].it)}function ye(de){var Me,Le,Pe,Ue,$e,Ve,Ce=de.length;for(Le=0;Le<Ce;Le+=1){if((Me=de[Le]).hasMask){var De=Me.masksProperties;for(Ue=De.length,Pe=0;Pe<Ue;Pe+=1)if(De[Pe].pt.k.i)De[Pe].pt.k.c=De[Pe].cl;else for(Ve=De[Pe].pt.k.length,$e=0;$e<Ve;$e+=1)De[Pe].pt.k[$e].s&&(De[Pe].pt.k[$e].s[0].c=De[Pe].cl),De[Pe].pt.k[$e].e&&(De[Pe].pt.k[$e].e[0].c=De[Pe].cl)}Me.ty===4&&Ee(Me.shapes)}}return function(de){if(le(Se,de.v)&&(ye(de.layers),de.assets)){var Me,Le=de.assets.length;for(Me=0;Me<Le;Me+=1)de.assets[Me].layers&&ye(de.assets[Me].layers)}}}();function be(Se){Se.t.a.length===0&&Se.t.p}var Re={completeData:function(Se){Se.__complete||(ve(Se),oe(Se),ue(Se),ge(Se),_e(Se),ee(Se.layers,Se.assets),function(Ee,ye){if(Ee){var de=0,Me=Ee.length;for(de=0;de<Me;de+=1)Ee[de].t===1&&(Ee[de].data.layers=ie(Ee[de].data.refId,ye),ee(Ee[de].data.layers,ye))}}(Se.chars,Se.assets),Se.__complete=!0)}};return Re.checkColors=ve,Re.checkChars=ue,Re.checkPathProperties=ge,Re.checkShapes=_e,Re.completeLayers=ee,Re}()),R.assetLoader||(R.assetLoader=function(){function ee(ie){var re=ie.getResponseHeader("content-type");return re&&ie.responseType==="json"&&re.indexOf("json")!==-1||ie.response&&_typeof$5(ie.response)==="object"?ie.response:ie.response&&typeof ie.response=="string"?JSON.parse(ie.response):ie.responseText?JSON.parse(ie.responseText):null}return{load:function(ie,re,se,le){var ce,oe=new XMLHttpRequest;try{oe.responseType="json"}catch{}oe.onreadystatechange=function(){if(oe.readyState===4)if(oe.status===200)ce=ee(oe),se(ce);else try{ce=ee(oe),se(ce)}catch(ue){le&&le(ue)}};try{oe.open(["G","E","T"].join(""),ie,!0)}catch{oe.open(["G","E","T"].join(""),re+"/"+ie,!0)}oe.send()}}}()),Y.data.type==="loadAnimation")R.assetLoader.load(Y.data.path,Y.data.fullPath,function(ee){R.dataManager.completeData(ee),R.postMessage({id:Y.data.id,payload:ee,status:"success"})},function(){R.postMessage({id:Y.data.id,status:"error"})});else if(Y.data.type==="complete"){var Q=Y.data.animation;R.dataManager.completeData(Q),R.postMessage({id:Y.data.id,payload:Q,status:"success"})}else Y.data.type==="loadData"&&R.assetLoader.load(Y.data.path,Y.data.fullPath,function(ee){R.postMessage({id:Y.data.id,payload:ee,status:"success"})},function(){R.postMessage({id:Y.data.id,status:"error"})})}),e.onmessage=function(Y){var Q=Y.data,ee=Q.id,ie=o[ee];o[ee]=null,Q.status==="success"?ie.onComplete(Q.payload):ie.onError&&ie.onError()})}function K(Y,Q){var ee="processId_"+(t+=1);return o[ee]={onComplete:Y,onError:Q},ee}return{loadAnimation:function(Y,Q,ee){G();var ie=K(Q,ee);e.postMessage({type:"loadAnimation",path:Y,fullPath:window.location.origin+window.location.pathname,id:ie})},loadData:function(Y,Q,ee){G();var ie=K(Q,ee);e.postMessage({type:"loadData",path:Y,fullPath:window.location.origin+window.location.pathname,id:ie})},completeAnimation:function(Y,Q,ee){G();var ie=K(Q,ee);e.postMessage({type:"complete",animation:Y,id:ie})}}}(),ImagePreloader=function(){var r=function(){var K=createTag("canvas");K.width=1,K.height=1;var Y=K.getContext("2d");return Y.fillStyle="rgba(0,0,0,0)",Y.fillRect(0,0,1,1),K}();function e(){this.loadedAssets+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function t(){this.loadedFootagesCount+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function o(K,Y,Q){var ee="";if(K.e)ee=K.p;else if(Y){var ie=K.p;ie.indexOf("images/")!==-1&&(ie=ie.split("/")[1]),ee=Y+ie}else ee=Q,ee+=K.u?K.u:"",ee+=K.p;return ee}function y(K){var Y=0,Q=setInterval((function(){(K.getBBox().width||Y>500)&&(this._imageLoaded(),clearInterval(Q)),Y+=1}).bind(this),50)}function R(K){var Y={assetData:K},Q=o(K,this.assetsPath,this.path);return dataManager.loadData(Q,(function(ee){Y.img=ee,this._footageLoaded()}).bind(this),(function(){Y.img={},this._footageLoaded()}).bind(this)),Y}function G(){this._imageLoaded=e.bind(this),this._footageLoaded=t.bind(this),this.testImageLoaded=y.bind(this),this.createFootageData=R.bind(this),this.assetsPath="",this.path="",this.totalImages=0,this.totalFootages=0,this.loadedAssets=0,this.loadedFootagesCount=0,this.imagesLoadedCb=null,this.images=[]}return G.prototype={loadAssets:function(K,Y){var Q;this.imagesLoadedCb=Y;var ee=K.length;for(Q=0;Q<ee;Q+=1)K[Q].layers||(K[Q].t&&K[Q].t!=="seq"?K[Q].t===3&&(this.totalFootages+=1,this.images.push(this.createFootageData(K[Q]))):(this.totalImages+=1,this.images.push(this._createImageData(K[Q]))))},setAssetsPath:function(K){this.assetsPath=K||""},setPath:function(K){this.path=K||""},loadedImages:function(){return this.totalImages===this.loadedAssets},loadedFootages:function(){return this.totalFootages===this.loadedFootagesCount},destroy:function(){this.imagesLoadedCb=null,this.images.length=0},getAsset:function(K){for(var Y=0,Q=this.images.length;Y<Q;){if(this.images[Y].assetData===K)return this.images[Y].img;Y+=1}return null},createImgData:function(K){var Y=o(K,this.assetsPath,this.path),Q=createTag("img");Q.crossOrigin="anonymous",Q.addEventListener("load",this._imageLoaded,!1),Q.addEventListener("error",(function(){ee.img=r,this._imageLoaded()}).bind(this),!1),Q.src=Y;var ee={img:Q,assetData:K};return ee},createImageData:function(K){var Y=o(K,this.assetsPath,this.path),Q=createNS("image");isSafari?this.testImageLoaded(Q):Q.addEventListener("load",this._imageLoaded,!1),Q.addEventListener("error",(function(){ee.img=r,this._imageLoaded()}).bind(this),!1),Q.setAttributeNS("http://www.w3.org/1999/xlink","href",Y),this._elementHelper.append?this._elementHelper.append(Q):this._elementHelper.appendChild(Q);var ee={img:Q,assetData:K};return ee},imageLoaded:e,footageLoaded:t,setCacheType:function(K,Y){K==="svg"?(this._elementHelper=Y,this._createImageData=this.createImageData.bind(this)):this._createImageData=this.createImgData.bind(this)}},G}();function BaseEvent(){}BaseEvent.prototype={triggerEvent:function(r,e){if(this._cbs[r])for(var t=this._cbs[r],o=0;o<t.length;o+=1)t[o](e)},addEventListener:function(r,e){return this._cbs[r]||(this._cbs[r]=[]),this._cbs[r].push(e),(function(){this.removeEventListener(r,e)}).bind(this)},removeEventListener:function(r,e){if(e){if(this._cbs[r]){for(var t=0,o=this._cbs[r].length;t<o;)this._cbs[r][t]===e&&(this._cbs[r].splice(t,1),t-=1,o-=1),t+=1;this._cbs[r].length||(this._cbs[r]=null)}}else this._cbs[r]=null}};var markerParser=function(){function r(e){for(var t,o=e.split(`\r
`),y={},R=0,G=0;G<o.length;G+=1)(t=o[G].split(":")).length===2&&(y[t[0]]=t[1].trim(),R+=1);if(R===0)throw new Error;return y}return function(e){for(var t=[],o=0;o<e.length;o+=1){var y=e[o],R={time:y.tm,duration:y.dr};try{R.payload=JSON.parse(e[o].cm)}catch{try{R.payload=r(e[o].cm)}catch{R.payload={name:e[o].cm}}}t.push(R)}return t}}(),ProjectInterface=function(){function r(e){this.compositions.push(e)}return function(){function e(t){for(var o=0,y=this.compositions.length;o<y;){if(this.compositions[o].data&&this.compositions[o].data.nm===t)return this.compositions[o].prepareFrame&&this.compositions[o].data.xt&&this.compositions[o].prepareFrame(this.currentFrame),this.compositions[o].compInterface;o+=1}return null}return e.compositions=[],e.currentFrame=0,e.registerComposition=r,e}}(),renderers={},registerRenderer=function(r,e){renderers[r]=e};function getRenderer(r){return renderers[r]}function getRegisteredRenderer(){if(renderers.canvas)return"canvas";for(var r in renderers)if(renderers[r])return r;return""}function _typeof$4(r){return _typeof$4=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$4(r)}var AnimationItem=function(){this._cbs=[],this.name="",this.path="",this.isLoaded=!1,this.currentFrame=0,this.currentRawFrame=0,this.firstFrame=0,this.totalFrames=0,this.frameRate=0,this.frameMult=0,this.playSpeed=1,this.playDirection=1,this.playCount=0,this.animationData={},this.assets=[],this.isPaused=!0,this.autoplay=!1,this.loop=!0,this.renderer=null,this.animationID=createElementID(),this.assetsPath="",this.timeCompleted=0,this.segmentPos=0,this.isSubframeEnabled=getSubframeEnabled(),this.segments=[],this._idle=!0,this._completedLoop=!1,this.projectInterface=ProjectInterface(),this.imagePreloader=new ImagePreloader,this.audioController=audioControllerFactory(),this.markers=[],this.configAnimation=this.configAnimation.bind(this),this.onSetupError=this.onSetupError.bind(this),this.onSegmentComplete=this.onSegmentComplete.bind(this),this.drawnFrameEvent=new BMEnterFrameEvent("drawnFrame",0,0,0),this.expressionsPlugin=getExpressionsPlugin()};extendPrototype([BaseEvent],AnimationItem),AnimationItem.prototype.setParams=function(r){(r.wrapper||r.container)&&(this.wrapper=r.wrapper||r.container);var e="svg";r.animType?e=r.animType:r.renderer&&(e=r.renderer);var t=getRenderer(e);this.renderer=new t(this,r.rendererSettings),this.imagePreloader.setCacheType(e,this.renderer.globalData.defs),this.renderer.setProjectInterface(this.projectInterface),this.animType=e,r.loop===""||r.loop===null||r.loop===void 0||r.loop===!0?this.loop=!0:r.loop===!1?this.loop=!1:this.loop=parseInt(r.loop,10),this.autoplay=!("autoplay"in r)||r.autoplay,this.name=r.name?r.name:"",this.autoloadSegments=!Object.prototype.hasOwnProperty.call(r,"autoloadSegments")||r.autoloadSegments,this.assetsPath=r.assetsPath,this.initialSegment=r.initialSegment,r.audioFactory&&this.audioController.setAudioFactory(r.audioFactory),r.animationData?this.setupAnimation(r.animationData):r.path&&(r.path.lastIndexOf("\\")!==-1?this.path=r.path.substr(0,r.path.lastIndexOf("\\")+1):this.path=r.path.substr(0,r.path.lastIndexOf("/")+1),this.fileName=r.path.substr(r.path.lastIndexOf("/")+1),this.fileName=this.fileName.substr(0,this.fileName.lastIndexOf(".json")),dataManager.loadAnimation(r.path,this.configAnimation,this.onSetupError))},AnimationItem.prototype.onSetupError=function(){this.trigger("data_failed")},AnimationItem.prototype.setupAnimation=function(r){dataManager.completeAnimation(r,this.configAnimation)},AnimationItem.prototype.setData=function(r,e){e&&_typeof$4(e)!=="object"&&(e=JSON.parse(e));var t={wrapper:r,animationData:e},o=r.attributes;t.path=o.getNamedItem("data-animation-path")?o.getNamedItem("data-animation-path").value:o.getNamedItem("data-bm-path")?o.getNamedItem("data-bm-path").value:o.getNamedItem("bm-path")?o.getNamedItem("bm-path").value:"",t.animType=o.getNamedItem("data-anim-type")?o.getNamedItem("data-anim-type").value:o.getNamedItem("data-bm-type")?o.getNamedItem("data-bm-type").value:o.getNamedItem("bm-type")?o.getNamedItem("bm-type").value:o.getNamedItem("data-bm-renderer")?o.getNamedItem("data-bm-renderer").value:o.getNamedItem("bm-renderer")?o.getNamedItem("bm-renderer").value:getRegisteredRenderer()||"canvas";var y=o.getNamedItem("data-anim-loop")?o.getNamedItem("data-anim-loop").value:o.getNamedItem("data-bm-loop")?o.getNamedItem("data-bm-loop").value:o.getNamedItem("bm-loop")?o.getNamedItem("bm-loop").value:"";y==="false"?t.loop=!1:y==="true"?t.loop=!0:y!==""&&(t.loop=parseInt(y,10));var R=o.getNamedItem("data-anim-autoplay")?o.getNamedItem("data-anim-autoplay").value:o.getNamedItem("data-bm-autoplay")?o.getNamedItem("data-bm-autoplay").value:!o.getNamedItem("bm-autoplay")||o.getNamedItem("bm-autoplay").value;t.autoplay=R!=="false",t.name=o.getNamedItem("data-name")?o.getNamedItem("data-name").value:o.getNamedItem("data-bm-name")?o.getNamedItem("data-bm-name").value:o.getNamedItem("bm-name")?o.getNamedItem("bm-name").value:"",(o.getNamedItem("data-anim-prerender")?o.getNamedItem("data-anim-prerender").value:o.getNamedItem("data-bm-prerender")?o.getNamedItem("data-bm-prerender").value:o.getNamedItem("bm-prerender")?o.getNamedItem("bm-prerender").value:"")==="false"&&(t.prerender=!1),t.path?this.setParams(t):this.trigger("destroy")},AnimationItem.prototype.includeLayers=function(r){r.op>this.animationData.op&&(this.animationData.op=r.op,this.totalFrames=Math.floor(r.op-this.animationData.ip));var e,t,o=this.animationData.layers,y=o.length,R=r.layers,G=R.length;for(t=0;t<G;t+=1)for(e=0;e<y;){if(o[e].id===R[t].id){o[e]=R[t];break}e+=1}if((r.chars||r.fonts)&&(this.renderer.globalData.fontManager.addChars(r.chars),this.renderer.globalData.fontManager.addFonts(r.fonts,this.renderer.globalData.defs)),r.assets)for(y=r.assets.length,e=0;e<y;e+=1)this.animationData.assets.push(r.assets[e]);this.animationData.__complete=!1,dataManager.completeAnimation(this.animationData,this.onSegmentComplete)},AnimationItem.prototype.onSegmentComplete=function(r){this.animationData=r;var e=getExpressionsPlugin();e&&e.initExpressions(this),this.loadNextSegment()},AnimationItem.prototype.loadNextSegment=function(){var r=this.animationData.segments;if(!r||r.length===0||!this.autoloadSegments)return this.trigger("data_ready"),void(this.timeCompleted=this.totalFrames);var e=r.shift();this.timeCompleted=e.time*this.frameRate;var t=this.path+this.fileName+"_"+this.segmentPos+".json";this.segmentPos+=1,dataManager.loadData(t,this.includeLayers.bind(this),(function(){this.trigger("data_failed")}).bind(this))},AnimationItem.prototype.loadSegments=function(){this.animationData.segments||(this.timeCompleted=this.totalFrames),this.loadNextSegment()},AnimationItem.prototype.imagesLoaded=function(){this.trigger("loaded_images"),this.checkLoaded()},AnimationItem.prototype.preloadImages=function(){this.imagePreloader.setAssetsPath(this.assetsPath),this.imagePreloader.setPath(this.path),this.imagePreloader.loadAssets(this.animationData.assets,this.imagesLoaded.bind(this))},AnimationItem.prototype.configAnimation=function(r){if(this.renderer)try{this.animationData=r,this.initialSegment?(this.totalFrames=Math.floor(this.initialSegment[1]-this.initialSegment[0]),this.firstFrame=Math.round(this.initialSegment[0])):(this.totalFrames=Math.floor(this.animationData.op-this.animationData.ip),this.firstFrame=Math.round(this.animationData.ip)),this.renderer.configAnimation(r),r.assets||(r.assets=[]),this.assets=this.animationData.assets,this.frameRate=this.animationData.fr,this.frameMult=this.animationData.fr/1e3,this.renderer.searchExtraCompositions(r.assets),this.markers=markerParser(r.markers||[]),this.trigger("config_ready"),this.preloadImages(),this.loadSegments(),this.updaFrameModifier(),this.waitForFontsLoaded(),this.isPaused&&this.audioController.pause()}catch(e){this.triggerConfigError(e)}},AnimationItem.prototype.waitForFontsLoaded=function(){this.renderer&&(this.renderer.globalData.fontManager.isLoaded?this.checkLoaded():setTimeout(this.waitForFontsLoaded.bind(this),20))},AnimationItem.prototype.checkLoaded=function(){if(!this.isLoaded&&this.renderer.globalData.fontManager.isLoaded&&(this.imagePreloader.loadedImages()||this.renderer.rendererType!=="canvas")&&this.imagePreloader.loadedFootages()){this.isLoaded=!0;var r=getExpressionsPlugin();r&&r.initExpressions(this),this.renderer.initItems(),setTimeout((function(){this.trigger("DOMLoaded")}).bind(this),0),this.gotoFrame(),this.autoplay&&this.play()}},AnimationItem.prototype.resize=function(r,e){var t=typeof r=="number"?r:void 0,o=typeof e=="number"?e:void 0;this.renderer.updateContainerSize(t,o)},AnimationItem.prototype.setSubframe=function(r){this.isSubframeEnabled=!!r},AnimationItem.prototype.gotoFrame=function(){this.currentFrame=this.isSubframeEnabled?this.currentRawFrame:~~this.currentRawFrame,this.timeCompleted!==this.totalFrames&&this.currentFrame>this.timeCompleted&&(this.currentFrame=this.timeCompleted),this.trigger("enterFrame"),this.renderFrame(),this.trigger("drawnFrame")},AnimationItem.prototype.renderFrame=function(){if(this.isLoaded!==!1&&this.renderer)try{this.expressionsPlugin&&this.expressionsPlugin.resetFrame(),this.renderer.renderFrame(this.currentFrame+this.firstFrame)}catch(r){this.triggerRenderFrameError(r)}},AnimationItem.prototype.play=function(r){r&&this.name!==r||this.isPaused===!0&&(this.isPaused=!1,this.trigger("_play"),this.audioController.resume(),this._idle&&(this._idle=!1,this.trigger("_active")))},AnimationItem.prototype.pause=function(r){r&&this.name!==r||this.isPaused===!1&&(this.isPaused=!0,this.trigger("_pause"),this._idle=!0,this.trigger("_idle"),this.audioController.pause())},AnimationItem.prototype.togglePause=function(r){r&&this.name!==r||(this.isPaused===!0?this.play():this.pause())},AnimationItem.prototype.stop=function(r){r&&this.name!==r||(this.pause(),this.playCount=0,this._completedLoop=!1,this.setCurrentRawFrameValue(0))},AnimationItem.prototype.getMarkerData=function(r){for(var e,t=0;t<this.markers.length;t+=1)if((e=this.markers[t]).payload&&e.payload.name===r)return e;return null},AnimationItem.prototype.goToAndStop=function(r,e,t){if(!t||this.name===t){var o=Number(r);if(isNaN(o)){var y=this.getMarkerData(r);y&&this.goToAndStop(y.time,!0)}else e?this.setCurrentRawFrameValue(r):this.setCurrentRawFrameValue(r*this.frameModifier);this.pause()}},AnimationItem.prototype.goToAndPlay=function(r,e,t){if(!t||this.name===t){var o=Number(r);if(isNaN(o)){var y=this.getMarkerData(r);y&&(y.duration?this.playSegments([y.time,y.time+y.duration],!0):this.goToAndStop(y.time,!0))}else this.goToAndStop(o,e,t);this.play()}},AnimationItem.prototype.advanceTime=function(r){if(this.isPaused!==!0&&this.isLoaded!==!1){var e=this.currentRawFrame+r*this.frameModifier,t=!1;e>=this.totalFrames-1&&this.frameModifier>0?this.loop&&this.playCount!==this.loop?e>=this.totalFrames?(this.playCount+=1,this.checkSegments(e%this.totalFrames)||(this.setCurrentRawFrameValue(e%this.totalFrames),this._completedLoop=!0,this.trigger("loopComplete"))):this.setCurrentRawFrameValue(e):this.checkSegments(e>this.totalFrames?e%this.totalFrames:0)||(t=!0,e=this.totalFrames-1):e<0?this.checkSegments(e%this.totalFrames)||(!this.loop||this.playCount--<=0&&this.loop!==!0?(t=!0,e=0):(this.setCurrentRawFrameValue(this.totalFrames+e%this.totalFrames),this._completedLoop?this.trigger("loopComplete"):this._completedLoop=!0)):this.setCurrentRawFrameValue(e),t&&(this.setCurrentRawFrameValue(e),this.pause(),this.trigger("complete"))}},AnimationItem.prototype.adjustSegment=function(r,e){this.playCount=0,r[1]<r[0]?(this.frameModifier>0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(-1)),this.totalFrames=r[0]-r[1],this.timeCompleted=this.totalFrames,this.firstFrame=r[1],this.setCurrentRawFrameValue(this.totalFrames-.001-e)):r[1]>r[0]&&(this.frameModifier<0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(1)),this.totalFrames=r[1]-r[0],this.timeCompleted=this.totalFrames,this.firstFrame=r[0],this.setCurrentRawFrameValue(.001+e)),this.trigger("segmentStart")},AnimationItem.prototype.setSegment=function(r,e){var t=-1;this.isPaused&&(this.currentRawFrame+this.firstFrame<r?t=r:this.currentRawFrame+this.firstFrame>e&&(t=e-r)),this.firstFrame=r,this.totalFrames=e-r,this.timeCompleted=this.totalFrames,t!==-1&&this.goToAndStop(t,!0)},AnimationItem.prototype.playSegments=function(r,e){if(e&&(this.segments.length=0),_typeof$4(r[0])==="object"){var t,o=r.length;for(t=0;t<o;t+=1)this.segments.push(r[t])}else this.segments.push(r);this.segments.length&&e&&this.adjustSegment(this.segments.shift(),0),this.isPaused&&this.play()},AnimationItem.prototype.resetSegments=function(r){this.segments.length=0,this.segments.push([this.animationData.ip,this.animationData.op]),r&&this.checkSegments(0)},AnimationItem.prototype.checkSegments=function(r){return!!this.segments.length&&(this.adjustSegment(this.segments.shift(),r),!0)},AnimationItem.prototype.destroy=function(r){r&&this.name!==r||!this.renderer||(this.renderer.destroy(),this.imagePreloader.destroy(),this.trigger("destroy"),this._cbs=null,this.onEnterFrame=null,this.onLoopComplete=null,this.onComplete=null,this.onSegmentStart=null,this.onDestroy=null,this.renderer=null,this.expressionsPlugin=null,this.imagePreloader=null,this.projectInterface=null)},AnimationItem.prototype.setCurrentRawFrameValue=function(r){this.currentRawFrame=r,this.gotoFrame()},AnimationItem.prototype.setSpeed=function(r){this.playSpeed=r,this.updaFrameModifier()},AnimationItem.prototype.setDirection=function(r){this.playDirection=r<0?-1:1,this.updaFrameModifier()},AnimationItem.prototype.setLoop=function(r){this.loop=r},AnimationItem.prototype.setVolume=function(r,e){e&&this.name!==e||this.audioController.setVolume(r)},AnimationItem.prototype.getVolume=function(){return this.audioController.getVolume()},AnimationItem.prototype.mute=function(r){r&&this.name!==r||this.audioController.mute()},AnimationItem.prototype.unmute=function(r){r&&this.name!==r||this.audioController.unmute()},AnimationItem.prototype.updaFrameModifier=function(){this.frameModifier=this.frameMult*this.playSpeed*this.playDirection,this.audioController.setRate(this.playSpeed*this.playDirection)},AnimationItem.prototype.getPath=function(){return this.path},AnimationItem.prototype.getAssetsPath=function(r){var e="";if(r.e)e=r.p;else if(this.assetsPath){var t=r.p;t.indexOf("images/")!==-1&&(t=t.split("/")[1]),e=this.assetsPath+t}else e=this.path,e+=r.u?r.u:"",e+=r.p;return e},AnimationItem.prototype.getAssetData=function(r){for(var e=0,t=this.assets.length;e<t;){if(r===this.assets[e].id)return this.assets[e];e+=1}return null},AnimationItem.prototype.hide=function(){this.renderer.hide()},AnimationItem.prototype.show=function(){this.renderer.show()},AnimationItem.prototype.getDuration=function(r){return r?this.totalFrames:this.totalFrames/this.frameRate},AnimationItem.prototype.updateDocumentData=function(r,e,t){try{this.renderer.getElementByPath(r).updateDocumentData(e,t)}catch{}},AnimationItem.prototype.trigger=function(r){if(this._cbs&&this._cbs[r])switch(r){case"enterFrame":this.triggerEvent(r,new BMEnterFrameEvent(r,this.currentFrame,this.totalFrames,this.frameModifier));break;case"drawnFrame":this.drawnFrameEvent.currentTime=this.currentFrame,this.drawnFrameEvent.totalTime=this.totalFrames,this.drawnFrameEvent.direction=this.frameModifier,this.triggerEvent(r,this.drawnFrameEvent);break;case"loopComplete":this.triggerEvent(r,new BMCompleteLoopEvent(r,this.loop,this.playCount,this.frameMult));break;case"complete":this.triggerEvent(r,new BMCompleteEvent(r,this.frameMult));break;case"segmentStart":this.triggerEvent(r,new BMSegmentStartEvent(r,this.firstFrame,this.totalFrames));break;case"destroy":this.triggerEvent(r,new BMDestroyEvent(r,this));break;default:this.triggerEvent(r)}r==="enterFrame"&&this.onEnterFrame&&this.onEnterFrame.call(this,new BMEnterFrameEvent(r,this.currentFrame,this.totalFrames,this.frameMult)),r==="loopComplete"&&this.onLoopComplete&&this.onLoopComplete.call(this,new BMCompleteLoopEvent(r,this.loop,this.playCount,this.frameMult)),r==="complete"&&this.onComplete&&this.onComplete.call(this,new BMCompleteEvent(r,this.frameMult)),r==="segmentStart"&&this.onSegmentStart&&this.onSegmentStart.call(this,new BMSegmentStartEvent(r,this.firstFrame,this.totalFrames)),r==="destroy"&&this.onDestroy&&this.onDestroy.call(this,new BMDestroyEvent(r,this))},AnimationItem.prototype.triggerRenderFrameError=function(r){var e=new BMRenderFrameErrorEvent(r,this.currentFrame);this.triggerEvent("error",e),this.onError&&this.onError.call(this,e)},AnimationItem.prototype.triggerConfigError=function(r){var e=new BMConfigErrorEvent(r,this.currentFrame);this.triggerEvent("error",e),this.onError&&this.onError.call(this,e)};var animationManager=function(){var r={},e=[],t=0,o=0,y=0,R=!0,G=!1;function K(ce){for(var oe=0,ue=ce.target;oe<o;)e[oe].animation===ue&&(e.splice(oe,1),oe-=1,o-=1,ue.isPaused||ee()),oe+=1}function Y(ce,oe){if(!ce)return null;for(var ue=0;ue<o;){if(e[ue].elem===ce&&e[ue].elem!==null)return e[ue].animation;ue+=1}var ge=new AnimationItem;return ie(ge,ce),ge.setData(ce,oe),ge}function Q(){y+=1,le()}function ee(){y-=1}function ie(ce,oe){ce.addEventListener("destroy",K),ce.addEventListener("_active",Q),ce.addEventListener("_idle",ee),e.push({elem:oe,animation:ce}),o+=1}function re(ce){var oe,ue=ce-t;for(oe=0;oe<o;oe+=1)e[oe].animation.advanceTime(ue);t=ce,y&&!G?window.requestAnimationFrame(re):R=!0}function se(ce){t=ce,window.requestAnimationFrame(re)}function le(){!G&&y&&R&&(window.requestAnimationFrame(se),R=!1)}return r.registerAnimation=Y,r.loadAnimation=function(ce){var oe=new AnimationItem;return ie(oe,null),oe.setParams(ce),oe},r.setSpeed=function(ce,oe){var ue;for(ue=0;ue<o;ue+=1)e[ue].animation.setSpeed(ce,oe)},r.setDirection=function(ce,oe){var ue;for(ue=0;ue<o;ue+=1)e[ue].animation.setDirection(ce,oe)},r.play=function(ce){var oe;for(oe=0;oe<o;oe+=1)e[oe].animation.play(ce)},r.pause=function(ce){var oe;for(oe=0;oe<o;oe+=1)e[oe].animation.pause(ce)},r.stop=function(ce){var oe;for(oe=0;oe<o;oe+=1)e[oe].animation.stop(ce)},r.togglePause=function(ce){var oe;for(oe=0;oe<o;oe+=1)e[oe].animation.togglePause(ce)},r.searchAnimations=function(ce,oe,ue){var ge,ve=[].concat([].slice.call(document.getElementsByClassName("lottie")),[].slice.call(document.getElementsByClassName("bodymovin"))),_e=ve.length;for(ge=0;ge<_e;ge+=1)ue&&ve[ge].setAttribute("data-bm-type",ue),Y(ve[ge],ce);if(oe&&_e===0){ue||(ue="svg");var be=document.getElementsByTagName("body")[0];be.innerText="";var Re=createTag("div");Re.style.width="100%",Re.style.height="100%",Re.setAttribute("data-bm-type",ue),be.appendChild(Re),Y(Re,ce)}},r.resize=function(){var ce;for(ce=0;ce<o;ce+=1)e[ce].animation.resize()},r.goToAndStop=function(ce,oe,ue){var ge;for(ge=0;ge<o;ge+=1)e[ge].animation.goToAndStop(ce,oe,ue)},r.destroy=function(ce){var oe;for(oe=o-1;oe>=0;oe-=1)e[oe].animation.destroy(ce)},r.freeze=function(){G=!0},r.unfreeze=function(){G=!1,le()},r.setVolume=function(ce,oe){var ue;for(ue=0;ue<o;ue+=1)e[ue].animation.setVolume(ce,oe)},r.mute=function(ce){var oe;for(oe=0;oe<o;oe+=1)e[oe].animation.mute(ce)},r.unmute=function(ce){var oe;for(oe=0;oe<o;oe+=1)e[oe].animation.unmute(ce)},r.getRegisteredAnimations=function(){var ce,oe=e.length,ue=[];for(ce=0;ce<oe;ce+=1)ue.push(e[ce].animation);return ue},r}(),BezierFactory=function(){var r={getBezierEasing:function(ee,ie,re,se,le){var ce=le||("bez_"+ee+"_"+ie+"_"+re+"_"+se).replace(/\./g,"p");if(e[ce])return e[ce];var oe=new Q([ee,ie,re,se]);return e[ce]=oe,oe}},e={},t=.1,o=typeof Float32Array=="function";function y(ee,ie){return 1-3*ie+3*ee}function R(ee,ie){return 3*ie-6*ee}function G(ee){return 3*ee}function K(ee,ie,re){return((y(ie,re)*ee+R(ie,re))*ee+G(ie))*ee}function Y(ee,ie,re){return 3*y(ie,re)*ee*ee+2*R(ie,re)*ee+G(ie)}function Q(ee){this._p=ee,this._mSampleValues=o?new Float32Array(11):new Array(11),this._precomputed=!1,this.get=this.get.bind(this)}return Q.prototype={get:function(ee){var ie=this._p[0],re=this._p[1],se=this._p[2],le=this._p[3];return this._precomputed||this._precompute(),ie===re&&se===le?ee:ee===0?0:ee===1?1:K(this._getTForX(ee),re,le)},_precompute:function(){var ee=this._p[0],ie=this._p[1],re=this._p[2],se=this._p[3];this._precomputed=!0,ee===ie&&re===se||this._calcSampleValues()},_calcSampleValues:function(){for(var ee=this._p[0],ie=this._p[2],re=0;re<11;++re)this._mSampleValues[re]=K(re*t,ee,ie)},_getTForX:function(ee){for(var ie=this._p[0],re=this._p[2],se=this._mSampleValues,le=0,ce=1;ce!==10&&se[ce]<=ee;++ce)le+=t;var oe=le+(ee-se[--ce])/(se[ce+1]-se[ce])*t,ue=Y(oe,ie,re);return ue>=.001?function(ge,ve,_e,be){for(var Re=0;Re<4;++Re){var Se=Y(ve,_e,be);if(Se===0)return ve;ve-=(K(ve,_e,be)-ge)/Se}return ve}(ee,oe,ie,re):ue===0?oe:function(ge,ve,_e,be,Re){var Se,Ee,ye=0;do(Se=K(Ee=ve+(_e-ve)/2,be,Re)-ge)>0?_e=Ee:ve=Ee;while(Math.abs(Se)>1e-7&&++ye<10);return Ee}(ee,le,le+t,ie,re)}},r}(),pooling={double:function(r){return r.concat(createSizedArray(r.length))}},poolFactory=function(r,e,t){var o=0,y=r,R=createSizedArray(y);return{newElement:function(){return o?R[o-=1]:e()},release:function(G){o===y&&(R=pooling.double(R),y*=2),t&&t(G),R[o]=G,o+=1}}},bezierLengthPool=poolFactory(8,function(){return{addedLength:0,percents:createTypedArray("float32",getDefaultCurveSegments()),lengths:createTypedArray("float32",getDefaultCurveSegments())}}),segmentsLengthPool=poolFactory(8,function(){return{lengths:[],totalLength:0}},function(r){var e,t=r.lengths.length;for(e=0;e<t;e+=1)bezierLengthPool.release(r.lengths[e]);r.lengths.length=0});function bezFunction(){var r=Math;function e(Q,ee,ie,re,se,le){var ce=Q*re+ee*se+ie*le-se*re-le*Q-ie*ee;return ce>-.001&&ce<.001}var t=function(Q,ee,ie,re){var se,le,ce,oe,ue,ge,ve=getDefaultCurveSegments(),_e=0,be=[],Re=[],Se=bezierLengthPool.newElement();for(ce=ie.length,se=0;se<ve;se+=1){for(ue=se/(ve-1),ge=0,le=0;le<ce;le+=1)oe=bmPow(1-ue,3)*Q[le]+3*bmPow(1-ue,2)*ue*ie[le]+3*(1-ue)*bmPow(ue,2)*re[le]+bmPow(ue,3)*ee[le],be[le]=oe,Re[le]!==null&&(ge+=bmPow(be[le]-Re[le],2)),Re[le]=be[le];ge&&(_e+=ge=bmSqrt(ge)),Se.percents[se]=ue,Se.lengths[se]=_e}return Se.addedLength=_e,Se};function o(Q){this.segmentLength=0,this.points=new Array(Q)}function y(Q,ee){this.partialLength=Q,this.point=ee}var R,G=(R={},function(Q,ee,ie,re){var se=(Q[0]+"_"+Q[1]+"_"+ee[0]+"_"+ee[1]+"_"+ie[0]+"_"+ie[1]+"_"+re[0]+"_"+re[1]).replace(/\./g,"p");if(!R[se]){var le,ce,oe,ue,ge,ve,_e,be=getDefaultCurveSegments(),Re=0,Se=null;Q.length===2&&(Q[0]!==ee[0]||Q[1]!==ee[1])&&e(Q[0],Q[1],ee[0],ee[1],Q[0]+ie[0],Q[1]+ie[1])&&e(Q[0],Q[1],ee[0],ee[1],ee[0]+re[0],ee[1]+re[1])&&(be=2);var Ee=new o(be);for(oe=ie.length,le=0;le<be;le+=1){for(_e=createSizedArray(oe),ge=le/(be-1),ve=0,ce=0;ce<oe;ce+=1)ue=bmPow(1-ge,3)*Q[ce]+3*bmPow(1-ge,2)*ge*(Q[ce]+ie[ce])+3*(1-ge)*bmPow(ge,2)*(ee[ce]+re[ce])+bmPow(ge,3)*ee[ce],_e[ce]=ue,Se!==null&&(ve+=bmPow(_e[ce]-Se[ce],2));Re+=ve=bmSqrt(ve),Ee.points[le]=new y(ve,_e),Se=_e}Ee.segmentLength=Re,R[se]=Ee}return R[se]});function K(Q,ee){var ie=ee.percents,re=ee.lengths,se=ie.length,le=bmFloor((se-1)*Q),ce=Q*ee.addedLength,oe=0;if(le===se-1||le===0||ce===re[le])return ie[le];for(var ue=re[le]>ce?-1:1,ge=!0;ge;)if(re[le]<=ce&&re[le+1]>ce?(oe=(ce-re[le])/(re[le+1]-re[le]),ge=!1):le+=ue,le<0||le>=se-1){if(le===se-1)return ie[le];ge=!1}return ie[le]+(ie[le+1]-ie[le])*oe}var Y=createTypedArray("float32",8);return{getSegmentsLength:function(Q){var ee,ie=segmentsLengthPool.newElement(),re=Q.c,se=Q.v,le=Q.o,ce=Q.i,oe=Q._length,ue=ie.lengths,ge=0;for(ee=0;ee<oe-1;ee+=1)ue[ee]=t(se[ee],se[ee+1],le[ee],ce[ee+1]),ge+=ue[ee].addedLength;return re&&oe&&(ue[ee]=t(se[ee],se[0],le[ee],ce[0]),ge+=ue[ee].addedLength),ie.totalLength=ge,ie},getNewSegment:function(Q,ee,ie,re,se,le,ce){se<0?se=0:se>1&&(se=1);var oe,ue=K(se,ce),ge=K(le=le>1?1:le,ce),ve=Q.length,_e=1-ue,be=1-ge,Re=_e*_e*_e,Se=ue*_e*_e*3,Ee=ue*ue*_e*3,ye=ue*ue*ue,de=_e*_e*be,Me=ue*_e*be+_e*ue*be+_e*_e*ge,Le=ue*ue*be+_e*ue*ge+ue*_e*ge,Pe=ue*ue*ge,Ue=_e*be*be,$e=ue*be*be+_e*ge*be+_e*be*ge,Ve=ue*ge*be+_e*ge*ge+ue*be*ge,Ce=ue*ge*ge,De=be*be*be,Oe=ge*be*be+be*ge*be+be*be*ge,Te=ge*ge*be+be*ge*ge+ge*be*ge,Ne=ge*ge*ge;for(oe=0;oe<ve;oe+=1)Y[4*oe]=r.round(1e3*(Re*Q[oe]+Se*ie[oe]+Ee*re[oe]+ye*ee[oe]))/1e3,Y[4*oe+1]=r.round(1e3*(de*Q[oe]+Me*ie[oe]+Le*re[oe]+Pe*ee[oe]))/1e3,Y[4*oe+2]=r.round(1e3*(Ue*Q[oe]+$e*ie[oe]+Ve*re[oe]+Ce*ee[oe]))/1e3,Y[4*oe+3]=r.round(1e3*(De*Q[oe]+Oe*ie[oe]+Te*re[oe]+Ne*ee[oe]))/1e3;return Y},getPointInSegment:function(Q,ee,ie,re,se,le){var ce=K(se,le),oe=1-ce;return[r.round(1e3*(oe*oe*oe*Q[0]+(ce*oe*oe+oe*ce*oe+oe*oe*ce)*ie[0]+(ce*ce*oe+oe*ce*ce+ce*oe*ce)*re[0]+ce*ce*ce*ee[0]))/1e3,r.round(1e3*(oe*oe*oe*Q[1]+(ce*oe*oe+oe*ce*oe+oe*oe*ce)*ie[1]+(ce*ce*oe+oe*ce*ce+ce*oe*ce)*re[1]+ce*ce*ce*ee[1]))/1e3]},buildBezierData:G,pointOnLine2D:e,pointOnLine3D:function(Q,ee,ie,re,se,le,ce,oe,ue){if(ie===0&&le===0&&ue===0)return e(Q,ee,re,se,ce,oe);var ge,ve=r.sqrt(r.pow(re-Q,2)+r.pow(se-ee,2)+r.pow(le-ie,2)),_e=r.sqrt(r.pow(ce-Q,2)+r.pow(oe-ee,2)+r.pow(ue-ie,2)),be=r.sqrt(r.pow(ce-re,2)+r.pow(oe-se,2)+r.pow(ue-le,2));return(ge=ve>_e?ve>be?ve-_e-be:be-_e-ve:be>_e?be-_e-ve:_e-ve-be)>-1e-4&&ge<1e-4}}}var bez=bezFunction(),initFrame=initialDefaultFrame,mathAbs=Math.abs;function interpolateValue(r,e){var t,o=this.offsetTime;this.propType==="multidimensional"&&(t=createTypedArray("float32",this.pv.length));for(var y,R,G,K,Y,Q,ee,ie,re,se=e.lastIndex,le=se,ce=this.keyframes.length-1,oe=!0;oe;){if(y=this.keyframes[le],R=this.keyframes[le+1],le===ce-1&&r>=R.t-o){y.h&&(y=R),se=0;break}if(R.t-o>r){se=le;break}le<ce-1?le+=1:(se=0,oe=!1)}G=this.keyframesMetadata[le]||{};var ue,ge=R.t-o,ve=y.t-o;if(y.to){G.bezierData||(G.bezierData=bez.buildBezierData(y.s,R.s||y.e,y.to,y.ti));var _e=G.bezierData;if(r>=ge||r<ve){var be=r>=ge?_e.points.length-1:0;for(Y=_e.points[be].point.length,K=0;K<Y;K+=1)t[K]=_e.points[be].point[K]}else{G.__fnct?re=G.__fnct:(re=BezierFactory.getBezierEasing(y.o.x,y.o.y,y.i.x,y.i.y,y.n).get,G.__fnct=re),Q=re((r-ve)/(ge-ve));var Re,Se=_e.segmentLength*Q,Ee=e.lastFrame<r&&e._lastKeyframeIndex===le?e._lastAddedLength:0;for(ie=e.lastFrame<r&&e._lastKeyframeIndex===le?e._lastPoint:0,oe=!0,ee=_e.points.length;oe;){if(Ee+=_e.points[ie].partialLength,Se===0||Q===0||ie===_e.points.length-1){for(Y=_e.points[ie].point.length,K=0;K<Y;K+=1)t[K]=_e.points[ie].point[K];break}if(Se>=Ee&&Se<Ee+_e.points[ie+1].partialLength){for(Re=(Se-Ee)/_e.points[ie+1].partialLength,Y=_e.points[ie].point.length,K=0;K<Y;K+=1)t[K]=_e.points[ie].point[K]+(_e.points[ie+1].point[K]-_e.points[ie].point[K])*Re;break}ie<ee-1?ie+=1:oe=!1}e._lastPoint=ie,e._lastAddedLength=Ee-_e.points[ie].partialLength,e._lastKeyframeIndex=le}}else{var ye,de,Me,Le,Pe;if(ce=y.s.length,ue=R.s||y.e,this.sh&&y.h!==1)r>=ge?(t[0]=ue[0],t[1]=ue[1],t[2]=ue[2]):r<=ve?(t[0]=y.s[0],t[1]=y.s[1],t[2]=y.s[2]):quaternionToEuler(t,slerp(createQuaternion(y.s),createQuaternion(ue),(r-ve)/(ge-ve)));else for(le=0;le<ce;le+=1)y.h!==1&&(r>=ge?Q=1:r<ve?Q=0:(y.o.x.constructor===Array?(G.__fnct||(G.__fnct=[]),G.__fnct[le]?re=G.__fnct[le]:(ye=y.o.x[le]===void 0?y.o.x[0]:y.o.x[le],de=y.o.y[le]===void 0?y.o.y[0]:y.o.y[le],Me=y.i.x[le]===void 0?y.i.x[0]:y.i.x[le],Le=y.i.y[le]===void 0?y.i.y[0]:y.i.y[le],re=BezierFactory.getBezierEasing(ye,de,Me,Le).get,G.__fnct[le]=re)):G.__fnct?re=G.__fnct:(ye=y.o.x,de=y.o.y,Me=y.i.x,Le=y.i.y,re=BezierFactory.getBezierEasing(ye,de,Me,Le).get,y.keyframeMetadata=re),Q=re((r-ve)/(ge-ve)))),ue=R.s||y.e,Pe=y.h===1?y.s[le]:y.s[le]+(ue[le]-y.s[le])*Q,this.propType==="multidimensional"?t[le]=Pe:t=Pe}return e.lastIndex=se,t}function slerp(r,e,t){var o,y,R,G,K,Y=[],Q=r[0],ee=r[1],ie=r[2],re=r[3],se=e[0],le=e[1],ce=e[2],oe=e[3];return(y=Q*se+ee*le+ie*ce+re*oe)<0&&(y=-y,se=-se,le=-le,ce=-ce,oe=-oe),1-y>1e-6?(o=Math.acos(y),R=Math.sin(o),G=Math.sin((1-t)*o)/R,K=Math.sin(t*o)/R):(G=1-t,K=t),Y[0]=G*Q+K*se,Y[1]=G*ee+K*le,Y[2]=G*ie+K*ce,Y[3]=G*re+K*oe,Y}function quaternionToEuler(r,e){var t=e[0],o=e[1],y=e[2],R=e[3],G=Math.atan2(2*o*R-2*t*y,1-2*o*o-2*y*y),K=Math.asin(2*t*o+2*y*R),Y=Math.atan2(2*t*R-2*o*y,1-2*t*t-2*y*y);r[0]=G/degToRads,r[1]=K/degToRads,r[2]=Y/degToRads}function createQuaternion(r){var e=r[0]*degToRads,t=r[1]*degToRads,o=r[2]*degToRads,y=Math.cos(e/2),R=Math.cos(t/2),G=Math.cos(o/2),K=Math.sin(e/2),Y=Math.sin(t/2),Q=Math.sin(o/2);return[K*Y*G+y*R*Q,K*R*G+y*Y*Q,y*Y*G-K*R*Q,y*R*G-K*Y*Q]}function getValueAtCurrentTime(){var r=this.comp.renderedFrame-this.offsetTime,e=this.keyframes[0].t-this.offsetTime,t=this.keyframes[this.keyframes.length-1].t-this.offsetTime;if(!(r===this._caching.lastFrame||this._caching.lastFrame!==initFrame&&(this._caching.lastFrame>=t&&r>=t||this._caching.lastFrame<e&&r<e))){this._caching.lastFrame>=r&&(this._caching._lastKeyframeIndex=-1,this._caching.lastIndex=0);var o=this.interpolateValue(r,this._caching);this.pv=o}return this._caching.lastFrame=r,this.pv}function setVValue(r){var e;if(this.propType==="unidimensional")e=r*this.mult,mathAbs(this.v-e)>1e-5&&(this.v=e,this._mdf=!0);else for(var t=0,o=this.v.length;t<o;)e=r[t]*this.mult,mathAbs(this.v[t]-e)>1e-5&&(this.v[t]=e,this._mdf=!0),t+=1}function processEffectsSequence(){if(this.elem.globalData.frameId!==this.frameId&&this.effectsSequence.length)if(this.lock)this.setVValue(this.pv);else{var r;this.lock=!0,this._mdf=this._isFirstFrame;var e=this.effectsSequence.length,t=this.kf?this.pv:this.data.k;for(r=0;r<e;r+=1)t=this.effectsSequence[r](t);this.setVValue(t),this._isFirstFrame=!1,this.lock=!1,this.frameId=this.elem.globalData.frameId}}function addEffect(r){this.effectsSequence.push(r),this.container.addDynamicProperty(this)}function ValueProperty(r,e,t,o){this.propType="unidimensional",this.mult=t||1,this.data=e,this.v=t?e.k*t:e.k,this.pv=e.k,this._mdf=!1,this.elem=r,this.container=o,this.comp=r.comp,this.k=!1,this.kf=!1,this.vel=0,this.effectsSequence=[],this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function MultiDimensionalProperty(r,e,t,o){var y;this.propType="multidimensional",this.mult=t||1,this.data=e,this._mdf=!1,this.elem=r,this.container=o,this.comp=r.comp,this.k=!1,this.kf=!1,this.frameId=-1;var R=e.k.length;for(this.v=createTypedArray("float32",R),this.pv=createTypedArray("float32",R),this.vel=createTypedArray("float32",R),y=0;y<R;y+=1)this.v[y]=e.k[y]*this.mult,this.pv[y]=e.k[y];this._isFirstFrame=!0,this.effectsSequence=[],this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function KeyframedValueProperty(r,e,t,o){this.propType="unidimensional",this.keyframes=e.k,this.keyframesMetadata=[],this.offsetTime=r.data.st,this.frameId=-1,this._caching={lastFrame:initFrame,lastIndex:0,value:0,_lastKeyframeIndex:-1},this.k=!0,this.kf=!0,this.data=e,this.mult=t||1,this.elem=r,this.container=o,this.comp=r.comp,this.v=initFrame,this.pv=initFrame,this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.addEffect=addEffect}function KeyframedMultidimensionalProperty(r,e,t,o){var y;this.propType="multidimensional";var R,G,K,Y,Q=e.k.length;for(y=0;y<Q-1;y+=1)e.k[y].to&&e.k[y].s&&e.k[y+1]&&e.k[y+1].s&&(R=e.k[y].s,G=e.k[y+1].s,K=e.k[y].to,Y=e.k[y].ti,(R.length===2&&(R[0]!==G[0]||R[1]!==G[1])&&bez.pointOnLine2D(R[0],R[1],G[0],G[1],R[0]+K[0],R[1]+K[1])&&bez.pointOnLine2D(R[0],R[1],G[0],G[1],G[0]+Y[0],G[1]+Y[1])||R.length===3&&(R[0]!==G[0]||R[1]!==G[1]||R[2]!==G[2])&&bez.pointOnLine3D(R[0],R[1],R[2],G[0],G[1],G[2],R[0]+K[0],R[1]+K[1],R[2]+K[2])&&bez.pointOnLine3D(R[0],R[1],R[2],G[0],G[1],G[2],G[0]+Y[0],G[1]+Y[1],G[2]+Y[2]))&&(e.k[y].to=null,e.k[y].ti=null),R[0]===G[0]&&R[1]===G[1]&&K[0]===0&&K[1]===0&&Y[0]===0&&Y[1]===0&&(R.length===2||R[2]===G[2]&&K[2]===0&&Y[2]===0)&&(e.k[y].to=null,e.k[y].ti=null));this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.data=e,this.keyframes=e.k,this.keyframesMetadata=[],this.offsetTime=r.data.st,this.k=!0,this.kf=!0,this._isFirstFrame=!0,this.mult=t||1,this.elem=r,this.container=o,this.comp=r.comp,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.frameId=-1;var ee=e.k[0].s.length;for(this.v=createTypedArray("float32",ee),this.pv=createTypedArray("float32",ee),y=0;y<ee;y+=1)this.v[y]=initFrame,this.pv[y]=initFrame;this._caching={lastFrame:initFrame,lastIndex:0,value:createTypedArray("float32",ee)},this.addEffect=addEffect}var PropertyFactory=(ob={getProp:function(r,e,t,o,y){var R;if(e.sid&&(e=r.globalData.slotManager.getProp(e)),e.k.length)if(typeof e.k[0]=="number")R=new MultiDimensionalProperty(r,e,o,y);else switch(t){case 0:R=new KeyframedValueProperty(r,e,o,y);break;case 1:R=new KeyframedMultidimensionalProperty(r,e,o,y)}else R=new ValueProperty(r,e,o,y);return R.effectsSequence.length&&y.addDynamicProperty(R),R}},ob),ob;function DynamicPropertyContainer(){}DynamicPropertyContainer.prototype={addDynamicProperty:function(r){this.dynamicProperties.indexOf(r)===-1&&(this.dynamicProperties.push(r),this.container.addDynamicProperty(this),this._isAnimated=!0)},iterateDynamicProperties:function(){var r;this._mdf=!1;var e=this.dynamicProperties.length;for(r=0;r<e;r+=1)this.dynamicProperties[r].getValue(),this.dynamicProperties[r]._mdf&&(this._mdf=!0)},initDynamicPropertyContainer:function(r){this.container=r,this.dynamicProperties=[],this._mdf=!1,this._isAnimated=!1}};var pointPool=poolFactory(8,function(){return createTypedArray("float32",2)});function ShapePath(){this.c=!1,this._length=0,this._maxLength=8,this.v=createSizedArray(this._maxLength),this.o=createSizedArray(this._maxLength),this.i=createSizedArray(this._maxLength)}ShapePath.prototype.setPathData=function(r,e){this.c=r,this.setLength(e);for(var t=0;t<e;)this.v[t]=pointPool.newElement(),this.o[t]=pointPool.newElement(),this.i[t]=pointPool.newElement(),t+=1},ShapePath.prototype.setLength=function(r){for(;this._maxLength<r;)this.doubleArrayLength();this._length=r},ShapePath.prototype.doubleArrayLength=function(){this.v=this.v.concat(createSizedArray(this._maxLength)),this.i=this.i.concat(createSizedArray(this._maxLength)),this.o=this.o.concat(createSizedArray(this._maxLength)),this._maxLength*=2},ShapePath.prototype.setXYAt=function(r,e,t,o,y){var R;switch(this._length=Math.max(this._length,o+1),this._length>=this._maxLength&&this.doubleArrayLength(),t){case"v":R=this.v;break;case"i":R=this.i;break;case"o":R=this.o;break;default:R=[]}(!R[o]||R[o]&&!y)&&(R[o]=pointPool.newElement()),R[o][0]=r,R[o][1]=e},ShapePath.prototype.setTripleAt=function(r,e,t,o,y,R,G,K){this.setXYAt(r,e,"v",G,K),this.setXYAt(t,o,"o",G,K),this.setXYAt(y,R,"i",G,K)},ShapePath.prototype.reverse=function(){var r=new ShapePath;r.setPathData(this.c,this._length);var e=this.v,t=this.o,o=this.i,y=0;this.c&&(r.setTripleAt(e[0][0],e[0][1],o[0][0],o[0][1],t[0][0],t[0][1],0,!1),y=1);var R,G=this._length-1,K=this._length;for(R=y;R<K;R+=1)r.setTripleAt(e[G][0],e[G][1],o[G][0],o[G][1],t[G][0],t[G][1],R,!1),G-=1;return r},ShapePath.prototype.length=function(){return this._length};var shapePool=(factory=poolFactory(4,function(){return new ShapePath},function(r){var e,t=r._length;for(e=0;e<t;e+=1)pointPool.release(r.v[e]),pointPool.release(r.i[e]),pointPool.release(r.o[e]),r.v[e]=null,r.i[e]=null,r.o[e]=null;r._length=0,r.c=!1}),factory.clone=function(r){var e,t=factory.newElement(),o=r._length===void 0?r.v.length:r._length;for(t.setLength(o),t.c=r.c,e=0;e<o;e+=1)t.setTripleAt(r.v[e][0],r.v[e][1],r.o[e][0],r.o[e][1],r.i[e][0],r.i[e][1],e);return t},factory),factory;function ShapeCollection(){this._length=0,this._maxLength=4,this.shapes=createSizedArray(this._maxLength)}ShapeCollection.prototype.addShape=function(r){this._length===this._maxLength&&(this.shapes=this.shapes.concat(createSizedArray(this._maxLength)),this._maxLength*=2),this.shapes[this._length]=r,this._length+=1},ShapeCollection.prototype.releaseShapes=function(){var r;for(r=0;r<this._length;r+=1)shapePool.release(this.shapes[r]);this._length=0};var shapeCollectionPool=function(){var r={newShapeCollection:function(){return e?o[e-=1]:new ShapeCollection},release:function(y){var R,G=y._length;for(R=0;R<G;R+=1)shapePool.release(y.shapes[R]);y._length=0,e===t&&(o=pooling.double(o),t*=2),o[e]=y,e+=1}},e=0,t=4,o=createSizedArray(t);return r}(),ShapePropertyFactory=function(){var r=-999999;function e(se,le,ce){var oe,ue,ge,ve,_e,be,Re,Se,Ee,ye=ce.lastIndex,de=this.keyframes;if(se<de[0].t-this.offsetTime)oe=de[0].s[0],ge=!0,ye=0;else if(se>=de[de.length-1].t-this.offsetTime)oe=de[de.length-1].s?de[de.length-1].s[0]:de[de.length-2].e[0],ge=!0;else{for(var Me,Le,Pe,Ue=ye,$e=de.length-1,Ve=!0;Ve&&(Me=de[Ue],!((Le=de[Ue+1]).t-this.offsetTime>se));)Ue<$e-1?Ue+=1:Ve=!1;if(Pe=this.keyframesMetadata[Ue]||{},ye=Ue,!(ge=Me.h===1)){if(se>=Le.t-this.offsetTime)Se=1;else if(se<Me.t-this.offsetTime)Se=0;else{var Ce;Pe.__fnct?Ce=Pe.__fnct:(Ce=BezierFactory.getBezierEasing(Me.o.x,Me.o.y,Me.i.x,Me.i.y).get,Pe.__fnct=Ce),Se=Ce((se-(Me.t-this.offsetTime))/(Le.t-this.offsetTime-(Me.t-this.offsetTime)))}ue=Le.s?Le.s[0]:Me.e[0]}oe=Me.s[0]}for(be=le._length,Re=oe.i[0].length,ce.lastIndex=ye,ve=0;ve<be;ve+=1)for(_e=0;_e<Re;_e+=1)Ee=ge?oe.i[ve][_e]:oe.i[ve][_e]+(ue.i[ve][_e]-oe.i[ve][_e])*Se,le.i[ve][_e]=Ee,Ee=ge?oe.o[ve][_e]:oe.o[ve][_e]+(ue.o[ve][_e]-oe.o[ve][_e])*Se,le.o[ve][_e]=Ee,Ee=ge?oe.v[ve][_e]:oe.v[ve][_e]+(ue.v[ve][_e]-oe.v[ve][_e])*Se,le.v[ve][_e]=Ee}function t(){var se=this.comp.renderedFrame-this.offsetTime,le=this.keyframes[0].t-this.offsetTime,ce=this.keyframes[this.keyframes.length-1].t-this.offsetTime,oe=this._caching.lastFrame;return oe!==r&&(oe<le&&se<le||oe>ce&&se>ce)||(this._caching.lastIndex=oe<se?this._caching.lastIndex:0,this.interpolateShape(se,this.pv,this._caching)),this._caching.lastFrame=se,this.pv}function o(){this.paths=this.localShapeCollection}function y(se){(function(le,ce){if(le._length!==ce._length||le.c!==ce.c)return!1;var oe,ue=le._length;for(oe=0;oe<ue;oe+=1)if(le.v[oe][0]!==ce.v[oe][0]||le.v[oe][1]!==ce.v[oe][1]||le.o[oe][0]!==ce.o[oe][0]||le.o[oe][1]!==ce.o[oe][1]||le.i[oe][0]!==ce.i[oe][0]||le.i[oe][1]!==ce.i[oe][1])return!1;return!0})(this.v,se)||(this.v=shapePool.clone(se),this.localShapeCollection.releaseShapes(),this.localShapeCollection.addShape(this.v),this._mdf=!0,this.paths=this.localShapeCollection)}function R(){if(this.elem.globalData.frameId!==this.frameId)if(this.effectsSequence.length)if(this.lock)this.setVValue(this.pv);else{var se,le;this.lock=!0,this._mdf=!1,se=this.kf?this.pv:this.data.ks?this.data.ks.k:this.data.pt.k;var ce=this.effectsSequence.length;for(le=0;le<ce;le+=1)se=this.effectsSequence[le](se);this.setVValue(se),this.lock=!1,this.frameId=this.elem.globalData.frameId}else this._mdf=!1}function G(se,le,ce){this.propType="shape",this.comp=se.comp,this.container=se,this.elem=se,this.data=le,this.k=!1,this.kf=!1,this._mdf=!1;var oe=ce===3?le.pt.k:le.ks.k;this.v=shapePool.clone(oe),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.reset=o,this.effectsSequence=[]}function K(se){this.effectsSequence.push(se),this.container.addDynamicProperty(this)}function Y(se,le,ce){this.propType="shape",this.comp=se.comp,this.elem=se,this.container=se,this.offsetTime=se.data.st,this.keyframes=ce===3?le.pt.k:le.ks.k,this.keyframesMetadata=[],this.k=!0,this.kf=!0;var oe=this.keyframes[0].s[0].i.length;this.v=shapePool.newElement(),this.v.setPathData(this.keyframes[0].s[0].c,oe),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.lastFrame=r,this.reset=o,this._caching={lastFrame:r,lastIndex:0},this.effectsSequence=[t.bind(this)]}G.prototype.interpolateShape=e,G.prototype.getValue=R,G.prototype.setVValue=y,G.prototype.addEffect=K,Y.prototype.getValue=R,Y.prototype.interpolateShape=e,Y.prototype.setVValue=y,Y.prototype.addEffect=K;var Q=function(){var se=roundCorner;function le(ce,oe){this.v=shapePool.newElement(),this.v.setPathData(!0,4),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.localShapeCollection.addShape(this.v),this.d=oe.d,this.elem=ce,this.comp=ce.comp,this.frameId=-1,this.initDynamicPropertyContainer(ce),this.p=PropertyFactory.getProp(ce,oe.p,1,0,this),this.s=PropertyFactory.getProp(ce,oe.s,1,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertEllToPath())}return le.prototype={reset:o,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertEllToPath())},convertEllToPath:function(){var ce=this.p.v[0],oe=this.p.v[1],ue=this.s.v[0]/2,ge=this.s.v[1]/2,ve=this.d!==3,_e=this.v;_e.v[0][0]=ce,_e.v[0][1]=oe-ge,_e.v[1][0]=ve?ce+ue:ce-ue,_e.v[1][1]=oe,_e.v[2][0]=ce,_e.v[2][1]=oe+ge,_e.v[3][0]=ve?ce-ue:ce+ue,_e.v[3][1]=oe,_e.i[0][0]=ve?ce-ue*se:ce+ue*se,_e.i[0][1]=oe-ge,_e.i[1][0]=ve?ce+ue:ce-ue,_e.i[1][1]=oe-ge*se,_e.i[2][0]=ve?ce+ue*se:ce-ue*se,_e.i[2][1]=oe+ge,_e.i[3][0]=ve?ce-ue:ce+ue,_e.i[3][1]=oe+ge*se,_e.o[0][0]=ve?ce+ue*se:ce-ue*se,_e.o[0][1]=oe-ge,_e.o[1][0]=ve?ce+ue:ce-ue,_e.o[1][1]=oe+ge*se,_e.o[2][0]=ve?ce-ue*se:ce+ue*se,_e.o[2][1]=oe+ge,_e.o[3][0]=ve?ce-ue:ce+ue,_e.o[3][1]=oe-ge*se}},extendPrototype([DynamicPropertyContainer],le),le}(),ee=function(){function se(le,ce){this.v=shapePool.newElement(),this.v.setPathData(!0,0),this.elem=le,this.comp=le.comp,this.data=ce,this.frameId=-1,this.d=ce.d,this.initDynamicPropertyContainer(le),ce.sy===1?(this.ir=PropertyFactory.getProp(le,ce.ir,0,0,this),this.is=PropertyFactory.getProp(le,ce.is,0,.01,this),this.convertToPath=this.convertStarToPath):this.convertToPath=this.convertPolygonToPath,this.pt=PropertyFactory.getProp(le,ce.pt,0,0,this),this.p=PropertyFactory.getProp(le,ce.p,1,0,this),this.r=PropertyFactory.getProp(le,ce.r,0,degToRads,this),this.or=PropertyFactory.getProp(le,ce.or,0,0,this),this.os=PropertyFactory.getProp(le,ce.os,0,.01,this),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertToPath())}return se.prototype={reset:o,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertToPath())},convertStarToPath:function(){var le,ce,oe,ue,ge=2*Math.floor(this.pt.v),ve=2*Math.PI/ge,_e=!0,be=this.or.v,Re=this.ir.v,Se=this.os.v,Ee=this.is.v,ye=2*Math.PI*be/(2*ge),de=2*Math.PI*Re/(2*ge),Me=-Math.PI/2;Me+=this.r.v;var Le=this.data.d===3?-1:1;for(this.v._length=0,le=0;le<ge;le+=1){oe=_e?Se:Ee,ue=_e?ye:de;var Pe=(ce=_e?be:Re)*Math.cos(Me),Ue=ce*Math.sin(Me),$e=Pe===0&&Ue===0?0:Ue/Math.sqrt(Pe*Pe+Ue*Ue),Ve=Pe===0&&Ue===0?0:-Pe/Math.sqrt(Pe*Pe+Ue*Ue);Pe+=+this.p.v[0],Ue+=+this.p.v[1],this.v.setTripleAt(Pe,Ue,Pe-$e*ue*oe*Le,Ue-Ve*ue*oe*Le,Pe+$e*ue*oe*Le,Ue+Ve*ue*oe*Le,le,!0),_e=!_e,Me+=ve*Le}},convertPolygonToPath:function(){var le,ce=Math.floor(this.pt.v),oe=2*Math.PI/ce,ue=this.or.v,ge=this.os.v,ve=2*Math.PI*ue/(4*ce),_e=.5*-Math.PI,be=this.data.d===3?-1:1;for(_e+=this.r.v,this.v._length=0,le=0;le<ce;le+=1){var Re=ue*Math.cos(_e),Se=ue*Math.sin(_e),Ee=Re===0&&Se===0?0:Se/Math.sqrt(Re*Re+Se*Se),ye=Re===0&&Se===0?0:-Re/Math.sqrt(Re*Re+Se*Se);Re+=+this.p.v[0],Se+=+this.p.v[1],this.v.setTripleAt(Re,Se,Re-Ee*ve*ge*be,Se-ye*ve*ge*be,Re+Ee*ve*ge*be,Se+ye*ve*ge*be,le,!0),_e+=oe*be}this.paths.length=0,this.paths[0]=this.v}},extendPrototype([DynamicPropertyContainer],se),se}(),ie=function(){function se(le,ce){this.v=shapePool.newElement(),this.v.c=!0,this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.elem=le,this.comp=le.comp,this.frameId=-1,this.d=ce.d,this.initDynamicPropertyContainer(le),this.p=PropertyFactory.getProp(le,ce.p,1,0,this),this.s=PropertyFactory.getProp(le,ce.s,1,0,this),this.r=PropertyFactory.getProp(le,ce.r,0,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertRectToPath())}return se.prototype={convertRectToPath:function(){var le=this.p.v[0],ce=this.p.v[1],oe=this.s.v[0]/2,ue=this.s.v[1]/2,ge=bmMin(oe,ue,this.r.v),ve=ge*(1-roundCorner);this.v._length=0,this.d===2||this.d===1?(this.v.setTripleAt(le+oe,ce-ue+ge,le+oe,ce-ue+ge,le+oe,ce-ue+ve,0,!0),this.v.setTripleAt(le+oe,ce+ue-ge,le+oe,ce+ue-ve,le+oe,ce+ue-ge,1,!0),ge!==0?(this.v.setTripleAt(le+oe-ge,ce+ue,le+oe-ge,ce+ue,le+oe-ve,ce+ue,2,!0),this.v.setTripleAt(le-oe+ge,ce+ue,le-oe+ve,ce+ue,le-oe+ge,ce+ue,3,!0),this.v.setTripleAt(le-oe,ce+ue-ge,le-oe,ce+ue-ge,le-oe,ce+ue-ve,4,!0),this.v.setTripleAt(le-oe,ce-ue+ge,le-oe,ce-ue+ve,le-oe,ce-ue+ge,5,!0),this.v.setTripleAt(le-oe+ge,ce-ue,le-oe+ge,ce-ue,le-oe+ve,ce-ue,6,!0),this.v.setTripleAt(le+oe-ge,ce-ue,le+oe-ve,ce-ue,le+oe-ge,ce-ue,7,!0)):(this.v.setTripleAt(le-oe,ce+ue,le-oe+ve,ce+ue,le-oe,ce+ue,2),this.v.setTripleAt(le-oe,ce-ue,le-oe,ce-ue+ve,le-oe,ce-ue,3))):(this.v.setTripleAt(le+oe,ce-ue+ge,le+oe,ce-ue+ve,le+oe,ce-ue+ge,0,!0),ge!==0?(this.v.setTripleAt(le+oe-ge,ce-ue,le+oe-ge,ce-ue,le+oe-ve,ce-ue,1,!0),this.v.setTripleAt(le-oe+ge,ce-ue,le-oe+ve,ce-ue,le-oe+ge,ce-ue,2,!0),this.v.setTripleAt(le-oe,ce-ue+ge,le-oe,ce-ue+ge,le-oe,ce-ue+ve,3,!0),this.v.setTripleAt(le-oe,ce+ue-ge,le-oe,ce+ue-ve,le-oe,ce+ue-ge,4,!0),this.v.setTripleAt(le-oe+ge,ce+ue,le-oe+ge,ce+ue,le-oe+ve,ce+ue,5,!0),this.v.setTripleAt(le+oe-ge,ce+ue,le+oe-ve,ce+ue,le+oe-ge,ce+ue,6,!0),this.v.setTripleAt(le+oe,ce+ue-ge,le+oe,ce+ue-ge,le+oe,ce+ue-ve,7,!0)):(this.v.setTripleAt(le-oe,ce-ue,le-oe+ve,ce-ue,le-oe,ce-ue,1,!0),this.v.setTripleAt(le-oe,ce+ue,le-oe,ce+ue-ve,le-oe,ce+ue,2,!0),this.v.setTripleAt(le+oe,ce+ue,le+oe-ve,ce+ue,le+oe,ce+ue,3,!0)))},getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertRectToPath())},reset:o},extendPrototype([DynamicPropertyContainer],se),se}(),re={getShapeProp:function(se,le,ce){var oe;return ce===3||ce===4?oe=(ce===3?le.pt:le.ks).k.length?new Y(se,le,ce):new G(se,le,ce):ce===5?oe=new ie(se,le):ce===6?oe=new Q(se,le):ce===7&&(oe=new ee(se,le)),oe.k&&se.addDynamicProperty(oe),oe},getConstructorFunction:function(){return G},getKeyframedConstructorFunction:function(){return Y}};return re}(),Matrix=function(){var r=Math.cos,e=Math.sin,t=Math.tan,o=Math.round;function y(){return this.props[0]=1,this.props[1]=0,this.props[2]=0,this.props[3]=0,this.props[4]=0,this.props[5]=1,this.props[6]=0,this.props[7]=0,this.props[8]=0,this.props[9]=0,this.props[10]=1,this.props[11]=0,this.props[12]=0,this.props[13]=0,this.props[14]=0,this.props[15]=1,this}function R(De){if(De===0)return this;var Oe=r(De),Te=e(De);return this._t(Oe,-Te,0,0,Te,Oe,0,0,0,0,1,0,0,0,0,1)}function G(De){if(De===0)return this;var Oe=r(De),Te=e(De);return this._t(1,0,0,0,0,Oe,-Te,0,0,Te,Oe,0,0,0,0,1)}function K(De){if(De===0)return this;var Oe=r(De),Te=e(De);return this._t(Oe,0,Te,0,0,1,0,0,-Te,0,Oe,0,0,0,0,1)}function Y(De){if(De===0)return this;var Oe=r(De),Te=e(De);return this._t(Oe,-Te,0,0,Te,Oe,0,0,0,0,1,0,0,0,0,1)}function Q(De,Oe){return this._t(1,Oe,De,1,0,0)}function ee(De,Oe){return this.shear(t(De),t(Oe))}function ie(De,Oe){var Te=r(Oe),Ne=e(Oe);return this._t(Te,Ne,0,0,-Ne,Te,0,0,0,0,1,0,0,0,0,1)._t(1,0,0,0,t(De),1,0,0,0,0,1,0,0,0,0,1)._t(Te,-Ne,0,0,Ne,Te,0,0,0,0,1,0,0,0,0,1)}function re(De,Oe,Te){return Te||Te===0||(Te=1),De===1&&Oe===1&&Te===1?this:this._t(De,0,0,0,0,Oe,0,0,0,0,Te,0,0,0,0,1)}function se(De,Oe,Te,Ne,Ye,Qe,qe,Ze,ct,xt,un,Vn,In,Un,kn,Ln){return this.props[0]=De,this.props[1]=Oe,this.props[2]=Te,this.props[3]=Ne,this.props[4]=Ye,this.props[5]=Qe,this.props[6]=qe,this.props[7]=Ze,this.props[8]=ct,this.props[9]=xt,this.props[10]=un,this.props[11]=Vn,this.props[12]=In,this.props[13]=Un,this.props[14]=kn,this.props[15]=Ln,this}function le(De,Oe,Te){return Te=Te||0,De!==0||Oe!==0||Te!==0?this._t(1,0,0,0,0,1,0,0,0,0,1,0,De,Oe,Te,1):this}function ce(De,Oe,Te,Ne,Ye,Qe,qe,Ze,ct,xt,un,Vn,In,Un,kn,Ln){var Ke=this.props;if(De===1&&Oe===0&&Te===0&&Ne===0&&Ye===0&&Qe===1&&qe===0&&Ze===0&&ct===0&&xt===0&&un===1&&Vn===0)return Ke[12]=Ke[12]*De+Ke[15]*In,Ke[13]=Ke[13]*Qe+Ke[15]*Un,Ke[14]=Ke[14]*un+Ke[15]*kn,Ke[15]*=Ln,this._identityCalculated=!1,this;var Qn=Ke[0],yn=Ke[1],kt=Ke[2],cn=Ke[3],Mn=Ke[4],Qt=Ke[5],He=Ke[6],ze=Ke[7],Mt=Ke[8],hn=Ke[9],En=Ke[10],an=Ke[11],Cn=Ke[12],Pn=Ke[13],Fn=Ke[14],pi=Ke[15];return Ke[0]=Qn*De+yn*Ye+kt*ct+cn*In,Ke[1]=Qn*Oe+yn*Qe+kt*xt+cn*Un,Ke[2]=Qn*Te+yn*qe+kt*un+cn*kn,Ke[3]=Qn*Ne+yn*Ze+kt*Vn+cn*Ln,Ke[4]=Mn*De+Qt*Ye+He*ct+ze*In,Ke[5]=Mn*Oe+Qt*Qe+He*xt+ze*Un,Ke[6]=Mn*Te+Qt*qe+He*un+ze*kn,Ke[7]=Mn*Ne+Qt*Ze+He*Vn+ze*Ln,Ke[8]=Mt*De+hn*Ye+En*ct+an*In,Ke[9]=Mt*Oe+hn*Qe+En*xt+an*Un,Ke[10]=Mt*Te+hn*qe+En*un+an*kn,Ke[11]=Mt*Ne+hn*Ze+En*Vn+an*Ln,Ke[12]=Cn*De+Pn*Ye+Fn*ct+pi*In,Ke[13]=Cn*Oe+Pn*Qe+Fn*xt+pi*Un,Ke[14]=Cn*Te+Pn*qe+Fn*un+pi*kn,Ke[15]=Cn*Ne+Pn*Ze+Fn*Vn+pi*Ln,this._identityCalculated=!1,this}function oe(De){var Oe=De.props;return this.transform(Oe[0],Oe[1],Oe[2],Oe[3],Oe[4],Oe[5],Oe[6],Oe[7],Oe[8],Oe[9],Oe[10],Oe[11],Oe[12],Oe[13],Oe[14],Oe[15])}function ue(){return this._identityCalculated||(this._identity=!(this.props[0]!==1||this.props[1]!==0||this.props[2]!==0||this.props[3]!==0||this.props[4]!==0||this.props[5]!==1||this.props[6]!==0||this.props[7]!==0||this.props[8]!==0||this.props[9]!==0||this.props[10]!==1||this.props[11]!==0||this.props[12]!==0||this.props[13]!==0||this.props[14]!==0||this.props[15]!==1),this._identityCalculated=!0),this._identity}function ge(De){for(var Oe=0;Oe<16;){if(De.props[Oe]!==this.props[Oe])return!1;Oe+=1}return!0}function ve(De){var Oe;for(Oe=0;Oe<16;Oe+=1)De.props[Oe]=this.props[Oe];return De}function _e(De){var Oe;for(Oe=0;Oe<16;Oe+=1)this.props[Oe]=De[Oe]}function be(De,Oe,Te){return{x:De*this.props[0]+Oe*this.props[4]+Te*this.props[8]+this.props[12],y:De*this.props[1]+Oe*this.props[5]+Te*this.props[9]+this.props[13],z:De*this.props[2]+Oe*this.props[6]+Te*this.props[10]+this.props[14]}}function Re(De,Oe,Te){return De*this.props[0]+Oe*this.props[4]+Te*this.props[8]+this.props[12]}function Se(De,Oe,Te){return De*this.props[1]+Oe*this.props[5]+Te*this.props[9]+this.props[13]}function Ee(De,Oe,Te){return De*this.props[2]+Oe*this.props[6]+Te*this.props[10]+this.props[14]}function ye(){var De=this.props[0]*this.props[5]-this.props[1]*this.props[4],Oe=this.props[5]/De,Te=-this.props[1]/De,Ne=-this.props[4]/De,Ye=this.props[0]/De,Qe=(this.props[4]*this.props[13]-this.props[5]*this.props[12])/De,qe=-(this.props[0]*this.props[13]-this.props[1]*this.props[12])/De,Ze=new Matrix;return Ze.props[0]=Oe,Ze.props[1]=Te,Ze.props[4]=Ne,Ze.props[5]=Ye,Ze.props[12]=Qe,Ze.props[13]=qe,Ze}function de(De){return this.getInverseMatrix().applyToPointArray(De[0],De[1],De[2]||0)}function Me(De){var Oe,Te=De.length,Ne=[];for(Oe=0;Oe<Te;Oe+=1)Ne[Oe]=de(De[Oe]);return Ne}function Le(De,Oe,Te){var Ne=createTypedArray("float32",6);if(this.isIdentity())Ne[0]=De[0],Ne[1]=De[1],Ne[2]=Oe[0],Ne[3]=Oe[1],Ne[4]=Te[0],Ne[5]=Te[1];else{var Ye=this.props[0],Qe=this.props[1],qe=this.props[4],Ze=this.props[5],ct=this.props[12],xt=this.props[13];Ne[0]=De[0]*Ye+De[1]*qe+ct,Ne[1]=De[0]*Qe+De[1]*Ze+xt,Ne[2]=Oe[0]*Ye+Oe[1]*qe+ct,Ne[3]=Oe[0]*Qe+Oe[1]*Ze+xt,Ne[4]=Te[0]*Ye+Te[1]*qe+ct,Ne[5]=Te[0]*Qe+Te[1]*Ze+xt}return Ne}function Pe(De,Oe,Te){return this.isIdentity()?[De,Oe,Te]:[De*this.props[0]+Oe*this.props[4]+Te*this.props[8]+this.props[12],De*this.props[1]+Oe*this.props[5]+Te*this.props[9]+this.props[13],De*this.props[2]+Oe*this.props[6]+Te*this.props[10]+this.props[14]]}function Ue(De,Oe){if(this.isIdentity())return De+","+Oe;var Te=this.props;return Math.round(100*(De*Te[0]+Oe*Te[4]+Te[12]))/100+","+Math.round(100*(De*Te[1]+Oe*Te[5]+Te[13]))/100}function $e(){for(var De=0,Oe=this.props,Te="matrix3d(";De<16;)Te+=o(1e4*Oe[De])/1e4,Te+=De===15?")":",",De+=1;return Te}function Ve(De){return De<1e-6&&De>0||De>-1e-6&&De<0?o(1e4*De)/1e4:De}function Ce(){var De=this.props;return"matrix("+Ve(De[0])+","+Ve(De[1])+","+Ve(De[4])+","+Ve(De[5])+","+Ve(De[12])+","+Ve(De[13])+")"}return function(){this.reset=y,this.rotate=R,this.rotateX=G,this.rotateY=K,this.rotateZ=Y,this.skew=ee,this.skewFromAxis=ie,this.shear=Q,this.scale=re,this.setTransform=se,this.translate=le,this.transform=ce,this.multiply=oe,this.applyToPoint=be,this.applyToX=Re,this.applyToY=Se,this.applyToZ=Ee,this.applyToPointArray=Pe,this.applyToTriplePoints=Le,this.applyToPointStringified=Ue,this.toCSS=$e,this.to2dCSS=Ce,this.clone=ve,this.cloneFromProps=_e,this.equals=ge,this.inversePoints=Me,this.inversePoint=de,this.getInverseMatrix=ye,this._t=this.transform,this.isIdentity=ue,this._identity=!0,this._identityCalculated=!1,this.props=createTypedArray("float32",16),this.reset()}}();function _typeof$3(r){return _typeof$3=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$3(r)}var lottie={};function setLocation(r){setLocationHref(r)}function searchAnimations(){animationManager.searchAnimations()}function setSubframeRendering(r){setSubframeEnabled(r)}function setPrefix(r){setIdPrefix(r)}function loadAnimation(r){return animationManager.loadAnimation(r)}function setQuality(r){if(typeof r=="string")switch(r){case"high":setDefaultCurveSegments(200);break;default:case"medium":setDefaultCurveSegments(50);break;case"low":setDefaultCurveSegments(10)}else!isNaN(r)&&r>1&&setDefaultCurveSegments(r)}function inBrowser(){return typeof navigator<"u"}function installPlugin(r,e){r==="expressions"&&setExpressionsPlugin(e)}function getFactory(r){switch(r){case"propertyFactory":return PropertyFactory;case"shapePropertyFactory":return ShapePropertyFactory;case"matrix":return Matrix;default:return null}}function checkReady(){document.readyState==="complete"&&(clearInterval(readyStateCheckInterval),searchAnimations())}function getQueryVariable(r){for(var e=queryString.split("&"),t=0;t<e.length;t+=1){var o=e[t].split("=");if(decodeURIComponent(o[0])==r)return decodeURIComponent(o[1])}return null}lottie.play=animationManager.play,lottie.pause=animationManager.pause,lottie.setLocationHref=setLocation,lottie.togglePause=animationManager.togglePause,lottie.setSpeed=animationManager.setSpeed,lottie.setDirection=animationManager.setDirection,lottie.stop=animationManager.stop,lottie.searchAnimations=searchAnimations,lottie.registerAnimation=animationManager.registerAnimation,lottie.loadAnimation=loadAnimation,lottie.setSubframeRendering=setSubframeRendering,lottie.resize=animationManager.resize,lottie.goToAndStop=animationManager.goToAndStop,lottie.destroy=animationManager.destroy,lottie.setQuality=setQuality,lottie.inBrowser=inBrowser,lottie.installPlugin=installPlugin,lottie.freeze=animationManager.freeze,lottie.unfreeze=animationManager.unfreeze,lottie.setVolume=animationManager.setVolume,lottie.mute=animationManager.mute,lottie.unmute=animationManager.unmute,lottie.getRegisteredAnimations=animationManager.getRegisteredAnimations,lottie.useWebWorker=setWebWorker,lottie.setIDPrefix=setPrefix,lottie.__getFactory=getFactory,lottie.version="5.12.2";var queryString="";{var scripts=document.getElementsByTagName("script"),index=scripts.length-1,myScript=scripts[index]||{src:""};queryString=myScript.src?myScript.src.replace(/^[^\?]+\??/,""):"",getQueryVariable("renderer")}var readyStateCheckInterval=setInterval(checkReady,100);try{_typeof$3(exports)!=="object"&&(window.bodymovin=lottie)}catch(r){}var ShapeModifiers=function(){var r={},e={};return r.registerModifier=function(t,o){e[t]||(e[t]=o)},r.getModifier=function(t,o,y){return new e[t](o,y)},r}();function ShapeModifier(){}function TrimModifier(){}function PuckerAndBloatModifier(){}ShapeModifier.prototype.initModifierProperties=function(){},ShapeModifier.prototype.addShapeToModifier=function(){},ShapeModifier.prototype.addShape=function(r){if(!this.closed){r.sh.container.addDynamicProperty(r.sh);var e={shape:r.sh,data:r,localShapeCollection:shapeCollectionPool.newShapeCollection()};this.shapes.push(e),this.addShapeToModifier(e),this._isAnimated&&r.setAsAnimated()}},ShapeModifier.prototype.init=function(r,e){this.shapes=[],this.elem=r,this.initDynamicPropertyContainer(r),this.initModifierProperties(r,e),this.frameId=initialDefaultFrame,this.closed=!1,this.k=!1,this.dynamicProperties.length?this.k=!0:this.getValue(!0)},ShapeModifier.prototype.processKeys=function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties())},extendPrototype([DynamicPropertyContainer],ShapeModifier),extendPrototype([ShapeModifier],TrimModifier),TrimModifier.prototype.initModifierProperties=function(r,e){this.s=PropertyFactory.getProp(r,e.s,0,.01,this),this.e=PropertyFactory.getProp(r,e.e,0,.01,this),this.o=PropertyFactory.getProp(r,e.o,0,0,this),this.sValue=0,this.eValue=0,this.getValue=this.processKeys,this.m=e.m,this._isAnimated=!!this.s.effectsSequence.length||!!this.e.effectsSequence.length||!!this.o.effectsSequence.length},TrimModifier.prototype.addShapeToModifier=function(r){r.pathsData=[]},TrimModifier.prototype.calculateShapeEdges=function(r,e,t,o,y){var R=[];e<=1?R.push({s:r,e}):r>=1?R.push({s:r-1,e:e-1}):(R.push({s:r,e:1}),R.push({s:0,e:e-1}));var G,K,Y=[],Q=R.length;for(G=0;G<Q;G+=1){var ee,ie;(K=R[G]).e*y<o||K.s*y>o+t||(ee=K.s*y<=o?0:(K.s*y-o)/t,ie=K.e*y>=o+t?1:(K.e*y-o)/t,Y.push([ee,ie]))}return Y.length||Y.push([0,0]),Y},TrimModifier.prototype.releasePathsData=function(r){var e,t=r.length;for(e=0;e<t;e+=1)segmentsLengthPool.release(r[e]);return r.length=0,r},TrimModifier.prototype.processShapes=function(r){var e,t,o,y;if(this._mdf||r){var R=this.o.v%360/360;if(R<0&&(R+=1),(e=this.s.v>1?1+R:this.s.v<0?0+R:this.s.v+R)>(t=this.e.v>1?1+R:this.e.v<0?0+R:this.e.v+R)){var G=e;e=t,t=G}e=1e-4*Math.round(1e4*e),t=1e-4*Math.round(1e4*t),this.sValue=e,this.eValue=t}else e=this.sValue,t=this.eValue;var K,Y,Q,ee,ie,re=this.shapes.length,se=0;if(t===e)for(y=0;y<re;y+=1)this.shapes[y].localShapeCollection.releaseShapes(),this.shapes[y].shape._mdf=!0,this.shapes[y].shape.paths=this.shapes[y].localShapeCollection,this._mdf&&(this.shapes[y].pathsData.length=0);else if(t===1&&e===0||t===0&&e===1){if(this._mdf)for(y=0;y<re;y+=1)this.shapes[y].pathsData.length=0,this.shapes[y].shape._mdf=!0}else{var le,ce,oe=[];for(y=0;y<re;y+=1)if((le=this.shapes[y]).shape._mdf||this._mdf||r||this.m===2){if(Y=(o=le.shape.paths)._length,ie=0,!le.shape._mdf&&le.pathsData.length)ie=le.totalShapeLength;else{for(Q=this.releasePathsData(le.pathsData),K=0;K<Y;K+=1)ee=bez.getSegmentsLength(o.shapes[K]),Q.push(ee),ie+=ee.totalLength;le.totalShapeLength=ie,le.pathsData=Q}se+=ie,le.shape._mdf=!0}else le.shape.paths=le.localShapeCollection;var ue,ge=e,ve=t,_e=0;for(y=re-1;y>=0;y-=1)if((le=this.shapes[y]).shape._mdf){for((ce=le.localShapeCollection).releaseShapes(),this.m===2&&re>1?(ue=this.calculateShapeEdges(e,t,le.totalShapeLength,_e,se),_e+=le.totalShapeLength):ue=[[ge,ve]],Y=ue.length,K=0;K<Y;K+=1){ge=ue[K][0],ve=ue[K][1],oe.length=0,ve<=1?oe.push({s:le.totalShapeLength*ge,e:le.totalShapeLength*ve}):ge>=1?oe.push({s:le.totalShapeLength*(ge-1),e:le.totalShapeLength*(ve-1)}):(oe.push({s:le.totalShapeLength*ge,e:le.totalShapeLength}),oe.push({s:0,e:le.totalShapeLength*(ve-1)}));var be=this.addShapes(le,oe[0]);if(oe[0].s!==oe[0].e){if(oe.length>1)if(le.shape.paths.shapes[le.shape.paths._length-1].c){var Re=be.pop();this.addPaths(be,ce),be=this.addShapes(le,oe[1],Re)}else this.addPaths(be,ce),be=this.addShapes(le,oe[1]);this.addPaths(be,ce)}}le.shape.paths=ce}}},TrimModifier.prototype.addPaths=function(r,e){var t,o=r.length;for(t=0;t<o;t+=1)e.addShape(r[t])},TrimModifier.prototype.addSegment=function(r,e,t,o,y,R,G){y.setXYAt(e[0],e[1],"o",R),y.setXYAt(t[0],t[1],"i",R+1),G&&y.setXYAt(r[0],r[1],"v",R),y.setXYAt(o[0],o[1],"v",R+1)},TrimModifier.prototype.addSegmentFromArray=function(r,e,t,o){e.setXYAt(r[1],r[5],"o",t),e.setXYAt(r[2],r[6],"i",t+1),o&&e.setXYAt(r[0],r[4],"v",t),e.setXYAt(r[3],r[7],"v",t+1)},TrimModifier.prototype.addShapes=function(r,e,t){var o,y,R,G,K,Y,Q,ee,ie=r.pathsData,re=r.shape.paths.shapes,se=r.shape.paths._length,le=0,ce=[],oe=!0;for(t?(K=t._length,ee=t._length):(t=shapePool.newElement(),K=0,ee=0),ce.push(t),o=0;o<se;o+=1){for(Y=ie[o].lengths,t.c=re[o].c,R=re[o].c?Y.length:Y.length+1,y=1;y<R;y+=1)if(le+(G=Y[y-1]).addedLength<e.s)le+=G.addedLength,t.c=!1;else{if(le>e.e){t.c=!1;break}e.s<=le&&e.e>=le+G.addedLength?(this.addSegment(re[o].v[y-1],re[o].o[y-1],re[o].i[y],re[o].v[y],t,K,oe),oe=!1):(Q=bez.getNewSegment(re[o].v[y-1],re[o].v[y],re[o].o[y-1],re[o].i[y],(e.s-le)/G.addedLength,(e.e-le)/G.addedLength,Y[y-1]),this.addSegmentFromArray(Q,t,K,oe),oe=!1,t.c=!1),le+=G.addedLength,K+=1}if(re[o].c&&Y.length){if(G=Y[y-1],le<=e.e){var ue=Y[y-1].addedLength;e.s<=le&&e.e>=le+ue?(this.addSegment(re[o].v[y-1],re[o].o[y-1],re[o].i[0],re[o].v[0],t,K,oe),oe=!1):(Q=bez.getNewSegment(re[o].v[y-1],re[o].v[0],re[o].o[y-1],re[o].i[0],(e.s-le)/ue,(e.e-le)/ue,Y[y-1]),this.addSegmentFromArray(Q,t,K,oe),oe=!1,t.c=!1)}else t.c=!1;le+=G.addedLength,K+=1}if(t._length&&(t.setXYAt(t.v[ee][0],t.v[ee][1],"i",ee),t.setXYAt(t.v[t._length-1][0],t.v[t._length-1][1],"o",t._length-1)),le>e.e)break;o<se-1&&(t=shapePool.newElement(),oe=!0,ce.push(t),K=0)}return ce},extendPrototype([ShapeModifier],PuckerAndBloatModifier),PuckerAndBloatModifier.prototype.initModifierProperties=function(r,e){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(r,e.a,0,null,this),this._isAnimated=!!this.amount.effectsSequence.length},PuckerAndBloatModifier.prototype.processPath=function(r,e){var t=e/100,o=[0,0],y=r._length,R=0;for(R=0;R<y;R+=1)o[0]+=r.v[R][0],o[1]+=r.v[R][1];o[0]/=y,o[1]/=y;var G,K,Y,Q,ee,ie,re=shapePool.newElement();for(re.c=r.c,R=0;R<y;R+=1)G=r.v[R][0]+(o[0]-r.v[R][0])*t,K=r.v[R][1]+(o[1]-r.v[R][1])*t,Y=r.o[R][0]+(o[0]-r.o[R][0])*-t,Q=r.o[R][1]+(o[1]-r.o[R][1])*-t,ee=r.i[R][0]+(o[0]-r.i[R][0])*-t,ie=r.i[R][1]+(o[1]-r.i[R][1])*-t,re.setTripleAt(G,K,Y,Q,ee,ie,R);return re},PuckerAndBloatModifier.prototype.processShapes=function(r){var e,t,o,y,R,G,K=this.shapes.length,Y=this.amount.v;if(Y!==0)for(t=0;t<K;t+=1){if(G=(R=this.shapes[t]).localShapeCollection,R.shape._mdf||this._mdf||r)for(G.releaseShapes(),R.shape._mdf=!0,e=R.shape.paths.shapes,y=R.shape.paths._length,o=0;o<y;o+=1)G.addShape(this.processPath(e[o],Y));R.shape.paths=R.localShapeCollection}this.dynamicProperties.length||(this._mdf=!1)};var TransformPropertyFactory=function(){var r=[0,0];function e(t,o,y){if(this.elem=t,this.frameId=-1,this.propType="transform",this.data=o,this.v=new Matrix,this.pre=new Matrix,this.appliedTransformations=0,this.initDynamicPropertyContainer(y||t),o.p&&o.p.s?(this.px=PropertyFactory.getProp(t,o.p.x,0,0,this),this.py=PropertyFactory.getProp(t,o.p.y,0,0,this),o.p.z&&(this.pz=PropertyFactory.getProp(t,o.p.z,0,0,this))):this.p=PropertyFactory.getProp(t,o.p||{k:[0,0,0]},1,0,this),o.rx){if(this.rx=PropertyFactory.getProp(t,o.rx,0,degToRads,this),this.ry=PropertyFactory.getProp(t,o.ry,0,degToRads,this),this.rz=PropertyFactory.getProp(t,o.rz,0,degToRads,this),o.or.k[0].ti){var R,G=o.or.k.length;for(R=0;R<G;R+=1)o.or.k[R].to=null,o.or.k[R].ti=null}this.or=PropertyFactory.getProp(t,o.or,1,degToRads,this),this.or.sh=!0}else this.r=PropertyFactory.getProp(t,o.r||{k:0},0,degToRads,this);o.sk&&(this.sk=PropertyFactory.getProp(t,o.sk,0,degToRads,this),this.sa=PropertyFactory.getProp(t,o.sa,0,degToRads,this)),this.a=PropertyFactory.getProp(t,o.a||{k:[0,0,0]},1,0,this),this.s=PropertyFactory.getProp(t,o.s||{k:[100,100,100]},1,.01,this),o.o?this.o=PropertyFactory.getProp(t,o.o,0,.01,t):this.o={_mdf:!1,v:1},this._isDirty=!0,this.dynamicProperties.length||this.getValue(!0)}return e.prototype={applyToMatrix:function(t){var o=this._mdf;this.iterateDynamicProperties(),this._mdf=this._mdf||o,this.a&&t.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.s&&t.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&t.skewFromAxis(-this.sk.v,this.sa.v),this.r?t.rotate(-this.r.v):t.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.data.p.s?this.data.p.z?t.translate(this.px.v,this.py.v,-this.pz.v):t.translate(this.px.v,this.py.v,0):t.translate(this.p.v[0],this.p.v[1],-this.p.v[2])},getValue:function(t){if(this.elem.globalData.frameId!==this.frameId){if(this._isDirty&&(this.precalculateMatrix(),this._isDirty=!1),this.iterateDynamicProperties(),this._mdf||t){var o;if(this.v.cloneFromProps(this.pre.props),this.appliedTransformations<1&&this.v.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations<2&&this.v.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&this.appliedTransformations<3&&this.v.skewFromAxis(-this.sk.v,this.sa.v),this.r&&this.appliedTransformations<4?this.v.rotate(-this.r.v):!this.r&&this.appliedTransformations<4&&this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.autoOriented){var y,R;if(o=this.elem.globalData.frameRate,this.p&&this.p.keyframes&&this.p.getValueAtTime)this.p._caching.lastFrame+this.p.offsetTime<=this.p.keyframes[0].t?(y=this.p.getValueAtTime((this.p.keyframes[0].t+.01)/o,0),R=this.p.getValueAtTime(this.p.keyframes[0].t/o,0)):this.p._caching.lastFrame+this.p.offsetTime>=this.p.keyframes[this.p.keyframes.length-1].t?(y=this.p.getValueAtTime(this.p.keyframes[this.p.keyframes.length-1].t/o,0),R=this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length-1].t-.05)/o,0)):(y=this.p.pv,R=this.p.getValueAtTime((this.p._caching.lastFrame+this.p.offsetTime-.01)/o,this.p.offsetTime));else if(this.px&&this.px.keyframes&&this.py.keyframes&&this.px.getValueAtTime&&this.py.getValueAtTime){y=[],R=[];var G=this.px,K=this.py;G._caching.lastFrame+G.offsetTime<=G.keyframes[0].t?(y[0]=G.getValueAtTime((G.keyframes[0].t+.01)/o,0),y[1]=K.getValueAtTime((K.keyframes[0].t+.01)/o,0),R[0]=G.getValueAtTime(G.keyframes[0].t/o,0),R[1]=K.getValueAtTime(K.keyframes[0].t/o,0)):G._caching.lastFrame+G.offsetTime>=G.keyframes[G.keyframes.length-1].t?(y[0]=G.getValueAtTime(G.keyframes[G.keyframes.length-1].t/o,0),y[1]=K.getValueAtTime(K.keyframes[K.keyframes.length-1].t/o,0),R[0]=G.getValueAtTime((G.keyframes[G.keyframes.length-1].t-.01)/o,0),R[1]=K.getValueAtTime((K.keyframes[K.keyframes.length-1].t-.01)/o,0)):(y=[G.pv,K.pv],R[0]=G.getValueAtTime((G._caching.lastFrame+G.offsetTime-.01)/o,G.offsetTime),R[1]=K.getValueAtTime((K._caching.lastFrame+K.offsetTime-.01)/o,K.offsetTime))}else y=R=r;this.v.rotate(-Math.atan2(y[1]-R[1],y[0]-R[0]))}this.data.p&&this.data.p.s?this.data.p.z?this.v.translate(this.px.v,this.py.v,-this.pz.v):this.v.translate(this.px.v,this.py.v,0):this.v.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}this.frameId=this.elem.globalData.frameId}},precalculateMatrix:function(){if(this.appliedTransformations=0,this.pre.reset(),!this.a.effectsSequence.length&&(this.pre.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations=1,!this.s.effectsSequence.length)){if(this.pre.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.appliedTransformations=2,this.sk){if(this.sk.effectsSequence.length||this.sa.effectsSequence.length)return;this.pre.skewFromAxis(-this.sk.v,this.sa.v),this.appliedTransformations=3}this.r?this.r.effectsSequence.length||(this.pre.rotate(-this.r.v),this.appliedTransformations=4):this.rz.effectsSequence.length||this.ry.effectsSequence.length||this.rx.effectsSequence.length||this.or.effectsSequence.length||(this.pre.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.appliedTransformations=4)}},autoOrient:function(){}},extendPrototype([DynamicPropertyContainer],e),e.prototype.addDynamicProperty=function(t){this._addDynamicProperty(t),this.elem.addDynamicProperty(t),this._isDirty=!0},e.prototype._addDynamicProperty=DynamicPropertyContainer.prototype.addDynamicProperty,{getTransformProperty:function(t,o,y){return new e(t,o,y)}}}();function RepeaterModifier(){}function RoundCornersModifier(){}function floatEqual(r,e){return 1e5*Math.abs(r-e)<=Math.min(Math.abs(r),Math.abs(e))}function floatZero(r){return Math.abs(r)<=1e-5}function lerp(r,e,t){return r*(1-t)+e*t}function lerpPoint(r,e,t){return[lerp(r[0],e[0],t),lerp(r[1],e[1],t)]}function quadRoots(r,e,t){if(r===0)return[];var o=e*e-4*r*t;if(o<0)return[];var y=-e/(2*r);if(o===0)return[y];var R=Math.sqrt(o)/(2*r);return[y-R,y+R]}function polynomialCoefficients(r,e,t,o){return[3*e-r-3*t+o,3*r-6*e+3*t,-3*r+3*e,r]}function singlePoint(r){return new PolynomialBezier(r,r,r,r,!1)}function PolynomialBezier(r,e,t,o,y){y&&pointEqual(r,e)&&(e=lerpPoint(r,o,1/3)),y&&pointEqual(t,o)&&(t=lerpPoint(r,o,2/3));var R=polynomialCoefficients(r[0],e[0],t[0],o[0]),G=polynomialCoefficients(r[1],e[1],t[1],o[1]);this.a=[R[0],G[0]],this.b=[R[1],G[1]],this.c=[R[2],G[2]],this.d=[R[3],G[3]],this.points=[r,e,t,o]}function extrema(r,e){var t=r.points[0][e],o=r.points[r.points.length-1][e];if(t>o){var y=o;o=t,t=y}for(var R=quadRoots(3*r.a[e],2*r.b[e],r.c[e]),G=0;G<R.length;G+=1)if(R[G]>0&&R[G]<1){var K=r.point(R[G])[e];K<t?t=K:K>o&&(o=K)}return{min:t,max:o}}function intersectData(r,e,t){var o=r.boundingBox();return{cx:o.cx,cy:o.cy,width:o.width,height:o.height,bez:r,t:(e+t)/2,t1:e,t2:t}}function splitData(r){var e=r.bez.split(.5);return[intersectData(e[0],r.t1,r.t),intersectData(e[1],r.t,r.t2)]}function boxIntersect(r,e){return 2*Math.abs(r.cx-e.cx)<r.width+e.width&&2*Math.abs(r.cy-e.cy)<r.height+e.height}function intersectsImpl(r,e,t,o,y,R){if(boxIntersect(r,e))if(t>=R||r.width<=o&&r.height<=o&&e.width<=o&&e.height<=o)y.push([r.t,e.t]);else{var G=splitData(r),K=splitData(e);intersectsImpl(G[0],K[0],t+1,o,y,R),intersectsImpl(G[0],K[1],t+1,o,y,R),intersectsImpl(G[1],K[0],t+1,o,y,R),intersectsImpl(G[1],K[1],t+1,o,y,R)}}function crossProduct(r,e){return[r[1]*e[2]-r[2]*e[1],r[2]*e[0]-r[0]*e[2],r[0]*e[1]-r[1]*e[0]]}function lineIntersection(r,e,t,o){var y=[r[0],r[1],1],R=[e[0],e[1],1],G=[t[0],t[1],1],K=[o[0],o[1],1],Y=crossProduct(crossProduct(y,R),crossProduct(G,K));return floatZero(Y[2])?null:[Y[0]/Y[2],Y[1]/Y[2]]}function polarOffset(r,e,t){return[r[0]+Math.cos(e)*t,r[1]-Math.sin(e)*t]}function pointDistance(r,e){return Math.hypot(r[0]-e[0],r[1]-e[1])}function pointEqual(r,e){return floatEqual(r[0],e[0])&&floatEqual(r[1],e[1])}function ZigZagModifier(){}function setPoint(r,e,t,o,y,R,G){var K=t-Math.PI/2,Y=t+Math.PI/2,Q=e[0]+Math.cos(t)*o*y,ee=e[1]-Math.sin(t)*o*y;r.setTripleAt(Q,ee,Q+Math.cos(K)*R,ee-Math.sin(K)*R,Q+Math.cos(Y)*G,ee-Math.sin(Y)*G,r.length())}function getPerpendicularVector(r,e){var t=[e[0]-r[0],e[1]-r[1]],o=.5*-Math.PI;return[Math.cos(o)*t[0]-Math.sin(o)*t[1],Math.sin(o)*t[0]+Math.cos(o)*t[1]]}function getProjectingAngle(r,e){var t=e===0?r.length()-1:e-1,o=(e+1)%r.length(),y=getPerpendicularVector(r.v[t],r.v[o]);return Math.atan2(0,1)-Math.atan2(y[1],y[0])}function zigZagCorner(r,e,t,o,y,R,G){var K=getProjectingAngle(e,t),Y=e.v[t%e._length],Q=e.v[t===0?e._length-1:t-1],ee=e.v[(t+1)%e._length],ie=R===2?Math.sqrt(Math.pow(Y[0]-Q[0],2)+Math.pow(Y[1]-Q[1],2)):0,re=R===2?Math.sqrt(Math.pow(Y[0]-ee[0],2)+Math.pow(Y[1]-ee[1],2)):0;setPoint(r,e.v[t%e._length],K,G,o,re/(2*(y+1)),ie/(2*(y+1)))}function zigZagSegment(r,e,t,o,y,R){for(var G=0;G<o;G+=1){var K=(G+1)/(o+1),Y=y===2?Math.sqrt(Math.pow(e.points[3][0]-e.points[0][0],2)+Math.pow(e.points[3][1]-e.points[0][1],2)):0,Q=e.normalAngle(K);setPoint(r,e.point(K),Q,R,t,Y/(2*(o+1)),Y/(2*(o+1))),R=-R}return R}function linearOffset(r,e,t){var o=Math.atan2(e[0]-r[0],e[1]-r[1]);return[polarOffset(r,o,t),polarOffset(e,o,t)]}function offsetSegment(r,e){var t,o,y,R,G,K,Y;t=(Y=linearOffset(r.points[0],r.points[1],e))[0],o=Y[1],y=(Y=linearOffset(r.points[1],r.points[2],e))[0],R=Y[1],G=(Y=linearOffset(r.points[2],r.points[3],e))[0],K=Y[1];var Q=lineIntersection(t,o,y,R);Q===null&&(Q=o);var ee=lineIntersection(G,K,y,R);return ee===null&&(ee=G),new PolynomialBezier(t,Q,ee,K)}function joinLines(r,e,t,o,y){var R=e.points[3],G=t.points[0];if(o===3||pointEqual(R,G))return R;if(o===2){var K=-e.tangentAngle(1),Y=-t.tangentAngle(0)+Math.PI,Q=lineIntersection(R,polarOffset(R,K+Math.PI/2,100),G,polarOffset(G,K+Math.PI/2,100)),ee=Q?pointDistance(Q,R):pointDistance(R,G)/2,ie=polarOffset(R,K,2*ee*roundCorner);return r.setXYAt(ie[0],ie[1],"o",r.length()-1),ie=polarOffset(G,Y,2*ee*roundCorner),r.setTripleAt(G[0],G[1],G[0],G[1],ie[0],ie[1],r.length()),G}var re=lineIntersection(pointEqual(R,e.points[2])?e.points[0]:e.points[2],R,G,pointEqual(G,t.points[1])?t.points[3]:t.points[1]);return re&&pointDistance(re,R)<y?(r.setTripleAt(re[0],re[1],re[0],re[1],re[0],re[1],r.length()),re):R}function getIntersection(r,e){var t=r.intersections(e);return t.length&&floatEqual(t[0][0],1)&&t.shift(),t.length?t[0]:null}function pruneSegmentIntersection(r,e){var t=r.slice(),o=e.slice(),y=getIntersection(r[r.length-1],e[0]);return y&&(t[r.length-1]=r[r.length-1].split(y[0])[0],o[0]=e[0].split(y[1])[1]),r.length>1&&e.length>1&&(y=getIntersection(r[0],e[e.length-1]))?[[r[0].split(y[0])[0]],[e[e.length-1].split(y[1])[1]]]:[t,o]}function pruneIntersections(r){for(var e,t=1;t<r.length;t+=1)e=pruneSegmentIntersection(r[t-1],r[t]),r[t-1]=e[0],r[t]=e[1];return r.length>1&&(e=pruneSegmentIntersection(r[r.length-1],r[0]),r[r.length-1]=e[0],r[0]=e[1]),r}function offsetSegmentSplit(r,e){var t,o,y,R,G=r.inflectionPoints();if(G.length===0)return[offsetSegment(r,e)];if(G.length===1||floatEqual(G[1],1))return t=(y=r.split(G[0]))[0],o=y[1],[offsetSegment(t,e),offsetSegment(o,e)];t=(y=r.split(G[0]))[0];var K=(G[1]-G[0])/(1-G[0]);return R=(y=y[1].split(K))[0],o=y[1],[offsetSegment(t,e),offsetSegment(R,e),offsetSegment(o,e)]}function OffsetPathModifier(){}function getFontProperties(r){for(var e=r.fStyle?r.fStyle.split(" "):[],t="normal",o="normal",y=e.length,R=0;R<y;R+=1)switch(e[R].toLowerCase()){case"italic":o="italic";break;case"bold":t="700";break;case"black":t="900";break;case"medium":t="500";break;case"regular":case"normal":t="400";break;case"light":case"thin":t="200"}return{style:o,weight:r.fWeight||t}}extendPrototype([ShapeModifier],RepeaterModifier),RepeaterModifier.prototype.initModifierProperties=function(r,e){this.getValue=this.processKeys,this.c=PropertyFactory.getProp(r,e.c,0,null,this),this.o=PropertyFactory.getProp(r,e.o,0,null,this),this.tr=TransformPropertyFactory.getTransformProperty(r,e.tr,this),this.so=PropertyFactory.getProp(r,e.tr.so,0,.01,this),this.eo=PropertyFactory.getProp(r,e.tr.eo,0,.01,this),this.data=e,this.dynamicProperties.length||this.getValue(!0),this._isAnimated=!!this.dynamicProperties.length,this.pMatrix=new Matrix,this.rMatrix=new Matrix,this.sMatrix=new Matrix,this.tMatrix=new Matrix,this.matrix=new Matrix},RepeaterModifier.prototype.applyTransforms=function(r,e,t,o,y,R){var G=R?-1:1,K=o.s.v[0]+(1-o.s.v[0])*(1-y),Y=o.s.v[1]+(1-o.s.v[1])*(1-y);r.translate(o.p.v[0]*G*y,o.p.v[1]*G*y,o.p.v[2]),e.translate(-o.a.v[0],-o.a.v[1],o.a.v[2]),e.rotate(-o.r.v*G*y),e.translate(o.a.v[0],o.a.v[1],o.a.v[2]),t.translate(-o.a.v[0],-o.a.v[1],o.a.v[2]),t.scale(R?1/K:K,R?1/Y:Y),t.translate(o.a.v[0],o.a.v[1],o.a.v[2])},RepeaterModifier.prototype.init=function(r,e,t,o){for(this.elem=r,this.arr=e,this.pos=t,this.elemsData=o,this._currentCopies=0,this._elements=[],this._groups=[],this.frameId=-1,this.initDynamicPropertyContainer(r),this.initModifierProperties(r,e[t]);t>0;)t-=1,this._elements.unshift(e[t]);this.dynamicProperties.length?this.k=!0:this.getValue(!0)},RepeaterModifier.prototype.resetElements=function(r){var e,t=r.length;for(e=0;e<t;e+=1)r[e]._processed=!1,r[e].ty==="gr"&&this.resetElements(r[e].it)},RepeaterModifier.prototype.cloneElements=function(r){var e=JSON.parse(JSON.stringify(r));return this.resetElements(e),e},RepeaterModifier.prototype.changeGroupRender=function(r,e){var t,o=r.length;for(t=0;t<o;t+=1)r[t]._render=e,r[t].ty==="gr"&&this.changeGroupRender(r[t].it,e)},RepeaterModifier.prototype.processShapes=function(r){var e,t,o,y,R,G=!1;if(this._mdf||r){var K,Y=Math.ceil(this.c.v);if(this._groups.length<Y){for(;this._groups.length<Y;){var Q={it:this.cloneElements(this._elements),ty:"gr"};Q.it.push({a:{a:0,ix:1,k:[0,0]},nm:"Transform",o:{a:0,ix:7,k:100},p:{a:0,ix:2,k:[0,0]},r:{a:1,ix:6,k:[{s:0,e:0,t:0},{s:0,e:0,t:1}]},s:{a:0,ix:3,k:[100,100]},sa:{a:0,ix:5,k:0},sk:{a:0,ix:4,k:0},ty:"tr"}),this.arr.splice(0,0,Q),this._groups.splice(0,0,Q),this._currentCopies+=1}this.elem.reloadShapes(),G=!0}for(R=0,o=0;o<=this._groups.length-1;o+=1){if(K=R<Y,this._groups[o]._render=K,this.changeGroupRender(this._groups[o].it,K),!K){var ee=this.elemsData[o].it,ie=ee[ee.length-1];ie.transform.op.v!==0?(ie.transform.op._mdf=!0,ie.transform.op.v=0):ie.transform.op._mdf=!1}R+=1}this._currentCopies=Y;var re=this.o.v,se=re%1,le=re>0?Math.floor(re):Math.ceil(re),ce=this.pMatrix.props,oe=this.rMatrix.props,ue=this.sMatrix.props;this.pMatrix.reset(),this.rMatrix.reset(),this.sMatrix.reset(),this.tMatrix.reset(),this.matrix.reset();var ge,ve,_e=0;if(re>0){for(;_e<le;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),_e+=1;se&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,se,!1),_e+=se)}else if(re<0){for(;_e>le;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!0),_e-=1;se&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,-se,!0),_e-=se)}for(o=this.data.m===1?0:this._currentCopies-1,y=this.data.m===1?1:-1,R=this._currentCopies;R;){if(ve=(t=(e=this.elemsData[o].it)[e.length-1].transform.mProps.v.props).length,e[e.length-1].transform.mProps._mdf=!0,e[e.length-1].transform.op._mdf=!0,e[e.length-1].transform.op.v=this._currentCopies===1?this.so.v:this.so.v+(this.eo.v-this.so.v)*(o/(this._currentCopies-1)),_e!==0){for((o!==0&&y===1||o!==this._currentCopies-1&&y===-1)&&this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),this.matrix.transform(oe[0],oe[1],oe[2],oe[3],oe[4],oe[5],oe[6],oe[7],oe[8],oe[9],oe[10],oe[11],oe[12],oe[13],oe[14],oe[15]),this.matrix.transform(ue[0],ue[1],ue[2],ue[3],ue[4],ue[5],ue[6],ue[7],ue[8],ue[9],ue[10],ue[11],ue[12],ue[13],ue[14],ue[15]),this.matrix.transform(ce[0],ce[1],ce[2],ce[3],ce[4],ce[5],ce[6],ce[7],ce[8],ce[9],ce[10],ce[11],ce[12],ce[13],ce[14],ce[15]),ge=0;ge<ve;ge+=1)t[ge]=this.matrix.props[ge];this.matrix.reset()}else for(this.matrix.reset(),ge=0;ge<ve;ge+=1)t[ge]=this.matrix.props[ge];_e+=1,R-=1,o+=y}}else for(R=this._currentCopies,o=0,y=1;R;)t=(e=this.elemsData[o].it)[e.length-1].transform.mProps.v.props,e[e.length-1].transform.mProps._mdf=!1,e[e.length-1].transform.op._mdf=!1,R-=1,o+=y;return G},RepeaterModifier.prototype.addShape=function(){},extendPrototype([ShapeModifier],RoundCornersModifier),RoundCornersModifier.prototype.initModifierProperties=function(r,e){this.getValue=this.processKeys,this.rd=PropertyFactory.getProp(r,e.r,0,null,this),this._isAnimated=!!this.rd.effectsSequence.length},RoundCornersModifier.prototype.processPath=function(r,e){var t,o=shapePool.newElement();o.c=r.c;var y,R,G,K,Y,Q,ee,ie,re,se,le,ce,oe=r._length,ue=0;for(t=0;t<oe;t+=1)y=r.v[t],G=r.o[t],R=r.i[t],y[0]===G[0]&&y[1]===G[1]&&y[0]===R[0]&&y[1]===R[1]?t!==0&&t!==oe-1||r.c?(K=t===0?r.v[oe-1]:r.v[t-1],Q=(Y=Math.sqrt(Math.pow(y[0]-K[0],2)+Math.pow(y[1]-K[1],2)))?Math.min(Y/2,e)/Y:0,ee=le=y[0]+(K[0]-y[0])*Q,ie=ce=y[1]-(y[1]-K[1])*Q,re=ee-(ee-y[0])*roundCorner,se=ie-(ie-y[1])*roundCorner,o.setTripleAt(ee,ie,re,se,le,ce,ue),ue+=1,K=t===oe-1?r.v[0]:r.v[t+1],Q=(Y=Math.sqrt(Math.pow(y[0]-K[0],2)+Math.pow(y[1]-K[1],2)))?Math.min(Y/2,e)/Y:0,ee=re=y[0]+(K[0]-y[0])*Q,ie=se=y[1]+(K[1]-y[1])*Q,le=ee-(ee-y[0])*roundCorner,ce=ie-(ie-y[1])*roundCorner,o.setTripleAt(ee,ie,re,se,le,ce,ue),ue+=1):(o.setTripleAt(y[0],y[1],G[0],G[1],R[0],R[1],ue),ue+=1):(o.setTripleAt(r.v[t][0],r.v[t][1],r.o[t][0],r.o[t][1],r.i[t][0],r.i[t][1],ue),ue+=1);return o},RoundCornersModifier.prototype.processShapes=function(r){var e,t,o,y,R,G,K=this.shapes.length,Y=this.rd.v;if(Y!==0)for(t=0;t<K;t+=1){if(G=(R=this.shapes[t]).localShapeCollection,R.shape._mdf||this._mdf||r)for(G.releaseShapes(),R.shape._mdf=!0,e=R.shape.paths.shapes,y=R.shape.paths._length,o=0;o<y;o+=1)G.addShape(this.processPath(e[o],Y));R.shape.paths=R.localShapeCollection}this.dynamicProperties.length||(this._mdf=!1)},PolynomialBezier.prototype.point=function(r){return[((this.a[0]*r+this.b[0])*r+this.c[0])*r+this.d[0],((this.a[1]*r+this.b[1])*r+this.c[1])*r+this.d[1]]},PolynomialBezier.prototype.derivative=function(r){return[(3*r*this.a[0]+2*this.b[0])*r+this.c[0],(3*r*this.a[1]+2*this.b[1])*r+this.c[1]]},PolynomialBezier.prototype.tangentAngle=function(r){var e=this.derivative(r);return Math.atan2(e[1],e[0])},PolynomialBezier.prototype.normalAngle=function(r){var e=this.derivative(r);return Math.atan2(e[0],e[1])},PolynomialBezier.prototype.inflectionPoints=function(){var r=this.a[1]*this.b[0]-this.a[0]*this.b[1];if(floatZero(r))return[];var e=-.5*(this.a[1]*this.c[0]-this.a[0]*this.c[1])/r,t=e*e-1/3*(this.b[1]*this.c[0]-this.b[0]*this.c[1])/r;if(t<0)return[];var o=Math.sqrt(t);return floatZero(o)?o>0&&o<1?[e]:[]:[e-o,e+o].filter(function(y){return y>0&&y<1})},PolynomialBezier.prototype.split=function(r){if(r<=0)return[singlePoint(this.points[0]),this];if(r>=1)return[this,singlePoint(this.points[this.points.length-1])];var e=lerpPoint(this.points[0],this.points[1],r),t=lerpPoint(this.points[1],this.points[2],r),o=lerpPoint(this.points[2],this.points[3],r),y=lerpPoint(e,t,r),R=lerpPoint(t,o,r),G=lerpPoint(y,R,r);return[new PolynomialBezier(this.points[0],e,y,G,!0),new PolynomialBezier(G,R,o,this.points[3],!0)]},PolynomialBezier.prototype.bounds=function(){return{x:extrema(this,0),y:extrema(this,1)}},PolynomialBezier.prototype.boundingBox=function(){var r=this.bounds();return{left:r.x.min,right:r.x.max,top:r.y.min,bottom:r.y.max,width:r.x.max-r.x.min,height:r.y.max-r.y.min,cx:(r.x.max+r.x.min)/2,cy:(r.y.max+r.y.min)/2}},PolynomialBezier.prototype.intersections=function(r,e,t){e===void 0&&(e=2),t===void 0&&(t=7);var o=[];return intersectsImpl(intersectData(this,0,1),intersectData(r,0,1),0,e,o,t),o},PolynomialBezier.shapeSegment=function(r,e){var t=(e+1)%r.length();return new PolynomialBezier(r.v[e],r.o[e],r.i[t],r.v[t],!0)},PolynomialBezier.shapeSegmentInverted=function(r,e){var t=(e+1)%r.length();return new PolynomialBezier(r.v[t],r.i[t],r.o[e],r.v[e],!0)},extendPrototype([ShapeModifier],ZigZagModifier),ZigZagModifier.prototype.initModifierProperties=function(r,e){this.getValue=this.processKeys,this.amplitude=PropertyFactory.getProp(r,e.s,0,null,this),this.frequency=PropertyFactory.getProp(r,e.r,0,null,this),this.pointsType=PropertyFactory.getProp(r,e.pt,0,null,this),this._isAnimated=this.amplitude.effectsSequence.length!==0||this.frequency.effectsSequence.length!==0||this.pointsType.effectsSequence.length!==0},ZigZagModifier.prototype.processPath=function(r,e,t,o){var y=r._length,R=shapePool.newElement();if(R.c=r.c,r.c||(y-=1),y===0)return R;var G=-1,K=PolynomialBezier.shapeSegment(r,0);zigZagCorner(R,r,0,e,t,o,G);for(var Y=0;Y<y;Y+=1)G=zigZagSegment(R,K,e,t,o,-G),K=Y!==y-1||r.c?PolynomialBezier.shapeSegment(r,(Y+1)%y):null,zigZagCorner(R,r,Y+1,e,t,o,G);return R},ZigZagModifier.prototype.processShapes=function(r){var e,t,o,y,R,G,K=this.shapes.length,Y=this.amplitude.v,Q=Math.max(0,Math.round(this.frequency.v)),ee=this.pointsType.v;if(Y!==0)for(t=0;t<K;t+=1){if(G=(R=this.shapes[t]).localShapeCollection,R.shape._mdf||this._mdf||r)for(G.releaseShapes(),R.shape._mdf=!0,e=R.shape.paths.shapes,y=R.shape.paths._length,o=0;o<y;o+=1)G.addShape(this.processPath(e[o],Y,Q,ee));R.shape.paths=R.localShapeCollection}this.dynamicProperties.length||(this._mdf=!1)},extendPrototype([ShapeModifier],OffsetPathModifier),OffsetPathModifier.prototype.initModifierProperties=function(r,e){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(r,e.a,0,null,this),this.miterLimit=PropertyFactory.getProp(r,e.ml,0,null,this),this.lineJoin=e.lj,this._isAnimated=this.amount.effectsSequence.length!==0},OffsetPathModifier.prototype.processPath=function(r,e,t,o){var y=shapePool.newElement();y.c=r.c;var R,G,K,Y=r.length();r.c||(Y-=1);var Q=[];for(R=0;R<Y;R+=1)K=PolynomialBezier.shapeSegment(r,R),Q.push(offsetSegmentSplit(K,e));if(!r.c)for(R=Y-1;R>=0;R-=1)K=PolynomialBezier.shapeSegmentInverted(r,R),Q.push(offsetSegmentSplit(K,e));Q=pruneIntersections(Q);var ee=null,ie=null;for(R=0;R<Q.length;R+=1){var re=Q[R];for(ie&&(ee=joinLines(y,ie,re[0],t,o)),ie=re[re.length-1],G=0;G<re.length;G+=1)K=re[G],ee&&pointEqual(K.points[0],ee)?y.setXYAt(K.points[1][0],K.points[1][1],"o",y.length()-1):y.setTripleAt(K.points[0][0],K.points[0][1],K.points[1][0],K.points[1][1],K.points[0][0],K.points[0][1],y.length()),y.setTripleAt(K.points[3][0],K.points[3][1],K.points[3][0],K.points[3][1],K.points[2][0],K.points[2][1],y.length()),ee=K.points[3]}return Q.length&&joinLines(y,ie,Q[0][0],t,o),y},OffsetPathModifier.prototype.processShapes=function(r){var e,t,o,y,R,G,K=this.shapes.length,Y=this.amount.v,Q=this.miterLimit.v,ee=this.lineJoin;if(Y!==0)for(t=0;t<K;t+=1){if(G=(R=this.shapes[t]).localShapeCollection,R.shape._mdf||this._mdf||r)for(G.releaseShapes(),R.shape._mdf=!0,e=R.shape.paths.shapes,y=R.shape.paths._length,o=0;o<y;o+=1)G.addShape(this.processPath(e[o],Y,ee,Q));R.shape.paths=R.localShapeCollection}this.dynamicProperties.length||(this._mdf=!1)};var FontManager=function(){var r={w:0,size:0,shapes:[],data:{shapes:[]}},e=[];e=e.concat([2304,2305,2306,2307,2362,2363,2364,2364,2366,2367,2368,2369,2370,2371,2372,2373,2374,2375,2376,2377,2378,2379,2380,2381,2382,2383,2387,2388,2389,2390,2391,2402,2403]);var t=127988,o=["d83cdffb","d83cdffc","d83cdffd","d83cdffe","d83cdfff"];function y(ee,ie){var re=createTag("span");re.setAttribute("aria-hidden",!0),re.style.fontFamily=ie;var se=createTag("span");se.innerText="giItT1WQy@!-/#",re.style.position="absolute",re.style.left="-10000px",re.style.top="-10000px",re.style.fontSize="300px",re.style.fontVariant="normal",re.style.fontStyle="normal",re.style.fontWeight="normal",re.style.letterSpacing="0",re.appendChild(se),document.body.appendChild(re);var le=se.offsetWidth;return se.style.fontFamily=function(ce){var oe,ue=ce.split(","),ge=ue.length,ve=[];for(oe=0;oe<ge;oe+=1)ue[oe]!=="sans-serif"&&ue[oe]!=="monospace"&&ve.push(ue[oe]);return ve.join(",")}(ee)+", "+ie,{node:se,w:le,parent:re}}function R(ee,ie){var re,se=document.body&&ie?"svg":"canvas",le=getFontProperties(ee);if(se==="svg"){var ce=createNS("text");ce.style.fontSize="100px",ce.setAttribute("font-family",ee.fFamily),ce.setAttribute("font-style",le.style),ce.setAttribute("font-weight",le.weight),ce.textContent="1",ee.fClass?(ce.style.fontFamily="inherit",ce.setAttribute("class",ee.fClass)):ce.style.fontFamily=ee.fFamily,ie.appendChild(ce),re=ce}else{var oe=new OffscreenCanvas(500,500).getContext("2d");oe.font=le.style+" "+le.weight+" 100px "+ee.fFamily,re=oe}return{measureText:function(ue){return se==="svg"?(re.textContent=ue,re.getComputedTextLength()):re.measureText(ue).width}}}function G(ee){var ie=0,re=ee.charCodeAt(0);if(re>=55296&&re<=56319){var se=ee.charCodeAt(1);se>=56320&&se<=57343&&(ie=1024*(re-55296)+se-56320+65536)}return ie}function K(ee){var ie=G(ee);return ie>=127462&&ie<=127487}var Y=function(){this.fonts=[],this.chars=null,this.typekitLoaded=0,this.isLoaded=!1,this._warned=!1,this.initTime=Date.now(),this.setIsLoadedBinded=this.setIsLoaded.bind(this),this.checkLoadedFontsBinded=this.checkLoadedFonts.bind(this)};Y.isModifier=function(ee,ie){var re=ee.toString(16)+ie.toString(16);return o.indexOf(re)!==-1},Y.isZeroWidthJoiner=function(ee){return ee===8205},Y.isFlagEmoji=function(ee){return K(ee.substr(0,2))&&K(ee.substr(2,2))},Y.isRegionalCode=K,Y.isCombinedCharacter=function(ee){return e.indexOf(ee)!==-1},Y.isRegionalFlag=function(ee,ie){var re=G(ee.substr(ie,2));if(re!==t)return!1;var se=0;for(ie+=2;se<5;){if((re=G(ee.substr(ie,2)))<917601||re>917626)return!1;se+=1,ie+=2}return G(ee.substr(ie,2))===917631},Y.isVariationSelector=function(ee){return ee===65039},Y.BLACK_FLAG_CODE_POINT=t;var Q={addChars:function(ee){if(ee){var ie;this.chars||(this.chars=[]);var re,se,le=ee.length,ce=this.chars.length;for(ie=0;ie<le;ie+=1){for(re=0,se=!1;re<ce;)this.chars[re].style===ee[ie].style&&this.chars[re].fFamily===ee[ie].fFamily&&this.chars[re].ch===ee[ie].ch&&(se=!0),re+=1;se||(this.chars.push(ee[ie]),ce+=1)}}},addFonts:function(ee,ie){if(ee){if(this.chars)return this.isLoaded=!0,void(this.fonts=ee.list);if(!document.body)return this.isLoaded=!0,ee.list.forEach(function(Re){Re.helper=R(Re),Re.cache={}}),void(this.fonts=ee.list);var re,se=ee.list,le=se.length,ce=le;for(re=0;re<le;re+=1){var oe,ue,ge=!0;if(se[re].loaded=!1,se[re].monoCase=y(se[re].fFamily,"monospace"),se[re].sansCase=y(se[re].fFamily,"sans-serif"),se[re].fPath){if(se[re].fOrigin==="p"||se[re].origin===3){if((oe=document.querySelectorAll('style[f-forigin="p"][f-family="'+se[re].fFamily+'"], style[f-origin="3"][f-family="'+se[re].fFamily+'"]')).length>0&&(ge=!1),ge){var ve=createTag("style");ve.setAttribute("f-forigin",se[re].fOrigin),ve.setAttribute("f-origin",se[re].origin),ve.setAttribute("f-family",se[re].fFamily),ve.type="text/css",ve.innerText="@font-face {font-family: "+se[re].fFamily+"; font-style: normal; src: url('"+se[re].fPath+"');}",ie.appendChild(ve)}}else if(se[re].fOrigin==="g"||se[re].origin===1){for(oe=document.querySelectorAll('link[f-forigin="g"], link[f-origin="1"]'),ue=0;ue<oe.length;ue+=1)oe[ue].href.indexOf(se[re].fPath)!==-1&&(ge=!1);if(ge){var _e=createTag("link");_e.setAttribute("f-forigin",se[re].fOrigin),_e.setAttribute("f-origin",se[re].origin),_e.type="text/css",_e.rel="stylesheet",_e.href=se[re].fPath,document.body.appendChild(_e)}}else if(se[re].fOrigin==="t"||se[re].origin===2){for(oe=document.querySelectorAll('script[f-forigin="t"], script[f-origin="2"]'),ue=0;ue<oe.length;ue+=1)se[re].fPath===oe[ue].src&&(ge=!1);if(ge){var be=createTag("link");be.setAttribute("f-forigin",se[re].fOrigin),be.setAttribute("f-origin",se[re].origin),be.setAttribute("rel","stylesheet"),be.setAttribute("href",se[re].fPath),ie.appendChild(be)}}}else se[re].loaded=!0,ce-=1;se[re].helper=R(se[re],ie),se[re].cache={},this.fonts.push(se[re])}ce===0?this.isLoaded=!0:setTimeout(this.checkLoadedFonts.bind(this),100)}else this.isLoaded=!0},getCharData:function(ee,ie,re){for(var se=0,le=this.chars.length;se<le;){if(this.chars[se].ch===ee&&this.chars[se].style===ie&&this.chars[se].fFamily===re)return this.chars[se];se+=1}return(typeof ee=="string"&&ee.charCodeAt(0)!==13||!ee)&&console&&console.warn&&!this._warned&&(this._warned=!0,console.warn("Missing character from exported characters list: ",ee,ie,re)),r},getFontByName:function(ee){for(var ie=0,re=this.fonts.length;ie<re;){if(this.fonts[ie].fName===ee)return this.fonts[ie];ie+=1}return this.fonts[0]},measureText:function(ee,ie,re){var se=this.getFontByName(ie),le=ee;if(!se.cache[le]){var ce=se.helper;if(ee===" "){var oe=ce.measureText("|"+ee+"|"),ue=ce.measureText("||");se.cache[le]=(oe-ue)/100}else se.cache[le]=ce.measureText(ee)/100}return se.cache[le]*re},checkLoadedFonts:function(){var ee,ie,re,se=this.fonts.length,le=se;for(ee=0;ee<se;ee+=1)this.fonts[ee].loaded?le-=1:this.fonts[ee].fOrigin==="n"||this.fonts[ee].origin===0?this.fonts[ee].loaded=!0:(ie=this.fonts[ee].monoCase.node,re=this.fonts[ee].monoCase.w,ie.offsetWidth!==re?(le-=1,this.fonts[ee].loaded=!0):(ie=this.fonts[ee].sansCase.node,re=this.fonts[ee].sansCase.w,ie.offsetWidth!==re&&(le-=1,this.fonts[ee].loaded=!0)),this.fonts[ee].loaded&&(this.fonts[ee].sansCase.parent.parentNode.removeChild(this.fonts[ee].sansCase.parent),this.fonts[ee].monoCase.parent.parentNode.removeChild(this.fonts[ee].monoCase.parent)));le!==0&&Date.now()-this.initTime<5e3?setTimeout(this.checkLoadedFontsBinded,20):setTimeout(this.setIsLoadedBinded,10)},setIsLoaded:function(){this.isLoaded=!0}};return Y.prototype=Q,Y}();function SlotManager(r){this.animationData=r}function slotFactory(r){return new SlotManager(r)}function RenderableElement(){}SlotManager.prototype.getProp=function(r){return this.animationData.slots&&this.animationData.slots[r.sid]?Object.assign(r,this.animationData.slots[r.sid].p):r},RenderableElement.prototype={initRenderable:function(){this.isInRange=!1,this.hidden=!1,this.isTransparent=!1,this.renderableComponents=[]},addRenderableComponent:function(r){this.renderableComponents.indexOf(r)===-1&&this.renderableComponents.push(r)},removeRenderableComponent:function(r){this.renderableComponents.indexOf(r)!==-1&&this.renderableComponents.splice(this.renderableComponents.indexOf(r),1)},prepareRenderableFrame:function(r){this.checkLayerLimits(r)},checkTransparency:function(){this.finalTransform.mProp.o.v<=0?!this.isTransparent&&this.globalData.renderConfig.hideOnTransparent&&(this.isTransparent=!0,this.hide()):this.isTransparent&&(this.isTransparent=!1,this.show())},checkLayerLimits:function(r){this.data.ip-this.data.st<=r&&this.data.op-this.data.st>r?this.isInRange!==!0&&(this.globalData._mdf=!0,this._mdf=!0,this.isInRange=!0,this.show()):this.isInRange!==!1&&(this.globalData._mdf=!0,this.isInRange=!1,this.hide())},renderRenderable:function(){var r,e=this.renderableComponents.length;for(r=0;r<e;r+=1)this.renderableComponents[r].renderFrame(this._isFirstFrame)},sourceRectAtTime:function(){return{top:0,left:0,width:100,height:100}},getLayerSize:function(){return this.data.ty===5?{w:this.data.textData.width,h:this.data.textData.height}:{w:this.data.width,h:this.data.height}}};var getBlendMode=(blendModeEnums={0:"source-over",1:"multiply",2:"screen",3:"overlay",4:"darken",5:"lighten",6:"color-dodge",7:"color-burn",8:"hard-light",9:"soft-light",10:"difference",11:"exclusion",12:"hue",13:"saturation",14:"color",15:"luminosity"},function(r){return blendModeEnums[r]||""}),blendModeEnums;function SliderEffect(r,e,t){this.p=PropertyFactory.getProp(e,r.v,0,0,t)}function AngleEffect(r,e,t){this.p=PropertyFactory.getProp(e,r.v,0,0,t)}function ColorEffect(r,e,t){this.p=PropertyFactory.getProp(e,r.v,1,0,t)}function PointEffect(r,e,t){this.p=PropertyFactory.getProp(e,r.v,1,0,t)}function LayerIndexEffect(r,e,t){this.p=PropertyFactory.getProp(e,r.v,0,0,t)}function MaskIndexEffect(r,e,t){this.p=PropertyFactory.getProp(e,r.v,0,0,t)}function CheckboxEffect(r,e,t){this.p=PropertyFactory.getProp(e,r.v,0,0,t)}function NoValueEffect(){this.p={}}function EffectsManager(r,e){var t,o=r.ef||[];this.effectElements=[];var y,R=o.length;for(t=0;t<R;t+=1)y=new GroupEffect(o[t],e),this.effectElements.push(y)}function GroupEffect(r,e){this.init(r,e)}function BaseElement(){}function FrameElement(){}function FootageElement(r,e,t){this.initFrame(),this.initRenderable(),this.assetData=e.getAssetData(r.refId),this.footageData=e.imageLoader.getAsset(this.assetData),this.initBaseData(r,e,t)}function AudioElement(r,e,t){this.initFrame(),this.initRenderable(),this.assetData=e.getAssetData(r.refId),this.initBaseData(r,e,t),this._isPlaying=!1,this._canPlay=!1;var o=this.globalData.getAssetsPath(this.assetData);this.audio=this.globalData.audioController.createAudio(o),this._currentTime=0,this.globalData.audioController.addAudio(this),this._volumeMultiplier=1,this._volume=1,this._previousVolume=null,this.tm=r.tm?PropertyFactory.getProp(this,r.tm,0,e.frameRate,this):{_placeholder:!0},this.lv=PropertyFactory.getProp(this,r.au&&r.au.lv?r.au.lv:{k:[100]},1,.01,this)}function BaseRenderer(){}extendPrototype([DynamicPropertyContainer],GroupEffect),GroupEffect.prototype.getValue=GroupEffect.prototype.iterateDynamicProperties,GroupEffect.prototype.init=function(r,e){var t;this.data=r,this.effectElements=[],this.initDynamicPropertyContainer(e);var o,y=this.data.ef.length,R=this.data.ef;for(t=0;t<y;t+=1){switch(o=null,R[t].ty){case 0:o=new SliderEffect(R[t],e,this);break;case 1:o=new AngleEffect(R[t],e,this);break;case 2:o=new ColorEffect(R[t],e,this);break;case 3:o=new PointEffect(R[t],e,this);break;case 4:case 7:o=new CheckboxEffect(R[t],e,this);break;case 10:o=new LayerIndexEffect(R[t],e,this);break;case 11:o=new MaskIndexEffect(R[t],e,this);break;case 5:o=new EffectsManager(R[t],e);break;default:o=new NoValueEffect(R[t])}o&&this.effectElements.push(o)}},BaseElement.prototype={checkMasks:function(){if(!this.data.hasMask)return!1;for(var r=0,e=this.data.masksProperties.length;r<e;){if(this.data.masksProperties[r].mode!=="n"&&this.data.masksProperties[r].cl!==!1)return!0;r+=1}return!1},initExpressions:function(){var r=getExpressionInterfaces();if(r){var e=r("layer"),t=r("effects"),o=r("shape"),y=r("text"),R=r("comp");this.layerInterface=e(this),this.data.hasMask&&this.maskManager&&this.layerInterface.registerMaskInterface(this.maskManager);var G=t.createEffectsInterface(this,this.layerInterface);this.layerInterface.registerEffectsInterface(G),this.data.ty===0||this.data.xt?this.compInterface=R(this):this.data.ty===4?(this.layerInterface.shapeInterface=o(this.shapesData,this.itemsData,this.layerInterface),this.layerInterface.content=this.layerInterface.shapeInterface):this.data.ty===5&&(this.layerInterface.textInterface=y(this),this.layerInterface.text=this.layerInterface.textInterface)}},setBlendMode:function(){var r=getBlendMode(this.data.bm);(this.baseElement||this.layerElement).style["mix-blend-mode"]=r},initBaseData:function(r,e,t){this.globalData=e,this.comp=t,this.data=r,this.layerId=createElementID(),this.data.sr||(this.data.sr=1),this.effectsManager=new EffectsManager(this.data,this,this.dynamicProperties)},getType:function(){return this.type},sourceRectAtTime:function(){}},FrameElement.prototype={initFrame:function(){this._isFirstFrame=!1,this.dynamicProperties=[],this._mdf=!1},prepareProperties:function(r,e){var t,o=this.dynamicProperties.length;for(t=0;t<o;t+=1)(e||this._isParent&&this.dynamicProperties[t].propType==="transform")&&(this.dynamicProperties[t].getValue(),this.dynamicProperties[t]._mdf&&(this.globalData._mdf=!0,this._mdf=!0))},addDynamicProperty:function(r){this.dynamicProperties.indexOf(r)===-1&&this.dynamicProperties.push(r)}},FootageElement.prototype.prepareFrame=function(){},extendPrototype([RenderableElement,BaseElement,FrameElement],FootageElement),FootageElement.prototype.getBaseElement=function(){return null},FootageElement.prototype.renderFrame=function(){},FootageElement.prototype.destroy=function(){},FootageElement.prototype.initExpressions=function(){var r=getExpressionInterfaces();if(r){var e=r("footage");this.layerInterface=e(this)}},FootageElement.prototype.getFootageData=function(){return this.footageData},AudioElement.prototype.prepareFrame=function(r){if(this.prepareRenderableFrame(r,!0),this.prepareProperties(r,!0),this.tm._placeholder)this._currentTime=r/this.data.sr;else{var e=this.tm.v;this._currentTime=e}this._volume=this.lv.v[0];var t=this._volume*this._volumeMultiplier;this._previousVolume!==t&&(this._previousVolume=t,this.audio.volume(t))},extendPrototype([RenderableElement,BaseElement,FrameElement],AudioElement),AudioElement.prototype.renderFrame=function(){this.isInRange&&this._canPlay&&(this._isPlaying?(!this.audio.playing()||Math.abs(this._currentTime/this.globalData.frameRate-this.audio.seek())>.1)&&this.audio.seek(this._currentTime/this.globalData.frameRate):(this.audio.play(),this.audio.seek(this._currentTime/this.globalData.frameRate),this._isPlaying=!0))},AudioElement.prototype.show=function(){},AudioElement.prototype.hide=function(){this.audio.pause(),this._isPlaying=!1},AudioElement.prototype.pause=function(){this.audio.pause(),this._isPlaying=!1,this._canPlay=!1},AudioElement.prototype.resume=function(){this._canPlay=!0},AudioElement.prototype.setRate=function(r){this.audio.rate(r)},AudioElement.prototype.volume=function(r){this._volumeMultiplier=r,this._previousVolume=r*this._volume,this.audio.volume(this._previousVolume)},AudioElement.prototype.getBaseElement=function(){return null},AudioElement.prototype.destroy=function(){},AudioElement.prototype.sourceRectAtTime=function(){},AudioElement.prototype.initExpressions=function(){},BaseRenderer.prototype.checkLayers=function(r){var e,t,o=this.layers.length;for(this.completeLayers=!0,e=o-1;e>=0;e-=1)this.elements[e]||(t=this.layers[e]).ip-t.st<=r-this.layers[e].st&&t.op-t.st>r-this.layers[e].st&&this.buildItem(e),this.completeLayers=!!this.elements[e]&&this.completeLayers;this.checkPendingElements()},BaseRenderer.prototype.createItem=function(r){switch(r.ty){case 2:return this.createImage(r);case 0:return this.createComp(r);case 1:return this.createSolid(r);case 3:default:return this.createNull(r);case 4:return this.createShape(r);case 5:return this.createText(r);case 6:return this.createAudio(r);case 13:return this.createCamera(r);case 15:return this.createFootage(r)}},BaseRenderer.prototype.createCamera=function(){throw new Error("You're using a 3d camera. Try the html renderer.")},BaseRenderer.prototype.createAudio=function(r){return new AudioElement(r,this.globalData,this)},BaseRenderer.prototype.createFootage=function(r){return new FootageElement(r,this.globalData,this)},BaseRenderer.prototype.buildAllItems=function(){var r,e=this.layers.length;for(r=0;r<e;r+=1)this.buildItem(r);this.checkPendingElements()},BaseRenderer.prototype.includeLayers=function(r){var e;this.completeLayers=!1;var t,o=r.length,y=this.layers.length;for(e=0;e<o;e+=1)for(t=0;t<y;){if(this.layers[t].id===r[e].id){this.layers[t]=r[e];break}t+=1}},BaseRenderer.prototype.setProjectInterface=function(r){this.globalData.projectInterface=r},BaseRenderer.prototype.initItems=function(){this.globalData.progressiveLoad||this.buildAllItems()},BaseRenderer.prototype.buildElementParenting=function(r,e,t){for(var o=this.elements,y=this.layers,R=0,G=y.length;R<G;)y[R].ind==e&&(o[R]&&o[R]!==!0?(t.push(o[R]),o[R].setAsParent(),y[R].parent!==void 0?this.buildElementParenting(r,y[R].parent,t):r.setHierarchy(t)):(this.buildItem(R),this.addPendingElement(r))),R+=1},BaseRenderer.prototype.addPendingElement=function(r){this.pendingElements.push(r)},BaseRenderer.prototype.searchExtraCompositions=function(r){var e,t=r.length;for(e=0;e<t;e+=1)if(r[e].xt){var o=this.createComp(r[e]);o.initExpressions(),this.globalData.projectInterface.registerComposition(o)}},BaseRenderer.prototype.getElementById=function(r){var e,t=this.elements.length;for(e=0;e<t;e+=1)if(this.elements[e].data.ind===r)return this.elements[e];return null},BaseRenderer.prototype.getElementByPath=function(r){var e,t=r.shift();if(typeof t=="number")e=this.elements[t];else{var o,y=this.elements.length;for(o=0;o<y;o+=1)if(this.elements[o].data.nm===t){e=this.elements[o];break}}return r.length===0?e:e.getElementByPath(r)},BaseRenderer.prototype.setupGlobalData=function(r,e){this.globalData.fontManager=new FontManager,this.globalData.slotManager=slotFactory(r),this.globalData.fontManager.addChars(r.chars),this.globalData.fontManager.addFonts(r.fonts,e),this.globalData.getAssetData=this.animationItem.getAssetData.bind(this.animationItem),this.globalData.getAssetsPath=this.animationItem.getAssetsPath.bind(this.animationItem),this.globalData.imageLoader=this.animationItem.imagePreloader,this.globalData.audioController=this.animationItem.audioController,this.globalData.frameId=0,this.globalData.frameRate=r.fr,this.globalData.nm=r.nm,this.globalData.compSize={w:r.w,h:r.h}};var effectTypes={TRANSFORM_EFFECT:"transformEFfect"};function TransformElement(){}function MaskElement(r,e,t){this.data=r,this.element=e,this.globalData=t,this.storedData=[],this.masksProperties=this.data.masksProperties||[],this.maskElement=null;var o,y,R=this.globalData.defs,G=this.masksProperties?this.masksProperties.length:0;this.viewData=createSizedArray(G),this.solidPath="";var K,Y,Q,ee,ie,re,se=this.masksProperties,le=0,ce=[],oe=createElementID(),ue="clipPath",ge="clip-path";for(o=0;o<G;o+=1)if((se[o].mode!=="a"&&se[o].mode!=="n"||se[o].inv||se[o].o.k!==100||se[o].o.x)&&(ue="mask",ge="mask"),se[o].mode!=="s"&&se[o].mode!=="i"||le!==0?Q=null:((Q=createNS("rect")).setAttribute("fill","#ffffff"),Q.setAttribute("width",this.element.comp.data.w||0),Q.setAttribute("height",this.element.comp.data.h||0),ce.push(Q)),y=createNS("path"),se[o].mode==="n")this.viewData[o]={op:PropertyFactory.getProp(this.element,se[o].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,se[o],3),elem:y,lastPath:""},R.appendChild(y);else{var ve;if(le+=1,y.setAttribute("fill",se[o].mode==="s"?"#000000":"#ffffff"),y.setAttribute("clip-rule","nonzero"),se[o].x.k!==0?(ue="mask",ge="mask",re=PropertyFactory.getProp(this.element,se[o].x,0,null,this.element),ve=createElementID(),(ee=createNS("filter")).setAttribute("id",ve),(ie=createNS("feMorphology")).setAttribute("operator","erode"),ie.setAttribute("in","SourceGraphic"),ie.setAttribute("radius","0"),ee.appendChild(ie),R.appendChild(ee),y.setAttribute("stroke",se[o].mode==="s"?"#000000":"#ffffff")):(ie=null,re=null),this.storedData[o]={elem:y,x:re,expan:ie,lastPath:"",lastOperator:"",filterId:ve,lastRadius:0},se[o].mode==="i"){Y=ce.length;var _e=createNS("g");for(K=0;K<Y;K+=1)_e.appendChild(ce[K]);var be=createNS("mask");be.setAttribute("mask-type","alpha"),be.setAttribute("id",oe+"_"+le),be.appendChild(y),R.appendChild(be),_e.setAttribute("mask","url("+getLocationHref()+"#"+oe+"_"+le+")"),ce.length=0,ce.push(_e)}else ce.push(y);se[o].inv&&!this.solidPath&&(this.solidPath=this.createLayerSolidPath()),this.viewData[o]={elem:y,lastPath:"",op:PropertyFactory.getProp(this.element,se[o].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,se[o],3),invRect:Q},this.viewData[o].prop.k||this.drawPath(se[o],this.viewData[o].prop.v,this.viewData[o])}for(this.maskElement=createNS(ue),G=ce.length,o=0;o<G;o+=1)this.maskElement.appendChild(ce[o]);le>0&&(this.maskElement.setAttribute("id",oe),this.element.maskedElement.setAttribute(ge,"url("+getLocationHref()+"#"+oe+")"),R.appendChild(this.maskElement)),this.viewData.length&&this.element.addRenderableComponent(this)}TransformElement.prototype={initTransform:function(){var r=new Matrix;this.finalTransform={mProp:this.data.ks?TransformPropertyFactory.getTransformProperty(this,this.data.ks,this):{o:0},_matMdf:!1,_localMatMdf:!1,_opMdf:!1,mat:r,localMat:r,localOpacity:1},this.data.ao&&(this.finalTransform.mProp.autoOriented=!0),this.data.ty},renderTransform:function(){if(this.finalTransform._opMdf=this.finalTransform.mProp.o._mdf||this._isFirstFrame,this.finalTransform._matMdf=this.finalTransform.mProp._mdf||this._isFirstFrame,this.hierarchy){var r,e=this.finalTransform.mat,t=0,o=this.hierarchy.length;if(!this.finalTransform._matMdf)for(;t<o;){if(this.hierarchy[t].finalTransform.mProp._mdf){this.finalTransform._matMdf=!0;break}t+=1}if(this.finalTransform._matMdf)for(r=this.finalTransform.mProp.v.props,e.cloneFromProps(r),t=0;t<o;t+=1)e.multiply(this.hierarchy[t].finalTransform.mProp.v)}this.finalTransform._matMdf&&(this.finalTransform._localMatMdf=this.finalTransform._matMdf),this.finalTransform._opMdf&&(this.finalTransform.localOpacity=this.finalTransform.mProp.o.v)},renderLocalTransform:function(){if(this.localTransforms){var r=0,e=this.localTransforms.length;if(this.finalTransform._localMatMdf=this.finalTransform._matMdf,!this.finalTransform._localMatMdf||!this.finalTransform._opMdf)for(;r<e;)this.localTransforms[r]._mdf&&(this.finalTransform._localMatMdf=!0),this.localTransforms[r]._opMdf&&!this.finalTransform._opMdf&&(this.finalTransform.localOpacity=this.finalTransform.mProp.o.v,this.finalTransform._opMdf=!0),r+=1;if(this.finalTransform._localMatMdf){var t=this.finalTransform.localMat;for(this.localTransforms[0].matrix.clone(t),r=1;r<e;r+=1){var o=this.localTransforms[r].matrix;t.multiply(o)}t.multiply(this.finalTransform.mat)}if(this.finalTransform._opMdf){var y=this.finalTransform.localOpacity;for(r=0;r<e;r+=1)y*=.01*this.localTransforms[r].opacity;this.finalTransform.localOpacity=y}}},searchEffectTransforms:function(){if(this.renderableEffectsManager){var r=this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT);if(r.length){this.localTransforms=[],this.finalTransform.localMat=new Matrix;var e=0,t=r.length;for(e=0;e<t;e+=1)this.localTransforms.push(r[e])}}},globalToLocal:function(r){var e=[];e.push(this.finalTransform);for(var t,o=!0,y=this.comp;o;)y.finalTransform?(y.data.hasMask&&e.splice(0,0,y.finalTransform),y=y.comp):o=!1;var R,G=e.length;for(t=0;t<G;t+=1)R=e[t].mat.applyToPointArray(0,0,0),r=[r[0]-R[0],r[1]-R[1],0];return r},mHelper:new Matrix},MaskElement.prototype.getMaskProperty=function(r){return this.viewData[r].prop},MaskElement.prototype.renderFrame=function(r){var e,t=this.element.finalTransform.mat,o=this.masksProperties.length;for(e=0;e<o;e+=1)if((this.viewData[e].prop._mdf||r)&&this.drawPath(this.masksProperties[e],this.viewData[e].prop.v,this.viewData[e]),(this.viewData[e].op._mdf||r)&&this.viewData[e].elem.setAttribute("fill-opacity",this.viewData[e].op.v),this.masksProperties[e].mode!=="n"&&(this.viewData[e].invRect&&(this.element.finalTransform.mProp._mdf||r)&&this.viewData[e].invRect.setAttribute("transform",t.getInverseMatrix().to2dCSS()),this.storedData[e].x&&(this.storedData[e].x._mdf||r))){var y=this.storedData[e].expan;this.storedData[e].x.v<0?(this.storedData[e].lastOperator!=="erode"&&(this.storedData[e].lastOperator="erode",this.storedData[e].elem.setAttribute("filter","url("+getLocationHref()+"#"+this.storedData[e].filterId+")")),y.setAttribute("radius",-this.storedData[e].x.v)):(this.storedData[e].lastOperator!=="dilate"&&(this.storedData[e].lastOperator="dilate",this.storedData[e].elem.setAttribute("filter",null)),this.storedData[e].elem.setAttribute("stroke-width",2*this.storedData[e].x.v))}},MaskElement.prototype.getMaskelement=function(){return this.maskElement},MaskElement.prototype.createLayerSolidPath=function(){var r="M0,0 ";return r+=" h"+this.globalData.compSize.w,r+=" v"+this.globalData.compSize.h,r+=" h-"+this.globalData.compSize.w,r+=" v-"+this.globalData.compSize.h+" "},MaskElement.prototype.drawPath=function(r,e,t){var o,y,R=" M"+e.v[0][0]+","+e.v[0][1];for(y=e._length,o=1;o<y;o+=1)R+=" C"+e.o[o-1][0]+","+e.o[o-1][1]+" "+e.i[o][0]+","+e.i[o][1]+" "+e.v[o][0]+","+e.v[o][1];if(e.c&&y>1&&(R+=" C"+e.o[o-1][0]+","+e.o[o-1][1]+" "+e.i[0][0]+","+e.i[0][1]+" "+e.v[0][0]+","+e.v[0][1]),t.lastPath!==R){var G="";t.elem&&(e.c&&(G=r.inv?this.solidPath+R:R),t.elem.setAttribute("d",G)),t.lastPath=R}},MaskElement.prototype.destroy=function(){this.element=null,this.globalData=null,this.maskElement=null,this.data=null,this.masksProperties=null};var filtersFactory=function(){var r={createFilter:function(e,t){var o=createNS("filter");return o.setAttribute("id",e),t!==!0&&(o.setAttribute("filterUnits","objectBoundingBox"),o.setAttribute("x","0%"),o.setAttribute("y","0%"),o.setAttribute("width","100%"),o.setAttribute("height","100%")),o},createAlphaToLuminanceFilter:function(){var e=createNS("feColorMatrix");return e.setAttribute("type","matrix"),e.setAttribute("color-interpolation-filters","sRGB"),e.setAttribute("values","0 0 0 1 0  0 0 0 1 0  0 0 0 1 0  0 0 0 1 1"),e}};return r}(),featureSupport=function(){var r={maskType:!0,svgLumaHidden:!0,offscreenCanvas:typeof OffscreenCanvas<"u"};return(/MSIE 10/i.test(navigator.userAgent)||/MSIE 9/i.test(navigator.userAgent)||/rv:11.0/i.test(navigator.userAgent)||/Edge\/\d./i.test(navigator.userAgent))&&(r.maskType=!1),/firefox/i.test(navigator.userAgent)&&(r.svgLumaHidden=!1),r}(),registeredEffects$1={},idPrefix="filter_result_";function SVGEffects(r){var e,t,o="SourceGraphic",y=r.data.ef?r.data.ef.length:0,R=createElementID(),G=filtersFactory.createFilter(R,!0),K=0;for(this.filters=[],e=0;e<y;e+=1){t=null;var Y=r.data.ef[e].ty;registeredEffects$1[Y]&&(t=new registeredEffects$1[Y].effect(G,r.effectsManager.effectElements[e],r,idPrefix+K,o),o=idPrefix+K,registeredEffects$1[Y].countsAsEffect&&(K+=1)),t&&this.filters.push(t)}K&&(r.globalData.defs.appendChild(G),r.layerElement.setAttribute("filter","url("+getLocationHref()+"#"+R+")")),this.filters.length&&r.addRenderableComponent(this)}function registerEffect$1(r,e,t){registeredEffects$1[r]={effect:e,countsAsEffect:t}}function SVGBaseElement(){}function HierarchyElement(){}function RenderableDOMElement(){}function IImageElement(r,e,t){this.assetData=e.getAssetData(r.refId),this.assetData&&this.assetData.sid&&(this.assetData=e.slotManager.getProp(this.assetData)),this.initElement(r,e,t),this.sourceRect={top:0,left:0,width:this.assetData.w,height:this.assetData.h}}function ProcessedElement(r,e){this.elem=r,this.pos=e}function IShapeElement(){}SVGEffects.prototype.renderFrame=function(r){var e,t=this.filters.length;for(e=0;e<t;e+=1)this.filters[e].renderFrame(r)},SVGEffects.prototype.getEffects=function(r){var e,t=this.filters.length,o=[];for(e=0;e<t;e+=1)this.filters[e].type===r&&o.push(this.filters[e]);return o},SVGBaseElement.prototype={initRendererElement:function(){this.layerElement=createNS("g")},createContainerElements:function(){this.matteElement=createNS("g"),this.transformedElement=this.layerElement,this.maskedElement=this.layerElement,this._sizeChanged=!1;var r=null;if(this.data.td){this.matteMasks={};var e=createNS("g");e.setAttribute("id",this.layerId),e.appendChild(this.layerElement),r=e,this.globalData.defs.appendChild(e)}else this.data.tt?(this.matteElement.appendChild(this.layerElement),r=this.matteElement,this.baseElement=this.matteElement):this.baseElement=this.layerElement;if(this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),this.data.ty===0&&!this.data.hd){var t=createNS("clipPath"),o=createNS("path");o.setAttribute("d","M0,0 L"+this.data.w+",0 L"+this.data.w+","+this.data.h+" L0,"+this.data.h+"z");var y=createElementID();if(t.setAttribute("id",y),t.appendChild(o),this.globalData.defs.appendChild(t),this.checkMasks()){var R=createNS("g");R.setAttribute("clip-path","url("+getLocationHref()+"#"+y+")"),R.appendChild(this.layerElement),this.transformedElement=R,r?r.appendChild(this.transformedElement):this.baseElement=this.transformedElement}else this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+y+")")}this.data.bm!==0&&this.setBlendMode()},renderElement:function(){this.finalTransform._localMatMdf&&this.transformedElement.setAttribute("transform",this.finalTransform.localMat.to2dCSS()),this.finalTransform._opMdf&&this.transformedElement.setAttribute("opacity",this.finalTransform.localOpacity)},destroyBaseElement:function(){this.layerElement=null,this.matteElement=null,this.maskManager.destroy()},getBaseElement:function(){return this.data.hd?null:this.baseElement},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData),this.renderableEffectsManager=new SVGEffects(this),this.searchEffectTransforms()},getMatte:function(r){if(this.matteMasks||(this.matteMasks={}),!this.matteMasks[r]){var e,t,o,y,R=this.layerId+"_"+r;if(r===1||r===3){var G=createNS("mask");G.setAttribute("id",R),G.setAttribute("mask-type",r===3?"luminance":"alpha"),(o=createNS("use")).setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),G.appendChild(o),this.globalData.defs.appendChild(G),featureSupport.maskType||r!==1||(G.setAttribute("mask-type","luminance"),e=createElementID(),t=filtersFactory.createFilter(e),this.globalData.defs.appendChild(t),t.appendChild(filtersFactory.createAlphaToLuminanceFilter()),(y=createNS("g")).appendChild(o),G.appendChild(y),y.setAttribute("filter","url("+getLocationHref()+"#"+e+")"))}else if(r===2){var K=createNS("mask");K.setAttribute("id",R),K.setAttribute("mask-type","alpha");var Y=createNS("g");K.appendChild(Y),e=createElementID(),t=filtersFactory.createFilter(e);var Q=createNS("feComponentTransfer");Q.setAttribute("in","SourceGraphic"),t.appendChild(Q);var ee=createNS("feFuncA");ee.setAttribute("type","table"),ee.setAttribute("tableValues","1.0 0.0"),Q.appendChild(ee),this.globalData.defs.appendChild(t);var ie=createNS("rect");ie.setAttribute("width",this.comp.data.w),ie.setAttribute("height",this.comp.data.h),ie.setAttribute("x","0"),ie.setAttribute("y","0"),ie.setAttribute("fill","#ffffff"),ie.setAttribute("opacity","0"),Y.setAttribute("filter","url("+getLocationHref()+"#"+e+")"),Y.appendChild(ie),(o=createNS("use")).setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),Y.appendChild(o),featureSupport.maskType||(K.setAttribute("mask-type","luminance"),t.appendChild(filtersFactory.createAlphaToLuminanceFilter()),y=createNS("g"),Y.appendChild(ie),y.appendChild(this.layerElement),Y.appendChild(y)),this.globalData.defs.appendChild(K)}this.matteMasks[r]=R}return this.matteMasks[r]},setMatte:function(r){this.matteElement&&this.matteElement.setAttribute("mask","url("+getLocationHref()+"#"+r+")")}},HierarchyElement.prototype={initHierarchy:function(){this.hierarchy=[],this._isParent=!1,this.checkParenting()},setHierarchy:function(r){this.hierarchy=r},setAsParent:function(){this._isParent=!0},checkParenting:function(){this.data.parent!==void 0&&this.comp.buildElementParenting(this,this.data.parent,[])}},extendPrototype([RenderableElement,createProxyFunction({initElement:function(r,e,t){this.initFrame(),this.initBaseData(r,e,t),this.initTransform(r,e,t),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide()},hide:function(){this.hidden||this.isInRange&&!this.isTransparent||((this.baseElement||this.layerElement).style.display="none",this.hidden=!0)},show:function(){this.isInRange&&!this.isTransparent&&(this.data.hd||((this.baseElement||this.layerElement).style.display="block"),this.hidden=!1,this._isFirstFrame=!0)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderLocalTransform(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},renderInnerContent:function(){},prepareFrame:function(r){this._mdf=!1,this.prepareRenderableFrame(r),this.prepareProperties(r,this.isInRange),this.checkTransparency()},destroy:function(){this.innerElem=null,this.destroyBaseElement()}})],RenderableDOMElement),extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],IImageElement),IImageElement.prototype.createContent=function(){var r=this.globalData.getAssetsPath(this.assetData);this.innerElem=createNS("image"),this.innerElem.setAttribute("width",this.assetData.w+"px"),this.innerElem.setAttribute("height",this.assetData.h+"px"),this.innerElem.setAttribute("preserveAspectRatio",this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio),this.innerElem.setAttributeNS("http://www.w3.org/1999/xlink","href",r),this.layerElement.appendChild(this.innerElem)},IImageElement.prototype.sourceRectAtTime=function(){return this.sourceRect},IShapeElement.prototype={addShapeToModifiers:function(r){var e,t=this.shapeModifiers.length;for(e=0;e<t;e+=1)this.shapeModifiers[e].addShape(r)},isShapeInAnimatedModifiers:function(r){for(var e=this.shapeModifiers.length;0<e;)if(this.shapeModifiers[0].isAnimatedWithShape(r))return!0;return!1},renderModifiers:function(){if(this.shapeModifiers.length){var r,e=this.shapes.length;for(r=0;r<e;r+=1)this.shapes[r].sh.reset();for(r=(e=this.shapeModifiers.length)-1;r>=0&&!this.shapeModifiers[r].processShapes(this._isFirstFrame);r-=1);}},searchProcessedElement:function(r){for(var e=this.processedElements,t=0,o=e.length;t<o;){if(e[t].elem===r)return e[t].pos;t+=1}return 0},addProcessedElement:function(r,e){for(var t=this.processedElements,o=t.length;o;)if(t[o-=1].elem===r)return void(t[o].pos=e);t.push(new ProcessedElement(r,e))},prepareFrame:function(r){this.prepareRenderableFrame(r),this.prepareProperties(r,this.isInRange)}};var lineCapEnum={1:"butt",2:"round",3:"square"},lineJoinEnum={1:"miter",2:"round",3:"bevel"};function SVGShapeData(r,e,t){this.caches=[],this.styles=[],this.transformers=r,this.lStr="",this.sh=t,this.lvl=e,this._isAnimated=!!t.k;for(var o=0,y=r.length;o<y;){if(r[o].mProps.dynamicProperties.length){this._isAnimated=!0;break}o+=1}}function SVGStyleData(r,e){this.data=r,this.type=r.ty,this.d="",this.lvl=e,this._mdf=!1,this.closed=r.hd===!0,this.pElem=createNS("path"),this.msElem=null}function DashProperty(r,e,t,o){var y;this.elem=r,this.frameId=-1,this.dataProps=createSizedArray(e.length),this.renderer=t,this.k=!1,this.dashStr="",this.dashArray=createTypedArray("float32",e.length?e.length-1:0),this.dashoffset=createTypedArray("float32",1),this.initDynamicPropertyContainer(o);var R,G=e.length||0;for(y=0;y<G;y+=1)R=PropertyFactory.getProp(r,e[y].v,0,0,this),this.k=R.k||this.k,this.dataProps[y]={n:e[y].n,p:R};this.k||this.getValue(!0),this._isAnimated=this.k}function SVGStrokeStyleData(r,e,t){this.initDynamicPropertyContainer(r),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(r,e.o,0,.01,this),this.w=PropertyFactory.getProp(r,e.w,0,null,this),this.d=new DashProperty(r,e.d||{},"svg",this),this.c=PropertyFactory.getProp(r,e.c,1,255,this),this.style=t,this._isAnimated=!!this._isAnimated}function SVGFillStyleData(r,e,t){this.initDynamicPropertyContainer(r),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(r,e.o,0,.01,this),this.c=PropertyFactory.getProp(r,e.c,1,255,this),this.style=t}function SVGNoStyleData(r,e,t){this.initDynamicPropertyContainer(r),this.getValue=this.iterateDynamicProperties,this.style=t}function GradientProperty(r,e,t){this.data=e,this.c=createTypedArray("uint8c",4*e.p);var o=e.k.k[0].s?e.k.k[0].s.length-4*e.p:e.k.k.length-4*e.p;this.o=createTypedArray("float32",o),this._cmdf=!1,this._omdf=!1,this._collapsable=this.checkCollapsable(),this._hasOpacity=o,this.initDynamicPropertyContainer(t),this.prop=PropertyFactory.getProp(r,e.k,1,null,this),this.k=this.prop.k,this.getValue(!0)}function SVGGradientFillStyleData(r,e,t){this.initDynamicPropertyContainer(r),this.getValue=this.iterateDynamicProperties,this.initGradientData(r,e,t)}function SVGGradientStrokeStyleData(r,e,t){this.initDynamicPropertyContainer(r),this.getValue=this.iterateDynamicProperties,this.w=PropertyFactory.getProp(r,e.w,0,null,this),this.d=new DashProperty(r,e.d||{},"svg",this),this.initGradientData(r,e,t),this._isAnimated=!!this._isAnimated}function ShapeGroupData(){this.it=[],this.prevViewData=[],this.gr=createNS("g")}function SVGTransformData(r,e,t){this.transform={mProps:r,op:e,container:t},this.elements=[],this._isAnimated=this.transform.mProps.dynamicProperties.length||this.transform.op.effectsSequence.length}SVGShapeData.prototype.setAsAnimated=function(){this._isAnimated=!0},SVGStyleData.prototype.reset=function(){this.d="",this._mdf=!1},DashProperty.prototype.getValue=function(r){if((this.elem.globalData.frameId!==this.frameId||r)&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf=this._mdf||r,this._mdf)){var e=0,t=this.dataProps.length;for(this.renderer==="svg"&&(this.dashStr=""),e=0;e<t;e+=1)this.dataProps[e].n!=="o"?this.renderer==="svg"?this.dashStr+=" "+this.dataProps[e].p.v:this.dashArray[e]=this.dataProps[e].p.v:this.dashoffset[0]=this.dataProps[e].p.v}},extendPrototype([DynamicPropertyContainer],DashProperty),extendPrototype([DynamicPropertyContainer],SVGStrokeStyleData),extendPrototype([DynamicPropertyContainer],SVGFillStyleData),extendPrototype([DynamicPropertyContainer],SVGNoStyleData),GradientProperty.prototype.comparePoints=function(r,e){for(var t=0,o=this.o.length/2;t<o;){if(Math.abs(r[4*t]-r[4*e+2*t])>.01)return!1;t+=1}return!0},GradientProperty.prototype.checkCollapsable=function(){if(this.o.length/2!=this.c.length/4)return!1;if(this.data.k.k[0].s)for(var r=0,e=this.data.k.k.length;r<e;){if(!this.comparePoints(this.data.k.k[r].s,this.data.p))return!1;r+=1}else if(!this.comparePoints(this.data.k.k,this.data.p))return!1;return!0},GradientProperty.prototype.getValue=function(r){if(this.prop.getValue(),this._mdf=!1,this._cmdf=!1,this._omdf=!1,this.prop._mdf||r){var e,t,o,y=4*this.data.p;for(e=0;e<y;e+=1)t=e%4==0?100:255,o=Math.round(this.prop.v[e]*t),this.c[e]!==o&&(this.c[e]=o,this._cmdf=!r);if(this.o.length)for(y=this.prop.v.length,e=4*this.data.p;e<y;e+=1)t=e%2==0?100:1,o=e%2==0?Math.round(100*this.prop.v[e]):this.prop.v[e],this.o[e-4*this.data.p]!==o&&(this.o[e-4*this.data.p]=o,this._omdf=!r);this._mdf=!r}},extendPrototype([DynamicPropertyContainer],GradientProperty),SVGGradientFillStyleData.prototype.initGradientData=function(r,e,t){this.o=PropertyFactory.getProp(r,e.o,0,.01,this),this.s=PropertyFactory.getProp(r,e.s,1,null,this),this.e=PropertyFactory.getProp(r,e.e,1,null,this),this.h=PropertyFactory.getProp(r,e.h||{k:0},0,.01,this),this.a=PropertyFactory.getProp(r,e.a||{k:0},0,degToRads,this),this.g=new GradientProperty(r,e.g,this),this.style=t,this.stops=[],this.setGradientData(t.pElem,e),this.setGradientOpacity(e,t),this._isAnimated=!!this._isAnimated},SVGGradientFillStyleData.prototype.setGradientData=function(r,e){var t=createElementID(),o=createNS(e.t===1?"linearGradient":"radialGradient");o.setAttribute("id",t),o.setAttribute("spreadMethod","pad"),o.setAttribute("gradientUnits","userSpaceOnUse");var y,R,G,K=[];for(G=4*e.g.p,R=0;R<G;R+=4)y=createNS("stop"),o.appendChild(y),K.push(y);r.setAttribute(e.ty==="gf"?"fill":"stroke","url("+getLocationHref()+"#"+t+")"),this.gf=o,this.cst=K},SVGGradientFillStyleData.prototype.setGradientOpacity=function(r,e){if(this.g._hasOpacity&&!this.g._collapsable){var t,o,y,R=createNS("mask"),G=createNS("path");R.appendChild(G);var K=createElementID(),Y=createElementID();R.setAttribute("id",Y);var Q=createNS(r.t===1?"linearGradient":"radialGradient");Q.setAttribute("id",K),Q.setAttribute("spreadMethod","pad"),Q.setAttribute("gradientUnits","userSpaceOnUse"),y=r.g.k.k[0].s?r.g.k.k[0].s.length:r.g.k.k.length;var ee=this.stops;for(o=4*r.g.p;o<y;o+=2)(t=createNS("stop")).setAttribute("stop-color","rgb(255,255,255)"),Q.appendChild(t),ee.push(t);G.setAttribute(r.ty==="gf"?"fill":"stroke","url("+getLocationHref()+"#"+K+")"),r.ty==="gs"&&(G.setAttribute("stroke-linecap",lineCapEnum[r.lc||2]),G.setAttribute("stroke-linejoin",lineJoinEnum[r.lj||2]),r.lj===1&&G.setAttribute("stroke-miterlimit",r.ml)),this.of=Q,this.ms=R,this.ost=ee,this.maskId=Y,e.msElem=G}},extendPrototype([DynamicPropertyContainer],SVGGradientFillStyleData),extendPrototype([SVGGradientFillStyleData,DynamicPropertyContainer],SVGGradientStrokeStyleData);var buildShapeString=function(r,e,t,o){if(e===0)return"";var y,R=r.o,G=r.i,K=r.v,Y=" M"+o.applyToPointStringified(K[0][0],K[0][1]);for(y=1;y<e;y+=1)Y+=" C"+o.applyToPointStringified(R[y-1][0],R[y-1][1])+" "+o.applyToPointStringified(G[y][0],G[y][1])+" "+o.applyToPointStringified(K[y][0],K[y][1]);return t&&e&&(Y+=" C"+o.applyToPointStringified(R[y-1][0],R[y-1][1])+" "+o.applyToPointStringified(G[0][0],G[0][1])+" "+o.applyToPointStringified(K[0][0],K[0][1]),Y+="z"),Y},SVGElementsRenderer=function(){var r=new Matrix,e=new Matrix;function t(Q,ee,ie){(ie||ee.transform.op._mdf)&&ee.transform.container.setAttribute("opacity",ee.transform.op.v),(ie||ee.transform.mProps._mdf)&&ee.transform.container.setAttribute("transform",ee.transform.mProps.v.to2dCSS())}function o(){}function y(Q,ee,ie){var re,se,le,ce,oe,ue,ge,ve,_e,be,Re=ee.styles.length,Se=ee.lvl;for(ue=0;ue<Re;ue+=1){if(ce=ee.sh._mdf||ie,ee.styles[ue].lvl<Se){for(ve=e.reset(),_e=Se-ee.styles[ue].lvl,be=ee.transformers.length-1;!ce&&_e>0;)ce=ee.transformers[be].mProps._mdf||ce,_e-=1,be-=1;if(ce)for(_e=Se-ee.styles[ue].lvl,be=ee.transformers.length-1;_e>0;)ve.multiply(ee.transformers[be].mProps.v),_e-=1,be-=1}else ve=r;if(se=(ge=ee.sh.paths)._length,ce){for(le="",re=0;re<se;re+=1)(oe=ge.shapes[re])&&oe._length&&(le+=buildShapeString(oe,oe._length,oe.c,ve));ee.caches[ue]=le}else le=ee.caches[ue];ee.styles[ue].d+=Q.hd===!0?"":le,ee.styles[ue]._mdf=ce||ee.styles[ue]._mdf}}function R(Q,ee,ie){var re=ee.style;(ee.c._mdf||ie)&&re.pElem.setAttribute("fill","rgb("+bmFloor(ee.c.v[0])+","+bmFloor(ee.c.v[1])+","+bmFloor(ee.c.v[2])+")"),(ee.o._mdf||ie)&&re.pElem.setAttribute("fill-opacity",ee.o.v)}function G(Q,ee,ie){K(Q,ee,ie),Y(0,ee,ie)}function K(Q,ee,ie){var re,se,le,ce,oe,ue=ee.gf,ge=ee.g._hasOpacity,ve=ee.s.v,_e=ee.e.v;if(ee.o._mdf||ie){var be=Q.ty==="gf"?"fill-opacity":"stroke-opacity";ee.style.pElem.setAttribute(be,ee.o.v)}if(ee.s._mdf||ie){var Re=Q.t===1?"x1":"cx",Se=Re==="x1"?"y1":"cy";ue.setAttribute(Re,ve[0]),ue.setAttribute(Se,ve[1]),ge&&!ee.g._collapsable&&(ee.of.setAttribute(Re,ve[0]),ee.of.setAttribute(Se,ve[1]))}if(ee.g._cmdf||ie){re=ee.cst;var Ee=ee.g.c;for(le=re.length,se=0;se<le;se+=1)(ce=re[se]).setAttribute("offset",Ee[4*se]+"%"),ce.setAttribute("stop-color","rgb("+Ee[4*se+1]+","+Ee[4*se+2]+","+Ee[4*se+3]+")")}if(ge&&(ee.g._omdf||ie)){var ye=ee.g.o;for(le=(re=ee.g._collapsable?ee.cst:ee.ost).length,se=0;se<le;se+=1)ce=re[se],ee.g._collapsable||ce.setAttribute("offset",ye[2*se]+"%"),ce.setAttribute("stop-opacity",ye[2*se+1])}if(Q.t===1)(ee.e._mdf||ie)&&(ue.setAttribute("x2",_e[0]),ue.setAttribute("y2",_e[1]),ge&&!ee.g._collapsable&&(ee.of.setAttribute("x2",_e[0]),ee.of.setAttribute("y2",_e[1])));else if((ee.s._mdf||ee.e._mdf||ie)&&(oe=Math.sqrt(Math.pow(ve[0]-_e[0],2)+Math.pow(ve[1]-_e[1],2)),ue.setAttribute("r",oe),ge&&!ee.g._collapsable&&ee.of.setAttribute("r",oe)),ee.e._mdf||ee.h._mdf||ee.a._mdf||ie){oe||(oe=Math.sqrt(Math.pow(ve[0]-_e[0],2)+Math.pow(ve[1]-_e[1],2)));var de=Math.atan2(_e[1]-ve[1],_e[0]-ve[0]),Me=ee.h.v;Me>=1?Me=.99:Me<=-1&&(Me=-.99);var Le=oe*Me,Pe=Math.cos(de+ee.a.v)*Le+ve[0],Ue=Math.sin(de+ee.a.v)*Le+ve[1];ue.setAttribute("fx",Pe),ue.setAttribute("fy",Ue),ge&&!ee.g._collapsable&&(ee.of.setAttribute("fx",Pe),ee.of.setAttribute("fy",Ue))}}function Y(Q,ee,ie){var re=ee.style,se=ee.d;se&&(se._mdf||ie)&&se.dashStr&&(re.pElem.setAttribute("stroke-dasharray",se.dashStr),re.pElem.setAttribute("stroke-dashoffset",se.dashoffset[0])),ee.c&&(ee.c._mdf||ie)&&re.pElem.setAttribute("stroke","rgb("+bmFloor(ee.c.v[0])+","+bmFloor(ee.c.v[1])+","+bmFloor(ee.c.v[2])+")"),(ee.o._mdf||ie)&&re.pElem.setAttribute("stroke-opacity",ee.o.v),(ee.w._mdf||ie)&&(re.pElem.setAttribute("stroke-width",ee.w.v),re.msElem&&re.msElem.setAttribute("stroke-width",ee.w.v))}return{createRenderFunction:function(Q){switch(Q.ty){case"fl":return R;case"gf":return K;case"gs":return G;case"st":return Y;case"sh":case"el":case"rc":case"sr":return y;case"tr":return t;case"no":return o;default:return null}}}}();function SVGShapeElement(r,e,t){this.shapes=[],this.shapesData=r.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.initElement(r,e,t),this.prevViewData=[]}function LetterProps(r,e,t,o,y,R){this.o=r,this.sw=e,this.sc=t,this.fc=o,this.m=y,this.p=R,this._mdf={o:!0,sw:!!e,sc:!!t,fc:!!o,m:!0,p:!0}}function TextProperty(r,e){this._frameId=initialDefaultFrame,this.pv="",this.v="",this.kf=!1,this._isFirstFrame=!0,this._mdf=!1,e.d&&e.d.sid&&(e.d=r.globalData.slotManager.getProp(e.d)),this.data=e,this.elem=r,this.comp=this.elem.comp,this.keysIndex=0,this.canResize=!1,this.minimumFontSize=1,this.effectsSequence=[],this.currentData={ascent:0,boxWidth:this.defaultBoxWidth,f:"",fStyle:"",fWeight:"",fc:"",j:"",justifyOffset:"",l:[],lh:0,lineWidths:[],ls:"",of:"",s:"",sc:"",sw:0,t:0,tr:0,sz:0,ps:null,fillColorAnim:!1,strokeColorAnim:!1,strokeWidthAnim:!1,yOffset:0,finalSize:0,finalText:[],finalLineHeight:0,__complete:!1},this.copyData(this.currentData,this.data.d.k[0].s),this.searchProperty()||this.completeTextData(this.currentData)}extendPrototype([BaseElement,TransformElement,SVGBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableDOMElement],SVGShapeElement),SVGShapeElement.prototype.initSecondaryElement=function(){},SVGShapeElement.prototype.identityMatrix=new Matrix,SVGShapeElement.prototype.buildExpressionInterface=function(){},SVGShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes()},SVGShapeElement.prototype.filterUniqueShapes=function(){var r,e,t,o,y=this.shapes.length,R=this.stylesList.length,G=[],K=!1;for(t=0;t<R;t+=1){for(o=this.stylesList[t],K=!1,G.length=0,r=0;r<y;r+=1)(e=this.shapes[r]).styles.indexOf(o)!==-1&&(G.push(e),K=e._isAnimated||K);G.length>1&&K&&this.setShapesAsAnimated(G)}},SVGShapeElement.prototype.setShapesAsAnimated=function(r){var e,t=r.length;for(e=0;e<t;e+=1)r[e].setAsAnimated()},SVGShapeElement.prototype.createStyleElement=function(r,e){var t,o=new SVGStyleData(r,e),y=o.pElem;return r.ty==="st"?t=new SVGStrokeStyleData(this,r,o):r.ty==="fl"?t=new SVGFillStyleData(this,r,o):r.ty==="gf"||r.ty==="gs"?(t=new(r.ty==="gf"?SVGGradientFillStyleData:SVGGradientStrokeStyleData)(this,r,o),this.globalData.defs.appendChild(t.gf),t.maskId&&(this.globalData.defs.appendChild(t.ms),this.globalData.defs.appendChild(t.of),y.setAttribute("mask","url("+getLocationHref()+"#"+t.maskId+")"))):r.ty==="no"&&(t=new SVGNoStyleData(this,r,o)),r.ty!=="st"&&r.ty!=="gs"||(y.setAttribute("stroke-linecap",lineCapEnum[r.lc||2]),y.setAttribute("stroke-linejoin",lineJoinEnum[r.lj||2]),y.setAttribute("fill-opacity","0"),r.lj===1&&y.setAttribute("stroke-miterlimit",r.ml)),r.r===2&&y.setAttribute("fill-rule","evenodd"),r.ln&&y.setAttribute("id",r.ln),r.cl&&y.setAttribute("class",r.cl),r.bm&&(y.style["mix-blend-mode"]=getBlendMode(r.bm)),this.stylesList.push(o),this.addToAnimatedContents(r,t),t},SVGShapeElement.prototype.createGroupElement=function(r){var e=new ShapeGroupData;return r.ln&&e.gr.setAttribute("id",r.ln),r.cl&&e.gr.setAttribute("class",r.cl),r.bm&&(e.gr.style["mix-blend-mode"]=getBlendMode(r.bm)),e},SVGShapeElement.prototype.createTransformElement=function(r,e){var t=TransformPropertyFactory.getTransformProperty(this,r,this),o=new SVGTransformData(t,t.o,e);return this.addToAnimatedContents(r,o),o},SVGShapeElement.prototype.createShapeElement=function(r,e,t){var o=4;r.ty==="rc"?o=5:r.ty==="el"?o=6:r.ty==="sr"&&(o=7);var y=new SVGShapeData(e,t,ShapePropertyFactory.getShapeProp(this,r,o,this));return this.shapes.push(y),this.addShapeToModifiers(y),this.addToAnimatedContents(r,y),y},SVGShapeElement.prototype.addToAnimatedContents=function(r,e){for(var t=0,o=this.animatedContents.length;t<o;){if(this.animatedContents[t].element===e)return;t+=1}this.animatedContents.push({fn:SVGElementsRenderer.createRenderFunction(r),element:e,data:r})},SVGShapeElement.prototype.setElementStyles=function(r){var e,t=r.styles,o=this.stylesList.length;for(e=0;e<o;e+=1)this.stylesList[e].closed||t.push(this.stylesList[e])},SVGShapeElement.prototype.reloadShapes=function(){var r;this._isFirstFrame=!0;var e=this.itemsData.length;for(r=0;r<e;r+=1)this.prevViewData[r]=this.itemsData[r];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes(),e=this.dynamicProperties.length,r=0;r<e;r+=1)this.dynamicProperties[r].getValue();this.renderModifiers()},SVGShapeElement.prototype.searchShapes=function(r,e,t,o,y,R,G){var K,Y,Q,ee,ie,re,se=[].concat(R),le=r.length-1,ce=[],oe=[];for(K=le;K>=0;K-=1){if((re=this.searchProcessedElement(r[K]))?e[K]=t[re-1]:r[K]._render=G,r[K].ty==="fl"||r[K].ty==="st"||r[K].ty==="gf"||r[K].ty==="gs"||r[K].ty==="no")re?e[K].style.closed=!1:e[K]=this.createStyleElement(r[K],y),r[K]._render&&e[K].style.pElem.parentNode!==o&&o.appendChild(e[K].style.pElem),ce.push(e[K].style);else if(r[K].ty==="gr"){if(re)for(Q=e[K].it.length,Y=0;Y<Q;Y+=1)e[K].prevViewData[Y]=e[K].it[Y];else e[K]=this.createGroupElement(r[K]);this.searchShapes(r[K].it,e[K].it,e[K].prevViewData,e[K].gr,y+1,se,G),r[K]._render&&e[K].gr.parentNode!==o&&o.appendChild(e[K].gr)}else r[K].ty==="tr"?(re||(e[K]=this.createTransformElement(r[K],o)),ee=e[K].transform,se.push(ee)):r[K].ty==="sh"||r[K].ty==="rc"||r[K].ty==="el"||r[K].ty==="sr"?(re||(e[K]=this.createShapeElement(r[K],se,y)),this.setElementStyles(e[K])):r[K].ty==="tm"||r[K].ty==="rd"||r[K].ty==="ms"||r[K].ty==="pb"||r[K].ty==="zz"||r[K].ty==="op"?(re?(ie=e[K]).closed=!1:((ie=ShapeModifiers.getModifier(r[K].ty)).init(this,r[K]),e[K]=ie,this.shapeModifiers.push(ie)),oe.push(ie)):r[K].ty==="rp"&&(re?(ie=e[K]).closed=!0:(ie=ShapeModifiers.getModifier(r[K].ty),e[K]=ie,ie.init(this,r,K,e),this.shapeModifiers.push(ie),G=!1),oe.push(ie));this.addProcessedElement(r[K],K+1)}for(le=ce.length,K=0;K<le;K+=1)ce[K].closed=!0;for(le=oe.length,K=0;K<le;K+=1)oe[K].closed=!0},SVGShapeElement.prototype.renderInnerContent=function(){var r;this.renderModifiers();var e=this.stylesList.length;for(r=0;r<e;r+=1)this.stylesList[r].reset();for(this.renderShape(),r=0;r<e;r+=1)(this.stylesList[r]._mdf||this._isFirstFrame)&&(this.stylesList[r].msElem&&(this.stylesList[r].msElem.setAttribute("d",this.stylesList[r].d),this.stylesList[r].d="M0 0"+this.stylesList[r].d),this.stylesList[r].pElem.setAttribute("d",this.stylesList[r].d||"M0 0"))},SVGShapeElement.prototype.renderShape=function(){var r,e,t=this.animatedContents.length;for(r=0;r<t;r+=1)e=this.animatedContents[r],(this._isFirstFrame||e.element._isAnimated)&&e.data!==!0&&e.fn(e.data,e.element,this._isFirstFrame)},SVGShapeElement.prototype.destroy=function(){this.destroyBaseElement(),this.shapesData=null,this.itemsData=null},LetterProps.prototype.update=function(r,e,t,o,y,R){this._mdf.o=!1,this._mdf.sw=!1,this._mdf.sc=!1,this._mdf.fc=!1,this._mdf.m=!1,this._mdf.p=!1;var G=!1;return this.o!==r&&(this.o=r,this._mdf.o=!0,G=!0),this.sw!==e&&(this.sw=e,this._mdf.sw=!0,G=!0),this.sc!==t&&(this.sc=t,this._mdf.sc=!0,G=!0),this.fc!==o&&(this.fc=o,this._mdf.fc=!0,G=!0),this.m!==y&&(this.m=y,this._mdf.m=!0,G=!0),!R.length||this.p[0]===R[0]&&this.p[1]===R[1]&&this.p[4]===R[4]&&this.p[5]===R[5]&&this.p[12]===R[12]&&this.p[13]===R[13]||(this.p=R,this._mdf.p=!0,G=!0),G},TextProperty.prototype.defaultBoxWidth=[0,0],TextProperty.prototype.copyData=function(r,e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r},TextProperty.prototype.setCurrentData=function(r){r.__complete||this.completeTextData(r),this.currentData=r,this.currentData.boxWidth=this.currentData.boxWidth||this.defaultBoxWidth,this._mdf=!0},TextProperty.prototype.searchProperty=function(){return this.searchKeyframes()},TextProperty.prototype.searchKeyframes=function(){return this.kf=this.data.d.k.length>1,this.kf&&this.addEffect(this.getKeyframeValue.bind(this)),this.kf},TextProperty.prototype.addEffect=function(r){this.effectsSequence.push(r),this.elem.addDynamicProperty(this)},TextProperty.prototype.getValue=function(r){if(this.elem.globalData.frameId!==this.frameId&&this.effectsSequence.length||r){this.currentData.t=this.data.d.k[this.keysIndex].s.t;var e=this.currentData,t=this.keysIndex;if(this.lock)this.setCurrentData(this.currentData);else{var o;this.lock=!0,this._mdf=!1;var y=this.effectsSequence.length,R=r||this.data.d.k[this.keysIndex].s;for(o=0;o<y;o+=1)R=t!==this.keysIndex?this.effectsSequence[o](R,R.t):this.effectsSequence[o](this.currentData,R.t);e!==R&&this.setCurrentData(R),this.v=this.currentData,this.pv=this.v,this.lock=!1,this.frameId=this.elem.globalData.frameId}}},TextProperty.prototype.getKeyframeValue=function(){for(var r=this.data.d.k,e=this.elem.comp.renderedFrame,t=0,o=r.length;t<=o-1&&!(t===o-1||r[t+1].t>e);)t+=1;return this.keysIndex!==t&&(this.keysIndex=t),this.data.d.k[this.keysIndex].s},TextProperty.prototype.buildFinalText=function(r){for(var e,t,o=[],y=0,R=r.length,G=!1,K=!1,Y="";y<R;)G=K,K=!1,e=r.charCodeAt(y),Y=r.charAt(y),FontManager.isCombinedCharacter(e)?G=!0:e>=55296&&e<=56319?FontManager.isRegionalFlag(r,y)?Y=r.substr(y,14):(t=r.charCodeAt(y+1))>=56320&&t<=57343&&(FontManager.isModifier(e,t)?(Y=r.substr(y,2),G=!0):Y=FontManager.isFlagEmoji(r.substr(y,4))?r.substr(y,4):r.substr(y,2)):e>56319?(t=r.charCodeAt(y+1),FontManager.isVariationSelector(e)&&(G=!0)):FontManager.isZeroWidthJoiner(e)&&(G=!0,K=!0),G?(o[o.length-1]+=Y,G=!1):o.push(Y),y+=Y.length;return o},TextProperty.prototype.completeTextData=function(r){r.__complete=!0;var e,t,o,y,R,G,K,Y=this.elem.globalData.fontManager,Q=this.data,ee=[],ie=0,re=Q.m.g,se=0,le=0,ce=0,oe=[],ue=0,ge=0,ve=Y.getFontByName(r.f),_e=0,be=getFontProperties(ve);r.fWeight=be.weight,r.fStyle=be.style,r.finalSize=r.s,r.finalText=this.buildFinalText(r.t),t=r.finalText.length,r.finalLineHeight=r.lh;var Re,Se=r.tr/1e3*r.finalSize;if(r.sz)for(var Ee,ye,de=!0,Me=r.sz[0],Le=r.sz[1];de;){Ee=0,ue=0,t=(ye=this.buildFinalText(r.t)).length,Se=r.tr/1e3*r.finalSize;var Pe=-1;for(e=0;e<t;e+=1)Re=ye[e].charCodeAt(0),o=!1,ye[e]===" "?Pe=e:Re!==13&&Re!==3||(ue=0,o=!0,Ee+=r.finalLineHeight||1.2*r.finalSize),Y.chars?(K=Y.getCharData(ye[e],ve.fStyle,ve.fFamily),_e=o?0:K.w*r.finalSize/100):_e=Y.measureText(ye[e],r.f,r.finalSize),ue+_e>Me&&ye[e]!==" "?(Pe===-1?t+=1:e=Pe,Ee+=r.finalLineHeight||1.2*r.finalSize,ye.splice(e,Pe===e?1:0,"\r"),Pe=-1,ue=0):(ue+=_e,ue+=Se);Ee+=ve.ascent*r.finalSize/100,this.canResize&&r.finalSize>this.minimumFontSize&&Le<Ee?(r.finalSize-=1,r.finalLineHeight=r.finalSize*r.lh/r.s):(r.finalText=ye,t=r.finalText.length,de=!1)}ue=-Se,_e=0;var Ue,$e=0;for(e=0;e<t;e+=1)if(o=!1,(Re=(Ue=r.finalText[e]).charCodeAt(0))===13||Re===3?($e=0,oe.push(ue),ge=ue>ge?ue:ge,ue=-2*Se,y="",o=!0,ce+=1):y=Ue,Y.chars?(K=Y.getCharData(Ue,ve.fStyle,Y.getFontByName(r.f).fFamily),_e=o?0:K.w*r.finalSize/100):_e=Y.measureText(y,r.f,r.finalSize),Ue===" "?$e+=_e+Se:(ue+=_e+Se+$e,$e=0),ee.push({l:_e,an:_e,add:se,n:o,anIndexes:[],val:y,line:ce,animatorJustifyOffset:0}),re==2){if(se+=_e,y===""||y===" "||e===t-1){for(y!==""&&y!==" "||(se-=_e);le<=e;)ee[le].an=se,ee[le].ind=ie,ee[le].extra=_e,le+=1;ie+=1,se=0}}else if(re==3){if(se+=_e,y===""||e===t-1){for(y===""&&(se-=_e);le<=e;)ee[le].an=se,ee[le].ind=ie,ee[le].extra=_e,le+=1;se=0,ie+=1}}else ee[ie].ind=ie,ee[ie].extra=0,ie+=1;if(r.l=ee,ge=ue>ge?ue:ge,oe.push(ue),r.sz)r.boxWidth=r.sz[0],r.justifyOffset=0;else switch(r.boxWidth=ge,r.j){case 1:r.justifyOffset=-r.boxWidth;break;case 2:r.justifyOffset=-r.boxWidth/2;break;default:r.justifyOffset=0}r.lineWidths=oe;var Ve,Ce,De,Oe,Te=Q.a;G=Te.length;var Ne=[];for(R=0;R<G;R+=1){for((Ve=Te[R]).a.sc&&(r.strokeColorAnim=!0),Ve.a.sw&&(r.strokeWidthAnim=!0),(Ve.a.fc||Ve.a.fh||Ve.a.fs||Ve.a.fb)&&(r.fillColorAnim=!0),Oe=0,De=Ve.s.b,e=0;e<t;e+=1)(Ce=ee[e]).anIndexes[R]=Oe,(De==1&&Ce.val!==""||De==2&&Ce.val!==""&&Ce.val!==" "||De==3&&(Ce.n||Ce.val==" "||e==t-1)||De==4&&(Ce.n||e==t-1))&&(Ve.s.rn===1&&Ne.push(Oe),Oe+=1);Q.a[R].s.totalChars=Oe;var Ye,Qe=-1;if(Ve.s.rn===1)for(e=0;e<t;e+=1)Qe!=(Ce=ee[e]).anIndexes[R]&&(Qe=Ce.anIndexes[R],Ye=Ne.splice(Math.floor(Math.random()*Ne.length),1)[0]),Ce.anIndexes[R]=Ye}r.yOffset=r.finalLineHeight||1.2*r.finalSize,r.ls=r.ls||0,r.ascent=ve.ascent*r.finalSize/100},TextProperty.prototype.updateDocumentData=function(r,e){e=e===void 0?this.keysIndex:e;var t=this.copyData({},this.data.d.k[e].s);t=this.copyData(t,r),this.data.d.k[e].s=t,this.recalculate(e),this.setCurrentData(t),this.elem.addDynamicProperty(this)},TextProperty.prototype.recalculate=function(r){var e=this.data.d.k[r].s;e.__complete=!1,this.keysIndex=0,this._isFirstFrame=!0,this.getValue(e)},TextProperty.prototype.canResizeFont=function(r){this.canResize=r,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)},TextProperty.prototype.setMinimumFontSize=function(r){this.minimumFontSize=Math.floor(r)||1,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)};var TextSelectorProp=function(){var r=Math.max,e=Math.min,t=Math.floor;function o(y,R){this._currentTextLength=-1,this.k=!1,this.data=R,this.elem=y,this.comp=y.comp,this.finalS=0,this.finalE=0,this.initDynamicPropertyContainer(y),this.s=PropertyFactory.getProp(y,R.s||{k:0},0,0,this),this.e="e"in R?PropertyFactory.getProp(y,R.e,0,0,this):{v:100},this.o=PropertyFactory.getProp(y,R.o||{k:0},0,0,this),this.xe=PropertyFactory.getProp(y,R.xe||{k:0},0,0,this),this.ne=PropertyFactory.getProp(y,R.ne||{k:0},0,0,this),this.sm=PropertyFactory.getProp(y,R.sm||{k:100},0,0,this),this.a=PropertyFactory.getProp(y,R.a,0,.01,this),this.dynamicProperties.length||this.getValue()}return o.prototype={getMult:function(y){this._currentTextLength!==this.elem.textProperty.currentData.l.length&&this.getValue();var R=0,G=0,K=1,Y=1;this.ne.v>0?R=this.ne.v/100:G=-this.ne.v/100,this.xe.v>0?K=1-this.xe.v/100:Y=1+this.xe.v/100;var Q=BezierFactory.getBezierEasing(R,G,K,Y).get,ee=0,ie=this.finalS,re=this.finalE,se=this.data.sh;if(se===2)ee=Q(ee=re===ie?y>=re?1:0:r(0,e(.5/(re-ie)+(y-ie)/(re-ie),1)));else if(se===3)ee=Q(ee=re===ie?y>=re?0:1:1-r(0,e(.5/(re-ie)+(y-ie)/(re-ie),1)));else if(se===4)re===ie?ee=0:(ee=r(0,e(.5/(re-ie)+(y-ie)/(re-ie),1)))<.5?ee*=2:ee=1-2*(ee-.5),ee=Q(ee);else if(se===5){if(re===ie)ee=0;else{var le=re-ie,ce=-le/2+(y=e(r(0,y+.5-ie),re-ie)),oe=le/2;ee=Math.sqrt(1-ce*ce/(oe*oe))}ee=Q(ee)}else se===6?(re===ie?ee=0:(y=e(r(0,y+.5-ie),re-ie),ee=(1+Math.cos(Math.PI+2*Math.PI*y/(re-ie)))/2),ee=Q(ee)):(y>=t(ie)&&(ee=r(0,e(y-ie<0?e(re,1)-(ie-y):re-y,1))),ee=Q(ee));if(this.sm.v!==100){var ue=.01*this.sm.v;ue===0&&(ue=1e-8);var ge=.5-.5*ue;ee<ge?ee=0:(ee=(ee-ge)/ue)>1&&(ee=1)}return ee*this.a.v},getValue:function(y){this.iterateDynamicProperties(),this._mdf=y||this._mdf,this._currentTextLength=this.elem.textProperty.currentData.l.length||0,y&&this.data.r===2&&(this.e.v=this._currentTextLength);var R=this.data.r===2?1:100/this.data.totalChars,G=this.o.v/R,K=this.s.v/R+G,Y=this.e.v/R+G;if(K>Y){var Q=K;K=Y,Y=Q}this.finalS=K,this.finalE=Y}},extendPrototype([DynamicPropertyContainer],o),{getTextSelectorProp:function(y,R,G){return new o(y,R)}}}();function TextAnimatorDataProperty(r,e,t){var o={propType:!1},y=PropertyFactory.getProp,R=e.a;this.a={r:R.r?y(r,R.r,0,degToRads,t):o,rx:R.rx?y(r,R.rx,0,degToRads,t):o,ry:R.ry?y(r,R.ry,0,degToRads,t):o,sk:R.sk?y(r,R.sk,0,degToRads,t):o,sa:R.sa?y(r,R.sa,0,degToRads,t):o,s:R.s?y(r,R.s,1,.01,t):o,a:R.a?y(r,R.a,1,0,t):o,o:R.o?y(r,R.o,0,.01,t):o,p:R.p?y(r,R.p,1,0,t):o,sw:R.sw?y(r,R.sw,0,0,t):o,sc:R.sc?y(r,R.sc,1,0,t):o,fc:R.fc?y(r,R.fc,1,0,t):o,fh:R.fh?y(r,R.fh,0,0,t):o,fs:R.fs?y(r,R.fs,0,.01,t):o,fb:R.fb?y(r,R.fb,0,.01,t):o,t:R.t?y(r,R.t,0,0,t):o},this.s=TextSelectorProp.getTextSelectorProp(r,e.s,t),this.s.t=e.s.t}function TextAnimatorProperty(r,e,t){this._isFirstFrame=!0,this._hasMaskedPath=!1,this._frameId=-1,this._textData=r,this._renderType=e,this._elem=t,this._animatorsData=createSizedArray(this._textData.a.length),this._pathData={},this._moreOptions={alignment:{}},this.renderedLetters=[],this.lettersChangedFlag=!1,this.initDynamicPropertyContainer(t)}function ITextElement(){}TextAnimatorProperty.prototype.searchProperties=function(){var r,e,t=this._textData.a.length,o=PropertyFactory.getProp;for(r=0;r<t;r+=1)e=this._textData.a[r],this._animatorsData[r]=new TextAnimatorDataProperty(this._elem,e,this);this._textData.p&&"m"in this._textData.p?(this._pathData={a:o(this._elem,this._textData.p.a,0,0,this),f:o(this._elem,this._textData.p.f,0,0,this),l:o(this._elem,this._textData.p.l,0,0,this),r:o(this._elem,this._textData.p.r,0,0,this),p:o(this._elem,this._textData.p.p,0,0,this),m:this._elem.maskManager.getMaskProperty(this._textData.p.m)},this._hasMaskedPath=!0):this._hasMaskedPath=!1,this._moreOptions.alignment=o(this._elem,this._textData.m.a,1,0,this)},TextAnimatorProperty.prototype.getMeasures=function(r,e){if(this.lettersChangedFlag=e,this._mdf||this._isFirstFrame||e||this._hasMaskedPath&&this._pathData.m._mdf){this._isFirstFrame=!1;var t,o,y,R,G,K,Y,Q,ee,ie,re,se,le,ce,oe,ue,ge,ve,_e,be=this._moreOptions.alignment.v,Re=this._animatorsData,Se=this._textData,Ee=this.mHelper,ye=this._renderType,de=this.renderedLetters.length,Me=r.l;if(this._hasMaskedPath){if(_e=this._pathData.m,!this._pathData.n||this._pathData._mdf){var Le,Pe=_e.v;for(this._pathData.r.v&&(Pe=Pe.reverse()),G={tLength:0,segments:[]},R=Pe._length-1,ue=0,y=0;y<R;y+=1)Le=bez.buildBezierData(Pe.v[y],Pe.v[y+1],[Pe.o[y][0]-Pe.v[y][0],Pe.o[y][1]-Pe.v[y][1]],[Pe.i[y+1][0]-Pe.v[y+1][0],Pe.i[y+1][1]-Pe.v[y+1][1]]),G.tLength+=Le.segmentLength,G.segments.push(Le),ue+=Le.segmentLength;y=R,_e.v.c&&(Le=bez.buildBezierData(Pe.v[y],Pe.v[0],[Pe.o[y][0]-Pe.v[y][0],Pe.o[y][1]-Pe.v[y][1]],[Pe.i[0][0]-Pe.v[0][0],Pe.i[0][1]-Pe.v[0][1]]),G.tLength+=Le.segmentLength,G.segments.push(Le),ue+=Le.segmentLength),this._pathData.pi=G}if(G=this._pathData.pi,K=this._pathData.f.v,re=0,ie=1,Q=0,ee=!0,ce=G.segments,K<0&&_e.v.c)for(G.tLength<Math.abs(K)&&(K=-Math.abs(K)%G.tLength),ie=(le=ce[re=ce.length-1].points).length-1;K<0;)K+=le[ie].partialLength,(ie-=1)<0&&(ie=(le=ce[re-=1].points).length-1);se=(le=ce[re].points)[ie-1],oe=(Y=le[ie]).partialLength}R=Me.length,t=0,o=0;var Ue,$e,Ve,Ce,De,Oe=1.2*r.finalSize*.714,Te=!0;Ve=Re.length;var Ne,Ye,Qe,qe,Ze,ct,xt,un,Vn,In,Un,kn,Ln=-1,Ke=K,Qn=re,yn=ie,kt=-1,cn="",Mn=this.defaultPropsArray;if(r.j===2||r.j===1){var Qt=0,He=0,ze=r.j===2?-.5:-1,Mt=0,hn=!0;for(y=0;y<R;y+=1)if(Me[y].n){for(Qt&&(Qt+=He);Mt<y;)Me[Mt].animatorJustifyOffset=Qt,Mt+=1;Qt=0,hn=!0}else{for($e=0;$e<Ve;$e+=1)(Ue=Re[$e].a).t.propType&&(hn&&r.j===2&&(He+=Ue.t.v*ze),(De=Re[$e].s.getMult(Me[y].anIndexes[$e],Se.a[$e].s.totalChars)).length?Qt+=Ue.t.v*De[0]*ze:Qt+=Ue.t.v*De*ze);hn=!1}for(Qt&&(Qt+=He);Mt<y;)Me[Mt].animatorJustifyOffset=Qt,Mt+=1}for(y=0;y<R;y+=1){if(Ee.reset(),qe=1,Me[y].n)t=0,o+=r.yOffset,o+=Te?1:0,K=Ke,Te=!1,this._hasMaskedPath&&(ie=yn,se=(le=ce[re=Qn].points)[ie-1],oe=(Y=le[ie]).partialLength,Q=0),cn="",Un="",Vn="",kn="",Mn=this.defaultPropsArray;else{if(this._hasMaskedPath){if(kt!==Me[y].line){switch(r.j){case 1:K+=ue-r.lineWidths[Me[y].line];break;case 2:K+=(ue-r.lineWidths[Me[y].line])/2}kt=Me[y].line}Ln!==Me[y].ind&&(Me[Ln]&&(K+=Me[Ln].extra),K+=Me[y].an/2,Ln=Me[y].ind),K+=be[0]*Me[y].an*.005;var En=0;for($e=0;$e<Ve;$e+=1)(Ue=Re[$e].a).p.propType&&((De=Re[$e].s.getMult(Me[y].anIndexes[$e],Se.a[$e].s.totalChars)).length?En+=Ue.p.v[0]*De[0]:En+=Ue.p.v[0]*De),Ue.a.propType&&((De=Re[$e].s.getMult(Me[y].anIndexes[$e],Se.a[$e].s.totalChars)).length?En+=Ue.a.v[0]*De[0]:En+=Ue.a.v[0]*De);for(ee=!0,this._pathData.a.v&&(K=.5*Me[0].an+(ue-this._pathData.f.v-.5*Me[0].an-.5*Me[Me.length-1].an)*Ln/(R-1),K+=this._pathData.f.v);ee;)Q+oe>=K+En||!le?(ge=(K+En-Q)/Y.partialLength,Ye=se.point[0]+(Y.point[0]-se.point[0])*ge,Qe=se.point[1]+(Y.point[1]-se.point[1])*ge,Ee.translate(-be[0]*Me[y].an*.005,-be[1]*Oe*.01),ee=!1):le&&(Q+=Y.partialLength,(ie+=1)>=le.length&&(ie=0,ce[re+=1]?le=ce[re].points:_e.v.c?(ie=0,le=ce[re=0].points):(Q-=Y.partialLength,le=null)),le&&(se=Y,oe=(Y=le[ie]).partialLength));Ne=Me[y].an/2-Me[y].add,Ee.translate(-Ne,0,0)}else Ne=Me[y].an/2-Me[y].add,Ee.translate(-Ne,0,0),Ee.translate(-be[0]*Me[y].an*.005,-be[1]*Oe*.01,0);for($e=0;$e<Ve;$e+=1)(Ue=Re[$e].a).t.propType&&(De=Re[$e].s.getMult(Me[y].anIndexes[$e],Se.a[$e].s.totalChars),t===0&&r.j===0||(this._hasMaskedPath?De.length?K+=Ue.t.v*De[0]:K+=Ue.t.v*De:De.length?t+=Ue.t.v*De[0]:t+=Ue.t.v*De));for(r.strokeWidthAnim&&(ct=r.sw||0),r.strokeColorAnim&&(Ze=r.sc?[r.sc[0],r.sc[1],r.sc[2]]:[0,0,0]),r.fillColorAnim&&r.fc&&(xt=[r.fc[0],r.fc[1],r.fc[2]]),$e=0;$e<Ve;$e+=1)(Ue=Re[$e].a).a.propType&&((De=Re[$e].s.getMult(Me[y].anIndexes[$e],Se.a[$e].s.totalChars)).length?Ee.translate(-Ue.a.v[0]*De[0],-Ue.a.v[1]*De[1],Ue.a.v[2]*De[2]):Ee.translate(-Ue.a.v[0]*De,-Ue.a.v[1]*De,Ue.a.v[2]*De));for($e=0;$e<Ve;$e+=1)(Ue=Re[$e].a).s.propType&&((De=Re[$e].s.getMult(Me[y].anIndexes[$e],Se.a[$e].s.totalChars)).length?Ee.scale(1+(Ue.s.v[0]-1)*De[0],1+(Ue.s.v[1]-1)*De[1],1):Ee.scale(1+(Ue.s.v[0]-1)*De,1+(Ue.s.v[1]-1)*De,1));for($e=0;$e<Ve;$e+=1){if(Ue=Re[$e].a,De=Re[$e].s.getMult(Me[y].anIndexes[$e],Se.a[$e].s.totalChars),Ue.sk.propType&&(De.length?Ee.skewFromAxis(-Ue.sk.v*De[0],Ue.sa.v*De[1]):Ee.skewFromAxis(-Ue.sk.v*De,Ue.sa.v*De)),Ue.r.propType&&(De.length?Ee.rotateZ(-Ue.r.v*De[2]):Ee.rotateZ(-Ue.r.v*De)),Ue.ry.propType&&(De.length?Ee.rotateY(Ue.ry.v*De[1]):Ee.rotateY(Ue.ry.v*De)),Ue.rx.propType&&(De.length?Ee.rotateX(Ue.rx.v*De[0]):Ee.rotateX(Ue.rx.v*De)),Ue.o.propType&&(De.length?qe+=(Ue.o.v*De[0]-qe)*De[0]:qe+=(Ue.o.v*De-qe)*De),r.strokeWidthAnim&&Ue.sw.propType&&(De.length?ct+=Ue.sw.v*De[0]:ct+=Ue.sw.v*De),r.strokeColorAnim&&Ue.sc.propType)for(un=0;un<3;un+=1)De.length?Ze[un]+=(Ue.sc.v[un]-Ze[un])*De[0]:Ze[un]+=(Ue.sc.v[un]-Ze[un])*De;if(r.fillColorAnim&&r.fc){if(Ue.fc.propType)for(un=0;un<3;un+=1)De.length?xt[un]+=(Ue.fc.v[un]-xt[un])*De[0]:xt[un]+=(Ue.fc.v[un]-xt[un])*De;Ue.fh.propType&&(xt=De.length?addHueToRGB(xt,Ue.fh.v*De[0]):addHueToRGB(xt,Ue.fh.v*De)),Ue.fs.propType&&(xt=De.length?addSaturationToRGB(xt,Ue.fs.v*De[0]):addSaturationToRGB(xt,Ue.fs.v*De)),Ue.fb.propType&&(xt=De.length?addBrightnessToRGB(xt,Ue.fb.v*De[0]):addBrightnessToRGB(xt,Ue.fb.v*De))}}for($e=0;$e<Ve;$e+=1)(Ue=Re[$e].a).p.propType&&(De=Re[$e].s.getMult(Me[y].anIndexes[$e],Se.a[$e].s.totalChars),this._hasMaskedPath?De.length?Ee.translate(0,Ue.p.v[1]*De[0],-Ue.p.v[2]*De[1]):Ee.translate(0,Ue.p.v[1]*De,-Ue.p.v[2]*De):De.length?Ee.translate(Ue.p.v[0]*De[0],Ue.p.v[1]*De[1],-Ue.p.v[2]*De[2]):Ee.translate(Ue.p.v[0]*De,Ue.p.v[1]*De,-Ue.p.v[2]*De));if(r.strokeWidthAnim&&(Vn=ct<0?0:ct),r.strokeColorAnim&&(In="rgb("+Math.round(255*Ze[0])+","+Math.round(255*Ze[1])+","+Math.round(255*Ze[2])+")"),r.fillColorAnim&&r.fc&&(Un="rgb("+Math.round(255*xt[0])+","+Math.round(255*xt[1])+","+Math.round(255*xt[2])+")"),this._hasMaskedPath){if(Ee.translate(0,-r.ls),Ee.translate(0,be[1]*Oe*.01+o,0),this._pathData.p.v){ve=(Y.point[1]-se.point[1])/(Y.point[0]-se.point[0]);var an=180*Math.atan(ve)/Math.PI;Y.point[0]<se.point[0]&&(an+=180),Ee.rotate(-an*Math.PI/180)}Ee.translate(Ye,Qe,0),K-=be[0]*Me[y].an*.005,Me[y+1]&&Ln!==Me[y+1].ind&&(K+=Me[y].an/2,K+=.001*r.tr*r.finalSize)}else{switch(Ee.translate(t,o,0),r.ps&&Ee.translate(r.ps[0],r.ps[1]+r.ascent,0),r.j){case 1:Ee.translate(Me[y].animatorJustifyOffset+r.justifyOffset+(r.boxWidth-r.lineWidths[Me[y].line]),0,0);break;case 2:Ee.translate(Me[y].animatorJustifyOffset+r.justifyOffset+(r.boxWidth-r.lineWidths[Me[y].line])/2,0,0)}Ee.translate(0,-r.ls),Ee.translate(Ne,0,0),Ee.translate(be[0]*Me[y].an*.005,be[1]*Oe*.01,0),t+=Me[y].l+.001*r.tr*r.finalSize}ye==="html"?cn=Ee.toCSS():ye==="svg"?cn=Ee.to2dCSS():Mn=[Ee.props[0],Ee.props[1],Ee.props[2],Ee.props[3],Ee.props[4],Ee.props[5],Ee.props[6],Ee.props[7],Ee.props[8],Ee.props[9],Ee.props[10],Ee.props[11],Ee.props[12],Ee.props[13],Ee.props[14],Ee.props[15]],kn=qe}de<=y?(Ce=new LetterProps(kn,Vn,In,Un,cn,Mn),this.renderedLetters.push(Ce),de+=1,this.lettersChangedFlag=!0):(Ce=this.renderedLetters[y],this.lettersChangedFlag=Ce.update(kn,Vn,In,Un,cn,Mn)||this.lettersChangedFlag)}}},TextAnimatorProperty.prototype.getValue=function(){this._elem.globalData.frameId!==this._frameId&&(this._frameId=this._elem.globalData.frameId,this.iterateDynamicProperties())},TextAnimatorProperty.prototype.mHelper=new Matrix,TextAnimatorProperty.prototype.defaultPropsArray=[],extendPrototype([DynamicPropertyContainer],TextAnimatorProperty),ITextElement.prototype.initElement=function(r,e,t){this.lettersChangedFlag=!0,this.initFrame(),this.initBaseData(r,e,t),this.textProperty=new TextProperty(this,r.t,this.dynamicProperties),this.textAnimator=new TextAnimatorProperty(r.t,this.renderType,this),this.initTransform(r,e,t),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide(),this.textAnimator.searchProperties(this.dynamicProperties)},ITextElement.prototype.prepareFrame=function(r){this._mdf=!1,this.prepareRenderableFrame(r),this.prepareProperties(r,this.isInRange)},ITextElement.prototype.createPathShape=function(r,e){var t,o,y=e.length,R="";for(t=0;t<y;t+=1)e[t].ty==="sh"&&(o=e[t].ks.k,R+=buildShapeString(o,o.i.length,!0,r));return R},ITextElement.prototype.updateDocumentData=function(r,e){this.textProperty.updateDocumentData(r,e)},ITextElement.prototype.canResizeFont=function(r){this.textProperty.canResizeFont(r)},ITextElement.prototype.setMinimumFontSize=function(r){this.textProperty.setMinimumFontSize(r)},ITextElement.prototype.applyTextPropertiesToMatrix=function(r,e,t,o,y){switch(r.ps&&e.translate(r.ps[0],r.ps[1]+r.ascent,0),e.translate(0,-r.ls,0),r.j){case 1:e.translate(r.justifyOffset+(r.boxWidth-r.lineWidths[t]),0,0);break;case 2:e.translate(r.justifyOffset+(r.boxWidth-r.lineWidths[t])/2,0,0)}e.translate(o,y,0)},ITextElement.prototype.buildColor=function(r){return"rgb("+Math.round(255*r[0])+","+Math.round(255*r[1])+","+Math.round(255*r[2])+")"},ITextElement.prototype.emptyProp=new LetterProps,ITextElement.prototype.destroy=function(){},ITextElement.prototype.validateText=function(){(this.textProperty._mdf||this.textProperty._isFirstFrame)&&(this.buildNewText(),this.textProperty._isFirstFrame=!1,this.textProperty._mdf=!1)};var emptyShapeData={shapes:[]};function SVGTextLottieElement(r,e,t){this.textSpans=[],this.renderType="svg",this.initElement(r,e,t)}function ISolidElement(r,e,t){this.initElement(r,e,t)}function NullElement(r,e,t){this.initFrame(),this.initBaseData(r,e,t),this.initFrame(),this.initTransform(r,e,t),this.initHierarchy()}function SVGRendererBase(){}function ICompElement(){}function SVGCompElement(r,e,t){this.layers=r.layers,this.supports3d=!0,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(r,e,t),this.tm=r.tm?PropertyFactory.getProp(this,r.tm,0,e.frameRate,this):{_placeholder:!0}}function SVGRenderer(r,e){this.animationItem=r,this.layers=null,this.renderedFrame=-1,this.svgElement=createNS("svg");var t="";if(e&&e.title){var o=createNS("title"),y=createElementID();o.setAttribute("id",y),o.textContent=e.title,this.svgElement.appendChild(o),t+=y}if(e&&e.description){var R=createNS("desc"),G=createElementID();R.setAttribute("id",G),R.textContent=e.description,this.svgElement.appendChild(R),t+=" "+G}t&&this.svgElement.setAttribute("aria-labelledby",t);var K=createNS("defs");this.svgElement.appendChild(K);var Y=createNS("g");this.svgElement.appendChild(Y),this.layerElement=Y,this.renderConfig={preserveAspectRatio:e&&e.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:e&&e.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:e&&e.contentVisibility||"visible",progressiveLoad:e&&e.progressiveLoad||!1,hideOnTransparent:!(e&&e.hideOnTransparent===!1),viewBoxOnly:e&&e.viewBoxOnly||!1,viewBoxSize:e&&e.viewBoxSize||!1,className:e&&e.className||"",id:e&&e.id||"",focusable:e&&e.focusable,filterSize:{width:e&&e.filterSize&&e.filterSize.width||"100%",height:e&&e.filterSize&&e.filterSize.height||"100%",x:e&&e.filterSize&&e.filterSize.x||"0%",y:e&&e.filterSize&&e.filterSize.y||"0%"},width:e&&e.width,height:e&&e.height,runExpressions:!e||e.runExpressions===void 0||e.runExpressions},this.globalData={_mdf:!1,frameNum:-1,defs:K,renderConfig:this.renderConfig},this.elements=[],this.pendingElements=[],this.destroyed=!1,this.rendererType="svg"}function ShapeTransformManager(){this.sequences={},this.sequenceList=[],this.transform_key_count=0}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],SVGTextLottieElement),SVGTextLottieElement.prototype.createContent=function(){this.data.singleShape&&!this.globalData.fontManager.chars&&(this.textContainer=createNS("text"))},SVGTextLottieElement.prototype.buildTextContents=function(r){for(var e=0,t=r.length,o=[],y="";e<t;)r[e]==="\r"||r[e]===""?(o.push(y),y=""):y+=r[e],e+=1;return o.push(y),o},SVGTextLottieElement.prototype.buildShapeData=function(r,e){if(r.shapes&&r.shapes.length){var t=r.shapes[0];if(t.it){var o=t.it[t.it.length-1];o.s&&(o.s.k[0]=e,o.s.k[1]=e)}}return r},SVGTextLottieElement.prototype.buildNewText=function(){var r,e;this.addDynamicProperty(this);var t=this.textProperty.currentData;this.renderedLetters=createSizedArray(t?t.l.length:0),t.fc?this.layerElement.setAttribute("fill",this.buildColor(t.fc)):this.layerElement.setAttribute("fill","rgba(0,0,0,0)"),t.sc&&(this.layerElement.setAttribute("stroke",this.buildColor(t.sc)),this.layerElement.setAttribute("stroke-width",t.sw)),this.layerElement.setAttribute("font-size",t.finalSize);var o=this.globalData.fontManager.getFontByName(t.f);if(o.fClass)this.layerElement.setAttribute("class",o.fClass);else{this.layerElement.setAttribute("font-family",o.fFamily);var y=t.fWeight,R=t.fStyle;this.layerElement.setAttribute("font-style",R),this.layerElement.setAttribute("font-weight",y)}this.layerElement.setAttribute("aria-label",t.t);var G,K=t.l||[],Y=!!this.globalData.fontManager.chars;e=K.length;var Q=this.mHelper,ee=this.data.singleShape,ie=0,re=0,se=!0,le=.001*t.tr*t.finalSize;if(!ee||Y||t.sz){var ce,oe=this.textSpans.length;for(r=0;r<e;r+=1){if(this.textSpans[r]||(this.textSpans[r]={span:null,childSpan:null,glyph:null}),!Y||!ee||r===0){if(G=oe>r?this.textSpans[r].span:createNS(Y?"g":"text"),oe<=r){if(G.setAttribute("stroke-linecap","butt"),G.setAttribute("stroke-linejoin","round"),G.setAttribute("stroke-miterlimit","4"),this.textSpans[r].span=G,Y){var ue=createNS("g");G.appendChild(ue),this.textSpans[r].childSpan=ue}this.textSpans[r].span=G,this.layerElement.appendChild(G)}G.style.display="inherit"}if(Q.reset(),ee&&(K[r].n&&(ie=-le,re+=t.yOffset,re+=se?1:0,se=!1),this.applyTextPropertiesToMatrix(t,Q,K[r].line,ie,re),ie+=K[r].l||0,ie+=le),Y){var ge;if((ce=this.globalData.fontManager.getCharData(t.finalText[r],o.fStyle,this.globalData.fontManager.getFontByName(t.f).fFamily)).t===1)ge=new SVGCompElement(ce.data,this.globalData,this);else{var ve=emptyShapeData;ce.data&&ce.data.shapes&&(ve=this.buildShapeData(ce.data,t.finalSize)),ge=new SVGShapeElement(ve,this.globalData,this)}if(this.textSpans[r].glyph){var _e=this.textSpans[r].glyph;this.textSpans[r].childSpan.removeChild(_e.layerElement),_e.destroy()}this.textSpans[r].glyph=ge,ge._debug=!0,ge.prepareFrame(0),ge.renderFrame(),this.textSpans[r].childSpan.appendChild(ge.layerElement),ce.t===1&&this.textSpans[r].childSpan.setAttribute("transform","scale("+t.finalSize/100+","+t.finalSize/100+")")}else ee&&G.setAttribute("transform","translate("+Q.props[12]+","+Q.props[13]+")"),G.textContent=K[r].val,G.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve")}ee&&G&&G.setAttribute("d","")}else{var be=this.textContainer,Re="start";switch(t.j){case 1:Re="end";break;case 2:Re="middle";break;default:Re="start"}be.setAttribute("text-anchor",Re),be.setAttribute("letter-spacing",le);var Se=this.buildTextContents(t.finalText);for(e=Se.length,re=t.ps?t.ps[1]+t.ascent:0,r=0;r<e;r+=1)(G=this.textSpans[r].span||createNS("tspan")).textContent=Se[r],G.setAttribute("x",0),G.setAttribute("y",re),G.style.display="inherit",be.appendChild(G),this.textSpans[r]||(this.textSpans[r]={span:null,glyph:null}),this.textSpans[r].span=G,re+=t.finalLineHeight;this.layerElement.appendChild(be)}for(;r<this.textSpans.length;)this.textSpans[r].span.style.display="none",r+=1;this._sizeChanged=!0},SVGTextLottieElement.prototype.sourceRectAtTime=function(){if(this.prepareFrame(this.comp.renderedFrame-this.data.st),this.renderInnerContent(),this._sizeChanged){this._sizeChanged=!1;var r=this.layerElement.getBBox();this.bbox={top:r.y,left:r.x,width:r.width,height:r.height}}return this.bbox},SVGTextLottieElement.prototype.getValue=function(){var r,e,t=this.textSpans.length;for(this.renderedFrame=this.comp.renderedFrame,r=0;r<t;r+=1)(e=this.textSpans[r].glyph)&&(e.prepareFrame(this.comp.renderedFrame-this.data.st),e._mdf&&(this._mdf=!0))},SVGTextLottieElement.prototype.renderInnerContent=function(){if(this.validateText(),(!this.data.singleShape||this._mdf)&&(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag)){var r,e;this._sizeChanged=!0;var t,o,y,R=this.textAnimator.renderedLetters,G=this.textProperty.currentData.l;for(e=G.length,r=0;r<e;r+=1)G[r].n||(t=R[r],o=this.textSpans[r].span,(y=this.textSpans[r].glyph)&&y.renderFrame(),t._mdf.m&&o.setAttribute("transform",t.m),t._mdf.o&&o.setAttribute("opacity",t.o),t._mdf.sw&&o.setAttribute("stroke-width",t.sw),t._mdf.sc&&o.setAttribute("stroke",t.sc),t._mdf.fc&&o.setAttribute("fill",t.fc))}},extendPrototype([IImageElement],ISolidElement),ISolidElement.prototype.createContent=function(){var r=createNS("rect");r.setAttribute("width",this.data.sw),r.setAttribute("height",this.data.sh),r.setAttribute("fill",this.data.sc),this.layerElement.appendChild(r)},NullElement.prototype.prepareFrame=function(r){this.prepareProperties(r,!0)},NullElement.prototype.renderFrame=function(){},NullElement.prototype.getBaseElement=function(){return null},NullElement.prototype.destroy=function(){},NullElement.prototype.sourceRectAtTime=function(){},NullElement.prototype.hide=function(){},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement],NullElement),extendPrototype([BaseRenderer],SVGRendererBase),SVGRendererBase.prototype.createNull=function(r){return new NullElement(r,this.globalData,this)},SVGRendererBase.prototype.createShape=function(r){return new SVGShapeElement(r,this.globalData,this)},SVGRendererBase.prototype.createText=function(r){return new SVGTextLottieElement(r,this.globalData,this)},SVGRendererBase.prototype.createImage=function(r){return new IImageElement(r,this.globalData,this)},SVGRendererBase.prototype.createSolid=function(r){return new ISolidElement(r,this.globalData,this)},SVGRendererBase.prototype.configAnimation=function(r){this.svgElement.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.svgElement.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),this.renderConfig.viewBoxSize?this.svgElement.setAttribute("viewBox",this.renderConfig.viewBoxSize):this.svgElement.setAttribute("viewBox","0 0 "+r.w+" "+r.h),this.renderConfig.viewBoxOnly||(this.svgElement.setAttribute("width",r.w),this.svgElement.setAttribute("height",r.h),this.svgElement.style.width="100%",this.svgElement.style.height="100%",this.svgElement.style.transform="translate3d(0,0,0)",this.svgElement.style.contentVisibility=this.renderConfig.contentVisibility),this.renderConfig.width&&this.svgElement.setAttribute("width",this.renderConfig.width),this.renderConfig.height&&this.svgElement.setAttribute("height",this.renderConfig.height),this.renderConfig.className&&this.svgElement.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.svgElement.setAttribute("id",this.renderConfig.id),this.renderConfig.focusable!==void 0&&this.svgElement.setAttribute("focusable",this.renderConfig.focusable),this.svgElement.setAttribute("preserveAspectRatio",this.renderConfig.preserveAspectRatio),this.animationItem.wrapper.appendChild(this.svgElement);var e=this.globalData.defs;this.setupGlobalData(r,e),this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.data=r;var t=createNS("clipPath"),o=createNS("rect");o.setAttribute("width",r.w),o.setAttribute("height",r.h),o.setAttribute("x",0),o.setAttribute("y",0);var y=createElementID();t.setAttribute("id",y),t.appendChild(o),this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+y+")"),e.appendChild(t),this.layers=r.layers,this.elements=createSizedArray(r.layers.length)},SVGRendererBase.prototype.destroy=function(){var r;this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.layerElement=null,this.globalData.defs=null;var e=this.layers?this.layers.length:0;for(r=0;r<e;r+=1)this.elements[r]&&this.elements[r].destroy&&this.elements[r].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},SVGRendererBase.prototype.updateContainerSize=function(){},SVGRendererBase.prototype.findIndexByInd=function(r){var e=0,t=this.layers.length;for(e=0;e<t;e+=1)if(this.layers[e].ind===r)return e;return-1},SVGRendererBase.prototype.buildItem=function(r){var e=this.elements;if(!e[r]&&this.layers[r].ty!==99){e[r]=!0;var t=this.createItem(this.layers[r]);if(e[r]=t,getExpressionsPlugin()&&(this.layers[r].ty===0&&this.globalData.projectInterface.registerComposition(t),t.initExpressions()),this.appendElementInPos(t,r),this.layers[r].tt){var o="tp"in this.layers[r]?this.findIndexByInd(this.layers[r].tp):r-1;if(o===-1)return;if(this.elements[o]&&this.elements[o]!==!0){var y=e[o].getMatte(this.layers[r].tt);t.setMatte(y)}else this.buildItem(o),this.addPendingElement(t)}}},SVGRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var r=this.pendingElements.pop();if(r.checkParenting(),r.data.tt)for(var e=0,t=this.elements.length;e<t;){if(this.elements[e]===r){var o="tp"in r.data?this.findIndexByInd(r.data.tp):e-1,y=this.elements[o].getMatte(this.layers[e].tt);r.setMatte(y);break}e+=1}}},SVGRendererBase.prototype.renderFrame=function(r){if(this.renderedFrame!==r&&!this.destroyed){var e;r===null?r=this.renderedFrame:this.renderedFrame=r,this.globalData.frameNum=r,this.globalData.frameId+=1,this.globalData.projectInterface.currentFrame=r,this.globalData._mdf=!1;var t=this.layers.length;for(this.completeLayers||this.checkLayers(r),e=t-1;e>=0;e-=1)(this.completeLayers||this.elements[e])&&this.elements[e].prepareFrame(r-this.layers[e].st);if(this.globalData._mdf)for(e=0;e<t;e+=1)(this.completeLayers||this.elements[e])&&this.elements[e].renderFrame()}},SVGRendererBase.prototype.appendElementInPos=function(r,e){var t=r.getBaseElement();if(t){for(var o,y=0;y<e;)this.elements[y]&&this.elements[y]!==!0&&this.elements[y].getBaseElement()&&(o=this.elements[y].getBaseElement()),y+=1;o?this.layerElement.insertBefore(t,o):this.layerElement.appendChild(t)}},SVGRendererBase.prototype.hide=function(){this.layerElement.style.display="none"},SVGRendererBase.prototype.show=function(){this.layerElement.style.display="block"},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement,RenderableDOMElement],ICompElement),ICompElement.prototype.initElement=function(r,e,t){this.initFrame(),this.initBaseData(r,e,t),this.initTransform(r,e,t),this.initRenderable(),this.initHierarchy(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),!this.data.xt&&e.progressiveLoad||this.buildAllItems(),this.hide()},ICompElement.prototype.prepareFrame=function(r){if(this._mdf=!1,this.prepareRenderableFrame(r),this.prepareProperties(r,this.isInRange),this.isInRange||this.data.xt){if(this.tm._placeholder)this.renderedFrame=r/this.data.sr;else{var e=this.tm.v;e===this.data.op&&(e=this.data.op-1),this.renderedFrame=e}var t,o=this.elements.length;for(this.completeLayers||this.checkLayers(this.renderedFrame),t=o-1;t>=0;t-=1)(this.completeLayers||this.elements[t])&&(this.elements[t].prepareFrame(this.renderedFrame-this.layers[t].st),this.elements[t]._mdf&&(this._mdf=!0))}},ICompElement.prototype.renderInnerContent=function(){var r,e=this.layers.length;for(r=0;r<e;r+=1)(this.completeLayers||this.elements[r])&&this.elements[r].renderFrame()},ICompElement.prototype.setElements=function(r){this.elements=r},ICompElement.prototype.getElements=function(){return this.elements},ICompElement.prototype.destroyElements=function(){var r,e=this.layers.length;for(r=0;r<e;r+=1)this.elements[r]&&this.elements[r].destroy()},ICompElement.prototype.destroy=function(){this.destroyElements(),this.destroyBaseElement()},extendPrototype([SVGRendererBase,ICompElement,SVGBaseElement],SVGCompElement),SVGCompElement.prototype.createComp=function(r){return new SVGCompElement(r,this.globalData,this)},extendPrototype([SVGRendererBase],SVGRenderer),SVGRenderer.prototype.createComp=function(r){return new SVGCompElement(r,this.globalData,this)},ShapeTransformManager.prototype={addTransformSequence:function(r){var e,t=r.length,o="_";for(e=0;e<t;e+=1)o+=r[e].transform.key+"_";var y=this.sequences[o];return y||(y={transforms:[].concat(r),finalTransform:new Matrix,_mdf:!1},this.sequences[o]=y,this.sequenceList.push(y)),y},processSequence:function(r,e){for(var t=0,o=r.transforms.length,y=e;t<o&&!e;){if(r.transforms[t].transform.mProps._mdf){y=!0;break}t+=1}if(y)for(r.finalTransform.reset(),t=o-1;t>=0;t-=1)r.finalTransform.multiply(r.transforms[t].transform.mProps.v);r._mdf=y},processSequences:function(r){var e,t=this.sequenceList.length;for(e=0;e<t;e+=1)this.processSequence(this.sequenceList[e],r)},getNewKey:function(){return this.transform_key_count+=1,"_"+this.transform_key_count}};var lumaLoader=function(){var r="__lottie_element_luma_buffer",e=null,t=null,o=null;function y(){var R,G,K;e||(R=createNS("svg"),G=createNS("filter"),K=createNS("feColorMatrix"),G.setAttribute("id",r),K.setAttribute("type","matrix"),K.setAttribute("color-interpolation-filters","sRGB"),K.setAttribute("values","0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0"),G.appendChild(K),R.appendChild(G),R.setAttribute("id",r+"_svg"),featureSupport.svgLumaHidden&&(R.style.display="none"),o=R,document.body.appendChild(o),e=createTag("canvas"),(t=e.getContext("2d")).filter="url(#"+r+")",t.fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1))}return{load:y,get:function(R){return e||y(),e.width=R.width,e.height=R.height,t.filter="url(#"+r+")",e}}};function createCanvas(r,e){if(featureSupport.offscreenCanvas)return new OffscreenCanvas(r,e);var t=createTag("canvas");return t.width=r,t.height=e,t}var assetLoader={loadLumaCanvas:lumaLoader.load,getLumaCanvas:lumaLoader.get,createCanvas},registeredEffects={};function CVEffects(r){var e,t,o=r.data.ef?r.data.ef.length:0;for(this.filters=[],e=0;e<o;e+=1){t=null;var y=r.data.ef[e].ty;registeredEffects[y]&&(t=new registeredEffects[y].effect(r.effectsManager.effectElements[e],r)),t&&this.filters.push(t)}this.filters.length&&r.addRenderableComponent(this)}function registerEffect(r,e){registeredEffects[r]={effect:e}}function CVMaskElement(r,e){var t;this.data=r,this.element=e,this.masksProperties=this.data.masksProperties||[],this.viewData=createSizedArray(this.masksProperties.length);var o=this.masksProperties.length,y=!1;for(t=0;t<o;t+=1)this.masksProperties[t].mode!=="n"&&(y=!0),this.viewData[t]=ShapePropertyFactory.getShapeProp(this.element,this.masksProperties[t],3);this.hasMasks=y,y&&this.element.addRenderableComponent(this)}function CVBaseElement(){}CVEffects.prototype.renderFrame=function(r){var e,t=this.filters.length;for(e=0;e<t;e+=1)this.filters[e].renderFrame(r)},CVEffects.prototype.getEffects=function(r){var e,t=this.filters.length,o=[];for(e=0;e<t;e+=1)this.filters[e].type===r&&o.push(this.filters[e]);return o},CVMaskElement.prototype.renderFrame=function(){if(this.hasMasks){var r,e,t,o,y=this.element.finalTransform.mat,R=this.element.canvasContext,G=this.masksProperties.length;for(R.beginPath(),r=0;r<G;r+=1)if(this.masksProperties[r].mode!=="n"){var K;this.masksProperties[r].inv&&(R.moveTo(0,0),R.lineTo(this.element.globalData.compSize.w,0),R.lineTo(this.element.globalData.compSize.w,this.element.globalData.compSize.h),R.lineTo(0,this.element.globalData.compSize.h),R.lineTo(0,0)),o=this.viewData[r].v,e=y.applyToPointArray(o.v[0][0],o.v[0][1],0),R.moveTo(e[0],e[1]);var Y=o._length;for(K=1;K<Y;K+=1)t=y.applyToTriplePoints(o.o[K-1],o.i[K],o.v[K]),R.bezierCurveTo(t[0],t[1],t[2],t[3],t[4],t[5]);t=y.applyToTriplePoints(o.o[K-1],o.i[0],o.v[0]),R.bezierCurveTo(t[0],t[1],t[2],t[3],t[4],t[5])}this.element.globalData.renderer.save(!0),R.clip()}},CVMaskElement.prototype.getMaskProperty=MaskElement.prototype.getMaskProperty,CVMaskElement.prototype.destroy=function(){this.element=null};var operationsMap={1:"source-in",2:"source-out",3:"source-in",4:"source-out"};function CVShapeData(r,e,t,o){this.styledShapes=[],this.tr=[0,0,0,0,0,0];var y,R=4;e.ty==="rc"?R=5:e.ty==="el"?R=6:e.ty==="sr"&&(R=7),this.sh=ShapePropertyFactory.getShapeProp(r,e,R,r);var G,K=t.length;for(y=0;y<K;y+=1)t[y].closed||(G={transforms:o.addTransformSequence(t[y].transforms),trNodes:[]},this.styledShapes.push(G),t[y].elements.push(G))}function CVShapeElement(r,e,t){this.shapes=[],this.shapesData=r.shapes,this.stylesList=[],this.itemsData=[],this.prevViewData=[],this.shapeModifiers=[],this.processedElements=[],this.transformsManager=new ShapeTransformManager,this.initElement(r,e,t)}function CVTextElement(r,e,t){this.textSpans=[],this.yOffset=0,this.fillColorAnim=!1,this.strokeColorAnim=!1,this.strokeWidthAnim=!1,this.stroke=!1,this.fill=!1,this.justifyOffset=0,this.currentRender=null,this.renderType="canvas",this.values={fill:"rgba(0,0,0,0)",stroke:"rgba(0,0,0,0)",sWidth:0,fValue:""},this.initElement(r,e,t)}function CVImageElement(r,e,t){this.assetData=e.getAssetData(r.refId),this.img=e.imageLoader.getAsset(this.assetData),this.initElement(r,e,t)}function CVSolidElement(r,e,t){this.initElement(r,e,t)}function CanvasRendererBase(){}function CanvasContext(){this.opacity=-1,this.transform=createTypedArray("float32",16),this.fillStyle="",this.strokeStyle="",this.lineWidth="",this.lineCap="",this.lineJoin="",this.miterLimit="",this.id=Math.random()}function CVContextData(){var r;for(this.stack=[],this.cArrPos=0,this.cTr=new Matrix,r=0;r<15;r+=1){var e=new CanvasContext;this.stack[r]=e}this._length=15,this.nativeContext=null,this.transformMat=new Matrix,this.currentOpacity=1,this.currentFillStyle="",this.appliedFillStyle="",this.currentStrokeStyle="",this.appliedStrokeStyle="",this.currentLineWidth="",this.appliedLineWidth="",this.currentLineCap="",this.appliedLineCap="",this.currentLineJoin="",this.appliedLineJoin="",this.appliedMiterLimit="",this.currentMiterLimit=""}function CVCompElement(r,e,t){this.completeLayers=!1,this.layers=r.layers,this.pendingElements=[],this.elements=createSizedArray(this.layers.length),this.initElement(r,e,t),this.tm=r.tm?PropertyFactory.getProp(this,r.tm,0,e.frameRate,this):{_placeholder:!0}}function CanvasRenderer(r,e){this.animationItem=r,this.renderConfig={clearCanvas:!e||e.clearCanvas===void 0||e.clearCanvas,context:e&&e.context||null,progressiveLoad:e&&e.progressiveLoad||!1,preserveAspectRatio:e&&e.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:e&&e.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:e&&e.contentVisibility||"visible",className:e&&e.className||"",id:e&&e.id||"",runExpressions:!e||e.runExpressions===void 0||e.runExpressions},this.renderConfig.dpr=e&&e.dpr||1,this.animationItem.wrapper&&(this.renderConfig.dpr=e&&e.dpr||window.devicePixelRatio||1),this.renderedFrame=-1,this.globalData={frameNum:-1,_mdf:!1,renderConfig:this.renderConfig,currentGlobalAlpha:-1},this.contextData=new CVContextData,this.elements=[],this.pendingElements=[],this.transformMat=new Matrix,this.completeLayers=!1,this.rendererType="canvas",this.renderConfig.clearCanvas&&(this.ctxTransform=this.contextData.transform.bind(this.contextData),this.ctxOpacity=this.contextData.opacity.bind(this.contextData),this.ctxFillStyle=this.contextData.fillStyle.bind(this.contextData),this.ctxStrokeStyle=this.contextData.strokeStyle.bind(this.contextData),this.ctxLineWidth=this.contextData.lineWidth.bind(this.contextData),this.ctxLineCap=this.contextData.lineCap.bind(this.contextData),this.ctxLineJoin=this.contextData.lineJoin.bind(this.contextData),this.ctxMiterLimit=this.contextData.miterLimit.bind(this.contextData),this.ctxFill=this.contextData.fill.bind(this.contextData),this.ctxFillRect=this.contextData.fillRect.bind(this.contextData),this.ctxStroke=this.contextData.stroke.bind(this.contextData),this.save=this.contextData.save.bind(this.contextData))}function HBaseElement(){}function HSolidElement(r,e,t){this.initElement(r,e,t)}function HShapeElement(r,e,t){this.shapes=[],this.shapesData=r.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.shapesContainer=createNS("g"),this.initElement(r,e,t),this.prevViewData=[],this.currentBBox={x:999999,y:-999999,h:0,w:0}}function HTextElement(r,e,t){this.textSpans=[],this.textPaths=[],this.currentBBox={x:999999,y:-999999,h:0,w:0},this.renderType="svg",this.isMasked=!1,this.initElement(r,e,t)}function HCameraElement(r,e,t){this.initFrame(),this.initBaseData(r,e,t),this.initHierarchy();var o=PropertyFactory.getProp;if(this.pe=o(this,r.pe,0,0,this),r.ks.p.s?(this.px=o(this,r.ks.p.x,1,0,this),this.py=o(this,r.ks.p.y,1,0,this),this.pz=o(this,r.ks.p.z,1,0,this)):this.p=o(this,r.ks.p,1,0,this),r.ks.a&&(this.a=o(this,r.ks.a,1,0,this)),r.ks.or.k.length&&r.ks.or.k[0].to){var y,R=r.ks.or.k.length;for(y=0;y<R;y+=1)r.ks.or.k[y].to=null,r.ks.or.k[y].ti=null}this.or=o(this,r.ks.or,1,degToRads,this),this.or.sh=!0,this.rx=o(this,r.ks.rx,0,degToRads,this),this.ry=o(this,r.ks.ry,0,degToRads,this),this.rz=o(this,r.ks.rz,0,degToRads,this),this.mat=new Matrix,this._prevMat=new Matrix,this._isFirstFrame=!0,this.finalTransform={mProp:this}}function HImageElement(r,e,t){this.assetData=e.getAssetData(r.refId),this.initElement(r,e,t)}function HybridRendererBase(r,e){this.animationItem=r,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:e&&e.className||"",imagePreserveAspectRatio:e&&e.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(e&&e.hideOnTransparent===!1),filterSize:{width:e&&e.filterSize&&e.filterSize.width||"400%",height:e&&e.filterSize&&e.filterSize.height||"400%",x:e&&e.filterSize&&e.filterSize.x||"-100%",y:e&&e.filterSize&&e.filterSize.y||"-100%"}},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}function HCompElement(r,e,t){this.layers=r.layers,this.supports3d=!r.hasMask,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(r,e,t),this.tm=r.tm?PropertyFactory.getProp(this,r.tm,0,e.frameRate,this):{_placeholder:!0}}function HybridRenderer(r,e){this.animationItem=r,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:e&&e.className||"",imagePreserveAspectRatio:e&&e.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(e&&e.hideOnTransparent===!1),filterSize:{width:e&&e.filterSize&&e.filterSize.width||"400%",height:e&&e.filterSize&&e.filterSize.height||"400%",x:e&&e.filterSize&&e.filterSize.x||"-100%",y:e&&e.filterSize&&e.filterSize.y||"-100%"},runExpressions:!e||e.runExpressions===void 0||e.runExpressions},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}CVBaseElement.prototype={createElements:function(){},initRendererElement:function(){},createContainerElements:function(){if(this.data.tt>=1){this.buffers=[];var r=this.globalData.canvasContext,e=assetLoader.createCanvas(r.canvas.width,r.canvas.height);this.buffers.push(e);var t=assetLoader.createCanvas(r.canvas.width,r.canvas.height);this.buffers.push(t),this.data.tt>=3&&!document._isProxy&&assetLoader.loadLumaCanvas()}this.canvasContext=this.globalData.canvasContext,this.transformCanvas=this.globalData.transformCanvas,this.renderableEffectsManager=new CVEffects(this),this.searchEffectTransforms()},createContent:function(){},setBlendMode:function(){var r=this.globalData;if(r.blendMode!==this.data.bm){r.blendMode=this.data.bm;var e=getBlendMode(this.data.bm);r.canvasContext.globalCompositeOperation=e}},createRenderableComponents:function(){this.maskManager=new CVMaskElement(this.data,this),this.transformEffects=this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT)},hideElement:function(){this.hidden||this.isInRange&&!this.isTransparent||(this.hidden=!0)},showElement:function(){this.isInRange&&!this.isTransparent&&(this.hidden=!1,this._isFirstFrame=!0,this.maskManager._isFirstFrame=!0)},clearCanvas:function(r){r.clearRect(this.transformCanvas.tx,this.transformCanvas.ty,this.transformCanvas.w*this.transformCanvas.sx,this.transformCanvas.h*this.transformCanvas.sy)},prepareLayer:function(){if(this.data.tt>=1){var r=this.buffers[0].getContext("2d");this.clearCanvas(r),r.drawImage(this.canvasContext.canvas,0,0),this.currentTransform=this.canvasContext.getTransform(),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform)}},exitLayer:function(){if(this.data.tt>=1){var r=this.buffers[1],e=r.getContext("2d");if(this.clearCanvas(e),e.drawImage(this.canvasContext.canvas,0,0),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform),this.comp.getElementById("tp"in this.data?this.data.tp:this.data.ind-1).renderFrame(!0),this.canvasContext.setTransform(1,0,0,1,0,0),this.data.tt>=3&&!document._isProxy){var t=assetLoader.getLumaCanvas(this.canvasContext.canvas);t.getContext("2d").drawImage(this.canvasContext.canvas,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.drawImage(t,0,0)}this.canvasContext.globalCompositeOperation=operationsMap[this.data.tt],this.canvasContext.drawImage(r,0,0),this.canvasContext.globalCompositeOperation="destination-over",this.canvasContext.drawImage(this.buffers[0],0,0),this.canvasContext.setTransform(this.currentTransform),this.canvasContext.globalCompositeOperation="source-over"}},renderFrame:function(r){if(!this.hidden&&!this.data.hd&&(this.data.td!==1||r)){this.renderTransform(),this.renderRenderable(),this.renderLocalTransform(),this.setBlendMode();var e=this.data.ty===0;this.prepareLayer(),this.globalData.renderer.save(e),this.globalData.renderer.ctxTransform(this.finalTransform.localMat.props),this.globalData.renderer.ctxOpacity(this.finalTransform.localOpacity),this.renderInnerContent(),this.globalData.renderer.restore(e),this.exitLayer(),this.maskManager.hasMasks&&this.globalData.renderer.restore(!0),this._isFirstFrame&&(this._isFirstFrame=!1)}},destroy:function(){this.canvasContext=null,this.data=null,this.globalData=null,this.maskManager.destroy()},mHelper:new Matrix},CVBaseElement.prototype.hide=CVBaseElement.prototype.hideElement,CVBaseElement.prototype.show=CVBaseElement.prototype.showElement,CVShapeData.prototype.setAsAnimated=SVGShapeData.prototype.setAsAnimated,extendPrototype([BaseElement,TransformElement,CVBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableElement],CVShapeElement),CVShapeElement.prototype.initElement=RenderableDOMElement.prototype.initElement,CVShapeElement.prototype.transformHelper={opacity:1,_opMdf:!1},CVShapeElement.prototype.dashResetter=[],CVShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[])},CVShapeElement.prototype.createStyleElement=function(r,e){var t={data:r,type:r.ty,preTransforms:this.transformsManager.addTransformSequence(e),transforms:[],elements:[],closed:r.hd===!0},o={};if(r.ty==="fl"||r.ty==="st"?(o.c=PropertyFactory.getProp(this,r.c,1,255,this),o.c.k||(t.co="rgb("+bmFloor(o.c.v[0])+","+bmFloor(o.c.v[1])+","+bmFloor(o.c.v[2])+")")):r.ty!=="gf"&&r.ty!=="gs"||(o.s=PropertyFactory.getProp(this,r.s,1,null,this),o.e=PropertyFactory.getProp(this,r.e,1,null,this),o.h=PropertyFactory.getProp(this,r.h||{k:0},0,.01,this),o.a=PropertyFactory.getProp(this,r.a||{k:0},0,degToRads,this),o.g=new GradientProperty(this,r.g,this)),o.o=PropertyFactory.getProp(this,r.o,0,.01,this),r.ty==="st"||r.ty==="gs"){if(t.lc=lineCapEnum[r.lc||2],t.lj=lineJoinEnum[r.lj||2],r.lj==1&&(t.ml=r.ml),o.w=PropertyFactory.getProp(this,r.w,0,null,this),o.w.k||(t.wi=o.w.v),r.d){var y=new DashProperty(this,r.d,"canvas",this);o.d=y,o.d.k||(t.da=o.d.dashArray,t.do=o.d.dashoffset[0])}}else t.r=r.r===2?"evenodd":"nonzero";return this.stylesList.push(t),o.style=t,o},CVShapeElement.prototype.createGroupElement=function(){return{it:[],prevViewData:[]}},CVShapeElement.prototype.createTransformElement=function(r){return{transform:{opacity:1,_opMdf:!1,key:this.transformsManager.getNewKey(),op:PropertyFactory.getProp(this,r.o,0,.01,this),mProps:TransformPropertyFactory.getTransformProperty(this,r,this)}}},CVShapeElement.prototype.createShapeElement=function(r){var e=new CVShapeData(this,r,this.stylesList,this.transformsManager);return this.shapes.push(e),this.addShapeToModifiers(e),e},CVShapeElement.prototype.reloadShapes=function(){var r;this._isFirstFrame=!0;var e=this.itemsData.length;for(r=0;r<e;r+=1)this.prevViewData[r]=this.itemsData[r];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[]),e=this.dynamicProperties.length,r=0;r<e;r+=1)this.dynamicProperties[r].getValue();this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame)},CVShapeElement.prototype.addTransformToStyleList=function(r){var e,t=this.stylesList.length;for(e=0;e<t;e+=1)this.stylesList[e].closed||this.stylesList[e].transforms.push(r)},CVShapeElement.prototype.removeTransformFromStyleList=function(){var r,e=this.stylesList.length;for(r=0;r<e;r+=1)this.stylesList[r].closed||this.stylesList[r].transforms.pop()},CVShapeElement.prototype.closeStyles=function(r){var e,t=r.length;for(e=0;e<t;e+=1)r[e].closed=!0},CVShapeElement.prototype.searchShapes=function(r,e,t,o,y){var R,G,K,Y,Q,ee,ie=r.length-1,re=[],se=[],le=[].concat(y);for(R=ie;R>=0;R-=1){if((Y=this.searchProcessedElement(r[R]))?e[R]=t[Y-1]:r[R]._shouldRender=o,r[R].ty==="fl"||r[R].ty==="st"||r[R].ty==="gf"||r[R].ty==="gs")Y?e[R].style.closed=!1:e[R]=this.createStyleElement(r[R],le),re.push(e[R].style);else if(r[R].ty==="gr"){if(Y)for(K=e[R].it.length,G=0;G<K;G+=1)e[R].prevViewData[G]=e[R].it[G];else e[R]=this.createGroupElement(r[R]);this.searchShapes(r[R].it,e[R].it,e[R].prevViewData,o,le)}else r[R].ty==="tr"?(Y||(ee=this.createTransformElement(r[R]),e[R]=ee),le.push(e[R]),this.addTransformToStyleList(e[R])):r[R].ty==="sh"||r[R].ty==="rc"||r[R].ty==="el"||r[R].ty==="sr"?Y||(e[R]=this.createShapeElement(r[R])):r[R].ty==="tm"||r[R].ty==="rd"||r[R].ty==="pb"||r[R].ty==="zz"||r[R].ty==="op"?(Y?(Q=e[R]).closed=!1:((Q=ShapeModifiers.getModifier(r[R].ty)).init(this,r[R]),e[R]=Q,this.shapeModifiers.push(Q)),se.push(Q)):r[R].ty==="rp"&&(Y?(Q=e[R]).closed=!0:(Q=ShapeModifiers.getModifier(r[R].ty),e[R]=Q,Q.init(this,r,R,e),this.shapeModifiers.push(Q),o=!1),se.push(Q));this.addProcessedElement(r[R],R+1)}for(this.removeTransformFromStyleList(),this.closeStyles(re),ie=se.length,R=0;R<ie;R+=1)se[R].closed=!0},CVShapeElement.prototype.renderInnerContent=function(){this.transformHelper.opacity=1,this.transformHelper._opMdf=!1,this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame),this.renderShape(this.transformHelper,this.shapesData,this.itemsData,!0)},CVShapeElement.prototype.renderShapeTransform=function(r,e){(r._opMdf||e.op._mdf||this._isFirstFrame)&&(e.opacity=r.opacity,e.opacity*=e.op.v,e._opMdf=!0)},CVShapeElement.prototype.drawLayer=function(){var r,e,t,o,y,R,G,K,Y,Q=this.stylesList.length,ee=this.globalData.renderer,ie=this.globalData.canvasContext;for(r=0;r<Q;r+=1)if(((K=(Y=this.stylesList[r]).type)!=="st"&&K!=="gs"||Y.wi!==0)&&Y.data._shouldRender&&Y.coOp!==0&&this.globalData.currentGlobalAlpha!==0){for(ee.save(),R=Y.elements,K==="st"||K==="gs"?(ee.ctxStrokeStyle(K==="st"?Y.co:Y.grd),ee.ctxLineWidth(Y.wi),ee.ctxLineCap(Y.lc),ee.ctxLineJoin(Y.lj),ee.ctxMiterLimit(Y.ml||0)):ee.ctxFillStyle(K==="fl"?Y.co:Y.grd),ee.ctxOpacity(Y.coOp),K!=="st"&&K!=="gs"&&ie.beginPath(),ee.ctxTransform(Y.preTransforms.finalTransform.props),t=R.length,e=0;e<t;e+=1){for(K!=="st"&&K!=="gs"||(ie.beginPath(),Y.da&&(ie.setLineDash(Y.da),ie.lineDashOffset=Y.do)),y=(G=R[e].trNodes).length,o=0;o<y;o+=1)G[o].t==="m"?ie.moveTo(G[o].p[0],G[o].p[1]):G[o].t==="c"?ie.bezierCurveTo(G[o].pts[0],G[o].pts[1],G[o].pts[2],G[o].pts[3],G[o].pts[4],G[o].pts[5]):ie.closePath();K!=="st"&&K!=="gs"||(ee.ctxStroke(),Y.da&&ie.setLineDash(this.dashResetter))}K!=="st"&&K!=="gs"&&this.globalData.renderer.ctxFill(Y.r),ee.restore()}},CVShapeElement.prototype.renderShape=function(r,e,t,o){var y,R;for(R=r,y=e.length-1;y>=0;y-=1)e[y].ty==="tr"?(R=t[y].transform,this.renderShapeTransform(r,R)):e[y].ty==="sh"||e[y].ty==="el"||e[y].ty==="rc"||e[y].ty==="sr"?this.renderPath(e[y],t[y]):e[y].ty==="fl"?this.renderFill(e[y],t[y],R):e[y].ty==="st"?this.renderStroke(e[y],t[y],R):e[y].ty==="gf"||e[y].ty==="gs"?this.renderGradientFill(e[y],t[y],R):e[y].ty==="gr"?this.renderShape(R,e[y].it,t[y].it):e[y].ty;o&&this.drawLayer()},CVShapeElement.prototype.renderStyledShape=function(r,e){if(this._isFirstFrame||e._mdf||r.transforms._mdf){var t,o,y,R=r.trNodes,G=e.paths,K=G._length;R.length=0;var Y=r.transforms.finalTransform;for(y=0;y<K;y+=1){var Q=G.shapes[y];if(Q&&Q.v){for(o=Q._length,t=1;t<o;t+=1)t===1&&R.push({t:"m",p:Y.applyToPointArray(Q.v[0][0],Q.v[0][1],0)}),R.push({t:"c",pts:Y.applyToTriplePoints(Q.o[t-1],Q.i[t],Q.v[t])});o===1&&R.push({t:"m",p:Y.applyToPointArray(Q.v[0][0],Q.v[0][1],0)}),Q.c&&o&&(R.push({t:"c",pts:Y.applyToTriplePoints(Q.o[t-1],Q.i[0],Q.v[0])}),R.push({t:"z"}))}}r.trNodes=R}},CVShapeElement.prototype.renderPath=function(r,e){if(r.hd!==!0&&r._shouldRender){var t,o=e.styledShapes.length;for(t=0;t<o;t+=1)this.renderStyledShape(e.styledShapes[t],e.sh)}},CVShapeElement.prototype.renderFill=function(r,e,t){var o=e.style;(e.c._mdf||this._isFirstFrame)&&(o.co="rgb("+bmFloor(e.c.v[0])+","+bmFloor(e.c.v[1])+","+bmFloor(e.c.v[2])+")"),(e.o._mdf||t._opMdf||this._isFirstFrame)&&(o.coOp=e.o.v*t.opacity)},CVShapeElement.prototype.renderGradientFill=function(r,e,t){var o,y=e.style;if(!y.grd||e.g._mdf||e.s._mdf||e.e._mdf||r.t!==1&&(e.h._mdf||e.a._mdf)){var R,G=this.globalData.canvasContext,K=e.s.v,Y=e.e.v;if(r.t===1)o=G.createLinearGradient(K[0],K[1],Y[0],Y[1]);else{var Q=Math.sqrt(Math.pow(K[0]-Y[0],2)+Math.pow(K[1]-Y[1],2)),ee=Math.atan2(Y[1]-K[1],Y[0]-K[0]),ie=e.h.v;ie>=1?ie=.99:ie<=-1&&(ie=-.99);var re=Q*ie,se=Math.cos(ee+e.a.v)*re+K[0],le=Math.sin(ee+e.a.v)*re+K[1];o=G.createRadialGradient(se,le,0,K[0],K[1],Q)}var ce=r.g.p,oe=e.g.c,ue=1;for(R=0;R<ce;R+=1)e.g._hasOpacity&&e.g._collapsable&&(ue=e.g.o[2*R+1]),o.addColorStop(oe[4*R]/100,"rgba("+oe[4*R+1]+","+oe[4*R+2]+","+oe[4*R+3]+","+ue+")");y.grd=o}y.coOp=e.o.v*t.opacity},CVShapeElement.prototype.renderStroke=function(r,e,t){var o=e.style,y=e.d;y&&(y._mdf||this._isFirstFrame)&&(o.da=y.dashArray,o.do=y.dashoffset[0]),(e.c._mdf||this._isFirstFrame)&&(o.co="rgb("+bmFloor(e.c.v[0])+","+bmFloor(e.c.v[1])+","+bmFloor(e.c.v[2])+")"),(e.o._mdf||t._opMdf||this._isFirstFrame)&&(o.coOp=e.o.v*t.opacity),(e.w._mdf||this._isFirstFrame)&&(o.wi=e.w.v)},CVShapeElement.prototype.destroy=function(){this.shapesData=null,this.globalData=null,this.canvasContext=null,this.stylesList.length=0,this.itemsData.length=0},extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement,ITextElement],CVTextElement),CVTextElement.prototype.tHelper=createTag("canvas").getContext("2d"),CVTextElement.prototype.buildNewText=function(){var r=this.textProperty.currentData;this.renderedLetters=createSizedArray(r.l?r.l.length:0);var e=!1;r.fc?(e=!0,this.values.fill=this.buildColor(r.fc)):this.values.fill="rgba(0,0,0,0)",this.fill=e;var t=!1;r.sc&&(t=!0,this.values.stroke=this.buildColor(r.sc),this.values.sWidth=r.sw);var o,y,R,G,K,Y,Q,ee,ie,re,se,le,ce=this.globalData.fontManager.getFontByName(r.f),oe=r.l,ue=this.mHelper;this.stroke=t,this.values.fValue=r.finalSize+"px "+this.globalData.fontManager.getFontByName(r.f).fFamily,y=r.finalText.length;var ge=this.data.singleShape,ve=.001*r.tr*r.finalSize,_e=0,be=0,Re=!0,Se=0;for(o=0;o<y;o+=1){G=(R=this.globalData.fontManager.getCharData(r.finalText[o],ce.fStyle,this.globalData.fontManager.getFontByName(r.f).fFamily))&&R.data||{},ue.reset(),ge&&oe[o].n&&(_e=-ve,be+=r.yOffset,be+=Re?1:0,Re=!1),ie=(Q=G.shapes?G.shapes[0].it:[]).length,ue.scale(r.finalSize/100,r.finalSize/100),ge&&this.applyTextPropertiesToMatrix(r,ue,oe[o].line,_e,be),se=createSizedArray(ie-1);var Ee=0;for(ee=0;ee<ie;ee+=1)if(Q[ee].ty==="sh"){for(Y=Q[ee].ks.k.i.length,re=Q[ee].ks.k,le=[],K=1;K<Y;K+=1)K===1&&le.push(ue.applyToX(re.v[0][0],re.v[0][1],0),ue.applyToY(re.v[0][0],re.v[0][1],0)),le.push(ue.applyToX(re.o[K-1][0],re.o[K-1][1],0),ue.applyToY(re.o[K-1][0],re.o[K-1][1],0),ue.applyToX(re.i[K][0],re.i[K][1],0),ue.applyToY(re.i[K][0],re.i[K][1],0),ue.applyToX(re.v[K][0],re.v[K][1],0),ue.applyToY(re.v[K][0],re.v[K][1],0));le.push(ue.applyToX(re.o[K-1][0],re.o[K-1][1],0),ue.applyToY(re.o[K-1][0],re.o[K-1][1],0),ue.applyToX(re.i[0][0],re.i[0][1],0),ue.applyToY(re.i[0][0],re.i[0][1],0),ue.applyToX(re.v[0][0],re.v[0][1],0),ue.applyToY(re.v[0][0],re.v[0][1],0)),se[Ee]=le,Ee+=1}ge&&(_e+=oe[o].l,_e+=ve),this.textSpans[Se]?this.textSpans[Se].elem=se:this.textSpans[Se]={elem:se},Se+=1}},CVTextElement.prototype.renderInnerContent=function(){var r,e,t,o,y,R;this.validateText(),this.canvasContext.font=this.values.fValue,this.globalData.renderer.ctxLineCap("butt"),this.globalData.renderer.ctxLineJoin("miter"),this.globalData.renderer.ctxMiterLimit(4),this.data.singleShape||this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag);var G,K=this.textAnimator.renderedLetters,Y=this.textProperty.currentData.l;e=Y.length;var Q,ee,ie=null,re=null,se=null,le=this.globalData.renderer;for(r=0;r<e;r+=1)if(!Y[r].n){if((G=K[r])&&(le.save(),le.ctxTransform(G.p),le.ctxOpacity(G.o)),this.fill){for(G&&G.fc?ie!==G.fc&&(le.ctxFillStyle(G.fc),ie=G.fc):ie!==this.values.fill&&(ie=this.values.fill,le.ctxFillStyle(this.values.fill)),o=(Q=this.textSpans[r].elem).length,this.globalData.canvasContext.beginPath(),t=0;t<o;t+=1)for(R=(ee=Q[t]).length,this.globalData.canvasContext.moveTo(ee[0],ee[1]),y=2;y<R;y+=6)this.globalData.canvasContext.bezierCurveTo(ee[y],ee[y+1],ee[y+2],ee[y+3],ee[y+4],ee[y+5]);this.globalData.canvasContext.closePath(),le.ctxFill()}if(this.stroke){for(G&&G.sw?se!==G.sw&&(se=G.sw,le.ctxLineWidth(G.sw)):se!==this.values.sWidth&&(se=this.values.sWidth,le.ctxLineWidth(this.values.sWidth)),G&&G.sc?re!==G.sc&&(re=G.sc,le.ctxStrokeStyle(G.sc)):re!==this.values.stroke&&(re=this.values.stroke,le.ctxStrokeStyle(this.values.stroke)),o=(Q=this.textSpans[r].elem).length,this.globalData.canvasContext.beginPath(),t=0;t<o;t+=1)for(R=(ee=Q[t]).length,this.globalData.canvasContext.moveTo(ee[0],ee[1]),y=2;y<R;y+=6)this.globalData.canvasContext.bezierCurveTo(ee[y],ee[y+1],ee[y+2],ee[y+3],ee[y+4],ee[y+5]);this.globalData.canvasContext.closePath(),le.ctxStroke()}G&&this.globalData.renderer.restore()}},extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVImageElement),CVImageElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVImageElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVImageElement.prototype.createContent=function(){if(this.img.width&&(this.assetData.w!==this.img.width||this.assetData.h!==this.img.height)){var r=createTag("canvas");r.width=this.assetData.w,r.height=this.assetData.h;var e,t,o=r.getContext("2d"),y=this.img.width,R=this.img.height,G=y/R,K=this.assetData.w/this.assetData.h,Y=this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio;G>K&&Y==="xMidYMid slice"||G<K&&Y!=="xMidYMid slice"?e=(t=R)*K:t=(e=y)/K,o.drawImage(this.img,(y-e)/2,(R-t)/2,e,t,0,0,this.assetData.w,this.assetData.h),this.img=r}},CVImageElement.prototype.renderInnerContent=function(){this.canvasContext.drawImage(this.img,0,0)},CVImageElement.prototype.destroy=function(){this.img=null},extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVSolidElement),CVSolidElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVSolidElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVSolidElement.prototype.renderInnerContent=function(){this.globalData.renderer.ctxFillStyle(this.data.sc),this.globalData.renderer.ctxFillRect(0,0,this.data.sw,this.data.sh)},extendPrototype([BaseRenderer],CanvasRendererBase),CanvasRendererBase.prototype.createShape=function(r){return new CVShapeElement(r,this.globalData,this)},CanvasRendererBase.prototype.createText=function(r){return new CVTextElement(r,this.globalData,this)},CanvasRendererBase.prototype.createImage=function(r){return new CVImageElement(r,this.globalData,this)},CanvasRendererBase.prototype.createSolid=function(r){return new CVSolidElement(r,this.globalData,this)},CanvasRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,CanvasRendererBase.prototype.ctxTransform=function(r){r[0]===1&&r[1]===0&&r[4]===0&&r[5]===1&&r[12]===0&&r[13]===0||this.canvasContext.transform(r[0],r[1],r[4],r[5],r[12],r[13])},CanvasRendererBase.prototype.ctxOpacity=function(r){this.canvasContext.globalAlpha*=r<0?0:r},CanvasRendererBase.prototype.ctxFillStyle=function(r){this.canvasContext.fillStyle=r},CanvasRendererBase.prototype.ctxStrokeStyle=function(r){this.canvasContext.strokeStyle=r},CanvasRendererBase.prototype.ctxLineWidth=function(r){this.canvasContext.lineWidth=r},CanvasRendererBase.prototype.ctxLineCap=function(r){this.canvasContext.lineCap=r},CanvasRendererBase.prototype.ctxLineJoin=function(r){this.canvasContext.lineJoin=r},CanvasRendererBase.prototype.ctxMiterLimit=function(r){this.canvasContext.miterLimit=r},CanvasRendererBase.prototype.ctxFill=function(r){this.canvasContext.fill(r)},CanvasRendererBase.prototype.ctxFillRect=function(r,e,t,o){this.canvasContext.fillRect(r,e,t,o)},CanvasRendererBase.prototype.ctxStroke=function(){this.canvasContext.stroke()},CanvasRendererBase.prototype.reset=function(){this.renderConfig.clearCanvas?this.contextData.reset():this.canvasContext.restore()},CanvasRendererBase.prototype.save=function(){this.canvasContext.save()},CanvasRendererBase.prototype.restore=function(r){this.renderConfig.clearCanvas?(r&&(this.globalData.blendMode="source-over"),this.contextData.restore(r)):this.canvasContext.restore()},CanvasRendererBase.prototype.configAnimation=function(r){if(this.animationItem.wrapper){this.animationItem.container=createTag("canvas");var e=this.animationItem.container.style;e.width="100%",e.height="100%";var t="0px 0px 0px";e.transformOrigin=t,e.mozTransformOrigin=t,e.webkitTransformOrigin=t,e["-webkit-transform"]=t,e.contentVisibility=this.renderConfig.contentVisibility,this.animationItem.wrapper.appendChild(this.animationItem.container),this.canvasContext=this.animationItem.container.getContext("2d"),this.renderConfig.className&&this.animationItem.container.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.animationItem.container.setAttribute("id",this.renderConfig.id)}else this.canvasContext=this.renderConfig.context;this.contextData.setContext(this.canvasContext),this.data=r,this.layers=r.layers,this.transformCanvas={w:r.w,h:r.h,sx:0,sy:0,tx:0,ty:0},this.setupGlobalData(r,document.body),this.globalData.canvasContext=this.canvasContext,this.globalData.renderer=this,this.globalData.isDashed=!1,this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.globalData.transformCanvas=this.transformCanvas,this.elements=createSizedArray(r.layers.length),this.updateContainerSize()},CanvasRendererBase.prototype.updateContainerSize=function(r,e){var t,o,y,R;if(this.reset(),r?(t=r,o=e,this.canvasContext.canvas.width=t,this.canvasContext.canvas.height=o):(this.animationItem.wrapper&&this.animationItem.container?(t=this.animationItem.wrapper.offsetWidth,o=this.animationItem.wrapper.offsetHeight):(t=this.canvasContext.canvas.width,o=this.canvasContext.canvas.height),this.canvasContext.canvas.width=t*this.renderConfig.dpr,this.canvasContext.canvas.height=o*this.renderConfig.dpr),this.renderConfig.preserveAspectRatio.indexOf("meet")!==-1||this.renderConfig.preserveAspectRatio.indexOf("slice")!==-1){var G=this.renderConfig.preserveAspectRatio.split(" "),K=G[1]||"meet",Y=G[0]||"xMidYMid",Q=Y.substr(0,4),ee=Y.substr(4);y=t/o,(R=this.transformCanvas.w/this.transformCanvas.h)>y&&K==="meet"||R<y&&K==="slice"?(this.transformCanvas.sx=t/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=t/(this.transformCanvas.w/this.renderConfig.dpr)):(this.transformCanvas.sx=o/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.sy=o/(this.transformCanvas.h/this.renderConfig.dpr)),this.transformCanvas.tx=Q==="xMid"&&(R<y&&K==="meet"||R>y&&K==="slice")?(t-this.transformCanvas.w*(o/this.transformCanvas.h))/2*this.renderConfig.dpr:Q==="xMax"&&(R<y&&K==="meet"||R>y&&K==="slice")?(t-this.transformCanvas.w*(o/this.transformCanvas.h))*this.renderConfig.dpr:0,this.transformCanvas.ty=ee==="YMid"&&(R>y&&K==="meet"||R<y&&K==="slice")?(o-this.transformCanvas.h*(t/this.transformCanvas.w))/2*this.renderConfig.dpr:ee==="YMax"&&(R>y&&K==="meet"||R<y&&K==="slice")?(o-this.transformCanvas.h*(t/this.transformCanvas.w))*this.renderConfig.dpr:0}else this.renderConfig.preserveAspectRatio==="none"?(this.transformCanvas.sx=t/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=o/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.tx=0,this.transformCanvas.ty=0):(this.transformCanvas.sx=this.renderConfig.dpr,this.transformCanvas.sy=this.renderConfig.dpr,this.transformCanvas.tx=0,this.transformCanvas.ty=0);this.transformCanvas.props=[this.transformCanvas.sx,0,0,0,0,this.transformCanvas.sy,0,0,0,0,1,0,this.transformCanvas.tx,this.transformCanvas.ty,0,1],this.ctxTransform(this.transformCanvas.props),this.canvasContext.beginPath(),this.canvasContext.rect(0,0,this.transformCanvas.w,this.transformCanvas.h),this.canvasContext.closePath(),this.canvasContext.clip(),this.renderFrame(this.renderedFrame,!0)},CanvasRendererBase.prototype.destroy=function(){var r;for(this.renderConfig.clearCanvas&&this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),r=(this.layers?this.layers.length:0)-1;r>=0;r-=1)this.elements[r]&&this.elements[r].destroy&&this.elements[r].destroy();this.elements.length=0,this.globalData.canvasContext=null,this.animationItem.container=null,this.destroyed=!0},CanvasRendererBase.prototype.renderFrame=function(r,e){if((this.renderedFrame!==r||this.renderConfig.clearCanvas!==!0||e)&&!this.destroyed&&r!==-1){var t;this.renderedFrame=r,this.globalData.frameNum=r-this.animationItem._isFirstFrame,this.globalData.frameId+=1,this.globalData._mdf=!this.renderConfig.clearCanvas||e,this.globalData.projectInterface.currentFrame=r;var o=this.layers.length;for(this.completeLayers||this.checkLayers(r),t=o-1;t>=0;t-=1)(this.completeLayers||this.elements[t])&&this.elements[t].prepareFrame(r-this.layers[t].st);if(this.globalData._mdf){for(this.renderConfig.clearCanvas===!0?this.canvasContext.clearRect(0,0,this.transformCanvas.w,this.transformCanvas.h):this.save(),t=o-1;t>=0;t-=1)(this.completeLayers||this.elements[t])&&this.elements[t].renderFrame();this.renderConfig.clearCanvas!==!0&&this.restore()}}},CanvasRendererBase.prototype.buildItem=function(r){var e=this.elements;if(!e[r]&&this.layers[r].ty!==99){var t=this.createItem(this.layers[r],this,this.globalData);e[r]=t,t.initExpressions()}},CanvasRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;)this.pendingElements.pop().checkParenting()},CanvasRendererBase.prototype.hide=function(){this.animationItem.container.style.display="none"},CanvasRendererBase.prototype.show=function(){this.animationItem.container.style.display="block"},CVContextData.prototype.duplicate=function(){var r=2*this._length,e=0;for(e=this._length;e<r;e+=1)this.stack[e]=new CanvasContext;this._length=r},CVContextData.prototype.reset=function(){this.cArrPos=0,this.cTr.reset(),this.stack[this.cArrPos].opacity=1},CVContextData.prototype.restore=function(r){this.cArrPos-=1;var e,t=this.stack[this.cArrPos],o=t.transform,y=this.cTr.props;for(e=0;e<16;e+=1)y[e]=o[e];if(r){this.nativeContext.restore();var R=this.stack[this.cArrPos+1];this.appliedFillStyle=R.fillStyle,this.appliedStrokeStyle=R.strokeStyle,this.appliedLineWidth=R.lineWidth,this.appliedLineCap=R.lineCap,this.appliedLineJoin=R.lineJoin,this.appliedMiterLimit=R.miterLimit}this.nativeContext.setTransform(o[0],o[1],o[4],o[5],o[12],o[13]),(r||t.opacity!==-1&&this.currentOpacity!==t.opacity)&&(this.nativeContext.globalAlpha=t.opacity,this.currentOpacity=t.opacity),this.currentFillStyle=t.fillStyle,this.currentStrokeStyle=t.strokeStyle,this.currentLineWidth=t.lineWidth,this.currentLineCap=t.lineCap,this.currentLineJoin=t.lineJoin,this.currentMiterLimit=t.miterLimit},CVContextData.prototype.save=function(r){r&&this.nativeContext.save();var e=this.cTr.props;this._length<=this.cArrPos&&this.duplicate();var t,o=this.stack[this.cArrPos];for(t=0;t<16;t+=1)o.transform[t]=e[t];this.cArrPos+=1;var y=this.stack[this.cArrPos];y.opacity=o.opacity,y.fillStyle=o.fillStyle,y.strokeStyle=o.strokeStyle,y.lineWidth=o.lineWidth,y.lineCap=o.lineCap,y.lineJoin=o.lineJoin,y.miterLimit=o.miterLimit},CVContextData.prototype.setOpacity=function(r){this.stack[this.cArrPos].opacity=r},CVContextData.prototype.setContext=function(r){this.nativeContext=r},CVContextData.prototype.fillStyle=function(r){this.stack[this.cArrPos].fillStyle!==r&&(this.currentFillStyle=r,this.stack[this.cArrPos].fillStyle=r)},CVContextData.prototype.strokeStyle=function(r){this.stack[this.cArrPos].strokeStyle!==r&&(this.currentStrokeStyle=r,this.stack[this.cArrPos].strokeStyle=r)},CVContextData.prototype.lineWidth=function(r){this.stack[this.cArrPos].lineWidth!==r&&(this.currentLineWidth=r,this.stack[this.cArrPos].lineWidth=r)},CVContextData.prototype.lineCap=function(r){this.stack[this.cArrPos].lineCap!==r&&(this.currentLineCap=r,this.stack[this.cArrPos].lineCap=r)},CVContextData.prototype.lineJoin=function(r){this.stack[this.cArrPos].lineJoin!==r&&(this.currentLineJoin=r,this.stack[this.cArrPos].lineJoin=r)},CVContextData.prototype.miterLimit=function(r){this.stack[this.cArrPos].miterLimit!==r&&(this.currentMiterLimit=r,this.stack[this.cArrPos].miterLimit=r)},CVContextData.prototype.transform=function(r){this.transformMat.cloneFromProps(r);var e=this.cTr;this.transformMat.multiply(e),e.cloneFromProps(this.transformMat.props);var t=e.props;this.nativeContext.setTransform(t[0],t[1],t[4],t[5],t[12],t[13])},CVContextData.prototype.opacity=function(r){var e=this.stack[this.cArrPos].opacity;e*=r<0?0:r,this.stack[this.cArrPos].opacity!==e&&(this.currentOpacity!==r&&(this.nativeContext.globalAlpha=r,this.currentOpacity=r),this.stack[this.cArrPos].opacity=e)},CVContextData.prototype.fill=function(r){this.appliedFillStyle!==this.currentFillStyle&&(this.appliedFillStyle=this.currentFillStyle,this.nativeContext.fillStyle=this.appliedFillStyle),this.nativeContext.fill(r)},CVContextData.prototype.fillRect=function(r,e,t,o){this.appliedFillStyle!==this.currentFillStyle&&(this.appliedFillStyle=this.currentFillStyle,this.nativeContext.fillStyle=this.appliedFillStyle),this.nativeContext.fillRect(r,e,t,o)},CVContextData.prototype.stroke=function(){this.appliedStrokeStyle!==this.currentStrokeStyle&&(this.appliedStrokeStyle=this.currentStrokeStyle,this.nativeContext.strokeStyle=this.appliedStrokeStyle),this.appliedLineWidth!==this.currentLineWidth&&(this.appliedLineWidth=this.currentLineWidth,this.nativeContext.lineWidth=this.appliedLineWidth),this.appliedLineCap!==this.currentLineCap&&(this.appliedLineCap=this.currentLineCap,this.nativeContext.lineCap=this.appliedLineCap),this.appliedLineJoin!==this.currentLineJoin&&(this.appliedLineJoin=this.currentLineJoin,this.nativeContext.lineJoin=this.appliedLineJoin),this.appliedMiterLimit!==this.currentMiterLimit&&(this.appliedMiterLimit=this.currentMiterLimit,this.nativeContext.miterLimit=this.appliedMiterLimit),this.nativeContext.stroke()},extendPrototype([CanvasRendererBase,ICompElement,CVBaseElement],CVCompElement),CVCompElement.prototype.renderInnerContent=function(){var r,e=this.canvasContext;for(e.beginPath(),e.moveTo(0,0),e.lineTo(this.data.w,0),e.lineTo(this.data.w,this.data.h),e.lineTo(0,this.data.h),e.lineTo(0,0),e.clip(),r=this.layers.length-1;r>=0;r-=1)(this.completeLayers||this.elements[r])&&this.elements[r].renderFrame()},CVCompElement.prototype.destroy=function(){var r;for(r=this.layers.length-1;r>=0;r-=1)this.elements[r]&&this.elements[r].destroy();this.layers=null,this.elements=null},CVCompElement.prototype.createComp=function(r){return new CVCompElement(r,this.globalData,this)},extendPrototype([CanvasRendererBase],CanvasRenderer),CanvasRenderer.prototype.createComp=function(r){return new CVCompElement(r,this.globalData,this)},HBaseElement.prototype={checkBlendMode:function(){},initRendererElement:function(){this.baseElement=createTag(this.data.tg||"div"),this.data.hasMask?(this.svgElement=createNS("svg"),this.layerElement=createNS("g"),this.maskedElement=this.layerElement,this.svgElement.appendChild(this.layerElement),this.baseElement.appendChild(this.svgElement)):this.layerElement=this.baseElement,styleDiv(this.baseElement)},createContainerElements:function(){this.renderableEffectsManager=new CVEffects(this),this.transformedElement=this.baseElement,this.maskedElement=this.layerElement,this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),this.data.bm!==0&&this.setBlendMode()},renderElement:function(){var r=this.transformedElement?this.transformedElement.style:{};if(this.finalTransform._matMdf){var e=this.finalTransform.mat.toCSS();r.transform=e,r.webkitTransform=e}this.finalTransform._opMdf&&(r.opacity=this.finalTransform.mProp.o.v)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},destroy:function(){this.layerElement=null,this.transformedElement=null,this.matteElement&&(this.matteElement=null),this.maskManager&&(this.maskManager.destroy(),this.maskManager=null)},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData)},addEffects:function(){},setMatte:function(){}},HBaseElement.prototype.getBaseElement=SVGBaseElement.prototype.getBaseElement,HBaseElement.prototype.destroyBaseElement=HBaseElement.prototype.destroy,HBaseElement.prototype.buildElementParenting=BaseRenderer.prototype.buildElementParenting,extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],HSolidElement),HSolidElement.prototype.createContent=function(){var r;this.data.hasMask?((r=createNS("rect")).setAttribute("width",this.data.sw),r.setAttribute("height",this.data.sh),r.setAttribute("fill",this.data.sc),this.svgElement.setAttribute("width",this.data.sw),this.svgElement.setAttribute("height",this.data.sh)):((r=createTag("div")).style.width=this.data.sw+"px",r.style.height=this.data.sh+"px",r.style.backgroundColor=this.data.sc),this.layerElement.appendChild(r)},extendPrototype([BaseElement,TransformElement,HSolidElement,SVGShapeElement,HBaseElement,HierarchyElement,FrameElement,RenderableElement],HShapeElement),HShapeElement.prototype._renderShapeFrame=HShapeElement.prototype.renderInnerContent,HShapeElement.prototype.createContent=function(){var r;if(this.baseElement.style.fontSize=0,this.data.hasMask)this.layerElement.appendChild(this.shapesContainer),r=this.svgElement;else{r=createNS("svg");var e=this.comp.data?this.comp.data:this.globalData.compSize;r.setAttribute("width",e.w),r.setAttribute("height",e.h),r.appendChild(this.shapesContainer),this.layerElement.appendChild(r)}this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.shapesContainer,0,[],!0),this.filterUniqueShapes(),this.shapeCont=r},HShapeElement.prototype.getTransformedPoint=function(r,e){var t,o=r.length;for(t=0;t<o;t+=1)e=r[t].mProps.v.applyToPointArray(e[0],e[1],0);return e},HShapeElement.prototype.calculateShapeBoundingBox=function(r,e){var t,o,y,R,G,K=r.sh.v,Y=r.transformers,Q=K._length;if(!(Q<=1)){for(t=0;t<Q-1;t+=1)o=this.getTransformedPoint(Y,K.v[t]),y=this.getTransformedPoint(Y,K.o[t]),R=this.getTransformedPoint(Y,K.i[t+1]),G=this.getTransformedPoint(Y,K.v[t+1]),this.checkBounds(o,y,R,G,e);K.c&&(o=this.getTransformedPoint(Y,K.v[t]),y=this.getTransformedPoint(Y,K.o[t]),R=this.getTransformedPoint(Y,K.i[0]),G=this.getTransformedPoint(Y,K.v[0]),this.checkBounds(o,y,R,G,e))}},HShapeElement.prototype.checkBounds=function(r,e,t,o,y){this.getBoundsOfCurve(r,e,t,o);var R=this.shapeBoundingBox;y.x=bmMin(R.left,y.x),y.xMax=bmMax(R.right,y.xMax),y.y=bmMin(R.top,y.y),y.yMax=bmMax(R.bottom,y.yMax)},HShapeElement.prototype.shapeBoundingBox={left:0,right:0,top:0,bottom:0},HShapeElement.prototype.tempBoundingBox={x:0,xMax:0,y:0,yMax:0,width:0,height:0},HShapeElement.prototype.getBoundsOfCurve=function(r,e,t,o){for(var y,R,G,K,Y,Q,ee,ie=[[r[0],o[0]],[r[1],o[1]]],re=0;re<2;++re)R=6*r[re]-12*e[re]+6*t[re],y=-3*r[re]+9*e[re]-9*t[re]+3*o[re],G=3*e[re]-3*r[re],R|=0,G|=0,(y|=0)==0&&R===0||(y===0?(K=-G/R)>0&&K<1&&ie[re].push(this.calculateF(K,r,e,t,o,re)):(Y=R*R-4*G*y)>=0&&((Q=(-R+bmSqrt(Y))/(2*y))>0&&Q<1&&ie[re].push(this.calculateF(Q,r,e,t,o,re)),(ee=(-R-bmSqrt(Y))/(2*y))>0&&ee<1&&ie[re].push(this.calculateF(ee,r,e,t,o,re))));this.shapeBoundingBox.left=bmMin.apply(null,ie[0]),this.shapeBoundingBox.top=bmMin.apply(null,ie[1]),this.shapeBoundingBox.right=bmMax.apply(null,ie[0]),this.shapeBoundingBox.bottom=bmMax.apply(null,ie[1])},HShapeElement.prototype.calculateF=function(r,e,t,o,y,R){return bmPow(1-r,3)*e[R]+3*bmPow(1-r,2)*r*t[R]+3*(1-r)*bmPow(r,2)*o[R]+bmPow(r,3)*y[R]},HShapeElement.prototype.calculateBoundingBox=function(r,e){var t,o=r.length;for(t=0;t<o;t+=1)r[t]&&r[t].sh?this.calculateShapeBoundingBox(r[t],e):r[t]&&r[t].it?this.calculateBoundingBox(r[t].it,e):r[t]&&r[t].style&&r[t].w&&this.expandStrokeBoundingBox(r[t].w,e)},HShapeElement.prototype.expandStrokeBoundingBox=function(r,e){var t=0;if(r.keyframes){for(var o=0;o<r.keyframes.length;o+=1){var y=r.keyframes[o].s;y>t&&(t=y)}t*=r.mult}else t=r.v*r.mult;e.x-=t,e.xMax+=t,e.y-=t,e.yMax+=t},HShapeElement.prototype.currentBoxContains=function(r){return this.currentBBox.x<=r.x&&this.currentBBox.y<=r.y&&this.currentBBox.width+this.currentBBox.x>=r.x+r.width&&this.currentBBox.height+this.currentBBox.y>=r.y+r.height},HShapeElement.prototype.renderInnerContent=function(){if(this._renderShapeFrame(),!this.hidden&&(this._isFirstFrame||this._mdf)){var r=this.tempBoundingBox,e=999999;if(r.x=e,r.xMax=-e,r.y=e,r.yMax=-e,this.calculateBoundingBox(this.itemsData,r),r.width=r.xMax<r.x?0:r.xMax-r.x,r.height=r.yMax<r.y?0:r.yMax-r.y,this.currentBoxContains(r))return;var t=!1;if(this.currentBBox.w!==r.width&&(this.currentBBox.w=r.width,this.shapeCont.setAttribute("width",r.width),t=!0),this.currentBBox.h!==r.height&&(this.currentBBox.h=r.height,this.shapeCont.setAttribute("height",r.height),t=!0),t||this.currentBBox.x!==r.x||this.currentBBox.y!==r.y){this.currentBBox.w=r.width,this.currentBBox.h=r.height,this.currentBBox.x=r.x,this.currentBBox.y=r.y,this.shapeCont.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h);var o=this.shapeCont.style,y="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";o.transform=y,o.webkitTransform=y}}},extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],HTextElement),HTextElement.prototype.createContent=function(){if(this.isMasked=this.checkMasks(),this.isMasked){this.renderType="svg",this.compW=this.comp.data.w,this.compH=this.comp.data.h,this.svgElement.setAttribute("width",this.compW),this.svgElement.setAttribute("height",this.compH);var r=createNS("g");this.maskedElement.appendChild(r),this.innerElem=r}else this.renderType="html",this.innerElem=this.layerElement;this.checkParenting()},HTextElement.prototype.buildNewText=function(){var r=this.textProperty.currentData;this.renderedLetters=createSizedArray(r.l?r.l.length:0);var e=this.innerElem.style,t=r.fc?this.buildColor(r.fc):"rgba(0,0,0,0)";e.fill=t,e.color=t,r.sc&&(e.stroke=this.buildColor(r.sc),e.strokeWidth=r.sw+"px");var o,y,R=this.globalData.fontManager.getFontByName(r.f);if(!this.globalData.fontManager.chars)if(e.fontSize=r.finalSize+"px",e.lineHeight=r.finalSize+"px",R.fClass)this.innerElem.className=R.fClass;else{e.fontFamily=R.fFamily;var G=r.fWeight,K=r.fStyle;e.fontStyle=K,e.fontWeight=G}var Y,Q,ee,ie=r.l;y=ie.length;var re,se=this.mHelper,le="",ce=0;for(o=0;o<y;o+=1){if(this.globalData.fontManager.chars?(this.textPaths[ce]?Y=this.textPaths[ce]:((Y=createNS("path")).setAttribute("stroke-linecap",lineCapEnum[1]),Y.setAttribute("stroke-linejoin",lineJoinEnum[2]),Y.setAttribute("stroke-miterlimit","4")),this.isMasked||(this.textSpans[ce]?ee=(Q=this.textSpans[ce]).children[0]:((Q=createTag("div")).style.lineHeight=0,(ee=createNS("svg")).appendChild(Y),styleDiv(Q)))):this.isMasked?Y=this.textPaths[ce]?this.textPaths[ce]:createNS("text"):this.textSpans[ce]?(Q=this.textSpans[ce],Y=this.textPaths[ce]):(styleDiv(Q=createTag("span")),styleDiv(Y=createTag("span")),Q.appendChild(Y)),this.globalData.fontManager.chars){var oe,ue=this.globalData.fontManager.getCharData(r.finalText[o],R.fStyle,this.globalData.fontManager.getFontByName(r.f).fFamily);if(oe=ue?ue.data:null,se.reset(),oe&&oe.shapes&&oe.shapes.length&&(re=oe.shapes[0].it,se.scale(r.finalSize/100,r.finalSize/100),le=this.createPathShape(se,re),Y.setAttribute("d",le)),this.isMasked)this.innerElem.appendChild(Y);else{if(this.innerElem.appendChild(Q),oe&&oe.shapes){document.body.appendChild(ee);var ge=ee.getBBox();ee.setAttribute("width",ge.width+2),ee.setAttribute("height",ge.height+2),ee.setAttribute("viewBox",ge.x-1+" "+(ge.y-1)+" "+(ge.width+2)+" "+(ge.height+2));var ve=ee.style,_e="translate("+(ge.x-1)+"px,"+(ge.y-1)+"px)";ve.transform=_e,ve.webkitTransform=_e,ie[o].yOffset=ge.y-1}else ee.setAttribute("width",1),ee.setAttribute("height",1);Q.appendChild(ee)}}else if(Y.textContent=ie[o].val,Y.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),this.isMasked)this.innerElem.appendChild(Y);else{this.innerElem.appendChild(Q);var be=Y.style,Re="translate3d(0,"+-r.finalSize/1.2+"px,0)";be.transform=Re,be.webkitTransform=Re}this.isMasked?this.textSpans[ce]=Y:this.textSpans[ce]=Q,this.textSpans[ce].style.display="block",this.textPaths[ce]=Y,ce+=1}for(;ce<this.textSpans.length;)this.textSpans[ce].style.display="none",ce+=1},HTextElement.prototype.renderInnerContent=function(){var r;if(this.validateText(),this.data.singleShape){if(!this._isFirstFrame&&!this.lettersChangedFlag)return;if(this.isMasked&&this.finalTransform._matMdf){this.svgElement.setAttribute("viewBox",-this.finalTransform.mProp.p.v[0]+" "+-this.finalTransform.mProp.p.v[1]+" "+this.compW+" "+this.compH),r=this.svgElement.style;var e="translate("+-this.finalTransform.mProp.p.v[0]+"px,"+-this.finalTransform.mProp.p.v[1]+"px)";r.transform=e,r.webkitTransform=e}}if(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag){var t,o,y,R,G,K=0,Y=this.textAnimator.renderedLetters,Q=this.textProperty.currentData.l;for(o=Q.length,t=0;t<o;t+=1)Q[t].n?K+=1:(R=this.textSpans[t],G=this.textPaths[t],y=Y[K],K+=1,y._mdf.m&&(this.isMasked?R.setAttribute("transform",y.m):(R.style.webkitTransform=y.m,R.style.transform=y.m)),R.style.opacity=y.o,y.sw&&y._mdf.sw&&G.setAttribute("stroke-width",y.sw),y.sc&&y._mdf.sc&&G.setAttribute("stroke",y.sc),y.fc&&y._mdf.fc&&(G.setAttribute("fill",y.fc),G.style.color=y.fc));if(this.innerElem.getBBox&&!this.hidden&&(this._isFirstFrame||this._mdf)){var ee=this.innerElem.getBBox();if(this.currentBBox.w!==ee.width&&(this.currentBBox.w=ee.width,this.svgElement.setAttribute("width",ee.width)),this.currentBBox.h!==ee.height&&(this.currentBBox.h=ee.height,this.svgElement.setAttribute("height",ee.height)),this.currentBBox.w!==ee.width+2||this.currentBBox.h!==ee.height+2||this.currentBBox.x!==ee.x-1||this.currentBBox.y!==ee.y-1){this.currentBBox.w=ee.width+2,this.currentBBox.h=ee.height+2,this.currentBBox.x=ee.x-1,this.currentBBox.y=ee.y-1,this.svgElement.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h),r=this.svgElement.style;var ie="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";r.transform=ie,r.webkitTransform=ie}}}},extendPrototype([BaseElement,FrameElement,HierarchyElement],HCameraElement),HCameraElement.prototype.setup=function(){var r,e,t,o,y=this.comp.threeDElements.length;for(r=0;r<y;r+=1)if((e=this.comp.threeDElements[r]).type==="3d"){t=e.perspectiveElem.style,o=e.container.style;var R=this.pe.v+"px",G="0px 0px 0px",K="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";t.perspective=R,t.webkitPerspective=R,o.transformOrigin=G,o.mozTransformOrigin=G,o.webkitTransformOrigin=G,t.transform=K,t.webkitTransform=K}},HCameraElement.prototype.createElements=function(){},HCameraElement.prototype.hide=function(){},HCameraElement.prototype.renderFrame=function(){var r,e,t=this._isFirstFrame;if(this.hierarchy)for(e=this.hierarchy.length,r=0;r<e;r+=1)t=this.hierarchy[r].finalTransform.mProp._mdf||t;if(t||this.pe._mdf||this.p&&this.p._mdf||this.px&&(this.px._mdf||this.py._mdf||this.pz._mdf)||this.rx._mdf||this.ry._mdf||this.rz._mdf||this.or._mdf||this.a&&this.a._mdf){if(this.mat.reset(),this.hierarchy)for(r=e=this.hierarchy.length-1;r>=0;r-=1){var o=this.hierarchy[r].finalTransform.mProp;this.mat.translate(-o.p.v[0],-o.p.v[1],o.p.v[2]),this.mat.rotateX(-o.or.v[0]).rotateY(-o.or.v[1]).rotateZ(o.or.v[2]),this.mat.rotateX(-o.rx.v).rotateY(-o.ry.v).rotateZ(o.rz.v),this.mat.scale(1/o.s.v[0],1/o.s.v[1],1/o.s.v[2]),this.mat.translate(o.a.v[0],o.a.v[1],o.a.v[2])}if(this.p?this.mat.translate(-this.p.v[0],-this.p.v[1],this.p.v[2]):this.mat.translate(-this.px.v,-this.py.v,this.pz.v),this.a){var y;y=this.p?[this.p.v[0]-this.a.v[0],this.p.v[1]-this.a.v[1],this.p.v[2]-this.a.v[2]]:[this.px.v-this.a.v[0],this.py.v-this.a.v[1],this.pz.v-this.a.v[2]];var R=Math.sqrt(Math.pow(y[0],2)+Math.pow(y[1],2)+Math.pow(y[2],2)),G=[y[0]/R,y[1]/R,y[2]/R],K=Math.sqrt(G[2]*G[2]+G[0]*G[0]),Y=Math.atan2(G[1],K),Q=Math.atan2(G[0],-G[2]);this.mat.rotateY(Q).rotateX(-Y)}this.mat.rotateX(-this.rx.v).rotateY(-this.ry.v).rotateZ(this.rz.v),this.mat.rotateX(-this.or.v[0]).rotateY(-this.or.v[1]).rotateZ(this.or.v[2]),this.mat.translate(this.globalData.compSize.w/2,this.globalData.compSize.h/2,0),this.mat.translate(0,0,this.pe.v);var ee=!this._prevMat.equals(this.mat);if((ee||this.pe._mdf)&&this.comp.threeDElements){var ie,re,se;for(e=this.comp.threeDElements.length,r=0;r<e;r+=1)if((ie=this.comp.threeDElements[r]).type==="3d"){if(ee){var le=this.mat.toCSS();(se=ie.container.style).transform=le,se.webkitTransform=le}this.pe._mdf&&((re=ie.perspectiveElem.style).perspective=this.pe.v+"px",re.webkitPerspective=this.pe.v+"px")}this.mat.clone(this._prevMat)}}this._isFirstFrame=!1},HCameraElement.prototype.prepareFrame=function(r){this.prepareProperties(r,!0)},HCameraElement.prototype.destroy=function(){},HCameraElement.prototype.getBaseElement=function(){return null},extendPrototype([BaseElement,TransformElement,HBaseElement,HSolidElement,HierarchyElement,FrameElement,RenderableElement],HImageElement),HImageElement.prototype.createContent=function(){var r=this.globalData.getAssetsPath(this.assetData),e=new Image;this.data.hasMask?(this.imageElem=createNS("image"),this.imageElem.setAttribute("width",this.assetData.w+"px"),this.imageElem.setAttribute("height",this.assetData.h+"px"),this.imageElem.setAttributeNS("http://www.w3.org/1999/xlink","href",r),this.layerElement.appendChild(this.imageElem),this.baseElement.setAttribute("width",this.assetData.w),this.baseElement.setAttribute("height",this.assetData.h)):this.layerElement.appendChild(e),e.crossOrigin="anonymous",e.src=r,this.data.ln&&this.baseElement.setAttribute("id",this.data.ln)},extendPrototype([BaseRenderer],HybridRendererBase),HybridRendererBase.prototype.buildItem=SVGRenderer.prototype.buildItem,HybridRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;)this.pendingElements.pop().checkParenting()},HybridRendererBase.prototype.appendElementInPos=function(r,e){var t=r.getBaseElement();if(t){var o=this.layers[e];if(o.ddd&&this.supports3d)this.addTo3dContainer(t,e);else if(this.threeDElements)this.addTo3dContainer(t,e);else{for(var y,R,G=0;G<e;)this.elements[G]&&this.elements[G]!==!0&&this.elements[G].getBaseElement&&(R=this.elements[G],y=(this.layers[G].ddd?this.getThreeDContainerByPos(G):R.getBaseElement())||y),G+=1;y?o.ddd&&this.supports3d||this.layerElement.insertBefore(t,y):o.ddd&&this.supports3d||this.layerElement.appendChild(t)}}},HybridRendererBase.prototype.createShape=function(r){return this.supports3d?new HShapeElement(r,this.globalData,this):new SVGShapeElement(r,this.globalData,this)},HybridRendererBase.prototype.createText=function(r){return this.supports3d?new HTextElement(r,this.globalData,this):new SVGTextLottieElement(r,this.globalData,this)},HybridRendererBase.prototype.createCamera=function(r){return this.camera=new HCameraElement(r,this.globalData,this),this.camera},HybridRendererBase.prototype.createImage=function(r){return this.supports3d?new HImageElement(r,this.globalData,this):new IImageElement(r,this.globalData,this)},HybridRendererBase.prototype.createSolid=function(r){return this.supports3d?new HSolidElement(r,this.globalData,this):new ISolidElement(r,this.globalData,this)},HybridRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,HybridRendererBase.prototype.getThreeDContainerByPos=function(r){for(var e=0,t=this.threeDElements.length;e<t;){if(this.threeDElements[e].startPos<=r&&this.threeDElements[e].endPos>=r)return this.threeDElements[e].perspectiveElem;e+=1}return null},HybridRendererBase.prototype.createThreeDContainer=function(r,e){var t,o,y=createTag("div");styleDiv(y);var R=createTag("div");if(styleDiv(R),e==="3d"){(t=y.style).width=this.globalData.compSize.w+"px",t.height=this.globalData.compSize.h+"px";var G="50% 50%";t.webkitTransformOrigin=G,t.mozTransformOrigin=G,t.transformOrigin=G;var K="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";(o=R.style).transform=K,o.webkitTransform=K}y.appendChild(R);var Y={container:R,perspectiveElem:y,startPos:r,endPos:r,type:e};return this.threeDElements.push(Y),Y},HybridRendererBase.prototype.build3dContainers=function(){var r,e,t=this.layers.length,o="";for(r=0;r<t;r+=1)this.layers[r].ddd&&this.layers[r].ty!==3?(o!=="3d"&&(o="3d",e=this.createThreeDContainer(r,"3d")),e.endPos=Math.max(e.endPos,r)):(o!=="2d"&&(o="2d",e=this.createThreeDContainer(r,"2d")),e.endPos=Math.max(e.endPos,r));for(r=(t=this.threeDElements.length)-1;r>=0;r-=1)this.resizerElem.appendChild(this.threeDElements[r].perspectiveElem)},HybridRendererBase.prototype.addTo3dContainer=function(r,e){for(var t=0,o=this.threeDElements.length;t<o;){if(e<=this.threeDElements[t].endPos){for(var y,R=this.threeDElements[t].startPos;R<e;)this.elements[R]&&this.elements[R].getBaseElement&&(y=this.elements[R].getBaseElement()),R+=1;y?this.threeDElements[t].container.insertBefore(r,y):this.threeDElements[t].container.appendChild(r);break}t+=1}},HybridRendererBase.prototype.configAnimation=function(r){var e=createTag("div"),t=this.animationItem.wrapper,o=e.style;o.width=r.w+"px",o.height=r.h+"px",this.resizerElem=e,styleDiv(e),o.transformStyle="flat",o.mozTransformStyle="flat",o.webkitTransformStyle="flat",this.renderConfig.className&&e.setAttribute("class",this.renderConfig.className),t.appendChild(e),o.overflow="hidden";var y=createNS("svg");y.setAttribute("width","1"),y.setAttribute("height","1"),styleDiv(y),this.resizerElem.appendChild(y);var R=createNS("defs");y.appendChild(R),this.data=r,this.setupGlobalData(r,y),this.globalData.defs=R,this.layers=r.layers,this.layerElement=this.resizerElem,this.build3dContainers(),this.updateContainerSize()},HybridRendererBase.prototype.destroy=function(){var r;this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.animationItem.container=null,this.globalData.defs=null;var e=this.layers?this.layers.length:0;for(r=0;r<e;r+=1)this.elements[r]&&this.elements[r].destroy&&this.elements[r].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},HybridRendererBase.prototype.updateContainerSize=function(){var r,e,t,o,y=this.animationItem.wrapper.offsetWidth,R=this.animationItem.wrapper.offsetHeight,G=y/R;this.globalData.compSize.w/this.globalData.compSize.h>G?(r=y/this.globalData.compSize.w,e=y/this.globalData.compSize.w,t=0,o=(R-this.globalData.compSize.h*(y/this.globalData.compSize.w))/2):(r=R/this.globalData.compSize.h,e=R/this.globalData.compSize.h,t=(y-this.globalData.compSize.w*(R/this.globalData.compSize.h))/2,o=0);var K=this.resizerElem.style;K.webkitTransform="matrix3d("+r+",0,0,0,0,"+e+",0,0,0,0,1,0,"+t+","+o+",0,1)",K.transform=K.webkitTransform},HybridRendererBase.prototype.renderFrame=SVGRenderer.prototype.renderFrame,HybridRendererBase.prototype.hide=function(){this.resizerElem.style.display="none"},HybridRendererBase.prototype.show=function(){this.resizerElem.style.display="block"},HybridRendererBase.prototype.initItems=function(){if(this.buildAllItems(),this.camera)this.camera.setup();else{var r,e=this.globalData.compSize.w,t=this.globalData.compSize.h,o=this.threeDElements.length;for(r=0;r<o;r+=1){var y=this.threeDElements[r].perspectiveElem.style;y.webkitPerspective=Math.sqrt(Math.pow(e,2)+Math.pow(t,2))+"px",y.perspective=y.webkitPerspective}}},HybridRendererBase.prototype.searchExtraCompositions=function(r){var e,t=r.length,o=createTag("div");for(e=0;e<t;e+=1)if(r[e].xt){var y=this.createComp(r[e],o,this.globalData.comp,null);y.initExpressions(),this.globalData.projectInterface.registerComposition(y)}},extendPrototype([HybridRendererBase,ICompElement,HBaseElement],HCompElement),HCompElement.prototype._createBaseContainerElements=HCompElement.prototype.createContainerElements,HCompElement.prototype.createContainerElements=function(){this._createBaseContainerElements(),this.data.hasMask?(this.svgElement.setAttribute("width",this.data.w),this.svgElement.setAttribute("height",this.data.h),this.transformedElement=this.baseElement):this.transformedElement=this.layerElement},HCompElement.prototype.addTo3dContainer=function(r,e){for(var t,o=0;o<e;)this.elements[o]&&this.elements[o].getBaseElement&&(t=this.elements[o].getBaseElement()),o+=1;t?this.layerElement.insertBefore(r,t):this.layerElement.appendChild(r)},HCompElement.prototype.createComp=function(r){return this.supports3d?new HCompElement(r,this.globalData,this):new SVGCompElement(r,this.globalData,this)},extendPrototype([HybridRendererBase],HybridRenderer),HybridRenderer.prototype.createComp=function(r){return this.supports3d?new HCompElement(r,this.globalData,this):new SVGCompElement(r,this.globalData,this)};var CompExpressionInterface=function(r){function e(t){for(var o=0,y=r.layers.length;o<y;){if(r.layers[o].nm===t||r.layers[o].ind===t)return r.elements[o].layerInterface;o+=1}return null}return Object.defineProperty(e,"_name",{value:r.data.nm}),e.layer=e,e.pixelAspect=1,e.height=r.data.h||r.globalData.compSize.h,e.width=r.data.w||r.globalData.compSize.w,e.pixelAspect=1,e.frameDuration=1/r.globalData.frameRate,e.displayStartTime=0,e.numLayers=r.layers.length,e};function _typeof$2(r){return _typeof$2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$2(r)}function seedRandom(r,e){var t=this,o=256,y=e.pow(o,6),R=e.pow(2,52),G=2*R,K=255;function Y(se){var le,ce=se.length,oe=this,ue=0,ge=oe.i=oe.j=0,ve=oe.S=[];for(ce||(se=[ce++]);ue<o;)ve[ue]=ue++;for(ue=0;ue<o;ue++)ve[ue]=ve[ge=K&ge+se[ue%ce]+(le=ve[ue])],ve[ge]=le;oe.g=function(_e){for(var be,Re=0,Se=oe.i,Ee=oe.j,ye=oe.S;_e--;)be=ye[Se=K&Se+1],Re=Re*o+ye[K&(ye[Se]=ye[Ee=K&Ee+be])+(ye[Ee]=be)];return oe.i=Se,oe.j=Ee,Re}}function Q(se,le){return le.i=se.i,le.j=se.j,le.S=se.S.slice(),le}function ee(se,le){var ce,oe=[],ue=_typeof$2(se);if(le&&ue=="object")for(ce in se)try{oe.push(ee(se[ce],le-1))}catch{}return oe.length?oe:ue=="string"?se:se+"\0"}function ie(se,le){for(var ce,oe=se+"",ue=0;ue<oe.length;)le[K&ue]=K&(ce^=19*le[K&ue])+oe.charCodeAt(ue++);return re(le)}function re(se){return String.fromCharCode.apply(0,se)}e.seedrandom=function(se,le,ce){var oe=[],ue=ie(ee((le=le===!0?{entropy:!0}:le||{}).entropy?[se,re(r)]:se===null?function(){try{var _e=new Uint8Array(o);return(t.crypto||t.msCrypto).getRandomValues(_e),re(_e)}catch{var be=t.navigator,Re=be&&be.plugins;return[+new Date,t,Re,t.screen,re(r)]}}():se,3),oe),ge=new Y(oe),ve=function(){for(var _e=ge.g(6),be=y,Re=0;_e<R;)_e=(_e+Re)*o,be*=o,Re=ge.g(1);for(;_e>=G;)_e/=2,be/=2,Re>>>=1;return(_e+Re)/be};return ve.int32=function(){return 0|ge.g(4)},ve.quick=function(){return ge.g(4)/4294967296},ve.double=ve,ie(re(ge.S),r),(le.pass||ce||function(_e,be,Re,Se){return Se&&(Se.S&&Q(Se,ge),_e.state=function(){return Q(ge,{})}),Re?(e.random=_e,be):_e})(ve,ue,"global"in le?le.global:this==e,le.state)},ie(e.random(),r)}function initialize$2(r){seedRandom([],r)}var propTypes={SHAPE:"shape"};function _typeof$1(r){return _typeof$1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$1(r)}var ExpressionManager=function(){var ob={},Math=BMMath,window=null,document=null,XMLHttpRequest=null,fetch=null,frames=null,_lottieGlobal={};function resetFrame(){_lottieGlobal={}}function $bm_isInstanceOfArray(r){return r.constructor===Array||r.constructor===Float32Array}function isNumerable(r,e){return r==="number"||e instanceof Number||r==="boolean"||r==="string"}function $bm_neg(r){var e=_typeof$1(r);if(e==="number"||r instanceof Number||e==="boolean")return-r;if($bm_isInstanceOfArray(r)){var t,o=r.length,y=[];for(t=0;t<o;t+=1)y[t]=-r[t];return y}return r.propType?r.v:-r}initialize$2(BMMath);var easeInBez=BezierFactory.getBezierEasing(.333,0,.833,.833,"easeIn").get,easeOutBez=BezierFactory.getBezierEasing(.167,.167,.667,1,"easeOut").get,easeInOutBez=BezierFactory.getBezierEasing(.33,0,.667,1,"easeInOut").get;function sum(r,e){var t=_typeof$1(r),o=_typeof$1(e);if(isNumerable(t,r)&&isNumerable(o,e)||t==="string"||o==="string")return r+e;if($bm_isInstanceOfArray(r)&&isNumerable(o,e))return(r=r.slice(0))[0]+=e,r;if(isNumerable(t,r)&&$bm_isInstanceOfArray(e))return(e=e.slice(0))[0]=r+e[0],e;if($bm_isInstanceOfArray(r)&&$bm_isInstanceOfArray(e)){for(var y=0,R=r.length,G=e.length,K=[];y<R||y<G;)(typeof r[y]=="number"||r[y]instanceof Number)&&(typeof e[y]=="number"||e[y]instanceof Number)?K[y]=r[y]+e[y]:K[y]=e[y]===void 0?r[y]:r[y]||e[y],y+=1;return K}return 0}var add=sum;function sub(r,e){var t=_typeof$1(r),o=_typeof$1(e);if(isNumerable(t,r)&&isNumerable(o,e))return t==="string"&&(r=parseInt(r,10)),o==="string"&&(e=parseInt(e,10)),r-e;if($bm_isInstanceOfArray(r)&&isNumerable(o,e))return(r=r.slice(0))[0]-=e,r;if(isNumerable(t,r)&&$bm_isInstanceOfArray(e))return(e=e.slice(0))[0]=r-e[0],e;if($bm_isInstanceOfArray(r)&&$bm_isInstanceOfArray(e)){for(var y=0,R=r.length,G=e.length,K=[];y<R||y<G;)(typeof r[y]=="number"||r[y]instanceof Number)&&(typeof e[y]=="number"||e[y]instanceof Number)?K[y]=r[y]-e[y]:K[y]=e[y]===void 0?r[y]:r[y]||e[y],y+=1;return K}return 0}function mul(r,e){var t,o,y,R=_typeof$1(r),G=_typeof$1(e);if(isNumerable(R,r)&&isNumerable(G,e))return r*e;if($bm_isInstanceOfArray(r)&&isNumerable(G,e)){for(y=r.length,t=createTypedArray("float32",y),o=0;o<y;o+=1)t[o]=r[o]*e;return t}if(isNumerable(R,r)&&$bm_isInstanceOfArray(e)){for(y=e.length,t=createTypedArray("float32",y),o=0;o<y;o+=1)t[o]=r*e[o];return t}return 0}function div(r,e){var t,o,y,R=_typeof$1(r),G=_typeof$1(e);if(isNumerable(R,r)&&isNumerable(G,e))return r/e;if($bm_isInstanceOfArray(r)&&isNumerable(G,e)){for(y=r.length,t=createTypedArray("float32",y),o=0;o<y;o+=1)t[o]=r[o]/e;return t}if(isNumerable(R,r)&&$bm_isInstanceOfArray(e)){for(y=e.length,t=createTypedArray("float32",y),o=0;o<y;o+=1)t[o]=r/e[o];return t}return 0}function mod(r,e){return typeof r=="string"&&(r=parseInt(r,10)),typeof e=="string"&&(e=parseInt(e,10)),r%e}var $bm_sum=sum,$bm_sub=sub,$bm_mul=mul,$bm_div=div,$bm_mod=mod;function clamp(r,e,t){if(e>t){var o=t;t=e,e=o}return Math.min(Math.max(r,e),t)}function radiansToDegrees(r){return r/degToRads}var radians_to_degrees=radiansToDegrees;function degreesToRadians(r){return r*degToRads}var degrees_to_radians=radiansToDegrees,helperLengthArray=[0,0,0,0,0,0];function length(r,e){if(typeof r=="number"||r instanceof Number)return e=e||0,Math.abs(r-e);var t;e||(e=helperLengthArray);var o=Math.min(r.length,e.length),y=0;for(t=0;t<o;t+=1)y+=Math.pow(e[t]-r[t],2);return Math.sqrt(y)}function normalize(r){return div(r,length(r))}function rgbToHsl(r){var e,t,o=r[0],y=r[1],R=r[2],G=Math.max(o,y,R),K=Math.min(o,y,R),Y=(G+K)/2;if(G===K)e=0,t=0;else{var Q=G-K;switch(t=Y>.5?Q/(2-G-K):Q/(G+K),G){case o:e=(y-R)/Q+(y<R?6:0);break;case y:e=(R-o)/Q+2;break;case R:e=(o-y)/Q+4}e/=6}return[e,t,Y,r[3]]}function hue2rgb(r,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?r+6*(e-r)*t:t<.5?e:t<2/3?r+(e-r)*(2/3-t)*6:r}function hslToRgb(r){var e,t,o,y=r[0],R=r[1],G=r[2];if(R===0)e=G,o=G,t=G;else{var K=G<.5?G*(1+R):G+R-G*R,Y=2*G-K;e=hue2rgb(Y,K,y+1/3),t=hue2rgb(Y,K,y),o=hue2rgb(Y,K,y-1/3)}return[e,t,o,r[3]]}function linear(r,e,t,o,y){if(o!==void 0&&y!==void 0||(o=e,y=t,e=0,t=1),t<e){var R=t;t=e,e=R}if(r<=e)return o;if(r>=t)return y;var G,K=t===e?0:(r-e)/(t-e);if(!o.length)return o+(y-o)*K;var Y=o.length,Q=createTypedArray("float32",Y);for(G=0;G<Y;G+=1)Q[G]=o[G]+(y[G]-o[G])*K;return Q}function random(r,e){if(e===void 0&&(r===void 0?(r=0,e=1):(e=r,r=void 0)),e.length){var t,o=e.length;r||(r=createTypedArray("float32",o));var y=createTypedArray("float32",o),R=BMMath.random();for(t=0;t<o;t+=1)y[t]=r[t]+R*(e[t]-r[t]);return y}return r===void 0&&(r=0),r+BMMath.random()*(e-r)}function createPath(r,e,t,o){var y,R=r.length,G=shapePool.newElement();G.setPathData(!!o,R);var K,Y,Q=[0,0];for(y=0;y<R;y+=1)K=e&&e[y]?e[y]:Q,Y=t&&t[y]?t[y]:Q,G.setTripleAt(r[y][0],r[y][1],Y[0]+r[y][0],Y[1]+r[y][1],K[0]+r[y][0],K[1]+r[y][1],y,!0);return G}function initiateExpression(elem,data,property){function noOp(r){return r}if(!elem.globalData.renderConfig.runExpressions)return noOp;var val=data.x,needsVelocity=/velocity(?![\w\d])/.test(val),_needsRandom=val.indexOf("random")!==-1,elemType=elem.data.ty,transform,$bm_transform,content,effect,thisProperty=property;thisProperty.valueAtTime=thisProperty.getValueAtTime,Object.defineProperty(thisProperty,"value",{get:function(){return thisProperty.v}}),elem.comp.frameDuration=1/elem.comp.globalData.frameRate,elem.comp.displayStartTime=0;var inPoint=elem.data.ip/elem.comp.globalData.frameRate,outPoint=elem.data.op/elem.comp.globalData.frameRate,width=elem.data.sw?elem.data.sw:0,height=elem.data.sh?elem.data.sh:0,name=elem.data.nm,loopIn,loop_in,loopOut,loop_out,smooth,toWorld,fromWorld,fromComp,toComp,fromCompToSurface,position,rotation,anchorPoint,scale,thisLayer,thisComp,mask,valueAtTime,velocityAtTime,scoped_bm_rt,expression_function=eval("[function _expression_function(){"+val+";scoped_bm_rt=$bm_rt}]")[0],numKeys=property.kf?data.k.length:0,active=!this.data||this.data.hd!==!0,wiggle=(function(r,e){var t,o,y=this.pv.length?this.pv.length:1,R=createTypedArray("float32",y),G=Math.floor(5*time);for(t=0,o=0;t<G;){for(o=0;o<y;o+=1)R[o]+=-e+2*e*BMMath.random();t+=1}var K=5*time,Y=K-Math.floor(K),Q=createTypedArray("float32",y);if(y>1){for(o=0;o<y;o+=1)Q[o]=this.pv[o]+R[o]+(-e+2*e*BMMath.random())*Y;return Q}return this.pv+R[0]+(-e+2*e*BMMath.random())*Y}).bind(this);function loopInDuration(r,e){return loopIn(r,e,!0)}function loopOutDuration(r,e){return loopOut(r,e,!0)}thisProperty.loopIn&&(loopIn=thisProperty.loopIn.bind(thisProperty),loop_in=loopIn),thisProperty.loopOut&&(loopOut=thisProperty.loopOut.bind(thisProperty),loop_out=loopOut),thisProperty.smooth&&(smooth=thisProperty.smooth.bind(thisProperty)),this.getValueAtTime&&(valueAtTime=this.getValueAtTime.bind(this)),this.getVelocityAtTime&&(velocityAtTime=this.getVelocityAtTime.bind(this));var comp=elem.comp.globalData.projectInterface.bind(elem.comp.globalData.projectInterface),time,velocity,value,text,textIndex,textTotal,selectorValue;function lookAt(r,e){var t=[e[0]-r[0],e[1]-r[1],e[2]-r[2]],o=Math.atan2(t[0],Math.sqrt(t[1]*t[1]+t[2]*t[2]))/degToRads;return[-Math.atan2(t[1],t[2])/degToRads,o,0]}function easeOut(r,e,t,o,y){return applyEase(easeOutBez,r,e,t,o,y)}function easeIn(r,e,t,o,y){return applyEase(easeInBez,r,e,t,o,y)}function ease(r,e,t,o,y){return applyEase(easeInOutBez,r,e,t,o,y)}function applyEase(r,e,t,o,y,R){y===void 0?(y=t,R=o):e=(e-t)/(o-t),e>1?e=1:e<0&&(e=0);var G=r(e);if($bm_isInstanceOfArray(y)){var K,Y=y.length,Q=createTypedArray("float32",Y);for(K=0;K<Y;K+=1)Q[K]=(R[K]-y[K])*G+y[K];return Q}return(R-y)*G+y}function nearestKey(r){var e,t,o,y=data.k.length;if(data.k.length&&typeof data.k[0]!="number")if(t=-1,(r*=elem.comp.globalData.frameRate)<data.k[0].t)t=1,o=data.k[0].t;else{for(e=0;e<y-1;e+=1){if(r===data.k[e].t){t=e+1,o=data.k[e].t;break}if(r>data.k[e].t&&r<data.k[e+1].t){r-data.k[e].t>data.k[e+1].t-r?(t=e+2,o=data.k[e+1].t):(t=e+1,o=data.k[e].t);break}}t===-1&&(t=e+1,o=data.k[e].t)}else t=0,o=0;var R={};return R.index=t,R.time=o/elem.comp.globalData.frameRate,R}function key(r){var e,t,o;if(!data.k.length||typeof data.k[0]=="number")throw new Error("The property has no keyframe at index "+r);r-=1,e={time:data.k[r].t/elem.comp.globalData.frameRate,value:[]};var y=Object.prototype.hasOwnProperty.call(data.k[r],"s")?data.k[r].s:data.k[r-1].e;for(o=y.length,t=0;t<o;t+=1)e[t]=y[t],e.value[t]=y[t];return e}function framesToTime(r,e){return e||(e=elem.comp.globalData.frameRate),r/e}function timeToFrames(r,e){return r||r===0||(r=time),e||(e=elem.comp.globalData.frameRate),r*e}function seedRandom(r){BMMath.seedrandom(randSeed+r)}function sourceRectAtTime(){return elem.sourceRectAtTime()}function substring(r,e){return typeof value=="string"?e===void 0?value.substring(r):value.substring(r,e):""}function substr(r,e){return typeof value=="string"?e===void 0?value.substr(r):value.substr(r,e):""}function posterizeTime(r){time=r===0?0:Math.floor(time*r)/r,value=valueAtTime(time)}var index=elem.data.ind;!elem.hierarchy||elem.hierarchy.length;var parent,randSeed=Math.floor(1e6*Math.random()),globalData=elem.globalData;function executeExpression(r){return value=r,this.frameExpressionId===elem.globalData.frameId&&this.propType!=="textSelector"?value:(this.propType==="textSelector"&&(textIndex=this.textIndex,textTotal=this.textTotal,selectorValue=this.selectorValue),thisLayer||(text=elem.layerInterface.text,thisLayer=elem.layerInterface,thisComp=elem.comp.compInterface,toWorld=thisLayer.toWorld.bind(thisLayer),fromWorld=thisLayer.fromWorld.bind(thisLayer),fromComp=thisLayer.fromComp.bind(thisLayer),toComp=thisLayer.toComp.bind(thisLayer),mask=thisLayer.mask?thisLayer.mask.bind(thisLayer):null,fromCompToSurface=fromComp),transform||(transform=elem.layerInterface("ADBE Transform Group"),$bm_transform=transform,transform&&(anchorPoint=transform.anchorPoint)),elemType!==4||content||(content=thisLayer("ADBE Root Vectors Group")),effect||(effect=thisLayer(4)),!(!elem.hierarchy||!elem.hierarchy.length)&&!parent&&(parent=elem.hierarchy[0].layerInterface),time=this.comp.renderedFrame/this.comp.globalData.frameRate,_needsRandom&&seedRandom(randSeed+time),needsVelocity&&(velocity=velocityAtTime(time)),expression_function(),this.frameExpressionId=elem.globalData.frameId,scoped_bm_rt=scoped_bm_rt.propType===propTypes.SHAPE?scoped_bm_rt.v:scoped_bm_rt)}return executeExpression.__preventDeadCodeRemoval=[$bm_transform,anchorPoint,time,velocity,inPoint,outPoint,width,height,name,loop_in,loop_out,smooth,toComp,fromCompToSurface,toWorld,fromWorld,mask,position,rotation,scale,thisComp,numKeys,active,wiggle,loopInDuration,loopOutDuration,comp,lookAt,easeOut,easeIn,ease,nearestKey,key,text,textIndex,textTotal,selectorValue,framesToTime,timeToFrames,sourceRectAtTime,substring,substr,posterizeTime,index,globalData],executeExpression}return ob.initiateExpression=initiateExpression,ob.__preventDeadCodeRemoval=[window,document,XMLHttpRequest,fetch,frames,$bm_neg,add,$bm_sum,$bm_sub,$bm_mul,$bm_div,$bm_mod,clamp,radians_to_degrees,degreesToRadians,degrees_to_radians,normalize,rgbToHsl,hslToRgb,linear,random,createPath,_lottieGlobal],ob.resetFrame=resetFrame,ob}(),Expressions=function(){var r={initExpressions:function(e){var t=0,o=[];e.renderer.compInterface=CompExpressionInterface(e.renderer),e.renderer.globalData.projectInterface.registerComposition(e.renderer),e.renderer.globalData.pushExpression=function(){t+=1},e.renderer.globalData.popExpression=function(){(t-=1)==0&&function(){var y,R=o.length;for(y=0;y<R;y+=1)o[y].release();o.length=0}()},e.renderer.globalData.registerExpressionProperty=function(y){o.indexOf(y)===-1&&o.push(y)}}};return r.resetFrame=ExpressionManager.resetFrame,r}(),MaskManagerInterface=function(){function r(e,t){this._mask=e,this._data=t}return Object.defineProperty(r.prototype,"maskPath",{get:function(){return this._mask.prop.k&&this._mask.prop.getValue(),this._mask.prop}}),Object.defineProperty(r.prototype,"maskOpacity",{get:function(){return this._mask.op.k&&this._mask.op.getValue(),100*this._mask.op.v}}),function(e){var t,o=createSizedArray(e.viewData.length),y=e.viewData.length;for(t=0;t<y;t+=1)o[t]=new r(e.viewData[t],e.masksProperties[t]);return function(R){for(t=0;t<y;){if(e.masksProperties[t].nm===R)return o[t];t+=1}return null}}}(),ExpressionPropertyInterface=function(){var r={pv:0,v:0,mult:1},e={pv:[0,0,0],v:[0,0,0],mult:1};function t(y,R,G){Object.defineProperty(y,"velocity",{get:function(){return R.getVelocityAtTime(R.comp.currentFrame)}}),y.numKeys=R.keyframes?R.keyframes.length:0,y.key=function(K){if(!y.numKeys)return 0;var Y="";Y="s"in R.keyframes[K-1]?R.keyframes[K-1].s:"e"in R.keyframes[K-2]?R.keyframes[K-2].e:R.keyframes[K-2].s;var Q=G==="unidimensional"?new Number(Y):Object.assign({},Y);return Q.time=R.keyframes[K-1].t/R.elem.comp.globalData.frameRate,Q.value=G==="unidimensional"?Y[0]:Y,Q},y.valueAtTime=R.getValueAtTime,y.speedAtTime=R.getSpeedAtTime,y.velocityAtTime=R.getVelocityAtTime,y.propertyGroup=R.propertyGroup}function o(){return r}return function(y){return y?y.propType==="unidimensional"?function(R){R&&"pv"in R||(R=r);var G=1/R.mult,K=R.pv*G,Y=new Number(K);return Y.value=K,t(Y,R,"unidimensional"),function(){return R.k&&R.getValue(),K=R.v*G,Y.value!==K&&((Y=new Number(K)).value=K,t(Y,R,"unidimensional")),Y}}(y):function(R){R&&"pv"in R||(R=e);var G=1/R.mult,K=R.data&&R.data.l||R.pv.length,Y=createTypedArray("float32",K),Q=createTypedArray("float32",K);return Y.value=Q,t(Y,R,"multidimensional"),function(){R.k&&R.getValue();for(var ee=0;ee<K;ee+=1)Q[ee]=R.v[ee]*G,Y[ee]=Q[ee];return Y}}(y):o}}(),TransformExpressionInterface=function(r){function e(G){switch(G){case"scale":case"Scale":case"ADBE Scale":case 6:return e.scale;case"rotation":case"Rotation":case"ADBE Rotation":case"ADBE Rotate Z":case 10:return e.rotation;case"ADBE Rotate X":return e.xRotation;case"ADBE Rotate Y":return e.yRotation;case"position":case"Position":case"ADBE Position":case 2:return e.position;case"ADBE Position_0":return e.xPosition;case"ADBE Position_1":return e.yPosition;case"ADBE Position_2":return e.zPosition;case"anchorPoint":case"AnchorPoint":case"Anchor Point":case"ADBE AnchorPoint":case 1:return e.anchorPoint;case"opacity":case"Opacity":case 11:return e.opacity;default:return null}}var t,o,y,R;return Object.defineProperty(e,"rotation",{get:ExpressionPropertyInterface(r.r||r.rz)}),Object.defineProperty(e,"zRotation",{get:ExpressionPropertyInterface(r.rz||r.r)}),Object.defineProperty(e,"xRotation",{get:ExpressionPropertyInterface(r.rx)}),Object.defineProperty(e,"yRotation",{get:ExpressionPropertyInterface(r.ry)}),Object.defineProperty(e,"scale",{get:ExpressionPropertyInterface(r.s)}),r.p?R=ExpressionPropertyInterface(r.p):(t=ExpressionPropertyInterface(r.px),o=ExpressionPropertyInterface(r.py),r.pz&&(y=ExpressionPropertyInterface(r.pz))),Object.defineProperty(e,"position",{get:function(){return r.p?R():[t(),o(),y?y():0]}}),Object.defineProperty(e,"xPosition",{get:ExpressionPropertyInterface(r.px)}),Object.defineProperty(e,"yPosition",{get:ExpressionPropertyInterface(r.py)}),Object.defineProperty(e,"zPosition",{get:ExpressionPropertyInterface(r.pz)}),Object.defineProperty(e,"anchorPoint",{get:ExpressionPropertyInterface(r.a)}),Object.defineProperty(e,"opacity",{get:ExpressionPropertyInterface(r.o)}),Object.defineProperty(e,"skew",{get:ExpressionPropertyInterface(r.sk)}),Object.defineProperty(e,"skewAxis",{get:ExpressionPropertyInterface(r.sa)}),Object.defineProperty(e,"orientation",{get:ExpressionPropertyInterface(r.or)}),e},LayerExpressionInterface=function(){function r(Q){var ee=new Matrix;return Q!==void 0?this._elem.finalTransform.mProp.getValueAtTime(Q).clone(ee):this._elem.finalTransform.mProp.applyToMatrix(ee),ee}function e(Q,ee){var ie=this.getMatrix(ee);return ie.props[12]=0,ie.props[13]=0,ie.props[14]=0,this.applyPoint(ie,Q)}function t(Q,ee){var ie=this.getMatrix(ee);return this.applyPoint(ie,Q)}function o(Q,ee){var ie=this.getMatrix(ee);return ie.props[12]=0,ie.props[13]=0,ie.props[14]=0,this.invertPoint(ie,Q)}function y(Q,ee){var ie=this.getMatrix(ee);return this.invertPoint(ie,Q)}function R(Q,ee){if(this._elem.hierarchy&&this._elem.hierarchy.length){var ie,re=this._elem.hierarchy.length;for(ie=0;ie<re;ie+=1)this._elem.hierarchy[ie].finalTransform.mProp.applyToMatrix(Q)}return Q.applyToPointArray(ee[0],ee[1],ee[2]||0)}function G(Q,ee){if(this._elem.hierarchy&&this._elem.hierarchy.length){var ie,re=this._elem.hierarchy.length;for(ie=0;ie<re;ie+=1)this._elem.hierarchy[ie].finalTransform.mProp.applyToMatrix(Q)}return Q.inversePoint(ee)}function K(Q){var ee=new Matrix;if(ee.reset(),this._elem.finalTransform.mProp.applyToMatrix(ee),this._elem.hierarchy&&this._elem.hierarchy.length){var ie,re=this._elem.hierarchy.length;for(ie=0;ie<re;ie+=1)this._elem.hierarchy[ie].finalTransform.mProp.applyToMatrix(ee);return ee.inversePoint(Q)}return ee.inversePoint(Q)}function Y(){return[1,1,1,1]}return function(Q){var ee;function ie(se){switch(se){case"ADBE Root Vectors Group":case"Contents":case 2:return ie.shapeInterface;case 1:case 6:case"Transform":case"transform":case"ADBE Transform Group":return ee;case 4:case"ADBE Effect Parade":case"effects":case"Effects":return ie.effect;case"ADBE Text Properties":return ie.textInterface;default:return null}}ie.getMatrix=r,ie.invertPoint=G,ie.applyPoint=R,ie.toWorld=t,ie.toWorldVec=e,ie.fromWorld=y,ie.fromWorldVec=o,ie.toComp=t,ie.fromComp=K,ie.sampleImage=Y,ie.sourceRectAtTime=Q.sourceRectAtTime.bind(Q),ie._elem=Q;var re=getDescriptor(ee=TransformExpressionInterface(Q.finalTransform.mProp),"anchorPoint");return Object.defineProperties(ie,{hasParent:{get:function(){return Q.hierarchy.length}},parent:{get:function(){return Q.hierarchy[0].layerInterface}},rotation:getDescriptor(ee,"rotation"),scale:getDescriptor(ee,"scale"),position:getDescriptor(ee,"position"),opacity:getDescriptor(ee,"opacity"),anchorPoint:re,anchor_point:re,transform:{get:function(){return ee}},active:{get:function(){return Q.isInRange}}}),ie.startTime=Q.data.st,ie.index=Q.data.ind,ie.source=Q.data.refId,ie.height=Q.data.ty===0?Q.data.h:100,ie.width=Q.data.ty===0?Q.data.w:100,ie.inPoint=Q.data.ip/Q.comp.globalData.frameRate,ie.outPoint=Q.data.op/Q.comp.globalData.frameRate,ie._name=Q.data.nm,ie.registerMaskInterface=function(se){ie.mask=new MaskManagerInterface(se,Q)},ie.registerEffectsInterface=function(se){ie.effect=se},ie}}(),propertyGroupFactory=function(r,e){return function(t){return(t=t===void 0?1:t)<=0?r:e(t-1)}},PropertyInterface=function(r,e){var t={_name:r};return function(o){return(o=o===void 0?1:o)<=0?t:e(o-1)}},EffectsExpressionInterface=function(){var r={createEffectsInterface:function(o,y){if(o.effectsManager){var R,G=[],K=o.data.ef,Y=o.effectsManager.effectElements.length;for(R=0;R<Y;R+=1)G.push(e(K[R],o.effectsManager.effectElements[R],y,o));var Q=o.data.ef||[],ee=function(ie){for(R=0,Y=Q.length;R<Y;){if(ie===Q[R].nm||ie===Q[R].mn||ie===Q[R].ix)return G[R];R+=1}return null};return Object.defineProperty(ee,"numProperties",{get:function(){return Q.length}}),ee}return null}};function e(o,y,R,G){function K(re){for(var se=o.ef,le=0,ce=se.length;le<ce;){if(re===se[le].nm||re===se[le].mn||re===se[le].ix)return se[le].ty===5?ee[le]:ee[le]();le+=1}throw new Error}var Y,Q=propertyGroupFactory(K,R),ee=[],ie=o.ef.length;for(Y=0;Y<ie;Y+=1)o.ef[Y].ty===5?ee.push(e(o.ef[Y],y.effectElements[Y],y.effectElements[Y].propertyGroup,G)):ee.push(t(y.effectElements[Y],o.ef[Y].ty,G,Q));return o.mn==="ADBE Color Control"&&Object.defineProperty(K,"color",{get:function(){return ee[0]()}}),Object.defineProperties(K,{numProperties:{get:function(){return o.np}},_name:{value:o.nm},propertyGroup:{value:Q}}),K.enabled=o.en!==0,K.active=K.enabled,K}function t(o,y,R,G){var K=ExpressionPropertyInterface(o.p);return o.p.setGroupProperty&&o.p.setGroupProperty(PropertyInterface("",G)),function(){return y===10?R.comp.compInterface(o.p.v):K()}}return r}(),ShapePathInterface=function(r,e,t){var o=e.sh;function y(G){return G==="Shape"||G==="shape"||G==="Path"||G==="path"||G==="ADBE Vector Shape"||G===2?y.path:null}var R=propertyGroupFactory(y,t);return o.setGroupProperty(PropertyInterface("Path",R)),Object.defineProperties(y,{path:{get:function(){return o.k&&o.getValue(),o}},shape:{get:function(){return o.k&&o.getValue(),o}},_name:{value:r.nm},ix:{value:r.ix},propertyIndex:{value:r.ix},mn:{value:r.mn},propertyGroup:{value:t}}),y},ShapeExpressionInterface=function(){function r(re,se,le){var ce,oe=[],ue=re?re.length:0;for(ce=0;ce<ue;ce+=1)re[ce].ty==="gr"?oe.push(e(re[ce],se[ce],le)):re[ce].ty==="fl"?oe.push(t(re[ce],se[ce],le)):re[ce].ty==="st"?oe.push(y(re[ce],se[ce],le)):re[ce].ty==="tm"?oe.push(R(re[ce],se[ce],le)):re[ce].ty==="tr"||(re[ce].ty==="el"?oe.push(K(re[ce],se[ce],le)):re[ce].ty==="sr"?oe.push(Y(re[ce],se[ce],le)):re[ce].ty==="sh"?oe.push(ShapePathInterface(re[ce],se[ce],le)):re[ce].ty==="rc"?oe.push(Q(re[ce],se[ce],le)):re[ce].ty==="rd"?oe.push(ee(re[ce],se[ce],le)):re[ce].ty==="rp"?oe.push(ie(re[ce],se[ce],le)):re[ce].ty==="gf"?oe.push(o(re[ce],se[ce],le)):oe.push((re[ce],se[ce],function(){return null})));return oe}function e(re,se,le){var ce=function(ge){switch(ge){case"ADBE Vectors Group":case"Contents":case 2:return ce.content;default:return ce.transform}};ce.propertyGroup=propertyGroupFactory(ce,le);var oe=function(ge,ve,_e){var be,Re=function(Ee){for(var ye=0,de=be.length;ye<de;){if(be[ye]._name===Ee||be[ye].mn===Ee||be[ye].propertyIndex===Ee||be[ye].ix===Ee||be[ye].ind===Ee)return be[ye];ye+=1}return typeof Ee=="number"?be[Ee-1]:null};Re.propertyGroup=propertyGroupFactory(Re,_e),be=r(ge.it,ve.it,Re.propertyGroup),Re.numProperties=be.length;var Se=G(ge.it[ge.it.length-1],ve.it[ve.it.length-1],Re.propertyGroup);return Re.transform=Se,Re.propertyIndex=ge.cix,Re._name=ge.nm,Re}(re,se,ce.propertyGroup),ue=G(re.it[re.it.length-1],se.it[se.it.length-1],ce.propertyGroup);return ce.content=oe,ce.transform=ue,Object.defineProperty(ce,"_name",{get:function(){return re.nm}}),ce.numProperties=re.np,ce.propertyIndex=re.ix,ce.nm=re.nm,ce.mn=re.mn,ce}function t(re,se,le){function ce(oe){return oe==="Color"||oe==="color"?ce.color:oe==="Opacity"||oe==="opacity"?ce.opacity:null}return Object.defineProperties(ce,{color:{get:ExpressionPropertyInterface(se.c)},opacity:{get:ExpressionPropertyInterface(se.o)},_name:{value:re.nm},mn:{value:re.mn}}),se.c.setGroupProperty(PropertyInterface("Color",le)),se.o.setGroupProperty(PropertyInterface("Opacity",le)),ce}function o(re,se,le){function ce(oe){return oe==="Start Point"||oe==="start point"?ce.startPoint:oe==="End Point"||oe==="end point"?ce.endPoint:oe==="Opacity"||oe==="opacity"?ce.opacity:null}return Object.defineProperties(ce,{startPoint:{get:ExpressionPropertyInterface(se.s)},endPoint:{get:ExpressionPropertyInterface(se.e)},opacity:{get:ExpressionPropertyInterface(se.o)},type:{get:function(){return"a"}},_name:{value:re.nm},mn:{value:re.mn}}),se.s.setGroupProperty(PropertyInterface("Start Point",le)),se.e.setGroupProperty(PropertyInterface("End Point",le)),se.o.setGroupProperty(PropertyInterface("Opacity",le)),ce}function y(re,se,le){var ce,oe=propertyGroupFactory(be,le),ue=propertyGroupFactory(_e,oe);function ge(Re){Object.defineProperty(_e,re.d[Re].nm,{get:ExpressionPropertyInterface(se.d.dataProps[Re].p)})}var ve=re.d?re.d.length:0,_e={};for(ce=0;ce<ve;ce+=1)ge(ce),se.d.dataProps[ce].p.setGroupProperty(ue);function be(Re){return Re==="Color"||Re==="color"?be.color:Re==="Opacity"||Re==="opacity"?be.opacity:Re==="Stroke Width"||Re==="stroke width"?be.strokeWidth:null}return Object.defineProperties(be,{color:{get:ExpressionPropertyInterface(se.c)},opacity:{get:ExpressionPropertyInterface(se.o)},strokeWidth:{get:ExpressionPropertyInterface(se.w)},dash:{get:function(){return _e}},_name:{value:re.nm},mn:{value:re.mn}}),se.c.setGroupProperty(PropertyInterface("Color",oe)),se.o.setGroupProperty(PropertyInterface("Opacity",oe)),se.w.setGroupProperty(PropertyInterface("Stroke Width",oe)),be}function R(re,se,le){function ce(ue){return ue===re.e.ix||ue==="End"||ue==="end"?ce.end:ue===re.s.ix?ce.start:ue===re.o.ix?ce.offset:null}var oe=propertyGroupFactory(ce,le);return ce.propertyIndex=re.ix,se.s.setGroupProperty(PropertyInterface("Start",oe)),se.e.setGroupProperty(PropertyInterface("End",oe)),se.o.setGroupProperty(PropertyInterface("Offset",oe)),ce.propertyIndex=re.ix,ce.propertyGroup=le,Object.defineProperties(ce,{start:{get:ExpressionPropertyInterface(se.s)},end:{get:ExpressionPropertyInterface(se.e)},offset:{get:ExpressionPropertyInterface(se.o)},_name:{value:re.nm}}),ce.mn=re.mn,ce}function G(re,se,le){function ce(ue){return re.a.ix===ue||ue==="Anchor Point"?ce.anchorPoint:re.o.ix===ue||ue==="Opacity"?ce.opacity:re.p.ix===ue||ue==="Position"?ce.position:re.r.ix===ue||ue==="Rotation"||ue==="ADBE Vector Rotation"?ce.rotation:re.s.ix===ue||ue==="Scale"?ce.scale:re.sk&&re.sk.ix===ue||ue==="Skew"?ce.skew:re.sa&&re.sa.ix===ue||ue==="Skew Axis"?ce.skewAxis:null}var oe=propertyGroupFactory(ce,le);return se.transform.mProps.o.setGroupProperty(PropertyInterface("Opacity",oe)),se.transform.mProps.p.setGroupProperty(PropertyInterface("Position",oe)),se.transform.mProps.a.setGroupProperty(PropertyInterface("Anchor Point",oe)),se.transform.mProps.s.setGroupProperty(PropertyInterface("Scale",oe)),se.transform.mProps.r.setGroupProperty(PropertyInterface("Rotation",oe)),se.transform.mProps.sk&&(se.transform.mProps.sk.setGroupProperty(PropertyInterface("Skew",oe)),se.transform.mProps.sa.setGroupProperty(PropertyInterface("Skew Angle",oe))),se.transform.op.setGroupProperty(PropertyInterface("Opacity",oe)),Object.defineProperties(ce,{opacity:{get:ExpressionPropertyInterface(se.transform.mProps.o)},position:{get:ExpressionPropertyInterface(se.transform.mProps.p)},anchorPoint:{get:ExpressionPropertyInterface(se.transform.mProps.a)},scale:{get:ExpressionPropertyInterface(se.transform.mProps.s)},rotation:{get:ExpressionPropertyInterface(se.transform.mProps.r)},skew:{get:ExpressionPropertyInterface(se.transform.mProps.sk)},skewAxis:{get:ExpressionPropertyInterface(se.transform.mProps.sa)},_name:{value:re.nm}}),ce.ty="tr",ce.mn=re.mn,ce.propertyGroup=le,ce}function K(re,se,le){function ce(ge){return re.p.ix===ge?ce.position:re.s.ix===ge?ce.size:null}var oe=propertyGroupFactory(ce,le);ce.propertyIndex=re.ix;var ue=se.sh.ty==="tm"?se.sh.prop:se.sh;return ue.s.setGroupProperty(PropertyInterface("Size",oe)),ue.p.setGroupProperty(PropertyInterface("Position",oe)),Object.defineProperties(ce,{size:{get:ExpressionPropertyInterface(ue.s)},position:{get:ExpressionPropertyInterface(ue.p)},_name:{value:re.nm}}),ce.mn=re.mn,ce}function Y(re,se,le){function ce(ge){return re.p.ix===ge?ce.position:re.r.ix===ge?ce.rotation:re.pt.ix===ge?ce.points:re.or.ix===ge||ge==="ADBE Vector Star Outer Radius"?ce.outerRadius:re.os.ix===ge?ce.outerRoundness:!re.ir||re.ir.ix!==ge&&ge!=="ADBE Vector Star Inner Radius"?re.is&&re.is.ix===ge?ce.innerRoundness:null:ce.innerRadius}var oe=propertyGroupFactory(ce,le),ue=se.sh.ty==="tm"?se.sh.prop:se.sh;return ce.propertyIndex=re.ix,ue.or.setGroupProperty(PropertyInterface("Outer Radius",oe)),ue.os.setGroupProperty(PropertyInterface("Outer Roundness",oe)),ue.pt.setGroupProperty(PropertyInterface("Points",oe)),ue.p.setGroupProperty(PropertyInterface("Position",oe)),ue.r.setGroupProperty(PropertyInterface("Rotation",oe)),re.ir&&(ue.ir.setGroupProperty(PropertyInterface("Inner Radius",oe)),ue.is.setGroupProperty(PropertyInterface("Inner Roundness",oe))),Object.defineProperties(ce,{position:{get:ExpressionPropertyInterface(ue.p)},rotation:{get:ExpressionPropertyInterface(ue.r)},points:{get:ExpressionPropertyInterface(ue.pt)},outerRadius:{get:ExpressionPropertyInterface(ue.or)},outerRoundness:{get:ExpressionPropertyInterface(ue.os)},innerRadius:{get:ExpressionPropertyInterface(ue.ir)},innerRoundness:{get:ExpressionPropertyInterface(ue.is)},_name:{value:re.nm}}),ce.mn=re.mn,ce}function Q(re,se,le){function ce(ge){return re.p.ix===ge?ce.position:re.r.ix===ge?ce.roundness:re.s.ix===ge||ge==="Size"||ge==="ADBE Vector Rect Size"?ce.size:null}var oe=propertyGroupFactory(ce,le),ue=se.sh.ty==="tm"?se.sh.prop:se.sh;return ce.propertyIndex=re.ix,ue.p.setGroupProperty(PropertyInterface("Position",oe)),ue.s.setGroupProperty(PropertyInterface("Size",oe)),ue.r.setGroupProperty(PropertyInterface("Rotation",oe)),Object.defineProperties(ce,{position:{get:ExpressionPropertyInterface(ue.p)},roundness:{get:ExpressionPropertyInterface(ue.r)},size:{get:ExpressionPropertyInterface(ue.s)},_name:{value:re.nm}}),ce.mn=re.mn,ce}function ee(re,se,le){function ce(ge){return re.r.ix===ge||ge==="Round Corners 1"?ce.radius:null}var oe=propertyGroupFactory(ce,le),ue=se;return ce.propertyIndex=re.ix,ue.rd.setGroupProperty(PropertyInterface("Radius",oe)),Object.defineProperties(ce,{radius:{get:ExpressionPropertyInterface(ue.rd)},_name:{value:re.nm}}),ce.mn=re.mn,ce}function ie(re,se,le){function ce(ge){return re.c.ix===ge||ge==="Copies"?ce.copies:re.o.ix===ge||ge==="Offset"?ce.offset:null}var oe=propertyGroupFactory(ce,le),ue=se;return ce.propertyIndex=re.ix,ue.c.setGroupProperty(PropertyInterface("Copies",oe)),ue.o.setGroupProperty(PropertyInterface("Offset",oe)),Object.defineProperties(ce,{copies:{get:ExpressionPropertyInterface(ue.c)},offset:{get:ExpressionPropertyInterface(ue.o)},_name:{value:re.nm}}),ce.mn=re.mn,ce}return function(re,se,le){var ce;function oe(ue){if(typeof ue=="number")return(ue=ue===void 0?1:ue)===0?le:ce[ue-1];for(var ge=0,ve=ce.length;ge<ve;){if(ce[ge]._name===ue)return ce[ge];ge+=1}return null}return oe.propertyGroup=propertyGroupFactory(oe,function(){return le}),ce=r(re,se,oe.propertyGroup),oe.numProperties=ce.length,oe._name="Contents",oe}}(),TextExpressionInterface=function(r){var e;function t(o){return o==="ADBE Text Document"?t.sourceText:null}return Object.defineProperty(t,"sourceText",{get:function(){r.textProperty.getValue();var o=r.textProperty.currentData.t;return e&&o===e.value||((e=new String(o)).value=o||new String(o),Object.defineProperty(e,"style",{get:function(){return{fillColor:r.textProperty.currentData.fc}}})),e}}),t};function _typeof(r){return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(r)}var FootageInterface=(dataInterfaceFactory=function(r){function e(t){return t==="Outline"?e.outlineInterface():null}return e._name="Outline",e.outlineInterface=function(t){var o="",y=t.getFootageData();function R(G){if(y[G])return o=G,_typeof(y=y[G])==="object"?R:y;var K=G.indexOf(o);if(K!==-1){var Y=parseInt(G.substr(K+o.length),10);return _typeof(y=y[Y])==="object"?R:y}return""}return function(){return o="",y=t.getFootageData(),R}}(r),e},function(r){function e(t){return t==="Data"?e.dataInterface:null}return e._name="Data",e.dataInterface=dataInterfaceFactory(r),e}),dataInterfaceFactory,interfaces={layer:LayerExpressionInterface,effects:EffectsExpressionInterface,comp:CompExpressionInterface,shape:ShapeExpressionInterface,text:TextExpressionInterface,footage:FootageInterface};function getInterface(r){return interfaces[r]||null}var expressionHelpers={searchExpressions:function(r,e,t){e.x&&(t.k=!0,t.x=!0,t.initiateExpression=ExpressionManager.initiateExpression,t.effectsSequence.push(t.initiateExpression(r,e,t).bind(t)))},getSpeedAtTime:function(r){var e=this.getValueAtTime(r),t=this.getValueAtTime(r+-.01),o=0;if(e.length){var y;for(y=0;y<e.length;y+=1)o+=Math.pow(t[y]-e[y],2);o=100*Math.sqrt(o)}else o=0;return o},getVelocityAtTime:function(r){if(this.vel!==void 0)return this.vel;var e,t,o=-.001,y=this.getValueAtTime(r),R=this.getValueAtTime(r+o);if(y.length)for(e=createTypedArray("float32",y.length),t=0;t<y.length;t+=1)e[t]=(R[t]-y[t])/o;else e=(R-y)/o;return e},getValueAtTime:function(r){return r*=this.elem.globalData.frameRate,(r-=this.offsetTime)!==this._cachingAtTime.lastFrame&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastFrame<r?this._cachingAtTime.lastIndex:0,this._cachingAtTime.value=this.interpolateValue(r,this._cachingAtTime),this._cachingAtTime.lastFrame=r),this._cachingAtTime.value},getStaticValueAtTime:function(){return this.pv},setGroupProperty:function(r){this.propertyGroup=r}};function addPropertyDecorator(){function r(ie,re,se){if(!this.k||!this.keyframes)return this.pv;ie=ie?ie.toLowerCase():"";var le,ce,oe,ue,ge,ve=this.comp.renderedFrame,_e=this.keyframes,be=_e[_e.length-1].t;if(ve<=be)return this.pv;if(se?ce=be-(le=re?Math.abs(be-this.elem.comp.globalData.frameRate*re):Math.max(0,be-this.elem.data.ip)):((!re||re>_e.length-1)&&(re=_e.length-1),le=be-(ce=_e[_e.length-1-re].t)),ie==="pingpong"){if(Math.floor((ve-ce)/le)%2!=0)return this.getValueAtTime((le-(ve-ce)%le+ce)/this.comp.globalData.frameRate,0)}else{if(ie==="offset"){var Re=this.getValueAtTime(ce/this.comp.globalData.frameRate,0),Se=this.getValueAtTime(be/this.comp.globalData.frameRate,0),Ee=this.getValueAtTime(((ve-ce)%le+ce)/this.comp.globalData.frameRate,0),ye=Math.floor((ve-ce)/le);if(this.pv.length){for(ue=(ge=new Array(Re.length)).length,oe=0;oe<ue;oe+=1)ge[oe]=(Se[oe]-Re[oe])*ye+Ee[oe];return ge}return(Se-Re)*ye+Ee}if(ie==="continue"){var de=this.getValueAtTime(be/this.comp.globalData.frameRate,0),Me=this.getValueAtTime((be-.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(ue=(ge=new Array(de.length)).length,oe=0;oe<ue;oe+=1)ge[oe]=de[oe]+(de[oe]-Me[oe])*((ve-be)/this.comp.globalData.frameRate)/5e-4;return ge}return de+(ve-be)/.001*(de-Me)}}return this.getValueAtTime(((ve-ce)%le+ce)/this.comp.globalData.frameRate,0)}function e(ie,re,se){if(!this.k)return this.pv;ie=ie?ie.toLowerCase():"";var le,ce,oe,ue,ge,ve=this.comp.renderedFrame,_e=this.keyframes,be=_e[0].t;if(ve>=be)return this.pv;if(se?ce=be+(le=re?Math.abs(this.elem.comp.globalData.frameRate*re):Math.max(0,this.elem.data.op-be)):((!re||re>_e.length-1)&&(re=_e.length-1),le=(ce=_e[re].t)-be),ie==="pingpong"){if(Math.floor((be-ve)/le)%2==0)return this.getValueAtTime(((be-ve)%le+be)/this.comp.globalData.frameRate,0)}else{if(ie==="offset"){var Re=this.getValueAtTime(be/this.comp.globalData.frameRate,0),Se=this.getValueAtTime(ce/this.comp.globalData.frameRate,0),Ee=this.getValueAtTime((le-(be-ve)%le+be)/this.comp.globalData.frameRate,0),ye=Math.floor((be-ve)/le)+1;if(this.pv.length){for(ue=(ge=new Array(Re.length)).length,oe=0;oe<ue;oe+=1)ge[oe]=Ee[oe]-(Se[oe]-Re[oe])*ye;return ge}return Ee-(Se-Re)*ye}if(ie==="continue"){var de=this.getValueAtTime(be/this.comp.globalData.frameRate,0),Me=this.getValueAtTime((be+.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(ue=(ge=new Array(de.length)).length,oe=0;oe<ue;oe+=1)ge[oe]=de[oe]+(de[oe]-Me[oe])*(be-ve)/.001;return ge}return de+(de-Me)*(be-ve)/.001}}return this.getValueAtTime((le-((be-ve)%le+be))/this.comp.globalData.frameRate,0)}function t(ie,re){if(!this.k)return this.pv;if(ie=.5*(ie||.4),(re=Math.floor(re||5))<=1)return this.pv;var se,le,ce=this.comp.renderedFrame/this.comp.globalData.frameRate,oe=ce-ie,ue=re>1?(ce+ie-oe)/(re-1):1,ge=0,ve=0;for(se=this.pv.length?createTypedArray("float32",this.pv.length):0;ge<re;){if(le=this.getValueAtTime(oe+ge*ue),this.pv.length)for(ve=0;ve<this.pv.length;ve+=1)se[ve]+=le[ve];else se+=le;ge+=1}if(this.pv.length)for(ve=0;ve<this.pv.length;ve+=1)se[ve]/=re;else se/=re;return se}function o(ie){this._transformCachingAtTime||(this._transformCachingAtTime={v:new Matrix});var re=this._transformCachingAtTime.v;if(re.cloneFromProps(this.pre.props),this.appliedTransformations<1){var se=this.a.getValueAtTime(ie);re.translate(-se[0]*this.a.mult,-se[1]*this.a.mult,se[2]*this.a.mult)}if(this.appliedTransformations<2){var le=this.s.getValueAtTime(ie);re.scale(le[0]*this.s.mult,le[1]*this.s.mult,le[2]*this.s.mult)}if(this.sk&&this.appliedTransformations<3){var ce=this.sk.getValueAtTime(ie),oe=this.sa.getValueAtTime(ie);re.skewFromAxis(-ce*this.sk.mult,oe*this.sa.mult)}if(this.r&&this.appliedTransformations<4){var ue=this.r.getValueAtTime(ie);re.rotate(-ue*this.r.mult)}else if(!this.r&&this.appliedTransformations<4){var ge=this.rz.getValueAtTime(ie),ve=this.ry.getValueAtTime(ie),_e=this.rx.getValueAtTime(ie),be=this.or.getValueAtTime(ie);re.rotateZ(-ge*this.rz.mult).rotateY(ve*this.ry.mult).rotateX(_e*this.rx.mult).rotateZ(-be[2]*this.or.mult).rotateY(be[1]*this.or.mult).rotateX(be[0]*this.or.mult)}if(this.data.p&&this.data.p.s){var Re=this.px.getValueAtTime(ie),Se=this.py.getValueAtTime(ie);if(this.data.p.z){var Ee=this.pz.getValueAtTime(ie);re.translate(Re*this.px.mult,Se*this.py.mult,-Ee*this.pz.mult)}else re.translate(Re*this.px.mult,Se*this.py.mult,0)}else{var ye=this.p.getValueAtTime(ie);re.translate(ye[0]*this.p.mult,ye[1]*this.p.mult,-ye[2]*this.p.mult)}return re}function y(){return this.v.clone(new Matrix)}var R=TransformPropertyFactory.getTransformProperty;TransformPropertyFactory.getTransformProperty=function(ie,re,se){var le=R(ie,re,se);return le.dynamicProperties.length?le.getValueAtTime=o.bind(le):le.getValueAtTime=y.bind(le),le.setGroupProperty=expressionHelpers.setGroupProperty,le};var G=PropertyFactory.getProp;PropertyFactory.getProp=function(ie,re,se,le,ce){var oe=G(ie,re,se,le,ce);oe.kf?oe.getValueAtTime=expressionHelpers.getValueAtTime.bind(oe):oe.getValueAtTime=expressionHelpers.getStaticValueAtTime.bind(oe),oe.setGroupProperty=expressionHelpers.setGroupProperty,oe.loopOut=r,oe.loopIn=e,oe.smooth=t,oe.getVelocityAtTime=expressionHelpers.getVelocityAtTime.bind(oe),oe.getSpeedAtTime=expressionHelpers.getSpeedAtTime.bind(oe),oe.numKeys=re.a===1?re.k.length:0,oe.propertyIndex=re.ix;var ue=0;return se!==0&&(ue=createTypedArray("float32",re.a===1?re.k[0].s.length:re.k.length)),oe._cachingAtTime={lastFrame:initialDefaultFrame,lastIndex:0,value:ue},expressionHelpers.searchExpressions(ie,re,oe),oe.k&&ce.addDynamicProperty(oe),oe};var K=ShapePropertyFactory.getConstructorFunction(),Y=ShapePropertyFactory.getKeyframedConstructorFunction();function Q(){}Q.prototype={vertices:function(ie,re){this.k&&this.getValue();var se,le=this.v;re!==void 0&&(le=this.getValueAtTime(re,0));var ce=le._length,oe=le[ie],ue=le.v,ge=createSizedArray(ce);for(se=0;se<ce;se+=1)ge[se]=ie==="i"||ie==="o"?[oe[se][0]-ue[se][0],oe[se][1]-ue[se][1]]:[oe[se][0],oe[se][1]];return ge},points:function(ie){return this.vertices("v",ie)},inTangents:function(ie){return this.vertices("i",ie)},outTangents:function(ie){return this.vertices("o",ie)},isClosed:function(){return this.v.c},pointOnPath:function(ie,re){var se=this.v;re!==void 0&&(se=this.getValueAtTime(re,0)),this._segmentsLength||(this._segmentsLength=bez.getSegmentsLength(se));for(var le,ce=this._segmentsLength,oe=ce.lengths,ue=ce.totalLength*ie,ge=0,ve=oe.length,_e=0;ge<ve;){if(_e+oe[ge].addedLength>ue){var be=ge,Re=se.c&&ge===ve-1?0:ge+1,Se=(ue-_e)/oe[ge].addedLength;le=bez.getPointInSegment(se.v[be],se.v[Re],se.o[be],se.i[Re],Se,oe[ge]);break}_e+=oe[ge].addedLength,ge+=1}return le||(le=se.c?[se.v[0][0],se.v[0][1]]:[se.v[se._length-1][0],se.v[se._length-1][1]]),le},vectorOnPath:function(ie,re,se){ie==1?ie=this.v.c:ie==0&&(ie=.999);var le=this.pointOnPath(ie,re),ce=this.pointOnPath(ie+.001,re),oe=ce[0]-le[0],ue=ce[1]-le[1],ge=Math.sqrt(Math.pow(oe,2)+Math.pow(ue,2));return ge===0?[0,0]:se==="tangent"?[oe/ge,ue/ge]:[-ue/ge,oe/ge]},tangentOnPath:function(ie,re){return this.vectorOnPath(ie,re,"tangent")},normalOnPath:function(ie,re){return this.vectorOnPath(ie,re,"normal")},setGroupProperty:expressionHelpers.setGroupProperty,getValueAtTime:expressionHelpers.getStaticValueAtTime},extendPrototype([Q],K),extendPrototype([Q],Y),Y.prototype.getValueAtTime=function(ie){return this._cachingAtTime||(this._cachingAtTime={shapeValue:shapePool.clone(this.pv),lastIndex:0,lastTime:initialDefaultFrame}),ie*=this.elem.globalData.frameRate,(ie-=this.offsetTime)!==this._cachingAtTime.lastTime&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastTime<ie?this._caching.lastIndex:0,this._cachingAtTime.lastTime=ie,this.interpolateShape(ie,this._cachingAtTime.shapeValue,this._cachingAtTime)),this._cachingAtTime.shapeValue},Y.prototype.initiateExpression=ExpressionManager.initiateExpression;var ee=ShapePropertyFactory.getShapeProp;ShapePropertyFactory.getShapeProp=function(ie,re,se,le,ce){var oe=ee(ie,re,se,le,ce);return oe.propertyIndex=re.ix,oe.lock=!1,se===3?expressionHelpers.searchExpressions(ie,re.pt,oe):se===4&&expressionHelpers.searchExpressions(ie,re.ks,oe),oe.k&&ie.addDynamicProperty(oe),oe}}function initialize$1(){addPropertyDecorator()}function addDecorator(){TextProperty.prototype.getExpressionValue=function(r,e){var t=this.calculateExpression(e);if(r.t!==t){var o={};return this.copyData(o,r),o.t=t.toString(),o.__complete=!1,o}return r},TextProperty.prototype.searchProperty=function(){var r=this.searchKeyframes(),e=this.searchExpressions();return this.kf=r||e,this.kf},TextProperty.prototype.searchExpressions=function(){return this.data.d.x?(this.calculateExpression=ExpressionManager.initiateExpression.bind(this)(this.elem,this.data.d,this),this.addEffect(this.getExpressionValue.bind(this)),!0):null}}function initialize(){addDecorator()}function SVGComposableEffect(){}SVGComposableEffect.prototype={createMergeNode:function(r,e){var t,o,y=createNS("feMerge");for(y.setAttribute("result",r),o=0;o<e.length;o+=1)(t=createNS("feMergeNode")).setAttribute("in",e[o]),y.appendChild(t),y.appendChild(t);return y}};var linearFilterValue="0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0";function SVGTintFilter(r,e,t,o,y){this.filterManager=e;var R=createNS("feColorMatrix");R.setAttribute("type","matrix"),R.setAttribute("color-interpolation-filters","linearRGB"),R.setAttribute("values",linearFilterValue+" 1 0"),this.linearFilter=R,R.setAttribute("result",o+"_tint_1"),r.appendChild(R),(R=createNS("feColorMatrix")).setAttribute("type","matrix"),R.setAttribute("color-interpolation-filters","sRGB"),R.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),R.setAttribute("result",o+"_tint_2"),r.appendChild(R),this.matrixFilter=R;var G=this.createMergeNode(o,[y,o+"_tint_1",o+"_tint_2"]);r.appendChild(G)}function SVGFillFilter(r,e,t,o){this.filterManager=e;var y=createNS("feColorMatrix");y.setAttribute("type","matrix"),y.setAttribute("color-interpolation-filters","sRGB"),y.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),y.setAttribute("result",o),r.appendChild(y),this.matrixFilter=y}function SVGStrokeEffect(r,e,t){this.initialized=!1,this.filterManager=e,this.elem=t,this.paths=[]}function SVGTritoneFilter(r,e,t,o){this.filterManager=e;var y=createNS("feColorMatrix");y.setAttribute("type","matrix"),y.setAttribute("color-interpolation-filters","linearRGB"),y.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"),r.appendChild(y);var R=createNS("feComponentTransfer");R.setAttribute("color-interpolation-filters","sRGB"),R.setAttribute("result",o),this.matrixFilter=R;var G=createNS("feFuncR");G.setAttribute("type","table"),R.appendChild(G),this.feFuncR=G;var K=createNS("feFuncG");K.setAttribute("type","table"),R.appendChild(K),this.feFuncG=K;var Y=createNS("feFuncB");Y.setAttribute("type","table"),R.appendChild(Y),this.feFuncB=Y,r.appendChild(R)}function SVGProLevelsFilter(r,e,t,o){this.filterManager=e;var y=this.filterManager.effectElements,R=createNS("feComponentTransfer");(y[10].p.k||y[10].p.v!==0||y[11].p.k||y[11].p.v!==1||y[12].p.k||y[12].p.v!==1||y[13].p.k||y[13].p.v!==0||y[14].p.k||y[14].p.v!==1)&&(this.feFuncR=this.createFeFunc("feFuncR",R)),(y[17].p.k||y[17].p.v!==0||y[18].p.k||y[18].p.v!==1||y[19].p.k||y[19].p.v!==1||y[20].p.k||y[20].p.v!==0||y[21].p.k||y[21].p.v!==1)&&(this.feFuncG=this.createFeFunc("feFuncG",R)),(y[24].p.k||y[24].p.v!==0||y[25].p.k||y[25].p.v!==1||y[26].p.k||y[26].p.v!==1||y[27].p.k||y[27].p.v!==0||y[28].p.k||y[28].p.v!==1)&&(this.feFuncB=this.createFeFunc("feFuncB",R)),(y[31].p.k||y[31].p.v!==0||y[32].p.k||y[32].p.v!==1||y[33].p.k||y[33].p.v!==1||y[34].p.k||y[34].p.v!==0||y[35].p.k||y[35].p.v!==1)&&(this.feFuncA=this.createFeFunc("feFuncA",R)),(this.feFuncR||this.feFuncG||this.feFuncB||this.feFuncA)&&(R.setAttribute("color-interpolation-filters","sRGB"),r.appendChild(R)),(y[3].p.k||y[3].p.v!==0||y[4].p.k||y[4].p.v!==1||y[5].p.k||y[5].p.v!==1||y[6].p.k||y[6].p.v!==0||y[7].p.k||y[7].p.v!==1)&&((R=createNS("feComponentTransfer")).setAttribute("color-interpolation-filters","sRGB"),R.setAttribute("result",o),r.appendChild(R),this.feFuncRComposed=this.createFeFunc("feFuncR",R),this.feFuncGComposed=this.createFeFunc("feFuncG",R),this.feFuncBComposed=this.createFeFunc("feFuncB",R))}function SVGDropShadowEffect(r,e,t,o,y){var R=e.container.globalData.renderConfig.filterSize,G=e.data.fs||R;r.setAttribute("x",G.x||R.x),r.setAttribute("y",G.y||R.y),r.setAttribute("width",G.width||R.width),r.setAttribute("height",G.height||R.height),this.filterManager=e;var K=createNS("feGaussianBlur");K.setAttribute("in","SourceAlpha"),K.setAttribute("result",o+"_drop_shadow_1"),K.setAttribute("stdDeviation","0"),this.feGaussianBlur=K,r.appendChild(K);var Y=createNS("feOffset");Y.setAttribute("dx","25"),Y.setAttribute("dy","0"),Y.setAttribute("in",o+"_drop_shadow_1"),Y.setAttribute("result",o+"_drop_shadow_2"),this.feOffset=Y,r.appendChild(Y);var Q=createNS("feFlood");Q.setAttribute("flood-color","#00ff00"),Q.setAttribute("flood-opacity","1"),Q.setAttribute("result",o+"_drop_shadow_3"),this.feFlood=Q,r.appendChild(Q);var ee=createNS("feComposite");ee.setAttribute("in",o+"_drop_shadow_3"),ee.setAttribute("in2",o+"_drop_shadow_2"),ee.setAttribute("operator","in"),ee.setAttribute("result",o+"_drop_shadow_4"),r.appendChild(ee);var ie=this.createMergeNode(o,[o+"_drop_shadow_4",y]);r.appendChild(ie)}extendPrototype([SVGComposableEffect],SVGTintFilter),SVGTintFilter.prototype.renderFrame=function(r){if(r||this.filterManager._mdf){var e=this.filterManager.effectElements[0].p.v,t=this.filterManager.effectElements[1].p.v,o=this.filterManager.effectElements[2].p.v/100;this.linearFilter.setAttribute("values",linearFilterValue+" "+o+" 0"),this.matrixFilter.setAttribute("values",t[0]-e[0]+" 0 0 0 "+e[0]+" "+(t[1]-e[1])+" 0 0 0 "+e[1]+" "+(t[2]-e[2])+" 0 0 0 "+e[2]+" 0 0 0 1 0")}},SVGFillFilter.prototype.renderFrame=function(r){if(r||this.filterManager._mdf){var e=this.filterManager.effectElements[2].p.v,t=this.filterManager.effectElements[6].p.v;this.matrixFilter.setAttribute("values","0 0 0 0 "+e[0]+" 0 0 0 0 "+e[1]+" 0 0 0 0 "+e[2]+" 0 0 0 "+t+" 0")}},SVGStrokeEffect.prototype.initialize=function(){var r,e,t,o,y=this.elem.layerElement.children||this.elem.layerElement.childNodes;for(this.filterManager.effectElements[1].p.v===1?(o=this.elem.maskManager.masksProperties.length,t=0):o=1+(t=this.filterManager.effectElements[0].p.v-1),(e=createNS("g")).setAttribute("fill","none"),e.setAttribute("stroke-linecap","round"),e.setAttribute("stroke-dashoffset",1);t<o;t+=1)r=createNS("path"),e.appendChild(r),this.paths.push({p:r,m:t});if(this.filterManager.effectElements[10].p.v===3){var R=createNS("mask"),G=createElementID();R.setAttribute("id",G),R.setAttribute("mask-type","alpha"),R.appendChild(e),this.elem.globalData.defs.appendChild(R);var K=createNS("g");for(K.setAttribute("mask","url("+getLocationHref()+"#"+G+")");y[0];)K.appendChild(y[0]);this.elem.layerElement.appendChild(K),this.masker=R,e.setAttribute("stroke","#fff")}else if(this.filterManager.effectElements[10].p.v===1||this.filterManager.effectElements[10].p.v===2){if(this.filterManager.effectElements[10].p.v===2)for(y=this.elem.layerElement.children||this.elem.layerElement.childNodes;y.length;)this.elem.layerElement.removeChild(y[0]);this.elem.layerElement.appendChild(e),this.elem.layerElement.removeAttribute("mask"),e.setAttribute("stroke","#fff")}this.initialized=!0,this.pathMasker=e},SVGStrokeEffect.prototype.renderFrame=function(r){var e;this.initialized||this.initialize();var t,o,y=this.paths.length;for(e=0;e<y;e+=1)if(this.paths[e].m!==-1&&(t=this.elem.maskManager.viewData[this.paths[e].m],o=this.paths[e].p,(r||this.filterManager._mdf||t.prop._mdf)&&o.setAttribute("d",t.lastPath),r||this.filterManager.effectElements[9].p._mdf||this.filterManager.effectElements[4].p._mdf||this.filterManager.effectElements[7].p._mdf||this.filterManager.effectElements[8].p._mdf||t.prop._mdf)){var R;if(this.filterManager.effectElements[7].p.v!==0||this.filterManager.effectElements[8].p.v!==100){var G=.01*Math.min(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v),K=.01*Math.max(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v),Y=o.getTotalLength();R="0 0 0 "+Y*G+" ";var Q,ee=Y*(K-G),ie=1+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v*.01,re=Math.floor(ee/ie);for(Q=0;Q<re;Q+=1)R+="1 "+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v*.01+" ";R+="0 "+10*Y+" 0 0"}else R="1 "+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v*.01;o.setAttribute("stroke-dasharray",R)}if((r||this.filterManager.effectElements[4].p._mdf)&&this.pathMasker.setAttribute("stroke-width",2*this.filterManager.effectElements[4].p.v),(r||this.filterManager.effectElements[6].p._mdf)&&this.pathMasker.setAttribute("opacity",this.filterManager.effectElements[6].p.v),(this.filterManager.effectElements[10].p.v===1||this.filterManager.effectElements[10].p.v===2)&&(r||this.filterManager.effectElements[3].p._mdf)){var se=this.filterManager.effectElements[3].p.v;this.pathMasker.setAttribute("stroke","rgb("+bmFloor(255*se[0])+","+bmFloor(255*se[1])+","+bmFloor(255*se[2])+")")}},SVGTritoneFilter.prototype.renderFrame=function(r){if(r||this.filterManager._mdf){var e=this.filterManager.effectElements[0].p.v,t=this.filterManager.effectElements[1].p.v,o=this.filterManager.effectElements[2].p.v,y=o[0]+" "+t[0]+" "+e[0],R=o[1]+" "+t[1]+" "+e[1],G=o[2]+" "+t[2]+" "+e[2];this.feFuncR.setAttribute("tableValues",y),this.feFuncG.setAttribute("tableValues",R),this.feFuncB.setAttribute("tableValues",G)}},SVGProLevelsFilter.prototype.createFeFunc=function(r,e){var t=createNS(r);return t.setAttribute("type","table"),e.appendChild(t),t},SVGProLevelsFilter.prototype.getTableValue=function(r,e,t,o,y){for(var R,G,K=0,Y=Math.min(r,e),Q=Math.max(r,e),ee=Array.call(null,{length:256}),ie=0,re=y-o,se=e-r;K<=256;)G=(R=K/256)<=Y?se<0?y:o:R>=Q?se<0?o:y:o+re*Math.pow((R-r)/se,1/t),ee[ie]=G,ie+=1,K+=256/255;return ee.join(" ")},SVGProLevelsFilter.prototype.renderFrame=function(r){if(r||this.filterManager._mdf){var e,t=this.filterManager.effectElements;this.feFuncRComposed&&(r||t[3].p._mdf||t[4].p._mdf||t[5].p._mdf||t[6].p._mdf||t[7].p._mdf)&&(e=this.getTableValue(t[3].p.v,t[4].p.v,t[5].p.v,t[6].p.v,t[7].p.v),this.feFuncRComposed.setAttribute("tableValues",e),this.feFuncGComposed.setAttribute("tableValues",e),this.feFuncBComposed.setAttribute("tableValues",e)),this.feFuncR&&(r||t[10].p._mdf||t[11].p._mdf||t[12].p._mdf||t[13].p._mdf||t[14].p._mdf)&&(e=this.getTableValue(t[10].p.v,t[11].p.v,t[12].p.v,t[13].p.v,t[14].p.v),this.feFuncR.setAttribute("tableValues",e)),this.feFuncG&&(r||t[17].p._mdf||t[18].p._mdf||t[19].p._mdf||t[20].p._mdf||t[21].p._mdf)&&(e=this.getTableValue(t[17].p.v,t[18].p.v,t[19].p.v,t[20].p.v,t[21].p.v),this.feFuncG.setAttribute("tableValues",e)),this.feFuncB&&(r||t[24].p._mdf||t[25].p._mdf||t[26].p._mdf||t[27].p._mdf||t[28].p._mdf)&&(e=this.getTableValue(t[24].p.v,t[25].p.v,t[26].p.v,t[27].p.v,t[28].p.v),this.feFuncB.setAttribute("tableValues",e)),this.feFuncA&&(r||t[31].p._mdf||t[32].p._mdf||t[33].p._mdf||t[34].p._mdf||t[35].p._mdf)&&(e=this.getTableValue(t[31].p.v,t[32].p.v,t[33].p.v,t[34].p.v,t[35].p.v),this.feFuncA.setAttribute("tableValues",e))}},extendPrototype([SVGComposableEffect],SVGDropShadowEffect),SVGDropShadowEffect.prototype.renderFrame=function(r){if(r||this.filterManager._mdf){if((r||this.filterManager.effectElements[4].p._mdf)&&this.feGaussianBlur.setAttribute("stdDeviation",this.filterManager.effectElements[4].p.v/4),r||this.filterManager.effectElements[0].p._mdf){var e=this.filterManager.effectElements[0].p.v;this.feFlood.setAttribute("flood-color",rgbToHex(Math.round(255*e[0]),Math.round(255*e[1]),Math.round(255*e[2])))}if((r||this.filterManager.effectElements[1].p._mdf)&&this.feFlood.setAttribute("flood-opacity",this.filterManager.effectElements[1].p.v/255),r||this.filterManager.effectElements[2].p._mdf||this.filterManager.effectElements[3].p._mdf){var t=this.filterManager.effectElements[3].p.v,o=(this.filterManager.effectElements[2].p.v-90)*degToRads,y=t*Math.cos(o),R=t*Math.sin(o);this.feOffset.setAttribute("dx",y),this.feOffset.setAttribute("dy",R)}}};var _svgMatteSymbols=[];function SVGMatte3Effect(r,e,t){this.initialized=!1,this.filterManager=e,this.filterElem=r,this.elem=t,t.matteElement=createNS("g"),t.matteElement.appendChild(t.layerElement),t.matteElement.appendChild(t.transformedElement),t.baseElement=t.matteElement}function SVGGaussianBlurEffect(r,e,t,o){r.setAttribute("x","-100%"),r.setAttribute("y","-100%"),r.setAttribute("width","300%"),r.setAttribute("height","300%"),this.filterManager=e;var y=createNS("feGaussianBlur");y.setAttribute("result",o),r.appendChild(y),this.feGaussianBlur=y}function TransformEffect(){}function SVGTransformEffect(r,e){this.init(e)}function CVTransformEffect(r){this.init(r)}return SVGMatte3Effect.prototype.findSymbol=function(r){for(var e=0,t=_svgMatteSymbols.length;e<t;){if(_svgMatteSymbols[e]===r)return _svgMatteSymbols[e];e+=1}return null},SVGMatte3Effect.prototype.replaceInParent=function(r,e){var t=r.layerElement.parentNode;if(t){for(var o,y=t.children,R=0,G=y.length;R<G&&y[R]!==r.layerElement;)R+=1;R<=G-2&&(o=y[R+1]);var K=createNS("use");K.setAttribute("href","#"+e),o?t.insertBefore(K,o):t.appendChild(K)}},SVGMatte3Effect.prototype.setElementAsMask=function(r,e){if(!this.findSymbol(e)){var t=createElementID(),o=createNS("mask");o.setAttribute("id",e.layerId),o.setAttribute("mask-type","alpha"),_svgMatteSymbols.push(e);var y=r.globalData.defs;y.appendChild(o);var R=createNS("symbol");R.setAttribute("id",t),this.replaceInParent(e,t),R.appendChild(e.layerElement),y.appendChild(R);var G=createNS("use");G.setAttribute("href","#"+t),o.appendChild(G),e.data.hd=!1,e.show()}r.setMatte(e.layerId)},SVGMatte3Effect.prototype.initialize=function(){for(var r=this.filterManager.effectElements[0].p.v,e=this.elem.comp.elements,t=0,o=e.length;t<o;)e[t]&&e[t].data.ind===r&&this.setElementAsMask(this.elem,e[t]),t+=1;this.initialized=!0},SVGMatte3Effect.prototype.renderFrame=function(){this.initialized||this.initialize()},SVGGaussianBlurEffect.prototype.renderFrame=function(r){if(r||this.filterManager._mdf){var e=.3*this.filterManager.effectElements[0].p.v,t=this.filterManager.effectElements[1].p.v,o=t==3?0:e,y=t==2?0:e;this.feGaussianBlur.setAttribute("stdDeviation",o+" "+y);var R=this.filterManager.effectElements[2].p.v==1?"wrap":"duplicate";this.feGaussianBlur.setAttribute("edgeMode",R)}},TransformEffect.prototype.init=function(r){this.effectsManager=r,this.type=effectTypes.TRANSFORM_EFFECT,this.matrix=new Matrix,this.opacity=-1,this._mdf=!1,this._opMdf=!1},TransformEffect.prototype.renderFrame=function(r){if(this._opMdf=!1,this._mdf=!1,r||this.effectsManager._mdf){var e=this.effectsManager.effectElements,t=e[0].p.v,o=e[1].p.v,y=e[2].p.v===1,R=e[3].p.v,G=y?R:e[4].p.v,K=e[5].p.v,Y=e[6].p.v,Q=e[7].p.v;this.matrix.reset(),this.matrix.translate(-t[0],-t[1],t[2]),this.matrix.scale(.01*G,.01*R,1),this.matrix.rotate(-Q*degToRads),this.matrix.skewFromAxis(-K*degToRads,(Y+90)*degToRads),this.matrix.translate(o[0],o[1],0),this._mdf=!0,this.opacity!==e[8].p.v&&(this.opacity=e[8].p.v,this._opMdf=!0)}},extendPrototype([TransformEffect],SVGTransformEffect),extendPrototype([TransformEffect],CVTransformEffect),registerRenderer("canvas",CanvasRenderer),registerRenderer("html",HybridRenderer),registerRenderer("svg",SVGRenderer),ShapeModifiers.registerModifier("tm",TrimModifier),ShapeModifiers.registerModifier("pb",PuckerAndBloatModifier),ShapeModifiers.registerModifier("rp",RepeaterModifier),ShapeModifiers.registerModifier("rd",RoundCornersModifier),ShapeModifiers.registerModifier("zz",ZigZagModifier),ShapeModifiers.registerModifier("op",OffsetPathModifier),setExpressionsPlugin(Expressions),setExpressionInterfaces(getInterface),initialize$1(),initialize(),registerEffect$1(20,SVGTintFilter,!0),registerEffect$1(21,SVGFillFilter,!0),registerEffect$1(22,SVGStrokeEffect,!1),registerEffect$1(23,SVGTritoneFilter,!0),registerEffect$1(24,SVGProLevelsFilter,!0),registerEffect$1(25,SVGDropShadowEffect,!0),registerEffect$1(28,SVGMatte3Effect,!1),registerEffect$1(29,SVGGaussianBlurEffect,!0),registerEffect$1(35,SVGTransformEffect,!1),registerEffect(35,CVTransformEffect),lottie},module.exports=factory())})(lottie$1,lottie$1.exports);var _templateObject$1,styles=r$3(_templateObject$1||(_templateObject$1=_taggedTemplateLiteral([`
  * {
    box-sizing: border-box;
  }

  :host {
    --lottie-player-toolbar-height: 35px;
    --lottie-player-toolbar-background-color: transparent;
    --lottie-player-toolbar-icon-color: #999;
    --lottie-player-toolbar-icon-hover-color: #222;
    --lottie-player-toolbar-icon-active-color: #555;
    --lottie-player-seeker-track-color: #ccc;
    --lottie-player-seeker-thumb-color: rgba(0, 107, 120, 0.8);
    --lottie-player-seeker-display: block;

    display: block;
    width: 100%;
    height: 100%;
  }

  .main {
    display: flex;
    flex-direction: column;
    height: 100%;
    width: 100%;
  }

  .animation {
    width: 100%;
    height: 100%;
    display: flex;
  }
  .animation.controls {
    height: calc(100% - 35px);
  }

  .toolbar {
    display: flex;
    align-items: center;
    justify-items: center;
    background-color: var(--lottie-player-toolbar-background-color);
    margin: 0 5px;
    height: 35px;
  }

  .toolbar button {
    cursor: pointer;
    fill: var(--lottie-player-toolbar-icon-color);
    display: flex;
    background: none;
    border: 0;
    padding: 0;
    outline: none;
    height: 100%;
  }

  .toolbar button:hover {
    fill: var(--lottie-player-toolbar-icon-hover-color);
  }

  .toolbar button.active {
    fill: var(--lottie-player-toolbar-icon-active-color);
  }

  .toolbar button.active:hover {
    fill: var(--lottie-player-toolbar-icon-hover-color);
  }

  .toolbar button:focus {
    outline: 1px dotted var(--lottie-player-toolbar-icon-active-color);
  }

  .toolbar button svg {
  }

  .toolbar button.disabled svg {
    display: none;
  }

  .seeker {
    -webkit-appearance: none;
    width: 95%;
    outline: none;
    background-color: var(--lottie-player-toolbar-background-color);
    display: var(--lottie-player-seeker-display);
  }

  .seeker::-webkit-slider-runnable-track {
    width: 100%;
    height: 5px;
    cursor: pointer;
    background: var(--lottie-player-seeker-track-color);
    border-radius: 3px;
  }
  .seeker::-webkit-slider-thumb {
    height: 15px;
    width: 15px;
    border-radius: 50%;
    background: var(--lottie-player-seeker-thumb-color);
    cursor: pointer;
    -webkit-appearance: none;
    margin-top: -5px;
  }
  .seeker:focus::-webkit-slider-runnable-track {
    background: #999;
  }
  .seeker::-moz-range-track {
    width: 100%;
    height: 5px;
    cursor: pointer;
    background: var(--lottie-player-seeker-track-color);
    border-radius: 3px;
  }
  .seeker::-moz-range-thumb {
    height: 15px;
    width: 15px;
    border-radius: 50%;
    background: var(--lottie-player-seeker-thumb-color);
    cursor: pointer;
  }
  .seeker::-ms-track {
    width: 100%;
    height: 5px;
    cursor: pointer;
    background: transparent;
    border-color: transparent;
    color: transparent;
  }
  .seeker::-ms-fill-lower {
    background: var(--lottie-player-seeker-track-color);
    border-radius: 3px;
  }
  .seeker::-ms-fill-upper {
    background: var(--lottie-player-seeker-track-color);
    border-radius: 3px;
  }
  .seeker::-ms-thumb {
    border: 0;
    height: 15px;
    width: 15px;
    border-radius: 50%;
    background: var(--lottie-player-seeker-thumb-color);
    cursor: pointer;
  }
  .seeker:focus::-ms-fill-lower {
    background: var(--lottie-player-seeker-track-color);
  }
  .seeker:focus::-ms-fill-upper {
    background: var(--lottie-player-seeker-track-color);
  }

  .error {
    display: flex;
    justify-content: center;
    height: 100%;
    align-items: center;
  }
`]))),version$3="2.0.12",dependencies={"lottie-web":"^5.12.2"},_templateObject,_templateObject2,_templateObject3,_templateObject4,_templateObject5,PlayerState,PlayMode,PlayerEvents;function parseSrc(r){if(typeof r=="object")return r;try{return JSON.parse(r)}catch{return new URL(r,window.location.href).toString()}}function isLottie(r){return["v","ip","op","layers","fr","w","h"].every(e=>Object.prototype.hasOwnProperty.call(r,e))}function fromURL(r){return _fromURL.apply(this,arguments)}function _fromURL(){return(_fromURL=_asyncToGenerator(function*(r){if(typeof r!="string")throw new Error("The url value must be a string");var e;try{var t=new URL(r),o=yield fetch(t.toString());e=yield o.json()}catch{throw new Error("An error occurred while trying to load the Lottie file from URL")}return e})).apply(this,arguments)}(function(r){r.Destroyed="destroyed",r.Error="error",r.Frozen="frozen",r.Loading="loading",r.Paused="paused",r.Playing="playing",r.Stopped="stopped"})(PlayerState||(PlayerState={})),function(r){r.Bounce="bounce",r.Normal="normal"}(PlayMode||(PlayMode={})),function(r){r.Complete="complete",r.Destroyed="destroyed",r.Error="error",r.Frame="frame",r.Freeze="freeze",r.Load="load",r.Loop="loop",r.Pause="pause",r.Play="play",r.Ready="ready",r.Rendered="rendered",r.Stop="stop"}(PlayerEvents||(PlayerEvents={}));var LottiePlayer=class extends s{constructor(){super(...arguments),this.autoplay=!1,this.background="transparent",this.controls=!1,this.currentState=PlayerState.Loading,this.description="Lottie animation",this.direction=1,this.disableCheck=!1,this.disableShadowDOM=!1,this.hover=!1,this.intermission=1,this.loop=!1,this.mode=PlayMode.Normal,this.preserveAspectRatio="xMidYMid meet",this.renderer="svg",this.speed=1,this._io=void 0,this._counter=1,this._onVisibilityChange=()=>{document.hidden===!0&&this.currentState===PlayerState.Playing?this.freeze():this.currentState===PlayerState.Frozen&&this.play()}}load(r){var e=this;return _asyncToGenerator(function*(){var t={container:e.container,loop:!1,autoplay:!1,renderer:e.renderer,rendererSettings:Object.assign({preserveAspectRatio:e.preserveAspectRatio,clearCanvas:!1,progressiveLoad:!0,hideOnTransparent:!0},e.viewBoxSize&&{viewBoxSize:e.viewBoxSize})};try{var o=parseSrc(r),y={},R=typeof o=="string"?"path":"animationData";e._lottie&&e._lottie.destroy(),e.webworkers&&lottie$1.exports.useWebWorker(!0),e._lottie=lottie$1.exports.loadAnimation(Object.assign(Object.assign({},t),{[R]:o})),e._attachEventListeners(),e.disableCheck||(R==="path"?(y=yield fromURL(o),R="animationData"):y=o,isLottie(y)||(e.currentState=PlayerState.Error,e.dispatchEvent(new CustomEvent(PlayerEvents.Error))))}catch{e.currentState=PlayerState.Error,e.dispatchEvent(new CustomEvent(PlayerEvents.Error))}})()}getLottie(){return this._lottie}getVersions(){return{lottieWebVersion:dependencies["lottie-web"],lottiePlayerVersion:version$3}}play(){this._lottie&&(this._lottie.play(),this.currentState=PlayerState.Playing,this.dispatchEvent(new CustomEvent(PlayerEvents.Play)))}pause(){this._lottie&&(this._lottie.pause(),this.currentState=PlayerState.Paused,this.dispatchEvent(new CustomEvent(PlayerEvents.Pause)))}stop(){this._lottie&&(this._counter=1,this._lottie.stop(),this.currentState=PlayerState.Stopped,this.dispatchEvent(new CustomEvent(PlayerEvents.Stop)))}destroy(){this._lottie&&(this._lottie.destroy(),this._lottie=null,this.currentState=PlayerState.Destroyed,this.dispatchEvent(new CustomEvent(PlayerEvents.Destroyed)),this.remove())}seek(r){if(this._lottie){var e=/^(\d+)(%?)$/.exec(r.toString());if(e){var t=e[2]==="%"?this._lottie.totalFrames*Number(e[1])/100:Number(e[1]);this.seeker=t,this.currentState===PlayerState.Playing?this._lottie.goToAndPlay(t,!0):(this._lottie.goToAndStop(t,!0),this._lottie.pause())}}}snapshot(){var r=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];if(this.shadowRoot){var e=this.shadowRoot.querySelector(".animation svg"),t=new XMLSerializer().serializeToString(e);if(r){var o=document.createElement("a");o.href="data:image/svg+xml;charset=utf-8,".concat(encodeURIComponent(t)),o.download="download_".concat(this.seeker,".svg"),document.body.appendChild(o),o.click(),document.body.removeChild(o)}return t}}setSpeed(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;this._lottie&&this._lottie.setSpeed(r)}setDirection(r){this._lottie&&this._lottie.setDirection(r)}setLooping(r){this._lottie&&(this.loop=r,this._lottie.loop=r)}togglePlay(){return this.currentState===PlayerState.Playing?this.pause():this.play()}toggleLooping(){this.setLooping(!this.loop)}resize(){this._lottie&&this._lottie.resize()}static get styles(){return styles}disconnectedCallback(){this.isConnected||(this._io&&(this._io.disconnect(),this._io=void 0),document.removeEventListener("visibilitychange",this._onVisibilityChange),this.destroy())}render(){var r=this.controls?"main controls":"main",e=this.controls?"animation controls":"animation";return $$1(_templateObject||(_templateObject=_taggedTemplateLiteral([` <div
      id="animation-container"
      class=`,`
      lang="en"
      aria-label=`,`
      role="img"
    >
      <div
        id="animation"
        class=`,`
        style="background:`,`;"
      >
        `,`
      </div>
      `,`
    </div>`])),r,this.description,e,this.background,this.currentState===PlayerState.Error?$$1(_templateObject2||(_templateObject2=_taggedTemplateLiteral(['<div class="error">⚠️</div>']))):void 0,this.controls&&!this.disableShadowDOM?this.renderControls():void 0)}createRenderRoot(){return this.disableShadowDOM&&(this.style.display="block"),this.disableShadowDOM?this:super.createRenderRoot()}firstUpdated(){"IntersectionObserver"in window&&(this._io=new IntersectionObserver(r=>{r[0].isIntersecting?this.currentState===PlayerState.Frozen&&this.play():this.currentState===PlayerState.Playing&&this.freeze()}),this._io.observe(this.container)),document.hidden!==void 0&&document.addEventListener("visibilitychange",this._onVisibilityChange),this.src&&this.load(this.src),this.dispatchEvent(new CustomEvent(PlayerEvents.Rendered))}renderControls(){var r=this.currentState===PlayerState.Playing,e=this.currentState===PlayerState.Paused,t=this.currentState===PlayerState.Stopped;return $$1(_templateObject3||(_templateObject3=_taggedTemplateLiteral([`
      <div
        id="lottie-controls"
        aria-label="lottie-animation-controls"
        class="toolbar"
      >
        <button
          id="lottie-play-button"
          @click=`,`
          class=`,`
          style="align-items:center;"
          tabindex="0"
          aria-label="play-pause"
        >
          `,`
        </button>
        <button
          id="lottie-stop-button"
          @click=`,`
          class=`,`
          style="align-items:center;"
          tabindex="0"
          aria-label="stop"
        >
          <svg width="24" height="24" aria-hidden="true" focusable="false">
            <path d="M6 6h12v12H6V6z" />
          </svg>
        </button>
        <input
          id="lottie-seeker-input"
          class="seeker"
          type="range"
          min="0"
          step="1"
          max="100"
          .value=`,`
          @input=`,`
          @mousedown=`,`
          @mouseup=`,`
          aria-valuemin="1"
          aria-valuemax="100"
          role="slider"
          aria-valuenow=`,`
          tabindex="0"
          aria-label="lottie-seek-input"
        />
        <button
          id="lottie-loop-toggle"
          @click=`,`
          class=`,`
          style="align-items:center;"
          tabindex="0"
          aria-label="loop-toggle"
        >
          <svg width="24" height="24" aria-hidden="true" focusable="false">
            <path
              d="M17.016 17.016v-4.031h1.969v6h-12v3l-3.984-3.984 3.984-3.984v3h10.031zM6.984 6.984v4.031H5.015v-6h12v-3l3.984 3.984-3.984 3.984v-3H6.984z"
            />
          </svg>
        </button>
      </div>
    `])),this.togglePlay,r||e?"active":"",$$1(r?_templateObject4||(_templateObject4=_taggedTemplateLiteral([`<svg
                width="24"
                height="24"
                aria-hidden="true"
                focusable="false"
              >
                <path
                  d="M14.016 5.016H18v13.969h-3.984V5.016zM6 18.984V5.015h3.984v13.969H6z"
                />
              </svg>`])):_templateObject5||(_templateObject5=_taggedTemplateLiteral([`<svg
                width="24"
                height="24"
                aria-hidden="true"
                focusable="false"
              >
                <path d="M8.016 5.016L18.985 12 8.016 18.984V5.015z" />
              </svg>`]))),this.stop,t?"active":"",this.seeker,this._handleSeekChange,()=>{this._prevState=this.currentState,this.freeze()},()=>{this._prevState===PlayerState.Playing&&this.play()},this.seeker,this.toggleLooping,this.loop?"active":"")}_handleSeekChange(r){if(this._lottie&&!isNaN(r.target.value)){var e=r.target.value/100*this._lottie.totalFrames;this.seek(e)}}_attachEventListeners(){this._lottie.addEventListener("enterFrame",()=>{this.seeker=this._lottie.currentFrame/this._lottie.totalFrames*100,this.dispatchEvent(new CustomEvent(PlayerEvents.Frame,{detail:{frame:this._lottie.currentFrame,seeker:this.seeker}}))}),this._lottie.addEventListener("complete",()=>{if(this.currentState===PlayerState.Playing){if((!this.loop||this.count&&this._counter>=this.count)&&(this.dispatchEvent(new CustomEvent(PlayerEvents.Complete)),this.mode!==PlayMode.Bounce||this._lottie.currentFrame===0))return;this.mode===PlayMode.Bounce?(this.count&&(this._counter+=.5),setTimeout(()=>{this.dispatchEvent(new CustomEvent(PlayerEvents.Loop)),this.currentState===PlayerState.Playing&&(this._lottie.setDirection(-1*this._lottie.playDirection),this._lottie.play())},this.intermission)):(this.count&&(this._counter+=1),window.setTimeout(()=>{this.dispatchEvent(new CustomEvent(PlayerEvents.Loop)),this.currentState===PlayerState.Playing&&(this.direction===-1?(this.seek("99%"),this.play()):(this._lottie.stop(),this._lottie.play()))},this.intermission))}else this.dispatchEvent(new CustomEvent(PlayerEvents.Complete))}),this._lottie.addEventListener("DOMLoaded",()=>{this.setSpeed(this.speed),this.setDirection(this.direction),this.autoplay&&(this.direction===-1&&this.seek("100%"),this.play()),this.dispatchEvent(new CustomEvent(PlayerEvents.Ready))}),this._lottie.addEventListener("data_ready",()=>{this.dispatchEvent(new CustomEvent(PlayerEvents.Load))}),this._lottie.addEventListener("data_failed",()=>{this.currentState=PlayerState.Error,this.dispatchEvent(new CustomEvent(PlayerEvents.Error))}),this.container.addEventListener("mouseenter",()=>{this.hover&&this.currentState!==PlayerState.Playing&&this.play()}),this.container.addEventListener("mouseleave",()=>{this.hover&&this.currentState===PlayerState.Playing&&this.stop()})}freeze(){this._lottie&&(this._lottie.pause(),this.currentState=PlayerState.Frozen,this.dispatchEvent(new CustomEvent(PlayerEvents.Freeze)))}};__decorate([e$5({type:Boolean})],LottiePlayer.prototype,"autoplay",void 0),__decorate([e$5({type:String,reflect:!0})],LottiePlayer.prototype,"background",void 0),__decorate([e$5({type:Boolean})],LottiePlayer.prototype,"controls",void 0),__decorate([e$5({type:Number})],LottiePlayer.prototype,"count",void 0),__decorate([e$5({type:String})],LottiePlayer.prototype,"currentState",void 0),__decorate([e$5({type:String})],LottiePlayer.prototype,"description",void 0),__decorate([e$5({type:Number})],LottiePlayer.prototype,"direction",void 0),__decorate([e$5({type:Boolean})],LottiePlayer.prototype,"disableCheck",void 0),__decorate([e$5({type:Boolean})],LottiePlayer.prototype,"disableShadowDOM",void 0),__decorate([e$5({type:Boolean})],LottiePlayer.prototype,"hover",void 0),__decorate([e$5()],LottiePlayer.prototype,"intermission",void 0),__decorate([e$5({type:Boolean,reflect:!0})],LottiePlayer.prototype,"loop",void 0),__decorate([e$5()],LottiePlayer.prototype,"mode",void 0),__decorate([e$5({type:String})],LottiePlayer.prototype,"preserveAspectRatio",void 0),__decorate([e$5({type:String})],LottiePlayer.prototype,"renderer",void 0),__decorate([e$5({type:String})],LottiePlayer.prototype,"viewBoxSize",void 0),__decorate([e$5()],LottiePlayer.prototype,"seeker",void 0),__decorate([e$5({type:Number})],LottiePlayer.prototype,"speed",void 0),__decorate([e$5({type:String})],LottiePlayer.prototype,"src",void 0),__decorate([e$5({type:Boolean})],LottiePlayer.prototype,"webworkers",void 0),__decorate([i$4(".animation")],LottiePlayer.prototype,"container",void 0),LottiePlayer=__decorate([n$1("lottie-player")],LottiePlayer);function ArrowDown(){const[r,e]=reactExports.useState(!0);return reactExports.useEffect(()=>{const t=setTimeout(()=>{e(!1)},5e3);return()=>clearTimeout(t)},[]),jsxRuntimeExports.jsx("div",{className:"App",children:r&&jsxRuntimeExports.jsx("lottie-player",{src:arrow,background:"transparent",speed:"1",class:"w-full max-w-md floating",loop:!0,autoplay:!0,style:{position:"fixed",top:"10%",left:"50%",transform:"translateX(-50%)",zIndex:"9999",opacity:"0.7",pointerEvents:"none"}})})}var DefaultContext={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},IconContext=React.createContext&&React.createContext(DefaultContext),_excluded=["attr","size","title"];function _objectWithoutProperties(r,e){if(r==null)return{};var t=_objectWithoutPropertiesLoose(r,e),o,y;if(Object.getOwnPropertySymbols){var R=Object.getOwnPropertySymbols(r);for(y=0;y<R.length;y++)o=R[y],!(e.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(r,o)&&(t[o]=r[o])}return t}function _objectWithoutPropertiesLoose(r,e){if(r==null)return{};var t={};for(var o in r)if(Object.prototype.hasOwnProperty.call(r,o)){if(e.indexOf(o)>=0)continue;t[o]=r[o]}return t}function _extends$1(){return _extends$1=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(r[o]=t[o])}return r},_extends$1.apply(this,arguments)}function ownKeys(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);e&&(o=o.filter(function(y){return Object.getOwnPropertyDescriptor(r,y).enumerable})),t.push.apply(t,o)}return t}function _objectSpread(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ownKeys(Object(t),!0).forEach(function(o){_defineProperty(r,o,t[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(o){Object.defineProperty(r,o,Object.getOwnPropertyDescriptor(t,o))})}return r}function _defineProperty(r,e,t){return e=_toPropertyKey(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function _toPropertyKey(r){var e=_toPrimitive(r,"string");return typeof e=="symbol"?e:e+""}function _toPrimitive(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var o=t.call(r,e);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function Tree2Element(r){return r&&r.map((e,t)=>React.createElement(e.tag,_objectSpread({key:t},e.attr),Tree2Element(e.child)))}function GenIcon(r){return e=>React.createElement(IconBase,_extends$1({attr:_objectSpread({},r.attr)},e),Tree2Element(r.child))}function IconBase(r){var e=t=>{var{attr:o,size:y,title:R}=r,G=_objectWithoutProperties(r,_excluded),K=y||t.size||"1em",Y;return t.className&&(Y=t.className),r.className&&(Y=(Y?Y+" ":"")+r.className),React.createElement("svg",_extends$1({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,o,G,{className:Y,style:_objectSpread(_objectSpread({color:r.color||t.color},t.style),r.style),height:K,width:K,xmlns:"http://www.w3.org/2000/svg"}),R&&React.createElement("title",null,R),r.children)};return IconContext!==void 0?React.createElement(IconContext.Consumer,null,t=>e(t)):e(DefaultContext)}function FaGithub(r){return GenIcon({attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"},child:[]}]})(r)}function FaLinkedin(r){return GenIcon({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"},child:[]}]})(r)}function FaPause(r){return GenIcon({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M144 479H48c-26.5 0-48-21.5-48-48V79c0-26.5 21.5-48 48-48h96c26.5 0 48 21.5 48 48v352c0 26.5-21.5 48-48 48zm304-48V79c0-26.5-21.5-48-48-48h-96c-26.5 0-48 21.5-48 48v352c0 26.5 21.5 48 48 48h96c26.5 0 48-21.5 48-48z"},child:[]}]})(r)}function FaPlay(r){return GenIcon({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M424.4 214.7L72.4 6.6C43.8-10.3 0 6.1 0 47.9V464c0 37.5 40.7 60.1 72.4 41.3l352-208c31.4-18.5 31.5-64.1 0-82.6z"},child:[]}]})(r)}const backgroundMusic$1="/assets/bgm-1-ChQusrIO.mp3",Navbar=()=>{const[r,e]=reactExports.useState(!1),t=reactExports.useRef(null);reactExports.useEffect(()=>(t.current&&(r?t.current.play().catch(y=>{console.warn("Play failed:",y)}):t.current.pause()),()=>{t.current&&t.current.pause()}),[r]);const o=()=>{e(!r)};return jsxRuntimeExports.jsxs("nav",{className:"z-50 inline-block w-fit mt-4",children:[jsxRuntimeExports.jsxs("ul",{className:"group flex items-center justify-center gap-4 px-5 py-5 bg-black",children:[jsxRuntimeExports.jsx("a",{href:"https://github.com/kshitij-vashisth",target:"_blank",className:"text-sm font-light text-[#20C20E] transition-all duration-300 hover:text-[#1A9A0B] rounded-2xl",children:jsxRuntimeExports.jsx(FaGithub,{className:"scale-200 hover:scale-300 z-1000 curZur"})}),jsxRuntimeExports.jsx("a",{href:"https://linkedin.com/in/kshitijvashisth",target:"_blank",className:" px-4 py-1.5 text-sm font-light text-[#20C20E] transition-all duration-300 hover:text-[#1A9A0B] rounded-2xl",children:jsxRuntimeExports.jsx(FaLinkedin,{className:"scale-200 hover:scale-300 z-1000 curZur"})}),jsxRuntimeExports.jsx("div",{className:"text-[#20C20E]",onClick:o,children:r?jsxRuntimeExports.jsx(FaPause,{className:"scale-200 hover:scale-300 z-1000 curZur"}):jsxRuntimeExports.jsx(FaPlay,{className:"scale-200 hover:scale-300 z-100 curZur"})})]}),jsxRuntimeExports.jsxs("div",{className:`text-sm font-light text-[#20C20E] transition-all duration-700 ease-in-out overflow-hidden ${r?"opacity-0":" bg-black opacity-100 max-w-xs"}`,children:["Click on ",jsxRuntimeExports.jsx("span",{className:"text-amber-100",children:"Play"})," to Enter the Matrix!"]}),jsxRuntimeExports.jsx("audio",{ref:t,src:backgroundMusic$1,loop:!0,style:{display:"none"}})]})},resumePdf="/assets/kshitij_vashisth_cv-CMTdPEqa.pdf",isMobile=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent),Footer=()=>{const[r,e]=reactExports.useState(!1),t=reactExports.useRef(null);return reactExports.useEffect(()=>(r?document.body.style.overflow="hidden":document.body.style.overflow="auto",()=>{document.body.style.overflow="auto"}),[r]),jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center text-center p-6 space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"translucent-container p-2",children:[jsxRuntimeExports.jsx("p",{className:"text-lg",children:"Have a project in mind?"}),jsxRuntimeExports.jsx("a",{href:"mailto:kshitijvashisth@gmail.com",className:"text-xl text-white hover:text-[#1A9A0B] inline-block mt-5 mb-4 hover:underline",children:"kshitijvashisth@gmail.com"}),jsxRuntimeExports.jsx("p",{children:isMobile?jsxRuntimeExports.jsx("a",{href:resumePdf,target:"_blank",rel:"noopener noreferrer",className:"hover:underline hover:text-[#1A9A0B]",children:"Download Resume!"}):jsxRuntimeExports.jsx("button",{onClick:()=>e(!0),className:"hover:underline hover:text-[#1A9A0B]",children:"Click to View Resume!"})})]}),jsxRuntimeExports.jsxs("div",{className:"translucent-container w-[95%] text-[12px]",children:[jsxRuntimeExports.jsx("p",{className:"text-muted-foreground",children:"Design by: Kshitij Vashisth © 2025 "}),jsxRuntimeExports.jsx("p",{className:"text-muted-foreground",children:"All copyrighted properties belong to rightful owners. "})]}),r&&jsxRuntimeExports.jsx("div",{className:"modal-overlay",onClick:()=>e(!1),children:jsxRuntimeExports.jsxs("div",{className:"modal-content expanded bg-black opacity-75 backdrop-blur-md p-6 max-w-5xl w-[90vw] h-[90vh] mx-auto rounded-lg shadow-lg overflow-hidden relative",onClick:o=>o.stopPropagation(),ref:t,onWheel:o=>o.stopPropagation(),children:[jsxRuntimeExports.jsx("iframe",{src:resumePdf,title:"Resume",className:"w-full h-full rounded-lg custom-scrollbar",allow:"fullscreen"}),jsxRuntimeExports.jsx("button",{onClick:()=>e(!1),className:"z-1000 curZur absolute top-4 right-0 bg-[#20C20E] px-3 py-2 rounded-full text-black hover:text-red-600 text-2xl font-bold hover:bg-[#1A9A0B] focus:outline-none hover:border-2 hover:border-solid hover:border-red-600",children:"×"})]})})]})},HireMe=()=>jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("div",{className:"slide-in-fade text-3xl font-extrabold uppercase",children:jsxRuntimeExports.jsx("span",{className:"curZur color-switch",children:jsxRuntimeExports.jsx("a",{href:"mailto:kshitijvashisth@gmail.com?subject=Let's%20collaborate%20on%20a%20project&body=Hello Mr. Kshitij Vashisth, I'm reaching out to you because...",className:"text-3xl font-extrabold uppercase",children:"Hire Me"})})})}),Intro=()=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"flex justify-center items-center w-[90%]",children:jsxRuntimeExports.jsx("div",{className:"translucent-container p-6 rounded-3xl",children:jsxRuntimeExports.jsx("p",{className:"text-[18px] text-left",children:"A full-stack developer who lives and breathes code 💻🔥, obsessed with building blazing-fast ⚡, scalable 📈 applications that don’t just work—they thrill users 🎢. I geek out over clean architecture 🏗️, buttery-smooth UIs 🧈🎨, and solving gnarly technical challenges 💡🧠. When I’m not refactoring 🔄 or debugging 🐞, you’ll find me absorbing new tech 📚🤓, or engaged in technical discussions with fellow devs 👨🏫✨. Let’s collaborate and turn wild ideas into rock-solid reality 🚀—preferably with coffee ☕ in hand."})})}),jsxRuntimeExports.jsx("div",{className:"flex justify-center",children:jsxRuntimeExports.jsx(HireMe,{})})]}),Headline=()=>jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("div",{className:"flex space-x-4 space-y-6",children:[jsxRuntimeExports.jsx("p",{children:"👋"}),jsxRuntimeExports.jsx("div",{className:"bg-[#20C20E] text-white px-4 rounded-full z-100000 hover:bg-[#1A9A0B]",children:"I'M"}),jsxRuntimeExports.jsx("p",{className:"custom-outline-white",children:"KSHITIJ"}),jsxRuntimeExports.jsxs("p",{className:"text-white custom-outline-green",children:["VASHISTH",jsxRuntimeExports.jsx("span",{className:"text-[#20C20E] custom-outline-white",children:"!"})]})]})});var lib={},slider={},innerSlider={},initialState={},hasRequiredInitialState;function requireInitialState(){return hasRequiredInitialState||(hasRequiredInitialState=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var e={animating:!1,autoplaying:null,currentDirection:0,currentLeft:null,currentSlide:0,direction:1,dragging:!1,edgeDragged:!1,initialized:!1,lazyLoadedList:[],listHeight:null,listWidth:null,scrolling:!1,slideCount:null,slideHeight:null,slideWidth:null,swipeLeft:null,swiped:!1,swiping:!1,touchObject:{startX:0,startY:0,curX:0,curY:0},trackStyle:{},trackWidth:0,targetSlide:0};r.default=e}(initialState)),initialState}var lodash_debounce,hasRequiredLodash_debounce;function requireLodash_debounce(){if(hasRequiredLodash_debounce)return lodash_debounce;hasRequiredLodash_debounce=1;var r="Expected a function",e=NaN,t="[object Symbol]",o=/^\s+|\s+$/g,y=/^[-+]0x[0-9a-f]+$/i,R=/^0b[01]+$/i,G=/^0o[0-7]+$/i,K=parseInt,Y=typeof commonjsGlobal$2=="object"&&commonjsGlobal$2&&commonjsGlobal$2.Object===Object&&commonjsGlobal$2,Q=typeof self=="object"&&self&&self.Object===Object&&self,ee=Y||Q||Function("return this")(),ie=Object.prototype,re=ie.toString,se=Math.max,le=Math.min,ce=function(){return ee.Date.now()};function oe(be,Re,Se){var Ee,ye,de,Me,Le,Pe,Ue=0,$e=!1,Ve=!1,Ce=!0;if(typeof be!="function")throw new TypeError(r);Re=_e(Re)||0,ue(Se)&&($e=!!Se.leading,Ve="maxWait"in Se,de=Ve?se(_e(Se.maxWait)||0,Re):de,Ce="trailing"in Se?!!Se.trailing:Ce);function De(xt){var un=Ee,Vn=ye;return Ee=ye=void 0,Ue=xt,Me=be.apply(Vn,un),Me}function Oe(xt){return Ue=xt,Le=setTimeout(Ye,Re),$e?De(xt):Me}function Te(xt){var un=xt-Pe,Vn=xt-Ue,In=Re-un;return Ve?le(In,de-Vn):In}function Ne(xt){var un=xt-Pe,Vn=xt-Ue;return Pe===void 0||un>=Re||un<0||Ve&&Vn>=de}function Ye(){var xt=ce();if(Ne(xt))return Qe(xt);Le=setTimeout(Ye,Te(xt))}function Qe(xt){return Le=void 0,Ce&&Ee?De(xt):(Ee=ye=void 0,Me)}function qe(){Le!==void 0&&clearTimeout(Le),Ue=0,Ee=Pe=ye=Le=void 0}function Ze(){return Le===void 0?Me:Qe(ce())}function ct(){var xt=ce(),un=Ne(xt);if(Ee=arguments,ye=this,Pe=xt,un){if(Le===void 0)return Oe(Pe);if(Ve)return Le=setTimeout(Ye,Re),De(Pe)}return Le===void 0&&(Le=setTimeout(Ye,Re)),Me}return ct.cancel=qe,ct.flush=Ze,ct}function ue(be){var Re=typeof be;return!!be&&(Re=="object"||Re=="function")}function ge(be){return!!be&&typeof be=="object"}function ve(be){return typeof be=="symbol"||ge(be)&&re.call(be)==t}function _e(be){if(typeof be=="number")return be;if(ve(be))return e;if(ue(be)){var Re=typeof be.valueOf=="function"?be.valueOf():be;be=ue(Re)?Re+"":Re}if(typeof be!="string")return be===0?be:+be;be=be.replace(o,"");var Se=R.test(be);return Se||G.test(be)?K(be.slice(2),Se?2:8):y.test(be)?e:+be}return lodash_debounce=oe,lodash_debounce}var classnames={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var hasRequiredClassnames;function requireClassnames(){return hasRequiredClassnames||(hasRequiredClassnames=1,function(r){(function(){var e={}.hasOwnProperty;function t(){for(var R="",G=0;G<arguments.length;G++){var K=arguments[G];K&&(R=y(R,o(K)))}return R}function o(R){if(typeof R=="string"||typeof R=="number")return R;if(typeof R!="object")return"";if(Array.isArray(R))return t.apply(null,R);if(R.toString!==Object.prototype.toString&&!R.toString.toString().includes("[native code]"))return R.toString();var G="";for(var K in R)e.call(R,K)&&R[K]&&(G=y(G,K));return G}function y(R,G){return G?R?R+" "+G:R+G:R}r.exports?(t.default=t,r.exports=t):window.classNames=t})()}(classnames)),classnames.exports}var innerSliderUtils={},defaultProps={},hasRequiredDefaultProps;function requireDefaultProps(){return hasRequiredDefaultProps||(hasRequiredDefaultProps=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var e=t(requireReact());function t(y){return y&&y.__esModule?y:{default:y}}var o={accessibility:!0,adaptiveHeight:!1,afterChange:null,appendDots:function(R){return e.default.createElement("ul",{style:{display:"block"}},R)},arrows:!0,autoplay:!1,autoplaySpeed:3e3,beforeChange:null,centerMode:!1,centerPadding:"50px",className:"",cssEase:"ease",customPaging:function(R){return e.default.createElement("button",null,R+1)},dots:!1,dotsClass:"slick-dots",draggable:!0,easing:"linear",edgeFriction:.35,fade:!1,focusOnSelect:!1,infinite:!0,initialSlide:0,lazyLoad:null,nextArrow:null,onEdge:null,onInit:null,onLazyLoadError:null,onReInit:null,pauseOnDotsHover:!1,pauseOnFocus:!1,pauseOnHover:!0,prevArrow:null,responsive:null,rows:1,rtl:!1,slide:"div",slidesPerRow:1,slidesToScroll:1,slidesToShow:1,speed:500,swipe:!0,swipeEvent:null,swipeToSlide:!1,touchMove:!0,touchThreshold:5,useCSS:!0,useTransform:!0,variableWidth:!1,vertical:!1,waitForAnimate:!0,asNavFor:null,unslick:!1};r.default=o}(defaultProps)),defaultProps}var hasRequiredInnerSliderUtils;function requireInnerSliderUtils(){if(hasRequiredInnerSliderUtils)return innerSliderUtils;hasRequiredInnerSliderUtils=1,Object.defineProperty(innerSliderUtils,"__esModule",{value:!0}),innerSliderUtils.checkSpecKeys=innerSliderUtils.checkNavigable=innerSliderUtils.changeSlide=innerSliderUtils.canUseDOM=innerSliderUtils.canGoNext=void 0,innerSliderUtils.clamp=Q,innerSliderUtils.extractObject=void 0,innerSliderUtils.filterSettings=De,innerSliderUtils.validSettings=innerSliderUtils.swipeStart=innerSliderUtils.swipeMove=innerSliderUtils.swipeEnd=innerSliderUtils.slidesOnRight=innerSliderUtils.slidesOnLeft=innerSliderUtils.slideHandler=innerSliderUtils.siblingDirection=innerSliderUtils.safePreventDefault=innerSliderUtils.lazyStartIndex=innerSliderUtils.lazySlidesOnRight=innerSliderUtils.lazySlidesOnLeft=innerSliderUtils.lazyEndIndex=innerSliderUtils.keyHandler=innerSliderUtils.initializedState=innerSliderUtils.getWidth=innerSliderUtils.getTrackLeft=innerSliderUtils.getTrackCSS=innerSliderUtils.getTrackAnimateCSS=innerSliderUtils.getTotalSlides=innerSliderUtils.getSwipeDirection=innerSliderUtils.getSlideCount=innerSliderUtils.getRequiredLazySlides=innerSliderUtils.getPreClones=innerSliderUtils.getPostClones=innerSliderUtils.getOnDemandLazySlides=innerSliderUtils.getNavigableIndexes=innerSliderUtils.getHeight=void 0;var r=t(requireReact()),e=t(requireDefaultProps());function t(Oe){return Oe&&Oe.__esModule?Oe:{default:Oe}}function o(Oe){"@babel/helpers - typeof";return o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Te){return typeof Te}:function(Te){return Te&&typeof Symbol=="function"&&Te.constructor===Symbol&&Te!==Symbol.prototype?"symbol":typeof Te},o(Oe)}function y(Oe,Te){var Ne=Object.keys(Oe);if(Object.getOwnPropertySymbols){var Ye=Object.getOwnPropertySymbols(Oe);Te&&(Ye=Ye.filter(function(Qe){return Object.getOwnPropertyDescriptor(Oe,Qe).enumerable})),Ne.push.apply(Ne,Ye)}return Ne}function R(Oe){for(var Te=1;Te<arguments.length;Te++){var Ne=arguments[Te]!=null?arguments[Te]:{};Te%2?y(Object(Ne),!0).forEach(function(Ye){G(Oe,Ye,Ne[Ye])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Oe,Object.getOwnPropertyDescriptors(Ne)):y(Object(Ne)).forEach(function(Ye){Object.defineProperty(Oe,Ye,Object.getOwnPropertyDescriptor(Ne,Ye))})}return Oe}function G(Oe,Te,Ne){return Te=K(Te),Te in Oe?Object.defineProperty(Oe,Te,{value:Ne,enumerable:!0,configurable:!0,writable:!0}):Oe[Te]=Ne,Oe}function K(Oe){var Te=Y(Oe,"string");return o(Te)=="symbol"?Te:String(Te)}function Y(Oe,Te){if(o(Oe)!="object"||!Oe)return Oe;var Ne=Oe[Symbol.toPrimitive];if(Ne!==void 0){var Ye=Ne.call(Oe,Te);if(o(Ye)!="object")return Ye;throw new TypeError("@@toPrimitive must return a primitive value.")}return(Te==="string"?String:Number)(Oe)}function Q(Oe,Te,Ne){return Math.max(Te,Math.min(Oe,Ne))}var ee=innerSliderUtils.safePreventDefault=function(Te){var Ne=["onTouchStart","onTouchMove","onWheel"];Ne.includes(Te._reactName)||Te.preventDefault()},ie=innerSliderUtils.getOnDemandLazySlides=function(Te){for(var Ne=[],Ye=re(Te),Qe=se(Te),qe=Ye;qe<Qe;qe++)Te.lazyLoadedList.indexOf(qe)<0&&Ne.push(qe);return Ne};innerSliderUtils.getRequiredLazySlides=function(Te){for(var Ne=[],Ye=re(Te),Qe=se(Te),qe=Ye;qe<Qe;qe++)Ne.push(qe);return Ne};var re=innerSliderUtils.lazyStartIndex=function(Te){return Te.currentSlide-le(Te)},se=innerSliderUtils.lazyEndIndex=function(Te){return Te.currentSlide+ce(Te)},le=innerSliderUtils.lazySlidesOnLeft=function(Te){return Te.centerMode?Math.floor(Te.slidesToShow/2)+(parseInt(Te.centerPadding)>0?1:0):0},ce=innerSliderUtils.lazySlidesOnRight=function(Te){return Te.centerMode?Math.floor((Te.slidesToShow-1)/2)+1+(parseInt(Te.centerPadding)>0?1:0):Te.slidesToShow},oe=innerSliderUtils.getWidth=function(Te){return Te&&Te.offsetWidth||0},ue=innerSliderUtils.getHeight=function(Te){return Te&&Te.offsetHeight||0},ge=innerSliderUtils.getSwipeDirection=function(Te){var Ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,Ye,Qe,qe,Ze;return Ye=Te.startX-Te.curX,Qe=Te.startY-Te.curY,qe=Math.atan2(Qe,Ye),Ze=Math.round(qe*180/Math.PI),Ze<0&&(Ze=360-Math.abs(Ze)),Ze<=45&&Ze>=0||Ze<=360&&Ze>=315?"left":Ze>=135&&Ze<=225?"right":Ne===!0?Ze>=35&&Ze<=135?"up":"down":"vertical"},ve=innerSliderUtils.canGoNext=function(Te){var Ne=!0;return Te.infinite||(Te.centerMode&&Te.currentSlide>=Te.slideCount-1||Te.slideCount<=Te.slidesToShow||Te.currentSlide>=Te.slideCount-Te.slidesToShow)&&(Ne=!1),Ne};innerSliderUtils.extractObject=function(Te,Ne){var Ye={};return Ne.forEach(function(Qe){return Ye[Qe]=Te[Qe]}),Ye},innerSliderUtils.initializedState=function(Te){var Ne=r.default.Children.count(Te.children),Ye=Te.listRef,Qe=Math.ceil(oe(Ye)),qe=Te.trackRef&&Te.trackRef.node,Ze=Math.ceil(oe(qe)),ct;if(Te.vertical)ct=Qe;else{var xt=Te.centerMode&&parseInt(Te.centerPadding)*2;typeof Te.centerPadding=="string"&&Te.centerPadding.slice(-1)==="%"&&(xt*=Qe/100),ct=Math.ceil((Qe-xt)/Te.slidesToShow)}var un=Ye&&ue(Ye.querySelector('[data-index="0"]')),Vn=un*Te.slidesToShow,In=Te.currentSlide===void 0?Te.initialSlide:Te.currentSlide;Te.rtl&&Te.currentSlide===void 0&&(In=Ne-1-Te.initialSlide);var Un=Te.lazyLoadedList||[],kn=ie(R(R({},Te),{},{currentSlide:In,lazyLoadedList:Un}));Un=Un.concat(kn);var Ln={slideCount:Ne,slideWidth:ct,listWidth:Qe,trackWidth:Ze,currentSlide:In,slideHeight:un,listHeight:Vn,lazyLoadedList:Un};return Te.autoplaying===null&&Te.autoplay&&(Ln.autoplaying="playing"),Ln},innerSliderUtils.slideHandler=function(Te){var Ne=Te.waitForAnimate,Ye=Te.animating,Qe=Te.fade,qe=Te.infinite,Ze=Te.index,ct=Te.slideCount,xt=Te.lazyLoad,un=Te.currentSlide,Vn=Te.centerMode,In=Te.slidesToScroll,Un=Te.slidesToShow,kn=Te.useCSS,Ln=Te.lazyLoadedList;if(Ne&&Ye)return{};var Ke=Ze,Qn,yn,kt,cn={},Mn={},Qt=qe?Ze:Q(Ze,0,ct-1);if(Qe){if(!qe&&(Ze<0||Ze>=ct))return{};Ze<0?Ke=Ze+ct:Ze>=ct&&(Ke=Ze-ct),xt&&Ln.indexOf(Ke)<0&&(Ln=Ln.concat(Ke)),cn={animating:!0,currentSlide:Ke,lazyLoadedList:Ln,targetSlide:Ke},Mn={animating:!1,targetSlide:Ke}}else Qn=Ke,Ke<0?(Qn=Ke+ct,qe?ct%In!==0&&(Qn=ct-ct%In):Qn=0):!ve(Te)&&Ke>un?Ke=Qn=un:Vn&&Ke>=ct?(Ke=qe?ct:ct-1,Qn=qe?0:ct-1):Ke>=ct&&(Qn=Ke-ct,qe?ct%In!==0&&(Qn=0):Qn=ct-Un),!qe&&Ke+Un>=ct&&(Qn=ct-Un),yn=de(R(R({},Te),{},{slideIndex:Ke})),kt=de(R(R({},Te),{},{slideIndex:Qn})),qe||(yn===kt&&(Ke=Qn),yn=kt),xt&&(Ln=Ln.concat(ie(R(R({},Te),{},{currentSlide:Ke})))),kn?(cn={animating:!0,currentSlide:Qn,trackStyle:ye(R(R({},Te),{},{left:yn})),lazyLoadedList:Ln,targetSlide:Qt},Mn={animating:!1,currentSlide:Qn,trackStyle:Ee(R(R({},Te),{},{left:kt})),swipeLeft:null,targetSlide:Qt}):cn={currentSlide:Qn,trackStyle:Ee(R(R({},Te),{},{left:kt})),lazyLoadedList:Ln,targetSlide:Qt};return{state:cn,nextState:Mn}},innerSliderUtils.changeSlide=function(Te,Ne){var Ye,Qe,qe,Ze,ct,xt=Te.slidesToScroll,un=Te.slidesToShow,Vn=Te.slideCount,In=Te.currentSlide,Un=Te.targetSlide,kn=Te.lazyLoad,Ln=Te.infinite;if(Ze=Vn%xt!==0,Ye=Ze?0:(Vn-In)%xt,Ne.message==="previous")qe=Ye===0?xt:un-Ye,ct=In-qe,kn&&!Ln&&(Qe=In-qe,ct=Qe===-1?Vn-1:Qe),Ln||(ct=Un-xt);else if(Ne.message==="next")qe=Ye===0?xt:Ye,ct=In+qe,kn&&!Ln&&(ct=(In+xt)%Vn+Ye),Ln||(ct=Un+xt);else if(Ne.message==="dots")ct=Ne.index*Ne.slidesToScroll;else if(Ne.message==="children"){if(ct=Ne.index,Ln){var Ke=Ue(R(R({},Te),{},{targetSlide:ct}));ct>Ne.currentSlide&&Ke==="left"?ct=ct-Vn:ct<Ne.currentSlide&&Ke==="right"&&(ct=ct+Vn)}}else Ne.message==="index"&&(ct=Number(Ne.index));return ct},innerSliderUtils.keyHandler=function(Te,Ne,Ye){return Te.target.tagName.match("TEXTAREA|INPUT|SELECT")||!Ne?"":Te.keyCode===37?Ye?"next":"previous":Te.keyCode===39?Ye?"previous":"next":""},innerSliderUtils.swipeStart=function(Te,Ne,Ye){return Te.target.tagName==="IMG"&&ee(Te),!Ne||!Ye&&Te.type.indexOf("mouse")!==-1?"":{dragging:!0,touchObject:{startX:Te.touches?Te.touches[0].pageX:Te.clientX,startY:Te.touches?Te.touches[0].pageY:Te.clientY,curX:Te.touches?Te.touches[0].pageX:Te.clientX,curY:Te.touches?Te.touches[0].pageY:Te.clientY}}},innerSliderUtils.swipeMove=function(Te,Ne){var Ye=Ne.scrolling,Qe=Ne.animating,qe=Ne.vertical,Ze=Ne.swipeToSlide,ct=Ne.verticalSwiping,xt=Ne.rtl,un=Ne.currentSlide,Vn=Ne.edgeFriction,In=Ne.edgeDragged,Un=Ne.onEdge,kn=Ne.swiped,Ln=Ne.swiping,Ke=Ne.slideCount,Qn=Ne.slidesToScroll,yn=Ne.infinite,kt=Ne.touchObject,cn=Ne.swipeEvent,Mn=Ne.listHeight,Qt=Ne.listWidth;if(!Ye){if(Qe)return ee(Te);qe&&Ze&&ct&&ee(Te);var He,ze={},Mt=de(Ne);kt.curX=Te.touches?Te.touches[0].pageX:Te.clientX,kt.curY=Te.touches?Te.touches[0].pageY:Te.clientY,kt.swipeLength=Math.round(Math.sqrt(Math.pow(kt.curX-kt.startX,2)));var hn=Math.round(Math.sqrt(Math.pow(kt.curY-kt.startY,2)));if(!ct&&!Ln&&hn>10)return{scrolling:!0};ct&&(kt.swipeLength=hn);var En=(xt?-1:1)*(kt.curX>kt.startX?1:-1);ct&&(En=kt.curY>kt.startY?1:-1);var an=Math.ceil(Ke/Qn),Cn=ge(Ne.touchObject,ct),Pn=kt.swipeLength;return yn||(un===0&&(Cn==="right"||Cn==="down")||un+1>=an&&(Cn==="left"||Cn==="up")||!ve(Ne)&&(Cn==="left"||Cn==="up"))&&(Pn=kt.swipeLength*Vn,In===!1&&Un&&(Un(Cn),ze.edgeDragged=!0)),!kn&&cn&&(cn(Cn),ze.swiped=!0),qe?He=Mt+Pn*(Mn/Qt)*En:xt?He=Mt-Pn*En:He=Mt+Pn*En,ct&&(He=Mt+Pn*En),ze=R(R({},ze),{},{touchObject:kt,swipeLeft:He,trackStyle:Ee(R(R({},Ne),{},{left:He}))}),Math.abs(kt.curX-kt.startX)<Math.abs(kt.curY-kt.startY)*.8||kt.swipeLength>10&&(ze.swiping=!0,ee(Te)),ze}},innerSliderUtils.swipeEnd=function(Te,Ne){var Ye=Ne.dragging,Qe=Ne.swipe,qe=Ne.touchObject,Ze=Ne.listWidth,ct=Ne.touchThreshold,xt=Ne.verticalSwiping,un=Ne.listHeight,Vn=Ne.swipeToSlide,In=Ne.scrolling,Un=Ne.onSwipe,kn=Ne.targetSlide,Ln=Ne.currentSlide,Ke=Ne.infinite;if(!Ye)return Qe&&ee(Te),{};var Qn=xt?un/ct:Ze/ct,yn=ge(qe,xt),kt={dragging:!1,edgeDragged:!1,scrolling:!1,swiping:!1,swiped:!1,swipeLeft:null,touchObject:{}};if(In||!qe.swipeLength)return kt;if(qe.swipeLength>Qn){ee(Te),Un&&Un(yn);var cn,Mn,Qt=Ke?Ln:kn;switch(yn){case"left":case"up":Mn=Qt+Re(Ne),cn=Vn?be(Ne,Mn):Mn,kt.currentDirection=0;break;case"right":case"down":Mn=Qt-Re(Ne),cn=Vn?be(Ne,Mn):Mn,kt.currentDirection=1;break;default:cn=Qt}kt.triggerSlideHandler=cn}else{var He=de(Ne);kt.trackStyle=ye(R(R({},Ne),{},{left:He}))}return kt};var _e=innerSliderUtils.getNavigableIndexes=function(Te){for(var Ne=Te.infinite?Te.slideCount*2:Te.slideCount,Ye=Te.infinite?Te.slidesToShow*-1:0,Qe=Te.infinite?Te.slidesToShow*-1:0,qe=[];Ye<Ne;)qe.push(Ye),Ye=Qe+Te.slidesToScroll,Qe+=Math.min(Te.slidesToScroll,Te.slidesToShow);return qe},be=innerSliderUtils.checkNavigable=function(Te,Ne){var Ye=_e(Te),Qe=0;if(Ne>Ye[Ye.length-1])Ne=Ye[Ye.length-1];else for(var qe in Ye){if(Ne<Ye[qe]){Ne=Qe;break}Qe=Ye[qe]}return Ne},Re=innerSliderUtils.getSlideCount=function(Te){var Ne=Te.centerMode?Te.slideWidth*Math.floor(Te.slidesToShow/2):0;if(Te.swipeToSlide){var Ye,Qe=Te.listRef,qe=Qe.querySelectorAll&&Qe.querySelectorAll(".slick-slide")||[];if(Array.from(qe).every(function(xt){if(Te.vertical){if(xt.offsetTop+ue(xt)/2>Te.swipeLeft*-1)return Ye=xt,!1}else if(xt.offsetLeft-Ne+oe(xt)/2>Te.swipeLeft*-1)return Ye=xt,!1;return!0}),!Ye)return 0;var Ze=Te.rtl===!0?Te.slideCount-Te.currentSlide:Te.currentSlide,ct=Math.abs(Ye.dataset.index-Ze)||1;return ct}else return Te.slidesToScroll},Se=innerSliderUtils.checkSpecKeys=function(Te,Ne){return Ne.reduce(function(Ye,Qe){return Ye&&Te.hasOwnProperty(Qe)},!0)?null:console.error("Keys Missing:",Te)},Ee=innerSliderUtils.getTrackCSS=function(Te){Se(Te,["left","variableWidth","slideCount","slidesToShow","slideWidth"]);var Ne,Ye,Qe=Te.slideCount+2*Te.slidesToShow;Te.vertical?Ye=Qe*Te.slideHeight:Ne=Pe(Te)*Te.slideWidth;var qe={opacity:1,transition:"",WebkitTransition:""};if(Te.useTransform){var Ze=Te.vertical?"translate3d(0px, "+Te.left+"px, 0px)":"translate3d("+Te.left+"px, 0px, 0px)",ct=Te.vertical?"translate3d(0px, "+Te.left+"px, 0px)":"translate3d("+Te.left+"px, 0px, 0px)",xt=Te.vertical?"translateY("+Te.left+"px)":"translateX("+Te.left+"px)";qe=R(R({},qe),{},{WebkitTransform:Ze,transform:ct,msTransform:xt})}else Te.vertical?qe.top=Te.left:qe.left=Te.left;return Te.fade&&(qe={opacity:1}),Ne&&(qe.width=Ne),Ye&&(qe.height=Ye),window&&!window.addEventListener&&window.attachEvent&&(Te.vertical?qe.marginTop=Te.left+"px":qe.marginLeft=Te.left+"px"),qe},ye=innerSliderUtils.getTrackAnimateCSS=function(Te){Se(Te,["left","variableWidth","slideCount","slidesToShow","slideWidth","speed","cssEase"]);var Ne=Ee(Te);return Te.useTransform?(Ne.WebkitTransition="-webkit-transform "+Te.speed+"ms "+Te.cssEase,Ne.transition="transform "+Te.speed+"ms "+Te.cssEase):Te.vertical?Ne.transition="top "+Te.speed+"ms "+Te.cssEase:Ne.transition="left "+Te.speed+"ms "+Te.cssEase,Ne},de=innerSliderUtils.getTrackLeft=function(Te){if(Te.unslick)return 0;Se(Te,["slideIndex","trackRef","infinite","centerMode","slideCount","slidesToShow","slidesToScroll","slideWidth","listWidth","variableWidth","slideHeight"]);var Ne=Te.slideIndex,Ye=Te.trackRef,Qe=Te.infinite,qe=Te.centerMode,Ze=Te.slideCount,ct=Te.slidesToShow,xt=Te.slidesToScroll,un=Te.slideWidth,Vn=Te.listWidth,In=Te.variableWidth,Un=Te.slideHeight,kn=Te.fade,Ln=Te.vertical,Ke=0,Qn,yn,kt=0;if(kn||Te.slideCount===1)return 0;var cn=0;if(Qe?(cn=-Me(Te),Ze%xt!==0&&Ne+xt>Ze&&(cn=-(Ne>Ze?ct-(Ne-Ze):Ze%xt)),qe&&(cn+=parseInt(ct/2))):(Ze%xt!==0&&Ne+xt>Ze&&(cn=ct-Ze%xt),qe&&(cn=parseInt(ct/2))),Ke=cn*un,kt=cn*Un,Ln?Qn=Ne*Un*-1+kt:Qn=Ne*un*-1+Ke,In===!0){var Mn,Qt=Ye&&Ye.node;if(Mn=Ne+Me(Te),yn=Qt&&Qt.childNodes[Mn],Qn=yn?yn.offsetLeft*-1:0,qe===!0){Mn=Qe?Ne+Me(Te):Ne,yn=Qt&&Qt.children[Mn],Qn=0;for(var He=0;He<Mn;He++)Qn-=Qt&&Qt.children[He]&&Qt.children[He].offsetWidth;Qn-=parseInt(Te.centerPadding),Qn+=yn&&(Vn-yn.offsetWidth)/2}}return Qn},Me=innerSliderUtils.getPreClones=function(Te){return Te.unslick||!Te.infinite?0:Te.variableWidth?Te.slideCount:Te.slidesToShow+(Te.centerMode?1:0)},Le=innerSliderUtils.getPostClones=function(Te){return Te.unslick||!Te.infinite?0:Te.slideCount},Pe=innerSliderUtils.getTotalSlides=function(Te){return Te.slideCount===1?1:Me(Te)+Te.slideCount+Le(Te)},Ue=innerSliderUtils.siblingDirection=function(Te){return Te.targetSlide>Te.currentSlide?Te.targetSlide>Te.currentSlide+$e(Te)?"left":"right":Te.targetSlide<Te.currentSlide-Ve(Te)?"right":"left"},$e=innerSliderUtils.slidesOnRight=function(Te){var Ne=Te.slidesToShow,Ye=Te.centerMode,Qe=Te.rtl,qe=Te.centerPadding;if(Ye){var Ze=(Ne-1)/2+1;return parseInt(qe)>0&&(Ze+=1),Qe&&Ne%2===0&&(Ze+=1),Ze}return Qe?0:Ne-1},Ve=innerSliderUtils.slidesOnLeft=function(Te){var Ne=Te.slidesToShow,Ye=Te.centerMode,Qe=Te.rtl,qe=Te.centerPadding;if(Ye){var Ze=(Ne-1)/2+1;return parseInt(qe)>0&&(Ze+=1),!Qe&&Ne%2===0&&(Ze+=1),Ze}return Qe?Ne-1:0};innerSliderUtils.canUseDOM=function(){return!!(typeof window<"u"&&window.document&&window.document.createElement)};var Ce=innerSliderUtils.validSettings=Object.keys(e.default);function De(Oe){return Ce.reduce(function(Te,Ne){return Oe.hasOwnProperty(Ne)&&(Te[Ne]=Oe[Ne]),Te},{})}return innerSliderUtils}var track={},hasRequiredTrack;function requireTrack(){if(hasRequiredTrack)return track;hasRequiredTrack=1,Object.defineProperty(track,"__esModule",{value:!0}),track.Track=void 0;var r=o(requireReact()),e=o(requireClassnames()),t=requireInnerSliderUtils();function o(ye){return ye&&ye.__esModule?ye:{default:ye}}function y(ye){"@babel/helpers - typeof";return y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(de){return typeof de}:function(de){return de&&typeof Symbol=="function"&&de.constructor===Symbol&&de!==Symbol.prototype?"symbol":typeof de},y(ye)}function R(){return R=Object.assign?Object.assign.bind():function(ye){for(var de=1;de<arguments.length;de++){var Me=arguments[de];for(var Le in Me)Object.prototype.hasOwnProperty.call(Me,Le)&&(ye[Le]=Me[Le])}return ye},R.apply(this,arguments)}function G(ye,de){if(!(ye instanceof de))throw new TypeError("Cannot call a class as a function")}function K(ye,de){for(var Me=0;Me<de.length;Me++){var Le=de[Me];Le.enumerable=Le.enumerable||!1,Le.configurable=!0,"value"in Le&&(Le.writable=!0),Object.defineProperty(ye,ve(Le.key),Le)}}function Y(ye,de,Me){return de&&K(ye.prototype,de),Object.defineProperty(ye,"prototype",{writable:!1}),ye}function Q(ye,de){if(typeof de!="function"&&de!==null)throw new TypeError("Super expression must either be null or a function");ye.prototype=Object.create(de&&de.prototype,{constructor:{value:ye,writable:!0,configurable:!0}}),Object.defineProperty(ye,"prototype",{writable:!1}),de&&ee(ye,de)}function ee(ye,de){return ee=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Le,Pe){return Le.__proto__=Pe,Le},ee(ye,de)}function ie(ye){var de=le();return function(){var Le=ce(ye),Pe;if(de){var Ue=ce(this).constructor;Pe=Reflect.construct(Le,arguments,Ue)}else Pe=Le.apply(this,arguments);return re(this,Pe)}}function re(ye,de){if(de&&(y(de)==="object"||typeof de=="function"))return de;if(de!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return se(ye)}function se(ye){if(ye===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ye}function le(){try{var ye=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(le=function(){return!!ye})()}function ce(ye){return ce=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(Me){return Me.__proto__||Object.getPrototypeOf(Me)},ce(ye)}function oe(ye,de){var Me=Object.keys(ye);if(Object.getOwnPropertySymbols){var Le=Object.getOwnPropertySymbols(ye);de&&(Le=Le.filter(function(Pe){return Object.getOwnPropertyDescriptor(ye,Pe).enumerable})),Me.push.apply(Me,Le)}return Me}function ue(ye){for(var de=1;de<arguments.length;de++){var Me=arguments[de]!=null?arguments[de]:{};de%2?oe(Object(Me),!0).forEach(function(Le){ge(ye,Le,Me[Le])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ye,Object.getOwnPropertyDescriptors(Me)):oe(Object(Me)).forEach(function(Le){Object.defineProperty(ye,Le,Object.getOwnPropertyDescriptor(Me,Le))})}return ye}function ge(ye,de,Me){return de=ve(de),de in ye?Object.defineProperty(ye,de,{value:Me,enumerable:!0,configurable:!0,writable:!0}):ye[de]=Me,ye}function ve(ye){var de=_e(ye,"string");return y(de)=="symbol"?de:String(de)}function _e(ye,de){if(y(ye)!="object"||!ye)return ye;var Me=ye[Symbol.toPrimitive];if(Me!==void 0){var Le=Me.call(ye,de);if(y(Le)!="object")return Le;throw new TypeError("@@toPrimitive must return a primitive value.")}return(de==="string"?String:Number)(ye)}var be=function(de){var Me,Le,Pe,Ue,$e;de.rtl?$e=de.slideCount-1-de.index:$e=de.index,Pe=$e<0||$e>=de.slideCount,de.centerMode?(Ue=Math.floor(de.slidesToShow/2),Le=($e-de.currentSlide)%de.slideCount===0,$e>de.currentSlide-Ue-1&&$e<=de.currentSlide+Ue&&(Me=!0)):Me=de.currentSlide<=$e&&$e<de.currentSlide+de.slidesToShow;var Ve;de.targetSlide<0?Ve=de.targetSlide+de.slideCount:de.targetSlide>=de.slideCount?Ve=de.targetSlide-de.slideCount:Ve=de.targetSlide;var Ce=$e===Ve;return{"slick-slide":!0,"slick-active":Me,"slick-center":Le,"slick-cloned":Pe,"slick-current":Ce}},Re=function(de){var Me={};return(de.variableWidth===void 0||de.variableWidth===!1)&&(Me.width=de.slideWidth),de.fade&&(Me.position="relative",de.vertical?Me.top=-de.index*parseInt(de.slideHeight):Me.left=-de.index*parseInt(de.slideWidth),Me.opacity=de.currentSlide===de.index?1:0,Me.zIndex=de.currentSlide===de.index?999:998,de.useCSS&&(Me.transition="opacity "+de.speed+"ms "+de.cssEase+", visibility "+de.speed+"ms "+de.cssEase)),Me},Se=function(de,Me){return de.key||Me},Ee=function(de){var Me,Le=[],Pe=[],Ue=[],$e=r.default.Children.count(de.children),Ve=(0,t.lazyStartIndex)(de),Ce=(0,t.lazyEndIndex)(de);return r.default.Children.forEach(de.children,function(De,Oe){var Te,Ne={message:"children",index:Oe,slidesToScroll:de.slidesToScroll,currentSlide:de.currentSlide};!de.lazyLoad||de.lazyLoad&&de.lazyLoadedList.indexOf(Oe)>=0?Te=De:Te=r.default.createElement("div",null);var Ye=Re(ue(ue({},de),{},{index:Oe})),Qe=Te.props.className||"",qe=be(ue(ue({},de),{},{index:Oe}));if(Le.push(r.default.cloneElement(Te,{key:"original"+Se(Te,Oe),"data-index":Oe,className:(0,e.default)(qe,Qe),tabIndex:"-1","aria-hidden":!qe["slick-active"],style:ue(ue({outline:"none"},Te.props.style||{}),Ye),onClick:function(xt){Te.props&&Te.props.onClick&&Te.props.onClick(xt),de.focusOnSelect&&de.focusOnSelect(Ne)}})),de.infinite&&de.fade===!1){var Ze=$e-Oe;Ze<=(0,t.getPreClones)(de)&&(Me=-Ze,Me>=Ve&&(Te=De),qe=be(ue(ue({},de),{},{index:Me})),Pe.push(r.default.cloneElement(Te,{key:"precloned"+Se(Te,Me),"data-index":Me,tabIndex:"-1",className:(0,e.default)(qe,Qe),"aria-hidden":!qe["slick-active"],style:ue(ue({},Te.props.style||{}),Ye),onClick:function(xt){Te.props&&Te.props.onClick&&Te.props.onClick(xt),de.focusOnSelect&&de.focusOnSelect(Ne)}}))),Me=$e+Oe,Me<Ce&&(Te=De),qe=be(ue(ue({},de),{},{index:Me})),Ue.push(r.default.cloneElement(Te,{key:"postcloned"+Se(Te,Me),"data-index":Me,tabIndex:"-1",className:(0,e.default)(qe,Qe),"aria-hidden":!qe["slick-active"],style:ue(ue({},Te.props.style||{}),Ye),onClick:function(xt){Te.props&&Te.props.onClick&&Te.props.onClick(xt),de.focusOnSelect&&de.focusOnSelect(Ne)}}))}}),de.rtl?Pe.concat(Le,Ue).reverse():Pe.concat(Le,Ue)};return track.Track=function(ye){Q(Me,ye);var de=ie(Me);function Me(){var Le;G(this,Me);for(var Pe=arguments.length,Ue=new Array(Pe),$e=0;$e<Pe;$e++)Ue[$e]=arguments[$e];return Le=de.call.apply(de,[this].concat(Ue)),ge(se(Le),"node",null),ge(se(Le),"handleRef",function(Ve){Le.node=Ve}),Le}return Y(Me,[{key:"render",value:function(){var Pe=Ee(this.props),Ue=this.props,$e=Ue.onMouseEnter,Ve=Ue.onMouseOver,Ce=Ue.onMouseLeave,De={onMouseEnter:$e,onMouseOver:Ve,onMouseLeave:Ce};return r.default.createElement("div",R({ref:this.handleRef,className:"slick-track",style:this.props.trackStyle},De),Pe)}}]),Me}(r.default.PureComponent),track}var dots={},hasRequiredDots;function requireDots(){if(hasRequiredDots)return dots;hasRequiredDots=1;function r(be){"@babel/helpers - typeof";return r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Re){return typeof Re}:function(Re){return Re&&typeof Symbol=="function"&&Re.constructor===Symbol&&Re!==Symbol.prototype?"symbol":typeof Re},r(be)}Object.defineProperty(dots,"__esModule",{value:!0}),dots.Dots=void 0;var e=y(requireReact()),t=y(requireClassnames()),o=requireInnerSliderUtils();function y(be){return be&&be.__esModule?be:{default:be}}function R(be,Re){var Se=Object.keys(be);if(Object.getOwnPropertySymbols){var Ee=Object.getOwnPropertySymbols(be);Re&&(Ee=Ee.filter(function(ye){return Object.getOwnPropertyDescriptor(be,ye).enumerable})),Se.push.apply(Se,Ee)}return Se}function G(be){for(var Re=1;Re<arguments.length;Re++){var Se=arguments[Re]!=null?arguments[Re]:{};Re%2?R(Object(Se),!0).forEach(function(Ee){K(be,Ee,Se[Ee])}):Object.getOwnPropertyDescriptors?Object.defineProperties(be,Object.getOwnPropertyDescriptors(Se)):R(Object(Se)).forEach(function(Ee){Object.defineProperty(be,Ee,Object.getOwnPropertyDescriptor(Se,Ee))})}return be}function K(be,Re,Se){return Re=ie(Re),Re in be?Object.defineProperty(be,Re,{value:Se,enumerable:!0,configurable:!0,writable:!0}):be[Re]=Se,be}function Y(be,Re){if(!(be instanceof Re))throw new TypeError("Cannot call a class as a function")}function Q(be,Re){for(var Se=0;Se<Re.length;Se++){var Ee=Re[Se];Ee.enumerable=Ee.enumerable||!1,Ee.configurable=!0,"value"in Ee&&(Ee.writable=!0),Object.defineProperty(be,ie(Ee.key),Ee)}}function ee(be,Re,Se){return Re&&Q(be.prototype,Re),Object.defineProperty(be,"prototype",{writable:!1}),be}function ie(be){var Re=re(be,"string");return r(Re)=="symbol"?Re:String(Re)}function re(be,Re){if(r(be)!="object"||!be)return be;var Se=be[Symbol.toPrimitive];if(Se!==void 0){var Ee=Se.call(be,Re);if(r(Ee)!="object")return Ee;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(be)}function se(be,Re){if(typeof Re!="function"&&Re!==null)throw new TypeError("Super expression must either be null or a function");be.prototype=Object.create(Re&&Re.prototype,{constructor:{value:be,writable:!0,configurable:!0}}),Object.defineProperty(be,"prototype",{writable:!1}),Re&&le(be,Re)}function le(be,Re){return le=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Ee,ye){return Ee.__proto__=ye,Ee},le(be,Re)}function ce(be){var Re=ge();return function(){var Ee=ve(be),ye;if(Re){var de=ve(this).constructor;ye=Reflect.construct(Ee,arguments,de)}else ye=Ee.apply(this,arguments);return oe(this,ye)}}function oe(be,Re){if(Re&&(r(Re)==="object"||typeof Re=="function"))return Re;if(Re!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ue(be)}function ue(be){if(be===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return be}function ge(){try{var be=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ge=function(){return!!be})()}function ve(be){return ve=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(Se){return Se.__proto__||Object.getPrototypeOf(Se)},ve(be)}var _e=function(Re){var Se;return Re.infinite?Se=Math.ceil(Re.slideCount/Re.slidesToScroll):Se=Math.ceil((Re.slideCount-Re.slidesToShow)/Re.slidesToScroll)+1,Se};return dots.Dots=function(be){se(Se,be);var Re=ce(Se);function Se(){return Y(this,Se),Re.apply(this,arguments)}return ee(Se,[{key:"clickHandler",value:function(ye,de){de.preventDefault(),this.props.clickHandler(ye)}},{key:"render",value:function(){for(var ye=this.props,de=ye.onMouseEnter,Me=ye.onMouseOver,Le=ye.onMouseLeave,Pe=ye.infinite,Ue=ye.slidesToScroll,$e=ye.slidesToShow,Ve=ye.slideCount,Ce=ye.currentSlide,De=_e({slideCount:Ve,slidesToScroll:Ue,slidesToShow:$e,infinite:Pe}),Oe={onMouseEnter:de,onMouseOver:Me,onMouseLeave:Le},Te=[],Ne=0;Ne<De;Ne++){var Ye=(Ne+1)*Ue-1,Qe=Pe?Ye:(0,o.clamp)(Ye,0,Ve-1),qe=Qe-(Ue-1),Ze=Pe?qe:(0,o.clamp)(qe,0,Ve-1),ct=(0,t.default)({"slick-active":Pe?Ce>=Ze&&Ce<=Qe:Ce===Ze}),xt={message:"dots",index:Ne,slidesToScroll:Ue,currentSlide:Ce},un=this.clickHandler.bind(this,xt);Te=Te.concat(e.default.createElement("li",{key:Ne,className:ct},e.default.cloneElement(this.props.customPaging(Ne),{onClick:un})))}return e.default.cloneElement(this.props.appendDots(Te),G({className:this.props.dotsClass},Oe))}}]),Se}(e.default.PureComponent),dots}var arrows={},hasRequiredArrows;function requireArrows(){if(hasRequiredArrows)return arrows;hasRequiredArrows=1;function r(be){"@babel/helpers - typeof";return r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Re){return typeof Re}:function(Re){return Re&&typeof Symbol=="function"&&Re.constructor===Symbol&&Re!==Symbol.prototype?"symbol":typeof Re},r(be)}Object.defineProperty(arrows,"__esModule",{value:!0}),arrows.PrevArrow=arrows.NextArrow=void 0;var e=y(requireReact()),t=y(requireClassnames()),o=requireInnerSliderUtils();function y(be){return be&&be.__esModule?be:{default:be}}function R(){return R=Object.assign?Object.assign.bind():function(be){for(var Re=1;Re<arguments.length;Re++){var Se=arguments[Re];for(var Ee in Se)Object.prototype.hasOwnProperty.call(Se,Ee)&&(be[Ee]=Se[Ee])}return be},R.apply(this,arguments)}function G(be,Re){var Se=Object.keys(be);if(Object.getOwnPropertySymbols){var Ee=Object.getOwnPropertySymbols(be);Re&&(Ee=Ee.filter(function(ye){return Object.getOwnPropertyDescriptor(be,ye).enumerable})),Se.push.apply(Se,Ee)}return Se}function K(be){for(var Re=1;Re<arguments.length;Re++){var Se=arguments[Re]!=null?arguments[Re]:{};Re%2?G(Object(Se),!0).forEach(function(Ee){Y(be,Ee,Se[Ee])}):Object.getOwnPropertyDescriptors?Object.defineProperties(be,Object.getOwnPropertyDescriptors(Se)):G(Object(Se)).forEach(function(Ee){Object.defineProperty(be,Ee,Object.getOwnPropertyDescriptor(Se,Ee))})}return be}function Y(be,Re,Se){return Re=re(Re),Re in be?Object.defineProperty(be,Re,{value:Se,enumerable:!0,configurable:!0,writable:!0}):be[Re]=Se,be}function Q(be,Re){if(!(be instanceof Re))throw new TypeError("Cannot call a class as a function")}function ee(be,Re){for(var Se=0;Se<Re.length;Se++){var Ee=Re[Se];Ee.enumerable=Ee.enumerable||!1,Ee.configurable=!0,"value"in Ee&&(Ee.writable=!0),Object.defineProperty(be,re(Ee.key),Ee)}}function ie(be,Re,Se){return Re&&ee(be.prototype,Re),Object.defineProperty(be,"prototype",{writable:!1}),be}function re(be){var Re=se(be,"string");return r(Re)=="symbol"?Re:String(Re)}function se(be,Re){if(r(be)!="object"||!be)return be;var Se=be[Symbol.toPrimitive];if(Se!==void 0){var Ee=Se.call(be,Re);if(r(Ee)!="object")return Ee;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(be)}function le(be,Re){if(typeof Re!="function"&&Re!==null)throw new TypeError("Super expression must either be null or a function");be.prototype=Object.create(Re&&Re.prototype,{constructor:{value:be,writable:!0,configurable:!0}}),Object.defineProperty(be,"prototype",{writable:!1}),Re&&ce(be,Re)}function ce(be,Re){return ce=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Ee,ye){return Ee.__proto__=ye,Ee},ce(be,Re)}function oe(be){var Re=ve();return function(){var Ee=_e(be),ye;if(Re){var de=_e(this).constructor;ye=Reflect.construct(Ee,arguments,de)}else ye=Ee.apply(this,arguments);return ue(this,ye)}}function ue(be,Re){if(Re&&(r(Re)==="object"||typeof Re=="function"))return Re;if(Re!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ge(be)}function ge(be){if(be===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return be}function ve(){try{var be=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ve=function(){return!!be})()}function _e(be){return _e=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(Se){return Se.__proto__||Object.getPrototypeOf(Se)},_e(be)}return arrows.PrevArrow=function(be){le(Se,be);var Re=oe(Se);function Se(){return Q(this,Se),Re.apply(this,arguments)}return ie(Se,[{key:"clickHandler",value:function(ye,de){de&&de.preventDefault(),this.props.clickHandler(ye,de)}},{key:"render",value:function(){var ye={"slick-arrow":!0,"slick-prev":!0},de=this.clickHandler.bind(this,{message:"previous"});!this.props.infinite&&(this.props.currentSlide===0||this.props.slideCount<=this.props.slidesToShow)&&(ye["slick-disabled"]=!0,de=null);var Me={key:"0","data-role":"none",className:(0,t.default)(ye),style:{display:"block"},onClick:de},Le={currentSlide:this.props.currentSlide,slideCount:this.props.slideCount},Pe;return this.props.prevArrow?Pe=e.default.cloneElement(this.props.prevArrow,K(K({},Me),Le)):Pe=e.default.createElement("button",R({key:"0",type:"button"},Me)," ","Previous"),Pe}}]),Se}(e.default.PureComponent),arrows.NextArrow=function(be){le(Se,be);var Re=oe(Se);function Se(){return Q(this,Se),Re.apply(this,arguments)}return ie(Se,[{key:"clickHandler",value:function(ye,de){de&&de.preventDefault(),this.props.clickHandler(ye,de)}},{key:"render",value:function(){var ye={"slick-arrow":!0,"slick-next":!0},de=this.clickHandler.bind(this,{message:"next"});(0,o.canGoNext)(this.props)||(ye["slick-disabled"]=!0,de=null);var Me={key:"1","data-role":"none",className:(0,t.default)(ye),style:{display:"block"},onClick:de},Le={currentSlide:this.props.currentSlide,slideCount:this.props.slideCount},Pe;return this.props.nextArrow?Pe=e.default.cloneElement(this.props.nextArrow,K(K({},Me),Le)):Pe=e.default.createElement("button",R({key:"1",type:"button"},Me)," ","Next"),Pe}}]),Se}(e.default.PureComponent),arrows}var MapShim=function(){if(typeof Map<"u")return Map;function r(e,t){var o=-1;return e.some(function(y,R){return y[0]===t?(o=R,!0):!1}),o}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(t){var o=r(this.__entries__,t),y=this.__entries__[o];return y&&y[1]},e.prototype.set=function(t,o){var y=r(this.__entries__,t);~y?this.__entries__[y][1]=o:this.__entries__.push([t,o])},e.prototype.delete=function(t){var o=this.__entries__,y=r(o,t);~y&&o.splice(y,1)},e.prototype.has=function(t){return!!~r(this.__entries__,t)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(t,o){o===void 0&&(o=null);for(var y=0,R=this.__entries__;y<R.length;y++){var G=R[y];t.call(o,G[1],G[0])}},e}()}(),isBrowser$1=typeof window<"u"&&typeof document<"u"&&window.document===document,global$1=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),requestAnimationFrame$1=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(global$1):function(r){return setTimeout(function(){return r(Date.now())},1e3/60)}}(),trailingTimeout=2;function throttle(r,e){var t=!1,o=!1,y=0;function R(){t&&(t=!1,r()),o&&K()}function G(){requestAnimationFrame$1(R)}function K(){var Y=Date.now();if(t){if(Y-y<trailingTimeout)return;o=!0}else t=!0,o=!1,setTimeout(G,e);y=Y}return K}var REFRESH_DELAY=20,transitionKeys=["top","right","bottom","left","width","height","size","weight"],mutationObserverSupported=typeof MutationObserver<"u",ResizeObserverController=function(){function r(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=throttle(this.refresh.bind(this),REFRESH_DELAY)}return r.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},r.prototype.removeObserver=function(e){var t=this.observers_,o=t.indexOf(e);~o&&t.splice(o,1),!t.length&&this.connected_&&this.disconnect_()},r.prototype.refresh=function(){var e=this.updateObservers_();e&&this.refresh()},r.prototype.updateObservers_=function(){var e=this.observers_.filter(function(t){return t.gatherActive(),t.hasActive()});return e.forEach(function(t){return t.broadcastActive()}),e.length>0},r.prototype.connect_=function(){!isBrowser$1||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),mutationObserverSupported?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},r.prototype.disconnect_=function(){!isBrowser$1||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},r.prototype.onTransitionEnd_=function(e){var t=e.propertyName,o=t===void 0?"":t,y=transitionKeys.some(function(R){return!!~o.indexOf(R)});y&&this.refresh()},r.getInstance=function(){return this.instance_||(this.instance_=new r),this.instance_},r.instance_=null,r}(),defineConfigurable=function(r,e){for(var t=0,o=Object.keys(e);t<o.length;t++){var y=o[t];Object.defineProperty(r,y,{value:e[y],enumerable:!1,writable:!1,configurable:!0})}return r},getWindowOf=function(r){var e=r&&r.ownerDocument&&r.ownerDocument.defaultView;return e||global$1},emptyRect=createRectInit(0,0,0,0);function toFloat(r){return parseFloat(r)||0}function getBordersSize(r){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return e.reduce(function(o,y){var R=r["border-"+y+"-width"];return o+toFloat(R)},0)}function getPaddings(r){for(var e=["top","right","bottom","left"],t={},o=0,y=e;o<y.length;o++){var R=y[o],G=r["padding-"+R];t[R]=toFloat(G)}return t}function getSVGContentRect(r){var e=r.getBBox();return createRectInit(0,0,e.width,e.height)}function getHTMLElementContentRect(r){var e=r.clientWidth,t=r.clientHeight;if(!e&&!t)return emptyRect;var o=getWindowOf(r).getComputedStyle(r),y=getPaddings(o),R=y.left+y.right,G=y.top+y.bottom,K=toFloat(o.width),Y=toFloat(o.height);if(o.boxSizing==="border-box"&&(Math.round(K+R)!==e&&(K-=getBordersSize(o,"left","right")+R),Math.round(Y+G)!==t&&(Y-=getBordersSize(o,"top","bottom")+G)),!isDocumentElement(r)){var Q=Math.round(K+R)-e,ee=Math.round(Y+G)-t;Math.abs(Q)!==1&&(K-=Q),Math.abs(ee)!==1&&(Y-=ee)}return createRectInit(y.left,y.top,K,Y)}var isSVGGraphicsElement=function(){return typeof SVGGraphicsElement<"u"?function(r){return r instanceof getWindowOf(r).SVGGraphicsElement}:function(r){return r instanceof getWindowOf(r).SVGElement&&typeof r.getBBox=="function"}}();function isDocumentElement(r){return r===getWindowOf(r).document.documentElement}function getContentRect(r){return isBrowser$1?isSVGGraphicsElement(r)?getSVGContentRect(r):getHTMLElementContentRect(r):emptyRect}function createReadOnlyRect(r){var e=r.x,t=r.y,o=r.width,y=r.height,R=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,G=Object.create(R.prototype);return defineConfigurable(G,{x:e,y:t,width:o,height:y,top:t,right:e+o,bottom:y+t,left:e}),G}function createRectInit(r,e,t,o){return{x:r,y:e,width:t,height:o}}var ResizeObservation=function(){function r(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=createRectInit(0,0,0,0),this.target=e}return r.prototype.isActive=function(){var e=getContentRect(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},r.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},r}(),ResizeObserverEntry=function(){function r(e,t){var o=createReadOnlyRect(t);defineConfigurable(this,{target:e,contentRect:o})}return r}(),ResizeObserverSPI=function(){function r(e,t,o){if(this.activeObservations_=[],this.observations_=new MapShim,typeof e!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=o}return r.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(e instanceof getWindowOf(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new ResizeObservation(e)),this.controller_.addObserver(this),this.controller_.refresh())}},r.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(e instanceof getWindowOf(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},r.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},r.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach(function(t){t.isActive()&&e.activeObservations_.push(t)})},r.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map(function(o){return new ResizeObserverEntry(o.target,o.broadcastRect())});this.callback_.call(e,t,e),this.clearActive()}},r.prototype.clearActive=function(){this.activeObservations_.splice(0)},r.prototype.hasActive=function(){return this.activeObservations_.length>0},r}(),observers$1=typeof WeakMap<"u"?new WeakMap:new MapShim,ResizeObserver=function(){function r(e){if(!(this instanceof r))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var t=ResizeObserverController.getInstance(),o=new ResizeObserverSPI(e,t,this);observers$1.set(this,o)}return r}();["observe","unobserve","disconnect"].forEach(function(r){ResizeObserver.prototype[r]=function(){var e;return(e=observers$1.get(this))[r].apply(e,arguments)}});var index=function(){return typeof global$1.ResizeObserver<"u"?global$1.ResizeObserver:ResizeObserver}();const ResizeObserver_es=Object.freeze(Object.defineProperty({__proto__:null,default:index},Symbol.toStringTag,{value:"Module"})),require$$8=getAugmentedNamespace(ResizeObserver_es);var hasRequiredInnerSlider;function requireInnerSlider(){if(hasRequiredInnerSlider)return innerSlider;hasRequiredInnerSlider=1,Object.defineProperty(innerSlider,"__esModule",{value:!0}),innerSlider.InnerSlider=void 0;var r=Q(requireReact()),e=Q(requireInitialState()),t=Q(requireLodash_debounce()),o=Q(requireClassnames()),y=requireInnerSliderUtils(),R=requireTrack(),G=requireDots(),K=requireArrows(),Y=Q(require$$8);function Q(Pe){return Pe&&Pe.__esModule?Pe:{default:Pe}}function ee(Pe){"@babel/helpers - typeof";return ee=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Ue){return typeof Ue}:function(Ue){return Ue&&typeof Symbol=="function"&&Ue.constructor===Symbol&&Ue!==Symbol.prototype?"symbol":typeof Ue},ee(Pe)}function ie(){return ie=Object.assign?Object.assign.bind():function(Pe){for(var Ue=1;Ue<arguments.length;Ue++){var $e=arguments[Ue];for(var Ve in $e)Object.prototype.hasOwnProperty.call($e,Ve)&&(Pe[Ve]=$e[Ve])}return Pe},ie.apply(this,arguments)}function re(Pe,Ue){if(Pe==null)return{};var $e=se(Pe,Ue),Ve,Ce;if(Object.getOwnPropertySymbols){var De=Object.getOwnPropertySymbols(Pe);for(Ce=0;Ce<De.length;Ce++)Ve=De[Ce],!(Ue.indexOf(Ve)>=0)&&Object.prototype.propertyIsEnumerable.call(Pe,Ve)&&($e[Ve]=Pe[Ve])}return $e}function se(Pe,Ue){if(Pe==null)return{};var $e={},Ve=Object.keys(Pe),Ce,De;for(De=0;De<Ve.length;De++)Ce=Ve[De],!(Ue.indexOf(Ce)>=0)&&($e[Ce]=Pe[Ce]);return $e}function le(Pe,Ue){var $e=Object.keys(Pe);if(Object.getOwnPropertySymbols){var Ve=Object.getOwnPropertySymbols(Pe);Ue&&(Ve=Ve.filter(function(Ce){return Object.getOwnPropertyDescriptor(Pe,Ce).enumerable})),$e.push.apply($e,Ve)}return $e}function ce(Pe){for(var Ue=1;Ue<arguments.length;Ue++){var $e=arguments[Ue]!=null?arguments[Ue]:{};Ue%2?le(Object($e),!0).forEach(function(Ve){de(Pe,Ve,$e[Ve])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Pe,Object.getOwnPropertyDescriptors($e)):le(Object($e)).forEach(function(Ve){Object.defineProperty(Pe,Ve,Object.getOwnPropertyDescriptor($e,Ve))})}return Pe}function oe(Pe,Ue){if(!(Pe instanceof Ue))throw new TypeError("Cannot call a class as a function")}function ue(Pe,Ue){for(var $e=0;$e<Ue.length;$e++){var Ve=Ue[$e];Ve.enumerable=Ve.enumerable||!1,Ve.configurable=!0,"value"in Ve&&(Ve.writable=!0),Object.defineProperty(Pe,Me(Ve.key),Ve)}}function ge(Pe,Ue,$e){return Ue&&ue(Pe.prototype,Ue),Object.defineProperty(Pe,"prototype",{writable:!1}),Pe}function ve(Pe,Ue){if(typeof Ue!="function"&&Ue!==null)throw new TypeError("Super expression must either be null or a function");Pe.prototype=Object.create(Ue&&Ue.prototype,{constructor:{value:Pe,writable:!0,configurable:!0}}),Object.defineProperty(Pe,"prototype",{writable:!1}),Ue&&_e(Pe,Ue)}function _e(Pe,Ue){return _e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Ve,Ce){return Ve.__proto__=Ce,Ve},_e(Pe,Ue)}function be(Pe){var Ue=Ee();return function(){var Ve=ye(Pe),Ce;if(Ue){var De=ye(this).constructor;Ce=Reflect.construct(Ve,arguments,De)}else Ce=Ve.apply(this,arguments);return Re(this,Ce)}}function Re(Pe,Ue){if(Ue&&(ee(Ue)==="object"||typeof Ue=="function"))return Ue;if(Ue!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Se(Pe)}function Se(Pe){if(Pe===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Pe}function Ee(){try{var Pe=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ee=function(){return!!Pe})()}function ye(Pe){return ye=Object.setPrototypeOf?Object.getPrototypeOf.bind():function($e){return $e.__proto__||Object.getPrototypeOf($e)},ye(Pe)}function de(Pe,Ue,$e){return Ue=Me(Ue),Ue in Pe?Object.defineProperty(Pe,Ue,{value:$e,enumerable:!0,configurable:!0,writable:!0}):Pe[Ue]=$e,Pe}function Me(Pe){var Ue=Le(Pe,"string");return ee(Ue)=="symbol"?Ue:String(Ue)}function Le(Pe,Ue){if(ee(Pe)!="object"||!Pe)return Pe;var $e=Pe[Symbol.toPrimitive];if($e!==void 0){var Ve=$e.call(Pe,Ue);if(ee(Ve)!="object")return Ve;throw new TypeError("@@toPrimitive must return a primitive value.")}return(Ue==="string"?String:Number)(Pe)}return innerSlider.InnerSlider=function(Pe){ve($e,Pe);var Ue=be($e);function $e(Ve){var Ce;oe(this,$e),Ce=Ue.call(this,Ve),de(Se(Ce),"listRefHandler",function(Oe){return Ce.list=Oe}),de(Se(Ce),"trackRefHandler",function(Oe){return Ce.track=Oe}),de(Se(Ce),"adaptHeight",function(){if(Ce.props.adaptiveHeight&&Ce.list){var Oe=Ce.list.querySelector('[data-index="'.concat(Ce.state.currentSlide,'"]'));Ce.list.style.height=(0,y.getHeight)(Oe)+"px"}}),de(Se(Ce),"componentDidMount",function(){if(Ce.props.onInit&&Ce.props.onInit(),Ce.props.lazyLoad){var Oe=(0,y.getOnDemandLazySlides)(ce(ce({},Ce.props),Ce.state));Oe.length>0&&(Ce.setState(function(Ne){return{lazyLoadedList:Ne.lazyLoadedList.concat(Oe)}}),Ce.props.onLazyLoad&&Ce.props.onLazyLoad(Oe))}var Te=ce({listRef:Ce.list,trackRef:Ce.track},Ce.props);Ce.updateState(Te,!0,function(){Ce.adaptHeight(),Ce.props.autoplay&&Ce.autoPlay("update")}),Ce.props.lazyLoad==="progressive"&&(Ce.lazyLoadTimer=setInterval(Ce.progressiveLazyLoad,1e3)),Ce.ro=new Y.default(function(){Ce.state.animating?(Ce.onWindowResized(!1),Ce.callbackTimers.push(setTimeout(function(){return Ce.onWindowResized()},Ce.props.speed))):Ce.onWindowResized()}),Ce.ro.observe(Ce.list),document.querySelectorAll&&Array.prototype.forEach.call(document.querySelectorAll(".slick-slide"),function(Ne){Ne.onfocus=Ce.props.pauseOnFocus?Ce.onSlideFocus:null,Ne.onblur=Ce.props.pauseOnFocus?Ce.onSlideBlur:null}),window.addEventListener?window.addEventListener("resize",Ce.onWindowResized):window.attachEvent("onresize",Ce.onWindowResized)}),de(Se(Ce),"componentWillUnmount",function(){Ce.animationEndCallback&&clearTimeout(Ce.animationEndCallback),Ce.lazyLoadTimer&&clearInterval(Ce.lazyLoadTimer),Ce.callbackTimers.length&&(Ce.callbackTimers.forEach(function(Oe){return clearTimeout(Oe)}),Ce.callbackTimers=[]),window.addEventListener?window.removeEventListener("resize",Ce.onWindowResized):window.detachEvent("onresize",Ce.onWindowResized),Ce.autoplayTimer&&clearInterval(Ce.autoplayTimer),Ce.ro.disconnect()}),de(Se(Ce),"componentDidUpdate",function(Oe){if(Ce.checkImagesLoad(),Ce.props.onReInit&&Ce.props.onReInit(),Ce.props.lazyLoad){var Te=(0,y.getOnDemandLazySlides)(ce(ce({},Ce.props),Ce.state));Te.length>0&&(Ce.setState(function(Qe){return{lazyLoadedList:Qe.lazyLoadedList.concat(Te)}}),Ce.props.onLazyLoad&&Ce.props.onLazyLoad(Te))}Ce.adaptHeight();var Ne=ce(ce({listRef:Ce.list,trackRef:Ce.track},Ce.props),Ce.state),Ye=Ce.didPropsChange(Oe);Ye&&Ce.updateState(Ne,Ye,function(){Ce.state.currentSlide>=r.default.Children.count(Ce.props.children)&&Ce.changeSlide({message:"index",index:r.default.Children.count(Ce.props.children)-Ce.props.slidesToShow,currentSlide:Ce.state.currentSlide}),Ce.props.autoplay?Ce.autoPlay("update"):Ce.pause("paused")})}),de(Se(Ce),"onWindowResized",function(Oe){Ce.debouncedResize&&Ce.debouncedResize.cancel(),Ce.debouncedResize=(0,t.default)(function(){return Ce.resizeWindow(Oe)},50),Ce.debouncedResize()}),de(Se(Ce),"resizeWindow",function(){var Oe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,Te=!!(Ce.track&&Ce.track.node);if(Te){var Ne=ce(ce({listRef:Ce.list,trackRef:Ce.track},Ce.props),Ce.state);Ce.updateState(Ne,Oe,function(){Ce.props.autoplay?Ce.autoPlay("update"):Ce.pause("paused")}),Ce.setState({animating:!1}),clearTimeout(Ce.animationEndCallback),delete Ce.animationEndCallback}}),de(Se(Ce),"updateState",function(Oe,Te,Ne){var Ye=(0,y.initializedState)(Oe);Oe=ce(ce(ce({},Oe),Ye),{},{slideIndex:Ye.currentSlide});var Qe=(0,y.getTrackLeft)(Oe);Oe=ce(ce({},Oe),{},{left:Qe});var qe=(0,y.getTrackCSS)(Oe);(Te||r.default.Children.count(Ce.props.children)!==r.default.Children.count(Oe.children))&&(Ye.trackStyle=qe),Ce.setState(Ye,Ne)}),de(Se(Ce),"ssrInit",function(){if(Ce.props.variableWidth){var Oe=0,Te=0,Ne=[],Ye=(0,y.getPreClones)(ce(ce(ce({},Ce.props),Ce.state),{},{slideCount:Ce.props.children.length})),Qe=(0,y.getPostClones)(ce(ce(ce({},Ce.props),Ce.state),{},{slideCount:Ce.props.children.length}));Ce.props.children.forEach(function(yn){Ne.push(yn.props.style.width),Oe+=yn.props.style.width});for(var qe=0;qe<Ye;qe++)Te+=Ne[Ne.length-1-qe],Oe+=Ne[Ne.length-1-qe];for(var Ze=0;Ze<Qe;Ze++)Oe+=Ne[Ze];for(var ct=0;ct<Ce.state.currentSlide;ct++)Te+=Ne[ct];var xt={width:Oe+"px",left:-Te+"px"};if(Ce.props.centerMode){var un="".concat(Ne[Ce.state.currentSlide],"px");xt.left="calc(".concat(xt.left," + (100% - ").concat(un,") / 2 ) ")}return{trackStyle:xt}}var Vn=r.default.Children.count(Ce.props.children),In=ce(ce(ce({},Ce.props),Ce.state),{},{slideCount:Vn}),Un=(0,y.getPreClones)(In)+(0,y.getPostClones)(In)+Vn,kn=100/Ce.props.slidesToShow*Un,Ln=100/Un,Ke=-Ln*((0,y.getPreClones)(In)+Ce.state.currentSlide)*kn/100;Ce.props.centerMode&&(Ke+=(100-Ln*kn/100)/2);var Qn={width:kn+"%",left:Ke+"%"};return{slideWidth:Ln+"%",trackStyle:Qn}}),de(Se(Ce),"checkImagesLoad",function(){var Oe=Ce.list&&Ce.list.querySelectorAll&&Ce.list.querySelectorAll(".slick-slide img")||[],Te=Oe.length,Ne=0;Array.prototype.forEach.call(Oe,function(Ye){var Qe=function(){return++Ne&&Ne>=Te&&Ce.onWindowResized()};if(!Ye.onclick)Ye.onclick=function(){return Ye.parentNode.focus()};else{var qe=Ye.onclick;Ye.onclick=function(Ze){qe(Ze),Ye.parentNode.focus()}}Ye.onload||(Ce.props.lazyLoad?Ye.onload=function(){Ce.adaptHeight(),Ce.callbackTimers.push(setTimeout(Ce.onWindowResized,Ce.props.speed))}:(Ye.onload=Qe,Ye.onerror=function(){Qe(),Ce.props.onLazyLoadError&&Ce.props.onLazyLoadError()}))})}),de(Se(Ce),"progressiveLazyLoad",function(){for(var Oe=[],Te=ce(ce({},Ce.props),Ce.state),Ne=Ce.state.currentSlide;Ne<Ce.state.slideCount+(0,y.getPostClones)(Te);Ne++)if(Ce.state.lazyLoadedList.indexOf(Ne)<0){Oe.push(Ne);break}for(var Ye=Ce.state.currentSlide-1;Ye>=-(0,y.getPreClones)(Te);Ye--)if(Ce.state.lazyLoadedList.indexOf(Ye)<0){Oe.push(Ye);break}Oe.length>0?(Ce.setState(function(Qe){return{lazyLoadedList:Qe.lazyLoadedList.concat(Oe)}}),Ce.props.onLazyLoad&&Ce.props.onLazyLoad(Oe)):Ce.lazyLoadTimer&&(clearInterval(Ce.lazyLoadTimer),delete Ce.lazyLoadTimer)}),de(Se(Ce),"slideHandler",function(Oe){var Te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,Ne=Ce.props,Ye=Ne.asNavFor,Qe=Ne.beforeChange,qe=Ne.onLazyLoad,Ze=Ne.speed,ct=Ne.afterChange,xt=Ce.state.currentSlide,un=(0,y.slideHandler)(ce(ce(ce({index:Oe},Ce.props),Ce.state),{},{trackRef:Ce.track,useCSS:Ce.props.useCSS&&!Te})),Vn=un.state,In=un.nextState;if(Vn){Qe&&Qe(xt,Vn.currentSlide);var Un=Vn.lazyLoadedList.filter(function(kn){return Ce.state.lazyLoadedList.indexOf(kn)<0});qe&&Un.length>0&&qe(Un),!Ce.props.waitForAnimate&&Ce.animationEndCallback&&(clearTimeout(Ce.animationEndCallback),ct&&ct(xt),delete Ce.animationEndCallback),Ce.setState(Vn,function(){Ye&&Ce.asNavForIndex!==Oe&&(Ce.asNavForIndex=Oe,Ye.innerSlider.slideHandler(Oe)),In&&(Ce.animationEndCallback=setTimeout(function(){var kn=In.animating,Ln=re(In,["animating"]);Ce.setState(Ln,function(){Ce.callbackTimers.push(setTimeout(function(){return Ce.setState({animating:kn})},10)),ct&&ct(Vn.currentSlide),delete Ce.animationEndCallback})},Ze))})}}),de(Se(Ce),"changeSlide",function(Oe){var Te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,Ne=ce(ce({},Ce.props),Ce.state),Ye=(0,y.changeSlide)(Ne,Oe);if(!(Ye!==0&&!Ye)&&(Te===!0?Ce.slideHandler(Ye,Te):Ce.slideHandler(Ye),Ce.props.autoplay&&Ce.autoPlay("update"),Ce.props.focusOnSelect)){var Qe=Ce.list.querySelectorAll(".slick-current");Qe[0]&&Qe[0].focus()}}),de(Se(Ce),"clickHandler",function(Oe){Ce.clickable===!1&&(Oe.stopPropagation(),Oe.preventDefault()),Ce.clickable=!0}),de(Se(Ce),"keyHandler",function(Oe){var Te=(0,y.keyHandler)(Oe,Ce.props.accessibility,Ce.props.rtl);Te!==""&&Ce.changeSlide({message:Te})}),de(Se(Ce),"selectHandler",function(Oe){Ce.changeSlide(Oe)}),de(Se(Ce),"disableBodyScroll",function(){var Oe=function(Ne){Ne=Ne||window.event,Ne.preventDefault&&Ne.preventDefault(),Ne.returnValue=!1};window.ontouchmove=Oe}),de(Se(Ce),"enableBodyScroll",function(){window.ontouchmove=null}),de(Se(Ce),"swipeStart",function(Oe){Ce.props.verticalSwiping&&Ce.disableBodyScroll();var Te=(0,y.swipeStart)(Oe,Ce.props.swipe,Ce.props.draggable);Te!==""&&Ce.setState(Te)}),de(Se(Ce),"swipeMove",function(Oe){var Te=(0,y.swipeMove)(Oe,ce(ce(ce({},Ce.props),Ce.state),{},{trackRef:Ce.track,listRef:Ce.list,slideIndex:Ce.state.currentSlide}));Te&&(Te.swiping&&(Ce.clickable=!1),Ce.setState(Te))}),de(Se(Ce),"swipeEnd",function(Oe){var Te=(0,y.swipeEnd)(Oe,ce(ce(ce({},Ce.props),Ce.state),{},{trackRef:Ce.track,listRef:Ce.list,slideIndex:Ce.state.currentSlide}));if(Te){var Ne=Te.triggerSlideHandler;delete Te.triggerSlideHandler,Ce.setState(Te),Ne!==void 0&&(Ce.slideHandler(Ne),Ce.props.verticalSwiping&&Ce.enableBodyScroll())}}),de(Se(Ce),"touchEnd",function(Oe){Ce.swipeEnd(Oe),Ce.clickable=!0}),de(Se(Ce),"slickPrev",function(){Ce.callbackTimers.push(setTimeout(function(){return Ce.changeSlide({message:"previous"})},0))}),de(Se(Ce),"slickNext",function(){Ce.callbackTimers.push(setTimeout(function(){return Ce.changeSlide({message:"next"})},0))}),de(Se(Ce),"slickGoTo",function(Oe){var Te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(Oe=Number(Oe),isNaN(Oe))return"";Ce.callbackTimers.push(setTimeout(function(){return Ce.changeSlide({message:"index",index:Oe,currentSlide:Ce.state.currentSlide},Te)},0))}),de(Se(Ce),"play",function(){var Oe;if(Ce.props.rtl)Oe=Ce.state.currentSlide-Ce.props.slidesToScroll;else if((0,y.canGoNext)(ce(ce({},Ce.props),Ce.state)))Oe=Ce.state.currentSlide+Ce.props.slidesToScroll;else return!1;Ce.slideHandler(Oe)}),de(Se(Ce),"autoPlay",function(Oe){Ce.autoplayTimer&&clearInterval(Ce.autoplayTimer);var Te=Ce.state.autoplaying;if(Oe==="update"){if(Te==="hovered"||Te==="focused"||Te==="paused")return}else if(Oe==="leave"){if(Te==="paused"||Te==="focused")return}else if(Oe==="blur"&&(Te==="paused"||Te==="hovered"))return;Ce.autoplayTimer=setInterval(Ce.play,Ce.props.autoplaySpeed+50),Ce.setState({autoplaying:"playing"})}),de(Se(Ce),"pause",function(Oe){Ce.autoplayTimer&&(clearInterval(Ce.autoplayTimer),Ce.autoplayTimer=null);var Te=Ce.state.autoplaying;Oe==="paused"?Ce.setState({autoplaying:"paused"}):Oe==="focused"?(Te==="hovered"||Te==="playing")&&Ce.setState({autoplaying:"focused"}):Te==="playing"&&Ce.setState({autoplaying:"hovered"})}),de(Se(Ce),"onDotsOver",function(){return Ce.props.autoplay&&Ce.pause("hovered")}),de(Se(Ce),"onDotsLeave",function(){return Ce.props.autoplay&&Ce.state.autoplaying==="hovered"&&Ce.autoPlay("leave")}),de(Se(Ce),"onTrackOver",function(){return Ce.props.autoplay&&Ce.pause("hovered")}),de(Se(Ce),"onTrackLeave",function(){return Ce.props.autoplay&&Ce.state.autoplaying==="hovered"&&Ce.autoPlay("leave")}),de(Se(Ce),"onSlideFocus",function(){return Ce.props.autoplay&&Ce.pause("focused")}),de(Se(Ce),"onSlideBlur",function(){return Ce.props.autoplay&&Ce.state.autoplaying==="focused"&&Ce.autoPlay("blur")}),de(Se(Ce),"render",function(){var Oe=(0,o.default)("slick-slider",Ce.props.className,{"slick-vertical":Ce.props.vertical,"slick-initialized":!0}),Te=ce(ce({},Ce.props),Ce.state),Ne=(0,y.extractObject)(Te,["fade","cssEase","speed","infinite","centerMode","focusOnSelect","currentSlide","lazyLoad","lazyLoadedList","rtl","slideWidth","slideHeight","listHeight","vertical","slidesToShow","slidesToScroll","slideCount","trackStyle","variableWidth","unslick","centerPadding","targetSlide","useCSS"]),Ye=Ce.props.pauseOnHover;Ne=ce(ce({},Ne),{},{onMouseEnter:Ye?Ce.onTrackOver:null,onMouseLeave:Ye?Ce.onTrackLeave:null,onMouseOver:Ye?Ce.onTrackOver:null,focusOnSelect:Ce.props.focusOnSelect&&Ce.clickable?Ce.selectHandler:null});var Qe;if(Ce.props.dots===!0&&Ce.state.slideCount>=Ce.props.slidesToShow){var qe=(0,y.extractObject)(Te,["dotsClass","slideCount","slidesToShow","currentSlide","slidesToScroll","clickHandler","children","customPaging","infinite","appendDots"]),Ze=Ce.props.pauseOnDotsHover;qe=ce(ce({},qe),{},{clickHandler:Ce.changeSlide,onMouseEnter:Ze?Ce.onDotsLeave:null,onMouseOver:Ze?Ce.onDotsOver:null,onMouseLeave:Ze?Ce.onDotsLeave:null}),Qe=r.default.createElement(G.Dots,qe)}var ct,xt,un=(0,y.extractObject)(Te,["infinite","centerMode","currentSlide","slideCount","slidesToShow","prevArrow","nextArrow"]);un.clickHandler=Ce.changeSlide,Ce.props.arrows&&(ct=r.default.createElement(K.PrevArrow,un),xt=r.default.createElement(K.NextArrow,un));var Vn=null;Ce.props.vertical&&(Vn={height:Ce.state.listHeight});var In=null;Ce.props.vertical===!1?Ce.props.centerMode===!0&&(In={padding:"0px "+Ce.props.centerPadding}):Ce.props.centerMode===!0&&(In={padding:Ce.props.centerPadding+" 0px"});var Un=ce(ce({},Vn),In),kn=Ce.props.touchMove,Ln={className:"slick-list",style:Un,onClick:Ce.clickHandler,onMouseDown:kn?Ce.swipeStart:null,onMouseMove:Ce.state.dragging&&kn?Ce.swipeMove:null,onMouseUp:kn?Ce.swipeEnd:null,onMouseLeave:Ce.state.dragging&&kn?Ce.swipeEnd:null,onTouchStart:kn?Ce.swipeStart:null,onTouchMove:Ce.state.dragging&&kn?Ce.swipeMove:null,onTouchEnd:kn?Ce.touchEnd:null,onTouchCancel:Ce.state.dragging&&kn?Ce.swipeEnd:null,onKeyDown:Ce.props.accessibility?Ce.keyHandler:null},Ke={className:Oe,dir:"ltr",style:Ce.props.style};return Ce.props.unslick&&(Ln={className:"slick-list"},Ke={className:Oe}),r.default.createElement("div",Ke,Ce.props.unslick?"":ct,r.default.createElement("div",ie({ref:Ce.listRefHandler},Ln),r.default.createElement(R.Track,ie({ref:Ce.trackRefHandler},Ne),Ce.props.children)),Ce.props.unslick?"":xt,Ce.props.unslick?"":Qe)}),Ce.list=null,Ce.track=null,Ce.state=ce(ce({},e.default),{},{currentSlide:Ce.props.initialSlide,targetSlide:Ce.props.initialSlide?Ce.props.initialSlide:0,slideCount:r.default.Children.count(Ce.props.children)}),Ce.callbackTimers=[],Ce.clickable=!0,Ce.debouncedResize=null;var De=Ce.ssrInit();return Ce.state=ce(ce({},Ce.state),De),Ce}return ge($e,[{key:"didPropsChange",value:function(Ce){for(var De=!1,Oe=0,Te=Object.keys(this.props);Oe<Te.length;Oe++){var Ne=Te[Oe];if(!Ce.hasOwnProperty(Ne)){De=!0;break}if(!(ee(Ce[Ne])==="object"||typeof Ce[Ne]=="function"||isNaN(Ce[Ne]))&&Ce[Ne]!==this.props[Ne]){De=!0;break}}return De||r.default.Children.count(this.props.children)!==r.default.Children.count(Ce.children)}}]),$e}(r.default.Component),innerSlider}var camel2hyphen_1,hasRequiredCamel2hyphen;function requireCamel2hyphen(){if(hasRequiredCamel2hyphen)return camel2hyphen_1;hasRequiredCamel2hyphen=1;var r=function(e){return e.replace(/[A-Z]/g,function(t){return"-"+t.toLowerCase()}).toLowerCase()};return camel2hyphen_1=r,camel2hyphen_1}var json2mq_1,hasRequiredJson2mq;function requireJson2mq(){if(hasRequiredJson2mq)return json2mq_1;hasRequiredJson2mq=1;var r=requireCamel2hyphen(),e=function(y){var R=/[height|width]$/;return R.test(y)},t=function(y){var R="",G=Object.keys(y);return G.forEach(function(K,Y){var Q=y[K];K=r(K),e(K)&&typeof Q=="number"&&(Q=Q+"px"),Q===!0?R+=K:Q===!1?R+="not "+K:R+="("+K+": "+Q+")",Y<G.length-1&&(R+=" and ")}),R},o=function(y){var R="";return typeof y=="string"?y:y instanceof Array?(y.forEach(function(G,K){R+=t(G),K<y.length-1&&(R+=", ")}),R):t(y)};return json2mq_1=o,json2mq_1}var QueryHandler_1,hasRequiredQueryHandler;function requireQueryHandler(){if(hasRequiredQueryHandler)return QueryHandler_1;hasRequiredQueryHandler=1;function r(e){this.options=e,!e.deferSetup&&this.setup()}return r.prototype={constructor:r,setup:function(){this.options.setup&&this.options.setup(),this.initialised=!0},on:function(){!this.initialised&&this.setup(),this.options.match&&this.options.match()},off:function(){this.options.unmatch&&this.options.unmatch()},destroy:function(){this.options.destroy?this.options.destroy():this.off()},equals:function(e){return this.options===e||this.options.match===e}},QueryHandler_1=r,QueryHandler_1}var Util,hasRequiredUtil;function requireUtil(){if(hasRequiredUtil)return Util;hasRequiredUtil=1;function r(o,y){var R=0,G=o.length,K;for(R;R<G&&(K=y(o[R],R),K!==!1);R++);}function e(o){return Object.prototype.toString.apply(o)==="[object Array]"}function t(o){return typeof o=="function"}return Util={isFunction:t,isArray:e,each:r},Util}var MediaQuery_1,hasRequiredMediaQuery;function requireMediaQuery(){if(hasRequiredMediaQuery)return MediaQuery_1;hasRequiredMediaQuery=1;var r=requireQueryHandler(),e=requireUtil().each;function t(o,y){this.query=o,this.isUnconditional=y,this.handlers=[],this.mql=window.matchMedia(o);var R=this;this.listener=function(G){R.mql=G.currentTarget||G,R.assess()},this.mql.addListener(this.listener)}return t.prototype={constuctor:t,addHandler:function(o){var y=new r(o);this.handlers.push(y),this.matches()&&y.on()},removeHandler:function(o){var y=this.handlers;e(y,function(R,G){if(R.equals(o))return R.destroy(),!y.splice(G,1)})},matches:function(){return this.mql.matches||this.isUnconditional},clear:function(){e(this.handlers,function(o){o.destroy()}),this.mql.removeListener(this.listener),this.handlers.length=0},assess:function(){var o=this.matches()?"on":"off";e(this.handlers,function(y){y[o]()})}},MediaQuery_1=t,MediaQuery_1}var MediaQueryDispatch_1,hasRequiredMediaQueryDispatch;function requireMediaQueryDispatch(){if(hasRequiredMediaQueryDispatch)return MediaQueryDispatch_1;hasRequiredMediaQueryDispatch=1;var r=requireMediaQuery(),e=requireUtil(),t=e.each,o=e.isFunction,y=e.isArray;function R(){if(!window.matchMedia)throw new Error("matchMedia not present, legacy browsers require a polyfill");this.queries={},this.browserIsIncapable=!window.matchMedia("only all").matches}return R.prototype={constructor:R,register:function(G,K,Y){var Q=this.queries,ee=Y&&this.browserIsIncapable;return Q[G]||(Q[G]=new r(G,ee)),o(K)&&(K={match:K}),y(K)||(K=[K]),t(K,function(ie){o(ie)&&(ie={match:ie}),Q[G].addHandler(ie)}),this},unregister:function(G,K){var Y=this.queries[G];return Y&&(K?Y.removeHandler(K):(Y.clear(),delete this.queries[G])),this}},MediaQueryDispatch_1=R,MediaQueryDispatch_1}var src,hasRequiredSrc;function requireSrc(){if(hasRequiredSrc)return src;hasRequiredSrc=1;var r=requireMediaQueryDispatch();return src=new r,src}var hasRequiredSlider;function requireSlider(){return hasRequiredSlider||(hasRequiredSlider=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var e=G(requireReact()),t=requireInnerSlider(),o=G(requireJson2mq()),y=G(requireDefaultProps()),R=requireInnerSliderUtils();function G(ye){return ye&&ye.__esModule?ye:{default:ye}}function K(ye){"@babel/helpers - typeof";return K=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(de){return typeof de}:function(de){return de&&typeof Symbol=="function"&&de.constructor===Symbol&&de!==Symbol.prototype?"symbol":typeof de},K(ye)}function Y(){return Y=Object.assign?Object.assign.bind():function(ye){for(var de=1;de<arguments.length;de++){var Me=arguments[de];for(var Le in Me)Object.prototype.hasOwnProperty.call(Me,Le)&&(ye[Le]=Me[Le])}return ye},Y.apply(this,arguments)}function Q(ye,de){var Me=Object.keys(ye);if(Object.getOwnPropertySymbols){var Le=Object.getOwnPropertySymbols(ye);de&&(Le=Le.filter(function(Pe){return Object.getOwnPropertyDescriptor(ye,Pe).enumerable})),Me.push.apply(Me,Le)}return Me}function ee(ye){for(var de=1;de<arguments.length;de++){var Me=arguments[de]!=null?arguments[de]:{};de%2?Q(Object(Me),!0).forEach(function(Le){be(ye,Le,Me[Le])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ye,Object.getOwnPropertyDescriptors(Me)):Q(Object(Me)).forEach(function(Le){Object.defineProperty(ye,Le,Object.getOwnPropertyDescriptor(Me,Le))})}return ye}function ie(ye,de){if(!(ye instanceof de))throw new TypeError("Cannot call a class as a function")}function re(ye,de){for(var Me=0;Me<de.length;Me++){var Le=de[Me];Le.enumerable=Le.enumerable||!1,Le.configurable=!0,"value"in Le&&(Le.writable=!0),Object.defineProperty(ye,Re(Le.key),Le)}}function se(ye,de,Me){return de&&re(ye.prototype,de),Object.defineProperty(ye,"prototype",{writable:!1}),ye}function le(ye,de){if(typeof de!="function"&&de!==null)throw new TypeError("Super expression must either be null or a function");ye.prototype=Object.create(de&&de.prototype,{constructor:{value:ye,writable:!0,configurable:!0}}),Object.defineProperty(ye,"prototype",{writable:!1}),de&&ce(ye,de)}function ce(ye,de){return ce=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Le,Pe){return Le.__proto__=Pe,Le},ce(ye,de)}function oe(ye){var de=ve();return function(){var Le=_e(ye),Pe;if(de){var Ue=_e(this).constructor;Pe=Reflect.construct(Le,arguments,Ue)}else Pe=Le.apply(this,arguments);return ue(this,Pe)}}function ue(ye,de){if(de&&(K(de)==="object"||typeof de=="function"))return de;if(de!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ge(ye)}function ge(ye){if(ye===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ye}function ve(){try{var ye=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ve=function(){return!!ye})()}function _e(ye){return _e=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(Me){return Me.__proto__||Object.getPrototypeOf(Me)},_e(ye)}function be(ye,de,Me){return de=Re(de),de in ye?Object.defineProperty(ye,de,{value:Me,enumerable:!0,configurable:!0,writable:!0}):ye[de]=Me,ye}function Re(ye){var de=Se(ye,"string");return K(de)=="symbol"?de:String(de)}function Se(ye,de){if(K(ye)!="object"||!ye)return ye;var Me=ye[Symbol.toPrimitive];if(Me!==void 0){var Le=Me.call(ye,de);if(K(Le)!="object")return Le;throw new TypeError("@@toPrimitive must return a primitive value.")}return(de==="string"?String:Number)(ye)}var Ee=(0,R.canUseDOM)()&&requireSrc();r.default=function(ye){le(Me,ye);var de=oe(Me);function Me(Le){var Pe;return ie(this,Me),Pe=de.call(this,Le),be(ge(Pe),"innerSliderRefHandler",function(Ue){return Pe.innerSlider=Ue}),be(ge(Pe),"slickPrev",function(){return Pe.innerSlider.slickPrev()}),be(ge(Pe),"slickNext",function(){return Pe.innerSlider.slickNext()}),be(ge(Pe),"slickGoTo",function(Ue){var $e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return Pe.innerSlider.slickGoTo(Ue,$e)}),be(ge(Pe),"slickPause",function(){return Pe.innerSlider.pause("paused")}),be(ge(Pe),"slickPlay",function(){return Pe.innerSlider.autoPlay("play")}),Pe.state={breakpoint:null},Pe._responsiveMediaHandlers=[],Pe}return se(Me,[{key:"media",value:function(Pe,Ue){Ee.register(Pe,Ue),this._responsiveMediaHandlers.push({query:Pe,handler:Ue})}},{key:"componentDidMount",value:function(){var Pe=this;if(this.props.responsive){var Ue=this.props.responsive.map(function(Ve){return Ve.breakpoint});Ue.sort(function(Ve,Ce){return Ve-Ce}),Ue.forEach(function(Ve,Ce){var De;Ce===0?De=(0,o.default)({minWidth:0,maxWidth:Ve}):De=(0,o.default)({minWidth:Ue[Ce-1]+1,maxWidth:Ve}),(0,R.canUseDOM)()&&Pe.media(De,function(){Pe.setState({breakpoint:Ve})})});var $e=(0,o.default)({minWidth:Ue.slice(-1)[0]});(0,R.canUseDOM)()&&this.media($e,function(){Pe.setState({breakpoint:null})})}}},{key:"componentWillUnmount",value:function(){this._responsiveMediaHandlers.forEach(function(Pe){Ee.unregister(Pe.query,Pe.handler)})}},{key:"render",value:function(){var Pe=this,Ue,$e;this.state.breakpoint?($e=this.props.responsive.filter(function(Ze){return Ze.breakpoint===Pe.state.breakpoint}),Ue=$e[0].settings==="unslick"?"unslick":ee(ee(ee({},y.default),this.props),$e[0].settings)):Ue=ee(ee({},y.default),this.props),Ue.centerMode&&(Ue.slidesToScroll>1,Ue.slidesToScroll=1),Ue.fade&&(Ue.slidesToShow>1,Ue.slidesToScroll>1,Ue.slidesToShow=1,Ue.slidesToScroll=1);var Ve=e.default.Children.toArray(this.props.children);Ve=Ve.filter(function(Ze){return typeof Ze=="string"?!!Ze.trim():!!Ze}),Ue.variableWidth&&(Ue.rows>1||Ue.slidesPerRow>1)&&(console.warn("variableWidth is not supported in case of rows > 1 or slidesPerRow > 1"),Ue.variableWidth=!1);for(var Ce=[],De=null,Oe=0;Oe<Ve.length;Oe+=Ue.rows*Ue.slidesPerRow){for(var Te=[],Ne=Oe;Ne<Oe+Ue.rows*Ue.slidesPerRow;Ne+=Ue.slidesPerRow){for(var Ye=[],Qe=Ne;Qe<Ne+Ue.slidesPerRow&&(Ue.variableWidth&&Ve[Qe].props.style&&(De=Ve[Qe].props.style.width),!(Qe>=Ve.length));Qe+=1)Ye.push(e.default.cloneElement(Ve[Qe],{key:100*Oe+10*Ne+Qe,tabIndex:-1,style:{width:"".concat(100/Ue.slidesPerRow,"%"),display:"inline-block"}}));Te.push(e.default.createElement("div",{key:10*Oe+Ne},Ye))}Ue.variableWidth?Ce.push(e.default.createElement("div",{key:Oe,style:{width:De}},Te)):Ce.push(e.default.createElement("div",{key:Oe},Te))}if(Ue==="unslick"){var qe="regular slider "+(this.props.className||"");return e.default.createElement("div",{className:qe},Ve)}else Ce.length<=Ue.slidesToShow&&!Ue.infinite&&(Ue.unslick=!0);return e.default.createElement(t.InnerSlider,Y({style:this.props.style,ref:this.innerSliderRefHandler},(0,R.filterSettings)(Ue)),Ce)}}]),Me}(e.default.Component)}(slider)),slider}var hasRequiredLib;function requireLib(){return hasRequiredLib||(hasRequiredLib=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var e=t(requireSlider());function t(o){return o&&o.__esModule?o:{default:o}}r.default=e.default}(lib)),lib}var libExports=requireLib();const Slider=getDefaultExportFromCjs(libExports),project1="/assets/rudraDream-BgVU2Ru2.jpg",project2="/assets/gloNeuro-DyxXlse4.png",project3="/assets/solarly-CJc0NxDB.png",project4="/assets/kvzCareers-hBrlsJzG.png",project5="/assets/gitUploadAutomation-DcUjydg5.png",project6="/assets/blockSnake-BGHQ_fh-.png",project7="/assets/toDoListCreator-nwsCQm4e.png",project8="/assets/prismaTodo-Bg5-Y5Wk.png",project9="/assets/gdriveClone-DRqa0xWD.png",project10="/assets/GSAPWebsite-_2jND_FB.png",desc1="Rudra's Dream is a top-down brawler built in Unity using C#, where players battle endless waves of enemies in a fast-paced, action-packed arena. Featuring skill-based melee combat, a wide variety of weapons, and light RPG elements, the game lets players level up, unlock powerful abilities, and gain impactful upgrades mid-run. With tight, responsive controls, escalating difficulty, and a strong emphasis on timing and strategy, Rudra's Dream challenges players to survive as long as possible while mastering combos, dodging deadly attacks, and picking the right powerups to shape their unique playstyle. Designed for fans of raw, satisfying combat, it delivers an intense and highly replayable experience.",desc2="The Global Neuro Foundation advances neurosurgical education worldwide through training, collaboration, and knowledge sharing. Their website, gloneuro.org, serves as a hub for global neurosurgical professionals, offering access to educational courses, case studies, research, and events. To support this mission, I developed it's website with the support of a team to make it available online. Now, I am leading the redevelopment of the site using a modern technology stack. The goal is to enhance performance, usability, and security while introducing features like interactive modules, real-time tools, and personalized dashboards. This renovation will provide a more dynamic and scalable platform to better serve the global neurosurgical community.",desc3="The urgency of transitioning to sustainable energy has made solar energy a key solution due to its abundance and environmental benefits. Solar cells are crucial in this shift, offering renewable, clean, cost-effective, and energy-independent power. However, improving solar cell efficiency requires discovering and optimizing suitable materials, a process traditionally slow and labor-intensive. Machine learning (ML) accelerates this by predicting promising materials based on large datasets, optimizing properties, and discovering novel compositions. Leveraging ML in solar cell research can drive innovation and efficiency. To contribute, our team developed an ML model that predicts stable perovskite materials for solar cells, with the model available on GitHub and deployed online.",desc4="KayVeeZ Careers Portal is a Flask-based web application that enables job seekers to explore job listings, learn about the company, and apply for positions. It features job listings, an about page, a RESTful API for job data, job details, and an application submission form. The project requires setting up a MySQL database with jobs and applications tables, and dependencies can be installed via pip. The app is powered by Flask for web functionality, SQLAlchemy for database interactions, and MySQL for data storage. The repository is available on GitHub, and the database can be hosted using platforms like Clever Cloud.",desc5="This Bash script automates updating multiple Git repositories by iterating through a list of directories, staging changes, committing updates, and pushing them to remote repositories. It prints status messages for each update and tracks exit codes to verify success. If any update fails, it identifies and reports the specific repository that encountered an issue, ensuring efficient version control across multiple projects.",desc6="BlockSnake is a challenging Unity-based twist on the classic snake game, featuring a minimalist blocky design, retro chiptune music, and fast-paced, skill-based gameplay. With precision movement and an unforgiving difficulty curve, it offers an addictive experience for players who love a real test. Can you master the movement and achieve a high score? 🚀🐍",desc7="iTask is a sleek and efficient To-Do List application built with Vite, React, and Tailwind CSS, designed to keep your tasks organized and manageable. This intuitive app allows you to add, edit, delete, and mark tasks as completed, while ensuring your data is saved persistently using localStorage. With features like filtering tasks and simple task management, it’s perfect for those who want a no-frills, yet powerful to-do list solution. Can you stay on top of all your tasks? ✔️📋",desc8="TaskForge API – Dockerized Todo Backend with JWT Auth is a secure, scalable backend service built with Node.js, Express.js, Prisma, PostgreSQL, and fully containerized using Docker. Designed for seamless integration into any frontend, it delivers a full-featured REST API with JWT-based authentication, enabling users to register, log in, and manage todos through protected CRUD operations. Leveraging Prisma ORM for elegant database access, bcrypt for password security, and Docker Compose for efficient service orchestration, TaskForge API is production-ready and developer-friendly. With a clean architecture, environment-based config, and straightforward setup, it’s an ideal backend foundation for modern web applications.",desc9="SkyVault is a secure, user-centric file storage backend built with Node.js, Express.js, MongoDB, and Filebase for cloud storage. It offers authenticated file management via JWT, allowing users to upload, download, and delete their personal files. Featuring a drag-and-drop interface, the app supports a seamless user experience for handling uploads. Filebase ensures S3-compatible, scalable storage, while MongoDB handles metadata and user info. Tailwind and Flowbite enhance the UI, and the backend enforces strict user access controls. With structured routing, environment-based settings, and simple deployment, it’s a lightweight, modern solution for personal cloud storage with privacy and usability in focus.",desc10="MotionMuse is an interactive portfolio website powered by GSAP for smooth, dynamic animations and scroll-triggered effects. Designed with vanilla HTML and CSS, it features responsive layouts and fluid transitions that enhance user engagement. GSAP’s timeline control allows choreographed animations across sections, while ScrollTrigger synchronizes content reveal with scrolling. The site focuses on clean, minimal design with custom CSS for styling, ensuring a lightweight, fast user experience. Built for performance, it adapts seamlessly across devices. Structured for scalability and easy maintenance, MotionMuse demonstrates how animation can transform static content into an immersive, engaging journey.",projects=[{title:"Rudra's Dream",description:desc1,image:project1,link:null,isUpcoming:!0},{title:"GloNeuro",description:desc2,image:project2,link:"https://gloneuro.org/",isUpcoming:!0},{title:"Solarly",description:desc3,image:project3,link:"https://predict-solar-cell-materials.onrender.com/",isUpcoming:!1},{title:"KVZCareers",description:desc4,image:project4,link:"https://kayveez-jobz.onrender.com",isUpcoming:!1},{title:"Git Automation",description:desc5,image:project5,link:"https://github.com/kshitij-vashisth/learning_bash/blob/main/git_up",isUpcoming:!1},{title:"BlockSnake",description:desc6,image:project6,link:"https://kshitijvashisth.itch.io/snake",isUpcoming:!1},{title:"iTask",description:desc7,image:project7,link:"https://kshitij-vashisth.github.io/todoListReactApp/",isUpcoming:!1},{title:"TaskForge API",description:desc8,image:project8,link:"https://github.com/kshitij-vashisth/learning_web_js/tree/main/backend-course/backend_with_prisma/chapter-4",isUpcoming:!1},{title:"SkyVault",description:desc9,image:project9,link:"https://github.com/kshitij-vashisth/learning_web_js/tree/main/backend-course/sheryian-crash-4hr/6_skyvault",isUpcoming:!1},{title:"MotionMuse",description:desc10,image:project10,link:"https://kshitij-vashisth.github.io/GSAPFrontEndWebsite/",isUpcoming:!1}],Projects=()=>{const r=reactExports.useRef(null),e=reactExports.useRef(null),[t,o]=reactExports.useState(!1),[y,R]=reactExports.useState(null),[G,K]=reactExports.useState(null);reactExports.useEffect(()=>{const Q=ee=>{t&&ee.preventDefault()};return t?window.addEventListener("wheel",Q,{passive:!1}):window.removeEventListener("wheel",Q),()=>window.removeEventListener("wheel",Q)},[t]),reactExports.useEffect(()=>{y?document.body.style.overflow="hidden":document.body.style.overflow="auto"},[y]);const Y={infinite:!0,speed:500,slidesToShow:3,slidesToScroll:1,autoplay:!1,pauseOnHover:!0,arrows:!1,dots:!1,centerMode:!0,centerPadding:"60px",responsive:[{breakpoint:1024,settings:{slidesToShow:2,centerPadding:"40px"}},{breakpoint:600,settings:{slidesToShow:1,centerPadding:"20px"}}]};return jsxRuntimeExports.jsxs("div",{className:"projects-container",onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),onWheel:Q=>{t&&r.current&&(Q.deltaY<0?r.current.slickPrev():r.current.slickNext())},children:[jsxRuntimeExports.jsx("div",{className:"text-center",children:jsxRuntimeExports.jsx("h2",{className:"inline-block text-3xl font-bold mb-8 custom-green bg-black px-4 py-2",children:"My Projects"})}),jsxRuntimeExports.jsx(Slider,{ref:r,...Y,children:projects.map((Q,ee)=>{const ie=G===ee;return jsxRuntimeExports.jsxs("div",{className:`project-slide rounded-2xl relative transition-transform duration-500 ease-out ${ie?"scale-120":"scale-100"}`,onMouseEnter:()=>K(ee),onMouseLeave:()=>K(null),onClick:()=>R(Q),children:[Q.isUpcoming&&jsxRuntimeExports.jsx("div",{className:"absolute top-2 left-2 px-2 py-1 bg-white text-black font-bold text-sm rounded z-10",children:jsxRuntimeExports.jsx("span",{className:"flash-text",children:"Upcoming Project"})}),jsxRuntimeExports.jsx("img",{src:Q.image,alt:Q.title,className:"project-image"}),jsxRuntimeExports.jsx("div",{className:"project-info text-center p-4",children:jsxRuntimeExports.jsx("h3",{className:"text-xl text-[#20C20E] bg-black inline-block px-3 rounded-2xl font-semibold",children:Q.title})})]},ee)})}),y&&jsxRuntimeExports.jsx("div",{className:"modal-overlay",onClick:()=>R(null),children:jsxRuntimeExports.jsxs("div",{className:"modal-content expanded bg-black opacity-75 backdrop-blur-md p-6 max-w-2xl mx-auto rounded-lg shadow-lg overflow-auto max-h-[80vh]",onClick:Q=>Q.stopPropagation(),ref:e,onWheel:Q=>Q.stopPropagation(),children:[jsxRuntimeExports.jsx("img",{src:y.image,onClick:()=>{y.link&&window.open(y.link,"_blank")},alt:y.title,className:`modal-image w-full h-auto rounded-lg ${y.link?"curZur cursor-pointer":"cursor-not-allowed opacity-60"}`}),jsxRuntimeExports.jsxs("h3",{className:"text-3xl text-[#20C20E] font-bold mt-4 flex items-center gap-3",children:[y.title,y.isUpcoming&&jsxRuntimeExports.jsx("span",{className:"text-white bg-[#20C20E] px-2 py-1 rounded-md text-base font-semibold animate-pulse",children:"Upcoming Project"})]}),jsxRuntimeExports.jsx("p",{className:"mt-2 text-[#20C20E] text-lg text-justify",children:y.description}),y.link?jsxRuntimeExports.jsxs("a",{href:y.link,target:"_blank",rel:"noopener noreferrer",className:"inline-block text-2xl text-white hover:text-[#20C20E] hover:custom-outline-white hover:underline",children:["Link to ",y.title]}):jsxRuntimeExports.jsx("span",{className:"inline-block text-2xl text-gray-500 cursor-not-allowed opacity-50",children:"Link not available"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("button",{onClick:()=>R(null),className:"z-1000 curZur absolute top-4 right-4 bg-[#20C20E] px-3 py-2 rounded-full text-black hover:text-red-600 text-2xl font-bold hover:bg-[#1A9A0B] focus:outline-none hover:border-2 hover:border-solid hover:border-red-600",children:"×"})]})})]})};/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const REVISION="175",MOUSE={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},TOUCH={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},CullFaceNone=0,CullFaceBack=1,CullFaceFront=2,CullFaceFrontBack=3,BasicShadowMap=0,PCFShadowMap=1,PCFSoftShadowMap=2,VSMShadowMap=3,FrontSide=0,BackSide=1,DoubleSide=2,NoBlending=0,NormalBlending=1,AdditiveBlending=2,SubtractiveBlending=3,MultiplyBlending=4,CustomBlending=5,AddEquation=100,SubtractEquation=101,ReverseSubtractEquation=102,MinEquation=103,MaxEquation=104,ZeroFactor=200,OneFactor=201,SrcColorFactor=202,OneMinusSrcColorFactor=203,SrcAlphaFactor=204,OneMinusSrcAlphaFactor=205,DstAlphaFactor=206,OneMinusDstAlphaFactor=207,DstColorFactor=208,OneMinusDstColorFactor=209,SrcAlphaSaturateFactor=210,ConstantColorFactor=211,OneMinusConstantColorFactor=212,ConstantAlphaFactor=213,OneMinusConstantAlphaFactor=214,NeverDepth=0,AlwaysDepth=1,LessDepth=2,LessEqualDepth=3,EqualDepth=4,GreaterEqualDepth=5,GreaterDepth=6,NotEqualDepth=7,MultiplyOperation=0,MixOperation=1,AddOperation=2,NoToneMapping=0,LinearToneMapping=1,ReinhardToneMapping=2,CineonToneMapping=3,ACESFilmicToneMapping=4,CustomToneMapping=5,AgXToneMapping=6,NeutralToneMapping=7,AttachedBindMode="attached",DetachedBindMode="detached",UVMapping=300,CubeReflectionMapping=301,CubeRefractionMapping=302,EquirectangularReflectionMapping=303,EquirectangularRefractionMapping=304,CubeUVReflectionMapping=306,RepeatWrapping=1e3,ClampToEdgeWrapping=1001,MirroredRepeatWrapping=1002,NearestFilter=1003,NearestMipmapNearestFilter=1004,NearestMipMapNearestFilter=1004,NearestMipmapLinearFilter=1005,NearestMipMapLinearFilter=1005,LinearFilter=1006,LinearMipmapNearestFilter=1007,LinearMipMapNearestFilter=1007,LinearMipmapLinearFilter=1008,LinearMipMapLinearFilter=1008,UnsignedByteType=1009,ByteType=1010,ShortType=1011,UnsignedShortType=1012,IntType=1013,UnsignedIntType=1014,FloatType=1015,HalfFloatType=1016,UnsignedShort4444Type=1017,UnsignedShort5551Type=1018,UnsignedInt248Type=1020,UnsignedInt5999Type=35902,AlphaFormat=1021,RGBFormat=1022,RGBAFormat=1023,LuminanceFormat=1024,LuminanceAlphaFormat=1025,DepthFormat=1026,DepthStencilFormat=1027,RedFormat=1028,RedIntegerFormat=1029,RGFormat=1030,RGIntegerFormat=1031,RGBIntegerFormat=1032,RGBAIntegerFormat=1033,RGB_S3TC_DXT1_Format=33776,RGBA_S3TC_DXT1_Format=33777,RGBA_S3TC_DXT3_Format=33778,RGBA_S3TC_DXT5_Format=33779,RGB_PVRTC_4BPPV1_Format=35840,RGB_PVRTC_2BPPV1_Format=35841,RGBA_PVRTC_4BPPV1_Format=35842,RGBA_PVRTC_2BPPV1_Format=35843,RGB_ETC1_Format=36196,RGB_ETC2_Format=37492,RGBA_ETC2_EAC_Format=37496,RGBA_ASTC_4x4_Format=37808,RGBA_ASTC_5x4_Format=37809,RGBA_ASTC_5x5_Format=37810,RGBA_ASTC_6x5_Format=37811,RGBA_ASTC_6x6_Format=37812,RGBA_ASTC_8x5_Format=37813,RGBA_ASTC_8x6_Format=37814,RGBA_ASTC_8x8_Format=37815,RGBA_ASTC_10x5_Format=37816,RGBA_ASTC_10x6_Format=37817,RGBA_ASTC_10x8_Format=37818,RGBA_ASTC_10x10_Format=37819,RGBA_ASTC_12x10_Format=37820,RGBA_ASTC_12x12_Format=37821,RGBA_BPTC_Format=36492,RGB_BPTC_SIGNED_Format=36494,RGB_BPTC_UNSIGNED_Format=36495,RED_RGTC1_Format=36283,SIGNED_RED_RGTC1_Format=36284,RED_GREEN_RGTC2_Format=36285,SIGNED_RED_GREEN_RGTC2_Format=36286,LoopOnce=2200,LoopRepeat=2201,LoopPingPong=2202,InterpolateDiscrete=2300,InterpolateLinear=2301,InterpolateSmooth=2302,ZeroCurvatureEnding=2400,ZeroSlopeEnding=2401,WrapAroundEnding=2402,NormalAnimationBlendMode=2500,AdditiveAnimationBlendMode=2501,TrianglesDrawMode=0,TriangleStripDrawMode=1,TriangleFanDrawMode=2,BasicDepthPacking=3200,RGBADepthPacking=3201,RGBDepthPacking=3202,RGDepthPacking=3203,TangentSpaceNormalMap=0,ObjectSpaceNormalMap=1,NoColorSpace="",SRGBColorSpace="srgb",LinearSRGBColorSpace="srgb-linear",LinearTransfer="linear",SRGBTransfer="srgb",ZeroStencilOp=0,KeepStencilOp=7680,ReplaceStencilOp=7681,IncrementStencilOp=7682,DecrementStencilOp=7683,IncrementWrapStencilOp=34055,DecrementWrapStencilOp=34056,InvertStencilOp=5386,NeverStencilFunc=512,LessStencilFunc=513,EqualStencilFunc=514,LessEqualStencilFunc=515,GreaterStencilFunc=516,NotEqualStencilFunc=517,GreaterEqualStencilFunc=518,AlwaysStencilFunc=519,NeverCompare=512,LessCompare=513,EqualCompare=514,LessEqualCompare=515,GreaterCompare=516,NotEqualCompare=517,GreaterEqualCompare=518,AlwaysCompare=519,StaticDrawUsage=35044,DynamicDrawUsage=35048,StreamDrawUsage=35040,StaticReadUsage=35045,DynamicReadUsage=35049,StreamReadUsage=35041,StaticCopyUsage=35046,DynamicCopyUsage=35050,StreamCopyUsage=35042,GLSL1="100",GLSL3="300 es",WebGLCoordinateSystem=2e3,WebGPUCoordinateSystem=2001,TimestampQuery={COMPUTE:"compute",RENDER:"render"};let EventDispatcher$1=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const o=this._listeners;o[e]===void 0&&(o[e]=[]),o[e].indexOf(t)===-1&&o[e].push(t)}hasEventListener(e,t){const o=this._listeners;return o===void 0?!1:o[e]!==void 0&&o[e].indexOf(t)!==-1}removeEventListener(e,t){const o=this._listeners;if(o===void 0)return;const y=o[e];if(y!==void 0){const R=y.indexOf(t);R!==-1&&y.splice(R,1)}}dispatchEvent(e){const t=this._listeners;if(t===void 0)return;const o=t[e.type];if(o!==void 0){e.target=this;const y=o.slice(0);for(let R=0,G=y.length;R<G;R++)y[R].call(this,e);e.target=null}}};const _lut=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let _seed=1234567;const DEG2RAD=Math.PI/180,RAD2DEG=180/Math.PI;function generateUUID(){const r=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,o=Math.random()*4294967295|0;return(_lut[r&255]+_lut[r>>8&255]+_lut[r>>16&255]+_lut[r>>24&255]+"-"+_lut[e&255]+_lut[e>>8&255]+"-"+_lut[e>>16&15|64]+_lut[e>>24&255]+"-"+_lut[t&63|128]+_lut[t>>8&255]+"-"+_lut[t>>16&255]+_lut[t>>24&255]+_lut[o&255]+_lut[o>>8&255]+_lut[o>>16&255]+_lut[o>>24&255]).toLowerCase()}function clamp$1(r,e,t){return Math.max(e,Math.min(t,r))}function euclideanModulo(r,e){return(r%e+e)%e}function mapLinear(r,e,t,o,y){return o+(r-e)*(y-o)/(t-e)}function inverseLerp(r,e,t){return r!==e?(t-r)/(e-r):0}function lerp(r,e,t){return(1-t)*r+t*e}function damp(r,e,t,o){return lerp(r,e,1-Math.exp(-t*o))}function pingpong(r,e=1){return e-Math.abs(euclideanModulo(r,e*2)-e)}function smoothstep(r,e,t){return r<=e?0:r>=t?1:(r=(r-e)/(t-e),r*r*(3-2*r))}function smootherstep(r,e,t){return r<=e?0:r>=t?1:(r=(r-e)/(t-e),r*r*r*(r*(r*6-15)+10))}function randInt(r,e){return r+Math.floor(Math.random()*(e-r+1))}function randFloat(r,e){return r+Math.random()*(e-r)}function randFloatSpread(r){return r*(.5-Math.random())}function seededRandom(r){r!==void 0&&(_seed=r);let e=_seed+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function degToRad(r){return r*DEG2RAD}function radToDeg$1(r){return r*RAD2DEG}function isPowerOfTwo(r){return(r&r-1)===0&&r!==0}function ceilPowerOfTwo(r){return Math.pow(2,Math.ceil(Math.log(r)/Math.LN2))}function floorPowerOfTwo(r){return Math.pow(2,Math.floor(Math.log(r)/Math.LN2))}function setQuaternionFromProperEuler(r,e,t,o,y){const R=Math.cos,G=Math.sin,K=R(t/2),Y=G(t/2),Q=R((e+o)/2),ee=G((e+o)/2),ie=R((e-o)/2),re=G((e-o)/2),se=R((o-e)/2),le=G((o-e)/2);switch(y){case"XYX":r.set(K*ee,Y*ie,Y*re,K*Q);break;case"YZY":r.set(Y*re,K*ee,Y*ie,K*Q);break;case"ZXZ":r.set(Y*ie,Y*re,K*ee,K*Q);break;case"XZX":r.set(K*ee,Y*le,Y*se,K*Q);break;case"YXY":r.set(Y*se,K*ee,Y*le,K*Q);break;case"ZYZ":r.set(Y*le,Y*se,K*ee,K*Q);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+y)}}function denormalize(r,e){switch(e.constructor){case Float32Array:return r;case Uint32Array:return r/4294967295;case Uint16Array:return r/65535;case Uint8Array:return r/255;case Int32Array:return Math.max(r/2147483647,-1);case Int16Array:return Math.max(r/32767,-1);case Int8Array:return Math.max(r/127,-1);default:throw new Error("Invalid component type.")}}function normalize(r,e){switch(e.constructor){case Float32Array:return r;case Uint32Array:return Math.round(r*4294967295);case Uint16Array:return Math.round(r*65535);case Uint8Array:return Math.round(r*255);case Int32Array:return Math.round(r*2147483647);case Int16Array:return Math.round(r*32767);case Int8Array:return Math.round(r*127);default:throw new Error("Invalid component type.")}}const MathUtils={DEG2RAD,RAD2DEG,generateUUID,clamp:clamp$1,euclideanModulo,mapLinear,inverseLerp,lerp,damp,pingpong,smoothstep,smootherstep,randInt,randFloat,randFloatSpread,seededRandom,degToRad,radToDeg:radToDeg$1,isPowerOfTwo,ceilPowerOfTwo,floorPowerOfTwo,setQuaternionFromProperEuler,normalize,denormalize};class Vector2{constructor(e=0,t=0){Vector2.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,o=this.y,y=e.elements;return this.x=y[0]*t+y[3]*o+y[6],this.y=y[1]*t+y[4]*o+y[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=clamp$1(this.x,e.x,t.x),this.y=clamp$1(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=clamp$1(this.x,e,t),this.y=clamp$1(this.y,e,t),this}clampLength(e,t){const o=this.length();return this.divideScalar(o||1).multiplyScalar(clamp$1(o,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const o=this.dot(e)/t;return Math.acos(clamp$1(o,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,o=this.y-e.y;return t*t+o*o}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,o){return this.x=e.x+(t.x-e.x)*o,this.y=e.y+(t.y-e.y)*o,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const o=Math.cos(t),y=Math.sin(t),R=this.x-e.x,G=this.y-e.y;return this.x=R*o-G*y+e.x,this.y=R*y+G*o+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Matrix3{constructor(e,t,o,y,R,G,K,Y,Q){Matrix3.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,o,y,R,G,K,Y,Q)}set(e,t,o,y,R,G,K,Y,Q){const ee=this.elements;return ee[0]=e,ee[1]=y,ee[2]=K,ee[3]=t,ee[4]=R,ee[5]=Y,ee[6]=o,ee[7]=G,ee[8]=Q,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,o=e.elements;return t[0]=o[0],t[1]=o[1],t[2]=o[2],t[3]=o[3],t[4]=o[4],t[5]=o[5],t[6]=o[6],t[7]=o[7],t[8]=o[8],this}extractBasis(e,t,o){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),o.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const o=e.elements,y=t.elements,R=this.elements,G=o[0],K=o[3],Y=o[6],Q=o[1],ee=o[4],ie=o[7],re=o[2],se=o[5],le=o[8],ce=y[0],oe=y[3],ue=y[6],ge=y[1],ve=y[4],_e=y[7],be=y[2],Re=y[5],Se=y[8];return R[0]=G*ce+K*ge+Y*be,R[3]=G*oe+K*ve+Y*Re,R[6]=G*ue+K*_e+Y*Se,R[1]=Q*ce+ee*ge+ie*be,R[4]=Q*oe+ee*ve+ie*Re,R[7]=Q*ue+ee*_e+ie*Se,R[2]=re*ce+se*ge+le*be,R[5]=re*oe+se*ve+le*Re,R[8]=re*ue+se*_e+le*Se,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],o=e[1],y=e[2],R=e[3],G=e[4],K=e[5],Y=e[6],Q=e[7],ee=e[8];return t*G*ee-t*K*Q-o*R*ee+o*K*Y+y*R*Q-y*G*Y}invert(){const e=this.elements,t=e[0],o=e[1],y=e[2],R=e[3],G=e[4],K=e[5],Y=e[6],Q=e[7],ee=e[8],ie=ee*G-K*Q,re=K*Y-ee*R,se=Q*R-G*Y,le=t*ie+o*re+y*se;if(le===0)return this.set(0,0,0,0,0,0,0,0,0);const ce=1/le;return e[0]=ie*ce,e[1]=(y*Q-ee*o)*ce,e[2]=(K*o-y*G)*ce,e[3]=re*ce,e[4]=(ee*t-y*Y)*ce,e[5]=(y*R-K*t)*ce,e[6]=se*ce,e[7]=(o*Y-Q*t)*ce,e[8]=(G*t-o*R)*ce,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,o,y,R,G,K){const Y=Math.cos(R),Q=Math.sin(R);return this.set(o*Y,o*Q,-o*(Y*G+Q*K)+G+e,-y*Q,y*Y,-y*(-Q*G+Y*K)+K+t,0,0,1),this}scale(e,t){return this.premultiply(_m3.makeScale(e,t)),this}rotate(e){return this.premultiply(_m3.makeRotation(-e)),this}translate(e,t){return this.premultiply(_m3.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),o=Math.sin(e);return this.set(t,-o,0,o,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,o=e.elements;for(let y=0;y<9;y++)if(t[y]!==o[y])return!1;return!0}fromArray(e,t=0){for(let o=0;o<9;o++)this.elements[o]=e[o+t];return this}toArray(e=[],t=0){const o=this.elements;return e[t]=o[0],e[t+1]=o[1],e[t+2]=o[2],e[t+3]=o[3],e[t+4]=o[4],e[t+5]=o[5],e[t+6]=o[6],e[t+7]=o[7],e[t+8]=o[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const _m3=new Matrix3;function arrayNeedsUint32(r){for(let e=r.length-1;e>=0;--e)if(r[e]>=65535)return!0;return!1}const TYPED_ARRAYS={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function getTypedArray(r,e){return new TYPED_ARRAYS[r](e)}function createElementNS(r){return document.createElementNS("http://www.w3.org/1999/xhtml",r)}function createCanvasElement(){const r=createElementNS("canvas");return r.style.display="block",r}const _cache={};function warnOnce(r){r in _cache||(_cache[r]=!0,console.warn(r))}function probeAsync(r,e,t){return new Promise(function(o,y){function R(){switch(r.clientWaitSync(e,r.SYNC_FLUSH_COMMANDS_BIT,0)){case r.WAIT_FAILED:y();break;case r.TIMEOUT_EXPIRED:setTimeout(R,t);break;default:o()}}setTimeout(R,t)})}function toNormalizedProjectionMatrix(r){const e=r.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function toReversedProjectionMatrix(r){const e=r.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}const LINEAR_REC709_TO_XYZ=new Matrix3().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),XYZ_TO_LINEAR_REC709=new Matrix3().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function createColorManagement(){const r={enabled:!0,workingColorSpace:LinearSRGBColorSpace,spaces:{},convert:function(y,R,G){return this.enabled===!1||R===G||!R||!G||(this.spaces[R].transfer===SRGBTransfer&&(y.r=SRGBToLinear(y.r),y.g=SRGBToLinear(y.g),y.b=SRGBToLinear(y.b)),this.spaces[R].primaries!==this.spaces[G].primaries&&(y.applyMatrix3(this.spaces[R].toXYZ),y.applyMatrix3(this.spaces[G].fromXYZ)),this.spaces[G].transfer===SRGBTransfer&&(y.r=LinearToSRGB(y.r),y.g=LinearToSRGB(y.g),y.b=LinearToSRGB(y.b))),y},fromWorkingColorSpace:function(y,R){return this.convert(y,this.workingColorSpace,R)},toWorkingColorSpace:function(y,R){return this.convert(y,R,this.workingColorSpace)},getPrimaries:function(y){return this.spaces[y].primaries},getTransfer:function(y){return y===NoColorSpace?LinearTransfer:this.spaces[y].transfer},getLuminanceCoefficients:function(y,R=this.workingColorSpace){return y.fromArray(this.spaces[R].luminanceCoefficients)},define:function(y){Object.assign(this.spaces,y)},_getMatrix:function(y,R,G){return y.copy(this.spaces[R].toXYZ).multiply(this.spaces[G].fromXYZ)},_getDrawingBufferColorSpace:function(y){return this.spaces[y].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(y=this.workingColorSpace){return this.spaces[y].workingColorSpaceConfig.unpackColorSpace}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],o=[.3127,.329];return r.define({[LinearSRGBColorSpace]:{primaries:e,whitePoint:o,transfer:LinearTransfer,toXYZ:LINEAR_REC709_TO_XYZ,fromXYZ:XYZ_TO_LINEAR_REC709,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:SRGBColorSpace},outputColorSpaceConfig:{drawingBufferColorSpace:SRGBColorSpace}},[SRGBColorSpace]:{primaries:e,whitePoint:o,transfer:SRGBTransfer,toXYZ:LINEAR_REC709_TO_XYZ,fromXYZ:XYZ_TO_LINEAR_REC709,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:SRGBColorSpace}}}),r}const ColorManagement=createColorManagement();function SRGBToLinear(r){return r<.04045?r*.0773993808:Math.pow(r*.9478672986+.0521327014,2.4)}function LinearToSRGB(r){return r<.0031308?r*12.92:1.055*Math.pow(r,.41666)-.055}let _canvas;class ImageUtils{static getDataURL(e,t="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let o;if(e instanceof HTMLCanvasElement)o=e;else{_canvas===void 0&&(_canvas=createElementNS("canvas")),_canvas.width=e.width,_canvas.height=e.height;const y=_canvas.getContext("2d");e instanceof ImageData?y.putImageData(e,0,0):y.drawImage(e,0,0,e.width,e.height),o=_canvas}return o.toDataURL(t)}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=createElementNS("canvas");t.width=e.width,t.height=e.height;const o=t.getContext("2d");o.drawImage(e,0,0,e.width,e.height);const y=o.getImageData(0,0,e.width,e.height),R=y.data;for(let G=0;G<R.length;G++)R[G]=SRGBToLinear(R[G]/255)*255;return o.putImageData(y,0,0),t}else if(e.data){const t=e.data.slice(0);for(let o=0;o<t.length;o++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[o]=Math.floor(SRGBToLinear(t[o]/255)*255):t[o]=SRGBToLinear(t[o]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let _sourceId=0;class Source{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:_sourceId++}),this.uuid=generateUUID(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const o={uuid:this.uuid,url:""},y=this.data;if(y!==null){let R;if(Array.isArray(y)){R=[];for(let G=0,K=y.length;G<K;G++)y[G].isDataTexture?R.push(serializeImage(y[G].image)):R.push(serializeImage(y[G]))}else R=serializeImage(y);o.url=R}return t||(e.images[this.uuid]=o),o}}function serializeImage(r){return typeof HTMLImageElement<"u"&&r instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&r instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&r instanceof ImageBitmap?ImageUtils.getDataURL(r):r.data?{data:Array.from(r.data),width:r.width,height:r.height,type:r.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let _textureId=0;class Texture extends EventDispatcher$1{constructor(e=Texture.DEFAULT_IMAGE,t=Texture.DEFAULT_MAPPING,o=ClampToEdgeWrapping,y=ClampToEdgeWrapping,R=LinearFilter,G=LinearMipmapLinearFilter,K=RGBAFormat,Y=UnsignedByteType,Q=Texture.DEFAULT_ANISOTROPY,ee=NoColorSpace){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:_textureId++}),this.uuid=generateUUID(),this.name="",this.source=new Source(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=o,this.wrapT=y,this.magFilter=R,this.minFilter=G,this.anisotropy=Q,this.format=K,this.internalFormat=null,this.type=Y,this.offset=new Vector2(0,0),this.repeat=new Vector2(1,1),this.center=new Vector2(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Matrix3,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=ee,this.userData={},this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const o={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(o.userData=this.userData),t||(e.textures[this.uuid]=o),o}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==UVMapping)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case RepeatWrapping:e.x=e.x-Math.floor(e.x);break;case ClampToEdgeWrapping:e.x=e.x<0?0:1;break;case MirroredRepeatWrapping:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case RepeatWrapping:e.y=e.y-Math.floor(e.y);break;case ClampToEdgeWrapping:e.y=e.y<0?0:1;break;case MirroredRepeatWrapping:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}Texture.DEFAULT_IMAGE=null;Texture.DEFAULT_MAPPING=UVMapping;Texture.DEFAULT_ANISOTROPY=1;class Vector4{constructor(e=0,t=0,o=0,y=1){Vector4.prototype.isVector4=!0,this.x=e,this.y=t,this.z=o,this.w=y}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,o,y){return this.x=e,this.y=t,this.z=o,this.w=y,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,o=this.y,y=this.z,R=this.w,G=e.elements;return this.x=G[0]*t+G[4]*o+G[8]*y+G[12]*R,this.y=G[1]*t+G[5]*o+G[9]*y+G[13]*R,this.z=G[2]*t+G[6]*o+G[10]*y+G[14]*R,this.w=G[3]*t+G[7]*o+G[11]*y+G[15]*R,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,o,y,R;const Y=e.elements,Q=Y[0],ee=Y[4],ie=Y[8],re=Y[1],se=Y[5],le=Y[9],ce=Y[2],oe=Y[6],ue=Y[10];if(Math.abs(ee-re)<.01&&Math.abs(ie-ce)<.01&&Math.abs(le-oe)<.01){if(Math.abs(ee+re)<.1&&Math.abs(ie+ce)<.1&&Math.abs(le+oe)<.1&&Math.abs(Q+se+ue-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const ve=(Q+1)/2,_e=(se+1)/2,be=(ue+1)/2,Re=(ee+re)/4,Se=(ie+ce)/4,Ee=(le+oe)/4;return ve>_e&&ve>be?ve<.01?(o=0,y=.707106781,R=.707106781):(o=Math.sqrt(ve),y=Re/o,R=Se/o):_e>be?_e<.01?(o=.707106781,y=0,R=.707106781):(y=Math.sqrt(_e),o=Re/y,R=Ee/y):be<.01?(o=.707106781,y=.707106781,R=0):(R=Math.sqrt(be),o=Se/R,y=Ee/R),this.set(o,y,R,t),this}let ge=Math.sqrt((oe-le)*(oe-le)+(ie-ce)*(ie-ce)+(re-ee)*(re-ee));return Math.abs(ge)<.001&&(ge=1),this.x=(oe-le)/ge,this.y=(ie-ce)/ge,this.z=(re-ee)/ge,this.w=Math.acos((Q+se+ue-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=clamp$1(this.x,e.x,t.x),this.y=clamp$1(this.y,e.y,t.y),this.z=clamp$1(this.z,e.z,t.z),this.w=clamp$1(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=clamp$1(this.x,e,t),this.y=clamp$1(this.y,e,t),this.z=clamp$1(this.z,e,t),this.w=clamp$1(this.w,e,t),this}clampLength(e,t){const o=this.length();return this.divideScalar(o||1).multiplyScalar(clamp$1(o,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,o){return this.x=e.x+(t.x-e.x)*o,this.y=e.y+(t.y-e.y)*o,this.z=e.z+(t.z-e.z)*o,this.w=e.w+(t.w-e.w)*o,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class RenderTarget extends EventDispatcher$1{constructor(e=1,t=1,o={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Vector4(0,0,e,t),this.scissorTest=!1,this.viewport=new Vector4(0,0,e,t);const y={width:e,height:t,depth:1};o=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:LinearFilter,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},o);const R=new Texture(y,o.mapping,o.wrapS,o.wrapT,o.magFilter,o.minFilter,o.format,o.type,o.anisotropy,o.colorSpace);R.flipY=!1,R.generateMipmaps=o.generateMipmaps,R.internalFormat=o.internalFormat,this.textures=[];const G=o.count;for(let K=0;K<G;K++)this.textures[K]=R.clone(),this.textures[K].isRenderTargetTexture=!0,this.textures[K].renderTarget=this;this.depthBuffer=o.depthBuffer,this.stencilBuffer=o.stencilBuffer,this.resolveDepthBuffer=o.resolveDepthBuffer,this.resolveStencilBuffer=o.resolveStencilBuffer,this._depthTexture=o.depthTexture,this.samples=o.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,o=1){if(this.width!==e||this.height!==t||this.depth!==o){this.width=e,this.height=t,this.depth=o;for(let y=0,R=this.textures.length;y<R;y++)this.textures[y].image.width=e,this.textures[y].image.height=t,this.textures[y].image.depth=o;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,o=e.textures.length;t<o;t++){this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;const y=Object.assign({},e.textures[t].image);this.textures[t].source=new Source(y)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class WebGLRenderTarget extends RenderTarget{constructor(e=1,t=1,o={}){super(e,t,o),this.isWebGLRenderTarget=!0}}class DataArrayTexture extends Texture{constructor(e=null,t=1,o=1,y=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:o,depth:y},this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.wrapR=ClampToEdgeWrapping,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class WebGLArrayRenderTarget extends WebGLRenderTarget{constructor(e=1,t=1,o=1,y={}){super(e,t,y),this.isWebGLArrayRenderTarget=!0,this.depth=o,this.texture=new DataArrayTexture(null,e,t,o),this.texture.isRenderTargetTexture=!0}}class Data3DTexture extends Texture{constructor(e=null,t=1,o=1,y=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:o,depth:y},this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.wrapR=ClampToEdgeWrapping,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class WebGL3DRenderTarget extends WebGLRenderTarget{constructor(e=1,t=1,o=1,y={}){super(e,t,y),this.isWebGL3DRenderTarget=!0,this.depth=o,this.texture=new Data3DTexture(null,e,t,o),this.texture.isRenderTargetTexture=!0}}class Quaternion{constructor(e=0,t=0,o=0,y=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=o,this._w=y}static slerpFlat(e,t,o,y,R,G,K){let Y=o[y+0],Q=o[y+1],ee=o[y+2],ie=o[y+3];const re=R[G+0],se=R[G+1],le=R[G+2],ce=R[G+3];if(K===0){e[t+0]=Y,e[t+1]=Q,e[t+2]=ee,e[t+3]=ie;return}if(K===1){e[t+0]=re,e[t+1]=se,e[t+2]=le,e[t+3]=ce;return}if(ie!==ce||Y!==re||Q!==se||ee!==le){let oe=1-K;const ue=Y*re+Q*se+ee*le+ie*ce,ge=ue>=0?1:-1,ve=1-ue*ue;if(ve>Number.EPSILON){const be=Math.sqrt(ve),Re=Math.atan2(be,ue*ge);oe=Math.sin(oe*Re)/be,K=Math.sin(K*Re)/be}const _e=K*ge;if(Y=Y*oe+re*_e,Q=Q*oe+se*_e,ee=ee*oe+le*_e,ie=ie*oe+ce*_e,oe===1-K){const be=1/Math.sqrt(Y*Y+Q*Q+ee*ee+ie*ie);Y*=be,Q*=be,ee*=be,ie*=be}}e[t]=Y,e[t+1]=Q,e[t+2]=ee,e[t+3]=ie}static multiplyQuaternionsFlat(e,t,o,y,R,G){const K=o[y],Y=o[y+1],Q=o[y+2],ee=o[y+3],ie=R[G],re=R[G+1],se=R[G+2],le=R[G+3];return e[t]=K*le+ee*ie+Y*se-Q*re,e[t+1]=Y*le+ee*re+Q*ie-K*se,e[t+2]=Q*le+ee*se+K*re-Y*ie,e[t+3]=ee*le-K*ie-Y*re-Q*se,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,o,y){return this._x=e,this._y=t,this._z=o,this._w=y,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const o=e._x,y=e._y,R=e._z,G=e._order,K=Math.cos,Y=Math.sin,Q=K(o/2),ee=K(y/2),ie=K(R/2),re=Y(o/2),se=Y(y/2),le=Y(R/2);switch(G){case"XYZ":this._x=re*ee*ie+Q*se*le,this._y=Q*se*ie-re*ee*le,this._z=Q*ee*le+re*se*ie,this._w=Q*ee*ie-re*se*le;break;case"YXZ":this._x=re*ee*ie+Q*se*le,this._y=Q*se*ie-re*ee*le,this._z=Q*ee*le-re*se*ie,this._w=Q*ee*ie+re*se*le;break;case"ZXY":this._x=re*ee*ie-Q*se*le,this._y=Q*se*ie+re*ee*le,this._z=Q*ee*le+re*se*ie,this._w=Q*ee*ie-re*se*le;break;case"ZYX":this._x=re*ee*ie-Q*se*le,this._y=Q*se*ie+re*ee*le,this._z=Q*ee*le-re*se*ie,this._w=Q*ee*ie+re*se*le;break;case"YZX":this._x=re*ee*ie+Q*se*le,this._y=Q*se*ie+re*ee*le,this._z=Q*ee*le-re*se*ie,this._w=Q*ee*ie-re*se*le;break;case"XZY":this._x=re*ee*ie-Q*se*le,this._y=Q*se*ie-re*ee*le,this._z=Q*ee*le+re*se*ie,this._w=Q*ee*ie+re*se*le;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+G)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const o=t/2,y=Math.sin(o);return this._x=e.x*y,this._y=e.y*y,this._z=e.z*y,this._w=Math.cos(o),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,o=t[0],y=t[4],R=t[8],G=t[1],K=t[5],Y=t[9],Q=t[2],ee=t[6],ie=t[10],re=o+K+ie;if(re>0){const se=.5/Math.sqrt(re+1);this._w=.25/se,this._x=(ee-Y)*se,this._y=(R-Q)*se,this._z=(G-y)*se}else if(o>K&&o>ie){const se=2*Math.sqrt(1+o-K-ie);this._w=(ee-Y)/se,this._x=.25*se,this._y=(y+G)/se,this._z=(R+Q)/se}else if(K>ie){const se=2*Math.sqrt(1+K-o-ie);this._w=(R-Q)/se,this._x=(y+G)/se,this._y=.25*se,this._z=(Y+ee)/se}else{const se=2*Math.sqrt(1+ie-o-K);this._w=(G-y)/se,this._x=(R+Q)/se,this._y=(Y+ee)/se,this._z=.25*se}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let o=e.dot(t)+1;return o<Number.EPSILON?(o=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=o):(this._x=0,this._y=-e.z,this._z=e.y,this._w=o)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=o),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(clamp$1(this.dot(e),-1,1)))}rotateTowards(e,t){const o=this.angleTo(e);if(o===0)return this;const y=Math.min(1,t/o);return this.slerp(e,y),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const o=e._x,y=e._y,R=e._z,G=e._w,K=t._x,Y=t._y,Q=t._z,ee=t._w;return this._x=o*ee+G*K+y*Q-R*Y,this._y=y*ee+G*Y+R*K-o*Q,this._z=R*ee+G*Q+o*Y-y*K,this._w=G*ee-o*K-y*Y-R*Q,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const o=this._x,y=this._y,R=this._z,G=this._w;let K=G*e._w+o*e._x+y*e._y+R*e._z;if(K<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,K=-K):this.copy(e),K>=1)return this._w=G,this._x=o,this._y=y,this._z=R,this;const Y=1-K*K;if(Y<=Number.EPSILON){const se=1-t;return this._w=se*G+t*this._w,this._x=se*o+t*this._x,this._y=se*y+t*this._y,this._z=se*R+t*this._z,this.normalize(),this}const Q=Math.sqrt(Y),ee=Math.atan2(Q,K),ie=Math.sin((1-t)*ee)/Q,re=Math.sin(t*ee)/Q;return this._w=G*ie+this._w*re,this._x=o*ie+this._x*re,this._y=y*ie+this._y*re,this._z=R*ie+this._z*re,this._onChangeCallback(),this}slerpQuaternions(e,t,o){return this.copy(e).slerp(t,o)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),o=Math.random(),y=Math.sqrt(1-o),R=Math.sqrt(o);return this.set(y*Math.sin(e),y*Math.cos(e),R*Math.sin(t),R*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Vector3{constructor(e=0,t=0,o=0){Vector3.prototype.isVector3=!0,this.x=e,this.y=t,this.z=o}set(e,t,o){return o===void 0&&(o=this.z),this.x=e,this.y=t,this.z=o,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(_quaternion$4.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(_quaternion$4.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,o=this.y,y=this.z,R=e.elements;return this.x=R[0]*t+R[3]*o+R[6]*y,this.y=R[1]*t+R[4]*o+R[7]*y,this.z=R[2]*t+R[5]*o+R[8]*y,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,o=this.y,y=this.z,R=e.elements,G=1/(R[3]*t+R[7]*o+R[11]*y+R[15]);return this.x=(R[0]*t+R[4]*o+R[8]*y+R[12])*G,this.y=(R[1]*t+R[5]*o+R[9]*y+R[13])*G,this.z=(R[2]*t+R[6]*o+R[10]*y+R[14])*G,this}applyQuaternion(e){const t=this.x,o=this.y,y=this.z,R=e.x,G=e.y,K=e.z,Y=e.w,Q=2*(G*y-K*o),ee=2*(K*t-R*y),ie=2*(R*o-G*t);return this.x=t+Y*Q+G*ie-K*ee,this.y=o+Y*ee+K*Q-R*ie,this.z=y+Y*ie+R*ee-G*Q,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,o=this.y,y=this.z,R=e.elements;return this.x=R[0]*t+R[4]*o+R[8]*y,this.y=R[1]*t+R[5]*o+R[9]*y,this.z=R[2]*t+R[6]*o+R[10]*y,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=clamp$1(this.x,e.x,t.x),this.y=clamp$1(this.y,e.y,t.y),this.z=clamp$1(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=clamp$1(this.x,e,t),this.y=clamp$1(this.y,e,t),this.z=clamp$1(this.z,e,t),this}clampLength(e,t){const o=this.length();return this.divideScalar(o||1).multiplyScalar(clamp$1(o,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,o){return this.x=e.x+(t.x-e.x)*o,this.y=e.y+(t.y-e.y)*o,this.z=e.z+(t.z-e.z)*o,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const o=e.x,y=e.y,R=e.z,G=t.x,K=t.y,Y=t.z;return this.x=y*Y-R*K,this.y=R*G-o*Y,this.z=o*K-y*G,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const o=e.dot(this)/t;return this.copy(e).multiplyScalar(o)}projectOnPlane(e){return _vector$c.copy(this).projectOnVector(e),this.sub(_vector$c)}reflect(e){return this.sub(_vector$c.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const o=this.dot(e)/t;return Math.acos(clamp$1(o,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,o=this.y-e.y,y=this.z-e.z;return t*t+o*o+y*y}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,o){const y=Math.sin(t)*e;return this.x=y*Math.sin(o),this.y=Math.cos(t)*e,this.z=y*Math.cos(o),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,o){return this.x=e*Math.sin(t),this.y=o,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),o=this.setFromMatrixColumn(e,1).length(),y=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=o,this.z=y,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,o=Math.sqrt(1-t*t);return this.x=o*Math.cos(e),this.y=t,this.z=o*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const _vector$c=new Vector3,_quaternion$4=new Quaternion;class Box3{constructor(e=new Vector3(1/0,1/0,1/0),t=new Vector3(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,o=e.length;t<o;t+=3)this.expandByPoint(_vector$b.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,o=e.count;t<o;t++)this.expandByPoint(_vector$b.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,o=e.length;t<o;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const o=_vector$b.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(o),this.max.copy(e).add(o),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const o=e.geometry;if(o!==void 0){const R=o.getAttribute("position");if(t===!0&&R!==void 0&&e.isInstancedMesh!==!0)for(let G=0,K=R.count;G<K;G++)e.isMesh===!0?e.getVertexPosition(G,_vector$b):_vector$b.fromBufferAttribute(R,G),_vector$b.applyMatrix4(e.matrixWorld),this.expandByPoint(_vector$b);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),_box$4.copy(e.boundingBox)):(o.boundingBox===null&&o.computeBoundingBox(),_box$4.copy(o.boundingBox)),_box$4.applyMatrix4(e.matrixWorld),this.union(_box$4)}const y=e.children;for(let R=0,G=y.length;R<G;R++)this.expandByObject(y[R],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,_vector$b),_vector$b.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,o;return e.normal.x>0?(t=e.normal.x*this.min.x,o=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,o=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,o+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,o+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,o+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,o+=e.normal.z*this.min.z),t<=-e.constant&&o>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(_center),_extents.subVectors(this.max,_center),_v0$2.subVectors(e.a,_center),_v1$7.subVectors(e.b,_center),_v2$4.subVectors(e.c,_center),_f0.subVectors(_v1$7,_v0$2),_f1.subVectors(_v2$4,_v1$7),_f2.subVectors(_v0$2,_v2$4);let t=[0,-_f0.z,_f0.y,0,-_f1.z,_f1.y,0,-_f2.z,_f2.y,_f0.z,0,-_f0.x,_f1.z,0,-_f1.x,_f2.z,0,-_f2.x,-_f0.y,_f0.x,0,-_f1.y,_f1.x,0,-_f2.y,_f2.x,0];return!satForAxes(t,_v0$2,_v1$7,_v2$4,_extents)||(t=[1,0,0,0,1,0,0,0,1],!satForAxes(t,_v0$2,_v1$7,_v2$4,_extents))?!1:(_triangleNormal.crossVectors(_f0,_f1),t=[_triangleNormal.x,_triangleNormal.y,_triangleNormal.z],satForAxes(t,_v0$2,_v1$7,_v2$4,_extents))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,_vector$b).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(_vector$b).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(_points[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),_points[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),_points[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),_points[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),_points[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),_points[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),_points[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),_points[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(_points),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const _points=[new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3],_vector$b=new Vector3,_box$4=new Box3,_v0$2=new Vector3,_v1$7=new Vector3,_v2$4=new Vector3,_f0=new Vector3,_f1=new Vector3,_f2=new Vector3,_center=new Vector3,_extents=new Vector3,_triangleNormal=new Vector3,_testAxis=new Vector3;function satForAxes(r,e,t,o,y){for(let R=0,G=r.length-3;R<=G;R+=3){_testAxis.fromArray(r,R);const K=y.x*Math.abs(_testAxis.x)+y.y*Math.abs(_testAxis.y)+y.z*Math.abs(_testAxis.z),Y=e.dot(_testAxis),Q=t.dot(_testAxis),ee=o.dot(_testAxis);if(Math.max(-Math.max(Y,Q,ee),Math.min(Y,Q,ee))>K)return!1}return!0}const _box$3=new Box3,_v1$6=new Vector3,_v2$3=new Vector3;class Sphere{constructor(e=new Vector3,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const o=this.center;t!==void 0?o.copy(t):_box$3.setFromPoints(e).getCenter(o);let y=0;for(let R=0,G=e.length;R<G;R++)y=Math.max(y,o.distanceToSquared(e[R]));return this.radius=Math.sqrt(y),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const o=this.center.distanceToSquared(e);return t.copy(e),o>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;_v1$6.subVectors(e,this.center);const t=_v1$6.lengthSq();if(t>this.radius*this.radius){const o=Math.sqrt(t),y=(o-this.radius)*.5;this.center.addScaledVector(_v1$6,y/o),this.radius+=y}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(_v2$3.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(_v1$6.copy(e.center).add(_v2$3)),this.expandByPoint(_v1$6.copy(e.center).sub(_v2$3))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const _vector$a=new Vector3,_segCenter=new Vector3,_segDir=new Vector3,_diff=new Vector3,_edge1=new Vector3,_edge2=new Vector3,_normal$1=new Vector3;class Ray{constructor(e=new Vector3,t=new Vector3(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,_vector$a)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const o=t.dot(this.direction);return o<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,o)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=_vector$a.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(_vector$a.copy(this.origin).addScaledVector(this.direction,t),_vector$a.distanceToSquared(e))}distanceSqToSegment(e,t,o,y){_segCenter.copy(e).add(t).multiplyScalar(.5),_segDir.copy(t).sub(e).normalize(),_diff.copy(this.origin).sub(_segCenter);const R=e.distanceTo(t)*.5,G=-this.direction.dot(_segDir),K=_diff.dot(this.direction),Y=-_diff.dot(_segDir),Q=_diff.lengthSq(),ee=Math.abs(1-G*G);let ie,re,se,le;if(ee>0)if(ie=G*Y-K,re=G*K-Y,le=R*ee,ie>=0)if(re>=-le)if(re<=le){const ce=1/ee;ie*=ce,re*=ce,se=ie*(ie+G*re+2*K)+re*(G*ie+re+2*Y)+Q}else re=R,ie=Math.max(0,-(G*re+K)),se=-ie*ie+re*(re+2*Y)+Q;else re=-R,ie=Math.max(0,-(G*re+K)),se=-ie*ie+re*(re+2*Y)+Q;else re<=-le?(ie=Math.max(0,-(-G*R+K)),re=ie>0?-R:Math.min(Math.max(-R,-Y),R),se=-ie*ie+re*(re+2*Y)+Q):re<=le?(ie=0,re=Math.min(Math.max(-R,-Y),R),se=re*(re+2*Y)+Q):(ie=Math.max(0,-(G*R+K)),re=ie>0?R:Math.min(Math.max(-R,-Y),R),se=-ie*ie+re*(re+2*Y)+Q);else re=G>0?-R:R,ie=Math.max(0,-(G*re+K)),se=-ie*ie+re*(re+2*Y)+Q;return o&&o.copy(this.origin).addScaledVector(this.direction,ie),y&&y.copy(_segCenter).addScaledVector(_segDir,re),se}intersectSphere(e,t){_vector$a.subVectors(e.center,this.origin);const o=_vector$a.dot(this.direction),y=_vector$a.dot(_vector$a)-o*o,R=e.radius*e.radius;if(y>R)return null;const G=Math.sqrt(R-y),K=o-G,Y=o+G;return Y<0?null:K<0?this.at(Y,t):this.at(K,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const o=-(this.origin.dot(e.normal)+e.constant)/t;return o>=0?o:null}intersectPlane(e,t){const o=this.distanceToPlane(e);return o===null?null:this.at(o,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let o,y,R,G,K,Y;const Q=1/this.direction.x,ee=1/this.direction.y,ie=1/this.direction.z,re=this.origin;return Q>=0?(o=(e.min.x-re.x)*Q,y=(e.max.x-re.x)*Q):(o=(e.max.x-re.x)*Q,y=(e.min.x-re.x)*Q),ee>=0?(R=(e.min.y-re.y)*ee,G=(e.max.y-re.y)*ee):(R=(e.max.y-re.y)*ee,G=(e.min.y-re.y)*ee),o>G||R>y||((R>o||isNaN(o))&&(o=R),(G<y||isNaN(y))&&(y=G),ie>=0?(K=(e.min.z-re.z)*ie,Y=(e.max.z-re.z)*ie):(K=(e.max.z-re.z)*ie,Y=(e.min.z-re.z)*ie),o>Y||K>y)||((K>o||o!==o)&&(o=K),(Y<y||y!==y)&&(y=Y),y<0)?null:this.at(o>=0?o:y,t)}intersectsBox(e){return this.intersectBox(e,_vector$a)!==null}intersectTriangle(e,t,o,y,R){_edge1.subVectors(t,e),_edge2.subVectors(o,e),_normal$1.crossVectors(_edge1,_edge2);let G=this.direction.dot(_normal$1),K;if(G>0){if(y)return null;K=1}else if(G<0)K=-1,G=-G;else return null;_diff.subVectors(this.origin,e);const Y=K*this.direction.dot(_edge2.crossVectors(_diff,_edge2));if(Y<0)return null;const Q=K*this.direction.dot(_edge1.cross(_diff));if(Q<0||Y+Q>G)return null;const ee=-K*_diff.dot(_normal$1);return ee<0?null:this.at(ee/G,R)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Matrix4{constructor(e,t,o,y,R,G,K,Y,Q,ee,ie,re,se,le,ce,oe){Matrix4.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,o,y,R,G,K,Y,Q,ee,ie,re,se,le,ce,oe)}set(e,t,o,y,R,G,K,Y,Q,ee,ie,re,se,le,ce,oe){const ue=this.elements;return ue[0]=e,ue[4]=t,ue[8]=o,ue[12]=y,ue[1]=R,ue[5]=G,ue[9]=K,ue[13]=Y,ue[2]=Q,ue[6]=ee,ue[10]=ie,ue[14]=re,ue[3]=se,ue[7]=le,ue[11]=ce,ue[15]=oe,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Matrix4().fromArray(this.elements)}copy(e){const t=this.elements,o=e.elements;return t[0]=o[0],t[1]=o[1],t[2]=o[2],t[3]=o[3],t[4]=o[4],t[5]=o[5],t[6]=o[6],t[7]=o[7],t[8]=o[8],t[9]=o[9],t[10]=o[10],t[11]=o[11],t[12]=o[12],t[13]=o[13],t[14]=o[14],t[15]=o[15],this}copyPosition(e){const t=this.elements,o=e.elements;return t[12]=o[12],t[13]=o[13],t[14]=o[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,o){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),o.setFromMatrixColumn(this,2),this}makeBasis(e,t,o){return this.set(e.x,t.x,o.x,0,e.y,t.y,o.y,0,e.z,t.z,o.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,o=e.elements,y=1/_v1$5.setFromMatrixColumn(e,0).length(),R=1/_v1$5.setFromMatrixColumn(e,1).length(),G=1/_v1$5.setFromMatrixColumn(e,2).length();return t[0]=o[0]*y,t[1]=o[1]*y,t[2]=o[2]*y,t[3]=0,t[4]=o[4]*R,t[5]=o[5]*R,t[6]=o[6]*R,t[7]=0,t[8]=o[8]*G,t[9]=o[9]*G,t[10]=o[10]*G,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,o=e.x,y=e.y,R=e.z,G=Math.cos(o),K=Math.sin(o),Y=Math.cos(y),Q=Math.sin(y),ee=Math.cos(R),ie=Math.sin(R);if(e.order==="XYZ"){const re=G*ee,se=G*ie,le=K*ee,ce=K*ie;t[0]=Y*ee,t[4]=-Y*ie,t[8]=Q,t[1]=se+le*Q,t[5]=re-ce*Q,t[9]=-K*Y,t[2]=ce-re*Q,t[6]=le+se*Q,t[10]=G*Y}else if(e.order==="YXZ"){const re=Y*ee,se=Y*ie,le=Q*ee,ce=Q*ie;t[0]=re+ce*K,t[4]=le*K-se,t[8]=G*Q,t[1]=G*ie,t[5]=G*ee,t[9]=-K,t[2]=se*K-le,t[6]=ce+re*K,t[10]=G*Y}else if(e.order==="ZXY"){const re=Y*ee,se=Y*ie,le=Q*ee,ce=Q*ie;t[0]=re-ce*K,t[4]=-G*ie,t[8]=le+se*K,t[1]=se+le*K,t[5]=G*ee,t[9]=ce-re*K,t[2]=-G*Q,t[6]=K,t[10]=G*Y}else if(e.order==="ZYX"){const re=G*ee,se=G*ie,le=K*ee,ce=K*ie;t[0]=Y*ee,t[4]=le*Q-se,t[8]=re*Q+ce,t[1]=Y*ie,t[5]=ce*Q+re,t[9]=se*Q-le,t[2]=-Q,t[6]=K*Y,t[10]=G*Y}else if(e.order==="YZX"){const re=G*Y,se=G*Q,le=K*Y,ce=K*Q;t[0]=Y*ee,t[4]=ce-re*ie,t[8]=le*ie+se,t[1]=ie,t[5]=G*ee,t[9]=-K*ee,t[2]=-Q*ee,t[6]=se*ie+le,t[10]=re-ce*ie}else if(e.order==="XZY"){const re=G*Y,se=G*Q,le=K*Y,ce=K*Q;t[0]=Y*ee,t[4]=-ie,t[8]=Q*ee,t[1]=re*ie+ce,t[5]=G*ee,t[9]=se*ie-le,t[2]=le*ie-se,t[6]=K*ee,t[10]=ce*ie+re}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(_zero,e,_one)}lookAt(e,t,o){const y=this.elements;return _z.subVectors(e,t),_z.lengthSq()===0&&(_z.z=1),_z.normalize(),_x.crossVectors(o,_z),_x.lengthSq()===0&&(Math.abs(o.z)===1?_z.x+=1e-4:_z.z+=1e-4,_z.normalize(),_x.crossVectors(o,_z)),_x.normalize(),_y.crossVectors(_z,_x),y[0]=_x.x,y[4]=_y.x,y[8]=_z.x,y[1]=_x.y,y[5]=_y.y,y[9]=_z.y,y[2]=_x.z,y[6]=_y.z,y[10]=_z.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const o=e.elements,y=t.elements,R=this.elements,G=o[0],K=o[4],Y=o[8],Q=o[12],ee=o[1],ie=o[5],re=o[9],se=o[13],le=o[2],ce=o[6],oe=o[10],ue=o[14],ge=o[3],ve=o[7],_e=o[11],be=o[15],Re=y[0],Se=y[4],Ee=y[8],ye=y[12],de=y[1],Me=y[5],Le=y[9],Pe=y[13],Ue=y[2],$e=y[6],Ve=y[10],Ce=y[14],De=y[3],Oe=y[7],Te=y[11],Ne=y[15];return R[0]=G*Re+K*de+Y*Ue+Q*De,R[4]=G*Se+K*Me+Y*$e+Q*Oe,R[8]=G*Ee+K*Le+Y*Ve+Q*Te,R[12]=G*ye+K*Pe+Y*Ce+Q*Ne,R[1]=ee*Re+ie*de+re*Ue+se*De,R[5]=ee*Se+ie*Me+re*$e+se*Oe,R[9]=ee*Ee+ie*Le+re*Ve+se*Te,R[13]=ee*ye+ie*Pe+re*Ce+se*Ne,R[2]=le*Re+ce*de+oe*Ue+ue*De,R[6]=le*Se+ce*Me+oe*$e+ue*Oe,R[10]=le*Ee+ce*Le+oe*Ve+ue*Te,R[14]=le*ye+ce*Pe+oe*Ce+ue*Ne,R[3]=ge*Re+ve*de+_e*Ue+be*De,R[7]=ge*Se+ve*Me+_e*$e+be*Oe,R[11]=ge*Ee+ve*Le+_e*Ve+be*Te,R[15]=ge*ye+ve*Pe+_e*Ce+be*Ne,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],o=e[4],y=e[8],R=e[12],G=e[1],K=e[5],Y=e[9],Q=e[13],ee=e[2],ie=e[6],re=e[10],se=e[14],le=e[3],ce=e[7],oe=e[11],ue=e[15];return le*(+R*Y*ie-y*Q*ie-R*K*re+o*Q*re+y*K*se-o*Y*se)+ce*(+t*Y*se-t*Q*re+R*G*re-y*G*se+y*Q*ee-R*Y*ee)+oe*(+t*Q*ie-t*K*se-R*G*ie+o*G*se+R*K*ee-o*Q*ee)+ue*(-y*K*ee-t*Y*ie+t*K*re+y*G*ie-o*G*re+o*Y*ee)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,o){const y=this.elements;return e.isVector3?(y[12]=e.x,y[13]=e.y,y[14]=e.z):(y[12]=e,y[13]=t,y[14]=o),this}invert(){const e=this.elements,t=e[0],o=e[1],y=e[2],R=e[3],G=e[4],K=e[5],Y=e[6],Q=e[7],ee=e[8],ie=e[9],re=e[10],se=e[11],le=e[12],ce=e[13],oe=e[14],ue=e[15],ge=ie*oe*Q-ce*re*Q+ce*Y*se-K*oe*se-ie*Y*ue+K*re*ue,ve=le*re*Q-ee*oe*Q-le*Y*se+G*oe*se+ee*Y*ue-G*re*ue,_e=ee*ce*Q-le*ie*Q+le*K*se-G*ce*se-ee*K*ue+G*ie*ue,be=le*ie*Y-ee*ce*Y-le*K*re+G*ce*re+ee*K*oe-G*ie*oe,Re=t*ge+o*ve+y*_e+R*be;if(Re===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const Se=1/Re;return e[0]=ge*Se,e[1]=(ce*re*R-ie*oe*R-ce*y*se+o*oe*se+ie*y*ue-o*re*ue)*Se,e[2]=(K*oe*R-ce*Y*R+ce*y*Q-o*oe*Q-K*y*ue+o*Y*ue)*Se,e[3]=(ie*Y*R-K*re*R-ie*y*Q+o*re*Q+K*y*se-o*Y*se)*Se,e[4]=ve*Se,e[5]=(ee*oe*R-le*re*R+le*y*se-t*oe*se-ee*y*ue+t*re*ue)*Se,e[6]=(le*Y*R-G*oe*R-le*y*Q+t*oe*Q+G*y*ue-t*Y*ue)*Se,e[7]=(G*re*R-ee*Y*R+ee*y*Q-t*re*Q-G*y*se+t*Y*se)*Se,e[8]=_e*Se,e[9]=(le*ie*R-ee*ce*R-le*o*se+t*ce*se+ee*o*ue-t*ie*ue)*Se,e[10]=(G*ce*R-le*K*R+le*o*Q-t*ce*Q-G*o*ue+t*K*ue)*Se,e[11]=(ee*K*R-G*ie*R-ee*o*Q+t*ie*Q+G*o*se-t*K*se)*Se,e[12]=be*Se,e[13]=(ee*ce*y-le*ie*y+le*o*re-t*ce*re-ee*o*oe+t*ie*oe)*Se,e[14]=(le*K*y-G*ce*y-le*o*Y+t*ce*Y+G*o*oe-t*K*oe)*Se,e[15]=(G*ie*y-ee*K*y+ee*o*Y-t*ie*Y-G*o*re+t*K*re)*Se,this}scale(e){const t=this.elements,o=e.x,y=e.y,R=e.z;return t[0]*=o,t[4]*=y,t[8]*=R,t[1]*=o,t[5]*=y,t[9]*=R,t[2]*=o,t[6]*=y,t[10]*=R,t[3]*=o,t[7]*=y,t[11]*=R,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],o=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],y=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,o,y))}makeTranslation(e,t,o){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,o,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),o=Math.sin(e);return this.set(1,0,0,0,0,t,-o,0,0,o,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),o=Math.sin(e);return this.set(t,0,o,0,0,1,0,0,-o,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),o=Math.sin(e);return this.set(t,-o,0,0,o,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const o=Math.cos(t),y=Math.sin(t),R=1-o,G=e.x,K=e.y,Y=e.z,Q=R*G,ee=R*K;return this.set(Q*G+o,Q*K-y*Y,Q*Y+y*K,0,Q*K+y*Y,ee*K+o,ee*Y-y*G,0,Q*Y-y*K,ee*Y+y*G,R*Y*Y+o,0,0,0,0,1),this}makeScale(e,t,o){return this.set(e,0,0,0,0,t,0,0,0,0,o,0,0,0,0,1),this}makeShear(e,t,o,y,R,G){return this.set(1,o,R,0,e,1,G,0,t,y,1,0,0,0,0,1),this}compose(e,t,o){const y=this.elements,R=t._x,G=t._y,K=t._z,Y=t._w,Q=R+R,ee=G+G,ie=K+K,re=R*Q,se=R*ee,le=R*ie,ce=G*ee,oe=G*ie,ue=K*ie,ge=Y*Q,ve=Y*ee,_e=Y*ie,be=o.x,Re=o.y,Se=o.z;return y[0]=(1-(ce+ue))*be,y[1]=(se+_e)*be,y[2]=(le-ve)*be,y[3]=0,y[4]=(se-_e)*Re,y[5]=(1-(re+ue))*Re,y[6]=(oe+ge)*Re,y[7]=0,y[8]=(le+ve)*Se,y[9]=(oe-ge)*Se,y[10]=(1-(re+ce))*Se,y[11]=0,y[12]=e.x,y[13]=e.y,y[14]=e.z,y[15]=1,this}decompose(e,t,o){const y=this.elements;let R=_v1$5.set(y[0],y[1],y[2]).length();const G=_v1$5.set(y[4],y[5],y[6]).length(),K=_v1$5.set(y[8],y[9],y[10]).length();this.determinant()<0&&(R=-R),e.x=y[12],e.y=y[13],e.z=y[14],_m1$2.copy(this);const Q=1/R,ee=1/G,ie=1/K;return _m1$2.elements[0]*=Q,_m1$2.elements[1]*=Q,_m1$2.elements[2]*=Q,_m1$2.elements[4]*=ee,_m1$2.elements[5]*=ee,_m1$2.elements[6]*=ee,_m1$2.elements[8]*=ie,_m1$2.elements[9]*=ie,_m1$2.elements[10]*=ie,t.setFromRotationMatrix(_m1$2),o.x=R,o.y=G,o.z=K,this}makePerspective(e,t,o,y,R,G,K=WebGLCoordinateSystem){const Y=this.elements,Q=2*R/(t-e),ee=2*R/(o-y),ie=(t+e)/(t-e),re=(o+y)/(o-y);let se,le;if(K===WebGLCoordinateSystem)se=-(G+R)/(G-R),le=-2*G*R/(G-R);else if(K===WebGPUCoordinateSystem)se=-G/(G-R),le=-G*R/(G-R);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+K);return Y[0]=Q,Y[4]=0,Y[8]=ie,Y[12]=0,Y[1]=0,Y[5]=ee,Y[9]=re,Y[13]=0,Y[2]=0,Y[6]=0,Y[10]=se,Y[14]=le,Y[3]=0,Y[7]=0,Y[11]=-1,Y[15]=0,this}makeOrthographic(e,t,o,y,R,G,K=WebGLCoordinateSystem){const Y=this.elements,Q=1/(t-e),ee=1/(o-y),ie=1/(G-R),re=(t+e)*Q,se=(o+y)*ee;let le,ce;if(K===WebGLCoordinateSystem)le=(G+R)*ie,ce=-2*ie;else if(K===WebGPUCoordinateSystem)le=R*ie,ce=-1*ie;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+K);return Y[0]=2*Q,Y[4]=0,Y[8]=0,Y[12]=-re,Y[1]=0,Y[5]=2*ee,Y[9]=0,Y[13]=-se,Y[2]=0,Y[6]=0,Y[10]=ce,Y[14]=-le,Y[3]=0,Y[7]=0,Y[11]=0,Y[15]=1,this}equals(e){const t=this.elements,o=e.elements;for(let y=0;y<16;y++)if(t[y]!==o[y])return!1;return!0}fromArray(e,t=0){for(let o=0;o<16;o++)this.elements[o]=e[o+t];return this}toArray(e=[],t=0){const o=this.elements;return e[t]=o[0],e[t+1]=o[1],e[t+2]=o[2],e[t+3]=o[3],e[t+4]=o[4],e[t+5]=o[5],e[t+6]=o[6],e[t+7]=o[7],e[t+8]=o[8],e[t+9]=o[9],e[t+10]=o[10],e[t+11]=o[11],e[t+12]=o[12],e[t+13]=o[13],e[t+14]=o[14],e[t+15]=o[15],e}}const _v1$5=new Vector3,_m1$2=new Matrix4,_zero=new Vector3(0,0,0),_one=new Vector3(1,1,1),_x=new Vector3,_y=new Vector3,_z=new Vector3,_matrix$2=new Matrix4,_quaternion$3=new Quaternion;class Euler{constructor(e=0,t=0,o=0,y=Euler.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=o,this._order=y}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,o,y=this._order){return this._x=e,this._y=t,this._z=o,this._order=y,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,o=!0){const y=e.elements,R=y[0],G=y[4],K=y[8],Y=y[1],Q=y[5],ee=y[9],ie=y[2],re=y[6],se=y[10];switch(t){case"XYZ":this._y=Math.asin(clamp$1(K,-1,1)),Math.abs(K)<.9999999?(this._x=Math.atan2(-ee,se),this._z=Math.atan2(-G,R)):(this._x=Math.atan2(re,Q),this._z=0);break;case"YXZ":this._x=Math.asin(-clamp$1(ee,-1,1)),Math.abs(ee)<.9999999?(this._y=Math.atan2(K,se),this._z=Math.atan2(Y,Q)):(this._y=Math.atan2(-ie,R),this._z=0);break;case"ZXY":this._x=Math.asin(clamp$1(re,-1,1)),Math.abs(re)<.9999999?(this._y=Math.atan2(-ie,se),this._z=Math.atan2(-G,Q)):(this._y=0,this._z=Math.atan2(Y,R));break;case"ZYX":this._y=Math.asin(-clamp$1(ie,-1,1)),Math.abs(ie)<.9999999?(this._x=Math.atan2(re,se),this._z=Math.atan2(Y,R)):(this._x=0,this._z=Math.atan2(-G,Q));break;case"YZX":this._z=Math.asin(clamp$1(Y,-1,1)),Math.abs(Y)<.9999999?(this._x=Math.atan2(-ee,Q),this._y=Math.atan2(-ie,R)):(this._x=0,this._y=Math.atan2(K,se));break;case"XZY":this._z=Math.asin(-clamp$1(G,-1,1)),Math.abs(G)<.9999999?(this._x=Math.atan2(re,Q),this._y=Math.atan2(K,R)):(this._x=Math.atan2(-ee,se),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,o===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,o){return _matrix$2.makeRotationFromQuaternion(e),this.setFromRotationMatrix(_matrix$2,t,o)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return _quaternion$3.setFromEuler(this),this.setFromQuaternion(_quaternion$3,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Euler.DEFAULT_ORDER="XYZ";class Layers{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let _object3DId=0;const _v1$4=new Vector3,_q1=new Quaternion,_m1$1$1=new Matrix4,_target=new Vector3,_position$3=new Vector3,_scale$2=new Vector3,_quaternion$2=new Quaternion,_xAxis=new Vector3(1,0,0),_yAxis=new Vector3(0,1,0),_zAxis=new Vector3(0,0,1),_addedEvent={type:"added"},_removedEvent={type:"removed"},_childaddedEvent={type:"childadded",child:null},_childremovedEvent={type:"childremoved",child:null};class Object3D extends EventDispatcher$1{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:_object3DId++}),this.uuid=generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Object3D.DEFAULT_UP.clone();const e=new Vector3,t=new Euler,o=new Quaternion,y=new Vector3(1,1,1);function R(){o.setFromEuler(t,!1)}function G(){t.setFromQuaternion(o,void 0,!1)}t._onChange(R),o._onChange(G),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:o},scale:{configurable:!0,enumerable:!0,value:y},modelViewMatrix:{value:new Matrix4},normalMatrix:{value:new Matrix3}}),this.matrix=new Matrix4,this.matrixWorld=new Matrix4,this.matrixAutoUpdate=Object3D.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Object3D.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Layers,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return _q1.setFromAxisAngle(e,t),this.quaternion.multiply(_q1),this}rotateOnWorldAxis(e,t){return _q1.setFromAxisAngle(e,t),this.quaternion.premultiply(_q1),this}rotateX(e){return this.rotateOnAxis(_xAxis,e)}rotateY(e){return this.rotateOnAxis(_yAxis,e)}rotateZ(e){return this.rotateOnAxis(_zAxis,e)}translateOnAxis(e,t){return _v1$4.copy(e).applyQuaternion(this.quaternion),this.position.add(_v1$4.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(_xAxis,e)}translateY(e){return this.translateOnAxis(_yAxis,e)}translateZ(e){return this.translateOnAxis(_zAxis,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(_m1$1$1.copy(this.matrixWorld).invert())}lookAt(e,t,o){e.isVector3?_target.copy(e):_target.set(e,t,o);const y=this.parent;this.updateWorldMatrix(!0,!1),_position$3.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?_m1$1$1.lookAt(_position$3,_target,this.up):_m1$1$1.lookAt(_target,_position$3,this.up),this.quaternion.setFromRotationMatrix(_m1$1$1),y&&(_m1$1$1.extractRotation(y.matrixWorld),_q1.setFromRotationMatrix(_m1$1$1),this.quaternion.premultiply(_q1.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(_addedEvent),_childaddedEvent.child=e,this.dispatchEvent(_childaddedEvent),_childaddedEvent.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let o=0;o<arguments.length;o++)this.remove(arguments[o]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(_removedEvent),_childremovedEvent.child=e,this.dispatchEvent(_childremovedEvent),_childremovedEvent.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),_m1$1$1.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),_m1$1$1.multiply(e.parent.matrixWorld)),e.applyMatrix4(_m1$1$1),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(_addedEvent),_childaddedEvent.child=e,this.dispatchEvent(_childaddedEvent),_childaddedEvent.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let o=0,y=this.children.length;o<y;o++){const G=this.children[o].getObjectByProperty(e,t);if(G!==void 0)return G}}getObjectsByProperty(e,t,o=[]){this[e]===t&&o.push(this);const y=this.children;for(let R=0,G=y.length;R<G;R++)y[R].getObjectsByProperty(e,t,o);return o}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_position$3,e,_scale$2),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_position$3,_quaternion$2,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let o=0,y=t.length;o<y;o++)t[o].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let o=0,y=t.length;o<y;o++)t[o].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let o=0,y=t.length;o<y;o++)t[o].updateMatrixWorld(e)}updateWorldMatrix(e,t){const o=this.parent;if(e===!0&&o!==null&&o.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const y=this.children;for(let R=0,G=y.length;R<G;R++)y[R].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",o={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},o.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const y={};y.uuid=this.uuid,y.type=this.type,this.name!==""&&(y.name=this.name),this.castShadow===!0&&(y.castShadow=!0),this.receiveShadow===!0&&(y.receiveShadow=!0),this.visible===!1&&(y.visible=!1),this.frustumCulled===!1&&(y.frustumCulled=!1),this.renderOrder!==0&&(y.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(y.userData=this.userData),y.layers=this.layers.mask,y.matrix=this.matrix.toArray(),y.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(y.matrixAutoUpdate=!1),this.isInstancedMesh&&(y.type="InstancedMesh",y.count=this.count,y.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(y.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(y.type="BatchedMesh",y.perObjectFrustumCulled=this.perObjectFrustumCulled,y.sortObjects=this.sortObjects,y.drawRanges=this._drawRanges,y.reservedRanges=this._reservedRanges,y.visibility=this._visibility,y.active=this._active,y.bounds=this._bounds.map(K=>({boxInitialized:K.boxInitialized,boxMin:K.box.min.toArray(),boxMax:K.box.max.toArray(),sphereInitialized:K.sphereInitialized,sphereRadius:K.sphere.radius,sphereCenter:K.sphere.center.toArray()})),y.maxInstanceCount=this._maxInstanceCount,y.maxVertexCount=this._maxVertexCount,y.maxIndexCount=this._maxIndexCount,y.geometryInitialized=this._geometryInitialized,y.geometryCount=this._geometryCount,y.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(y.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(y.boundingSphere={center:y.boundingSphere.center.toArray(),radius:y.boundingSphere.radius}),this.boundingBox!==null&&(y.boundingBox={min:y.boundingBox.min.toArray(),max:y.boundingBox.max.toArray()}));function R(K,Y){return K[Y.uuid]===void 0&&(K[Y.uuid]=Y.toJSON(e)),Y.uuid}if(this.isScene)this.background&&(this.background.isColor?y.background=this.background.toJSON():this.background.isTexture&&(y.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(y.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){y.geometry=R(e.geometries,this.geometry);const K=this.geometry.parameters;if(K!==void 0&&K.shapes!==void 0){const Y=K.shapes;if(Array.isArray(Y))for(let Q=0,ee=Y.length;Q<ee;Q++){const ie=Y[Q];R(e.shapes,ie)}else R(e.shapes,Y)}}if(this.isSkinnedMesh&&(y.bindMode=this.bindMode,y.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(R(e.skeletons,this.skeleton),y.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const K=[];for(let Y=0,Q=this.material.length;Y<Q;Y++)K.push(R(e.materials,this.material[Y]));y.material=K}else y.material=R(e.materials,this.material);if(this.children.length>0){y.children=[];for(let K=0;K<this.children.length;K++)y.children.push(this.children[K].toJSON(e).object)}if(this.animations.length>0){y.animations=[];for(let K=0;K<this.animations.length;K++){const Y=this.animations[K];y.animations.push(R(e.animations,Y))}}if(t){const K=G(e.geometries),Y=G(e.materials),Q=G(e.textures),ee=G(e.images),ie=G(e.shapes),re=G(e.skeletons),se=G(e.animations),le=G(e.nodes);K.length>0&&(o.geometries=K),Y.length>0&&(o.materials=Y),Q.length>0&&(o.textures=Q),ee.length>0&&(o.images=ee),ie.length>0&&(o.shapes=ie),re.length>0&&(o.skeletons=re),se.length>0&&(o.animations=se),le.length>0&&(o.nodes=le)}return o.object=y,o;function G(K){const Y=[];for(const Q in K){const ee=K[Q];delete ee.metadata,Y.push(ee)}return Y}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let o=0;o<e.children.length;o++){const y=e.children[o];this.add(y.clone())}return this}}Object3D.DEFAULT_UP=new Vector3(0,1,0);Object3D.DEFAULT_MATRIX_AUTO_UPDATE=!0;Object3D.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const _v0$1=new Vector3,_v1$3=new Vector3,_v2$2=new Vector3,_v3$2=new Vector3,_vab=new Vector3,_vac=new Vector3,_vbc=new Vector3,_vap=new Vector3,_vbp=new Vector3,_vcp=new Vector3,_v40=new Vector4,_v41=new Vector4,_v42=new Vector4;class Triangle{constructor(e=new Vector3,t=new Vector3,o=new Vector3){this.a=e,this.b=t,this.c=o}static getNormal(e,t,o,y){y.subVectors(o,t),_v0$1.subVectors(e,t),y.cross(_v0$1);const R=y.lengthSq();return R>0?y.multiplyScalar(1/Math.sqrt(R)):y.set(0,0,0)}static getBarycoord(e,t,o,y,R){_v0$1.subVectors(y,t),_v1$3.subVectors(o,t),_v2$2.subVectors(e,t);const G=_v0$1.dot(_v0$1),K=_v0$1.dot(_v1$3),Y=_v0$1.dot(_v2$2),Q=_v1$3.dot(_v1$3),ee=_v1$3.dot(_v2$2),ie=G*Q-K*K;if(ie===0)return R.set(0,0,0),null;const re=1/ie,se=(Q*Y-K*ee)*re,le=(G*ee-K*Y)*re;return R.set(1-se-le,le,se)}static containsPoint(e,t,o,y){return this.getBarycoord(e,t,o,y,_v3$2)===null?!1:_v3$2.x>=0&&_v3$2.y>=0&&_v3$2.x+_v3$2.y<=1}static getInterpolation(e,t,o,y,R,G,K,Y){return this.getBarycoord(e,t,o,y,_v3$2)===null?(Y.x=0,Y.y=0,"z"in Y&&(Y.z=0),"w"in Y&&(Y.w=0),null):(Y.setScalar(0),Y.addScaledVector(R,_v3$2.x),Y.addScaledVector(G,_v3$2.y),Y.addScaledVector(K,_v3$2.z),Y)}static getInterpolatedAttribute(e,t,o,y,R,G){return _v40.setScalar(0),_v41.setScalar(0),_v42.setScalar(0),_v40.fromBufferAttribute(e,t),_v41.fromBufferAttribute(e,o),_v42.fromBufferAttribute(e,y),G.setScalar(0),G.addScaledVector(_v40,R.x),G.addScaledVector(_v41,R.y),G.addScaledVector(_v42,R.z),G}static isFrontFacing(e,t,o,y){return _v0$1.subVectors(o,t),_v1$3.subVectors(e,t),_v0$1.cross(_v1$3).dot(y)<0}set(e,t,o){return this.a.copy(e),this.b.copy(t),this.c.copy(o),this}setFromPointsAndIndices(e,t,o,y){return this.a.copy(e[t]),this.b.copy(e[o]),this.c.copy(e[y]),this}setFromAttributeAndIndices(e,t,o,y){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,o),this.c.fromBufferAttribute(e,y),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return _v0$1.subVectors(this.c,this.b),_v1$3.subVectors(this.a,this.b),_v0$1.cross(_v1$3).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Triangle.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Triangle.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,o,y,R){return Triangle.getInterpolation(e,this.a,this.b,this.c,t,o,y,R)}containsPoint(e){return Triangle.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Triangle.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const o=this.a,y=this.b,R=this.c;let G,K;_vab.subVectors(y,o),_vac.subVectors(R,o),_vap.subVectors(e,o);const Y=_vab.dot(_vap),Q=_vac.dot(_vap);if(Y<=0&&Q<=0)return t.copy(o);_vbp.subVectors(e,y);const ee=_vab.dot(_vbp),ie=_vac.dot(_vbp);if(ee>=0&&ie<=ee)return t.copy(y);const re=Y*ie-ee*Q;if(re<=0&&Y>=0&&ee<=0)return G=Y/(Y-ee),t.copy(o).addScaledVector(_vab,G);_vcp.subVectors(e,R);const se=_vab.dot(_vcp),le=_vac.dot(_vcp);if(le>=0&&se<=le)return t.copy(R);const ce=se*Q-Y*le;if(ce<=0&&Q>=0&&le<=0)return K=Q/(Q-le),t.copy(o).addScaledVector(_vac,K);const oe=ee*le-se*ie;if(oe<=0&&ie-ee>=0&&se-le>=0)return _vbc.subVectors(R,y),K=(ie-ee)/(ie-ee+(se-le)),t.copy(y).addScaledVector(_vbc,K);const ue=1/(oe+ce+re);return G=ce*ue,K=re*ue,t.copy(o).addScaledVector(_vab,G).addScaledVector(_vac,K)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const _colorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},_hslA={h:0,s:0,l:0},_hslB={h:0,s:0,l:0};function hue2rgb(r,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?r+(e-r)*6*t:t<1/2?e:t<2/3?r+(e-r)*6*(2/3-t):r}class Color{constructor(e,t,o){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,o)}set(e,t,o){if(t===void 0&&o===void 0){const y=e;y&&y.isColor?this.copy(y):typeof y=="number"?this.setHex(y):typeof y=="string"&&this.setStyle(y)}else this.setRGB(e,t,o);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=SRGBColorSpace){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,ColorManagement.toWorkingColorSpace(this,t),this}setRGB(e,t,o,y=ColorManagement.workingColorSpace){return this.r=e,this.g=t,this.b=o,ColorManagement.toWorkingColorSpace(this,y),this}setHSL(e,t,o,y=ColorManagement.workingColorSpace){if(e=euclideanModulo(e,1),t=clamp$1(t,0,1),o=clamp$1(o,0,1),t===0)this.r=this.g=this.b=o;else{const R=o<=.5?o*(1+t):o+t-o*t,G=2*o-R;this.r=hue2rgb(G,R,e+1/3),this.g=hue2rgb(G,R,e),this.b=hue2rgb(G,R,e-1/3)}return ColorManagement.toWorkingColorSpace(this,y),this}setStyle(e,t=SRGBColorSpace){function o(R){R!==void 0&&parseFloat(R)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let y;if(y=/^(\w+)\(([^\)]*)\)/.exec(e)){let R;const G=y[1],K=y[2];switch(G){case"rgb":case"rgba":if(R=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(K))return o(R[4]),this.setRGB(Math.min(255,parseInt(R[1],10))/255,Math.min(255,parseInt(R[2],10))/255,Math.min(255,parseInt(R[3],10))/255,t);if(R=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(K))return o(R[4]),this.setRGB(Math.min(100,parseInt(R[1],10))/100,Math.min(100,parseInt(R[2],10))/100,Math.min(100,parseInt(R[3],10))/100,t);break;case"hsl":case"hsla":if(R=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(K))return o(R[4]),this.setHSL(parseFloat(R[1])/360,parseFloat(R[2])/100,parseFloat(R[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(y=/^\#([A-Fa-f\d]+)$/.exec(e)){const R=y[1],G=R.length;if(G===3)return this.setRGB(parseInt(R.charAt(0),16)/15,parseInt(R.charAt(1),16)/15,parseInt(R.charAt(2),16)/15,t);if(G===6)return this.setHex(parseInt(R,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=SRGBColorSpace){const o=_colorKeywords[e.toLowerCase()];return o!==void 0?this.setHex(o,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=SRGBToLinear(e.r),this.g=SRGBToLinear(e.g),this.b=SRGBToLinear(e.b),this}copyLinearToSRGB(e){return this.r=LinearToSRGB(e.r),this.g=LinearToSRGB(e.g),this.b=LinearToSRGB(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=SRGBColorSpace){return ColorManagement.fromWorkingColorSpace(_color.copy(this),e),Math.round(clamp$1(_color.r*255,0,255))*65536+Math.round(clamp$1(_color.g*255,0,255))*256+Math.round(clamp$1(_color.b*255,0,255))}getHexString(e=SRGBColorSpace){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=ColorManagement.workingColorSpace){ColorManagement.fromWorkingColorSpace(_color.copy(this),t);const o=_color.r,y=_color.g,R=_color.b,G=Math.max(o,y,R),K=Math.min(o,y,R);let Y,Q;const ee=(K+G)/2;if(K===G)Y=0,Q=0;else{const ie=G-K;switch(Q=ee<=.5?ie/(G+K):ie/(2-G-K),G){case o:Y=(y-R)/ie+(y<R?6:0);break;case y:Y=(R-o)/ie+2;break;case R:Y=(o-y)/ie+4;break}Y/=6}return e.h=Y,e.s=Q,e.l=ee,e}getRGB(e,t=ColorManagement.workingColorSpace){return ColorManagement.fromWorkingColorSpace(_color.copy(this),t),e.r=_color.r,e.g=_color.g,e.b=_color.b,e}getStyle(e=SRGBColorSpace){ColorManagement.fromWorkingColorSpace(_color.copy(this),e);const t=_color.r,o=_color.g,y=_color.b;return e!==SRGBColorSpace?`color(${e} ${t.toFixed(3)} ${o.toFixed(3)} ${y.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(o*255)},${Math.round(y*255)})`}offsetHSL(e,t,o){return this.getHSL(_hslA),this.setHSL(_hslA.h+e,_hslA.s+t,_hslA.l+o)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,o){return this.r=e.r+(t.r-e.r)*o,this.g=e.g+(t.g-e.g)*o,this.b=e.b+(t.b-e.b)*o,this}lerpHSL(e,t){this.getHSL(_hslA),e.getHSL(_hslB);const o=lerp(_hslA.h,_hslB.h,t),y=lerp(_hslA.s,_hslB.s,t),R=lerp(_hslA.l,_hslB.l,t);return this.setHSL(o,y,R),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,o=this.g,y=this.b,R=e.elements;return this.r=R[0]*t+R[3]*o+R[6]*y,this.g=R[1]*t+R[4]*o+R[7]*y,this.b=R[2]*t+R[5]*o+R[8]*y,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const _color=new Color;Color.NAMES=_colorKeywords;let _materialId=0;class Material extends EventDispatcher$1{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:_materialId++}),this.uuid=generateUUID(),this.name="",this.type="Material",this.blending=NormalBlending,this.side=FrontSide,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=SrcAlphaFactor,this.blendDst=OneMinusSrcAlphaFactor,this.blendEquation=AddEquation,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Color(0,0,0),this.blendAlpha=0,this.depthFunc=LessEqualDepth,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=AlwaysStencilFunc,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=KeepStencilOp,this.stencilZFail=KeepStencilOp,this.stencilZPass=KeepStencilOp,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const o=e[t];if(o===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const y=this[t];if(y===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}y&&y.isColor?y.set(o):y&&y.isVector3&&o&&o.isVector3?y.copy(o):this[t]=o}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const o={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};o.uuid=this.uuid,o.type=this.type,this.name!==""&&(o.name=this.name),this.color&&this.color.isColor&&(o.color=this.color.getHex()),this.roughness!==void 0&&(o.roughness=this.roughness),this.metalness!==void 0&&(o.metalness=this.metalness),this.sheen!==void 0&&(o.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(o.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(o.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(o.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(o.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(o.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(o.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(o.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(o.shininess=this.shininess),this.clearcoat!==void 0&&(o.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(o.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(o.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(o.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(o.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,o.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(o.dispersion=this.dispersion),this.iridescence!==void 0&&(o.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(o.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(o.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(o.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(o.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(o.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(o.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(o.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(o.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(o.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(o.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(o.lightMap=this.lightMap.toJSON(e).uuid,o.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(o.aoMap=this.aoMap.toJSON(e).uuid,o.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(o.bumpMap=this.bumpMap.toJSON(e).uuid,o.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(o.normalMap=this.normalMap.toJSON(e).uuid,o.normalMapType=this.normalMapType,o.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(o.displacementMap=this.displacementMap.toJSON(e).uuid,o.displacementScale=this.displacementScale,o.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(o.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(o.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(o.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(o.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(o.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(o.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(o.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(o.combine=this.combine)),this.envMapRotation!==void 0&&(o.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(o.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(o.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(o.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(o.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(o.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(o.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(o.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(o.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(o.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(o.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(o.size=this.size),this.shadowSide!==null&&(o.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(o.sizeAttenuation=this.sizeAttenuation),this.blending!==NormalBlending&&(o.blending=this.blending),this.side!==FrontSide&&(o.side=this.side),this.vertexColors===!0&&(o.vertexColors=!0),this.opacity<1&&(o.opacity=this.opacity),this.transparent===!0&&(o.transparent=!0),this.blendSrc!==SrcAlphaFactor&&(o.blendSrc=this.blendSrc),this.blendDst!==OneMinusSrcAlphaFactor&&(o.blendDst=this.blendDst),this.blendEquation!==AddEquation&&(o.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(o.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(o.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(o.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(o.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(o.blendAlpha=this.blendAlpha),this.depthFunc!==LessEqualDepth&&(o.depthFunc=this.depthFunc),this.depthTest===!1&&(o.depthTest=this.depthTest),this.depthWrite===!1&&(o.depthWrite=this.depthWrite),this.colorWrite===!1&&(o.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(o.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==AlwaysStencilFunc&&(o.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(o.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(o.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==KeepStencilOp&&(o.stencilFail=this.stencilFail),this.stencilZFail!==KeepStencilOp&&(o.stencilZFail=this.stencilZFail),this.stencilZPass!==KeepStencilOp&&(o.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(o.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(o.rotation=this.rotation),this.polygonOffset===!0&&(o.polygonOffset=!0),this.polygonOffsetFactor!==0&&(o.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(o.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(o.linewidth=this.linewidth),this.dashSize!==void 0&&(o.dashSize=this.dashSize),this.gapSize!==void 0&&(o.gapSize=this.gapSize),this.scale!==void 0&&(o.scale=this.scale),this.dithering===!0&&(o.dithering=!0),this.alphaTest>0&&(o.alphaTest=this.alphaTest),this.alphaHash===!0&&(o.alphaHash=!0),this.alphaToCoverage===!0&&(o.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(o.premultipliedAlpha=!0),this.forceSinglePass===!0&&(o.forceSinglePass=!0),this.wireframe===!0&&(o.wireframe=!0),this.wireframeLinewidth>1&&(o.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(o.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(o.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(o.flatShading=!0),this.visible===!1&&(o.visible=!1),this.toneMapped===!1&&(o.toneMapped=!1),this.fog===!1&&(o.fog=!1),Object.keys(this.userData).length>0&&(o.userData=this.userData);function y(R){const G=[];for(const K in R){const Y=R[K];delete Y.metadata,G.push(Y)}return G}if(t){const R=y(e.textures),G=y(e.images);R.length>0&&(o.textures=R),G.length>0&&(o.images=G)}return o}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let o=null;if(t!==null){const y=t.length;o=new Array(y);for(let R=0;R!==y;++R)o[R]=t[R].clone()}return this.clippingPlanes=o,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class MeshBasicMaterial extends Material{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Color(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Euler,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const _tables=_generateTables();function _generateTables(){const r=new ArrayBuffer(4),e=new Float32Array(r),t=new Uint32Array(r),o=new Uint32Array(512),y=new Uint32Array(512);for(let Y=0;Y<256;++Y){const Q=Y-127;Q<-27?(o[Y]=0,o[Y|256]=32768,y[Y]=24,y[Y|256]=24):Q<-14?(o[Y]=1024>>-Q-14,o[Y|256]=1024>>-Q-14|32768,y[Y]=-Q-1,y[Y|256]=-Q-1):Q<=15?(o[Y]=Q+15<<10,o[Y|256]=Q+15<<10|32768,y[Y]=13,y[Y|256]=13):Q<128?(o[Y]=31744,o[Y|256]=64512,y[Y]=24,y[Y|256]=24):(o[Y]=31744,o[Y|256]=64512,y[Y]=13,y[Y|256]=13)}const R=new Uint32Array(2048),G=new Uint32Array(64),K=new Uint32Array(64);for(let Y=1;Y<1024;++Y){let Q=Y<<13,ee=0;for(;(Q&8388608)===0;)Q<<=1,ee-=8388608;Q&=-8388609,ee+=947912704,R[Y]=Q|ee}for(let Y=1024;Y<2048;++Y)R[Y]=939524096+(Y-1024<<13);for(let Y=1;Y<31;++Y)G[Y]=Y<<23;G[31]=1199570944,G[32]=2147483648;for(let Y=33;Y<63;++Y)G[Y]=2147483648+(Y-32<<23);G[63]=3347054592;for(let Y=1;Y<64;++Y)Y!==32&&(K[Y]=1024);return{floatView:e,uint32View:t,baseTable:o,shiftTable:y,mantissaTable:R,exponentTable:G,offsetTable:K}}function toHalfFloat(r){Math.abs(r)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),r=clamp$1(r,-65504,65504),_tables.floatView[0]=r;const e=_tables.uint32View[0],t=e>>23&511;return _tables.baseTable[t]+((e&8388607)>>_tables.shiftTable[t])}function fromHalfFloat(r){const e=r>>10;return _tables.uint32View[0]=_tables.mantissaTable[_tables.offsetTable[e]+(r&1023)]+_tables.exponentTable[e],_tables.floatView[0]}class DataUtils{static toHalfFloat(e){return toHalfFloat(e)}static fromHalfFloat(e){return fromHalfFloat(e)}}const _vector$9=new Vector3,_vector2$1=new Vector2;let _id$2=0;class BufferAttribute{constructor(e,t,o=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:_id$2++}),this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=o,this.usage=StaticDrawUsage,this.updateRanges=[],this.gpuType=FloatType,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,o){e*=this.itemSize,o*=t.itemSize;for(let y=0,R=this.itemSize;y<R;y++)this.array[e+y]=t.array[o+y];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,o=this.count;t<o;t++)_vector2$1.fromBufferAttribute(this,t),_vector2$1.applyMatrix3(e),this.setXY(t,_vector2$1.x,_vector2$1.y);else if(this.itemSize===3)for(let t=0,o=this.count;t<o;t++)_vector$9.fromBufferAttribute(this,t),_vector$9.applyMatrix3(e),this.setXYZ(t,_vector$9.x,_vector$9.y,_vector$9.z);return this}applyMatrix4(e){for(let t=0,o=this.count;t<o;t++)_vector$9.fromBufferAttribute(this,t),_vector$9.applyMatrix4(e),this.setXYZ(t,_vector$9.x,_vector$9.y,_vector$9.z);return this}applyNormalMatrix(e){for(let t=0,o=this.count;t<o;t++)_vector$9.fromBufferAttribute(this,t),_vector$9.applyNormalMatrix(e),this.setXYZ(t,_vector$9.x,_vector$9.y,_vector$9.z);return this}transformDirection(e){for(let t=0,o=this.count;t<o;t++)_vector$9.fromBufferAttribute(this,t),_vector$9.transformDirection(e),this.setXYZ(t,_vector$9.x,_vector$9.y,_vector$9.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let o=this.array[e*this.itemSize+t];return this.normalized&&(o=denormalize(o,this.array)),o}setComponent(e,t,o){return this.normalized&&(o=normalize(o,this.array)),this.array[e*this.itemSize+t]=o,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=denormalize(t,this.array)),t}setX(e,t){return this.normalized&&(t=normalize(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=denormalize(t,this.array)),t}setY(e,t){return this.normalized&&(t=normalize(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=denormalize(t,this.array)),t}setZ(e,t){return this.normalized&&(t=normalize(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=denormalize(t,this.array)),t}setW(e,t){return this.normalized&&(t=normalize(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,o){return e*=this.itemSize,this.normalized&&(t=normalize(t,this.array),o=normalize(o,this.array)),this.array[e+0]=t,this.array[e+1]=o,this}setXYZ(e,t,o,y){return e*=this.itemSize,this.normalized&&(t=normalize(t,this.array),o=normalize(o,this.array),y=normalize(y,this.array)),this.array[e+0]=t,this.array[e+1]=o,this.array[e+2]=y,this}setXYZW(e,t,o,y,R){return e*=this.itemSize,this.normalized&&(t=normalize(t,this.array),o=normalize(o,this.array),y=normalize(y,this.array),R=normalize(R,this.array)),this.array[e+0]=t,this.array[e+1]=o,this.array[e+2]=y,this.array[e+3]=R,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==StaticDrawUsage&&(e.usage=this.usage),e}}class Int8BufferAttribute extends BufferAttribute{constructor(e,t,o){super(new Int8Array(e),t,o)}}class Uint8BufferAttribute extends BufferAttribute{constructor(e,t,o){super(new Uint8Array(e),t,o)}}class Uint8ClampedBufferAttribute extends BufferAttribute{constructor(e,t,o){super(new Uint8ClampedArray(e),t,o)}}class Int16BufferAttribute extends BufferAttribute{constructor(e,t,o){super(new Int16Array(e),t,o)}}class Uint16BufferAttribute extends BufferAttribute{constructor(e,t,o){super(new Uint16Array(e),t,o)}}class Int32BufferAttribute extends BufferAttribute{constructor(e,t,o){super(new Int32Array(e),t,o)}}class Uint32BufferAttribute extends BufferAttribute{constructor(e,t,o){super(new Uint32Array(e),t,o)}}class Float16BufferAttribute extends BufferAttribute{constructor(e,t,o){super(new Uint16Array(e),t,o),this.isFloat16BufferAttribute=!0}getX(e){let t=fromHalfFloat(this.array[e*this.itemSize]);return this.normalized&&(t=denormalize(t,this.array)),t}setX(e,t){return this.normalized&&(t=normalize(t,this.array)),this.array[e*this.itemSize]=toHalfFloat(t),this}getY(e){let t=fromHalfFloat(this.array[e*this.itemSize+1]);return this.normalized&&(t=denormalize(t,this.array)),t}setY(e,t){return this.normalized&&(t=normalize(t,this.array)),this.array[e*this.itemSize+1]=toHalfFloat(t),this}getZ(e){let t=fromHalfFloat(this.array[e*this.itemSize+2]);return this.normalized&&(t=denormalize(t,this.array)),t}setZ(e,t){return this.normalized&&(t=normalize(t,this.array)),this.array[e*this.itemSize+2]=toHalfFloat(t),this}getW(e){let t=fromHalfFloat(this.array[e*this.itemSize+3]);return this.normalized&&(t=denormalize(t,this.array)),t}setW(e,t){return this.normalized&&(t=normalize(t,this.array)),this.array[e*this.itemSize+3]=toHalfFloat(t),this}setXY(e,t,o){return e*=this.itemSize,this.normalized&&(t=normalize(t,this.array),o=normalize(o,this.array)),this.array[e+0]=toHalfFloat(t),this.array[e+1]=toHalfFloat(o),this}setXYZ(e,t,o,y){return e*=this.itemSize,this.normalized&&(t=normalize(t,this.array),o=normalize(o,this.array),y=normalize(y,this.array)),this.array[e+0]=toHalfFloat(t),this.array[e+1]=toHalfFloat(o),this.array[e+2]=toHalfFloat(y),this}setXYZW(e,t,o,y,R){return e*=this.itemSize,this.normalized&&(t=normalize(t,this.array),o=normalize(o,this.array),y=normalize(y,this.array),R=normalize(R,this.array)),this.array[e+0]=toHalfFloat(t),this.array[e+1]=toHalfFloat(o),this.array[e+2]=toHalfFloat(y),this.array[e+3]=toHalfFloat(R),this}}class Float32BufferAttribute extends BufferAttribute{constructor(e,t,o){super(new Float32Array(e),t,o)}}let _id$1=0;const _m1$3=new Matrix4,_obj=new Object3D,_offset=new Vector3,_box$2=new Box3,_boxMorphTargets=new Box3,_vector$8=new Vector3;class BufferGeometry extends EventDispatcher$1{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:_id$1++}),this.uuid=generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(arrayNeedsUint32(e)?Uint32BufferAttribute:Uint16BufferAttribute)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,o=0){this.groups.push({start:e,count:t,materialIndex:o})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const o=this.attributes.normal;if(o!==void 0){const R=new Matrix3().getNormalMatrix(e);o.applyNormalMatrix(R),o.needsUpdate=!0}const y=this.attributes.tangent;return y!==void 0&&(y.transformDirection(e),y.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return _m1$3.makeRotationFromQuaternion(e),this.applyMatrix4(_m1$3),this}rotateX(e){return _m1$3.makeRotationX(e),this.applyMatrix4(_m1$3),this}rotateY(e){return _m1$3.makeRotationY(e),this.applyMatrix4(_m1$3),this}rotateZ(e){return _m1$3.makeRotationZ(e),this.applyMatrix4(_m1$3),this}translate(e,t,o){return _m1$3.makeTranslation(e,t,o),this.applyMatrix4(_m1$3),this}scale(e,t,o){return _m1$3.makeScale(e,t,o),this.applyMatrix4(_m1$3),this}lookAt(e){return _obj.lookAt(e),_obj.updateMatrix(),this.applyMatrix4(_obj.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(_offset).negate(),this.translate(_offset.x,_offset.y,_offset.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const o=[];for(let y=0,R=e.length;y<R;y++){const G=e[y];o.push(G.x,G.y,G.z||0)}this.setAttribute("position",new Float32BufferAttribute(o,3))}else{const o=Math.min(e.length,t.count);for(let y=0;y<o;y++){const R=e[y];t.setXYZ(y,R.x,R.y,R.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Box3);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new Vector3(-1/0,-1/0,-1/0),new Vector3(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let o=0,y=t.length;o<y;o++){const R=t[o];_box$2.setFromBufferAttribute(R),this.morphTargetsRelative?(_vector$8.addVectors(this.boundingBox.min,_box$2.min),this.boundingBox.expandByPoint(_vector$8),_vector$8.addVectors(this.boundingBox.max,_box$2.max),this.boundingBox.expandByPoint(_vector$8)):(this.boundingBox.expandByPoint(_box$2.min),this.boundingBox.expandByPoint(_box$2.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Sphere);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new Vector3,1/0);return}if(e){const o=this.boundingSphere.center;if(_box$2.setFromBufferAttribute(e),t)for(let R=0,G=t.length;R<G;R++){const K=t[R];_boxMorphTargets.setFromBufferAttribute(K),this.morphTargetsRelative?(_vector$8.addVectors(_box$2.min,_boxMorphTargets.min),_box$2.expandByPoint(_vector$8),_vector$8.addVectors(_box$2.max,_boxMorphTargets.max),_box$2.expandByPoint(_vector$8)):(_box$2.expandByPoint(_boxMorphTargets.min),_box$2.expandByPoint(_boxMorphTargets.max))}_box$2.getCenter(o);let y=0;for(let R=0,G=e.count;R<G;R++)_vector$8.fromBufferAttribute(e,R),y=Math.max(y,o.distanceToSquared(_vector$8));if(t)for(let R=0,G=t.length;R<G;R++){const K=t[R],Y=this.morphTargetsRelative;for(let Q=0,ee=K.count;Q<ee;Q++)_vector$8.fromBufferAttribute(K,Q),Y&&(_offset.fromBufferAttribute(e,Q),_vector$8.add(_offset)),y=Math.max(y,o.distanceToSquared(_vector$8))}this.boundingSphere.radius=Math.sqrt(y),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const o=t.position,y=t.normal,R=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new BufferAttribute(new Float32Array(4*o.count),4));const G=this.getAttribute("tangent"),K=[],Y=[];for(let Ee=0;Ee<o.count;Ee++)K[Ee]=new Vector3,Y[Ee]=new Vector3;const Q=new Vector3,ee=new Vector3,ie=new Vector3,re=new Vector2,se=new Vector2,le=new Vector2,ce=new Vector3,oe=new Vector3;function ue(Ee,ye,de){Q.fromBufferAttribute(o,Ee),ee.fromBufferAttribute(o,ye),ie.fromBufferAttribute(o,de),re.fromBufferAttribute(R,Ee),se.fromBufferAttribute(R,ye),le.fromBufferAttribute(R,de),ee.sub(Q),ie.sub(Q),se.sub(re),le.sub(re);const Me=1/(se.x*le.y-le.x*se.y);isFinite(Me)&&(ce.copy(ee).multiplyScalar(le.y).addScaledVector(ie,-se.y).multiplyScalar(Me),oe.copy(ie).multiplyScalar(se.x).addScaledVector(ee,-le.x).multiplyScalar(Me),K[Ee].add(ce),K[ye].add(ce),K[de].add(ce),Y[Ee].add(oe),Y[ye].add(oe),Y[de].add(oe))}let ge=this.groups;ge.length===0&&(ge=[{start:0,count:e.count}]);for(let Ee=0,ye=ge.length;Ee<ye;++Ee){const de=ge[Ee],Me=de.start,Le=de.count;for(let Pe=Me,Ue=Me+Le;Pe<Ue;Pe+=3)ue(e.getX(Pe+0),e.getX(Pe+1),e.getX(Pe+2))}const ve=new Vector3,_e=new Vector3,be=new Vector3,Re=new Vector3;function Se(Ee){be.fromBufferAttribute(y,Ee),Re.copy(be);const ye=K[Ee];ve.copy(ye),ve.sub(be.multiplyScalar(be.dot(ye))).normalize(),_e.crossVectors(Re,ye);const Me=_e.dot(Y[Ee])<0?-1:1;G.setXYZW(Ee,ve.x,ve.y,ve.z,Me)}for(let Ee=0,ye=ge.length;Ee<ye;++Ee){const de=ge[Ee],Me=de.start,Le=de.count;for(let Pe=Me,Ue=Me+Le;Pe<Ue;Pe+=3)Se(e.getX(Pe+0)),Se(e.getX(Pe+1)),Se(e.getX(Pe+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let o=this.getAttribute("normal");if(o===void 0)o=new BufferAttribute(new Float32Array(t.count*3),3),this.setAttribute("normal",o);else for(let re=0,se=o.count;re<se;re++)o.setXYZ(re,0,0,0);const y=new Vector3,R=new Vector3,G=new Vector3,K=new Vector3,Y=new Vector3,Q=new Vector3,ee=new Vector3,ie=new Vector3;if(e)for(let re=0,se=e.count;re<se;re+=3){const le=e.getX(re+0),ce=e.getX(re+1),oe=e.getX(re+2);y.fromBufferAttribute(t,le),R.fromBufferAttribute(t,ce),G.fromBufferAttribute(t,oe),ee.subVectors(G,R),ie.subVectors(y,R),ee.cross(ie),K.fromBufferAttribute(o,le),Y.fromBufferAttribute(o,ce),Q.fromBufferAttribute(o,oe),K.add(ee),Y.add(ee),Q.add(ee),o.setXYZ(le,K.x,K.y,K.z),o.setXYZ(ce,Y.x,Y.y,Y.z),o.setXYZ(oe,Q.x,Q.y,Q.z)}else for(let re=0,se=t.count;re<se;re+=3)y.fromBufferAttribute(t,re+0),R.fromBufferAttribute(t,re+1),G.fromBufferAttribute(t,re+2),ee.subVectors(G,R),ie.subVectors(y,R),ee.cross(ie),o.setXYZ(re+0,ee.x,ee.y,ee.z),o.setXYZ(re+1,ee.x,ee.y,ee.z),o.setXYZ(re+2,ee.x,ee.y,ee.z);this.normalizeNormals(),o.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,o=e.count;t<o;t++)_vector$8.fromBufferAttribute(e,t),_vector$8.normalize(),e.setXYZ(t,_vector$8.x,_vector$8.y,_vector$8.z)}toNonIndexed(){function e(K,Y){const Q=K.array,ee=K.itemSize,ie=K.normalized,re=new Q.constructor(Y.length*ee);let se=0,le=0;for(let ce=0,oe=Y.length;ce<oe;ce++){K.isInterleavedBufferAttribute?se=Y[ce]*K.data.stride+K.offset:se=Y[ce]*ee;for(let ue=0;ue<ee;ue++)re[le++]=Q[se++]}return new BufferAttribute(re,ee,ie)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new BufferGeometry,o=this.index.array,y=this.attributes;for(const K in y){const Y=y[K],Q=e(Y,o);t.setAttribute(K,Q)}const R=this.morphAttributes;for(const K in R){const Y=[],Q=R[K];for(let ee=0,ie=Q.length;ee<ie;ee++){const re=Q[ee],se=e(re,o);Y.push(se)}t.morphAttributes[K]=Y}t.morphTargetsRelative=this.morphTargetsRelative;const G=this.groups;for(let K=0,Y=G.length;K<Y;K++){const Q=G[K];t.addGroup(Q.start,Q.count,Q.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const Y=this.parameters;for(const Q in Y)Y[Q]!==void 0&&(e[Q]=Y[Q]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const o=this.attributes;for(const Y in o){const Q=o[Y];e.data.attributes[Y]=Q.toJSON(e.data)}const y={};let R=!1;for(const Y in this.morphAttributes){const Q=this.morphAttributes[Y],ee=[];for(let ie=0,re=Q.length;ie<re;ie++){const se=Q[ie];ee.push(se.toJSON(e.data))}ee.length>0&&(y[Y]=ee,R=!0)}R&&(e.data.morphAttributes=y,e.data.morphTargetsRelative=this.morphTargetsRelative);const G=this.groups;G.length>0&&(e.data.groups=JSON.parse(JSON.stringify(G)));const K=this.boundingSphere;return K!==null&&(e.data.boundingSphere={center:K.center.toArray(),radius:K.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const o=e.index;o!==null&&this.setIndex(o.clone());const y=e.attributes;for(const Q in y){const ee=y[Q];this.setAttribute(Q,ee.clone(t))}const R=e.morphAttributes;for(const Q in R){const ee=[],ie=R[Q];for(let re=0,se=ie.length;re<se;re++)ee.push(ie[re].clone(t));this.morphAttributes[Q]=ee}this.morphTargetsRelative=e.morphTargetsRelative;const G=e.groups;for(let Q=0,ee=G.length;Q<ee;Q++){const ie=G[Q];this.addGroup(ie.start,ie.count,ie.materialIndex)}const K=e.boundingBox;K!==null&&(this.boundingBox=K.clone());const Y=e.boundingSphere;return Y!==null&&(this.boundingSphere=Y.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const _inverseMatrix$3=new Matrix4,_ray$3=new Ray,_sphere$6=new Sphere,_sphereHitAt=new Vector3,_vA$1=new Vector3,_vB$1=new Vector3,_vC$1=new Vector3,_tempA=new Vector3,_morphA=new Vector3,_intersectionPoint=new Vector3,_intersectionPointWorld=new Vector3;class Mesh extends Object3D{constructor(e=new BufferGeometry,t=new MeshBasicMaterial){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,o=Object.keys(t);if(o.length>0){const y=t[o[0]];if(y!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let R=0,G=y.length;R<G;R++){const K=y[R].name||String(R);this.morphTargetInfluences.push(0),this.morphTargetDictionary[K]=R}}}}getVertexPosition(e,t){const o=this.geometry,y=o.attributes.position,R=o.morphAttributes.position,G=o.morphTargetsRelative;t.fromBufferAttribute(y,e);const K=this.morphTargetInfluences;if(R&&K){_morphA.set(0,0,0);for(let Y=0,Q=R.length;Y<Q;Y++){const ee=K[Y],ie=R[Y];ee!==0&&(_tempA.fromBufferAttribute(ie,e),G?_morphA.addScaledVector(_tempA,ee):_morphA.addScaledVector(_tempA.sub(t),ee))}t.add(_morphA)}return t}raycast(e,t){const o=this.geometry,y=this.material,R=this.matrixWorld;y!==void 0&&(o.boundingSphere===null&&o.computeBoundingSphere(),_sphere$6.copy(o.boundingSphere),_sphere$6.applyMatrix4(R),_ray$3.copy(e.ray).recast(e.near),!(_sphere$6.containsPoint(_ray$3.origin)===!1&&(_ray$3.intersectSphere(_sphere$6,_sphereHitAt)===null||_ray$3.origin.distanceToSquared(_sphereHitAt)>(e.far-e.near)**2))&&(_inverseMatrix$3.copy(R).invert(),_ray$3.copy(e.ray).applyMatrix4(_inverseMatrix$3),!(o.boundingBox!==null&&_ray$3.intersectsBox(o.boundingBox)===!1)&&this._computeIntersections(e,t,_ray$3)))}_computeIntersections(e,t,o){let y;const R=this.geometry,G=this.material,K=R.index,Y=R.attributes.position,Q=R.attributes.uv,ee=R.attributes.uv1,ie=R.attributes.normal,re=R.groups,se=R.drawRange;if(K!==null)if(Array.isArray(G))for(let le=0,ce=re.length;le<ce;le++){const oe=re[le],ue=G[oe.materialIndex],ge=Math.max(oe.start,se.start),ve=Math.min(K.count,Math.min(oe.start+oe.count,se.start+se.count));for(let _e=ge,be=ve;_e<be;_e+=3){const Re=K.getX(_e),Se=K.getX(_e+1),Ee=K.getX(_e+2);y=checkGeometryIntersection(this,ue,e,o,Q,ee,ie,Re,Se,Ee),y&&(y.faceIndex=Math.floor(_e/3),y.face.materialIndex=oe.materialIndex,t.push(y))}}else{const le=Math.max(0,se.start),ce=Math.min(K.count,se.start+se.count);for(let oe=le,ue=ce;oe<ue;oe+=3){const ge=K.getX(oe),ve=K.getX(oe+1),_e=K.getX(oe+2);y=checkGeometryIntersection(this,G,e,o,Q,ee,ie,ge,ve,_e),y&&(y.faceIndex=Math.floor(oe/3),t.push(y))}}else if(Y!==void 0)if(Array.isArray(G))for(let le=0,ce=re.length;le<ce;le++){const oe=re[le],ue=G[oe.materialIndex],ge=Math.max(oe.start,se.start),ve=Math.min(Y.count,Math.min(oe.start+oe.count,se.start+se.count));for(let _e=ge,be=ve;_e<be;_e+=3){const Re=_e,Se=_e+1,Ee=_e+2;y=checkGeometryIntersection(this,ue,e,o,Q,ee,ie,Re,Se,Ee),y&&(y.faceIndex=Math.floor(_e/3),y.face.materialIndex=oe.materialIndex,t.push(y))}}else{const le=Math.max(0,se.start),ce=Math.min(Y.count,se.start+se.count);for(let oe=le,ue=ce;oe<ue;oe+=3){const ge=oe,ve=oe+1,_e=oe+2;y=checkGeometryIntersection(this,G,e,o,Q,ee,ie,ge,ve,_e),y&&(y.faceIndex=Math.floor(oe/3),t.push(y))}}}}function checkIntersection$1(r,e,t,o,y,R,G,K){let Y;if(e.side===BackSide?Y=o.intersectTriangle(G,R,y,!0,K):Y=o.intersectTriangle(y,R,G,e.side===FrontSide,K),Y===null)return null;_intersectionPointWorld.copy(K),_intersectionPointWorld.applyMatrix4(r.matrixWorld);const Q=t.ray.origin.distanceTo(_intersectionPointWorld);return Q<t.near||Q>t.far?null:{distance:Q,point:_intersectionPointWorld.clone(),object:r}}function checkGeometryIntersection(r,e,t,o,y,R,G,K,Y,Q){r.getVertexPosition(K,_vA$1),r.getVertexPosition(Y,_vB$1),r.getVertexPosition(Q,_vC$1);const ee=checkIntersection$1(r,e,t,o,_vA$1,_vB$1,_vC$1,_intersectionPoint);if(ee){const ie=new Vector3;Triangle.getBarycoord(_intersectionPoint,_vA$1,_vB$1,_vC$1,ie),y&&(ee.uv=Triangle.getInterpolatedAttribute(y,K,Y,Q,ie,new Vector2)),R&&(ee.uv1=Triangle.getInterpolatedAttribute(R,K,Y,Q,ie,new Vector2)),G&&(ee.normal=Triangle.getInterpolatedAttribute(G,K,Y,Q,ie,new Vector3),ee.normal.dot(o.direction)>0&&ee.normal.multiplyScalar(-1));const re={a:K,b:Y,c:Q,normal:new Vector3,materialIndex:0};Triangle.getNormal(_vA$1,_vB$1,_vC$1,re.normal),ee.face=re,ee.barycoord=ie}return ee}class BoxGeometry extends BufferGeometry{constructor(e=1,t=1,o=1,y=1,R=1,G=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:o,widthSegments:y,heightSegments:R,depthSegments:G};const K=this;y=Math.floor(y),R=Math.floor(R),G=Math.floor(G);const Y=[],Q=[],ee=[],ie=[];let re=0,se=0;le("z","y","x",-1,-1,o,t,e,G,R,0),le("z","y","x",1,-1,o,t,-e,G,R,1),le("x","z","y",1,1,e,o,t,y,G,2),le("x","z","y",1,-1,e,o,-t,y,G,3),le("x","y","z",1,-1,e,t,o,y,R,4),le("x","y","z",-1,-1,e,t,-o,y,R,5),this.setIndex(Y),this.setAttribute("position",new Float32BufferAttribute(Q,3)),this.setAttribute("normal",new Float32BufferAttribute(ee,3)),this.setAttribute("uv",new Float32BufferAttribute(ie,2));function le(ce,oe,ue,ge,ve,_e,be,Re,Se,Ee,ye){const de=_e/Se,Me=be/Ee,Le=_e/2,Pe=be/2,Ue=Re/2,$e=Se+1,Ve=Ee+1;let Ce=0,De=0;const Oe=new Vector3;for(let Te=0;Te<Ve;Te++){const Ne=Te*Me-Pe;for(let Ye=0;Ye<$e;Ye++){const Qe=Ye*de-Le;Oe[ce]=Qe*ge,Oe[oe]=Ne*ve,Oe[ue]=Ue,Q.push(Oe.x,Oe.y,Oe.z),Oe[ce]=0,Oe[oe]=0,Oe[ue]=Re>0?1:-1,ee.push(Oe.x,Oe.y,Oe.z),ie.push(Ye/Se),ie.push(1-Te/Ee),Ce+=1}}for(let Te=0;Te<Ee;Te++)for(let Ne=0;Ne<Se;Ne++){const Ye=re+Ne+$e*Te,Qe=re+Ne+$e*(Te+1),qe=re+(Ne+1)+$e*(Te+1),Ze=re+(Ne+1)+$e*Te;Y.push(Ye,Qe,Ze),Y.push(Qe,qe,Ze),De+=6}K.addGroup(se,De,ye),se+=De,re+=Ce}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new BoxGeometry(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function cloneUniforms(r){const e={};for(const t in r){e[t]={};for(const o in r[t]){const y=r[t][o];y&&(y.isColor||y.isMatrix3||y.isMatrix4||y.isVector2||y.isVector3||y.isVector4||y.isTexture||y.isQuaternion)?y.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][o]=null):e[t][o]=y.clone():Array.isArray(y)?e[t][o]=y.slice():e[t][o]=y}}return e}function mergeUniforms(r){const e={};for(let t=0;t<r.length;t++){const o=cloneUniforms(r[t]);for(const y in o)e[y]=o[y]}return e}function cloneUniformsGroups(r){const e=[];for(let t=0;t<r.length;t++)e.push(r[t].clone());return e}function getUnlitUniformColorSpace(r){const e=r.getRenderTarget();return e===null?r.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:ColorManagement.workingColorSpace}const UniformsUtils={clone:cloneUniforms,merge:mergeUniforms};var default_vertex=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,default_fragment=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class ShaderMaterial extends Material{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=default_vertex,this.fragmentShader=default_fragment,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=cloneUniforms(e.uniforms),this.uniformsGroups=cloneUniformsGroups(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const y in this.uniforms){const G=this.uniforms[y].value;G&&G.isTexture?t.uniforms[y]={type:"t",value:G.toJSON(e).uuid}:G&&G.isColor?t.uniforms[y]={type:"c",value:G.getHex()}:G&&G.isVector2?t.uniforms[y]={type:"v2",value:G.toArray()}:G&&G.isVector3?t.uniforms[y]={type:"v3",value:G.toArray()}:G&&G.isVector4?t.uniforms[y]={type:"v4",value:G.toArray()}:G&&G.isMatrix3?t.uniforms[y]={type:"m3",value:G.toArray()}:G&&G.isMatrix4?t.uniforms[y]={type:"m4",value:G.toArray()}:t.uniforms[y]={value:G}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const o={};for(const y in this.extensions)this.extensions[y]===!0&&(o[y]=!0);return Object.keys(o).length>0&&(t.extensions=o),t}}class Camera extends Object3D{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Matrix4,this.projectionMatrix=new Matrix4,this.projectionMatrixInverse=new Matrix4,this.coordinateSystem=WebGLCoordinateSystem}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const _v3$1=new Vector3,_minTarget=new Vector2,_maxTarget=new Vector2;class PerspectiveCamera extends Camera{constructor(e=50,t=1,o=.1,y=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=o,this.far=y,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=RAD2DEG*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(DEG2RAD*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return RAD2DEG*2*Math.atan(Math.tan(DEG2RAD*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,o){_v3$1.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(_v3$1.x,_v3$1.y).multiplyScalar(-e/_v3$1.z),_v3$1.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),o.set(_v3$1.x,_v3$1.y).multiplyScalar(-e/_v3$1.z)}getViewSize(e,t){return this.getViewBounds(e,_minTarget,_maxTarget),t.subVectors(_maxTarget,_minTarget)}setViewOffset(e,t,o,y,R,G){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=o,this.view.offsetY=y,this.view.width=R,this.view.height=G,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(DEG2RAD*.5*this.fov)/this.zoom,o=2*t,y=this.aspect*o,R=-.5*y;const G=this.view;if(this.view!==null&&this.view.enabled){const Y=G.fullWidth,Q=G.fullHeight;R+=G.offsetX*y/Y,t-=G.offsetY*o/Q,y*=G.width/Y,o*=G.height/Q}const K=this.filmOffset;K!==0&&(R+=e*K/this.getFilmWidth()),this.projectionMatrix.makePerspective(R,R+y,t,t-o,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const fov=-90,aspect=1;class CubeCamera extends Object3D{constructor(e,t,o){super(),this.type="CubeCamera",this.renderTarget=o,this.coordinateSystem=null,this.activeMipmapLevel=0;const y=new PerspectiveCamera(fov,aspect,e,t);y.layers=this.layers,this.add(y);const R=new PerspectiveCamera(fov,aspect,e,t);R.layers=this.layers,this.add(R);const G=new PerspectiveCamera(fov,aspect,e,t);G.layers=this.layers,this.add(G);const K=new PerspectiveCamera(fov,aspect,e,t);K.layers=this.layers,this.add(K);const Y=new PerspectiveCamera(fov,aspect,e,t);Y.layers=this.layers,this.add(Y);const Q=new PerspectiveCamera(fov,aspect,e,t);Q.layers=this.layers,this.add(Q)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[o,y,R,G,K,Y]=t;for(const Q of t)this.remove(Q);if(e===WebGLCoordinateSystem)o.up.set(0,1,0),o.lookAt(1,0,0),y.up.set(0,1,0),y.lookAt(-1,0,0),R.up.set(0,0,-1),R.lookAt(0,1,0),G.up.set(0,0,1),G.lookAt(0,-1,0),K.up.set(0,1,0),K.lookAt(0,0,1),Y.up.set(0,1,0),Y.lookAt(0,0,-1);else if(e===WebGPUCoordinateSystem)o.up.set(0,-1,0),o.lookAt(-1,0,0),y.up.set(0,-1,0),y.lookAt(1,0,0),R.up.set(0,0,1),R.lookAt(0,1,0),G.up.set(0,0,-1),G.lookAt(0,-1,0),K.up.set(0,-1,0),K.lookAt(0,0,1),Y.up.set(0,-1,0),Y.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const Q of t)this.add(Q),Q.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:o,activeMipmapLevel:y}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[R,G,K,Y,Q,ee]=this.children,ie=e.getRenderTarget(),re=e.getActiveCubeFace(),se=e.getActiveMipmapLevel(),le=e.xr.enabled;e.xr.enabled=!1;const ce=o.texture.generateMipmaps;o.texture.generateMipmaps=!1,e.setRenderTarget(o,0,y),e.render(t,R),e.setRenderTarget(o,1,y),e.render(t,G),e.setRenderTarget(o,2,y),e.render(t,K),e.setRenderTarget(o,3,y),e.render(t,Y),e.setRenderTarget(o,4,y),e.render(t,Q),o.texture.generateMipmaps=ce,e.setRenderTarget(o,5,y),e.render(t,ee),e.setRenderTarget(ie,re,se),e.xr.enabled=le,o.texture.needsPMREMUpdate=!0}}class CubeTexture extends Texture{constructor(e=[],t=CubeReflectionMapping,o,y,R,G,K,Y,Q,ee){super(e,t,o,y,R,G,K,Y,Q,ee),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class WebGLCubeRenderTarget extends WebGLRenderTarget{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const o={width:e,height:e,depth:1},y=[o,o,o,o,o,o];this.texture=new CubeTexture(y,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:LinearFilter}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const o={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},y=new BoxGeometry(5,5,5),R=new ShaderMaterial({name:"CubemapFromEquirect",uniforms:cloneUniforms(o.uniforms),vertexShader:o.vertexShader,fragmentShader:o.fragmentShader,side:BackSide,blending:NoBlending});R.uniforms.tEquirect.value=t;const G=new Mesh(y,R),K=t.minFilter;return t.minFilter===LinearMipmapLinearFilter&&(t.minFilter=LinearFilter),new CubeCamera(1,10,this).update(e,G),t.minFilter=K,G.geometry.dispose(),G.material.dispose(),this}clear(e,t=!0,o=!0,y=!0){const R=e.getRenderTarget();for(let G=0;G<6;G++)e.setRenderTarget(this,G),e.clear(t,o,y);e.setRenderTarget(R)}}class Group extends Object3D{constructor(){super(),this.isGroup=!0,this.type="Group"}}const _moveEvent={type:"move"};class WebXRController{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Group,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Group,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Vector3,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Vector3),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Group,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Vector3,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Vector3),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const o of e.hand.values())this._getHandJoint(t,o)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,o){let y=null,R=null,G=null;const K=this._targetRay,Y=this._grip,Q=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(Q&&e.hand){G=!0;for(const ce of e.hand.values()){const oe=t.getJointPose(ce,o),ue=this._getHandJoint(Q,ce);oe!==null&&(ue.matrix.fromArray(oe.transform.matrix),ue.matrix.decompose(ue.position,ue.rotation,ue.scale),ue.matrixWorldNeedsUpdate=!0,ue.jointRadius=oe.radius),ue.visible=oe!==null}const ee=Q.joints["index-finger-tip"],ie=Q.joints["thumb-tip"],re=ee.position.distanceTo(ie.position),se=.02,le=.005;Q.inputState.pinching&&re>se+le?(Q.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!Q.inputState.pinching&&re<=se-le&&(Q.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else Y!==null&&e.gripSpace&&(R=t.getPose(e.gripSpace,o),R!==null&&(Y.matrix.fromArray(R.transform.matrix),Y.matrix.decompose(Y.position,Y.rotation,Y.scale),Y.matrixWorldNeedsUpdate=!0,R.linearVelocity?(Y.hasLinearVelocity=!0,Y.linearVelocity.copy(R.linearVelocity)):Y.hasLinearVelocity=!1,R.angularVelocity?(Y.hasAngularVelocity=!0,Y.angularVelocity.copy(R.angularVelocity)):Y.hasAngularVelocity=!1));K!==null&&(y=t.getPose(e.targetRaySpace,o),y===null&&R!==null&&(y=R),y!==null&&(K.matrix.fromArray(y.transform.matrix),K.matrix.decompose(K.position,K.rotation,K.scale),K.matrixWorldNeedsUpdate=!0,y.linearVelocity?(K.hasLinearVelocity=!0,K.linearVelocity.copy(y.linearVelocity)):K.hasLinearVelocity=!1,y.angularVelocity?(K.hasAngularVelocity=!0,K.angularVelocity.copy(y.angularVelocity)):K.hasAngularVelocity=!1,this.dispatchEvent(_moveEvent)))}return K!==null&&(K.visible=y!==null),Y!==null&&(Y.visible=R!==null),Q!==null&&(Q.visible=G!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const o=new Group;o.matrixAutoUpdate=!1,o.visible=!1,e.joints[t.jointName]=o,e.add(o)}return e.joints[t.jointName]}}class FogExp2{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new Color(e),this.density=t}clone(){return new FogExp2(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class Fog{constructor(e,t=1,o=1e3){this.isFog=!0,this.name="",this.color=new Color(e),this.near=t,this.far=o}clone(){return new Fog(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class Scene extends Object3D{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Euler,this.environmentIntensity=1,this.environmentRotation=new Euler,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class InterleavedBuffer{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=StaticDrawUsage,this.updateRanges=[],this.version=0,this.uuid=generateUUID()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,o){e*=this.stride,o*=t.stride;for(let y=0,R=this.stride;y<R;y++)this.array[e+y]=t.array[o+y];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=generateUUID()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),o=new this.constructor(t,this.stride);return o.setUsage(this.usage),o}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=generateUUID()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const _vector$7=new Vector3;class InterleavedBufferAttribute{constructor(e,t,o,y=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=o,this.normalized=y}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,o=this.data.count;t<o;t++)_vector$7.fromBufferAttribute(this,t),_vector$7.applyMatrix4(e),this.setXYZ(t,_vector$7.x,_vector$7.y,_vector$7.z);return this}applyNormalMatrix(e){for(let t=0,o=this.count;t<o;t++)_vector$7.fromBufferAttribute(this,t),_vector$7.applyNormalMatrix(e),this.setXYZ(t,_vector$7.x,_vector$7.y,_vector$7.z);return this}transformDirection(e){for(let t=0,o=this.count;t<o;t++)_vector$7.fromBufferAttribute(this,t),_vector$7.transformDirection(e),this.setXYZ(t,_vector$7.x,_vector$7.y,_vector$7.z);return this}getComponent(e,t){let o=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(o=denormalize(o,this.array)),o}setComponent(e,t,o){return this.normalized&&(o=normalize(o,this.array)),this.data.array[e*this.data.stride+this.offset+t]=o,this}setX(e,t){return this.normalized&&(t=normalize(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=normalize(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=normalize(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=normalize(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=denormalize(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=denormalize(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=denormalize(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=denormalize(t,this.array)),t}setXY(e,t,o){return e=e*this.data.stride+this.offset,this.normalized&&(t=normalize(t,this.array),o=normalize(o,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=o,this}setXYZ(e,t,o,y){return e=e*this.data.stride+this.offset,this.normalized&&(t=normalize(t,this.array),o=normalize(o,this.array),y=normalize(y,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=o,this.data.array[e+2]=y,this}setXYZW(e,t,o,y,R){return e=e*this.data.stride+this.offset,this.normalized&&(t=normalize(t,this.array),o=normalize(o,this.array),y=normalize(y,this.array),R=normalize(R,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=o,this.data.array[e+2]=y,this.data.array[e+3]=R,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let o=0;o<this.count;o++){const y=o*this.data.stride+this.offset;for(let R=0;R<this.itemSize;R++)t.push(this.data.array[y+R])}return new BufferAttribute(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new InterleavedBufferAttribute(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let o=0;o<this.count;o++){const y=o*this.data.stride+this.offset;for(let R=0;R<this.itemSize;R++)t.push(this.data.array[y+R])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class SpriteMaterial extends Material{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Color(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let _geometry;const _intersectPoint=new Vector3,_worldScale=new Vector3,_mvPosition=new Vector3,_alignedPosition=new Vector2,_rotatedPosition=new Vector2,_viewWorldMatrix=new Matrix4,_vA=new Vector3,_vB=new Vector3,_vC=new Vector3,_uvA=new Vector2,_uvB=new Vector2,_uvC=new Vector2;class Sprite extends Object3D{constructor(e=new SpriteMaterial){if(super(),this.isSprite=!0,this.type="Sprite",_geometry===void 0){_geometry=new BufferGeometry;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),o=new InterleavedBuffer(t,5);_geometry.setIndex([0,1,2,0,2,3]),_geometry.setAttribute("position",new InterleavedBufferAttribute(o,3,0,!1)),_geometry.setAttribute("uv",new InterleavedBufferAttribute(o,2,3,!1))}this.geometry=_geometry,this.material=e,this.center=new Vector2(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),_worldScale.setFromMatrixScale(this.matrixWorld),_viewWorldMatrix.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),_mvPosition.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&_worldScale.multiplyScalar(-_mvPosition.z);const o=this.material.rotation;let y,R;o!==0&&(R=Math.cos(o),y=Math.sin(o));const G=this.center;transformVertex(_vA.set(-.5,-.5,0),_mvPosition,G,_worldScale,y,R),transformVertex(_vB.set(.5,-.5,0),_mvPosition,G,_worldScale,y,R),transformVertex(_vC.set(.5,.5,0),_mvPosition,G,_worldScale,y,R),_uvA.set(0,0),_uvB.set(1,0),_uvC.set(1,1);let K=e.ray.intersectTriangle(_vA,_vB,_vC,!1,_intersectPoint);if(K===null&&(transformVertex(_vB.set(-.5,.5,0),_mvPosition,G,_worldScale,y,R),_uvB.set(0,1),K=e.ray.intersectTriangle(_vA,_vC,_vB,!1,_intersectPoint),K===null))return;const Y=e.ray.origin.distanceTo(_intersectPoint);Y<e.near||Y>e.far||t.push({distance:Y,point:_intersectPoint.clone(),uv:Triangle.getInterpolation(_intersectPoint,_vA,_vB,_vC,_uvA,_uvB,_uvC,new Vector2),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function transformVertex(r,e,t,o,y,R){_alignedPosition.subVectors(r,t).addScalar(.5).multiply(o),y!==void 0?(_rotatedPosition.x=R*_alignedPosition.x-y*_alignedPosition.y,_rotatedPosition.y=y*_alignedPosition.x+R*_alignedPosition.y):_rotatedPosition.copy(_alignedPosition),r.copy(e),r.x+=_rotatedPosition.x,r.y+=_rotatedPosition.y,r.applyMatrix4(_viewWorldMatrix)}const _v1$2=new Vector3,_v2$1=new Vector3;class LOD extends Object3D{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let o=0,y=t.length;o<y;o++){const R=t[o];this.addLevel(R.object.clone(),R.distance,R.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,o=0){t=Math.abs(t);const y=this.levels;let R;for(R=0;R<y.length&&!(t<y[R].distance);R++);return y.splice(R,0,{distance:t,hysteresis:o,object:e}),this.add(e),this}removeLevel(e){const t=this.levels;for(let o=0;o<t.length;o++)if(t[o].distance===e){const y=t.splice(o,1);return this.remove(y[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let o,y;for(o=1,y=t.length;o<y;o++){let R=t[o].distance;if(t[o].object.visible&&(R-=R*t[o].hysteresis),e<R)break}return t[o-1].object}return null}raycast(e,t){if(this.levels.length>0){_v1$2.setFromMatrixPosition(this.matrixWorld);const y=e.ray.origin.distanceTo(_v1$2);this.getObjectForDistance(y).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){_v1$2.setFromMatrixPosition(e.matrixWorld),_v2$1.setFromMatrixPosition(this.matrixWorld);const o=_v1$2.distanceTo(_v2$1)/e.zoom;t[0].object.visible=!0;let y,R;for(y=1,R=t.length;y<R;y++){let G=t[y].distance;if(t[y].object.visible&&(G-=G*t[y].hysteresis),o>=G)t[y-1].object.visible=!1,t[y].object.visible=!0;else break}for(this._currentLevel=y-1;y<R;y++)t[y].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const o=this.levels;for(let y=0,R=o.length;y<R;y++){const G=o[y];t.object.levels.push({object:G.object.uuid,distance:G.distance,hysteresis:G.hysteresis})}return t}}const _basePosition=new Vector3,_skinIndex=new Vector4,_skinWeight=new Vector4,_vector3=new Vector3,_matrix4=new Matrix4,_vertex=new Vector3,_sphere$5=new Sphere,_inverseMatrix$2=new Matrix4,_ray$2=new Ray;class SkinnedMesh extends Mesh{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=AttachedBindMode,this.bindMatrix=new Matrix4,this.bindMatrixInverse=new Matrix4,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Box3),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let o=0;o<t.count;o++)this.getVertexPosition(o,_vertex),this.boundingBox.expandByPoint(_vertex)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Sphere),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let o=0;o<t.count;o++)this.getVertexPosition(o,_vertex),this.boundingSphere.expandByPoint(_vertex)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const o=this.material,y=this.matrixWorld;o!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),_sphere$5.copy(this.boundingSphere),_sphere$5.applyMatrix4(y),e.ray.intersectsSphere(_sphere$5)!==!1&&(_inverseMatrix$2.copy(y).invert(),_ray$2.copy(e.ray).applyMatrix4(_inverseMatrix$2),!(this.boundingBox!==null&&_ray$2.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,_ray$2)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Vector4,t=this.geometry.attributes.skinWeight;for(let o=0,y=t.count;o<y;o++){e.fromBufferAttribute(t,o);const R=1/e.manhattanLength();R!==1/0?e.multiplyScalar(R):e.set(1,0,0,0),t.setXYZW(o,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===AttachedBindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===DetachedBindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const o=this.skeleton,y=this.geometry;_skinIndex.fromBufferAttribute(y.attributes.skinIndex,e),_skinWeight.fromBufferAttribute(y.attributes.skinWeight,e),_basePosition.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let R=0;R<4;R++){const G=_skinWeight.getComponent(R);if(G!==0){const K=_skinIndex.getComponent(R);_matrix4.multiplyMatrices(o.bones[K].matrixWorld,o.boneInverses[K]),t.addScaledVector(_vector3.copy(_basePosition).applyMatrix4(_matrix4),G)}}return t.applyMatrix4(this.bindMatrixInverse)}}class Bone extends Object3D{constructor(){super(),this.isBone=!0,this.type="Bone"}}class DataTexture extends Texture{constructor(e=null,t=1,o=1,y,R,G,K,Y,Q=NearestFilter,ee=NearestFilter,ie,re){super(null,G,K,Y,Q,ee,y,R,ie,re),this.isDataTexture=!0,this.image={data:e,width:t,height:o},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const _offsetMatrix=new Matrix4,_identityMatrix$1=new Matrix4;class Skeleton{constructor(e=[],t=[]){this.uuid=generateUUID(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let o=0,y=this.bones.length;o<y;o++)this.boneInverses.push(new Matrix4)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const o=new Matrix4;this.bones[e]&&o.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(o)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const o=this.bones[e];o&&o.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const o=this.bones[e];o&&(o.parent&&o.parent.isBone?(o.matrix.copy(o.parent.matrixWorld).invert(),o.matrix.multiply(o.matrixWorld)):o.matrix.copy(o.matrixWorld),o.matrix.decompose(o.position,o.quaternion,o.scale))}}update(){const e=this.bones,t=this.boneInverses,o=this.boneMatrices,y=this.boneTexture;for(let R=0,G=e.length;R<G;R++){const K=e[R]?e[R].matrixWorld:_identityMatrix$1;_offsetMatrix.multiplyMatrices(K,t[R]),_offsetMatrix.toArray(o,R*16)}y!==null&&(y.needsUpdate=!0)}clone(){return new Skeleton(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const o=new DataTexture(t,e,e,RGBAFormat,FloatType);return o.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=o,this}getBoneByName(e){for(let t=0,o=this.bones.length;t<o;t++){const y=this.bones[t];if(y.name===e)return y}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let o=0,y=e.bones.length;o<y;o++){const R=e.bones[o];let G=t[R];G===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",R),G=new Bone),this.bones.push(G),this.boneInverses.push(new Matrix4().fromArray(e.boneInverses[o]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,o=this.boneInverses;for(let y=0,R=t.length;y<R;y++){const G=t[y];e.bones.push(G.uuid);const K=o[y];e.boneInverses.push(K.toArray())}return e}}class InstancedBufferAttribute extends BufferAttribute{constructor(e,t,o,y=1){super(e,t,o),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=y}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const _instanceLocalMatrix=new Matrix4,_instanceWorldMatrix=new Matrix4,_instanceIntersects=[],_box3=new Box3,_identity=new Matrix4,_mesh$1=new Mesh,_sphere$4=new Sphere;class InstancedMesh extends Mesh{constructor(e,t,o){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new InstancedBufferAttribute(new Float32Array(o*16),16),this.instanceColor=null,this.morphTexture=null,this.count=o,this.boundingBox=null,this.boundingSphere=null;for(let y=0;y<o;y++)this.setMatrixAt(y,_identity)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new Box3),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let o=0;o<t;o++)this.getMatrixAt(o,_instanceLocalMatrix),_box3.copy(e.boundingBox).applyMatrix4(_instanceLocalMatrix),this.boundingBox.union(_box3)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new Sphere),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let o=0;o<t;o++)this.getMatrixAt(o,_instanceLocalMatrix),_sphere$4.copy(e.boundingSphere).applyMatrix4(_instanceLocalMatrix),this.boundingSphere.union(_sphere$4)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const o=t.morphTargetInfluences,y=this.morphTexture.source.data.data,R=o.length+1,G=e*R+1;for(let K=0;K<o.length;K++)o[K]=y[G+K]}raycast(e,t){const o=this.matrixWorld,y=this.count;if(_mesh$1.geometry=this.geometry,_mesh$1.material=this.material,_mesh$1.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),_sphere$4.copy(this.boundingSphere),_sphere$4.applyMatrix4(o),e.ray.intersectsSphere(_sphere$4)!==!1))for(let R=0;R<y;R++){this.getMatrixAt(R,_instanceLocalMatrix),_instanceWorldMatrix.multiplyMatrices(o,_instanceLocalMatrix),_mesh$1.matrixWorld=_instanceWorldMatrix,_mesh$1.raycast(e,_instanceIntersects);for(let G=0,K=_instanceIntersects.length;G<K;G++){const Y=_instanceIntersects[G];Y.instanceId=R,Y.object=this,t.push(Y)}_instanceIntersects.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new InstancedBufferAttribute(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const o=t.morphTargetInfluences,y=o.length+1;this.morphTexture===null&&(this.morphTexture=new DataTexture(new Float32Array(y*this.count),y,this.count,RedFormat,FloatType));const R=this.morphTexture.source.data.data;let G=0;for(let Q=0;Q<o.length;Q++)G+=o[Q];const K=this.geometry.morphTargetsRelative?1:1-G,Y=y*e;R[Y]=K,R.set(o,Y+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}}const _vector1=new Vector3,_vector2=new Vector3,_normalMatrix=new Matrix3;class Plane{constructor(e=new Vector3(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,o,y){return this.normal.set(e,t,o),this.constant=y,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,o){const y=_vector1.subVectors(o,t).cross(_vector2.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(y,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const o=e.delta(_vector1),y=this.normal.dot(o);if(y===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const R=-(e.start.dot(this.normal)+this.constant)/y;return R<0||R>1?null:t.copy(e.start).addScaledVector(o,R)}intersectsLine(e){const t=this.distanceToPoint(e.start),o=this.distanceToPoint(e.end);return t<0&&o>0||o<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const o=t||_normalMatrix.getNormalMatrix(e),y=this.coplanarPoint(_vector1).applyMatrix4(e),R=this.normal.applyMatrix3(o).normalize();return this.constant=-y.dot(R),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const _sphere$3=new Sphere,_vector$6=new Vector3;class Frustum{constructor(e=new Plane,t=new Plane,o=new Plane,y=new Plane,R=new Plane,G=new Plane){this.planes=[e,t,o,y,R,G]}set(e,t,o,y,R,G){const K=this.planes;return K[0].copy(e),K[1].copy(t),K[2].copy(o),K[3].copy(y),K[4].copy(R),K[5].copy(G),this}copy(e){const t=this.planes;for(let o=0;o<6;o++)t[o].copy(e.planes[o]);return this}setFromProjectionMatrix(e,t=WebGLCoordinateSystem){const o=this.planes,y=e.elements,R=y[0],G=y[1],K=y[2],Y=y[3],Q=y[4],ee=y[5],ie=y[6],re=y[7],se=y[8],le=y[9],ce=y[10],oe=y[11],ue=y[12],ge=y[13],ve=y[14],_e=y[15];if(o[0].setComponents(Y-R,re-Q,oe-se,_e-ue).normalize(),o[1].setComponents(Y+R,re+Q,oe+se,_e+ue).normalize(),o[2].setComponents(Y+G,re+ee,oe+le,_e+ge).normalize(),o[3].setComponents(Y-G,re-ee,oe-le,_e-ge).normalize(),o[4].setComponents(Y-K,re-ie,oe-ce,_e-ve).normalize(),t===WebGLCoordinateSystem)o[5].setComponents(Y+K,re+ie,oe+ce,_e+ve).normalize();else if(t===WebGPUCoordinateSystem)o[5].setComponents(K,ie,ce,ve).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),_sphere$3.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),_sphere$3.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(_sphere$3)}intersectsSprite(e){return _sphere$3.center.set(0,0,0),_sphere$3.radius=.7071067811865476,_sphere$3.applyMatrix4(e.matrixWorld),this.intersectsSphere(_sphere$3)}intersectsSphere(e){const t=this.planes,o=e.center,y=-e.radius;for(let R=0;R<6;R++)if(t[R].distanceToPoint(o)<y)return!1;return!0}intersectsBox(e){const t=this.planes;for(let o=0;o<6;o++){const y=t[o];if(_vector$6.x=y.normal.x>0?e.max.x:e.min.x,_vector$6.y=y.normal.y>0?e.max.y:e.min.y,_vector$6.z=y.normal.z>0?e.max.z:e.min.z,y.distanceToPoint(_vector$6)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let o=0;o<6;o++)if(t[o].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function ascIdSort(r,e){return r-e}function sortOpaque(r,e){return r.z-e.z}function sortTransparent(r,e){return e.z-r.z}class MultiDrawRenderList{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,o,y){const R=this.pool,G=this.list;this.index>=R.length&&R.push({start:-1,count:-1,z:-1,index:-1});const K=R[this.index];G.push(K),this.index++,K.start=e,K.count=t,K.z=o,K.index=y}reset(){this.list.length=0,this.index=0}}const _matrix$1=new Matrix4,_whiteColor=new Color(1,1,1),_frustum=new Frustum,_box$1=new Box3,_sphere$2=new Sphere,_vector$5=new Vector3,_forward=new Vector3,_temp=new Vector3,_renderList=new MultiDrawRenderList,_mesh=new Mesh,_batchIntersects=[];function copyAttributeData(r,e,t=0){const o=e.itemSize;if(r.isInterleavedBufferAttribute||r.array.constructor!==e.array.constructor){const y=r.count;for(let R=0;R<y;R++)for(let G=0;G<o;G++)e.setComponent(R+t,G,r.getComponent(R,G))}else e.array.set(r.array,t*o);e.needsUpdate=!0}function copyArrayContents(r,e){if(r.constructor!==e.constructor){const t=Math.min(r.length,e.length);for(let o=0;o<t;o++)e[o]=r[o]}else{const t=Math.min(r.length,e.length);e.set(new r.constructor(r.buffer,0,t))}}class BatchedMesh extends Mesh{constructor(e,t,o=t*2,y){super(new BufferGeometry,y),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=o,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),o=new DataTexture(t,e,e,RGBAFormat,FloatType);this._matricesTexture=o}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),o=new DataTexture(t,e,e,RedIntegerFormat,UnsignedIntType);this._indirectTexture=o}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),o=new DataTexture(t,e,e,RGBAFormat,FloatType);o.colorSpace=ColorManagement.workingColorSpace,this._colorsTexture=o}_initializeGeometry(e){const t=this.geometry,o=this._maxVertexCount,y=this._maxIndexCount;if(this._geometryInitialized===!1){for(const R in e.attributes){const G=e.getAttribute(R),{array:K,itemSize:Y,normalized:Q}=G,ee=new K.constructor(o*Y),ie=new BufferAttribute(ee,Y,Q);t.setAttribute(R,ie)}if(e.getIndex()!==null){const R=o>65535?new Uint32Array(y):new Uint16Array(y);t.setIndex(new BufferAttribute(R,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const o in t.attributes){if(!e.hasAttribute(o))throw new Error(`THREE.BatchedMesh: Added geometry missing "${o}". All geometries must have consistent attributes.`);const y=e.getAttribute(o),R=t.getAttribute(o);if(y.itemSize!==R.itemSize||y.normalized!==R.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(e){const t=this._instanceInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${e}. Instance is either out of range or has been deleted.`)}validateGeometryId(e){const t=this._geometryInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${e}. Geometry is either out of range or has been deleted.`)}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Box3);const e=this.boundingBox,t=this._instanceInfo;e.makeEmpty();for(let o=0,y=t.length;o<y;o++){if(t[o].active===!1)continue;const R=t[o].geometryIndex;this.getMatrixAt(o,_matrix$1),this.getBoundingBoxAt(R,_box$1).applyMatrix4(_matrix$1),e.union(_box$1)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Sphere);const e=this.boundingSphere,t=this._instanceInfo;e.makeEmpty();for(let o=0,y=t.length;o<y;o++){if(t[o].active===!1)continue;const R=t[o].geometryIndex;this.getMatrixAt(o,_matrix$1),this.getBoundingSphereAt(R,_sphere$2).applyMatrix4(_matrix$1),e.union(_sphere$2)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const o={visible:!0,active:!0,geometryIndex:e};let y=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(ascIdSort),y=this._availableInstanceIds.shift(),this._instanceInfo[y]=o):(y=this._instanceInfo.length,this._instanceInfo.push(o));const R=this._matricesTexture;_matrix$1.identity().toArray(R.image.data,y*16),R.needsUpdate=!0;const G=this._colorsTexture;return G&&(_whiteColor.toArray(G.image.data,y*4),G.needsUpdate=!0),this._visibilityChanged=!0,y}addGeometry(e,t=-1,o=-1){this._initializeGeometry(e),this._validateGeometry(e);const y={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},R=this._geometryInfo;y.vertexStart=this._nextVertexStart,y.reservedVertexCount=t===-1?e.getAttribute("position").count:t;const G=e.getIndex();if(G!==null&&(y.indexStart=this._nextIndexStart,y.reservedIndexCount=o===-1?G.count:o),y.indexStart!==-1&&y.indexStart+y.reservedIndexCount>this._maxIndexCount||y.vertexStart+y.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let Y;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(ascIdSort),Y=this._availableGeometryIds.shift(),R[Y]=y):(Y=this._geometryCount,this._geometryCount++,R.push(y)),this.setGeometryAt(Y,e),this._nextIndexStart=y.indexStart+y.reservedIndexCount,this._nextVertexStart=y.vertexStart+y.reservedVertexCount,Y}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const o=this.geometry,y=o.getIndex()!==null,R=o.getIndex(),G=t.getIndex(),K=this._geometryInfo[e];if(y&&G.count>K.reservedIndexCount||t.attributes.position.count>K.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const Y=K.vertexStart,Q=K.reservedVertexCount;K.vertexCount=t.getAttribute("position").count;for(const ee in o.attributes){const ie=t.getAttribute(ee),re=o.getAttribute(ee);copyAttributeData(ie,re,Y);const se=ie.itemSize;for(let le=ie.count,ce=Q;le<ce;le++){const oe=Y+le;for(let ue=0;ue<se;ue++)re.setComponent(oe,ue,0)}re.needsUpdate=!0,re.addUpdateRange(Y*se,Q*se)}if(y){const ee=K.indexStart,ie=K.reservedIndexCount;K.indexCount=t.getIndex().count;for(let re=0;re<G.count;re++)R.setX(ee+re,Y+G.getX(re));for(let re=G.count,se=ie;re<se;re++)R.setX(ee+re,Y);R.needsUpdate=!0,R.addUpdateRange(ee,K.reservedIndexCount)}return K.start=y?K.indexStart:K.vertexStart,K.count=y?K.indexCount:K.vertexCount,K.boundingBox=null,t.boundingBox!==null&&(K.boundingBox=t.boundingBox.clone()),K.boundingSphere=null,t.boundingSphere!==null&&(K.boundingSphere=t.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._geometryInfo;if(e>=t.length||t[e].active===!1)return this;const o=this._instanceInfo;for(let y=0,R=o.length;y<R;y++)o[y].active&&o[y].geometryIndex===e&&this.deleteInstance(y);return t[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,t=0;const o=this._geometryInfo,y=o.map((G,K)=>K).sort((G,K)=>o[G].vertexStart-o[K].vertexStart),R=this.geometry;for(let G=0,K=o.length;G<K;G++){const Y=y[G],Q=o[Y];if(Q.active!==!1){if(R.index!==null){if(Q.indexStart!==t){const{indexStart:ee,vertexStart:ie,reservedIndexCount:re}=Q,se=R.index,le=se.array,ce=e-ie;for(let oe=ee;oe<ee+re;oe++)le[oe]=le[oe]+ce;se.array.copyWithin(t,ee,ee+re),se.addUpdateRange(t,re),Q.indexStart=t}t+=Q.reservedIndexCount}if(Q.vertexStart!==e){const{vertexStart:ee,reservedVertexCount:ie}=Q,re=R.attributes;for(const se in re){const le=re[se],{array:ce,itemSize:oe}=le;ce.copyWithin(e*oe,ee*oe,(ee+ie)*oe),le.addUpdateRange(e*oe,ie*oe)}Q.vertexStart=e}e+=Q.reservedVertexCount,Q.start=R.index?Q.indexStart:Q.vertexStart,this._nextIndexStart=R.index?Q.indexStart+Q.reservedIndexCount:0,this._nextVertexStart=Q.vertexStart+Q.reservedVertexCount}}return this}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const o=this.geometry,y=this._geometryInfo[e];if(y.boundingBox===null){const R=new Box3,G=o.index,K=o.attributes.position;for(let Y=y.start,Q=y.start+y.count;Y<Q;Y++){let ee=Y;G&&(ee=G.getX(ee)),R.expandByPoint(_vector$5.fromBufferAttribute(K,ee))}y.boundingBox=R}return t.copy(y.boundingBox),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const o=this.geometry,y=this._geometryInfo[e];if(y.boundingSphere===null){const R=new Sphere;this.getBoundingBoxAt(e,_box$1),_box$1.getCenter(R.center);const G=o.index,K=o.attributes.position;let Y=0;for(let Q=y.start,ee=y.start+y.count;Q<ee;Q++){let ie=Q;G&&(ie=G.getX(ie)),_vector$5.fromBufferAttribute(K,ie),Y=Math.max(Y,R.center.distanceToSquared(_vector$5))}R.radius=Math.sqrt(Y),y.boundingSphere=R}return t.copy(y.boundingSphere),t}setMatrixAt(e,t){this.validateInstanceId(e);const o=this._matricesTexture,y=this._matricesTexture.image.data;return t.toArray(y,e*16),o.needsUpdate=!0,this}getMatrixAt(e,t){return this.validateInstanceId(e),t.fromArray(this._matricesTexture.image.data,e*16)}setColorAt(e,t){return this.validateInstanceId(e),this._colorsTexture===null&&this._initColorsTexture(),t.toArray(this._colorsTexture.image.data,e*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,t){return this.validateInstanceId(e),t.fromArray(this._colorsTexture.image.data,e*4)}setVisibleAt(e,t){return this.validateInstanceId(e),this._instanceInfo[e].visible===t?this:(this._instanceInfo[e].visible=t,this._visibilityChanged=!0,this)}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,t){return this.validateInstanceId(e),this.validateGeometryId(t),this._instanceInfo[e].geometryIndex=t,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e,t={}){this.validateGeometryId(e);const o=this._geometryInfo[e];return t.vertexStart=o.vertexStart,t.vertexCount=o.vertexCount,t.reservedVertexCount=o.reservedVertexCount,t.indexStart=o.indexStart,t.indexCount=o.indexCount,t.reservedIndexCount=o.reservedIndexCount,t.start=o.start,t.count=o.count,t}setInstanceCount(e){const t=this._availableInstanceIds,o=this._instanceInfo;for(t.sort(ascIdSort);t[t.length-1]===o.length;)o.pop(),t.pop();if(e<o.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);const y=new Int32Array(e),R=new Int32Array(e);copyArrayContents(this._multiDrawCounts,y),copyArrayContents(this._multiDrawStarts,R),this._multiDrawCounts=y,this._multiDrawStarts=R,this._maxInstanceCount=e;const G=this._indirectTexture,K=this._matricesTexture,Y=this._colorsTexture;G.dispose(),this._initIndirectTexture(),copyArrayContents(G.image.data,this._indirectTexture.image.data),K.dispose(),this._initMatricesTexture(),copyArrayContents(K.image.data,this._matricesTexture.image.data),Y&&(Y.dispose(),this._initColorsTexture(),copyArrayContents(Y.image.data,this._colorsTexture.image.data))}setGeometrySize(e,t){const o=[...this._geometryInfo].filter(K=>K.active);if(Math.max(...o.map(K=>K.vertexStart+K.reservedVertexCount))>e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${t}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...o.map(Y=>Y.indexStart+Y.reservedIndexCount))>t)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${t}. Cannot shrink further.`);const R=this.geometry;R.dispose(),this._maxVertexCount=e,this._maxIndexCount=t,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new BufferGeometry,this._initializeGeometry(R));const G=this.geometry;R.index&&copyArrayContents(R.index.array,G.index.array);for(const K in R.attributes)copyArrayContents(R.attributes[K].array,G.attributes[K].array)}raycast(e,t){const o=this._instanceInfo,y=this._geometryInfo,R=this.matrixWorld,G=this.geometry;_mesh.material=this.material,_mesh.geometry.index=G.index,_mesh.geometry.attributes=G.attributes,_mesh.geometry.boundingBox===null&&(_mesh.geometry.boundingBox=new Box3),_mesh.geometry.boundingSphere===null&&(_mesh.geometry.boundingSphere=new Sphere);for(let K=0,Y=o.length;K<Y;K++){if(!o[K].visible||!o[K].active)continue;const Q=o[K].geometryIndex,ee=y[Q];_mesh.geometry.setDrawRange(ee.start,ee.count),this.getMatrixAt(K,_mesh.matrixWorld).premultiply(R),this.getBoundingBoxAt(Q,_mesh.geometry.boundingBox),this.getBoundingSphereAt(Q,_mesh.geometry.boundingSphere),_mesh.raycast(e,_batchIntersects);for(let ie=0,re=_batchIntersects.length;ie<re;ie++){const se=_batchIntersects[ie];se.object=this,se.batchId=K,t.push(se)}_batchIntersects.length=0}_mesh.material=null,_mesh.geometry.index=null,_mesh.geometry.attributes={},_mesh.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(t=>({...t,boundingBox:t.boundingBox!==null?t.boundingBox.clone():null,boundingSphere:t.boundingSphere!==null?t.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(t=>({...t})),this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(e,t,o,y,R){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const G=y.getIndex(),K=G===null?1:G.array.BYTES_PER_ELEMENT,Y=this._instanceInfo,Q=this._multiDrawStarts,ee=this._multiDrawCounts,ie=this._geometryInfo,re=this.perObjectFrustumCulled,se=this._indirectTexture,le=se.image.data;re&&(_matrix$1.multiplyMatrices(o.projectionMatrix,o.matrixWorldInverse).multiply(this.matrixWorld),_frustum.setFromProjectionMatrix(_matrix$1,e.coordinateSystem));let ce=0;if(this.sortObjects){_matrix$1.copy(this.matrixWorld).invert(),_vector$5.setFromMatrixPosition(o.matrixWorld).applyMatrix4(_matrix$1),_forward.set(0,0,-1).transformDirection(o.matrixWorld).transformDirection(_matrix$1);for(let ge=0,ve=Y.length;ge<ve;ge++)if(Y[ge].visible&&Y[ge].active){const _e=Y[ge].geometryIndex;this.getMatrixAt(ge,_matrix$1),this.getBoundingSphereAt(_e,_sphere$2).applyMatrix4(_matrix$1);let be=!1;if(re&&(be=!_frustum.intersectsSphere(_sphere$2)),!be){const Re=ie[_e],Se=_temp.subVectors(_sphere$2.center,_vector$5).dot(_forward);_renderList.push(Re.start,Re.count,Se,ge)}}const oe=_renderList.list,ue=this.customSort;ue===null?oe.sort(R.transparent?sortTransparent:sortOpaque):ue.call(this,oe,o);for(let ge=0,ve=oe.length;ge<ve;ge++){const _e=oe[ge];Q[ce]=_e.start*K,ee[ce]=_e.count,le[ce]=_e.index,ce++}_renderList.reset()}else for(let oe=0,ue=Y.length;oe<ue;oe++)if(Y[oe].visible&&Y[oe].active){const ge=Y[oe].geometryIndex;let ve=!1;if(re&&(this.getMatrixAt(oe,_matrix$1),this.getBoundingSphereAt(ge,_sphere$2).applyMatrix4(_matrix$1),ve=!_frustum.intersectsSphere(_sphere$2)),!ve){const _e=ie[ge];Q[ce]=_e.start*K,ee[ce]=_e.count,le[ce]=oe,ce++}}se.needsUpdate=!0,this._multiDrawCount=ce,this._visibilityChanged=!1}onBeforeShadow(e,t,o,y,R,G){this.onBeforeRender(e,null,y,R,G)}}class LineBasicMaterial extends Material{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Color(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const _vStart=new Vector3,_vEnd=new Vector3,_inverseMatrix$1=new Matrix4,_ray$1=new Ray,_sphere$1=new Sphere,_intersectPointOnRay=new Vector3,_intersectPointOnSegment=new Vector3;class Line extends Object3D{constructor(e=new BufferGeometry,t=new LineBasicMaterial){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,o=[0];for(let y=1,R=t.count;y<R;y++)_vStart.fromBufferAttribute(t,y-1),_vEnd.fromBufferAttribute(t,y),o[y]=o[y-1],o[y]+=_vStart.distanceTo(_vEnd);e.setAttribute("lineDistance",new Float32BufferAttribute(o,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const o=this.geometry,y=this.matrixWorld,R=e.params.Line.threshold,G=o.drawRange;if(o.boundingSphere===null&&o.computeBoundingSphere(),_sphere$1.copy(o.boundingSphere),_sphere$1.applyMatrix4(y),_sphere$1.radius+=R,e.ray.intersectsSphere(_sphere$1)===!1)return;_inverseMatrix$1.copy(y).invert(),_ray$1.copy(e.ray).applyMatrix4(_inverseMatrix$1);const K=R/((this.scale.x+this.scale.y+this.scale.z)/3),Y=K*K,Q=this.isLineSegments?2:1,ee=o.index,re=o.attributes.position;if(ee!==null){const se=Math.max(0,G.start),le=Math.min(ee.count,G.start+G.count);for(let ce=se,oe=le-1;ce<oe;ce+=Q){const ue=ee.getX(ce),ge=ee.getX(ce+1),ve=checkIntersection(this,e,_ray$1,Y,ue,ge,ce);ve&&t.push(ve)}if(this.isLineLoop){const ce=ee.getX(le-1),oe=ee.getX(se),ue=checkIntersection(this,e,_ray$1,Y,ce,oe,le-1);ue&&t.push(ue)}}else{const se=Math.max(0,G.start),le=Math.min(re.count,G.start+G.count);for(let ce=se,oe=le-1;ce<oe;ce+=Q){const ue=checkIntersection(this,e,_ray$1,Y,ce,ce+1,ce);ue&&t.push(ue)}if(this.isLineLoop){const ce=checkIntersection(this,e,_ray$1,Y,le-1,se,le-1);ce&&t.push(ce)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,o=Object.keys(t);if(o.length>0){const y=t[o[0]];if(y!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let R=0,G=y.length;R<G;R++){const K=y[R].name||String(R);this.morphTargetInfluences.push(0),this.morphTargetDictionary[K]=R}}}}}function checkIntersection(r,e,t,o,y,R,G){const K=r.geometry.attributes.position;if(_vStart.fromBufferAttribute(K,y),_vEnd.fromBufferAttribute(K,R),t.distanceSqToSegment(_vStart,_vEnd,_intersectPointOnRay,_intersectPointOnSegment)>o)return;_intersectPointOnRay.applyMatrix4(r.matrixWorld);const Q=e.ray.origin.distanceTo(_intersectPointOnRay);if(!(Q<e.near||Q>e.far))return{distance:Q,point:_intersectPointOnSegment.clone().applyMatrix4(r.matrixWorld),index:G,face:null,faceIndex:null,barycoord:null,object:r}}const _start=new Vector3,_end=new Vector3;class LineSegments extends Line{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,o=[];for(let y=0,R=t.count;y<R;y+=2)_start.fromBufferAttribute(t,y),_end.fromBufferAttribute(t,y+1),o[y]=y===0?0:o[y-1],o[y+1]=o[y]+_start.distanceTo(_end);e.setAttribute("lineDistance",new Float32BufferAttribute(o,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class LineLoop extends Line{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class PointsMaterial extends Material{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Color(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const _inverseMatrix=new Matrix4,_ray$4=new Ray,_sphere=new Sphere,_position$2=new Vector3;class Points extends Object3D{constructor(e=new BufferGeometry,t=new PointsMaterial){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const o=this.geometry,y=this.matrixWorld,R=e.params.Points.threshold,G=o.drawRange;if(o.boundingSphere===null&&o.computeBoundingSphere(),_sphere.copy(o.boundingSphere),_sphere.applyMatrix4(y),_sphere.radius+=R,e.ray.intersectsSphere(_sphere)===!1)return;_inverseMatrix.copy(y).invert(),_ray$4.copy(e.ray).applyMatrix4(_inverseMatrix);const K=R/((this.scale.x+this.scale.y+this.scale.z)/3),Y=K*K,Q=o.index,ie=o.attributes.position;if(Q!==null){const re=Math.max(0,G.start),se=Math.min(Q.count,G.start+G.count);for(let le=re,ce=se;le<ce;le++){const oe=Q.getX(le);_position$2.fromBufferAttribute(ie,oe),testPoint(_position$2,oe,Y,y,e,t,this)}}else{const re=Math.max(0,G.start),se=Math.min(ie.count,G.start+G.count);for(let le=re,ce=se;le<ce;le++)_position$2.fromBufferAttribute(ie,le),testPoint(_position$2,le,Y,y,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,o=Object.keys(t);if(o.length>0){const y=t[o[0]];if(y!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let R=0,G=y.length;R<G;R++){const K=y[R].name||String(R);this.morphTargetInfluences.push(0),this.morphTargetDictionary[K]=R}}}}}function testPoint(r,e,t,o,y,R,G){const K=_ray$4.distanceSqToPoint(r);if(K<t){const Y=new Vector3;_ray$4.closestPointToPoint(r,Y),Y.applyMatrix4(o);const Q=y.ray.origin.distanceTo(Y);if(Q<y.near||Q>y.far)return;R.push({distance:Q,distanceToRay:Math.sqrt(K),point:Y,index:e,face:null,faceIndex:null,barycoord:null,object:G})}}class VideoTexture extends Texture{constructor(e,t,o,y,R=LinearFilter,G=LinearFilter,K,Y,Q){super(e,t,o,y,R,G,K,Y,Q),this.isVideoTexture=!0,this.generateMipmaps=!1;const ee=this;function ie(){ee.needsUpdate=!0,e.requestVideoFrameCallback(ie)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(ie)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class VideoFrameTexture extends VideoTexture{constructor(e,t,o,y,R,G,K,Y){super({},e,t,o,y,R,G,K,Y),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(e){this.image=e,this.needsUpdate=!0}}class FramebufferTexture extends Texture{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.generateMipmaps=!1,this.needsUpdate=!0}}class CompressedTexture extends Texture{constructor(e,t,o,y,R,G,K,Y,Q,ee,ie,re){super(null,G,K,Y,Q,ee,y,R,ie,re),this.isCompressedTexture=!0,this.image={width:t,height:o},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class CompressedArrayTexture extends CompressedTexture{constructor(e,t,o,y,R,G){super(e,t,o,R,G),this.isCompressedArrayTexture=!0,this.image.depth=y,this.wrapR=ClampToEdgeWrapping,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class CompressedCubeTexture extends CompressedTexture{constructor(e,t,o){super(void 0,e[0].width,e[0].height,t,o,CubeReflectionMapping),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class CanvasTexture extends Texture{constructor(e,t,o,y,R,G,K,Y,Q){super(e,t,o,y,R,G,K,Y,Q),this.isCanvasTexture=!0,this.needsUpdate=!0}}class DepthTexture extends Texture{constructor(e,t,o=UnsignedIntType,y,R,G,K=NearestFilter,Y=NearestFilter,Q,ee=DepthFormat){if(ee!==DepthFormat&&ee!==DepthStencilFormat)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");super(null,y,R,G,K,Y,ee,o,Q),this.isDepthTexture=!0,this.image={width:e,height:t},this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new Source(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class Curve{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){console.warn("THREE.Curve: .getPoint() not implemented.")}getPointAt(e,t){const o=this.getUtoTmapping(e);return this.getPoint(o,t)}getPoints(e=5){const t=[];for(let o=0;o<=e;o++)t.push(this.getPoint(o/e));return t}getSpacedPoints(e=5){const t=[];for(let o=0;o<=e;o++)t.push(this.getPointAt(o/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let o,y=this.getPoint(0),R=0;t.push(0);for(let G=1;G<=e;G++)o=this.getPoint(G/e),R+=o.distanceTo(y),t.push(R),y=o;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t=null){const o=this.getLengths();let y=0;const R=o.length;let G;t?G=t:G=e*o[R-1];let K=0,Y=R-1,Q;for(;K<=Y;)if(y=Math.floor(K+(Y-K)/2),Q=o[y]-G,Q<0)K=y+1;else if(Q>0)Y=y-1;else{Y=y;break}if(y=Y,o[y]===G)return y/(R-1);const ee=o[y],re=o[y+1]-ee,se=(G-ee)/re;return(y+se)/(R-1)}getTangent(e,t){let y=e-1e-4,R=e+1e-4;y<0&&(y=0),R>1&&(R=1);const G=this.getPoint(y),K=this.getPoint(R),Y=t||(G.isVector2?new Vector2:new Vector3);return Y.copy(K).sub(G).normalize(),Y}getTangentAt(e,t){const o=this.getUtoTmapping(e);return this.getTangent(o,t)}computeFrenetFrames(e,t=!1){const o=new Vector3,y=[],R=[],G=[],K=new Vector3,Y=new Matrix4;for(let se=0;se<=e;se++){const le=se/e;y[se]=this.getTangentAt(le,new Vector3)}R[0]=new Vector3,G[0]=new Vector3;let Q=Number.MAX_VALUE;const ee=Math.abs(y[0].x),ie=Math.abs(y[0].y),re=Math.abs(y[0].z);ee<=Q&&(Q=ee,o.set(1,0,0)),ie<=Q&&(Q=ie,o.set(0,1,0)),re<=Q&&o.set(0,0,1),K.crossVectors(y[0],o).normalize(),R[0].crossVectors(y[0],K),G[0].crossVectors(y[0],R[0]);for(let se=1;se<=e;se++){if(R[se]=R[se-1].clone(),G[se]=G[se-1].clone(),K.crossVectors(y[se-1],y[se]),K.length()>Number.EPSILON){K.normalize();const le=Math.acos(clamp$1(y[se-1].dot(y[se]),-1,1));R[se].applyMatrix4(Y.makeRotationAxis(K,le))}G[se].crossVectors(y[se],R[se])}if(t===!0){let se=Math.acos(clamp$1(R[0].dot(R[e]),-1,1));se/=e,y[0].dot(K.crossVectors(R[0],R[e]))>0&&(se=-se);for(let le=1;le<=e;le++)R[le].applyMatrix4(Y.makeRotationAxis(y[le],se*le)),G[le].crossVectors(y[le],R[le])}return{tangents:y,normals:R,binormals:G}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class EllipseCurve extends Curve{constructor(e=0,t=0,o=1,y=1,R=0,G=Math.PI*2,K=!1,Y=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=o,this.yRadius=y,this.aStartAngle=R,this.aEndAngle=G,this.aClockwise=K,this.aRotation=Y}getPoint(e,t=new Vector2){const o=t,y=Math.PI*2;let R=this.aEndAngle-this.aStartAngle;const G=Math.abs(R)<Number.EPSILON;for(;R<0;)R+=y;for(;R>y;)R-=y;R<Number.EPSILON&&(G?R=0:R=y),this.aClockwise===!0&&!G&&(R===y?R=-y:R=R-y);const K=this.aStartAngle+e*R;let Y=this.aX+this.xRadius*Math.cos(K),Q=this.aY+this.yRadius*Math.sin(K);if(this.aRotation!==0){const ee=Math.cos(this.aRotation),ie=Math.sin(this.aRotation),re=Y-this.aX,se=Q-this.aY;Y=re*ee-se*ie+this.aX,Q=re*ie+se*ee+this.aY}return o.set(Y,Q)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class ArcCurve extends EllipseCurve{constructor(e,t,o,y,R,G){super(e,t,o,o,y,R,G),this.isArcCurve=!0,this.type="ArcCurve"}}function CubicPoly(){let r=0,e=0,t=0,o=0;function y(R,G,K,Y){r=R,e=K,t=-3*R+3*G-2*K-Y,o=2*R-2*G+K+Y}return{initCatmullRom:function(R,G,K,Y,Q){y(G,K,Q*(K-R),Q*(Y-G))},initNonuniformCatmullRom:function(R,G,K,Y,Q,ee,ie){let re=(G-R)/Q-(K-R)/(Q+ee)+(K-G)/ee,se=(K-G)/ee-(Y-G)/(ee+ie)+(Y-K)/ie;re*=ee,se*=ee,y(G,K,re,se)},calc:function(R){const G=R*R,K=G*R;return r+e*R+t*G+o*K}}}const tmp=new Vector3,px$1=new CubicPoly,py=new CubicPoly,pz=new CubicPoly;class CatmullRomCurve3 extends Curve{constructor(e=[],t=!1,o="centripetal",y=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=o,this.tension=y}getPoint(e,t=new Vector3){const o=t,y=this.points,R=y.length,G=(R-(this.closed?0:1))*e;let K=Math.floor(G),Y=G-K;this.closed?K+=K>0?0:(Math.floor(Math.abs(K)/R)+1)*R:Y===0&&K===R-1&&(K=R-2,Y=1);let Q,ee;this.closed||K>0?Q=y[(K-1)%R]:(tmp.subVectors(y[0],y[1]).add(y[0]),Q=tmp);const ie=y[K%R],re=y[(K+1)%R];if(this.closed||K+2<R?ee=y[(K+2)%R]:(tmp.subVectors(y[R-1],y[R-2]).add(y[R-1]),ee=tmp),this.curveType==="centripetal"||this.curveType==="chordal"){const se=this.curveType==="chordal"?.5:.25;let le=Math.pow(Q.distanceToSquared(ie),se),ce=Math.pow(ie.distanceToSquared(re),se),oe=Math.pow(re.distanceToSquared(ee),se);ce<1e-4&&(ce=1),le<1e-4&&(le=ce),oe<1e-4&&(oe=ce),px$1.initNonuniformCatmullRom(Q.x,ie.x,re.x,ee.x,le,ce,oe),py.initNonuniformCatmullRom(Q.y,ie.y,re.y,ee.y,le,ce,oe),pz.initNonuniformCatmullRom(Q.z,ie.z,re.z,ee.z,le,ce,oe)}else this.curveType==="catmullrom"&&(px$1.initCatmullRom(Q.x,ie.x,re.x,ee.x,this.tension),py.initCatmullRom(Q.y,ie.y,re.y,ee.y,this.tension),pz.initCatmullRom(Q.z,ie.z,re.z,ee.z,this.tension));return o.set(px$1.calc(Y),py.calc(Y),pz.calc(Y)),o}copy(e){super.copy(e),this.points=[];for(let t=0,o=e.points.length;t<o;t++){const y=e.points[t];this.points.push(y.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,o=this.points.length;t<o;t++){const y=this.points[t];e.points.push(y.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,o=e.points.length;t<o;t++){const y=e.points[t];this.points.push(new Vector3().fromArray(y))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function CatmullRom(r,e,t,o,y){const R=(o-e)*.5,G=(y-t)*.5,K=r*r,Y=r*K;return(2*t-2*o+R+G)*Y+(-3*t+3*o-2*R-G)*K+R*r+t}function QuadraticBezierP0(r,e){const t=1-r;return t*t*e}function QuadraticBezierP1(r,e){return 2*(1-r)*r*e}function QuadraticBezierP2(r,e){return r*r*e}function QuadraticBezier(r,e,t,o){return QuadraticBezierP0(r,e)+QuadraticBezierP1(r,t)+QuadraticBezierP2(r,o)}function CubicBezierP0(r,e){const t=1-r;return t*t*t*e}function CubicBezierP1(r,e){const t=1-r;return 3*t*t*r*e}function CubicBezierP2(r,e){return 3*(1-r)*r*r*e}function CubicBezierP3(r,e){return r*r*r*e}function CubicBezier(r,e,t,o,y){return CubicBezierP0(r,e)+CubicBezierP1(r,t)+CubicBezierP2(r,o)+CubicBezierP3(r,y)}class CubicBezierCurve extends Curve{constructor(e=new Vector2,t=new Vector2,o=new Vector2,y=new Vector2){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=o,this.v3=y}getPoint(e,t=new Vector2){const o=t,y=this.v0,R=this.v1,G=this.v2,K=this.v3;return o.set(CubicBezier(e,y.x,R.x,G.x,K.x),CubicBezier(e,y.y,R.y,G.y,K.y)),o}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class CubicBezierCurve3 extends Curve{constructor(e=new Vector3,t=new Vector3,o=new Vector3,y=new Vector3){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=o,this.v3=y}getPoint(e,t=new Vector3){const o=t,y=this.v0,R=this.v1,G=this.v2,K=this.v3;return o.set(CubicBezier(e,y.x,R.x,G.x,K.x),CubicBezier(e,y.y,R.y,G.y,K.y),CubicBezier(e,y.z,R.z,G.z,K.z)),o}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class LineCurve extends Curve{constructor(e=new Vector2,t=new Vector2){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Vector2){const o=t;return e===1?o.copy(this.v2):(o.copy(this.v2).sub(this.v1),o.multiplyScalar(e).add(this.v1)),o}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Vector2){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class LineCurve3 extends Curve{constructor(e=new Vector3,t=new Vector3){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new Vector3){const o=t;return e===1?o.copy(this.v2):(o.copy(this.v2).sub(this.v1),o.multiplyScalar(e).add(this.v1)),o}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Vector3){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class QuadraticBezierCurve extends Curve{constructor(e=new Vector2,t=new Vector2,o=new Vector2){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=o}getPoint(e,t=new Vector2){const o=t,y=this.v0,R=this.v1,G=this.v2;return o.set(QuadraticBezier(e,y.x,R.x,G.x),QuadraticBezier(e,y.y,R.y,G.y)),o}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class QuadraticBezierCurve3 extends Curve{constructor(e=new Vector3,t=new Vector3,o=new Vector3){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=o}getPoint(e,t=new Vector3){const o=t,y=this.v0,R=this.v1,G=this.v2;return o.set(QuadraticBezier(e,y.x,R.x,G.x),QuadraticBezier(e,y.y,R.y,G.y),QuadraticBezier(e,y.z,R.z,G.z)),o}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class SplineCurve extends Curve{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Vector2){const o=t,y=this.points,R=(y.length-1)*e,G=Math.floor(R),K=R-G,Y=y[G===0?G:G-1],Q=y[G],ee=y[G>y.length-2?y.length-1:G+1],ie=y[G>y.length-3?y.length-1:G+2];return o.set(CatmullRom(K,Y.x,Q.x,ee.x,ie.x),CatmullRom(K,Y.y,Q.y,ee.y,ie.y)),o}copy(e){super.copy(e),this.points=[];for(let t=0,o=e.points.length;t<o;t++){const y=e.points[t];this.points.push(y.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,o=this.points.length;t<o;t++){const y=this.points[t];e.points.push(y.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,o=e.points.length;t<o;t++){const y=e.points[t];this.points.push(new Vector2().fromArray(y))}return this}}var Curves=Object.freeze({__proto__:null,ArcCurve,CatmullRomCurve3,CubicBezierCurve,CubicBezierCurve3,EllipseCurve,LineCurve,LineCurve3,QuadraticBezierCurve,QuadraticBezierCurve3,SplineCurve});class CurvePath extends Curve{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const o=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new Curves[o](t,e))}return this}getPoint(e,t){const o=e*this.getLength(),y=this.getCurveLengths();let R=0;for(;R<y.length;){if(y[R]>=o){const G=y[R]-o,K=this.curves[R],Y=K.getLength(),Q=Y===0?0:1-G/Y;return K.getPointAt(Q,t)}R++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let o=0,y=this.curves.length;o<y;o++)t+=this.curves[o].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let o=0;o<=e;o++)t.push(this.getPoint(o/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let o;for(let y=0,R=this.curves;y<R.length;y++){const G=R[y],K=G.isEllipseCurve?e*2:G.isLineCurve||G.isLineCurve3?1:G.isSplineCurve?e*G.points.length:e,Y=G.getPoints(K);for(let Q=0;Q<Y.length;Q++){const ee=Y[Q];o&&o.equals(ee)||(t.push(ee),o=ee)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,o=e.curves.length;t<o;t++){const y=e.curves[t];this.curves.push(y.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,o=this.curves.length;t<o;t++){const y=this.curves[t];e.curves.push(y.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,o=e.curves.length;t<o;t++){const y=e.curves[t];this.curves.push(new Curves[y.type]().fromJSON(y))}return this}}class Path extends CurvePath{constructor(e){super(),this.type="Path",this.currentPoint=new Vector2,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,o=e.length;t<o;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const o=new LineCurve(this.currentPoint.clone(),new Vector2(e,t));return this.curves.push(o),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,o,y){const R=new QuadraticBezierCurve(this.currentPoint.clone(),new Vector2(e,t),new Vector2(o,y));return this.curves.push(R),this.currentPoint.set(o,y),this}bezierCurveTo(e,t,o,y,R,G){const K=new CubicBezierCurve(this.currentPoint.clone(),new Vector2(e,t),new Vector2(o,y),new Vector2(R,G));return this.curves.push(K),this.currentPoint.set(R,G),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),o=new SplineCurve(t);return this.curves.push(o),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,o,y,R,G){const K=this.currentPoint.x,Y=this.currentPoint.y;return this.absarc(e+K,t+Y,o,y,R,G),this}absarc(e,t,o,y,R,G){return this.absellipse(e,t,o,o,y,R,G),this}ellipse(e,t,o,y,R,G,K,Y){const Q=this.currentPoint.x,ee=this.currentPoint.y;return this.absellipse(e+Q,t+ee,o,y,R,G,K,Y),this}absellipse(e,t,o,y,R,G,K,Y){const Q=new EllipseCurve(e,t,o,y,R,G,K,Y);if(this.curves.length>0){const ie=Q.getPoint(0);ie.equals(this.currentPoint)||this.lineTo(ie.x,ie.y)}this.curves.push(Q);const ee=Q.getPoint(1);return this.currentPoint.copy(ee),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class LatheGeometry extends BufferGeometry{constructor(e=[new Vector2(0,-.5),new Vector2(.5,0),new Vector2(0,.5)],t=12,o=0,y=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:o,phiLength:y},t=Math.floor(t),y=clamp$1(y,0,Math.PI*2);const R=[],G=[],K=[],Y=[],Q=[],ee=1/t,ie=new Vector3,re=new Vector2,se=new Vector3,le=new Vector3,ce=new Vector3;let oe=0,ue=0;for(let ge=0;ge<=e.length-1;ge++)switch(ge){case 0:oe=e[ge+1].x-e[ge].x,ue=e[ge+1].y-e[ge].y,se.x=ue*1,se.y=-oe,se.z=ue*0,ce.copy(se),se.normalize(),Y.push(se.x,se.y,se.z);break;case e.length-1:Y.push(ce.x,ce.y,ce.z);break;default:oe=e[ge+1].x-e[ge].x,ue=e[ge+1].y-e[ge].y,se.x=ue*1,se.y=-oe,se.z=ue*0,le.copy(se),se.x+=ce.x,se.y+=ce.y,se.z+=ce.z,se.normalize(),Y.push(se.x,se.y,se.z),ce.copy(le)}for(let ge=0;ge<=t;ge++){const ve=o+ge*ee*y,_e=Math.sin(ve),be=Math.cos(ve);for(let Re=0;Re<=e.length-1;Re++){ie.x=e[Re].x*_e,ie.y=e[Re].y,ie.z=e[Re].x*be,G.push(ie.x,ie.y,ie.z),re.x=ge/t,re.y=Re/(e.length-1),K.push(re.x,re.y);const Se=Y[3*Re+0]*_e,Ee=Y[3*Re+1],ye=Y[3*Re+0]*be;Q.push(Se,Ee,ye)}}for(let ge=0;ge<t;ge++)for(let ve=0;ve<e.length-1;ve++){const _e=ve+ge*e.length,be=_e,Re=_e+e.length,Se=_e+e.length+1,Ee=_e+1;R.push(be,Re,Ee),R.push(Se,Ee,Re)}this.setIndex(R),this.setAttribute("position",new Float32BufferAttribute(G,3)),this.setAttribute("uv",new Float32BufferAttribute(K,2)),this.setAttribute("normal",new Float32BufferAttribute(Q,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new LatheGeometry(e.points,e.segments,e.phiStart,e.phiLength)}}class CapsuleGeometry extends LatheGeometry{constructor(e=1,t=1,o=4,y=8){const R=new Path;R.absarc(0,-t/2,e,Math.PI*1.5,0),R.absarc(0,t/2,e,0,Math.PI*.5),super(R.getPoints(o),y),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:o,radialSegments:y}}static fromJSON(e){return new CapsuleGeometry(e.radius,e.length,e.capSegments,e.radialSegments)}}class CircleGeometry extends BufferGeometry{constructor(e=1,t=32,o=0,y=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:o,thetaLength:y},t=Math.max(3,t);const R=[],G=[],K=[],Y=[],Q=new Vector3,ee=new Vector2;G.push(0,0,0),K.push(0,0,1),Y.push(.5,.5);for(let ie=0,re=3;ie<=t;ie++,re+=3){const se=o+ie/t*y;Q.x=e*Math.cos(se),Q.y=e*Math.sin(se),G.push(Q.x,Q.y,Q.z),K.push(0,0,1),ee.x=(G[re]/e+1)/2,ee.y=(G[re+1]/e+1)/2,Y.push(ee.x,ee.y)}for(let ie=1;ie<=t;ie++)R.push(ie,ie+1,0);this.setIndex(R),this.setAttribute("position",new Float32BufferAttribute(G,3)),this.setAttribute("normal",new Float32BufferAttribute(K,3)),this.setAttribute("uv",new Float32BufferAttribute(Y,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new CircleGeometry(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class CylinderGeometry extends BufferGeometry{constructor(e=1,t=1,o=1,y=32,R=1,G=!1,K=0,Y=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:o,radialSegments:y,heightSegments:R,openEnded:G,thetaStart:K,thetaLength:Y};const Q=this;y=Math.floor(y),R=Math.floor(R);const ee=[],ie=[],re=[],se=[];let le=0;const ce=[],oe=o/2;let ue=0;ge(),G===!1&&(e>0&&ve(!0),t>0&&ve(!1)),this.setIndex(ee),this.setAttribute("position",new Float32BufferAttribute(ie,3)),this.setAttribute("normal",new Float32BufferAttribute(re,3)),this.setAttribute("uv",new Float32BufferAttribute(se,2));function ge(){const _e=new Vector3,be=new Vector3;let Re=0;const Se=(t-e)/o;for(let Ee=0;Ee<=R;Ee++){const ye=[],de=Ee/R,Me=de*(t-e)+e;for(let Le=0;Le<=y;Le++){const Pe=Le/y,Ue=Pe*Y+K,$e=Math.sin(Ue),Ve=Math.cos(Ue);be.x=Me*$e,be.y=-de*o+oe,be.z=Me*Ve,ie.push(be.x,be.y,be.z),_e.set($e,Se,Ve).normalize(),re.push(_e.x,_e.y,_e.z),se.push(Pe,1-de),ye.push(le++)}ce.push(ye)}for(let Ee=0;Ee<y;Ee++)for(let ye=0;ye<R;ye++){const de=ce[ye][Ee],Me=ce[ye+1][Ee],Le=ce[ye+1][Ee+1],Pe=ce[ye][Ee+1];(e>0||ye!==0)&&(ee.push(de,Me,Pe),Re+=3),(t>0||ye!==R-1)&&(ee.push(Me,Le,Pe),Re+=3)}Q.addGroup(ue,Re,0),ue+=Re}function ve(_e){const be=le,Re=new Vector2,Se=new Vector3;let Ee=0;const ye=_e===!0?e:t,de=_e===!0?1:-1;for(let Le=1;Le<=y;Le++)ie.push(0,oe*de,0),re.push(0,de,0),se.push(.5,.5),le++;const Me=le;for(let Le=0;Le<=y;Le++){const Ue=Le/y*Y+K,$e=Math.cos(Ue),Ve=Math.sin(Ue);Se.x=ye*Ve,Se.y=oe*de,Se.z=ye*$e,ie.push(Se.x,Se.y,Se.z),re.push(0,de,0),Re.x=$e*.5+.5,Re.y=Ve*.5*de+.5,se.push(Re.x,Re.y),le++}for(let Le=0;Le<y;Le++){const Pe=be+Le,Ue=Me+Le;_e===!0?ee.push(Ue,Ue+1,Pe):ee.push(Ue+1,Ue,Pe),Ee+=3}Q.addGroup(ue,Ee,_e===!0?1:2),ue+=Ee}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new CylinderGeometry(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class ConeGeometry extends CylinderGeometry{constructor(e=1,t=1,o=32,y=1,R=!1,G=0,K=Math.PI*2){super(0,e,t,o,y,R,G,K),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:o,heightSegments:y,openEnded:R,thetaStart:G,thetaLength:K}}static fromJSON(e){return new ConeGeometry(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class PolyhedronGeometry extends BufferGeometry{constructor(e=[],t=[],o=1,y=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:o,detail:y};const R=[],G=[];K(y),Q(o),ee(),this.setAttribute("position",new Float32BufferAttribute(R,3)),this.setAttribute("normal",new Float32BufferAttribute(R.slice(),3)),this.setAttribute("uv",new Float32BufferAttribute(G,2)),y===0?this.computeVertexNormals():this.normalizeNormals();function K(ge){const ve=new Vector3,_e=new Vector3,be=new Vector3;for(let Re=0;Re<t.length;Re+=3)se(t[Re+0],ve),se(t[Re+1],_e),se(t[Re+2],be),Y(ve,_e,be,ge)}function Y(ge,ve,_e,be){const Re=be+1,Se=[];for(let Ee=0;Ee<=Re;Ee++){Se[Ee]=[];const ye=ge.clone().lerp(_e,Ee/Re),de=ve.clone().lerp(_e,Ee/Re),Me=Re-Ee;for(let Le=0;Le<=Me;Le++)Le===0&&Ee===Re?Se[Ee][Le]=ye:Se[Ee][Le]=ye.clone().lerp(de,Le/Me)}for(let Ee=0;Ee<Re;Ee++)for(let ye=0;ye<2*(Re-Ee)-1;ye++){const de=Math.floor(ye/2);ye%2===0?(re(Se[Ee][de+1]),re(Se[Ee+1][de]),re(Se[Ee][de])):(re(Se[Ee][de+1]),re(Se[Ee+1][de+1]),re(Se[Ee+1][de]))}}function Q(ge){const ve=new Vector3;for(let _e=0;_e<R.length;_e+=3)ve.x=R[_e+0],ve.y=R[_e+1],ve.z=R[_e+2],ve.normalize().multiplyScalar(ge),R[_e+0]=ve.x,R[_e+1]=ve.y,R[_e+2]=ve.z}function ee(){const ge=new Vector3;for(let ve=0;ve<R.length;ve+=3){ge.x=R[ve+0],ge.y=R[ve+1],ge.z=R[ve+2];const _e=oe(ge)/2/Math.PI+.5,be=ue(ge)/Math.PI+.5;G.push(_e,1-be)}le(),ie()}function ie(){for(let ge=0;ge<G.length;ge+=6){const ve=G[ge+0],_e=G[ge+2],be=G[ge+4],Re=Math.max(ve,_e,be),Se=Math.min(ve,_e,be);Re>.9&&Se<.1&&(ve<.2&&(G[ge+0]+=1),_e<.2&&(G[ge+2]+=1),be<.2&&(G[ge+4]+=1))}}function re(ge){R.push(ge.x,ge.y,ge.z)}function se(ge,ve){const _e=ge*3;ve.x=e[_e+0],ve.y=e[_e+1],ve.z=e[_e+2]}function le(){const ge=new Vector3,ve=new Vector3,_e=new Vector3,be=new Vector3,Re=new Vector2,Se=new Vector2,Ee=new Vector2;for(let ye=0,de=0;ye<R.length;ye+=9,de+=6){ge.set(R[ye+0],R[ye+1],R[ye+2]),ve.set(R[ye+3],R[ye+4],R[ye+5]),_e.set(R[ye+6],R[ye+7],R[ye+8]),Re.set(G[de+0],G[de+1]),Se.set(G[de+2],G[de+3]),Ee.set(G[de+4],G[de+5]),be.copy(ge).add(ve).add(_e).divideScalar(3);const Me=oe(be);ce(Re,de+0,ge,Me),ce(Se,de+2,ve,Me),ce(Ee,de+4,_e,Me)}}function ce(ge,ve,_e,be){be<0&&ge.x===1&&(G[ve]=ge.x-1),_e.x===0&&_e.z===0&&(G[ve]=be/2/Math.PI+.5)}function oe(ge){return Math.atan2(ge.z,-ge.x)}function ue(ge){return Math.atan2(-ge.y,Math.sqrt(ge.x*ge.x+ge.z*ge.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new PolyhedronGeometry(e.vertices,e.indices,e.radius,e.details)}}class DodecahedronGeometry extends PolyhedronGeometry{constructor(e=1,t=0){const o=(1+Math.sqrt(5))/2,y=1/o,R=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-y,-o,0,-y,o,0,y,-o,0,y,o,-y,-o,0,-y,o,0,y,-o,0,y,o,0,-o,0,-y,o,0,-y,-o,0,y,o,0,y],G=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(R,G,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new DodecahedronGeometry(e.radius,e.detail)}}const _v0$3=new Vector3,_v1$1=new Vector3,_normal=new Vector3,_triangle=new Triangle;class EdgesGeometry extends BufferGeometry{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const y=Math.pow(10,4),R=Math.cos(DEG2RAD*t),G=e.getIndex(),K=e.getAttribute("position"),Y=G?G.count:K.count,Q=[0,0,0],ee=["a","b","c"],ie=new Array(3),re={},se=[];for(let le=0;le<Y;le+=3){G?(Q[0]=G.getX(le),Q[1]=G.getX(le+1),Q[2]=G.getX(le+2)):(Q[0]=le,Q[1]=le+1,Q[2]=le+2);const{a:ce,b:oe,c:ue}=_triangle;if(ce.fromBufferAttribute(K,Q[0]),oe.fromBufferAttribute(K,Q[1]),ue.fromBufferAttribute(K,Q[2]),_triangle.getNormal(_normal),ie[0]=`${Math.round(ce.x*y)},${Math.round(ce.y*y)},${Math.round(ce.z*y)}`,ie[1]=`${Math.round(oe.x*y)},${Math.round(oe.y*y)},${Math.round(oe.z*y)}`,ie[2]=`${Math.round(ue.x*y)},${Math.round(ue.y*y)},${Math.round(ue.z*y)}`,!(ie[0]===ie[1]||ie[1]===ie[2]||ie[2]===ie[0]))for(let ge=0;ge<3;ge++){const ve=(ge+1)%3,_e=ie[ge],be=ie[ve],Re=_triangle[ee[ge]],Se=_triangle[ee[ve]],Ee=`${_e}_${be}`,ye=`${be}_${_e}`;ye in re&&re[ye]?(_normal.dot(re[ye].normal)<=R&&(se.push(Re.x,Re.y,Re.z),se.push(Se.x,Se.y,Se.z)),re[ye]=null):Ee in re||(re[Ee]={index0:Q[ge],index1:Q[ve],normal:_normal.clone()})}}for(const le in re)if(re[le]){const{index0:ce,index1:oe}=re[le];_v0$3.fromBufferAttribute(K,ce),_v1$1.fromBufferAttribute(K,oe),se.push(_v0$3.x,_v0$3.y,_v0$3.z),se.push(_v1$1.x,_v1$1.y,_v1$1.z)}this.setAttribute("position",new Float32BufferAttribute(se,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Shape extends Path{constructor(e){super(e),this.uuid=generateUUID(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let o=0,y=this.holes.length;o<y;o++)t[o]=this.holes[o].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,o=e.holes.length;t<o;t++){const y=e.holes[t];this.holes.push(y.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,o=this.holes.length;t<o;t++){const y=this.holes[t];e.holes.push(y.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,o=e.holes.length;t<o;t++){const y=e.holes[t];this.holes.push(new Path().fromJSON(y))}return this}}function earcut(r,e,t=2){const o=e&&e.length,y=o?e[0]*t:r.length;let R=linkedList(r,0,y,t,!0);const G=[];if(!R||R.next===R.prev)return G;let K,Y,Q;if(o&&(R=eliminateHoles(r,e,R,t)),r.length>80*t){K=1/0,Y=1/0;let ee=-1/0,ie=-1/0;for(let re=t;re<y;re+=t){const se=r[re],le=r[re+1];se<K&&(K=se),le<Y&&(Y=le),se>ee&&(ee=se),le>ie&&(ie=le)}Q=Math.max(ee-K,ie-Y),Q=Q!==0?32767/Q:0}return earcutLinked(R,G,t,K,Y,Q,0),G}function linkedList(r,e,t,o,y){let R;if(y===signedArea(r,e,t,o)>0)for(let G=e;G<t;G+=o)R=insertNode(G/o|0,r[G],r[G+1],R);else for(let G=t-o;G>=e;G-=o)R=insertNode(G/o|0,r[G],r[G+1],R);return R&&equals(R,R.next)&&(removeNode(R),R=R.next),R}function filterPoints(r,e){if(!r)return r;e||(e=r);let t=r,o;do if(o=!1,!t.steiner&&(equals(t,t.next)||area(t.prev,t,t.next)===0)){if(removeNode(t),t=e=t.prev,t===t.next)break;o=!0}else t=t.next;while(o||t!==e);return e}function earcutLinked(r,e,t,o,y,R,G){if(!r)return;!G&&R&&indexCurve(r,o,y,R);let K=r;for(;r.prev!==r.next;){const Y=r.prev,Q=r.next;if(R?isEarHashed(r,o,y,R):isEar(r)){e.push(Y.i,r.i,Q.i),removeNode(r),r=Q.next,K=Q.next;continue}if(r=Q,r===K){G?G===1?(r=cureLocalIntersections(filterPoints(r),e),earcutLinked(r,e,t,o,y,R,2)):G===2&&splitEarcut(r,e,t,o,y,R):earcutLinked(filterPoints(r),e,t,o,y,R,1);break}}}function isEar(r){const e=r.prev,t=r,o=r.next;if(area(e,t,o)>=0)return!1;const y=e.x,R=t.x,G=o.x,K=e.y,Y=t.y,Q=o.y,ee=Math.min(y,R,G),ie=Math.min(K,Y,Q),re=Math.max(y,R,G),se=Math.max(K,Y,Q);let le=o.next;for(;le!==e;){if(le.x>=ee&&le.x<=re&&le.y>=ie&&le.y<=se&&pointInTriangleExceptFirst(y,K,R,Y,G,Q,le.x,le.y)&&area(le.prev,le,le.next)>=0)return!1;le=le.next}return!0}function isEarHashed(r,e,t,o){const y=r.prev,R=r,G=r.next;if(area(y,R,G)>=0)return!1;const K=y.x,Y=R.x,Q=G.x,ee=y.y,ie=R.y,re=G.y,se=Math.min(K,Y,Q),le=Math.min(ee,ie,re),ce=Math.max(K,Y,Q),oe=Math.max(ee,ie,re),ue=zOrder(se,le,e,t,o),ge=zOrder(ce,oe,e,t,o);let ve=r.prevZ,_e=r.nextZ;for(;ve&&ve.z>=ue&&_e&&_e.z<=ge;){if(ve.x>=se&&ve.x<=ce&&ve.y>=le&&ve.y<=oe&&ve!==y&&ve!==G&&pointInTriangleExceptFirst(K,ee,Y,ie,Q,re,ve.x,ve.y)&&area(ve.prev,ve,ve.next)>=0||(ve=ve.prevZ,_e.x>=se&&_e.x<=ce&&_e.y>=le&&_e.y<=oe&&_e!==y&&_e!==G&&pointInTriangleExceptFirst(K,ee,Y,ie,Q,re,_e.x,_e.y)&&area(_e.prev,_e,_e.next)>=0))return!1;_e=_e.nextZ}for(;ve&&ve.z>=ue;){if(ve.x>=se&&ve.x<=ce&&ve.y>=le&&ve.y<=oe&&ve!==y&&ve!==G&&pointInTriangleExceptFirst(K,ee,Y,ie,Q,re,ve.x,ve.y)&&area(ve.prev,ve,ve.next)>=0)return!1;ve=ve.prevZ}for(;_e&&_e.z<=ge;){if(_e.x>=se&&_e.x<=ce&&_e.y>=le&&_e.y<=oe&&_e!==y&&_e!==G&&pointInTriangleExceptFirst(K,ee,Y,ie,Q,re,_e.x,_e.y)&&area(_e.prev,_e,_e.next)>=0)return!1;_e=_e.nextZ}return!0}function cureLocalIntersections(r,e){let t=r;do{const o=t.prev,y=t.next.next;!equals(o,y)&&intersects(o,t,t.next,y)&&locallyInside(o,y)&&locallyInside(y,o)&&(e.push(o.i,t.i,y.i),removeNode(t),removeNode(t.next),t=r=y),t=t.next}while(t!==r);return filterPoints(t)}function splitEarcut(r,e,t,o,y,R){let G=r;do{let K=G.next.next;for(;K!==G.prev;){if(G.i!==K.i&&isValidDiagonal(G,K)){let Y=splitPolygon(G,K);G=filterPoints(G,G.next),Y=filterPoints(Y,Y.next),earcutLinked(G,e,t,o,y,R,0),earcutLinked(Y,e,t,o,y,R,0);return}K=K.next}G=G.next}while(G!==r)}function eliminateHoles(r,e,t,o){const y=[];for(let R=0,G=e.length;R<G;R++){const K=e[R]*o,Y=R<G-1?e[R+1]*o:r.length,Q=linkedList(r,K,Y,o,!1);Q===Q.next&&(Q.steiner=!0),y.push(getLeftmost(Q))}y.sort(compareXYSlope);for(let R=0;R<y.length;R++)t=eliminateHole(y[R],t);return t}function compareXYSlope(r,e){let t=r.x-e.x;if(t===0&&(t=r.y-e.y,t===0)){const o=(r.next.y-r.y)/(r.next.x-r.x),y=(e.next.y-e.y)/(e.next.x-e.x);t=o-y}return t}function eliminateHole(r,e){const t=findHoleBridge(r,e);if(!t)return e;const o=splitPolygon(t,r);return filterPoints(o,o.next),filterPoints(t,t.next)}function findHoleBridge(r,e){let t=e;const o=r.x,y=r.y;let R=-1/0,G;if(equals(r,t))return t;do{if(equals(r,t.next))return t.next;if(y<=t.y&&y>=t.next.y&&t.next.y!==t.y){const ie=t.x+(y-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(ie<=o&&ie>R&&(R=ie,G=t.x<t.next.x?t:t.next,ie===o))return G}t=t.next}while(t!==e);if(!G)return null;const K=G,Y=G.x,Q=G.y;let ee=1/0;t=G;do{if(o>=t.x&&t.x>=Y&&o!==t.x&&pointInTriangle(y<Q?o:R,y,Y,Q,y<Q?R:o,y,t.x,t.y)){const ie=Math.abs(y-t.y)/(o-t.x);locallyInside(t,r)&&(ie<ee||ie===ee&&(t.x>G.x||t.x===G.x&&sectorContainsSector(G,t)))&&(G=t,ee=ie)}t=t.next}while(t!==K);return G}function sectorContainsSector(r,e){return area(r.prev,r,e.prev)<0&&area(e.next,r,r.next)<0}function indexCurve(r,e,t,o){let y=r;do y.z===0&&(y.z=zOrder(y.x,y.y,e,t,o)),y.prevZ=y.prev,y.nextZ=y.next,y=y.next;while(y!==r);y.prevZ.nextZ=null,y.prevZ=null,sortLinked(y)}function sortLinked(r){let e,t=1;do{let o=r,y;r=null;let R=null;for(e=0;o;){e++;let G=o,K=0;for(let Q=0;Q<t&&(K++,G=G.nextZ,!!G);Q++);let Y=t;for(;K>0||Y>0&&G;)K!==0&&(Y===0||!G||o.z<=G.z)?(y=o,o=o.nextZ,K--):(y=G,G=G.nextZ,Y--),R?R.nextZ=y:r=y,y.prevZ=R,R=y;o=G}R.nextZ=null,t*=2}while(e>1);return r}function zOrder(r,e,t,o,y){return r=(r-t)*y|0,e=(e-o)*y|0,r=(r|r<<8)&16711935,r=(r|r<<4)&252645135,r=(r|r<<2)&858993459,r=(r|r<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,r|e<<1}function getLeftmost(r){let e=r,t=r;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==r);return t}function pointInTriangle(r,e,t,o,y,R,G,K){return(y-G)*(e-K)>=(r-G)*(R-K)&&(r-G)*(o-K)>=(t-G)*(e-K)&&(t-G)*(R-K)>=(y-G)*(o-K)}function pointInTriangleExceptFirst(r,e,t,o,y,R,G,K){return!(r===G&&e===K)&&pointInTriangle(r,e,t,o,y,R,G,K)}function isValidDiagonal(r,e){return r.next.i!==e.i&&r.prev.i!==e.i&&!intersectsPolygon(r,e)&&(locallyInside(r,e)&&locallyInside(e,r)&&middleInside(r,e)&&(area(r.prev,r,e.prev)||area(r,e.prev,e))||equals(r,e)&&area(r.prev,r,r.next)>0&&area(e.prev,e,e.next)>0)}function area(r,e,t){return(e.y-r.y)*(t.x-e.x)-(e.x-r.x)*(t.y-e.y)}function equals(r,e){return r.x===e.x&&r.y===e.y}function intersects(r,e,t,o){const y=sign(area(r,e,t)),R=sign(area(r,e,o)),G=sign(area(t,o,r)),K=sign(area(t,o,e));return!!(y!==R&&G!==K||y===0&&onSegment(r,t,e)||R===0&&onSegment(r,o,e)||G===0&&onSegment(t,r,o)||K===0&&onSegment(t,e,o))}function onSegment(r,e,t){return e.x<=Math.max(r.x,t.x)&&e.x>=Math.min(r.x,t.x)&&e.y<=Math.max(r.y,t.y)&&e.y>=Math.min(r.y,t.y)}function sign(r){return r>0?1:r<0?-1:0}function intersectsPolygon(r,e){let t=r;do{if(t.i!==r.i&&t.next.i!==r.i&&t.i!==e.i&&t.next.i!==e.i&&intersects(t,t.next,r,e))return!0;t=t.next}while(t!==r);return!1}function locallyInside(r,e){return area(r.prev,r,r.next)<0?area(r,e,r.next)>=0&&area(r,r.prev,e)>=0:area(r,e,r.prev)<0||area(r,r.next,e)<0}function middleInside(r,e){let t=r,o=!1;const y=(r.x+e.x)/2,R=(r.y+e.y)/2;do t.y>R!=t.next.y>R&&t.next.y!==t.y&&y<(t.next.x-t.x)*(R-t.y)/(t.next.y-t.y)+t.x&&(o=!o),t=t.next;while(t!==r);return o}function splitPolygon(r,e){const t=createNode(r.i,r.x,r.y),o=createNode(e.i,e.x,e.y),y=r.next,R=e.prev;return r.next=e,e.prev=r,t.next=y,y.prev=t,o.next=t,t.prev=o,R.next=o,o.prev=R,o}function insertNode(r,e,t,o){const y=createNode(r,e,t);return o?(y.next=o.next,y.prev=o,o.next.prev=y,o.next=y):(y.prev=y,y.next=y),y}function removeNode(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function createNode(r,e,t){return{i:r,x:e,y:t,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function signedArea(r,e,t,o){let y=0;for(let R=e,G=t-o;R<t;R+=o)y+=(r[G]-r[R])*(r[R+1]+r[G+1]),G=R;return y}class Earcut{static triangulate(e,t,o=2){return earcut(e,t,o)}}class ShapeUtils{static area(e){const t=e.length;let o=0;for(let y=t-1,R=0;R<t;y=R++)o+=e[y].x*e[R].y-e[R].x*e[y].y;return o*.5}static isClockWise(e){return ShapeUtils.area(e)<0}static triangulateShape(e,t){const o=[],y=[],R=[];removeDupEndPts(e),addContour(o,e);let G=e.length;t.forEach(removeDupEndPts);for(let Y=0;Y<t.length;Y++)y.push(G),G+=t[Y].length,addContour(o,t[Y]);const K=Earcut.triangulate(o,y);for(let Y=0;Y<K.length;Y+=3)R.push(K.slice(Y,Y+3));return R}}function removeDupEndPts(r){const e=r.length;e>2&&r[e-1].equals(r[0])&&r.pop()}function addContour(r,e){for(let t=0;t<e.length;t++)r.push(e[t].x),r.push(e[t].y)}class ExtrudeGeometry extends BufferGeometry{constructor(e=new Shape([new Vector2(.5,.5),new Vector2(-.5,.5),new Vector2(-.5,-.5),new Vector2(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const o=this,y=[],R=[];for(let K=0,Y=e.length;K<Y;K++){const Q=e[K];G(Q)}this.setAttribute("position",new Float32BufferAttribute(y,3)),this.setAttribute("uv",new Float32BufferAttribute(R,2)),this.computeVertexNormals();function G(K){const Y=[],Q=t.curveSegments!==void 0?t.curveSegments:12,ee=t.steps!==void 0?t.steps:1,ie=t.depth!==void 0?t.depth:1;let re=t.bevelEnabled!==void 0?t.bevelEnabled:!0,se=t.bevelThickness!==void 0?t.bevelThickness:.2,le=t.bevelSize!==void 0?t.bevelSize:se-.1,ce=t.bevelOffset!==void 0?t.bevelOffset:0,oe=t.bevelSegments!==void 0?t.bevelSegments:3;const ue=t.extrudePath,ge=t.UVGenerator!==void 0?t.UVGenerator:WorldUVGenerator;let ve,_e=!1,be,Re,Se,Ee;ue&&(ve=ue.getSpacedPoints(ee),_e=!0,re=!1,be=ue.computeFrenetFrames(ee,!1),Re=new Vector3,Se=new Vector3,Ee=new Vector3),re||(oe=0,se=0,le=0,ce=0);const ye=K.extractPoints(Q);let de=ye.shape;const Me=ye.holes;if(!ShapeUtils.isClockWise(de)){de=de.reverse();for(let yn=0,kt=Me.length;yn<kt;yn++){const cn=Me[yn];ShapeUtils.isClockWise(cn)&&(Me[yn]=cn.reverse())}}function Pe(yn){const cn=10000000000000001e-36;let Mn=yn[0];for(let Qt=1;Qt<=yn.length;Qt++){const He=Qt%yn.length,ze=yn[He],Mt=ze.x-Mn.x,hn=ze.y-Mn.y,En=Mt*Mt+hn*hn,an=Math.max(Math.abs(ze.x),Math.abs(ze.y),Math.abs(Mn.x),Math.abs(Mn.y)),Cn=cn*an*an;if(En<=Cn){yn.splice(He,1),Qt--;continue}Mn=ze}}Pe(de),Me.forEach(Pe);const Ue=Me.length,$e=de;for(let yn=0;yn<Ue;yn++){const kt=Me[yn];de=de.concat(kt)}function Ve(yn,kt,cn){return kt||console.error("THREE.ExtrudeGeometry: vec does not exist"),yn.clone().addScaledVector(kt,cn)}const Ce=de.length;function De(yn,kt,cn){let Mn,Qt,He;const ze=yn.x-kt.x,Mt=yn.y-kt.y,hn=cn.x-yn.x,En=cn.y-yn.y,an=ze*ze+Mt*Mt,Cn=ze*En-Mt*hn;if(Math.abs(Cn)>Number.EPSILON){const Pn=Math.sqrt(an),Fn=Math.sqrt(hn*hn+En*En),pi=kt.x-Mt/Pn,On=kt.y+ze/Pn,Kn=cn.x-En/Fn,ei=cn.y+hn/Fn,ti=((Kn-pi)*En-(ei-On)*hn)/(ze*En-Mt*hn);Mn=pi+ze*ti-yn.x,Qt=On+Mt*ti-yn.y;const Gn=Mn*Mn+Qt*Qt;if(Gn<=2)return new Vector2(Mn,Qt);He=Math.sqrt(Gn/2)}else{let Pn=!1;ze>Number.EPSILON?hn>Number.EPSILON&&(Pn=!0):ze<-Number.EPSILON?hn<-Number.EPSILON&&(Pn=!0):Math.sign(Mt)===Math.sign(En)&&(Pn=!0),Pn?(Mn=-Mt,Qt=ze,He=Math.sqrt(an)):(Mn=ze,Qt=Mt,He=Math.sqrt(an/2))}return new Vector2(Mn/He,Qt/He)}const Oe=[];for(let yn=0,kt=$e.length,cn=kt-1,Mn=yn+1;yn<kt;yn++,cn++,Mn++)cn===kt&&(cn=0),Mn===kt&&(Mn=0),Oe[yn]=De($e[yn],$e[cn],$e[Mn]);const Te=[];let Ne,Ye=Oe.concat();for(let yn=0,kt=Ue;yn<kt;yn++){const cn=Me[yn];Ne=[];for(let Mn=0,Qt=cn.length,He=Qt-1,ze=Mn+1;Mn<Qt;Mn++,He++,ze++)He===Qt&&(He=0),ze===Qt&&(ze=0),Ne[Mn]=De(cn[Mn],cn[He],cn[ze]);Te.push(Ne),Ye=Ye.concat(Ne)}const Qe=[],qe=[];for(let yn=0;yn<oe;yn++){const kt=yn/oe,cn=se*Math.cos(kt*Math.PI/2),Mn=le*Math.sin(kt*Math.PI/2)+ce;for(let Qt=0,He=$e.length;Qt<He;Qt++){const ze=Ve($e[Qt],Oe[Qt],Mn);Un(ze.x,ze.y,-cn),kt==0&&Qe.push(ze)}for(let Qt=0,He=Ue;Qt<He;Qt++){const ze=Me[Qt];Ne=Te[Qt];const Mt=[];for(let hn=0,En=ze.length;hn<En;hn++){const an=Ve(ze[hn],Ne[hn],Mn);Un(an.x,an.y,-cn),kt==0&&Mt.push(an)}kt==0&&qe.push(Mt)}}const Ze=ShapeUtils.triangulateShape(Qe,qe),ct=Ze.length,xt=le+ce;for(let yn=0;yn<Ce;yn++){const kt=re?Ve(de[yn],Ye[yn],xt):de[yn];_e?(Se.copy(be.normals[0]).multiplyScalar(kt.x),Re.copy(be.binormals[0]).multiplyScalar(kt.y),Ee.copy(ve[0]).add(Se).add(Re),Un(Ee.x,Ee.y,Ee.z)):Un(kt.x,kt.y,0)}for(let yn=1;yn<=ee;yn++)for(let kt=0;kt<Ce;kt++){const cn=re?Ve(de[kt],Ye[kt],xt):de[kt];_e?(Se.copy(be.normals[yn]).multiplyScalar(cn.x),Re.copy(be.binormals[yn]).multiplyScalar(cn.y),Ee.copy(ve[yn]).add(Se).add(Re),Un(Ee.x,Ee.y,Ee.z)):Un(cn.x,cn.y,ie/ee*yn)}for(let yn=oe-1;yn>=0;yn--){const kt=yn/oe,cn=se*Math.cos(kt*Math.PI/2),Mn=le*Math.sin(kt*Math.PI/2)+ce;for(let Qt=0,He=$e.length;Qt<He;Qt++){const ze=Ve($e[Qt],Oe[Qt],Mn);Un(ze.x,ze.y,ie+cn)}for(let Qt=0,He=Me.length;Qt<He;Qt++){const ze=Me[Qt];Ne=Te[Qt];for(let Mt=0,hn=ze.length;Mt<hn;Mt++){const En=Ve(ze[Mt],Ne[Mt],Mn);_e?Un(En.x,En.y+ve[ee-1].y,ve[ee-1].x+cn):Un(En.x,En.y,ie+cn)}}}un(),Vn();function un(){const yn=y.length/3;if(re){let kt=0,cn=Ce*kt;for(let Mn=0;Mn<ct;Mn++){const Qt=Ze[Mn];kn(Qt[2]+cn,Qt[1]+cn,Qt[0]+cn)}kt=ee+oe*2,cn=Ce*kt;for(let Mn=0;Mn<ct;Mn++){const Qt=Ze[Mn];kn(Qt[0]+cn,Qt[1]+cn,Qt[2]+cn)}}else{for(let kt=0;kt<ct;kt++){const cn=Ze[kt];kn(cn[2],cn[1],cn[0])}for(let kt=0;kt<ct;kt++){const cn=Ze[kt];kn(cn[0]+Ce*ee,cn[1]+Ce*ee,cn[2]+Ce*ee)}}o.addGroup(yn,y.length/3-yn,0)}function Vn(){const yn=y.length/3;let kt=0;In($e,kt),kt+=$e.length;for(let cn=0,Mn=Me.length;cn<Mn;cn++){const Qt=Me[cn];In(Qt,kt),kt+=Qt.length}o.addGroup(yn,y.length/3-yn,1)}function In(yn,kt){let cn=yn.length;for(;--cn>=0;){const Mn=cn;let Qt=cn-1;Qt<0&&(Qt=yn.length-1);for(let He=0,ze=ee+oe*2;He<ze;He++){const Mt=Ce*He,hn=Ce*(He+1),En=kt+Mn+Mt,an=kt+Qt+Mt,Cn=kt+Qt+hn,Pn=kt+Mn+hn;Ln(En,an,Cn,Pn)}}}function Un(yn,kt,cn){Y.push(yn),Y.push(kt),Y.push(cn)}function kn(yn,kt,cn){Ke(yn),Ke(kt),Ke(cn);const Mn=y.length/3,Qt=ge.generateTopUV(o,y,Mn-3,Mn-2,Mn-1);Qn(Qt[0]),Qn(Qt[1]),Qn(Qt[2])}function Ln(yn,kt,cn,Mn){Ke(yn),Ke(kt),Ke(Mn),Ke(kt),Ke(cn),Ke(Mn);const Qt=y.length/3,He=ge.generateSideWallUV(o,y,Qt-6,Qt-3,Qt-2,Qt-1);Qn(He[0]),Qn(He[1]),Qn(He[3]),Qn(He[1]),Qn(He[2]),Qn(He[3])}function Ke(yn){y.push(Y[yn*3+0]),y.push(Y[yn*3+1]),y.push(Y[yn*3+2])}function Qn(yn){R.push(yn.x),R.push(yn.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,o=this.parameters.options;return toJSON$1(t,o,e)}static fromJSON(e,t){const o=[];for(let R=0,G=e.shapes.length;R<G;R++){const K=t[e.shapes[R]];o.push(K)}const y=e.options.extrudePath;return y!==void 0&&(e.options.extrudePath=new Curves[y.type]().fromJSON(y)),new ExtrudeGeometry(o,e.options)}}const WorldUVGenerator={generateTopUV:function(r,e,t,o,y){const R=e[t*3],G=e[t*3+1],K=e[o*3],Y=e[o*3+1],Q=e[y*3],ee=e[y*3+1];return[new Vector2(R,G),new Vector2(K,Y),new Vector2(Q,ee)]},generateSideWallUV:function(r,e,t,o,y,R){const G=e[t*3],K=e[t*3+1],Y=e[t*3+2],Q=e[o*3],ee=e[o*3+1],ie=e[o*3+2],re=e[y*3],se=e[y*3+1],le=e[y*3+2],ce=e[R*3],oe=e[R*3+1],ue=e[R*3+2];return Math.abs(K-ee)<Math.abs(G-Q)?[new Vector2(G,1-Y),new Vector2(Q,1-ie),new Vector2(re,1-le),new Vector2(ce,1-ue)]:[new Vector2(K,1-Y),new Vector2(ee,1-ie),new Vector2(se,1-le),new Vector2(oe,1-ue)]}};function toJSON$1(r,e,t){if(t.shapes=[],Array.isArray(r))for(let o=0,y=r.length;o<y;o++){const R=r[o];t.shapes.push(R.uuid)}else t.shapes.push(r.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class IcosahedronGeometry extends PolyhedronGeometry{constructor(e=1,t=0){const o=(1+Math.sqrt(5))/2,y=[-1,o,0,1,o,0,-1,-o,0,1,-o,0,0,-1,o,0,1,o,0,-1,-o,0,1,-o,o,0,-1,o,0,1,-o,0,-1,-o,0,1],R=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(y,R,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new IcosahedronGeometry(e.radius,e.detail)}}class OctahedronGeometry extends PolyhedronGeometry{constructor(e=1,t=0){const o=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],y=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(o,y,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new OctahedronGeometry(e.radius,e.detail)}}class PlaneGeometry extends BufferGeometry{constructor(e=1,t=1,o=1,y=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:o,heightSegments:y};const R=e/2,G=t/2,K=Math.floor(o),Y=Math.floor(y),Q=K+1,ee=Y+1,ie=e/K,re=t/Y,se=[],le=[],ce=[],oe=[];for(let ue=0;ue<ee;ue++){const ge=ue*re-G;for(let ve=0;ve<Q;ve++){const _e=ve*ie-R;le.push(_e,-ge,0),ce.push(0,0,1),oe.push(ve/K),oe.push(1-ue/Y)}}for(let ue=0;ue<Y;ue++)for(let ge=0;ge<K;ge++){const ve=ge+Q*ue,_e=ge+Q*(ue+1),be=ge+1+Q*(ue+1),Re=ge+1+Q*ue;se.push(ve,_e,Re),se.push(_e,be,Re)}this.setIndex(se),this.setAttribute("position",new Float32BufferAttribute(le,3)),this.setAttribute("normal",new Float32BufferAttribute(ce,3)),this.setAttribute("uv",new Float32BufferAttribute(oe,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new PlaneGeometry(e.width,e.height,e.widthSegments,e.heightSegments)}}class RingGeometry extends BufferGeometry{constructor(e=.5,t=1,o=32,y=1,R=0,G=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:o,phiSegments:y,thetaStart:R,thetaLength:G},o=Math.max(3,o),y=Math.max(1,y);const K=[],Y=[],Q=[],ee=[];let ie=e;const re=(t-e)/y,se=new Vector3,le=new Vector2;for(let ce=0;ce<=y;ce++){for(let oe=0;oe<=o;oe++){const ue=R+oe/o*G;se.x=ie*Math.cos(ue),se.y=ie*Math.sin(ue),Y.push(se.x,se.y,se.z),Q.push(0,0,1),le.x=(se.x/t+1)/2,le.y=(se.y/t+1)/2,ee.push(le.x,le.y)}ie+=re}for(let ce=0;ce<y;ce++){const oe=ce*(o+1);for(let ue=0;ue<o;ue++){const ge=ue+oe,ve=ge,_e=ge+o+1,be=ge+o+2,Re=ge+1;K.push(ve,_e,Re),K.push(_e,be,Re)}}this.setIndex(K),this.setAttribute("position",new Float32BufferAttribute(Y,3)),this.setAttribute("normal",new Float32BufferAttribute(Q,3)),this.setAttribute("uv",new Float32BufferAttribute(ee,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new RingGeometry(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class ShapeGeometry extends BufferGeometry{constructor(e=new Shape([new Vector2(0,.5),new Vector2(-.5,-.5),new Vector2(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const o=[],y=[],R=[],G=[];let K=0,Y=0;if(Array.isArray(e)===!1)Q(e);else for(let ee=0;ee<e.length;ee++)Q(e[ee]),this.addGroup(K,Y,ee),K+=Y,Y=0;this.setIndex(o),this.setAttribute("position",new Float32BufferAttribute(y,3)),this.setAttribute("normal",new Float32BufferAttribute(R,3)),this.setAttribute("uv",new Float32BufferAttribute(G,2));function Q(ee){const ie=y.length/3,re=ee.extractPoints(t);let se=re.shape;const le=re.holes;ShapeUtils.isClockWise(se)===!1&&(se=se.reverse());for(let oe=0,ue=le.length;oe<ue;oe++){const ge=le[oe];ShapeUtils.isClockWise(ge)===!0&&(le[oe]=ge.reverse())}const ce=ShapeUtils.triangulateShape(se,le);for(let oe=0,ue=le.length;oe<ue;oe++){const ge=le[oe];se=se.concat(ge)}for(let oe=0,ue=se.length;oe<ue;oe++){const ge=se[oe];y.push(ge.x,ge.y,0),R.push(0,0,1),G.push(ge.x,ge.y)}for(let oe=0,ue=ce.length;oe<ue;oe++){const ge=ce[oe],ve=ge[0]+ie,_e=ge[1]+ie,be=ge[2]+ie;o.push(ve,_e,be),Y+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return toJSON(t,e)}static fromJSON(e,t){const o=[];for(let y=0,R=e.shapes.length;y<R;y++){const G=t[e.shapes[y]];o.push(G)}return new ShapeGeometry(o,e.curveSegments)}}function toJSON(r,e){if(e.shapes=[],Array.isArray(r))for(let t=0,o=r.length;t<o;t++){const y=r[t];e.shapes.push(y.uuid)}else e.shapes.push(r.uuid);return e}class SphereGeometry extends BufferGeometry{constructor(e=1,t=32,o=16,y=0,R=Math.PI*2,G=0,K=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:o,phiStart:y,phiLength:R,thetaStart:G,thetaLength:K},t=Math.max(3,Math.floor(t)),o=Math.max(2,Math.floor(o));const Y=Math.min(G+K,Math.PI);let Q=0;const ee=[],ie=new Vector3,re=new Vector3,se=[],le=[],ce=[],oe=[];for(let ue=0;ue<=o;ue++){const ge=[],ve=ue/o;let _e=0;ue===0&&G===0?_e=.5/t:ue===o&&Y===Math.PI&&(_e=-.5/t);for(let be=0;be<=t;be++){const Re=be/t;ie.x=-e*Math.cos(y+Re*R)*Math.sin(G+ve*K),ie.y=e*Math.cos(G+ve*K),ie.z=e*Math.sin(y+Re*R)*Math.sin(G+ve*K),le.push(ie.x,ie.y,ie.z),re.copy(ie).normalize(),ce.push(re.x,re.y,re.z),oe.push(Re+_e,1-ve),ge.push(Q++)}ee.push(ge)}for(let ue=0;ue<o;ue++)for(let ge=0;ge<t;ge++){const ve=ee[ue][ge+1],_e=ee[ue][ge],be=ee[ue+1][ge],Re=ee[ue+1][ge+1];(ue!==0||G>0)&&se.push(ve,_e,Re),(ue!==o-1||Y<Math.PI)&&se.push(_e,be,Re)}this.setIndex(se),this.setAttribute("position",new Float32BufferAttribute(le,3)),this.setAttribute("normal",new Float32BufferAttribute(ce,3)),this.setAttribute("uv",new Float32BufferAttribute(oe,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new SphereGeometry(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class TetrahedronGeometry extends PolyhedronGeometry{constructor(e=1,t=0){const o=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],y=[2,1,0,0,3,2,1,3,0,2,3,1];super(o,y,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new TetrahedronGeometry(e.radius,e.detail)}}class TorusGeometry extends BufferGeometry{constructor(e=1,t=.4,o=12,y=48,R=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:o,tubularSegments:y,arc:R},o=Math.floor(o),y=Math.floor(y);const G=[],K=[],Y=[],Q=[],ee=new Vector3,ie=new Vector3,re=new Vector3;for(let se=0;se<=o;se++)for(let le=0;le<=y;le++){const ce=le/y*R,oe=se/o*Math.PI*2;ie.x=(e+t*Math.cos(oe))*Math.cos(ce),ie.y=(e+t*Math.cos(oe))*Math.sin(ce),ie.z=t*Math.sin(oe),K.push(ie.x,ie.y,ie.z),ee.x=e*Math.cos(ce),ee.y=e*Math.sin(ce),re.subVectors(ie,ee).normalize(),Y.push(re.x,re.y,re.z),Q.push(le/y),Q.push(se/o)}for(let se=1;se<=o;se++)for(let le=1;le<=y;le++){const ce=(y+1)*se+le-1,oe=(y+1)*(se-1)+le-1,ue=(y+1)*(se-1)+le,ge=(y+1)*se+le;G.push(ce,oe,ge),G.push(oe,ue,ge)}this.setIndex(G),this.setAttribute("position",new Float32BufferAttribute(K,3)),this.setAttribute("normal",new Float32BufferAttribute(Y,3)),this.setAttribute("uv",new Float32BufferAttribute(Q,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new TorusGeometry(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class TorusKnotGeometry extends BufferGeometry{constructor(e=1,t=.4,o=64,y=8,R=2,G=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:o,radialSegments:y,p:R,q:G},o=Math.floor(o),y=Math.floor(y);const K=[],Y=[],Q=[],ee=[],ie=new Vector3,re=new Vector3,se=new Vector3,le=new Vector3,ce=new Vector3,oe=new Vector3,ue=new Vector3;for(let ve=0;ve<=o;++ve){const _e=ve/o*R*Math.PI*2;ge(_e,R,G,e,se),ge(_e+.01,R,G,e,le),oe.subVectors(le,se),ue.addVectors(le,se),ce.crossVectors(oe,ue),ue.crossVectors(ce,oe),ce.normalize(),ue.normalize();for(let be=0;be<=y;++be){const Re=be/y*Math.PI*2,Se=-t*Math.cos(Re),Ee=t*Math.sin(Re);ie.x=se.x+(Se*ue.x+Ee*ce.x),ie.y=se.y+(Se*ue.y+Ee*ce.y),ie.z=se.z+(Se*ue.z+Ee*ce.z),Y.push(ie.x,ie.y,ie.z),re.subVectors(ie,se).normalize(),Q.push(re.x,re.y,re.z),ee.push(ve/o),ee.push(be/y)}}for(let ve=1;ve<=o;ve++)for(let _e=1;_e<=y;_e++){const be=(y+1)*(ve-1)+(_e-1),Re=(y+1)*ve+(_e-1),Se=(y+1)*ve+_e,Ee=(y+1)*(ve-1)+_e;K.push(be,Re,Ee),K.push(Re,Se,Ee)}this.setIndex(K),this.setAttribute("position",new Float32BufferAttribute(Y,3)),this.setAttribute("normal",new Float32BufferAttribute(Q,3)),this.setAttribute("uv",new Float32BufferAttribute(ee,2));function ge(ve,_e,be,Re,Se){const Ee=Math.cos(ve),ye=Math.sin(ve),de=be/_e*ve,Me=Math.cos(de);Se.x=Re*(2+Me)*.5*Ee,Se.y=Re*(2+Me)*ye*.5,Se.z=Re*Math.sin(de)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new TorusKnotGeometry(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class TubeGeometry extends BufferGeometry{constructor(e=new QuadraticBezierCurve3(new Vector3(-1,-1,0),new Vector3(-1,1,0),new Vector3(1,1,0)),t=64,o=1,y=8,R=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:o,radialSegments:y,closed:R};const G=e.computeFrenetFrames(t,R);this.tangents=G.tangents,this.normals=G.normals,this.binormals=G.binormals;const K=new Vector3,Y=new Vector3,Q=new Vector2;let ee=new Vector3;const ie=[],re=[],se=[],le=[];ce(),this.setIndex(le),this.setAttribute("position",new Float32BufferAttribute(ie,3)),this.setAttribute("normal",new Float32BufferAttribute(re,3)),this.setAttribute("uv",new Float32BufferAttribute(se,2));function ce(){for(let ve=0;ve<t;ve++)oe(ve);oe(R===!1?t:0),ge(),ue()}function oe(ve){ee=e.getPointAt(ve/t,ee);const _e=G.normals[ve],be=G.binormals[ve];for(let Re=0;Re<=y;Re++){const Se=Re/y*Math.PI*2,Ee=Math.sin(Se),ye=-Math.cos(Se);Y.x=ye*_e.x+Ee*be.x,Y.y=ye*_e.y+Ee*be.y,Y.z=ye*_e.z+Ee*be.z,Y.normalize(),re.push(Y.x,Y.y,Y.z),K.x=ee.x+o*Y.x,K.y=ee.y+o*Y.y,K.z=ee.z+o*Y.z,ie.push(K.x,K.y,K.z)}}function ue(){for(let ve=1;ve<=t;ve++)for(let _e=1;_e<=y;_e++){const be=(y+1)*(ve-1)+(_e-1),Re=(y+1)*ve+(_e-1),Se=(y+1)*ve+_e,Ee=(y+1)*(ve-1)+_e;le.push(be,Re,Ee),le.push(Re,Se,Ee)}}function ge(){for(let ve=0;ve<=t;ve++)for(let _e=0;_e<=y;_e++)Q.x=ve/t,Q.y=_e/y,se.push(Q.x,Q.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new TubeGeometry(new Curves[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class WireframeGeometry extends BufferGeometry{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],o=new Set,y=new Vector3,R=new Vector3;if(e.index!==null){const G=e.attributes.position,K=e.index;let Y=e.groups;Y.length===0&&(Y=[{start:0,count:K.count,materialIndex:0}]);for(let Q=0,ee=Y.length;Q<ee;++Q){const ie=Y[Q],re=ie.start,se=ie.count;for(let le=re,ce=re+se;le<ce;le+=3)for(let oe=0;oe<3;oe++){const ue=K.getX(le+oe),ge=K.getX(le+(oe+1)%3);y.fromBufferAttribute(G,ue),R.fromBufferAttribute(G,ge),isUniqueEdge(y,R,o)===!0&&(t.push(y.x,y.y,y.z),t.push(R.x,R.y,R.z))}}}else{const G=e.attributes.position;for(let K=0,Y=G.count/3;K<Y;K++)for(let Q=0;Q<3;Q++){const ee=3*K+Q,ie=3*K+(Q+1)%3;y.fromBufferAttribute(G,ee),R.fromBufferAttribute(G,ie),isUniqueEdge(y,R,o)===!0&&(t.push(y.x,y.y,y.z),t.push(R.x,R.y,R.z))}}this.setAttribute("position",new Float32BufferAttribute(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function isUniqueEdge(r,e,t){const o=`${r.x},${r.y},${r.z}-${e.x},${e.y},${e.z}`,y=`${e.x},${e.y},${e.z}-${r.x},${r.y},${r.z}`;return t.has(o)===!0||t.has(y)===!0?!1:(t.add(o),t.add(y),!0)}var Geometries=Object.freeze({__proto__:null,BoxGeometry,CapsuleGeometry,CircleGeometry,ConeGeometry,CylinderGeometry,DodecahedronGeometry,EdgesGeometry,ExtrudeGeometry,IcosahedronGeometry,LatheGeometry,OctahedronGeometry,PlaneGeometry,PolyhedronGeometry,RingGeometry,ShapeGeometry,SphereGeometry,TetrahedronGeometry,TorusGeometry,TorusKnotGeometry,TubeGeometry,WireframeGeometry});class ShadowMaterial extends Material{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Color(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class RawShaderMaterial extends ShaderMaterial{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class MeshStandardMaterial extends Material{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new Color(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Euler,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class MeshPhysicalMaterial extends MeshStandardMaterial{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Vector2(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return clamp$1(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Color(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Color(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Color(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class MeshPhongMaterial extends Material{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Color(16777215),this.specular=new Color(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Euler,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class MeshToonMaterial extends Material{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Color(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class MeshNormalMaterial extends Material{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class MeshLambertMaterial extends Material{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Color(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Euler,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class MeshDepthMaterial extends Material{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=BasicDepthPacking,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class MeshDistanceMaterial extends Material{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class MeshMatcapMaterial extends Material{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Color(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class LineDashedMaterial extends LineBasicMaterial{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function convertArray(r,e){return!r||r.constructor===e?r:typeof e.BYTES_PER_ELEMENT=="number"?new e(r):Array.prototype.slice.call(r)}function isTypedArray(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}function getKeyframeOrder(r){function e(y,R){return r[y]-r[R]}const t=r.length,o=new Array(t);for(let y=0;y!==t;++y)o[y]=y;return o.sort(e),o}function sortedArray(r,e,t){const o=r.length,y=new r.constructor(o);for(let R=0,G=0;G!==o;++R){const K=t[R]*e;for(let Y=0;Y!==e;++Y)y[G++]=r[K+Y]}return y}function flattenJSON(r,e,t,o){let y=1,R=r[0];for(;R!==void 0&&R[o]===void 0;)R=r[y++];if(R===void 0)return;let G=R[o];if(G!==void 0)if(Array.isArray(G))do G=R[o],G!==void 0&&(e.push(R.time),t.push(...G)),R=r[y++];while(R!==void 0);else if(G.toArray!==void 0)do G=R[o],G!==void 0&&(e.push(R.time),G.toArray(t,t.length)),R=r[y++];while(R!==void 0);else do G=R[o],G!==void 0&&(e.push(R.time),t.push(G)),R=r[y++];while(R!==void 0)}function subclip(r,e,t,o,y=30){const R=r.clone();R.name=e;const G=[];for(let Y=0;Y<R.tracks.length;++Y){const Q=R.tracks[Y],ee=Q.getValueSize(),ie=[],re=[];for(let se=0;se<Q.times.length;++se){const le=Q.times[se]*y;if(!(le<t||le>=o)){ie.push(Q.times[se]);for(let ce=0;ce<ee;++ce)re.push(Q.values[se*ee+ce])}}ie.length!==0&&(Q.times=convertArray(ie,Q.times.constructor),Q.values=convertArray(re,Q.values.constructor),G.push(Q))}R.tracks=G;let K=1/0;for(let Y=0;Y<R.tracks.length;++Y)K>R.tracks[Y].times[0]&&(K=R.tracks[Y].times[0]);for(let Y=0;Y<R.tracks.length;++Y)R.tracks[Y].shift(-1*K);return R.resetDuration(),R}function makeClipAdditive(r,e=0,t=r,o=30){o<=0&&(o=30);const y=t.tracks.length,R=e/o;for(let G=0;G<y;++G){const K=t.tracks[G],Y=K.ValueTypeName;if(Y==="bool"||Y==="string")continue;const Q=r.tracks.find(function(ue){return ue.name===K.name&&ue.ValueTypeName===Y});if(Q===void 0)continue;let ee=0;const ie=K.getValueSize();K.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(ee=ie/3);let re=0;const se=Q.getValueSize();Q.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(re=se/3);const le=K.times.length-1;let ce;if(R<=K.times[0]){const ue=ee,ge=ie-ee;ce=K.values.slice(ue,ge)}else if(R>=K.times[le]){const ue=le*ie+ee,ge=ue+ie-ee;ce=K.values.slice(ue,ge)}else{const ue=K.createInterpolant(),ge=ee,ve=ie-ee;ue.evaluate(R),ce=ue.resultBuffer.slice(ge,ve)}Y==="quaternion"&&new Quaternion().fromArray(ce).normalize().conjugate().toArray(ce);const oe=Q.times.length;for(let ue=0;ue<oe;++ue){const ge=ue*se+re;if(Y==="quaternion")Quaternion.multiplyQuaternionsFlat(Q.values,ge,ce,0,Q.values,ge);else{const ve=se-re*2;for(let _e=0;_e<ve;++_e)Q.values[ge+_e]-=ce[_e]}}}return r.blendMode=AdditiveAnimationBlendMode,r}class AnimationUtils{static convertArray(e,t){return convertArray(e,t)}static isTypedArray(e){return isTypedArray(e)}static getKeyframeOrder(e){return getKeyframeOrder(e)}static sortedArray(e,t,o){return sortedArray(e,t,o)}static flattenJSON(e,t,o,y){flattenJSON(e,t,o,y)}static subclip(e,t,o,y,R=30){return subclip(e,t,o,y,R)}static makeClipAdditive(e,t=0,o=e,y=30){return makeClipAdditive(e,t,o,y)}}class Interpolant{constructor(e,t,o,y){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=y!==void 0?y:new t.constructor(o),this.sampleValues=t,this.valueSize=o,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let o=this._cachedIndex,y=t[o],R=t[o-1];e:{t:{let G;n:{i:if(!(e<y)){for(let K=o+2;;){if(y===void 0){if(e<R)break i;return o=t.length,this._cachedIndex=o,this.copySampleValue_(o-1)}if(o===K)break;if(R=y,y=t[++o],e<y)break t}G=t.length;break n}if(!(e>=R)){const K=t[1];e<K&&(o=2,R=K);for(let Y=o-2;;){if(R===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(o===Y)break;if(y=R,R=t[--o-1],e>=R)break t}G=o,o=0;break n}break e}for(;o<G;){const K=o+G>>>1;e<t[K]?G=K:o=K+1}if(y=t[o],R=t[o-1],R===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(y===void 0)return o=t.length,this._cachedIndex=o,this.copySampleValue_(o-1)}this._cachedIndex=o,this.intervalChanged_(o,R,y)}return this.interpolate_(o,R,e,y)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,o=this.sampleValues,y=this.valueSize,R=e*y;for(let G=0;G!==y;++G)t[G]=o[R+G];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class CubicInterpolant extends Interpolant{constructor(e,t,o,y){super(e,t,o,y),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:ZeroCurvatureEnding,endingEnd:ZeroCurvatureEnding}}intervalChanged_(e,t,o){const y=this.parameterPositions;let R=e-2,G=e+1,K=y[R],Y=y[G];if(K===void 0)switch(this.getSettings_().endingStart){case ZeroSlopeEnding:R=e,K=2*t-o;break;case WrapAroundEnding:R=y.length-2,K=t+y[R]-y[R+1];break;default:R=e,K=o}if(Y===void 0)switch(this.getSettings_().endingEnd){case ZeroSlopeEnding:G=e,Y=2*o-t;break;case WrapAroundEnding:G=1,Y=o+y[1]-y[0];break;default:G=e-1,Y=t}const Q=(o-t)*.5,ee=this.valueSize;this._weightPrev=Q/(t-K),this._weightNext=Q/(Y-o),this._offsetPrev=R*ee,this._offsetNext=G*ee}interpolate_(e,t,o,y){const R=this.resultBuffer,G=this.sampleValues,K=this.valueSize,Y=e*K,Q=Y-K,ee=this._offsetPrev,ie=this._offsetNext,re=this._weightPrev,se=this._weightNext,le=(o-t)/(y-t),ce=le*le,oe=ce*le,ue=-re*oe+2*re*ce-re*le,ge=(1+re)*oe+(-1.5-2*re)*ce+(-.5+re)*le+1,ve=(-1-se)*oe+(1.5+se)*ce+.5*le,_e=se*oe-se*ce;for(let be=0;be!==K;++be)R[be]=ue*G[ee+be]+ge*G[Q+be]+ve*G[Y+be]+_e*G[ie+be];return R}}class LinearInterpolant extends Interpolant{constructor(e,t,o,y){super(e,t,o,y)}interpolate_(e,t,o,y){const R=this.resultBuffer,G=this.sampleValues,K=this.valueSize,Y=e*K,Q=Y-K,ee=(o-t)/(y-t),ie=1-ee;for(let re=0;re!==K;++re)R[re]=G[Q+re]*ie+G[Y+re]*ee;return R}}class DiscreteInterpolant extends Interpolant{constructor(e,t,o,y){super(e,t,o,y)}interpolate_(e){return this.copySampleValue_(e-1)}}class KeyframeTrack{constructor(e,t,o,y){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=convertArray(t,this.TimeBufferType),this.values=convertArray(o,this.ValueBufferType),this.setInterpolation(y||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let o;if(t.toJSON!==this.toJSON)o=t.toJSON(e);else{o={name:e.name,times:convertArray(e.times,Array),values:convertArray(e.values,Array)};const y=e.getInterpolation();y!==e.DefaultInterpolation&&(o.interpolation=y)}return o.type=e.ValueTypeName,o}InterpolantFactoryMethodDiscrete(e){return new DiscreteInterpolant(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new LinearInterpolant(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new CubicInterpolant(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case InterpolateDiscrete:t=this.InterpolantFactoryMethodDiscrete;break;case InterpolateLinear:t=this.InterpolantFactoryMethodLinear;break;case InterpolateSmooth:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const o="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(o);return console.warn("THREE.KeyframeTrack:",o),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return InterpolateDiscrete;case this.InterpolantFactoryMethodLinear:return InterpolateLinear;case this.InterpolantFactoryMethodSmooth:return InterpolateSmooth}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let o=0,y=t.length;o!==y;++o)t[o]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let o=0,y=t.length;o!==y;++o)t[o]*=e}return this}trim(e,t){const o=this.times,y=o.length;let R=0,G=y-1;for(;R!==y&&o[R]<e;)++R;for(;G!==-1&&o[G]>t;)--G;if(++G,R!==0||G!==y){R>=G&&(G=Math.max(G,1),R=G-1);const K=this.getValueSize();this.times=o.slice(R,G),this.values=this.values.slice(R*K,G*K)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const o=this.times,y=this.values,R=o.length;R===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let G=null;for(let K=0;K!==R;K++){const Y=o[K];if(typeof Y=="number"&&isNaN(Y)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,K,Y),e=!1;break}if(G!==null&&G>Y){console.error("THREE.KeyframeTrack: Out of order keys.",this,K,Y,G),e=!1;break}G=Y}if(y!==void 0&&isTypedArray(y))for(let K=0,Y=y.length;K!==Y;++K){const Q=y[K];if(isNaN(Q)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,K,Q),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),o=this.getValueSize(),y=this.getInterpolation()===InterpolateSmooth,R=e.length-1;let G=1;for(let K=1;K<R;++K){let Y=!1;const Q=e[K],ee=e[K+1];if(Q!==ee&&(K!==1||Q!==e[0]))if(y)Y=!0;else{const ie=K*o,re=ie-o,se=ie+o;for(let le=0;le!==o;++le){const ce=t[ie+le];if(ce!==t[re+le]||ce!==t[se+le]){Y=!0;break}}}if(Y){if(K!==G){e[G]=e[K];const ie=K*o,re=G*o;for(let se=0;se!==o;++se)t[re+se]=t[ie+se]}++G}}if(R>0){e[G]=e[R];for(let K=R*o,Y=G*o,Q=0;Q!==o;++Q)t[Y+Q]=t[K+Q];++G}return G!==e.length?(this.times=e.slice(0,G),this.values=t.slice(0,G*o)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),o=this.constructor,y=new o(this.name,e,t);return y.createInterpolant=this.createInterpolant,y}}KeyframeTrack.prototype.ValueTypeName="";KeyframeTrack.prototype.TimeBufferType=Float32Array;KeyframeTrack.prototype.ValueBufferType=Float32Array;KeyframeTrack.prototype.DefaultInterpolation=InterpolateLinear;class BooleanKeyframeTrack extends KeyframeTrack{constructor(e,t,o){super(e,t,o)}}BooleanKeyframeTrack.prototype.ValueTypeName="bool";BooleanKeyframeTrack.prototype.ValueBufferType=Array;BooleanKeyframeTrack.prototype.DefaultInterpolation=InterpolateDiscrete;BooleanKeyframeTrack.prototype.InterpolantFactoryMethodLinear=void 0;BooleanKeyframeTrack.prototype.InterpolantFactoryMethodSmooth=void 0;class ColorKeyframeTrack extends KeyframeTrack{constructor(e,t,o,y){super(e,t,o,y)}}ColorKeyframeTrack.prototype.ValueTypeName="color";class NumberKeyframeTrack extends KeyframeTrack{constructor(e,t,o,y){super(e,t,o,y)}}NumberKeyframeTrack.prototype.ValueTypeName="number";class QuaternionLinearInterpolant extends Interpolant{constructor(e,t,o,y){super(e,t,o,y)}interpolate_(e,t,o,y){const R=this.resultBuffer,G=this.sampleValues,K=this.valueSize,Y=(o-t)/(y-t);let Q=e*K;for(let ee=Q+K;Q!==ee;Q+=4)Quaternion.slerpFlat(R,0,G,Q-K,G,Q,Y);return R}}class QuaternionKeyframeTrack extends KeyframeTrack{constructor(e,t,o,y){super(e,t,o,y)}InterpolantFactoryMethodLinear(e){return new QuaternionLinearInterpolant(this.times,this.values,this.getValueSize(),e)}}QuaternionKeyframeTrack.prototype.ValueTypeName="quaternion";QuaternionKeyframeTrack.prototype.InterpolantFactoryMethodSmooth=void 0;class StringKeyframeTrack extends KeyframeTrack{constructor(e,t,o){super(e,t,o)}}StringKeyframeTrack.prototype.ValueTypeName="string";StringKeyframeTrack.prototype.ValueBufferType=Array;StringKeyframeTrack.prototype.DefaultInterpolation=InterpolateDiscrete;StringKeyframeTrack.prototype.InterpolantFactoryMethodLinear=void 0;StringKeyframeTrack.prototype.InterpolantFactoryMethodSmooth=void 0;class VectorKeyframeTrack extends KeyframeTrack{constructor(e,t,o,y){super(e,t,o,y)}}VectorKeyframeTrack.prototype.ValueTypeName="vector";class AnimationClip{constructor(e="",t=-1,o=[],y=NormalAnimationBlendMode){this.name=e,this.tracks=o,this.duration=t,this.blendMode=y,this.uuid=generateUUID(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],o=e.tracks,y=1/(e.fps||1);for(let G=0,K=o.length;G!==K;++G)t.push(parseKeyframeTrack(o[G]).scale(y));const R=new this(e.name,e.duration,t,e.blendMode);return R.uuid=e.uuid,R}static toJSON(e){const t=[],o=e.tracks,y={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let R=0,G=o.length;R!==G;++R)t.push(KeyframeTrack.toJSON(o[R]));return y}static CreateFromMorphTargetSequence(e,t,o,y){const R=t.length,G=[];for(let K=0;K<R;K++){let Y=[],Q=[];Y.push((K+R-1)%R,K,(K+1)%R),Q.push(0,1,0);const ee=getKeyframeOrder(Y);Y=sortedArray(Y,1,ee),Q=sortedArray(Q,1,ee),!y&&Y[0]===0&&(Y.push(R),Q.push(Q[0])),G.push(new NumberKeyframeTrack(".morphTargetInfluences["+t[K].name+"]",Y,Q).scale(1/o))}return new this(e,-1,G)}static findByName(e,t){let o=e;if(!Array.isArray(e)){const y=e;o=y.geometry&&y.geometry.animations||y.animations}for(let y=0;y<o.length;y++)if(o[y].name===t)return o[y];return null}static CreateClipsFromMorphTargetSequences(e,t,o){const y={},R=/^([\w-]*?)([\d]+)$/;for(let K=0,Y=e.length;K<Y;K++){const Q=e[K],ee=Q.name.match(R);if(ee&&ee.length>1){const ie=ee[1];let re=y[ie];re||(y[ie]=re=[]),re.push(Q)}}const G=[];for(const K in y)G.push(this.CreateFromMorphTargetSequence(K,y[K],t,o));return G}static parseAnimation(e,t){if(console.warn("THREE.AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const o=function(ie,re,se,le,ce){if(se.length!==0){const oe=[],ue=[];flattenJSON(se,oe,ue,le),oe.length!==0&&ce.push(new ie(re,oe,ue))}},y=[],R=e.name||"default",G=e.fps||30,K=e.blendMode;let Y=e.length||-1;const Q=e.hierarchy||[];for(let ie=0;ie<Q.length;ie++){const re=Q[ie].keys;if(!(!re||re.length===0))if(re[0].morphTargets){const se={};let le;for(le=0;le<re.length;le++)if(re[le].morphTargets)for(let ce=0;ce<re[le].morphTargets.length;ce++)se[re[le].morphTargets[ce]]=-1;for(const ce in se){const oe=[],ue=[];for(let ge=0;ge!==re[le].morphTargets.length;++ge){const ve=re[le];oe.push(ve.time),ue.push(ve.morphTarget===ce?1:0)}y.push(new NumberKeyframeTrack(".morphTargetInfluence["+ce+"]",oe,ue))}Y=se.length*G}else{const se=".bones["+t[ie].name+"]";o(VectorKeyframeTrack,se+".position",re,"pos",y),o(QuaternionKeyframeTrack,se+".quaternion",re,"rot",y),o(VectorKeyframeTrack,se+".scale",re,"scl",y)}}return y.length===0?null:new this(R,Y,y,K)}resetDuration(){const e=this.tracks;let t=0;for(let o=0,y=e.length;o!==y;++o){const R=this.tracks[o];t=Math.max(t,R.times[R.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function getTrackTypeForValueTypeName(r){switch(r.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return NumberKeyframeTrack;case"vector":case"vector2":case"vector3":case"vector4":return VectorKeyframeTrack;case"color":return ColorKeyframeTrack;case"quaternion":return QuaternionKeyframeTrack;case"bool":case"boolean":return BooleanKeyframeTrack;case"string":return StringKeyframeTrack}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+r)}function parseKeyframeTrack(r){if(r.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=getTrackTypeForValueTypeName(r.type);if(r.times===void 0){const t=[],o=[];flattenJSON(r.keys,t,o,"value"),r.times=t,r.values=o}return e.parse!==void 0?e.parse(r):new e(r.name,r.times,r.values,r.interpolation)}const Cache={enabled:!1,files:{},add:function(r,e){this.enabled!==!1&&(this.files[r]=e)},get:function(r){if(this.enabled!==!1)return this.files[r]},remove:function(r){delete this.files[r]},clear:function(){this.files={}}};class LoadingManager{constructor(e,t,o){const y=this;let R=!1,G=0,K=0,Y;const Q=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=o,this.itemStart=function(ee){K++,R===!1&&y.onStart!==void 0&&y.onStart(ee,G,K),R=!0},this.itemEnd=function(ee){G++,y.onProgress!==void 0&&y.onProgress(ee,G,K),G===K&&(R=!1,y.onLoad!==void 0&&y.onLoad())},this.itemError=function(ee){y.onError!==void 0&&y.onError(ee)},this.resolveURL=function(ee){return Y?Y(ee):ee},this.setURLModifier=function(ee){return Y=ee,this},this.addHandler=function(ee,ie){return Q.push(ee,ie),this},this.removeHandler=function(ee){const ie=Q.indexOf(ee);return ie!==-1&&Q.splice(ie,2),this},this.getHandler=function(ee){for(let ie=0,re=Q.length;ie<re;ie+=2){const se=Q[ie],le=Q[ie+1];if(se.global&&(se.lastIndex=0),se.test(ee))return le}return null}}}const DefaultLoadingManager=new LoadingManager;class Loader{constructor(e){this.manager=e!==void 0?e:DefaultLoadingManager,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const o=this;return new Promise(function(y,R){o.load(e,y,t,R)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}Loader.DEFAULT_MATERIAL_NAME="__DEFAULT";const loading={};class HttpError extends Error{constructor(e,t){super(e),this.response=t}}class FileLoader extends Loader{constructor(e){super(e),this.mimeType="",this.responseType=""}load(e,t,o,y){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const R=Cache.get(e);if(R!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(R),this.manager.itemEnd(e)},0),R;if(loading[e]!==void 0){loading[e].push({onLoad:t,onProgress:o,onError:y});return}loading[e]=[],loading[e].push({onLoad:t,onProgress:o,onError:y});const G=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),K=this.mimeType,Y=this.responseType;fetch(G).then(Q=>{if(Q.status===200||Q.status===0){if(Q.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||Q.body===void 0||Q.body.getReader===void 0)return Q;const ee=loading[e],ie=Q.body.getReader(),re=Q.headers.get("X-File-Size")||Q.headers.get("Content-Length"),se=re?parseInt(re):0,le=se!==0;let ce=0;const oe=new ReadableStream({start(ue){ge();function ge(){ie.read().then(({done:ve,value:_e})=>{if(ve)ue.close();else{ce+=_e.byteLength;const be=new ProgressEvent("progress",{lengthComputable:le,loaded:ce,total:se});for(let Re=0,Se=ee.length;Re<Se;Re++){const Ee=ee[Re];Ee.onProgress&&Ee.onProgress(be)}ue.enqueue(_e),ge()}},ve=>{ue.error(ve)})}}});return new Response(oe)}else throw new HttpError(`fetch for "${Q.url}" responded with ${Q.status}: ${Q.statusText}`,Q)}).then(Q=>{switch(Y){case"arraybuffer":return Q.arrayBuffer();case"blob":return Q.blob();case"document":return Q.text().then(ee=>new DOMParser().parseFromString(ee,K));case"json":return Q.json();default:if(K==="")return Q.text();{const ie=/charset="?([^;"\s]*)"?/i.exec(K),re=ie&&ie[1]?ie[1].toLowerCase():void 0,se=new TextDecoder(re);return Q.arrayBuffer().then(le=>se.decode(le))}}}).then(Q=>{Cache.add(e,Q);const ee=loading[e];delete loading[e];for(let ie=0,re=ee.length;ie<re;ie++){const se=ee[ie];se.onLoad&&se.onLoad(Q)}}).catch(Q=>{const ee=loading[e];if(ee===void 0)throw this.manager.itemError(e),Q;delete loading[e];for(let ie=0,re=ee.length;ie<re;ie++){const se=ee[ie];se.onError&&se.onError(Q)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class AnimationLoader extends Loader{constructor(e){super(e)}load(e,t,o,y){const R=this,G=new FileLoader(this.manager);G.setPath(this.path),G.setRequestHeader(this.requestHeader),G.setWithCredentials(this.withCredentials),G.load(e,function(K){try{t(R.parse(JSON.parse(K)))}catch(Y){y?y(Y):console.error(Y),R.manager.itemError(e)}},o,y)}parse(e){const t=[];for(let o=0;o<e.length;o++){const y=AnimationClip.parse(e[o]);t.push(y)}return t}}class CompressedTextureLoader extends Loader{constructor(e){super(e)}load(e,t,o,y){const R=this,G=[],K=new CompressedTexture,Y=new FileLoader(this.manager);Y.setPath(this.path),Y.setResponseType("arraybuffer"),Y.setRequestHeader(this.requestHeader),Y.setWithCredentials(R.withCredentials);let Q=0;function ee(ie){Y.load(e[ie],function(re){const se=R.parse(re,!0);G[ie]={width:se.width,height:se.height,format:se.format,mipmaps:se.mipmaps},Q+=1,Q===6&&(se.mipmapCount===1&&(K.minFilter=LinearFilter),K.image=G,K.format=se.format,K.needsUpdate=!0,t&&t(K))},o,y)}if(Array.isArray(e))for(let ie=0,re=e.length;ie<re;++ie)ee(ie);else Y.load(e,function(ie){const re=R.parse(ie,!0);if(re.isCubemap){const se=re.mipmaps.length/re.mipmapCount;for(let le=0;le<se;le++){G[le]={mipmaps:[]};for(let ce=0;ce<re.mipmapCount;ce++)G[le].mipmaps.push(re.mipmaps[le*re.mipmapCount+ce]),G[le].format=re.format,G[le].width=re.width,G[le].height=re.height}K.image=G}else K.image.width=re.width,K.image.height=re.height,K.mipmaps=re.mipmaps;re.mipmapCount===1&&(K.minFilter=LinearFilter),K.format=re.format,K.needsUpdate=!0,t&&t(K)},o,y);return K}}class ImageLoader extends Loader{constructor(e){super(e)}load(e,t,o,y){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const R=this,G=Cache.get(e);if(G!==void 0)return R.manager.itemStart(e),setTimeout(function(){t&&t(G),R.manager.itemEnd(e)},0),G;const K=createElementNS("img");function Y(){ee(),Cache.add(e,this),t&&t(this),R.manager.itemEnd(e)}function Q(ie){ee(),y&&y(ie),R.manager.itemError(e),R.manager.itemEnd(e)}function ee(){K.removeEventListener("load",Y,!1),K.removeEventListener("error",Q,!1)}return K.addEventListener("load",Y,!1),K.addEventListener("error",Q,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(K.crossOrigin=this.crossOrigin),R.manager.itemStart(e),K.src=e,K}}class CubeTextureLoader extends Loader{constructor(e){super(e)}load(e,t,o,y){const R=new CubeTexture;R.colorSpace=SRGBColorSpace;const G=new ImageLoader(this.manager);G.setCrossOrigin(this.crossOrigin),G.setPath(this.path);let K=0;function Y(Q){G.load(e[Q],function(ee){R.images[Q]=ee,K++,K===6&&(R.needsUpdate=!0,t&&t(R))},void 0,y)}for(let Q=0;Q<e.length;++Q)Y(Q);return R}}class DataTextureLoader extends Loader{constructor(e){super(e)}load(e,t,o,y){const R=this,G=new DataTexture,K=new FileLoader(this.manager);return K.setResponseType("arraybuffer"),K.setRequestHeader(this.requestHeader),K.setPath(this.path),K.setWithCredentials(R.withCredentials),K.load(e,function(Y){let Q;try{Q=R.parse(Y)}catch(ee){if(y!==void 0)y(ee);else{console.error(ee);return}}Q.image!==void 0?G.image=Q.image:Q.data!==void 0&&(G.image.width=Q.width,G.image.height=Q.height,G.image.data=Q.data),G.wrapS=Q.wrapS!==void 0?Q.wrapS:ClampToEdgeWrapping,G.wrapT=Q.wrapT!==void 0?Q.wrapT:ClampToEdgeWrapping,G.magFilter=Q.magFilter!==void 0?Q.magFilter:LinearFilter,G.minFilter=Q.minFilter!==void 0?Q.minFilter:LinearFilter,G.anisotropy=Q.anisotropy!==void 0?Q.anisotropy:1,Q.colorSpace!==void 0&&(G.colorSpace=Q.colorSpace),Q.flipY!==void 0&&(G.flipY=Q.flipY),Q.format!==void 0&&(G.format=Q.format),Q.type!==void 0&&(G.type=Q.type),Q.mipmaps!==void 0&&(G.mipmaps=Q.mipmaps,G.minFilter=LinearMipmapLinearFilter),Q.mipmapCount===1&&(G.minFilter=LinearFilter),Q.generateMipmaps!==void 0&&(G.generateMipmaps=Q.generateMipmaps),G.needsUpdate=!0,t&&t(G,Q)},o,y),G}}class TextureLoader extends Loader{constructor(e){super(e)}load(e,t,o,y){const R=new Texture,G=new ImageLoader(this.manager);return G.setCrossOrigin(this.crossOrigin),G.setPath(this.path),G.load(e,function(K){R.image=K,R.needsUpdate=!0,t!==void 0&&t(R)},o,y),R}}class Light extends Object3D{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Color(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}}class HemisphereLight extends Light{constructor(e,t,o){super(e,o),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Object3D.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Color(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const _projScreenMatrix$1=new Matrix4,_lightPositionWorld$1=new Vector3,_lookTarget$1=new Vector3;class LightShadow{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Vector2(512,512),this.map=null,this.mapPass=null,this.matrix=new Matrix4,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Frustum,this._frameExtents=new Vector2(1,1),this._viewportCount=1,this._viewports=[new Vector4(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,o=this.matrix;_lightPositionWorld$1.setFromMatrixPosition(e.matrixWorld),t.position.copy(_lightPositionWorld$1),_lookTarget$1.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(_lookTarget$1),t.updateMatrixWorld(),_projScreenMatrix$1.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(_projScreenMatrix$1),o.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),o.multiply(_projScreenMatrix$1)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class SpotLightShadow extends LightShadow{constructor(){super(new PerspectiveCamera(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,o=RAD2DEG*2*e.angle*this.focus,y=this.mapSize.width/this.mapSize.height,R=e.distance||t.far;(o!==t.fov||y!==t.aspect||R!==t.far)&&(t.fov=o,t.aspect=y,t.far=R,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class SpotLight extends Light{constructor(e,t,o=0,y=Math.PI/3,R=0,G=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Object3D.DEFAULT_UP),this.updateMatrix(),this.target=new Object3D,this.distance=o,this.angle=y,this.penumbra=R,this.decay=G,this.map=null,this.shadow=new SpotLightShadow}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const _projScreenMatrix=new Matrix4,_lightPositionWorld=new Vector3,_lookTarget=new Vector3;class PointLightShadow extends LightShadow{constructor(){super(new PerspectiveCamera(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Vector2(4,2),this._viewportCount=6,this._viewports=[new Vector4(2,1,1,1),new Vector4(0,1,1,1),new Vector4(3,1,1,1),new Vector4(1,1,1,1),new Vector4(3,0,1,1),new Vector4(1,0,1,1)],this._cubeDirections=[new Vector3(1,0,0),new Vector3(-1,0,0),new Vector3(0,0,1),new Vector3(0,0,-1),new Vector3(0,1,0),new Vector3(0,-1,0)],this._cubeUps=[new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,0,1),new Vector3(0,0,-1)]}updateMatrices(e,t=0){const o=this.camera,y=this.matrix,R=e.distance||o.far;R!==o.far&&(o.far=R,o.updateProjectionMatrix()),_lightPositionWorld.setFromMatrixPosition(e.matrixWorld),o.position.copy(_lightPositionWorld),_lookTarget.copy(o.position),_lookTarget.add(this._cubeDirections[t]),o.up.copy(this._cubeUps[t]),o.lookAt(_lookTarget),o.updateMatrixWorld(),y.makeTranslation(-_lightPositionWorld.x,-_lightPositionWorld.y,-_lightPositionWorld.z),_projScreenMatrix.multiplyMatrices(o.projectionMatrix,o.matrixWorldInverse),this._frustum.setFromProjectionMatrix(_projScreenMatrix)}}class PointLight extends Light{constructor(e,t,o=0,y=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=o,this.decay=y,this.shadow=new PointLightShadow}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class OrthographicCamera extends Camera{constructor(e=-1,t=1,o=1,y=-1,R=.1,G=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=o,this.bottom=y,this.near=R,this.far=G,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,o,y,R,G){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=o,this.view.offsetY=y,this.view.width=R,this.view.height=G,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),o=(this.right+this.left)/2,y=(this.top+this.bottom)/2;let R=o-e,G=o+e,K=y+t,Y=y-t;if(this.view!==null&&this.view.enabled){const Q=(this.right-this.left)/this.view.fullWidth/this.zoom,ee=(this.top-this.bottom)/this.view.fullHeight/this.zoom;R+=Q*this.view.offsetX,G=R+Q*this.view.width,K-=ee*this.view.offsetY,Y=K-ee*this.view.height}this.projectionMatrix.makeOrthographic(R,G,K,Y,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}class DirectionalLightShadow extends LightShadow{constructor(){super(new OrthographicCamera(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class DirectionalLight extends Light{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Object3D.DEFAULT_UP),this.updateMatrix(),this.target=new Object3D,this.shadow=new DirectionalLightShadow}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class AmbientLight extends Light{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class RectAreaLight extends Light{constructor(e,t,o=10,y=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=o,this.height=y}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class SphericalHarmonics3{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new Vector3)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const o=e.x,y=e.y,R=e.z,G=this.coefficients;return t.copy(G[0]).multiplyScalar(.282095),t.addScaledVector(G[1],.488603*y),t.addScaledVector(G[2],.488603*R),t.addScaledVector(G[3],.488603*o),t.addScaledVector(G[4],1.092548*(o*y)),t.addScaledVector(G[5],1.092548*(y*R)),t.addScaledVector(G[6],.315392*(3*R*R-1)),t.addScaledVector(G[7],1.092548*(o*R)),t.addScaledVector(G[8],.546274*(o*o-y*y)),t}getIrradianceAt(e,t){const o=e.x,y=e.y,R=e.z,G=this.coefficients;return t.copy(G[0]).multiplyScalar(.886227),t.addScaledVector(G[1],2*.511664*y),t.addScaledVector(G[2],2*.511664*R),t.addScaledVector(G[3],2*.511664*o),t.addScaledVector(G[4],2*.429043*o*y),t.addScaledVector(G[5],2*.429043*y*R),t.addScaledVector(G[6],.743125*R*R-.247708),t.addScaledVector(G[7],2*.429043*o*R),t.addScaledVector(G[8],.429043*(o*o-y*y)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let o=0;o<9;o++)this.coefficients[o].addScaledVector(e.coefficients[o],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let o=0;o<9;o++)this.coefficients[o].lerp(e.coefficients[o],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const o=this.coefficients;for(let y=0;y<9;y++)o[y].fromArray(e,t+y*3);return this}toArray(e=[],t=0){const o=this.coefficients;for(let y=0;y<9;y++)o[y].toArray(e,t+y*3);return e}static getBasisAt(e,t){const o=e.x,y=e.y,R=e.z;t[0]=.282095,t[1]=.488603*y,t[2]=.488603*R,t[3]=.488603*o,t[4]=1.092548*o*y,t[5]=1.092548*y*R,t[6]=.315392*(3*R*R-1),t[7]=1.092548*o*R,t[8]=.546274*(o*o-y*y)}}class LightProbe extends Light{constructor(e=new SphericalHarmonics3,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class MaterialLoader extends Loader{constructor(e){super(e),this.textures={}}load(e,t,o,y){const R=this,G=new FileLoader(R.manager);G.setPath(R.path),G.setRequestHeader(R.requestHeader),G.setWithCredentials(R.withCredentials),G.load(e,function(K){try{t(R.parse(JSON.parse(K)))}catch(Y){y?y(Y):console.error(Y),R.manager.itemError(e)}},o,y)}parse(e){const t=this.textures;function o(R){return t[R]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",R),t[R]}const y=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(y.uuid=e.uuid),e.name!==void 0&&(y.name=e.name),e.color!==void 0&&y.color!==void 0&&y.color.setHex(e.color),e.roughness!==void 0&&(y.roughness=e.roughness),e.metalness!==void 0&&(y.metalness=e.metalness),e.sheen!==void 0&&(y.sheen=e.sheen),e.sheenColor!==void 0&&(y.sheenColor=new Color().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(y.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&y.emissive!==void 0&&y.emissive.setHex(e.emissive),e.specular!==void 0&&y.specular!==void 0&&y.specular.setHex(e.specular),e.specularIntensity!==void 0&&(y.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&y.specularColor!==void 0&&y.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(y.shininess=e.shininess),e.clearcoat!==void 0&&(y.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(y.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(y.dispersion=e.dispersion),e.iridescence!==void 0&&(y.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(y.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(y.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(y.transmission=e.transmission),e.thickness!==void 0&&(y.thickness=e.thickness),e.attenuationDistance!==void 0&&(y.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&y.attenuationColor!==void 0&&y.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(y.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(y.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(y.fog=e.fog),e.flatShading!==void 0&&(y.flatShading=e.flatShading),e.blending!==void 0&&(y.blending=e.blending),e.combine!==void 0&&(y.combine=e.combine),e.side!==void 0&&(y.side=e.side),e.shadowSide!==void 0&&(y.shadowSide=e.shadowSide),e.opacity!==void 0&&(y.opacity=e.opacity),e.transparent!==void 0&&(y.transparent=e.transparent),e.alphaTest!==void 0&&(y.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(y.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(y.depthFunc=e.depthFunc),e.depthTest!==void 0&&(y.depthTest=e.depthTest),e.depthWrite!==void 0&&(y.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(y.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(y.blendSrc=e.blendSrc),e.blendDst!==void 0&&(y.blendDst=e.blendDst),e.blendEquation!==void 0&&(y.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(y.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(y.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(y.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&y.blendColor!==void 0&&y.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(y.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(y.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(y.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(y.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(y.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(y.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(y.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(y.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(y.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(y.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(y.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(y.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(y.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(y.rotation=e.rotation),e.linewidth!==void 0&&(y.linewidth=e.linewidth),e.dashSize!==void 0&&(y.dashSize=e.dashSize),e.gapSize!==void 0&&(y.gapSize=e.gapSize),e.scale!==void 0&&(y.scale=e.scale),e.polygonOffset!==void 0&&(y.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(y.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(y.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(y.dithering=e.dithering),e.alphaToCoverage!==void 0&&(y.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(y.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(y.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(y.visible=e.visible),e.toneMapped!==void 0&&(y.toneMapped=e.toneMapped),e.userData!==void 0&&(y.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?y.vertexColors=e.vertexColors>0:y.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const R in e.uniforms){const G=e.uniforms[R];switch(y.uniforms[R]={},G.type){case"t":y.uniforms[R].value=o(G.value);break;case"c":y.uniforms[R].value=new Color().setHex(G.value);break;case"v2":y.uniforms[R].value=new Vector2().fromArray(G.value);break;case"v3":y.uniforms[R].value=new Vector3().fromArray(G.value);break;case"v4":y.uniforms[R].value=new Vector4().fromArray(G.value);break;case"m3":y.uniforms[R].value=new Matrix3().fromArray(G.value);break;case"m4":y.uniforms[R].value=new Matrix4().fromArray(G.value);break;default:y.uniforms[R].value=G.value}}if(e.defines!==void 0&&(y.defines=e.defines),e.vertexShader!==void 0&&(y.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(y.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(y.glslVersion=e.glslVersion),e.extensions!==void 0)for(const R in e.extensions)y.extensions[R]=e.extensions[R];if(e.lights!==void 0&&(y.lights=e.lights),e.clipping!==void 0&&(y.clipping=e.clipping),e.size!==void 0&&(y.size=e.size),e.sizeAttenuation!==void 0&&(y.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(y.map=o(e.map)),e.matcap!==void 0&&(y.matcap=o(e.matcap)),e.alphaMap!==void 0&&(y.alphaMap=o(e.alphaMap)),e.bumpMap!==void 0&&(y.bumpMap=o(e.bumpMap)),e.bumpScale!==void 0&&(y.bumpScale=e.bumpScale),e.normalMap!==void 0&&(y.normalMap=o(e.normalMap)),e.normalMapType!==void 0&&(y.normalMapType=e.normalMapType),e.normalScale!==void 0){let R=e.normalScale;Array.isArray(R)===!1&&(R=[R,R]),y.normalScale=new Vector2().fromArray(R)}return e.displacementMap!==void 0&&(y.displacementMap=o(e.displacementMap)),e.displacementScale!==void 0&&(y.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(y.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(y.roughnessMap=o(e.roughnessMap)),e.metalnessMap!==void 0&&(y.metalnessMap=o(e.metalnessMap)),e.emissiveMap!==void 0&&(y.emissiveMap=o(e.emissiveMap)),e.emissiveIntensity!==void 0&&(y.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(y.specularMap=o(e.specularMap)),e.specularIntensityMap!==void 0&&(y.specularIntensityMap=o(e.specularIntensityMap)),e.specularColorMap!==void 0&&(y.specularColorMap=o(e.specularColorMap)),e.envMap!==void 0&&(y.envMap=o(e.envMap)),e.envMapRotation!==void 0&&y.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(y.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(y.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(y.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(y.lightMap=o(e.lightMap)),e.lightMapIntensity!==void 0&&(y.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(y.aoMap=o(e.aoMap)),e.aoMapIntensity!==void 0&&(y.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(y.gradientMap=o(e.gradientMap)),e.clearcoatMap!==void 0&&(y.clearcoatMap=o(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(y.clearcoatRoughnessMap=o(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(y.clearcoatNormalMap=o(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(y.clearcoatNormalScale=new Vector2().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(y.iridescenceMap=o(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(y.iridescenceThicknessMap=o(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(y.transmissionMap=o(e.transmissionMap)),e.thicknessMap!==void 0&&(y.thicknessMap=o(e.thicknessMap)),e.anisotropyMap!==void 0&&(y.anisotropyMap=o(e.anisotropyMap)),e.sheenColorMap!==void 0&&(y.sheenColorMap=o(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(y.sheenRoughnessMap=o(e.sheenRoughnessMap)),y}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return MaterialLoader.createMaterialFromType(e)}static createMaterialFromType(e){const t={ShadowMaterial,SpriteMaterial,RawShaderMaterial,ShaderMaterial,PointsMaterial,MeshPhysicalMaterial,MeshStandardMaterial,MeshPhongMaterial,MeshToonMaterial,MeshNormalMaterial,MeshLambertMaterial,MeshDepthMaterial,MeshDistanceMaterial,MeshBasicMaterial,MeshMatcapMaterial,LineDashedMaterial,LineBasicMaterial,Material};return new t[e]}}class LoaderUtils{static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class InstancedBufferGeometry extends BufferGeometry{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class BufferGeometryLoader extends Loader{constructor(e){super(e)}load(e,t,o,y){const R=this,G=new FileLoader(R.manager);G.setPath(R.path),G.setRequestHeader(R.requestHeader),G.setWithCredentials(R.withCredentials),G.load(e,function(K){try{t(R.parse(JSON.parse(K)))}catch(Y){y?y(Y):console.error(Y),R.manager.itemError(e)}},o,y)}parse(e){const t={},o={};function y(se,le){if(t[le]!==void 0)return t[le];const oe=se.interleavedBuffers[le],ue=R(se,oe.buffer),ge=getTypedArray(oe.type,ue),ve=new InterleavedBuffer(ge,oe.stride);return ve.uuid=oe.uuid,t[le]=ve,ve}function R(se,le){if(o[le]!==void 0)return o[le];const oe=se.arrayBuffers[le],ue=new Uint32Array(oe).buffer;return o[le]=ue,ue}const G=e.isInstancedBufferGeometry?new InstancedBufferGeometry:new BufferGeometry,K=e.data.index;if(K!==void 0){const se=getTypedArray(K.type,K.array);G.setIndex(new BufferAttribute(se,1))}const Y=e.data.attributes;for(const se in Y){const le=Y[se];let ce;if(le.isInterleavedBufferAttribute){const oe=y(e.data,le.data);ce=new InterleavedBufferAttribute(oe,le.itemSize,le.offset,le.normalized)}else{const oe=getTypedArray(le.type,le.array),ue=le.isInstancedBufferAttribute?InstancedBufferAttribute:BufferAttribute;ce=new ue(oe,le.itemSize,le.normalized)}le.name!==void 0&&(ce.name=le.name),le.usage!==void 0&&ce.setUsage(le.usage),G.setAttribute(se,ce)}const Q=e.data.morphAttributes;if(Q)for(const se in Q){const le=Q[se],ce=[];for(let oe=0,ue=le.length;oe<ue;oe++){const ge=le[oe];let ve;if(ge.isInterleavedBufferAttribute){const _e=y(e.data,ge.data);ve=new InterleavedBufferAttribute(_e,ge.itemSize,ge.offset,ge.normalized)}else{const _e=getTypedArray(ge.type,ge.array);ve=new BufferAttribute(_e,ge.itemSize,ge.normalized)}ge.name!==void 0&&(ve.name=ge.name),ce.push(ve)}G.morphAttributes[se]=ce}e.data.morphTargetsRelative&&(G.morphTargetsRelative=!0);const ie=e.data.groups||e.data.drawcalls||e.data.offsets;if(ie!==void 0)for(let se=0,le=ie.length;se!==le;++se){const ce=ie[se];G.addGroup(ce.start,ce.count,ce.materialIndex)}const re=e.data.boundingSphere;if(re!==void 0){const se=new Vector3;re.center!==void 0&&se.fromArray(re.center),G.boundingSphere=new Sphere(se,re.radius)}return e.name&&(G.name=e.name),e.userData&&(G.userData=e.userData),G}}class ObjectLoader extends Loader{constructor(e){super(e)}load(e,t,o,y){const R=this,G=this.path===""?LoaderUtils.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||G;const K=new FileLoader(this.manager);K.setPath(this.path),K.setRequestHeader(this.requestHeader),K.setWithCredentials(this.withCredentials),K.load(e,function(Y){let Q=null;try{Q=JSON.parse(Y)}catch(ie){y!==void 0&&y(ie),console.error("THREE:ObjectLoader: Can't parse "+e+".",ie.message);return}const ee=Q.metadata;if(ee===void 0||ee.type===void 0||ee.type.toLowerCase()==="geometry"){y!==void 0&&y(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}R.parse(Q,t)},o,y)}async loadAsync(e,t){const o=this,y=this.path===""?LoaderUtils.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||y;const R=new FileLoader(this.manager);R.setPath(this.path),R.setRequestHeader(this.requestHeader),R.setWithCredentials(this.withCredentials);const G=await R.loadAsync(e,t),K=JSON.parse(G),Y=K.metadata;if(Y===void 0||Y.type===void 0||Y.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await o.parseAsync(K)}parse(e,t){const o=this.parseAnimations(e.animations),y=this.parseShapes(e.shapes),R=this.parseGeometries(e.geometries,y),G=this.parseImages(e.images,function(){t!==void 0&&t(Q)}),K=this.parseTextures(e.textures,G),Y=this.parseMaterials(e.materials,K),Q=this.parseObject(e.object,R,Y,K,o),ee=this.parseSkeletons(e.skeletons,Q);if(this.bindSkeletons(Q,ee),this.bindLightTargets(Q),t!==void 0){let ie=!1;for(const re in G)if(G[re].data instanceof HTMLImageElement){ie=!0;break}ie===!1&&t(Q)}return Q}async parseAsync(e){const t=this.parseAnimations(e.animations),o=this.parseShapes(e.shapes),y=this.parseGeometries(e.geometries,o),R=await this.parseImagesAsync(e.images),G=this.parseTextures(e.textures,R),K=this.parseMaterials(e.materials,G),Y=this.parseObject(e.object,y,K,G,t),Q=this.parseSkeletons(e.skeletons,Y);return this.bindSkeletons(Y,Q),this.bindLightTargets(Y),Y}parseShapes(e){const t={};if(e!==void 0)for(let o=0,y=e.length;o<y;o++){const R=new Shape().fromJSON(e[o]);t[R.uuid]=R}return t}parseSkeletons(e,t){const o={},y={};if(t.traverse(function(R){R.isBone&&(y[R.uuid]=R)}),e!==void 0)for(let R=0,G=e.length;R<G;R++){const K=new Skeleton().fromJSON(e[R],y);o[K.uuid]=K}return o}parseGeometries(e,t){const o={};if(e!==void 0){const y=new BufferGeometryLoader;for(let R=0,G=e.length;R<G;R++){let K;const Y=e[R];switch(Y.type){case"BufferGeometry":case"InstancedBufferGeometry":K=y.parse(Y);break;default:Y.type in Geometries?K=Geometries[Y.type].fromJSON(Y,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${Y.type}"`)}K.uuid=Y.uuid,Y.name!==void 0&&(K.name=Y.name),Y.userData!==void 0&&(K.userData=Y.userData),o[Y.uuid]=K}}return o}parseMaterials(e,t){const o={},y={};if(e!==void 0){const R=new MaterialLoader;R.setTextures(t);for(let G=0,K=e.length;G<K;G++){const Y=e[G];o[Y.uuid]===void 0&&(o[Y.uuid]=R.parse(Y)),y[Y.uuid]=o[Y.uuid]}}return y}parseAnimations(e){const t={};if(e!==void 0)for(let o=0;o<e.length;o++){const y=e[o],R=AnimationClip.parse(y);t[R.uuid]=R}return t}parseImages(e,t){const o=this,y={};let R;function G(Y){return o.manager.itemStart(Y),R.load(Y,function(){o.manager.itemEnd(Y)},void 0,function(){o.manager.itemError(Y),o.manager.itemEnd(Y)})}function K(Y){if(typeof Y=="string"){const Q=Y,ee=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(Q)?Q:o.resourcePath+Q;return G(ee)}else return Y.data?{data:getTypedArray(Y.type,Y.data),width:Y.width,height:Y.height}:null}if(e!==void 0&&e.length>0){const Y=new LoadingManager(t);R=new ImageLoader(Y),R.setCrossOrigin(this.crossOrigin);for(let Q=0,ee=e.length;Q<ee;Q++){const ie=e[Q],re=ie.url;if(Array.isArray(re)){const se=[];for(let le=0,ce=re.length;le<ce;le++){const oe=re[le],ue=K(oe);ue!==null&&(ue instanceof HTMLImageElement?se.push(ue):se.push(new DataTexture(ue.data,ue.width,ue.height)))}y[ie.uuid]=new Source(se)}else{const se=K(ie.url);y[ie.uuid]=new Source(se)}}}return y}async parseImagesAsync(e){const t=this,o={};let y;async function R(G){if(typeof G=="string"){const K=G,Y=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(K)?K:t.resourcePath+K;return await y.loadAsync(Y)}else return G.data?{data:getTypedArray(G.type,G.data),width:G.width,height:G.height}:null}if(e!==void 0&&e.length>0){y=new ImageLoader(this.manager),y.setCrossOrigin(this.crossOrigin);for(let G=0,K=e.length;G<K;G++){const Y=e[G],Q=Y.url;if(Array.isArray(Q)){const ee=[];for(let ie=0,re=Q.length;ie<re;ie++){const se=Q[ie],le=await R(se);le!==null&&(le instanceof HTMLImageElement?ee.push(le):ee.push(new DataTexture(le.data,le.width,le.height)))}o[Y.uuid]=new Source(ee)}else{const ee=await R(Y.url);o[Y.uuid]=new Source(ee)}}}return o}parseTextures(e,t){function o(R,G){return typeof R=="number"?R:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",R),G[R])}const y={};if(e!==void 0)for(let R=0,G=e.length;R<G;R++){const K=e[R];K.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',K.uuid),t[K.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",K.image);const Y=t[K.image],Q=Y.data;let ee;Array.isArray(Q)?(ee=new CubeTexture,Q.length===6&&(ee.needsUpdate=!0)):(Q&&Q.data?ee=new DataTexture:ee=new Texture,Q&&(ee.needsUpdate=!0)),ee.source=Y,ee.uuid=K.uuid,K.name!==void 0&&(ee.name=K.name),K.mapping!==void 0&&(ee.mapping=o(K.mapping,TEXTURE_MAPPING)),K.channel!==void 0&&(ee.channel=K.channel),K.offset!==void 0&&ee.offset.fromArray(K.offset),K.repeat!==void 0&&ee.repeat.fromArray(K.repeat),K.center!==void 0&&ee.center.fromArray(K.center),K.rotation!==void 0&&(ee.rotation=K.rotation),K.wrap!==void 0&&(ee.wrapS=o(K.wrap[0],TEXTURE_WRAPPING),ee.wrapT=o(K.wrap[1],TEXTURE_WRAPPING)),K.format!==void 0&&(ee.format=K.format),K.internalFormat!==void 0&&(ee.internalFormat=K.internalFormat),K.type!==void 0&&(ee.type=K.type),K.colorSpace!==void 0&&(ee.colorSpace=K.colorSpace),K.minFilter!==void 0&&(ee.minFilter=o(K.minFilter,TEXTURE_FILTER)),K.magFilter!==void 0&&(ee.magFilter=o(K.magFilter,TEXTURE_FILTER)),K.anisotropy!==void 0&&(ee.anisotropy=K.anisotropy),K.flipY!==void 0&&(ee.flipY=K.flipY),K.generateMipmaps!==void 0&&(ee.generateMipmaps=K.generateMipmaps),K.premultiplyAlpha!==void 0&&(ee.premultiplyAlpha=K.premultiplyAlpha),K.unpackAlignment!==void 0&&(ee.unpackAlignment=K.unpackAlignment),K.compareFunction!==void 0&&(ee.compareFunction=K.compareFunction),K.userData!==void 0&&(ee.userData=K.userData),y[K.uuid]=ee}return y}parseObject(e,t,o,y,R){let G;function K(re){return t[re]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",re),t[re]}function Y(re){if(re!==void 0){if(Array.isArray(re)){const se=[];for(let le=0,ce=re.length;le<ce;le++){const oe=re[le];o[oe]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",oe),se.push(o[oe])}return se}return o[re]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",re),o[re]}}function Q(re){return y[re]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",re),y[re]}let ee,ie;switch(e.type){case"Scene":G=new Scene,e.background!==void 0&&(Number.isInteger(e.background)?G.background=new Color(e.background):G.background=Q(e.background)),e.environment!==void 0&&(G.environment=Q(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?G.fog=new Fog(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(G.fog=new FogExp2(e.fog.color,e.fog.density)),e.fog.name!==""&&(G.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(G.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(G.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&G.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(G.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&G.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":G=new PerspectiveCamera(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(G.focus=e.focus),e.zoom!==void 0&&(G.zoom=e.zoom),e.filmGauge!==void 0&&(G.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(G.filmOffset=e.filmOffset),e.view!==void 0&&(G.view=Object.assign({},e.view));break;case"OrthographicCamera":G=new OrthographicCamera(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(G.zoom=e.zoom),e.view!==void 0&&(G.view=Object.assign({},e.view));break;case"AmbientLight":G=new AmbientLight(e.color,e.intensity);break;case"DirectionalLight":G=new DirectionalLight(e.color,e.intensity),G.target=e.target||"";break;case"PointLight":G=new PointLight(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":G=new RectAreaLight(e.color,e.intensity,e.width,e.height);break;case"SpotLight":G=new SpotLight(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),G.target=e.target||"";break;case"HemisphereLight":G=new HemisphereLight(e.color,e.groundColor,e.intensity);break;case"LightProbe":G=new LightProbe().fromJSON(e);break;case"SkinnedMesh":ee=K(e.geometry),ie=Y(e.material),G=new SkinnedMesh(ee,ie),e.bindMode!==void 0&&(G.bindMode=e.bindMode),e.bindMatrix!==void 0&&G.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(G.skeleton=e.skeleton);break;case"Mesh":ee=K(e.geometry),ie=Y(e.material),G=new Mesh(ee,ie);break;case"InstancedMesh":ee=K(e.geometry),ie=Y(e.material);const re=e.count,se=e.instanceMatrix,le=e.instanceColor;G=new InstancedMesh(ee,ie,re),G.instanceMatrix=new InstancedBufferAttribute(new Float32Array(se.array),16),le!==void 0&&(G.instanceColor=new InstancedBufferAttribute(new Float32Array(le.array),le.itemSize));break;case"BatchedMesh":ee=K(e.geometry),ie=Y(e.material),G=new BatchedMesh(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,ie),G.geometry=ee,G.perObjectFrustumCulled=e.perObjectFrustumCulled,G.sortObjects=e.sortObjects,G._drawRanges=e.drawRanges,G._reservedRanges=e.reservedRanges,G._visibility=e.visibility,G._active=e.active,G._bounds=e.bounds.map(ce=>{const oe=new Box3;oe.min.fromArray(ce.boxMin),oe.max.fromArray(ce.boxMax);const ue=new Sphere;return ue.radius=ce.sphereRadius,ue.center.fromArray(ce.sphereCenter),{boxInitialized:ce.boxInitialized,box:oe,sphereInitialized:ce.sphereInitialized,sphere:ue}}),G._maxInstanceCount=e.maxInstanceCount,G._maxVertexCount=e.maxVertexCount,G._maxIndexCount=e.maxIndexCount,G._geometryInitialized=e.geometryInitialized,G._geometryCount=e.geometryCount,G._matricesTexture=Q(e.matricesTexture.uuid),e.colorsTexture!==void 0&&(G._colorsTexture=Q(e.colorsTexture.uuid));break;case"LOD":G=new LOD;break;case"Line":G=new Line(K(e.geometry),Y(e.material));break;case"LineLoop":G=new LineLoop(K(e.geometry),Y(e.material));break;case"LineSegments":G=new LineSegments(K(e.geometry),Y(e.material));break;case"PointCloud":case"Points":G=new Points(K(e.geometry),Y(e.material));break;case"Sprite":G=new Sprite(Y(e.material));break;case"Group":G=new Group;break;case"Bone":G=new Bone;break;default:G=new Object3D}if(G.uuid=e.uuid,e.name!==void 0&&(G.name=e.name),e.matrix!==void 0?(G.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(G.matrixAutoUpdate=e.matrixAutoUpdate),G.matrixAutoUpdate&&G.matrix.decompose(G.position,G.quaternion,G.scale)):(e.position!==void 0&&G.position.fromArray(e.position),e.rotation!==void 0&&G.rotation.fromArray(e.rotation),e.quaternion!==void 0&&G.quaternion.fromArray(e.quaternion),e.scale!==void 0&&G.scale.fromArray(e.scale)),e.up!==void 0&&G.up.fromArray(e.up),e.castShadow!==void 0&&(G.castShadow=e.castShadow),e.receiveShadow!==void 0&&(G.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(G.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(G.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(G.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(G.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&G.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(G.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(G.visible=e.visible),e.frustumCulled!==void 0&&(G.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(G.renderOrder=e.renderOrder),e.userData!==void 0&&(G.userData=e.userData),e.layers!==void 0&&(G.layers.mask=e.layers),e.children!==void 0){const re=e.children;for(let se=0;se<re.length;se++)G.add(this.parseObject(re[se],t,o,y,R))}if(e.animations!==void 0){const re=e.animations;for(let se=0;se<re.length;se++){const le=re[se];G.animations.push(R[le])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(G.autoUpdate=e.autoUpdate);const re=e.levels;for(let se=0;se<re.length;se++){const le=re[se],ce=G.getObjectByProperty("uuid",le.object);ce!==void 0&&G.addLevel(ce,le.distance,le.hysteresis)}}return G}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(o){if(o.isSkinnedMesh===!0&&o.skeleton!==void 0){const y=t[o.skeleton];y===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",o.skeleton):o.bind(y,o.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const o=t.target,y=e.getObjectByProperty("uuid",o);y!==void 0?t.target=y:t.target=new Object3D}})}}const TEXTURE_MAPPING={UVMapping,CubeReflectionMapping,CubeRefractionMapping,EquirectangularReflectionMapping,EquirectangularRefractionMapping,CubeUVReflectionMapping},TEXTURE_WRAPPING={RepeatWrapping,ClampToEdgeWrapping,MirroredRepeatWrapping},TEXTURE_FILTER={NearestFilter,NearestMipmapNearestFilter,NearestMipmapLinearFilter,LinearFilter,LinearMipmapNearestFilter,LinearMipmapLinearFilter};class ImageBitmapLoader extends Loader{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,o,y){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const R=this,G=Cache.get(e);if(G!==void 0){if(R.manager.itemStart(e),G.then){G.then(Q=>{t&&t(Q),R.manager.itemEnd(e)}).catch(Q=>{y&&y(Q)});return}return setTimeout(function(){t&&t(G),R.manager.itemEnd(e)},0),G}const K={};K.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",K.headers=this.requestHeader;const Y=fetch(e,K).then(function(Q){return Q.blob()}).then(function(Q){return createImageBitmap(Q,Object.assign(R.options,{colorSpaceConversion:"none"}))}).then(function(Q){return Cache.add(e,Q),t&&t(Q),R.manager.itemEnd(e),Q}).catch(function(Q){y&&y(Q),Cache.remove(e),R.manager.itemError(e),R.manager.itemEnd(e)});Cache.add(e,Y),R.manager.itemStart(e)}}let _context;class AudioContext{static getContext(){return _context===void 0&&(_context=new(window.AudioContext||window.webkitAudioContext)),_context}static setContext(e){_context=e}}class AudioLoader extends Loader{constructor(e){super(e)}load(e,t,o,y){const R=this,G=new FileLoader(this.manager);G.setResponseType("arraybuffer"),G.setPath(this.path),G.setRequestHeader(this.requestHeader),G.setWithCredentials(this.withCredentials),G.load(e,function(Y){try{const Q=Y.slice(0);AudioContext.getContext().decodeAudioData(Q,function(ie){t(ie)}).catch(K)}catch(Q){K(Q)}},o,y);function K(Y){y?y(Y):console.error(Y),R.manager.itemError(e)}}}const _eyeRight=new Matrix4,_eyeLeft=new Matrix4,_projectionMatrix=new Matrix4;class StereoCamera{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new PerspectiveCamera,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new PerspectiveCamera,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,_projectionMatrix.copy(e.projectionMatrix);const y=t.eyeSep/2,R=y*t.near/t.focus,G=t.near*Math.tan(DEG2RAD*t.fov*.5)/t.zoom;let K,Y;_eyeLeft.elements[12]=-y,_eyeRight.elements[12]=y,K=-G*t.aspect+R,Y=G*t.aspect+R,_projectionMatrix.elements[0]=2*t.near/(Y-K),_projectionMatrix.elements[8]=(Y+K)/(Y-K),this.cameraL.projectionMatrix.copy(_projectionMatrix),K=-G*t.aspect-R,Y=G*t.aspect-R,_projectionMatrix.elements[0]=2*t.near/(Y-K),_projectionMatrix.elements[8]=(Y+K)/(Y-K),this.cameraR.projectionMatrix.copy(_projectionMatrix)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(_eyeLeft),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(_eyeRight)}}class ArrayCamera extends PerspectiveCamera{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e,this.index=0}}class Clock{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=now$1(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=now$1();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function now$1(){return performance.now()}const _position$1=new Vector3,_quaternion$1=new Quaternion,_scale$1=new Vector3,_orientation$1=new Vector3;class AudioListener extends Object3D{constructor(){super(),this.type="AudioListener",this.context=AudioContext.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Clock}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,o=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(_position$1,_quaternion$1,_scale$1),_orientation$1.set(0,0,-1).applyQuaternion(_quaternion$1),t.positionX){const y=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(_position$1.x,y),t.positionY.linearRampToValueAtTime(_position$1.y,y),t.positionZ.linearRampToValueAtTime(_position$1.z,y),t.forwardX.linearRampToValueAtTime(_orientation$1.x,y),t.forwardY.linearRampToValueAtTime(_orientation$1.y,y),t.forwardZ.linearRampToValueAtTime(_orientation$1.z,y),t.upX.linearRampToValueAtTime(o.x,y),t.upY.linearRampToValueAtTime(o.y,y),t.upZ.linearRampToValueAtTime(o.z,y)}else t.setPosition(_position$1.x,_position$1.y,_position$1.z),t.setOrientation(_orientation$1.x,_orientation$1.y,_orientation$1.z,o.x,o.y,o.z)}}class Audio extends Object3D{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,t){return super.copy(e,t),e.sourceType!=="buffer"?(console.warn("THREE.Audio: Audio source type cannot be copied."),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}}const _position=new Vector3,_quaternion=new Quaternion,_scale=new Vector3,_orientation=new Vector3;class PositionalAudio extends Audio{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,o){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=o,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(_position,_quaternion,_scale),_orientation.set(0,0,1).applyQuaternion(_quaternion);const t=this.panner;if(t.positionX){const o=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(_position.x,o),t.positionY.linearRampToValueAtTime(_position.y,o),t.positionZ.linearRampToValueAtTime(_position.z,o),t.orientationX.linearRampToValueAtTime(_orientation.x,o),t.orientationY.linearRampToValueAtTime(_orientation.y,o),t.orientationZ.linearRampToValueAtTime(_orientation.z,o)}else t.setPosition(_position.x,_position.y,_position.z),t.setOrientation(_orientation.x,_orientation.y,_orientation.z)}}class AudioAnalyser{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let o=0;o<t.length;o++)e+=t[o];return e/t.length}}class PropertyMixer{constructor(e,t,o){this.binding=e,this.valueSize=o;let y,R,G;switch(t){case"quaternion":y=this._slerp,R=this._slerpAdditive,G=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(o*6),this._workIndex=5;break;case"string":case"bool":y=this._select,R=this._select,G=this._setAdditiveIdentityOther,this.buffer=new Array(o*5);break;default:y=this._lerp,R=this._lerpAdditive,G=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(o*5)}this._mixBufferRegion=y,this._mixBufferRegionAdditive=R,this._setIdentity=G,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const o=this.buffer,y=this.valueSize,R=e*y+y;let G=this.cumulativeWeight;if(G===0){for(let K=0;K!==y;++K)o[R+K]=o[K];G=t}else{G+=t;const K=t/G;this._mixBufferRegion(o,R,0,K,y)}this.cumulativeWeight=G}accumulateAdditive(e){const t=this.buffer,o=this.valueSize,y=o*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,y,0,e,o),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,o=this.buffer,y=e*t+t,R=this.cumulativeWeight,G=this.cumulativeWeightAdditive,K=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,R<1){const Y=t*this._origIndex;this._mixBufferRegion(o,y,Y,1-R,t)}G>0&&this._mixBufferRegionAdditive(o,y,this._addIndex*t,1,t);for(let Y=t,Q=t+t;Y!==Q;++Y)if(o[Y]!==o[Y+t]){K.setValue(o,y);break}}saveOriginalState(){const e=this.binding,t=this.buffer,o=this.valueSize,y=o*this._origIndex;e.getValue(t,y);for(let R=o,G=y;R!==G;++R)t[R]=t[y+R%o];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let o=e;o<t;o++)this.buffer[o]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let o=0;o<this.valueSize;o++)this.buffer[t+o]=this.buffer[e+o]}_select(e,t,o,y,R){if(y>=.5)for(let G=0;G!==R;++G)e[t+G]=e[o+G]}_slerp(e,t,o,y){Quaternion.slerpFlat(e,t,e,t,e,o,y)}_slerpAdditive(e,t,o,y,R){const G=this._workIndex*R;Quaternion.multiplyQuaternionsFlat(e,G,e,t,e,o),Quaternion.slerpFlat(e,t,e,t,e,G,y)}_lerp(e,t,o,y,R){const G=1-y;for(let K=0;K!==R;++K){const Y=t+K;e[Y]=e[Y]*G+e[o+K]*y}}_lerpAdditive(e,t,o,y,R){for(let G=0;G!==R;++G){const K=t+G;e[K]=e[K]+e[o+G]*y}}}const _RESERVED_CHARS_RE="\\[\\]\\.:\\/",_reservedRe=new RegExp("["+_RESERVED_CHARS_RE+"]","g"),_wordChar="[^"+_RESERVED_CHARS_RE+"]",_wordCharOrDot="[^"+_RESERVED_CHARS_RE.replace("\\.","")+"]",_directoryRe=/((?:WC+[\/:])*)/.source.replace("WC",_wordChar),_nodeRe=/(WCOD+)?/.source.replace("WCOD",_wordCharOrDot),_objectRe=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",_wordChar),_propertyRe=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",_wordChar),_trackRe=new RegExp("^"+_directoryRe+_nodeRe+_objectRe+_propertyRe+"$"),_supportedObjectNames=["material","materials","bones","map"];class Composite{constructor(e,t,o){const y=o||PropertyBinding.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,y)}getValue(e,t){this.bind();const o=this._targetGroup.nCachedObjects_,y=this._bindings[o];y!==void 0&&y.getValue(e,t)}setValue(e,t){const o=this._bindings;for(let y=this._targetGroup.nCachedObjects_,R=o.length;y!==R;++y)o[y].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,o=e.length;t!==o;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,o=e.length;t!==o;++t)e[t].unbind()}}class PropertyBinding{constructor(e,t,o){this.path=t,this.parsedPath=o||PropertyBinding.parseTrackName(t),this.node=PropertyBinding.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,o){return e&&e.isAnimationObjectGroup?new PropertyBinding.Composite(e,t,o):new PropertyBinding(e,t,o)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(_reservedRe,"")}static parseTrackName(e){const t=_trackRe.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const o={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},y=o.nodeName&&o.nodeName.lastIndexOf(".");if(y!==void 0&&y!==-1){const R=o.nodeName.substring(y+1);_supportedObjectNames.indexOf(R)!==-1&&(o.nodeName=o.nodeName.substring(0,y),o.objectName=R)}if(o.propertyName===null||o.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return o}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const o=e.skeleton.getBoneByName(t);if(o!==void 0)return o}if(e.children){const o=function(R){for(let G=0;G<R.length;G++){const K=R[G];if(K.name===t||K.uuid===t)return K;const Y=o(K.children);if(Y)return Y}return null},y=o(e.children);if(y)return y}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const o=this.resolvedProperty;for(let y=0,R=o.length;y!==R;++y)e[t++]=o[y]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const o=this.resolvedProperty;for(let y=0,R=o.length;y!==R;++y)o[y]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const o=this.resolvedProperty;for(let y=0,R=o.length;y!==R;++y)o[y]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const o=this.resolvedProperty;for(let y=0,R=o.length;y!==R;++y)o[y]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,o=t.objectName,y=t.propertyName;let R=t.propertyIndex;if(e||(e=PropertyBinding.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(o){let Q=t.objectIndex;switch(o){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let ee=0;ee<e.length;ee++)if(e[ee].name===Q){Q=ee;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[o]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[o]}if(Q!==void 0){if(e[Q]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[Q]}}const G=e[y];if(G===void 0){const Q=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+Q+"."+y+" but it wasn't found.",e);return}let K=this.Versioning.None;this.targetObject=e,e.isMaterial===!0?K=this.Versioning.NeedsUpdate:e.isObject3D===!0&&(K=this.Versioning.MatrixWorldNeedsUpdate);let Y=this.BindingType.Direct;if(R!==void 0){if(y==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[R]!==void 0&&(R=e.morphTargetDictionary[R])}Y=this.BindingType.ArrayElement,this.resolvedProperty=G,this.propertyIndex=R}else G.fromArray!==void 0&&G.toArray!==void 0?(Y=this.BindingType.HasFromToArray,this.resolvedProperty=G):Array.isArray(G)?(Y=this.BindingType.EntireArray,this.resolvedProperty=G):this.propertyName=y;this.getValue=this.GetterByBindingType[Y],this.setValue=this.SetterByBindingTypeAndVersioning[Y][K]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}PropertyBinding.Composite=Composite;PropertyBinding.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};PropertyBinding.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};PropertyBinding.prototype.GetterByBindingType=[PropertyBinding.prototype._getValue_direct,PropertyBinding.prototype._getValue_array,PropertyBinding.prototype._getValue_arrayElement,PropertyBinding.prototype._getValue_toArray];PropertyBinding.prototype.SetterByBindingTypeAndVersioning=[[PropertyBinding.prototype._setValue_direct,PropertyBinding.prototype._setValue_direct_setNeedsUpdate,PropertyBinding.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[PropertyBinding.prototype._setValue_array,PropertyBinding.prototype._setValue_array_setNeedsUpdate,PropertyBinding.prototype._setValue_array_setMatrixWorldNeedsUpdate],[PropertyBinding.prototype._setValue_arrayElement,PropertyBinding.prototype._setValue_arrayElement_setNeedsUpdate,PropertyBinding.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[PropertyBinding.prototype._setValue_fromArray,PropertyBinding.prototype._setValue_fromArray_setNeedsUpdate,PropertyBinding.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class AnimationObjectGroup{constructor(){this.isAnimationObjectGroup=!0,this.uuid=generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let o=0,y=arguments.length;o!==y;++o)e[arguments[o].uuid]=o;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,o=this._paths,y=this._parsedPaths,R=this._bindings,G=R.length;let K,Y=e.length,Q=this.nCachedObjects_;for(let ee=0,ie=arguments.length;ee!==ie;++ee){const re=arguments[ee],se=re.uuid;let le=t[se];if(le===void 0){le=Y++,t[se]=le,e.push(re);for(let ce=0,oe=G;ce!==oe;++ce)R[ce].push(new PropertyBinding(re,o[ce],y[ce]))}else if(le<Q){K=e[le];const ce=--Q,oe=e[ce];t[oe.uuid]=le,e[le]=oe,t[se]=ce,e[ce]=re;for(let ue=0,ge=G;ue!==ge;++ue){const ve=R[ue],_e=ve[ce];let be=ve[le];ve[le]=_e,be===void 0&&(be=new PropertyBinding(re,o[ue],y[ue])),ve[ce]=be}}else e[le]!==K&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=Q}remove(){const e=this._objects,t=this._indicesByUUID,o=this._bindings,y=o.length;let R=this.nCachedObjects_;for(let G=0,K=arguments.length;G!==K;++G){const Y=arguments[G],Q=Y.uuid,ee=t[Q];if(ee!==void 0&&ee>=R){const ie=R++,re=e[ie];t[re.uuid]=ee,e[ee]=re,t[Q]=ie,e[ie]=Y;for(let se=0,le=y;se!==le;++se){const ce=o[se],oe=ce[ie],ue=ce[ee];ce[ee]=oe,ce[ie]=ue}}}this.nCachedObjects_=R}uncache(){const e=this._objects,t=this._indicesByUUID,o=this._bindings,y=o.length;let R=this.nCachedObjects_,G=e.length;for(let K=0,Y=arguments.length;K!==Y;++K){const Q=arguments[K],ee=Q.uuid,ie=t[ee];if(ie!==void 0)if(delete t[ee],ie<R){const re=--R,se=e[re],le=--G,ce=e[le];t[se.uuid]=ie,e[ie]=se,t[ce.uuid]=re,e[re]=ce,e.pop();for(let oe=0,ue=y;oe!==ue;++oe){const ge=o[oe],ve=ge[re],_e=ge[le];ge[ie]=ve,ge[re]=_e,ge.pop()}}else{const re=--G,se=e[re];re>0&&(t[se.uuid]=ie),e[ie]=se,e.pop();for(let le=0,ce=y;le!==ce;++le){const oe=o[le];oe[ie]=oe[re],oe.pop()}}}this.nCachedObjects_=R}subscribe_(e,t){const o=this._bindingsIndicesByPath;let y=o[e];const R=this._bindings;if(y!==void 0)return R[y];const G=this._paths,K=this._parsedPaths,Y=this._objects,Q=Y.length,ee=this.nCachedObjects_,ie=new Array(Q);y=R.length,o[e]=y,G.push(e),K.push(t),R.push(ie);for(let re=ee,se=Y.length;re!==se;++re){const le=Y[re];ie[re]=new PropertyBinding(le,e,t)}return ie}unsubscribe_(e){const t=this._bindingsIndicesByPath,o=t[e];if(o!==void 0){const y=this._paths,R=this._parsedPaths,G=this._bindings,K=G.length-1,Y=G[K],Q=e[K];t[Q]=o,G[o]=Y,G.pop(),R[o]=R[K],R.pop(),y[o]=y[K],y.pop()}}}class AnimationAction{constructor(e,t,o=null,y=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=o,this.blendMode=y;const R=t.tracks,G=R.length,K=new Array(G),Y={endingStart:ZeroCurvatureEnding,endingEnd:ZeroCurvatureEnding};for(let Q=0;Q!==G;++Q){const ee=R[Q].createInterpolant(null);K[Q]=ee,ee.settings=Y}this._interpolantSettings=Y,this._interpolants=K,this._propertyBindings=new Array(G),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=LoopRepeat,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,o=!1){if(e.fadeOut(t),this.fadeIn(t),o===!0){const y=this._clip.duration,R=e._clip.duration,G=R/y,K=y/R;e.warp(1,G,t),this.warp(K,1,t)}return this}crossFadeTo(e,t,o=!1){return e.crossFadeFrom(this,t,o)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,o){const y=this._mixer,R=y.time,G=this.timeScale;let K=this._timeScaleInterpolant;K===null&&(K=y._lendControlInterpolant(),this._timeScaleInterpolant=K);const Y=K.parameterPositions,Q=K.sampleValues;return Y[0]=R,Y[1]=R+o,Q[0]=e/G,Q[1]=t/G,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,o,y){if(!this.enabled){this._updateWeight(e);return}const R=this._startTime;if(R!==null){const Y=(e-R)*o;Y<0||o===0?t=0:(this._startTime=null,t=o*Y)}t*=this._updateTimeScale(e);const G=this._updateTime(t),K=this._updateWeight(e);if(K>0){const Y=this._interpolants,Q=this._propertyBindings;switch(this.blendMode){case AdditiveAnimationBlendMode:for(let ee=0,ie=Y.length;ee!==ie;++ee)Y[ee].evaluate(G),Q[ee].accumulateAdditive(K);break;case NormalAnimationBlendMode:default:for(let ee=0,ie=Y.length;ee!==ie;++ee)Y[ee].evaluate(G),Q[ee].accumulate(y,K)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const o=this._weightInterpolant;if(o!==null){const y=o.evaluate(e)[0];t*=y,e>o.parameterPositions[1]&&(this.stopFading(),y===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const o=this._timeScaleInterpolant;if(o!==null){const y=o.evaluate(e)[0];t*=y,e>o.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,o=this.loop;let y=this.time+e,R=this._loopCount;const G=o===LoopPingPong;if(e===0)return R===-1?y:G&&(R&1)===1?t-y:y;if(o===LoopOnce){R===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(y>=t)y=t;else if(y<0)y=0;else{this.time=y;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=y,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(R===-1&&(e>=0?(R=0,this._setEndings(!0,this.repetitions===0,G)):this._setEndings(this.repetitions===0,!0,G)),y>=t||y<0){const K=Math.floor(y/t);y-=t*K,R+=Math.abs(K);const Y=this.repetitions-R;if(Y<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,y=e>0?t:0,this.time=y,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(Y===1){const Q=e<0;this._setEndings(Q,!Q,G)}else this._setEndings(!1,!1,G);this._loopCount=R,this.time=y,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:K})}}else this.time=y;if(G&&(R&1)===1)return t-y}return y}_setEndings(e,t,o){const y=this._interpolantSettings;o?(y.endingStart=ZeroSlopeEnding,y.endingEnd=ZeroSlopeEnding):(e?y.endingStart=this.zeroSlopeAtStart?ZeroSlopeEnding:ZeroCurvatureEnding:y.endingStart=WrapAroundEnding,t?y.endingEnd=this.zeroSlopeAtEnd?ZeroSlopeEnding:ZeroCurvatureEnding:y.endingEnd=WrapAroundEnding)}_scheduleFading(e,t,o){const y=this._mixer,R=y.time;let G=this._weightInterpolant;G===null&&(G=y._lendControlInterpolant(),this._weightInterpolant=G);const K=G.parameterPositions,Y=G.sampleValues;return K[0]=R,Y[0]=t,K[1]=R+e,Y[1]=o,this}}const _controlInterpolantsResultBuffer=new Float32Array(1);class AnimationMixer extends EventDispatcher$1{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const o=e._localRoot||this._root,y=e._clip.tracks,R=y.length,G=e._propertyBindings,K=e._interpolants,Y=o.uuid,Q=this._bindingsByRootAndName;let ee=Q[Y];ee===void 0&&(ee={},Q[Y]=ee);for(let ie=0;ie!==R;++ie){const re=y[ie],se=re.name;let le=ee[se];if(le!==void 0)++le.referenceCount,G[ie]=le;else{if(le=G[ie],le!==void 0){le._cacheIndex===null&&(++le.referenceCount,this._addInactiveBinding(le,Y,se));continue}const ce=t&&t._propertyBindings[ie].binding.parsedPath;le=new PropertyMixer(PropertyBinding.create(o,se,ce),re.ValueTypeName,re.getValueSize()),++le.referenceCount,this._addInactiveBinding(le,Y,se),G[ie]=le}K[ie].resultBuffer=le.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const o=(e._localRoot||this._root).uuid,y=e._clip.uuid,R=this._actionsByClip[y];this._bindAction(e,R&&R.knownActions[0]),this._addInactiveAction(e,y,o)}const t=e._propertyBindings;for(let o=0,y=t.length;o!==y;++o){const R=t[o];R.useCount++===0&&(this._lendBinding(R),R.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let o=0,y=t.length;o!==y;++o){const R=t[o];--R.useCount===0&&(R.restoreOriginalState(),this._takeBackBinding(R))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,o){const y=this._actions,R=this._actionsByClip;let G=R[t];if(G===void 0)G={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,R[t]=G;else{const K=G.knownActions;e._byClipCacheIndex=K.length,K.push(e)}e._cacheIndex=y.length,y.push(e),G.actionByRoot[o]=e}_removeInactiveAction(e){const t=this._actions,o=t[t.length-1],y=e._cacheIndex;o._cacheIndex=y,t[y]=o,t.pop(),e._cacheIndex=null;const R=e._clip.uuid,G=this._actionsByClip,K=G[R],Y=K.knownActions,Q=Y[Y.length-1],ee=e._byClipCacheIndex;Q._byClipCacheIndex=ee,Y[ee]=Q,Y.pop(),e._byClipCacheIndex=null;const ie=K.actionByRoot,re=(e._localRoot||this._root).uuid;delete ie[re],Y.length===0&&delete G[R],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let o=0,y=t.length;o!==y;++o){const R=t[o];--R.referenceCount===0&&this._removeInactiveBinding(R)}}_lendAction(e){const t=this._actions,o=e._cacheIndex,y=this._nActiveActions++,R=t[y];e._cacheIndex=y,t[y]=e,R._cacheIndex=o,t[o]=R}_takeBackAction(e){const t=this._actions,o=e._cacheIndex,y=--this._nActiveActions,R=t[y];e._cacheIndex=y,t[y]=e,R._cacheIndex=o,t[o]=R}_addInactiveBinding(e,t,o){const y=this._bindingsByRootAndName,R=this._bindings;let G=y[t];G===void 0&&(G={},y[t]=G),G[o]=e,e._cacheIndex=R.length,R.push(e)}_removeInactiveBinding(e){const t=this._bindings,o=e.binding,y=o.rootNode.uuid,R=o.path,G=this._bindingsByRootAndName,K=G[y],Y=t[t.length-1],Q=e._cacheIndex;Y._cacheIndex=Q,t[Q]=Y,t.pop(),delete K[R],Object.keys(K).length===0&&delete G[y]}_lendBinding(e){const t=this._bindings,o=e._cacheIndex,y=this._nActiveBindings++,R=t[y];e._cacheIndex=y,t[y]=e,R._cacheIndex=o,t[o]=R}_takeBackBinding(e){const t=this._bindings,o=e._cacheIndex,y=--this._nActiveBindings,R=t[y];e._cacheIndex=y,t[y]=e,R._cacheIndex=o,t[o]=R}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let o=e[t];return o===void 0&&(o=new LinearInterpolant(new Float32Array(2),new Float32Array(2),1,_controlInterpolantsResultBuffer),o.__cacheIndex=t,e[t]=o),o}_takeBackControlInterpolant(e){const t=this._controlInterpolants,o=e.__cacheIndex,y=--this._nActiveControlInterpolants,R=t[y];e.__cacheIndex=y,t[y]=e,R.__cacheIndex=o,t[o]=R}clipAction(e,t,o){const y=t||this._root,R=y.uuid;let G=typeof e=="string"?AnimationClip.findByName(y,e):e;const K=G!==null?G.uuid:e,Y=this._actionsByClip[K];let Q=null;if(o===void 0&&(G!==null?o=G.blendMode:o=NormalAnimationBlendMode),Y!==void 0){const ie=Y.actionByRoot[R];if(ie!==void 0&&ie.blendMode===o)return ie;Q=Y.knownActions[0],G===null&&(G=Q._clip)}if(G===null)return null;const ee=new AnimationAction(this,G,t,o);return this._bindAction(ee,Q),this._addInactiveAction(ee,K,R),ee}existingAction(e,t){const o=t||this._root,y=o.uuid,R=typeof e=="string"?AnimationClip.findByName(o,e):e,G=R?R.uuid:e,K=this._actionsByClip[G];return K!==void 0&&K.actionByRoot[y]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let o=t-1;o>=0;--o)e[o].stop();return this}update(e){e*=this.timeScale;const t=this._actions,o=this._nActiveActions,y=this.time+=e,R=Math.sign(e),G=this._accuIndex^=1;for(let Q=0;Q!==o;++Q)t[Q]._update(y,e,R,G);const K=this._bindings,Y=this._nActiveBindings;for(let Q=0;Q!==Y;++Q)K[Q].apply(G);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,o=e.uuid,y=this._actionsByClip,R=y[o];if(R!==void 0){const G=R.knownActions;for(let K=0,Y=G.length;K!==Y;++K){const Q=G[K];this._deactivateAction(Q);const ee=Q._cacheIndex,ie=t[t.length-1];Q._cacheIndex=null,Q._byClipCacheIndex=null,ie._cacheIndex=ee,t[ee]=ie,t.pop(),this._removeInactiveBindingsForAction(Q)}delete y[o]}}uncacheRoot(e){const t=e.uuid,o=this._actionsByClip;for(const G in o){const K=o[G].actionByRoot,Y=K[t];Y!==void 0&&(this._deactivateAction(Y),this._removeInactiveAction(Y))}const y=this._bindingsByRootAndName,R=y[t];if(R!==void 0)for(const G in R){const K=R[G];K.restoreOriginalState(),this._removeInactiveBinding(K)}}uncacheAction(e,t){const o=this.existingAction(e,t);o!==null&&(this._deactivateAction(o),this._removeInactiveAction(o))}}class RenderTarget3D extends RenderTarget{constructor(e=1,t=1,o=1,y={}){super(e,t,y),this.isRenderTarget3D=!0,this.depth=o,this.texture=new Data3DTexture(null,e,t,o),this.texture.isRenderTargetTexture=!0}}class RenderTargetArray extends RenderTarget{constructor(e=1,t=1,o=1,y={}){super(e,t,y),this.isRenderTargetArray=!0,this.depth=o,this.texture=new DataArrayTexture(null,e,t,o),this.texture.isRenderTargetTexture=!0}}class Uniform{constructor(e){this.value=e}clone(){return new Uniform(this.value.clone===void 0?this.value:this.value.clone())}}let _id$3=0;class UniformsGroup extends EventDispatcher$1{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:_id$3++}),this.name="",this.usage=StaticDrawUsage,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){this.dispatchEvent({type:"dispose"})}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let o=0,y=t.length;o<y;o++){const R=Array.isArray(t[o])?t[o]:[t[o]];for(let G=0;G<R.length;G++)this.uniforms.push(R[G].clone())}return this}clone(){return new this.constructor().copy(this)}}class InstancedInterleavedBuffer extends InterleavedBuffer{constructor(e,t,o=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=o}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class GLBufferAttribute{constructor(e,t,o,y,R){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=o,this.elementSize=y,this.count=R,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const _matrix=new Matrix4;class Raycaster{constructor(e,t,o=0,y=1/0){this.ray=new Ray(e,t),this.near=o,this.far=y,this.camera=null,this.layers=new Layers,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return _matrix.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(_matrix),this}intersectObject(e,t=!0,o=[]){return intersect(e,this,o,t),o.sort(ascSort),o}intersectObjects(e,t=!0,o=[]){for(let y=0,R=e.length;y<R;y++)intersect(e[y],this,o,t);return o.sort(ascSort),o}}function ascSort(r,e){return r.distance-e.distance}function intersect(r,e,t,o){let y=!0;if(r.layers.test(e.layers)&&r.raycast(e,t)===!1&&(y=!1),y===!0&&o===!0){const R=r.children;for(let G=0,K=R.length;G<K;G++)intersect(R[G],e,t,!0)}}class Spherical{constructor(e=1,t=0,o=0){this.radius=e,this.phi=t,this.theta=o}set(e,t,o){return this.radius=e,this.phi=t,this.theta=o,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=clamp$1(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,o){return this.radius=Math.sqrt(e*e+t*t+o*o),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,o),this.phi=Math.acos(clamp$1(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class Cylindrical{constructor(e=1,t=0,o=0){this.radius=e,this.theta=t,this.y=o}set(e,t,o){return this.radius=e,this.theta=t,this.y=o,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,o){return this.radius=Math.sqrt(e*e+o*o),this.theta=Math.atan2(e,o),this.y=t,this}clone(){return new this.constructor().copy(this)}}class Matrix2{constructor(e,t,o,y){Matrix2.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,t,o,y)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let o=0;o<4;o++)this.elements[o]=e[o+t];return this}set(e,t,o,y){const R=this.elements;return R[0]=e,R[2]=t,R[1]=o,R[3]=y,this}}const _vector$4=new Vector2;class Box2{constructor(e=new Vector2(1/0,1/0),t=new Vector2(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,o=e.length;t<o;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const o=_vector$4.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(o),this.max.copy(e).add(o),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,_vector$4).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const _startP=new Vector3,_startEnd=new Vector3;class Line3{constructor(e=new Vector3,t=new Vector3){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){_startP.subVectors(e,this.start),_startEnd.subVectors(this.end,this.start);const o=_startEnd.dot(_startEnd);let R=_startEnd.dot(_startP)/o;return t&&(R=clamp$1(R,0,1)),R}closestPointToPoint(e,t,o){const y=this.closestPointToPointParameter(e,t);return this.delta(o).multiplyScalar(y).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const _vector$3=new Vector3;class SpotLightHelper extends Object3D{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const o=new BufferGeometry,y=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let G=0,K=1,Y=32;G<Y;G++,K++){const Q=G/Y*Math.PI*2,ee=K/Y*Math.PI*2;y.push(Math.cos(Q),Math.sin(Q),1,Math.cos(ee),Math.sin(ee),1)}o.setAttribute("position",new Float32BufferAttribute(y,3));const R=new LineBasicMaterial({fog:!1,toneMapped:!1});this.cone=new LineSegments(o,R),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),_vector$3.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(_vector$3),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const _vector$2=new Vector3,_boneMatrix=new Matrix4,_matrixWorldInv=new Matrix4;class SkeletonHelper extends LineSegments{constructor(e){const t=getBoneList(e),o=new BufferGeometry,y=[],R=[],G=new Color(0,0,1),K=new Color(0,1,0);for(let Q=0;Q<t.length;Q++){const ee=t[Q];ee.parent&&ee.parent.isBone&&(y.push(0,0,0),y.push(0,0,0),R.push(G.r,G.g,G.b),R.push(K.r,K.g,K.b))}o.setAttribute("position",new Float32BufferAttribute(y,3)),o.setAttribute("color",new Float32BufferAttribute(R,3));const Y=new LineBasicMaterial({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(o,Y),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,o=this.geometry,y=o.getAttribute("position");_matrixWorldInv.copy(this.root.matrixWorld).invert();for(let R=0,G=0;R<t.length;R++){const K=t[R];K.parent&&K.parent.isBone&&(_boneMatrix.multiplyMatrices(_matrixWorldInv,K.matrixWorld),_vector$2.setFromMatrixPosition(_boneMatrix),y.setXYZ(G,_vector$2.x,_vector$2.y,_vector$2.z),_boneMatrix.multiplyMatrices(_matrixWorldInv,K.parent.matrixWorld),_vector$2.setFromMatrixPosition(_boneMatrix),y.setXYZ(G+1,_vector$2.x,_vector$2.y,_vector$2.z),G+=2)}o.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function getBoneList(r){const e=[];r.isBone===!0&&e.push(r);for(let t=0;t<r.children.length;t++)e.push(...getBoneList(r.children[t]));return e}class PointLightHelper extends Mesh{constructor(e,t,o){const y=new SphereGeometry(t,4,2),R=new MeshBasicMaterial({wireframe:!0,fog:!1,toneMapped:!1});super(y,R),this.light=e,this.color=o,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const _vector$1=new Vector3,_color1=new Color,_color2=new Color;class HemisphereLightHelper extends Object3D{constructor(e,t,o){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=o,this.type="HemisphereLightHelper";const y=new OctahedronGeometry(t);y.rotateY(Math.PI*.5),this.material=new MeshBasicMaterial({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const R=y.getAttribute("position"),G=new Float32Array(R.count*3);y.setAttribute("color",new BufferAttribute(G,3)),this.add(new Mesh(y,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");_color1.copy(this.light.color),_color2.copy(this.light.groundColor);for(let o=0,y=t.count;o<y;o++){const R=o<y/2?_color1:_color2;t.setXYZ(o,R.r,R.g,R.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(_vector$1.setFromMatrixPosition(this.light.matrixWorld).negate())}}class GridHelper extends LineSegments{constructor(e=10,t=10,o=4473924,y=8947848){o=new Color(o),y=new Color(y);const R=t/2,G=e/t,K=e/2,Y=[],Q=[];for(let re=0,se=0,le=-K;re<=t;re++,le+=G){Y.push(-K,0,le,K,0,le),Y.push(le,0,-K,le,0,K);const ce=re===R?o:y;ce.toArray(Q,se),se+=3,ce.toArray(Q,se),se+=3,ce.toArray(Q,se),se+=3,ce.toArray(Q,se),se+=3}const ee=new BufferGeometry;ee.setAttribute("position",new Float32BufferAttribute(Y,3)),ee.setAttribute("color",new Float32BufferAttribute(Q,3));const ie=new LineBasicMaterial({vertexColors:!0,toneMapped:!1});super(ee,ie),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class PolarGridHelper extends LineSegments{constructor(e=10,t=16,o=8,y=64,R=4473924,G=8947848){R=new Color(R),G=new Color(G);const K=[],Y=[];if(t>1)for(let ie=0;ie<t;ie++){const re=ie/t*(Math.PI*2),se=Math.sin(re)*e,le=Math.cos(re)*e;K.push(0,0,0),K.push(se,0,le);const ce=ie&1?R:G;Y.push(ce.r,ce.g,ce.b),Y.push(ce.r,ce.g,ce.b)}for(let ie=0;ie<o;ie++){const re=ie&1?R:G,se=e-e/o*ie;for(let le=0;le<y;le++){let ce=le/y*(Math.PI*2),oe=Math.sin(ce)*se,ue=Math.cos(ce)*se;K.push(oe,0,ue),Y.push(re.r,re.g,re.b),ce=(le+1)/y*(Math.PI*2),oe=Math.sin(ce)*se,ue=Math.cos(ce)*se,K.push(oe,0,ue),Y.push(re.r,re.g,re.b)}}const Q=new BufferGeometry;Q.setAttribute("position",new Float32BufferAttribute(K,3)),Q.setAttribute("color",new Float32BufferAttribute(Y,3));const ee=new LineBasicMaterial({vertexColors:!0,toneMapped:!1});super(Q,ee),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const _v1=new Vector3,_v2=new Vector3,_v3=new Vector3;class DirectionalLightHelper extends Object3D{constructor(e,t,o){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=o,this.type="DirectionalLightHelper",t===void 0&&(t=1);let y=new BufferGeometry;y.setAttribute("position",new Float32BufferAttribute([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const R=new LineBasicMaterial({fog:!1,toneMapped:!1});this.lightPlane=new Line(y,R),this.add(this.lightPlane),y=new BufferGeometry,y.setAttribute("position",new Float32BufferAttribute([0,0,0,0,0,1],3)),this.targetLine=new Line(y,R),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),_v1.setFromMatrixPosition(this.light.matrixWorld),_v2.setFromMatrixPosition(this.light.target.matrixWorld),_v3.subVectors(_v2,_v1),this.lightPlane.lookAt(_v2),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(_v2),this.targetLine.scale.z=_v3.length()}}const _vector=new Vector3,_camera=new Camera;class CameraHelper extends LineSegments{constructor(e){const t=new BufferGeometry,o=new LineBasicMaterial({color:16777215,vertexColors:!0,toneMapped:!1}),y=[],R=[],G={};K("n1","n2"),K("n2","n4"),K("n4","n3"),K("n3","n1"),K("f1","f2"),K("f2","f4"),K("f4","f3"),K("f3","f1"),K("n1","f1"),K("n2","f2"),K("n3","f3"),K("n4","f4"),K("p","n1"),K("p","n2"),K("p","n3"),K("p","n4"),K("u1","u2"),K("u2","u3"),K("u3","u1"),K("c","t"),K("p","c"),K("cn1","cn2"),K("cn3","cn4"),K("cf1","cf2"),K("cf3","cf4");function K(le,ce){Y(le),Y(ce)}function Y(le){y.push(0,0,0),R.push(0,0,0),G[le]===void 0&&(G[le]=[]),G[le].push(y.length/3-1)}t.setAttribute("position",new Float32BufferAttribute(y,3)),t.setAttribute("color",new Float32BufferAttribute(R,3)),super(t,o),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=G,this.update();const Q=new Color(16755200),ee=new Color(16711680),ie=new Color(43775),re=new Color(16777215),se=new Color(3355443);this.setColors(Q,ee,ie,re,se)}setColors(e,t,o,y,R){const K=this.geometry.getAttribute("color");K.setXYZ(0,e.r,e.g,e.b),K.setXYZ(1,e.r,e.g,e.b),K.setXYZ(2,e.r,e.g,e.b),K.setXYZ(3,e.r,e.g,e.b),K.setXYZ(4,e.r,e.g,e.b),K.setXYZ(5,e.r,e.g,e.b),K.setXYZ(6,e.r,e.g,e.b),K.setXYZ(7,e.r,e.g,e.b),K.setXYZ(8,e.r,e.g,e.b),K.setXYZ(9,e.r,e.g,e.b),K.setXYZ(10,e.r,e.g,e.b),K.setXYZ(11,e.r,e.g,e.b),K.setXYZ(12,e.r,e.g,e.b),K.setXYZ(13,e.r,e.g,e.b),K.setXYZ(14,e.r,e.g,e.b),K.setXYZ(15,e.r,e.g,e.b),K.setXYZ(16,e.r,e.g,e.b),K.setXYZ(17,e.r,e.g,e.b),K.setXYZ(18,e.r,e.g,e.b),K.setXYZ(19,e.r,e.g,e.b),K.setXYZ(20,e.r,e.g,e.b),K.setXYZ(21,e.r,e.g,e.b),K.setXYZ(22,e.r,e.g,e.b),K.setXYZ(23,e.r,e.g,e.b),K.setXYZ(24,t.r,t.g,t.b),K.setXYZ(25,t.r,t.g,t.b),K.setXYZ(26,t.r,t.g,t.b),K.setXYZ(27,t.r,t.g,t.b),K.setXYZ(28,t.r,t.g,t.b),K.setXYZ(29,t.r,t.g,t.b),K.setXYZ(30,t.r,t.g,t.b),K.setXYZ(31,t.r,t.g,t.b),K.setXYZ(32,o.r,o.g,o.b),K.setXYZ(33,o.r,o.g,o.b),K.setXYZ(34,o.r,o.g,o.b),K.setXYZ(35,o.r,o.g,o.b),K.setXYZ(36,o.r,o.g,o.b),K.setXYZ(37,o.r,o.g,o.b),K.setXYZ(38,y.r,y.g,y.b),K.setXYZ(39,y.r,y.g,y.b),K.setXYZ(40,R.r,R.g,R.b),K.setXYZ(41,R.r,R.g,R.b),K.setXYZ(42,R.r,R.g,R.b),K.setXYZ(43,R.r,R.g,R.b),K.setXYZ(44,R.r,R.g,R.b),K.setXYZ(45,R.r,R.g,R.b),K.setXYZ(46,R.r,R.g,R.b),K.setXYZ(47,R.r,R.g,R.b),K.setXYZ(48,R.r,R.g,R.b),K.setXYZ(49,R.r,R.g,R.b),K.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,o=1,y=1;_camera.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse);const R=this.camera.coordinateSystem===WebGLCoordinateSystem?-1:0;setPoint("c",t,e,_camera,0,0,R),setPoint("t",t,e,_camera,0,0,1),setPoint("n1",t,e,_camera,-1,-1,R),setPoint("n2",t,e,_camera,o,-1,R),setPoint("n3",t,e,_camera,-1,y,R),setPoint("n4",t,e,_camera,o,y,R),setPoint("f1",t,e,_camera,-1,-1,1),setPoint("f2",t,e,_camera,o,-1,1),setPoint("f3",t,e,_camera,-1,y,1),setPoint("f4",t,e,_camera,o,y,1),setPoint("u1",t,e,_camera,o*.7,y*1.1,R),setPoint("u2",t,e,_camera,-1*.7,y*1.1,R),setPoint("u3",t,e,_camera,0,y*2,R),setPoint("cf1",t,e,_camera,-1,0,1),setPoint("cf2",t,e,_camera,o,0,1),setPoint("cf3",t,e,_camera,0,-1,1),setPoint("cf4",t,e,_camera,0,y,1),setPoint("cn1",t,e,_camera,-1,0,R),setPoint("cn2",t,e,_camera,o,0,R),setPoint("cn3",t,e,_camera,0,-1,R),setPoint("cn4",t,e,_camera,0,y,R),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function setPoint(r,e,t,o,y,R,G){_vector.set(y,R,G).unproject(o);const K=e[r];if(K!==void 0){const Y=t.getAttribute("position");for(let Q=0,ee=K.length;Q<ee;Q++)Y.setXYZ(K[Q],_vector.x,_vector.y,_vector.z)}}const _box=new Box3;class BoxHelper extends LineSegments{constructor(e,t=16776960){const o=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),y=new Float32Array(8*3),R=new BufferGeometry;R.setIndex(new BufferAttribute(o,1)),R.setAttribute("position",new BufferAttribute(y,3)),super(R,new LineBasicMaterial({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(){if(this.object!==void 0&&_box.setFromObject(this.object),_box.isEmpty())return;const e=_box.min,t=_box.max,o=this.geometry.attributes.position,y=o.array;y[0]=t.x,y[1]=t.y,y[2]=t.z,y[3]=e.x,y[4]=t.y,y[5]=t.z,y[6]=e.x,y[7]=e.y,y[8]=t.z,y[9]=t.x,y[10]=e.y,y[11]=t.z,y[12]=t.x,y[13]=t.y,y[14]=e.z,y[15]=e.x,y[16]=t.y,y[17]=e.z,y[18]=e.x,y[19]=e.y,y[20]=e.z,y[21]=t.x,y[22]=e.y,y[23]=e.z,o.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Box3Helper extends LineSegments{constructor(e,t=16776960){const o=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),y=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],R=new BufferGeometry;R.setIndex(new BufferAttribute(o,1)),R.setAttribute("position",new Float32BufferAttribute(y,3)),super(R,new LineBasicMaterial({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class PlaneHelper extends Line{constructor(e,t=1,o=16776960){const y=o,R=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],G=new BufferGeometry;G.setAttribute("position",new Float32BufferAttribute(R,3)),G.computeBoundingSphere(),super(G,new LineBasicMaterial({color:y,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const K=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],Y=new BufferGeometry;Y.setAttribute("position",new Float32BufferAttribute(K,3)),Y.computeBoundingSphere(),this.add(new Mesh(Y,new MeshBasicMaterial({color:y,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const _axis=new Vector3;let _lineGeometry,_coneGeometry;class ArrowHelper extends Object3D{constructor(e=new Vector3(0,0,1),t=new Vector3(0,0,0),o=1,y=16776960,R=o*.2,G=R*.2){super(),this.type="ArrowHelper",_lineGeometry===void 0&&(_lineGeometry=new BufferGeometry,_lineGeometry.setAttribute("position",new Float32BufferAttribute([0,0,0,0,1,0],3)),_coneGeometry=new CylinderGeometry(0,.5,1,5,1),_coneGeometry.translate(0,-.5,0)),this.position.copy(t),this.line=new Line(_lineGeometry,new LineBasicMaterial({color:y,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Mesh(_coneGeometry,new MeshBasicMaterial({color:y,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(o,R,G)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{_axis.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(_axis,t)}}setLength(e,t=e*.2,o=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(o,t,o),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class AxesHelper extends LineSegments{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],o=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],y=new BufferGeometry;y.setAttribute("position",new Float32BufferAttribute(t,3)),y.setAttribute("color",new Float32BufferAttribute(o,3));const R=new LineBasicMaterial({vertexColors:!0,toneMapped:!1});super(y,R),this.type="AxesHelper"}setColors(e,t,o){const y=new Color,R=this.geometry.attributes.color.array;return y.set(e),y.toArray(R,0),y.toArray(R,3),y.set(t),y.toArray(R,6),y.toArray(R,9),y.set(o),y.toArray(R,12),y.toArray(R,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class ShapePath{constructor(){this.type="ShapePath",this.color=new Color,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new Path,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,o,y){return this.currentPath.quadraticCurveTo(e,t,o,y),this}bezierCurveTo(e,t,o,y,R,G){return this.currentPath.bezierCurveTo(e,t,o,y,R,G),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(ue){const ge=[];for(let ve=0,_e=ue.length;ve<_e;ve++){const be=ue[ve],Re=new Shape;Re.curves=be.curves,ge.push(Re)}return ge}function o(ue,ge){const ve=ge.length;let _e=!1;for(let be=ve-1,Re=0;Re<ve;be=Re++){let Se=ge[be],Ee=ge[Re],ye=Ee.x-Se.x,de=Ee.y-Se.y;if(Math.abs(de)>Number.EPSILON){if(de<0&&(Se=ge[Re],ye=-ye,Ee=ge[be],de=-de),ue.y<Se.y||ue.y>Ee.y)continue;if(ue.y===Se.y){if(ue.x===Se.x)return!0}else{const Me=de*(ue.x-Se.x)-ye*(ue.y-Se.y);if(Me===0)return!0;if(Me<0)continue;_e=!_e}}else{if(ue.y!==Se.y)continue;if(Ee.x<=ue.x&&ue.x<=Se.x||Se.x<=ue.x&&ue.x<=Ee.x)return!0}}return _e}const y=ShapeUtils.isClockWise,R=this.subPaths;if(R.length===0)return[];let G,K,Y;const Q=[];if(R.length===1)return K=R[0],Y=new Shape,Y.curves=K.curves,Q.push(Y),Q;let ee=!y(R[0].getPoints());ee=e?!ee:ee;const ie=[],re=[];let se=[],le=0,ce;re[le]=void 0,se[le]=[];for(let ue=0,ge=R.length;ue<ge;ue++)K=R[ue],ce=K.getPoints(),G=y(ce),G=e?!G:G,G?(!ee&&re[le]&&le++,re[le]={s:new Shape,p:ce},re[le].s.curves=K.curves,ee&&le++,se[le]=[]):se[le].push({h:K,p:ce[0]});if(!re[0])return t(R);if(re.length>1){let ue=!1,ge=0;for(let ve=0,_e=re.length;ve<_e;ve++)ie[ve]=[];for(let ve=0,_e=re.length;ve<_e;ve++){const be=se[ve];for(let Re=0;Re<be.length;Re++){const Se=be[Re];let Ee=!0;for(let ye=0;ye<re.length;ye++)o(Se.p,re[ye].p)&&(ve!==ye&&ge++,Ee?(Ee=!1,ie[ye].push(Se)):ue=!0);Ee&&ie[ve].push(Se)}}ge>0&&ue===!1&&(se=ie)}let oe;for(let ue=0,ge=re.length;ue<ge;ue++){Y=re[ue].s,Q.push(Y),oe=se[ue];for(let ve=0,_e=oe.length;ve<_e;ve++)Y.holes.push(oe[ve].h)}return Q}}class Controls extends EventDispatcher$1{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(e){if(e===void 0){console.warn("THREE.Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=e}disconnect(){}dispose(){}update(){}}function contain(r,e){const t=r.image&&r.image.width?r.image.width/r.image.height:1;return t>e?(r.repeat.x=1,r.repeat.y=t/e,r.offset.x=0,r.offset.y=(1-r.repeat.y)/2):(r.repeat.x=e/t,r.repeat.y=1,r.offset.x=(1-r.repeat.x)/2,r.offset.y=0),r}function cover(r,e){const t=r.image&&r.image.width?r.image.width/r.image.height:1;return t>e?(r.repeat.x=e/t,r.repeat.y=1,r.offset.x=(1-r.repeat.x)/2,r.offset.y=0):(r.repeat.x=1,r.repeat.y=t/e,r.offset.x=0,r.offset.y=(1-r.repeat.y)/2),r}function fill(r){return r.repeat.x=1,r.repeat.y=1,r.offset.x=0,r.offset.y=0,r}function getByteLength(r,e,t,o){const y=getTextureTypeByteLength(o);switch(t){case AlphaFormat:return r*e;case LuminanceFormat:return r*e;case LuminanceAlphaFormat:return r*e*2;case RedFormat:return r*e/y.components*y.byteLength;case RedIntegerFormat:return r*e/y.components*y.byteLength;case RGFormat:return r*e*2/y.components*y.byteLength;case RGIntegerFormat:return r*e*2/y.components*y.byteLength;case RGBFormat:return r*e*3/y.components*y.byteLength;case RGBAFormat:return r*e*4/y.components*y.byteLength;case RGBAIntegerFormat:return r*e*4/y.components*y.byteLength;case RGB_S3TC_DXT1_Format:case RGBA_S3TC_DXT1_Format:return Math.floor((r+3)/4)*Math.floor((e+3)/4)*8;case RGBA_S3TC_DXT3_Format:case RGBA_S3TC_DXT5_Format:return Math.floor((r+3)/4)*Math.floor((e+3)/4)*16;case RGB_PVRTC_2BPPV1_Format:case RGBA_PVRTC_2BPPV1_Format:return Math.max(r,16)*Math.max(e,8)/4;case RGB_PVRTC_4BPPV1_Format:case RGBA_PVRTC_4BPPV1_Format:return Math.max(r,8)*Math.max(e,8)/2;case RGB_ETC1_Format:case RGB_ETC2_Format:return Math.floor((r+3)/4)*Math.floor((e+3)/4)*8;case RGBA_ETC2_EAC_Format:return Math.floor((r+3)/4)*Math.floor((e+3)/4)*16;case RGBA_ASTC_4x4_Format:return Math.floor((r+3)/4)*Math.floor((e+3)/4)*16;case RGBA_ASTC_5x4_Format:return Math.floor((r+4)/5)*Math.floor((e+3)/4)*16;case RGBA_ASTC_5x5_Format:return Math.floor((r+4)/5)*Math.floor((e+4)/5)*16;case RGBA_ASTC_6x5_Format:return Math.floor((r+5)/6)*Math.floor((e+4)/5)*16;case RGBA_ASTC_6x6_Format:return Math.floor((r+5)/6)*Math.floor((e+5)/6)*16;case RGBA_ASTC_8x5_Format:return Math.floor((r+7)/8)*Math.floor((e+4)/5)*16;case RGBA_ASTC_8x6_Format:return Math.floor((r+7)/8)*Math.floor((e+5)/6)*16;case RGBA_ASTC_8x8_Format:return Math.floor((r+7)/8)*Math.floor((e+7)/8)*16;case RGBA_ASTC_10x5_Format:return Math.floor((r+9)/10)*Math.floor((e+4)/5)*16;case RGBA_ASTC_10x6_Format:return Math.floor((r+9)/10)*Math.floor((e+5)/6)*16;case RGBA_ASTC_10x8_Format:return Math.floor((r+9)/10)*Math.floor((e+7)/8)*16;case RGBA_ASTC_10x10_Format:return Math.floor((r+9)/10)*Math.floor((e+9)/10)*16;case RGBA_ASTC_12x10_Format:return Math.floor((r+11)/12)*Math.floor((e+9)/10)*16;case RGBA_ASTC_12x12_Format:return Math.floor((r+11)/12)*Math.floor((e+11)/12)*16;case RGBA_BPTC_Format:case RGB_BPTC_SIGNED_Format:case RGB_BPTC_UNSIGNED_Format:return Math.ceil(r/4)*Math.ceil(e/4)*16;case RED_RGTC1_Format:case SIGNED_RED_RGTC1_Format:return Math.ceil(r/4)*Math.ceil(e/4)*8;case RED_GREEN_RGTC2_Format:case SIGNED_RED_GREEN_RGTC2_Format:return Math.ceil(r/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function getTextureTypeByteLength(r){switch(r){case UnsignedByteType:case ByteType:return{byteLength:1,components:1};case UnsignedShortType:case ShortType:case HalfFloatType:return{byteLength:2,components:1};case UnsignedShort4444Type:case UnsignedShort5551Type:return{byteLength:2,components:4};case UnsignedIntType:case IntType:case FloatType:return{byteLength:4,components:1};case UnsignedInt5999Type:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${r}.`)}class TextureUtils{static contain(e,t){return contain(e,t)}static cover(e,t){return cover(e,t)}static fill(e){return fill(e)}static getByteLength(e,t,o,y){return getByteLength(e,t,o,y)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:REVISION}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=REVISION);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function WebGLAnimation(){let r=null,e=!1,t=null,o=null;function y(R,G){t(R,G),o=r.requestAnimationFrame(y)}return{start:function(){e!==!0&&t!==null&&(o=r.requestAnimationFrame(y),e=!0)},stop:function(){r.cancelAnimationFrame(o),e=!1},setAnimationLoop:function(R){t=R},setContext:function(R){r=R}}}function WebGLAttributes(r){const e=new WeakMap;function t(K,Y){const Q=K.array,ee=K.usage,ie=Q.byteLength,re=r.createBuffer();r.bindBuffer(Y,re),r.bufferData(Y,Q,ee),K.onUploadCallback();let se;if(Q instanceof Float32Array)se=r.FLOAT;else if(Q instanceof Uint16Array)K.isFloat16BufferAttribute?se=r.HALF_FLOAT:se=r.UNSIGNED_SHORT;else if(Q instanceof Int16Array)se=r.SHORT;else if(Q instanceof Uint32Array)se=r.UNSIGNED_INT;else if(Q instanceof Int32Array)se=r.INT;else if(Q instanceof Int8Array)se=r.BYTE;else if(Q instanceof Uint8Array)se=r.UNSIGNED_BYTE;else if(Q instanceof Uint8ClampedArray)se=r.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+Q);return{buffer:re,type:se,bytesPerElement:Q.BYTES_PER_ELEMENT,version:K.version,size:ie}}function o(K,Y,Q){const ee=Y.array,ie=Y.updateRanges;if(r.bindBuffer(Q,K),ie.length===0)r.bufferSubData(Q,0,ee);else{ie.sort((se,le)=>se.start-le.start);let re=0;for(let se=1;se<ie.length;se++){const le=ie[re],ce=ie[se];ce.start<=le.start+le.count+1?le.count=Math.max(le.count,ce.start+ce.count-le.start):(++re,ie[re]=ce)}ie.length=re+1;for(let se=0,le=ie.length;se<le;se++){const ce=ie[se];r.bufferSubData(Q,ce.start*ee.BYTES_PER_ELEMENT,ee,ce.start,ce.count)}Y.clearUpdateRanges()}Y.onUploadCallback()}function y(K){return K.isInterleavedBufferAttribute&&(K=K.data),e.get(K)}function R(K){K.isInterleavedBufferAttribute&&(K=K.data);const Y=e.get(K);Y&&(r.deleteBuffer(Y.buffer),e.delete(K))}function G(K,Y){if(K.isInterleavedBufferAttribute&&(K=K.data),K.isGLBufferAttribute){const ee=e.get(K);(!ee||ee.version<K.version)&&e.set(K,{buffer:K.buffer,type:K.type,bytesPerElement:K.elementSize,version:K.version});return}const Q=e.get(K);if(Q===void 0)e.set(K,t(K,Y));else if(Q.version<K.version){if(Q.size!==K.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");o(Q.buffer,K,Y),Q.version=K.version}}return{get:y,remove:R,update:G}}var alphahash_fragment=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,alphahash_pars_fragment=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,alphamap_fragment=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,alphamap_pars_fragment=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,alphatest_fragment=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,alphatest_pars_fragment=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,aomap_fragment=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,aomap_pars_fragment=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,batching_pars_vertex=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,batching_vertex=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,begin_vertex=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,beginnormal_vertex=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,bsdfs=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,iridescence_fragment=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,bumpmap_pars_fragment=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,clipping_planes_fragment=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,clipping_planes_pars_fragment=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,clipping_planes_pars_vertex=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,clipping_planes_vertex=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,color_fragment=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,color_pars_fragment=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,color_pars_vertex=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,color_vertex=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,common=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,cube_uv_reflection_fragment=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,defaultnormal_vertex=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,displacementmap_pars_vertex=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,displacementmap_vertex=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,emissivemap_fragment=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,emissivemap_pars_fragment=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,colorspace_fragment="gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,envmap_fragment=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,envmap_common_pars_fragment=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,envmap_pars_fragment=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,envmap_pars_vertex=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,envmap_vertex=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,fog_vertex=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,fog_pars_vertex=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,fog_fragment=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,fog_pars_fragment=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,gradientmap_pars_fragment=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,lightmap_pars_fragment=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,lights_lambert_fragment=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,lights_lambert_pars_fragment=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,lights_pars_begin=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,envmap_physical_pars_fragment=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,lights_toon_fragment=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,lights_toon_pars_fragment=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,lights_phong_fragment=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,lights_phong_pars_fragment=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,lights_physical_fragment=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,lights_physical_pars_fragment=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,lights_fragment_begin=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,lights_fragment_maps=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,lights_fragment_end=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,logdepthbuf_fragment=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,logdepthbuf_pars_fragment=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,logdepthbuf_pars_vertex=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,logdepthbuf_vertex=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,map_fragment=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,map_pars_fragment=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,map_particle_fragment=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,map_particle_pars_fragment=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,metalnessmap_fragment=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,metalnessmap_pars_fragment=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,morphinstance_vertex=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,morphcolor_vertex=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,morphnormal_vertex=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,morphtarget_pars_vertex=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,morphtarget_vertex=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,normal_fragment_begin=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,normal_fragment_maps=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,normal_pars_fragment=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,normal_pars_vertex=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,normal_vertex=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,normalmap_pars_fragment=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,clearcoat_normal_fragment_begin=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,clearcoat_normal_fragment_maps=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,clearcoat_pars_fragment=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,iridescence_pars_fragment=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,opaque_fragment=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,packing=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,premultiplied_alpha_fragment=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,project_vertex=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,dithering_fragment=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,dithering_pars_fragment=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,roughnessmap_fragment=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,roughnessmap_pars_fragment=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,shadowmap_pars_fragment=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,shadowmap_pars_vertex=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,shadowmap_vertex=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,shadowmask_pars_fragment=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,skinbase_vertex=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,skinning_pars_vertex=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,skinning_vertex=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,skinnormal_vertex=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,specularmap_fragment=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,specularmap_pars_fragment=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,tonemapping_fragment=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,tonemapping_pars_fragment=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,transmission_fragment=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,transmission_pars_fragment=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,uv_pars_fragment=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,uv_pars_vertex=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,uv_vertex=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,worldpos_vertex=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const vertex$h=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,fragment$h=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,vertex$g=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,fragment$g=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,vertex$f=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,fragment$f=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,vertex$e=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,fragment$e=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,vertex$d=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,fragment$d=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,vertex$c=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,fragment$c=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,vertex$b=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,fragment$b=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,vertex$a=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,fragment$a=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$9=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$9=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$8=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,fragment$8=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$7=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,fragment$7=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,vertex$6=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$6=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$5=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,fragment$5=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$4=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$4=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$3=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,fragment$3=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,vertex$2=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$2=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,vertex$1=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,fragment$1=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,ShaderChunk={alphahash_fragment,alphahash_pars_fragment,alphamap_fragment,alphamap_pars_fragment,alphatest_fragment,alphatest_pars_fragment,aomap_fragment,aomap_pars_fragment,batching_pars_vertex,batching_vertex,begin_vertex,beginnormal_vertex,bsdfs,iridescence_fragment,bumpmap_pars_fragment,clipping_planes_fragment,clipping_planes_pars_fragment,clipping_planes_pars_vertex,clipping_planes_vertex,color_fragment,color_pars_fragment,color_pars_vertex,color_vertex,common,cube_uv_reflection_fragment,defaultnormal_vertex,displacementmap_pars_vertex,displacementmap_vertex,emissivemap_fragment,emissivemap_pars_fragment,colorspace_fragment,colorspace_pars_fragment,envmap_fragment,envmap_common_pars_fragment,envmap_pars_fragment,envmap_pars_vertex,envmap_physical_pars_fragment,envmap_vertex,fog_vertex,fog_pars_vertex,fog_fragment,fog_pars_fragment,gradientmap_pars_fragment,lightmap_pars_fragment,lights_lambert_fragment,lights_lambert_pars_fragment,lights_pars_begin,lights_toon_fragment,lights_toon_pars_fragment,lights_phong_fragment,lights_phong_pars_fragment,lights_physical_fragment,lights_physical_pars_fragment,lights_fragment_begin,lights_fragment_maps,lights_fragment_end,logdepthbuf_fragment,logdepthbuf_pars_fragment,logdepthbuf_pars_vertex,logdepthbuf_vertex,map_fragment,map_pars_fragment,map_particle_fragment,map_particle_pars_fragment,metalnessmap_fragment,metalnessmap_pars_fragment,morphinstance_vertex,morphcolor_vertex,morphnormal_vertex,morphtarget_pars_vertex,morphtarget_vertex,normal_fragment_begin,normal_fragment_maps,normal_pars_fragment,normal_pars_vertex,normal_vertex,normalmap_pars_fragment,clearcoat_normal_fragment_begin,clearcoat_normal_fragment_maps,clearcoat_pars_fragment,iridescence_pars_fragment,opaque_fragment,packing,premultiplied_alpha_fragment,project_vertex,dithering_fragment,dithering_pars_fragment,roughnessmap_fragment,roughnessmap_pars_fragment,shadowmap_pars_fragment,shadowmap_pars_vertex,shadowmap_vertex,shadowmask_pars_fragment,skinbase_vertex,skinning_pars_vertex,skinning_vertex,skinnormal_vertex,specularmap_fragment,specularmap_pars_fragment,tonemapping_fragment,tonemapping_pars_fragment,transmission_fragment,transmission_pars_fragment,uv_pars_fragment,uv_pars_vertex,uv_vertex,worldpos_vertex,background_vert:vertex$h,background_frag:fragment$h,backgroundCube_vert:vertex$g,backgroundCube_frag:fragment$g,cube_vert:vertex$f,cube_frag:fragment$f,depth_vert:vertex$e,depth_frag:fragment$e,distanceRGBA_vert:vertex$d,distanceRGBA_frag:fragment$d,equirect_vert:vertex$c,equirect_frag:fragment$c,linedashed_vert:vertex$b,linedashed_frag:fragment$b,meshbasic_vert:vertex$a,meshbasic_frag:fragment$a,meshlambert_vert:vertex$9,meshlambert_frag:fragment$9,meshmatcap_vert:vertex$8,meshmatcap_frag:fragment$8,meshnormal_vert:vertex$7,meshnormal_frag:fragment$7,meshphong_vert:vertex$6,meshphong_frag:fragment$6,meshphysical_vert:vertex$5,meshphysical_frag:fragment$5,meshtoon_vert:vertex$4,meshtoon_frag:fragment$4,points_vert:vertex$3,points_frag:fragment$3,shadow_vert:vertex$2,shadow_frag:fragment$2,sprite_vert:vertex$1,sprite_frag:fragment$1},UniformsLib={common:{diffuse:{value:new Color(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Matrix3},alphaMap:{value:null},alphaMapTransform:{value:new Matrix3},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Matrix3}},envmap:{envMap:{value:null},envMapRotation:{value:new Matrix3},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Matrix3}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Matrix3}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Matrix3},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Matrix3},normalScale:{value:new Vector2(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Matrix3},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Matrix3}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Matrix3}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Matrix3}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Color(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Color(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Matrix3},alphaTest:{value:0},uvTransform:{value:new Matrix3}},sprite:{diffuse:{value:new Color(16777215)},opacity:{value:1},center:{value:new Vector2(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Matrix3},alphaMap:{value:null},alphaMapTransform:{value:new Matrix3},alphaTest:{value:0}}},ShaderLib={basic:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.fog]),vertexShader:ShaderChunk.meshbasic_vert,fragmentShader:ShaderChunk.meshbasic_frag},lambert:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)}}]),vertexShader:ShaderChunk.meshlambert_vert,fragmentShader:ShaderChunk.meshlambert_frag},phong:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)},specular:{value:new Color(1118481)},shininess:{value:30}}]),vertexShader:ShaderChunk.meshphong_vert,fragmentShader:ShaderChunk.meshphong_frag},standard:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.roughnessmap,UniformsLib.metalnessmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ShaderChunk.meshphysical_vert,fragmentShader:ShaderChunk.meshphysical_frag},toon:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.gradientmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)}}]),vertexShader:ShaderChunk.meshtoon_vert,fragmentShader:ShaderChunk.meshtoon_frag},matcap:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,{matcap:{value:null}}]),vertexShader:ShaderChunk.meshmatcap_vert,fragmentShader:ShaderChunk.meshmatcap_frag},points:{uniforms:mergeUniforms([UniformsLib.points,UniformsLib.fog]),vertexShader:ShaderChunk.points_vert,fragmentShader:ShaderChunk.points_frag},dashed:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ShaderChunk.linedashed_vert,fragmentShader:ShaderChunk.linedashed_frag},depth:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.displacementmap]),vertexShader:ShaderChunk.depth_vert,fragmentShader:ShaderChunk.depth_frag},normal:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,{opacity:{value:1}}]),vertexShader:ShaderChunk.meshnormal_vert,fragmentShader:ShaderChunk.meshnormal_frag},sprite:{uniforms:mergeUniforms([UniformsLib.sprite,UniformsLib.fog]),vertexShader:ShaderChunk.sprite_vert,fragmentShader:ShaderChunk.sprite_frag},background:{uniforms:{uvTransform:{value:new Matrix3},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:ShaderChunk.background_vert,fragmentShader:ShaderChunk.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Matrix3}},vertexShader:ShaderChunk.backgroundCube_vert,fragmentShader:ShaderChunk.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:ShaderChunk.cube_vert,fragmentShader:ShaderChunk.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ShaderChunk.equirect_vert,fragmentShader:ShaderChunk.equirect_frag},distanceRGBA:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.displacementmap,{referencePosition:{value:new Vector3},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ShaderChunk.distanceRGBA_vert,fragmentShader:ShaderChunk.distanceRGBA_frag},shadow:{uniforms:mergeUniforms([UniformsLib.lights,UniformsLib.fog,{color:{value:new Color(0)},opacity:{value:1}}]),vertexShader:ShaderChunk.shadow_vert,fragmentShader:ShaderChunk.shadow_frag}};ShaderLib.physical={uniforms:mergeUniforms([ShaderLib.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Matrix3},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Matrix3},clearcoatNormalScale:{value:new Vector2(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Matrix3},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Matrix3},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Matrix3},sheen:{value:0},sheenColor:{value:new Color(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Matrix3},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Matrix3},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Matrix3},transmissionSamplerSize:{value:new Vector2},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Matrix3},attenuationDistance:{value:0},attenuationColor:{value:new Color(0)},specularColor:{value:new Color(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Matrix3},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Matrix3},anisotropyVector:{value:new Vector2},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Matrix3}}]),vertexShader:ShaderChunk.meshphysical_vert,fragmentShader:ShaderChunk.meshphysical_frag};const _rgb={r:0,b:0,g:0},_e1$1=new Euler,_m1$1=new Matrix4;function WebGLBackground(r,e,t,o,y,R,G){const K=new Color(0);let Y=R===!0?0:1,Q,ee,ie=null,re=0,se=null;function le(ve){let _e=ve.isScene===!0?ve.background:null;return _e&&_e.isTexture&&(_e=(ve.backgroundBlurriness>0?t:e).get(_e)),_e}function ce(ve){let _e=!1;const be=le(ve);be===null?ue(K,Y):be&&be.isColor&&(ue(be,1),_e=!0);const Re=r.xr.getEnvironmentBlendMode();Re==="additive"?o.buffers.color.setClear(0,0,0,1,G):Re==="alpha-blend"&&o.buffers.color.setClear(0,0,0,0,G),(r.autoClear||_e)&&(o.buffers.depth.setTest(!0),o.buffers.depth.setMask(!0),o.buffers.color.setMask(!0),r.clear(r.autoClearColor,r.autoClearDepth,r.autoClearStencil))}function oe(ve,_e){const be=le(_e);be&&(be.isCubeTexture||be.mapping===CubeUVReflectionMapping)?(ee===void 0&&(ee=new Mesh(new BoxGeometry(1,1,1),new ShaderMaterial({name:"BackgroundCubeMaterial",uniforms:cloneUniforms(ShaderLib.backgroundCube.uniforms),vertexShader:ShaderLib.backgroundCube.vertexShader,fragmentShader:ShaderLib.backgroundCube.fragmentShader,side:BackSide,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),ee.geometry.deleteAttribute("normal"),ee.geometry.deleteAttribute("uv"),ee.onBeforeRender=function(Re,Se,Ee){this.matrixWorld.copyPosition(Ee.matrixWorld)},Object.defineProperty(ee.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),y.update(ee)),_e1$1.copy(_e.backgroundRotation),_e1$1.x*=-1,_e1$1.y*=-1,_e1$1.z*=-1,be.isCubeTexture&&be.isRenderTargetTexture===!1&&(_e1$1.y*=-1,_e1$1.z*=-1),ee.material.uniforms.envMap.value=be,ee.material.uniforms.flipEnvMap.value=be.isCubeTexture&&be.isRenderTargetTexture===!1?-1:1,ee.material.uniforms.backgroundBlurriness.value=_e.backgroundBlurriness,ee.material.uniforms.backgroundIntensity.value=_e.backgroundIntensity,ee.material.uniforms.backgroundRotation.value.setFromMatrix4(_m1$1.makeRotationFromEuler(_e1$1)),ee.material.toneMapped=ColorManagement.getTransfer(be.colorSpace)!==SRGBTransfer,(ie!==be||re!==be.version||se!==r.toneMapping)&&(ee.material.needsUpdate=!0,ie=be,re=be.version,se=r.toneMapping),ee.layers.enableAll(),ve.unshift(ee,ee.geometry,ee.material,0,0,null)):be&&be.isTexture&&(Q===void 0&&(Q=new Mesh(new PlaneGeometry(2,2),new ShaderMaterial({name:"BackgroundMaterial",uniforms:cloneUniforms(ShaderLib.background.uniforms),vertexShader:ShaderLib.background.vertexShader,fragmentShader:ShaderLib.background.fragmentShader,side:FrontSide,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),Q.geometry.deleteAttribute("normal"),Object.defineProperty(Q.material,"map",{get:function(){return this.uniforms.t2D.value}}),y.update(Q)),Q.material.uniforms.t2D.value=be,Q.material.uniforms.backgroundIntensity.value=_e.backgroundIntensity,Q.material.toneMapped=ColorManagement.getTransfer(be.colorSpace)!==SRGBTransfer,be.matrixAutoUpdate===!0&&be.updateMatrix(),Q.material.uniforms.uvTransform.value.copy(be.matrix),(ie!==be||re!==be.version||se!==r.toneMapping)&&(Q.material.needsUpdate=!0,ie=be,re=be.version,se=r.toneMapping),Q.layers.enableAll(),ve.unshift(Q,Q.geometry,Q.material,0,0,null))}function ue(ve,_e){ve.getRGB(_rgb,getUnlitUniformColorSpace(r)),o.buffers.color.setClear(_rgb.r,_rgb.g,_rgb.b,_e,G)}function ge(){ee!==void 0&&(ee.geometry.dispose(),ee.material.dispose(),ee=void 0),Q!==void 0&&(Q.geometry.dispose(),Q.material.dispose(),Q=void 0)}return{getClearColor:function(){return K},setClearColor:function(ve,_e=1){K.set(ve),Y=_e,ue(K,Y)},getClearAlpha:function(){return Y},setClearAlpha:function(ve){Y=ve,ue(K,Y)},render:ce,addToRenderList:oe,dispose:ge}}function WebGLBindingStates(r,e){const t=r.getParameter(r.MAX_VERTEX_ATTRIBS),o={},y=re(null);let R=y,G=!1;function K(de,Me,Le,Pe,Ue){let $e=!1;const Ve=ie(Pe,Le,Me);R!==Ve&&(R=Ve,Q(R.object)),$e=se(de,Pe,Le,Ue),$e&&le(de,Pe,Le,Ue),Ue!==null&&e.update(Ue,r.ELEMENT_ARRAY_BUFFER),($e||G)&&(G=!1,_e(de,Me,Le,Pe),Ue!==null&&r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,e.get(Ue).buffer))}function Y(){return r.createVertexArray()}function Q(de){return r.bindVertexArray(de)}function ee(de){return r.deleteVertexArray(de)}function ie(de,Me,Le){const Pe=Le.wireframe===!0;let Ue=o[de.id];Ue===void 0&&(Ue={},o[de.id]=Ue);let $e=Ue[Me.id];$e===void 0&&($e={},Ue[Me.id]=$e);let Ve=$e[Pe];return Ve===void 0&&(Ve=re(Y()),$e[Pe]=Ve),Ve}function re(de){const Me=[],Le=[],Pe=[];for(let Ue=0;Ue<t;Ue++)Me[Ue]=0,Le[Ue]=0,Pe[Ue]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:Me,enabledAttributes:Le,attributeDivisors:Pe,object:de,attributes:{},index:null}}function se(de,Me,Le,Pe){const Ue=R.attributes,$e=Me.attributes;let Ve=0;const Ce=Le.getAttributes();for(const De in Ce)if(Ce[De].location>=0){const Te=Ue[De];let Ne=$e[De];if(Ne===void 0&&(De==="instanceMatrix"&&de.instanceMatrix&&(Ne=de.instanceMatrix),De==="instanceColor"&&de.instanceColor&&(Ne=de.instanceColor)),Te===void 0||Te.attribute!==Ne||Ne&&Te.data!==Ne.data)return!0;Ve++}return R.attributesNum!==Ve||R.index!==Pe}function le(de,Me,Le,Pe){const Ue={},$e=Me.attributes;let Ve=0;const Ce=Le.getAttributes();for(const De in Ce)if(Ce[De].location>=0){let Te=$e[De];Te===void 0&&(De==="instanceMatrix"&&de.instanceMatrix&&(Te=de.instanceMatrix),De==="instanceColor"&&de.instanceColor&&(Te=de.instanceColor));const Ne={};Ne.attribute=Te,Te&&Te.data&&(Ne.data=Te.data),Ue[De]=Ne,Ve++}R.attributes=Ue,R.attributesNum=Ve,R.index=Pe}function ce(){const de=R.newAttributes;for(let Me=0,Le=de.length;Me<Le;Me++)de[Me]=0}function oe(de){ue(de,0)}function ue(de,Me){const Le=R.newAttributes,Pe=R.enabledAttributes,Ue=R.attributeDivisors;Le[de]=1,Pe[de]===0&&(r.enableVertexAttribArray(de),Pe[de]=1),Ue[de]!==Me&&(r.vertexAttribDivisor(de,Me),Ue[de]=Me)}function ge(){const de=R.newAttributes,Me=R.enabledAttributes;for(let Le=0,Pe=Me.length;Le<Pe;Le++)Me[Le]!==de[Le]&&(r.disableVertexAttribArray(Le),Me[Le]=0)}function ve(de,Me,Le,Pe,Ue,$e,Ve){Ve===!0?r.vertexAttribIPointer(de,Me,Le,Ue,$e):r.vertexAttribPointer(de,Me,Le,Pe,Ue,$e)}function _e(de,Me,Le,Pe){ce();const Ue=Pe.attributes,$e=Le.getAttributes(),Ve=Me.defaultAttributeValues;for(const Ce in $e){const De=$e[Ce];if(De.location>=0){let Oe=Ue[Ce];if(Oe===void 0&&(Ce==="instanceMatrix"&&de.instanceMatrix&&(Oe=de.instanceMatrix),Ce==="instanceColor"&&de.instanceColor&&(Oe=de.instanceColor)),Oe!==void 0){const Te=Oe.normalized,Ne=Oe.itemSize,Ye=e.get(Oe);if(Ye===void 0)continue;const Qe=Ye.buffer,qe=Ye.type,Ze=Ye.bytesPerElement,ct=qe===r.INT||qe===r.UNSIGNED_INT||Oe.gpuType===IntType;if(Oe.isInterleavedBufferAttribute){const xt=Oe.data,un=xt.stride,Vn=Oe.offset;if(xt.isInstancedInterleavedBuffer){for(let In=0;In<De.locationSize;In++)ue(De.location+In,xt.meshPerAttribute);de.isInstancedMesh!==!0&&Pe._maxInstanceCount===void 0&&(Pe._maxInstanceCount=xt.meshPerAttribute*xt.count)}else for(let In=0;In<De.locationSize;In++)oe(De.location+In);r.bindBuffer(r.ARRAY_BUFFER,Qe);for(let In=0;In<De.locationSize;In++)ve(De.location+In,Ne/De.locationSize,qe,Te,un*Ze,(Vn+Ne/De.locationSize*In)*Ze,ct)}else{if(Oe.isInstancedBufferAttribute){for(let xt=0;xt<De.locationSize;xt++)ue(De.location+xt,Oe.meshPerAttribute);de.isInstancedMesh!==!0&&Pe._maxInstanceCount===void 0&&(Pe._maxInstanceCount=Oe.meshPerAttribute*Oe.count)}else for(let xt=0;xt<De.locationSize;xt++)oe(De.location+xt);r.bindBuffer(r.ARRAY_BUFFER,Qe);for(let xt=0;xt<De.locationSize;xt++)ve(De.location+xt,Ne/De.locationSize,qe,Te,Ne*Ze,Ne/De.locationSize*xt*Ze,ct)}}else if(Ve!==void 0){const Te=Ve[Ce];if(Te!==void 0)switch(Te.length){case 2:r.vertexAttrib2fv(De.location,Te);break;case 3:r.vertexAttrib3fv(De.location,Te);break;case 4:r.vertexAttrib4fv(De.location,Te);break;default:r.vertexAttrib1fv(De.location,Te)}}}}ge()}function be(){Ee();for(const de in o){const Me=o[de];for(const Le in Me){const Pe=Me[Le];for(const Ue in Pe)ee(Pe[Ue].object),delete Pe[Ue];delete Me[Le]}delete o[de]}}function Re(de){if(o[de.id]===void 0)return;const Me=o[de.id];for(const Le in Me){const Pe=Me[Le];for(const Ue in Pe)ee(Pe[Ue].object),delete Pe[Ue];delete Me[Le]}delete o[de.id]}function Se(de){for(const Me in o){const Le=o[Me];if(Le[de.id]===void 0)continue;const Pe=Le[de.id];for(const Ue in Pe)ee(Pe[Ue].object),delete Pe[Ue];delete Le[de.id]}}function Ee(){ye(),G=!0,R!==y&&(R=y,Q(R.object))}function ye(){y.geometry=null,y.program=null,y.wireframe=!1}return{setup:K,reset:Ee,resetDefaultState:ye,dispose:be,releaseStatesOfGeometry:Re,releaseStatesOfProgram:Se,initAttributes:ce,enableAttribute:oe,disableUnusedAttributes:ge}}function WebGLBufferRenderer(r,e,t){let o;function y(Q){o=Q}function R(Q,ee){r.drawArrays(o,Q,ee),t.update(ee,o,1)}function G(Q,ee,ie){ie!==0&&(r.drawArraysInstanced(o,Q,ee,ie),t.update(ee,o,ie))}function K(Q,ee,ie){if(ie===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(o,Q,0,ee,0,ie);let se=0;for(let le=0;le<ie;le++)se+=ee[le];t.update(se,o,1)}function Y(Q,ee,ie,re){if(ie===0)return;const se=e.get("WEBGL_multi_draw");if(se===null)for(let le=0;le<Q.length;le++)G(Q[le],ee[le],re[le]);else{se.multiDrawArraysInstancedWEBGL(o,Q,0,ee,0,re,0,ie);let le=0;for(let ce=0;ce<ie;ce++)le+=ee[ce]*re[ce];t.update(le,o,1)}}this.setMode=y,this.render=R,this.renderInstances=G,this.renderMultiDraw=K,this.renderMultiDrawInstances=Y}function WebGLCapabilities(r,e,t,o){let y;function R(){if(y!==void 0)return y;if(e.has("EXT_texture_filter_anisotropic")===!0){const Se=e.get("EXT_texture_filter_anisotropic");y=r.getParameter(Se.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else y=0;return y}function G(Se){return!(Se!==RGBAFormat&&o.convert(Se)!==r.getParameter(r.IMPLEMENTATION_COLOR_READ_FORMAT))}function K(Se){const Ee=Se===HalfFloatType&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(Se!==UnsignedByteType&&o.convert(Se)!==r.getParameter(r.IMPLEMENTATION_COLOR_READ_TYPE)&&Se!==FloatType&&!Ee)}function Y(Se){if(Se==="highp"){if(r.getShaderPrecisionFormat(r.VERTEX_SHADER,r.HIGH_FLOAT).precision>0&&r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT).precision>0)return"highp";Se="mediump"}return Se==="mediump"&&r.getShaderPrecisionFormat(r.VERTEX_SHADER,r.MEDIUM_FLOAT).precision>0&&r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let Q=t.precision!==void 0?t.precision:"highp";const ee=Y(Q);ee!==Q&&(console.warn("THREE.WebGLRenderer:",Q,"not supported, using",ee,"instead."),Q=ee);const ie=t.logarithmicDepthBuffer===!0,re=t.reverseDepthBuffer===!0&&e.has("EXT_clip_control"),se=r.getParameter(r.MAX_TEXTURE_IMAGE_UNITS),le=r.getParameter(r.MAX_VERTEX_TEXTURE_IMAGE_UNITS),ce=r.getParameter(r.MAX_TEXTURE_SIZE),oe=r.getParameter(r.MAX_CUBE_MAP_TEXTURE_SIZE),ue=r.getParameter(r.MAX_VERTEX_ATTRIBS),ge=r.getParameter(r.MAX_VERTEX_UNIFORM_VECTORS),ve=r.getParameter(r.MAX_VARYING_VECTORS),_e=r.getParameter(r.MAX_FRAGMENT_UNIFORM_VECTORS),be=le>0,Re=r.getParameter(r.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:R,getMaxPrecision:Y,textureFormatReadable:G,textureTypeReadable:K,precision:Q,logarithmicDepthBuffer:ie,reverseDepthBuffer:re,maxTextures:se,maxVertexTextures:le,maxTextureSize:ce,maxCubemapSize:oe,maxAttributes:ue,maxVertexUniforms:ge,maxVaryings:ve,maxFragmentUniforms:_e,vertexTextures:be,maxSamples:Re}}function WebGLClipping(r){const e=this;let t=null,o=0,y=!1,R=!1;const G=new Plane,K=new Matrix3,Y={value:null,needsUpdate:!1};this.uniform=Y,this.numPlanes=0,this.numIntersection=0,this.init=function(ie,re){const se=ie.length!==0||re||o!==0||y;return y=re,o=ie.length,se},this.beginShadows=function(){R=!0,ee(null)},this.endShadows=function(){R=!1},this.setGlobalState=function(ie,re){t=ee(ie,re,0)},this.setState=function(ie,re,se){const le=ie.clippingPlanes,ce=ie.clipIntersection,oe=ie.clipShadows,ue=r.get(ie);if(!y||le===null||le.length===0||R&&!oe)R?ee(null):Q();else{const ge=R?0:o,ve=ge*4;let _e=ue.clippingState||null;Y.value=_e,_e=ee(le,re,ve,se);for(let be=0;be!==ve;++be)_e[be]=t[be];ue.clippingState=_e,this.numIntersection=ce?this.numPlanes:0,this.numPlanes+=ge}};function Q(){Y.value!==t&&(Y.value=t,Y.needsUpdate=o>0),e.numPlanes=o,e.numIntersection=0}function ee(ie,re,se,le){const ce=ie!==null?ie.length:0;let oe=null;if(ce!==0){if(oe=Y.value,le!==!0||oe===null){const ue=se+ce*4,ge=re.matrixWorldInverse;K.getNormalMatrix(ge),(oe===null||oe.length<ue)&&(oe=new Float32Array(ue));for(let ve=0,_e=se;ve!==ce;++ve,_e+=4)G.copy(ie[ve]).applyMatrix4(ge,K),G.normal.toArray(oe,_e),oe[_e+3]=G.constant}Y.value=oe,Y.needsUpdate=!0}return e.numPlanes=ce,e.numIntersection=0,oe}}function WebGLCubeMaps(r){let e=new WeakMap;function t(G,K){return K===EquirectangularReflectionMapping?G.mapping=CubeReflectionMapping:K===EquirectangularRefractionMapping&&(G.mapping=CubeRefractionMapping),G}function o(G){if(G&&G.isTexture){const K=G.mapping;if(K===EquirectangularReflectionMapping||K===EquirectangularRefractionMapping)if(e.has(G)){const Y=e.get(G).texture;return t(Y,G.mapping)}else{const Y=G.image;if(Y&&Y.height>0){const Q=new WebGLCubeRenderTarget(Y.height);return Q.fromEquirectangularTexture(r,G),e.set(G,Q),G.addEventListener("dispose",y),t(Q.texture,G.mapping)}else return null}}return G}function y(G){const K=G.target;K.removeEventListener("dispose",y);const Y=e.get(K);Y!==void 0&&(e.delete(K),Y.dispose())}function R(){e=new WeakMap}return{get:o,dispose:R}}const LOD_MIN=4,EXTRA_LOD_SIGMA=[.125,.215,.35,.446,.526,.582],MAX_SAMPLES=20,_flatCamera=new OrthographicCamera,_clearColor=new Color;let _oldTarget=null,_oldActiveCubeFace=0,_oldActiveMipmapLevel=0,_oldXrEnabled=!1;const PHI=(1+Math.sqrt(5))/2,INV_PHI=1/PHI,_axisDirections=[new Vector3(-PHI,INV_PHI,0),new Vector3(PHI,INV_PHI,0),new Vector3(-INV_PHI,0,PHI),new Vector3(INV_PHI,0,PHI),new Vector3(0,PHI,-INV_PHI),new Vector3(0,PHI,INV_PHI),new Vector3(-1,1,-1),new Vector3(1,1,-1),new Vector3(-1,1,1),new Vector3(1,1,1)],_origin=new Vector3;class PMREMGenerator{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,o=.1,y=100,R={}){const{size:G=256,position:K=_origin}=R;_oldTarget=this._renderer.getRenderTarget(),_oldActiveCubeFace=this._renderer.getActiveCubeFace(),_oldActiveMipmapLevel=this._renderer.getActiveMipmapLevel(),_oldXrEnabled=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(G);const Y=this._allocateTargets();return Y.depthBuffer=!0,this._sceneToCubeUV(e,o,y,Y,K),t>0&&this._blur(Y,0,0,t),this._applyPMREM(Y),this._cleanup(Y),Y}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=_getCubemapMaterial(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=_getEquirectMaterial(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(_oldTarget,_oldActiveCubeFace,_oldActiveMipmapLevel),this._renderer.xr.enabled=_oldXrEnabled,e.scissorTest=!1,_setViewport(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===CubeReflectionMapping||e.mapping===CubeRefractionMapping?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),_oldTarget=this._renderer.getRenderTarget(),_oldActiveCubeFace=this._renderer.getActiveCubeFace(),_oldActiveMipmapLevel=this._renderer.getActiveMipmapLevel(),_oldXrEnabled=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const o=t||this._allocateTargets();return this._textureToCubeUV(e,o),this._applyPMREM(o),this._cleanup(o),o}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,o={magFilter:LinearFilter,minFilter:LinearFilter,generateMipmaps:!1,type:HalfFloatType,format:RGBAFormat,colorSpace:LinearSRGBColorSpace,depthBuffer:!1},y=_createRenderTarget(e,t,o);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=_createRenderTarget(e,t,o);const{_lodMax:R}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=_createPlanes(R)),this._blurMaterial=_getBlurShader(R,e,t)}return y}_compileMaterial(e){const t=new Mesh(this._lodPlanes[0],e);this._renderer.compile(t,_flatCamera)}_sceneToCubeUV(e,t,o,y,R){const Y=new PerspectiveCamera(90,1,t,o),Q=[1,-1,1,1,1,1],ee=[1,1,1,-1,-1,-1],ie=this._renderer,re=ie.autoClear,se=ie.toneMapping;ie.getClearColor(_clearColor),ie.toneMapping=NoToneMapping,ie.autoClear=!1;const le=new MeshBasicMaterial({name:"PMREM.Background",side:BackSide,depthWrite:!1,depthTest:!1}),ce=new Mesh(new BoxGeometry,le);let oe=!1;const ue=e.background;ue?ue.isColor&&(le.color.copy(ue),e.background=null,oe=!0):(le.color.copy(_clearColor),oe=!0);for(let ge=0;ge<6;ge++){const ve=ge%3;ve===0?(Y.up.set(0,Q[ge],0),Y.position.set(R.x,R.y,R.z),Y.lookAt(R.x+ee[ge],R.y,R.z)):ve===1?(Y.up.set(0,0,Q[ge]),Y.position.set(R.x,R.y,R.z),Y.lookAt(R.x,R.y+ee[ge],R.z)):(Y.up.set(0,Q[ge],0),Y.position.set(R.x,R.y,R.z),Y.lookAt(R.x,R.y,R.z+ee[ge]));const _e=this._cubeSize;_setViewport(y,ve*_e,ge>2?_e:0,_e,_e),ie.setRenderTarget(y),oe&&ie.render(ce,Y),ie.render(e,Y)}ce.geometry.dispose(),ce.material.dispose(),ie.toneMapping=se,ie.autoClear=re,e.background=ue}_textureToCubeUV(e,t){const o=this._renderer,y=e.mapping===CubeReflectionMapping||e.mapping===CubeRefractionMapping;y?(this._cubemapMaterial===null&&(this._cubemapMaterial=_getCubemapMaterial()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=_getEquirectMaterial());const R=y?this._cubemapMaterial:this._equirectMaterial,G=new Mesh(this._lodPlanes[0],R),K=R.uniforms;K.envMap.value=e;const Y=this._cubeSize;_setViewport(t,0,0,3*Y,2*Y),o.setRenderTarget(t),o.render(G,_flatCamera)}_applyPMREM(e){const t=this._renderer,o=t.autoClear;t.autoClear=!1;const y=this._lodPlanes.length;for(let R=1;R<y;R++){const G=Math.sqrt(this._sigmas[R]*this._sigmas[R]-this._sigmas[R-1]*this._sigmas[R-1]),K=_axisDirections[(y-R-1)%_axisDirections.length];this._blur(e,R-1,R,G,K)}t.autoClear=o}_blur(e,t,o,y,R){const G=this._pingPongRenderTarget;this._halfBlur(e,G,t,o,y,"latitudinal",R),this._halfBlur(G,e,o,o,y,"longitudinal",R)}_halfBlur(e,t,o,y,R,G,K){const Y=this._renderer,Q=this._blurMaterial;G!=="latitudinal"&&G!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const ee=3,ie=new Mesh(this._lodPlanes[y],Q),re=Q.uniforms,se=this._sizeLods[o]-1,le=isFinite(R)?Math.PI/(2*se):2*Math.PI/(2*MAX_SAMPLES-1),ce=R/le,oe=isFinite(R)?1+Math.floor(ee*ce):MAX_SAMPLES;oe>MAX_SAMPLES&&console.warn(`sigmaRadians, ${R}, is too large and will clip, as it requested ${oe} samples when the maximum is set to ${MAX_SAMPLES}`);const ue=[];let ge=0;for(let Se=0;Se<MAX_SAMPLES;++Se){const Ee=Se/ce,ye=Math.exp(-Ee*Ee/2);ue.push(ye),Se===0?ge+=ye:Se<oe&&(ge+=2*ye)}for(let Se=0;Se<ue.length;Se++)ue[Se]=ue[Se]/ge;re.envMap.value=e.texture,re.samples.value=oe,re.weights.value=ue,re.latitudinal.value=G==="latitudinal",K&&(re.poleAxis.value=K);const{_lodMax:ve}=this;re.dTheta.value=le,re.mipInt.value=ve-o;const _e=this._sizeLods[y],be=3*_e*(y>ve-LOD_MIN?y-ve+LOD_MIN:0),Re=4*(this._cubeSize-_e);_setViewport(t,be,Re,3*_e,2*_e),Y.setRenderTarget(t),Y.render(ie,_flatCamera)}}function _createPlanes(r){const e=[],t=[],o=[];let y=r;const R=r-LOD_MIN+1+EXTRA_LOD_SIGMA.length;for(let G=0;G<R;G++){const K=Math.pow(2,y);t.push(K);let Y=1/K;G>r-LOD_MIN?Y=EXTRA_LOD_SIGMA[G-r+LOD_MIN-1]:G===0&&(Y=0),o.push(Y);const Q=1/(K-2),ee=-Q,ie=1+Q,re=[ee,ee,ie,ee,ie,ie,ee,ee,ie,ie,ee,ie],se=6,le=6,ce=3,oe=2,ue=1,ge=new Float32Array(ce*le*se),ve=new Float32Array(oe*le*se),_e=new Float32Array(ue*le*se);for(let Re=0;Re<se;Re++){const Se=Re%3*2/3-1,Ee=Re>2?0:-1,ye=[Se,Ee,0,Se+2/3,Ee,0,Se+2/3,Ee+1,0,Se,Ee,0,Se+2/3,Ee+1,0,Se,Ee+1,0];ge.set(ye,ce*le*Re),ve.set(re,oe*le*Re);const de=[Re,Re,Re,Re,Re,Re];_e.set(de,ue*le*Re)}const be=new BufferGeometry;be.setAttribute("position",new BufferAttribute(ge,ce)),be.setAttribute("uv",new BufferAttribute(ve,oe)),be.setAttribute("faceIndex",new BufferAttribute(_e,ue)),e.push(be),y>LOD_MIN&&y--}return{lodPlanes:e,sizeLods:t,sigmas:o}}function _createRenderTarget(r,e,t){const o=new WebGLRenderTarget(r,e,t);return o.texture.mapping=CubeUVReflectionMapping,o.texture.name="PMREM.cubeUv",o.scissorTest=!0,o}function _setViewport(r,e,t,o,y){r.viewport.set(e,t,o,y),r.scissor.set(e,t,o,y)}function _getBlurShader(r,e,t){const o=new Float32Array(MAX_SAMPLES),y=new Vector3(0,1,0);return new ShaderMaterial({name:"SphericalGaussianBlur",defines:{n:MAX_SAMPLES,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${r}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:o},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:y}},vertexShader:_getCommonVertexShader(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1})}function _getEquirectMaterial(){return new ShaderMaterial({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:_getCommonVertexShader(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1})}function _getCubemapMaterial(){return new ShaderMaterial({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:_getCommonVertexShader(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1})}function _getCommonVertexShader(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function WebGLCubeUVMaps(r){let e=new WeakMap,t=null;function o(K){if(K&&K.isTexture){const Y=K.mapping,Q=Y===EquirectangularReflectionMapping||Y===EquirectangularRefractionMapping,ee=Y===CubeReflectionMapping||Y===CubeRefractionMapping;if(Q||ee){let ie=e.get(K);const re=ie!==void 0?ie.texture.pmremVersion:0;if(K.isRenderTargetTexture&&K.pmremVersion!==re)return t===null&&(t=new PMREMGenerator(r)),ie=Q?t.fromEquirectangular(K,ie):t.fromCubemap(K,ie),ie.texture.pmremVersion=K.pmremVersion,e.set(K,ie),ie.texture;if(ie!==void 0)return ie.texture;{const se=K.image;return Q&&se&&se.height>0||ee&&se&&y(se)?(t===null&&(t=new PMREMGenerator(r)),ie=Q?t.fromEquirectangular(K):t.fromCubemap(K),ie.texture.pmremVersion=K.pmremVersion,e.set(K,ie),K.addEventListener("dispose",R),ie.texture):null}}}return K}function y(K){let Y=0;const Q=6;for(let ee=0;ee<Q;ee++)K[ee]!==void 0&&Y++;return Y===Q}function R(K){const Y=K.target;Y.removeEventListener("dispose",R);const Q=e.get(Y);Q!==void 0&&(e.delete(Y),Q.dispose())}function G(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:o,dispose:G}}function WebGLExtensions(r){const e={};function t(o){if(e[o]!==void 0)return e[o];let y;switch(o){case"WEBGL_depth_texture":y=r.getExtension("WEBGL_depth_texture")||r.getExtension("MOZ_WEBGL_depth_texture")||r.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":y=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":y=r.getExtension("WEBGL_compressed_texture_s3tc")||r.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||r.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":y=r.getExtension("WEBGL_compressed_texture_pvrtc")||r.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:y=r.getExtension(o)}return e[o]=y,y}return{has:function(o){return t(o)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(o){const y=t(o);return y===null&&warnOnce("THREE.WebGLRenderer: "+o+" extension not supported."),y}}}function WebGLGeometries(r,e,t,o){const y={},R=new WeakMap;function G(ie){const re=ie.target;re.index!==null&&e.remove(re.index);for(const le in re.attributes)e.remove(re.attributes[le]);re.removeEventListener("dispose",G),delete y[re.id];const se=R.get(re);se&&(e.remove(se),R.delete(re)),o.releaseStatesOfGeometry(re),re.isInstancedBufferGeometry===!0&&delete re._maxInstanceCount,t.memory.geometries--}function K(ie,re){return y[re.id]===!0||(re.addEventListener("dispose",G),y[re.id]=!0,t.memory.geometries++),re}function Y(ie){const re=ie.attributes;for(const se in re)e.update(re[se],r.ARRAY_BUFFER)}function Q(ie){const re=[],se=ie.index,le=ie.attributes.position;let ce=0;if(se!==null){const ge=se.array;ce=se.version;for(let ve=0,_e=ge.length;ve<_e;ve+=3){const be=ge[ve+0],Re=ge[ve+1],Se=ge[ve+2];re.push(be,Re,Re,Se,Se,be)}}else if(le!==void 0){const ge=le.array;ce=le.version;for(let ve=0,_e=ge.length/3-1;ve<_e;ve+=3){const be=ve+0,Re=ve+1,Se=ve+2;re.push(be,Re,Re,Se,Se,be)}}else return;const oe=new(arrayNeedsUint32(re)?Uint32BufferAttribute:Uint16BufferAttribute)(re,1);oe.version=ce;const ue=R.get(ie);ue&&e.remove(ue),R.set(ie,oe)}function ee(ie){const re=R.get(ie);if(re){const se=ie.index;se!==null&&re.version<se.version&&Q(ie)}else Q(ie);return R.get(ie)}return{get:K,update:Y,getWireframeAttribute:ee}}function WebGLIndexedBufferRenderer(r,e,t){let o;function y(re){o=re}let R,G;function K(re){R=re.type,G=re.bytesPerElement}function Y(re,se){r.drawElements(o,se,R,re*G),t.update(se,o,1)}function Q(re,se,le){le!==0&&(r.drawElementsInstanced(o,se,R,re*G,le),t.update(se,o,le))}function ee(re,se,le){if(le===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(o,se,0,R,re,0,le);let oe=0;for(let ue=0;ue<le;ue++)oe+=se[ue];t.update(oe,o,1)}function ie(re,se,le,ce){if(le===0)return;const oe=e.get("WEBGL_multi_draw");if(oe===null)for(let ue=0;ue<re.length;ue++)Q(re[ue]/G,se[ue],ce[ue]);else{oe.multiDrawElementsInstancedWEBGL(o,se,0,R,re,0,ce,0,le);let ue=0;for(let ge=0;ge<le;ge++)ue+=se[ge]*ce[ge];t.update(ue,o,1)}}this.setMode=y,this.setIndex=K,this.render=Y,this.renderInstances=Q,this.renderMultiDraw=ee,this.renderMultiDrawInstances=ie}function WebGLInfo(r){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function o(R,G,K){switch(t.calls++,G){case r.TRIANGLES:t.triangles+=K*(R/3);break;case r.LINES:t.lines+=K*(R/2);break;case r.LINE_STRIP:t.lines+=K*(R-1);break;case r.LINE_LOOP:t.lines+=K*R;break;case r.POINTS:t.points+=K*R;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",G);break}}function y(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:y,update:o}}function WebGLMorphtargets(r,e,t){const o=new WeakMap,y=new Vector4;function R(G,K,Y){const Q=G.morphTargetInfluences,ee=K.morphAttributes.position||K.morphAttributes.normal||K.morphAttributes.color,ie=ee!==void 0?ee.length:0;let re=o.get(K);if(re===void 0||re.count!==ie){let ye=function(){Se.dispose(),o.delete(K),K.removeEventListener("dispose",ye)};re!==void 0&&re.texture.dispose();const se=K.morphAttributes.position!==void 0,le=K.morphAttributes.normal!==void 0,ce=K.morphAttributes.color!==void 0,oe=K.morphAttributes.position||[],ue=K.morphAttributes.normal||[],ge=K.morphAttributes.color||[];let ve=0;se===!0&&(ve=1),le===!0&&(ve=2),ce===!0&&(ve=3);let _e=K.attributes.position.count*ve,be=1;_e>e.maxTextureSize&&(be=Math.ceil(_e/e.maxTextureSize),_e=e.maxTextureSize);const Re=new Float32Array(_e*be*4*ie),Se=new DataArrayTexture(Re,_e,be,ie);Se.type=FloatType,Se.needsUpdate=!0;const Ee=ve*4;for(let de=0;de<ie;de++){const Me=oe[de],Le=ue[de],Pe=ge[de],Ue=_e*be*4*de;for(let $e=0;$e<Me.count;$e++){const Ve=$e*Ee;se===!0&&(y.fromBufferAttribute(Me,$e),Re[Ue+Ve+0]=y.x,Re[Ue+Ve+1]=y.y,Re[Ue+Ve+2]=y.z,Re[Ue+Ve+3]=0),le===!0&&(y.fromBufferAttribute(Le,$e),Re[Ue+Ve+4]=y.x,Re[Ue+Ve+5]=y.y,Re[Ue+Ve+6]=y.z,Re[Ue+Ve+7]=0),ce===!0&&(y.fromBufferAttribute(Pe,$e),Re[Ue+Ve+8]=y.x,Re[Ue+Ve+9]=y.y,Re[Ue+Ve+10]=y.z,Re[Ue+Ve+11]=Pe.itemSize===4?y.w:1)}}re={count:ie,texture:Se,size:new Vector2(_e,be)},o.set(K,re),K.addEventListener("dispose",ye)}if(G.isInstancedMesh===!0&&G.morphTexture!==null)Y.getUniforms().setValue(r,"morphTexture",G.morphTexture,t);else{let se=0;for(let ce=0;ce<Q.length;ce++)se+=Q[ce];const le=K.morphTargetsRelative?1:1-se;Y.getUniforms().setValue(r,"morphTargetBaseInfluence",le),Y.getUniforms().setValue(r,"morphTargetInfluences",Q)}Y.getUniforms().setValue(r,"morphTargetsTexture",re.texture,t),Y.getUniforms().setValue(r,"morphTargetsTextureSize",re.size)}return{update:R}}function WebGLObjects(r,e,t,o){let y=new WeakMap;function R(Y){const Q=o.render.frame,ee=Y.geometry,ie=e.get(Y,ee);if(y.get(ie)!==Q&&(e.update(ie),y.set(ie,Q)),Y.isInstancedMesh&&(Y.hasEventListener("dispose",K)===!1&&Y.addEventListener("dispose",K),y.get(Y)!==Q&&(t.update(Y.instanceMatrix,r.ARRAY_BUFFER),Y.instanceColor!==null&&t.update(Y.instanceColor,r.ARRAY_BUFFER),y.set(Y,Q))),Y.isSkinnedMesh){const re=Y.skeleton;y.get(re)!==Q&&(re.update(),y.set(re,Q))}return ie}function G(){y=new WeakMap}function K(Y){const Q=Y.target;Q.removeEventListener("dispose",K),t.remove(Q.instanceMatrix),Q.instanceColor!==null&&t.remove(Q.instanceColor)}return{update:R,dispose:G}}const emptyTexture=new Texture,emptyShadowTexture=new DepthTexture(1,1),emptyArrayTexture=new DataArrayTexture,empty3dTexture=new Data3DTexture,emptyCubeTexture=new CubeTexture,arrayCacheF32=[],arrayCacheI32=[],mat4array=new Float32Array(16),mat3array=new Float32Array(9),mat2array=new Float32Array(4);function flatten(r,e,t){const o=r[0];if(o<=0||o>0)return r;const y=e*t;let R=arrayCacheF32[y];if(R===void 0&&(R=new Float32Array(y),arrayCacheF32[y]=R),e!==0){o.toArray(R,0);for(let G=1,K=0;G!==e;++G)K+=t,r[G].toArray(R,K)}return R}function arraysEqual(r,e){if(r.length!==e.length)return!1;for(let t=0,o=r.length;t<o;t++)if(r[t]!==e[t])return!1;return!0}function copyArray(r,e){for(let t=0,o=e.length;t<o;t++)r[t]=e[t]}function allocTexUnits(r,e){let t=arrayCacheI32[e];t===void 0&&(t=new Int32Array(e),arrayCacheI32[e]=t);for(let o=0;o!==e;++o)t[o]=r.allocateTextureUnit();return t}function setValueV1f(r,e){const t=this.cache;t[0]!==e&&(r.uniform1f(this.addr,e),t[0]=e)}function setValueV2f(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(r.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(arraysEqual(t,e))return;r.uniform2fv(this.addr,e),copyArray(t,e)}}function setValueV3f(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(r.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(r.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(arraysEqual(t,e))return;r.uniform3fv(this.addr,e),copyArray(t,e)}}function setValueV4f(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(r.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(arraysEqual(t,e))return;r.uniform4fv(this.addr,e),copyArray(t,e)}}function setValueM2(r,e){const t=this.cache,o=e.elements;if(o===void 0){if(arraysEqual(t,e))return;r.uniformMatrix2fv(this.addr,!1,e),copyArray(t,e)}else{if(arraysEqual(t,o))return;mat2array.set(o),r.uniformMatrix2fv(this.addr,!1,mat2array),copyArray(t,o)}}function setValueM3(r,e){const t=this.cache,o=e.elements;if(o===void 0){if(arraysEqual(t,e))return;r.uniformMatrix3fv(this.addr,!1,e),copyArray(t,e)}else{if(arraysEqual(t,o))return;mat3array.set(o),r.uniformMatrix3fv(this.addr,!1,mat3array),copyArray(t,o)}}function setValueM4(r,e){const t=this.cache,o=e.elements;if(o===void 0){if(arraysEqual(t,e))return;r.uniformMatrix4fv(this.addr,!1,e),copyArray(t,e)}else{if(arraysEqual(t,o))return;mat4array.set(o),r.uniformMatrix4fv(this.addr,!1,mat4array),copyArray(t,o)}}function setValueV1i(r,e){const t=this.cache;t[0]!==e&&(r.uniform1i(this.addr,e),t[0]=e)}function setValueV2i(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(r.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(arraysEqual(t,e))return;r.uniform2iv(this.addr,e),copyArray(t,e)}}function setValueV3i(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(r.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(arraysEqual(t,e))return;r.uniform3iv(this.addr,e),copyArray(t,e)}}function setValueV4i(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(r.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(arraysEqual(t,e))return;r.uniform4iv(this.addr,e),copyArray(t,e)}}function setValueV1ui(r,e){const t=this.cache;t[0]!==e&&(r.uniform1ui(this.addr,e),t[0]=e)}function setValueV2ui(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(r.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(arraysEqual(t,e))return;r.uniform2uiv(this.addr,e),copyArray(t,e)}}function setValueV3ui(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(r.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(arraysEqual(t,e))return;r.uniform3uiv(this.addr,e),copyArray(t,e)}}function setValueV4ui(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(r.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(arraysEqual(t,e))return;r.uniform4uiv(this.addr,e),copyArray(t,e)}}function setValueT1(r,e,t){const o=this.cache,y=t.allocateTextureUnit();o[0]!==y&&(r.uniform1i(this.addr,y),o[0]=y);let R;this.type===r.SAMPLER_2D_SHADOW?(emptyShadowTexture.compareFunction=LessEqualCompare,R=emptyShadowTexture):R=emptyTexture,t.setTexture2D(e||R,y)}function setValueT3D1(r,e,t){const o=this.cache,y=t.allocateTextureUnit();o[0]!==y&&(r.uniform1i(this.addr,y),o[0]=y),t.setTexture3D(e||empty3dTexture,y)}function setValueT6(r,e,t){const o=this.cache,y=t.allocateTextureUnit();o[0]!==y&&(r.uniform1i(this.addr,y),o[0]=y),t.setTextureCube(e||emptyCubeTexture,y)}function setValueT2DArray1(r,e,t){const o=this.cache,y=t.allocateTextureUnit();o[0]!==y&&(r.uniform1i(this.addr,y),o[0]=y),t.setTexture2DArray(e||emptyArrayTexture,y)}function getSingularSetter(r){switch(r){case 5126:return setValueV1f;case 35664:return setValueV2f;case 35665:return setValueV3f;case 35666:return setValueV4f;case 35674:return setValueM2;case 35675:return setValueM3;case 35676:return setValueM4;case 5124:case 35670:return setValueV1i;case 35667:case 35671:return setValueV2i;case 35668:case 35672:return setValueV3i;case 35669:case 35673:return setValueV4i;case 5125:return setValueV1ui;case 36294:return setValueV2ui;case 36295:return setValueV3ui;case 36296:return setValueV4ui;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1;case 35679:case 36299:case 36307:return setValueT3D1;case 35680:case 36300:case 36308:case 36293:return setValueT6;case 36289:case 36303:case 36311:case 36292:return setValueT2DArray1}}function setValueV1fArray(r,e){r.uniform1fv(this.addr,e)}function setValueV2fArray(r,e){const t=flatten(e,this.size,2);r.uniform2fv(this.addr,t)}function setValueV3fArray(r,e){const t=flatten(e,this.size,3);r.uniform3fv(this.addr,t)}function setValueV4fArray(r,e){const t=flatten(e,this.size,4);r.uniform4fv(this.addr,t)}function setValueM2Array(r,e){const t=flatten(e,this.size,4);r.uniformMatrix2fv(this.addr,!1,t)}function setValueM3Array(r,e){const t=flatten(e,this.size,9);r.uniformMatrix3fv(this.addr,!1,t)}function setValueM4Array(r,e){const t=flatten(e,this.size,16);r.uniformMatrix4fv(this.addr,!1,t)}function setValueV1iArray(r,e){r.uniform1iv(this.addr,e)}function setValueV2iArray(r,e){r.uniform2iv(this.addr,e)}function setValueV3iArray(r,e){r.uniform3iv(this.addr,e)}function setValueV4iArray(r,e){r.uniform4iv(this.addr,e)}function setValueV1uiArray(r,e){r.uniform1uiv(this.addr,e)}function setValueV2uiArray(r,e){r.uniform2uiv(this.addr,e)}function setValueV3uiArray(r,e){r.uniform3uiv(this.addr,e)}function setValueV4uiArray(r,e){r.uniform4uiv(this.addr,e)}function setValueT1Array(r,e,t){const o=this.cache,y=e.length,R=allocTexUnits(t,y);arraysEqual(o,R)||(r.uniform1iv(this.addr,R),copyArray(o,R));for(let G=0;G!==y;++G)t.setTexture2D(e[G]||emptyTexture,R[G])}function setValueT3DArray(r,e,t){const o=this.cache,y=e.length,R=allocTexUnits(t,y);arraysEqual(o,R)||(r.uniform1iv(this.addr,R),copyArray(o,R));for(let G=0;G!==y;++G)t.setTexture3D(e[G]||empty3dTexture,R[G])}function setValueT6Array(r,e,t){const o=this.cache,y=e.length,R=allocTexUnits(t,y);arraysEqual(o,R)||(r.uniform1iv(this.addr,R),copyArray(o,R));for(let G=0;G!==y;++G)t.setTextureCube(e[G]||emptyCubeTexture,R[G])}function setValueT2DArrayArray(r,e,t){const o=this.cache,y=e.length,R=allocTexUnits(t,y);arraysEqual(o,R)||(r.uniform1iv(this.addr,R),copyArray(o,R));for(let G=0;G!==y;++G)t.setTexture2DArray(e[G]||emptyArrayTexture,R[G])}function getPureArraySetter(r){switch(r){case 5126:return setValueV1fArray;case 35664:return setValueV2fArray;case 35665:return setValueV3fArray;case 35666:return setValueV4fArray;case 35674:return setValueM2Array;case 35675:return setValueM3Array;case 35676:return setValueM4Array;case 5124:case 35670:return setValueV1iArray;case 35667:case 35671:return setValueV2iArray;case 35668:case 35672:return setValueV3iArray;case 35669:case 35673:return setValueV4iArray;case 5125:return setValueV1uiArray;case 36294:return setValueV2uiArray;case 36295:return setValueV3uiArray;case 36296:return setValueV4uiArray;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1Array;case 35679:case 36299:case 36307:return setValueT3DArray;case 35680:case 36300:case 36308:case 36293:return setValueT6Array;case 36289:case 36303:case 36311:case 36292:return setValueT2DArrayArray}}class SingleUniform{constructor(e,t,o){this.id=e,this.addr=o,this.cache=[],this.type=t.type,this.setValue=getSingularSetter(t.type)}}class PureArrayUniform{constructor(e,t,o){this.id=e,this.addr=o,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=getPureArraySetter(t.type)}}class StructuredUniform{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,o){const y=this.seq;for(let R=0,G=y.length;R!==G;++R){const K=y[R];K.setValue(e,t[K.id],o)}}}const RePathPart=/(\w+)(\])?(\[|\.)?/g;function addUniform(r,e){r.seq.push(e),r.map[e.id]=e}function parseUniform(r,e,t){const o=r.name,y=o.length;for(RePathPart.lastIndex=0;;){const R=RePathPart.exec(o),G=RePathPart.lastIndex;let K=R[1];const Y=R[2]==="]",Q=R[3];if(Y&&(K=K|0),Q===void 0||Q==="["&&G+2===y){addUniform(t,Q===void 0?new SingleUniform(K,r,e):new PureArrayUniform(K,r,e));break}else{let ie=t.map[K];ie===void 0&&(ie=new StructuredUniform(K),addUniform(t,ie)),t=ie}}}class WebGLUniforms{constructor(e,t){this.seq=[],this.map={};const o=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let y=0;y<o;++y){const R=e.getActiveUniform(t,y),G=e.getUniformLocation(t,R.name);parseUniform(R,G,this)}}setValue(e,t,o,y){const R=this.map[t];R!==void 0&&R.setValue(e,o,y)}setOptional(e,t,o){const y=t[o];y!==void 0&&this.setValue(e,o,y)}static upload(e,t,o,y){for(let R=0,G=t.length;R!==G;++R){const K=t[R],Y=o[K.id];Y.needsUpdate!==!1&&K.setValue(e,Y.value,y)}}static seqWithValue(e,t){const o=[];for(let y=0,R=e.length;y!==R;++y){const G=e[y];G.id in t&&o.push(G)}return o}}function WebGLShader(r,e,t){const o=r.createShader(e);return r.shaderSource(o,t),r.compileShader(o),o}const COMPLETION_STATUS_KHR=37297;let programIdCount=0;function handleSource(r,e){const t=r.split(`
`),o=[],y=Math.max(e-6,0),R=Math.min(e+6,t.length);for(let G=y;G<R;G++){const K=G+1;o.push(`${K===e?">":" "} ${K}: ${t[G]}`)}return o.join(`
`)}const _m0=new Matrix3;function getEncodingComponents(r){ColorManagement._getMatrix(_m0,ColorManagement.workingColorSpace,r);const e=`mat3( ${_m0.elements.map(t=>t.toFixed(4))} )`;switch(ColorManagement.getTransfer(r)){case LinearTransfer:return[e,"LinearTransferOETF"];case SRGBTransfer:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",r),[e,"LinearTransferOETF"]}}function getShaderErrors(r,e,t){const o=r.getShaderParameter(e,r.COMPILE_STATUS),y=r.getShaderInfoLog(e).trim();if(o&&y==="")return"";const R=/ERROR: 0:(\d+)/.exec(y);if(R){const G=parseInt(R[1]);return t.toUpperCase()+`

`+y+`

`+handleSource(r.getShaderSource(e),G)}else return y}function getTexelEncodingFunction(r,e){const t=getEncodingComponents(e);return[`vec4 ${r}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}function getToneMappingFunction(r,e){let t;switch(e){case LinearToneMapping:t="Linear";break;case ReinhardToneMapping:t="Reinhard";break;case CineonToneMapping:t="Cineon";break;case ACESFilmicToneMapping:t="ACESFilmic";break;case AgXToneMapping:t="AgX";break;case NeutralToneMapping:t="Neutral";break;case CustomToneMapping:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+r+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const _v0=new Vector3;function getLuminanceFunction(){ColorManagement.getLuminanceCoefficients(_v0);const r=_v0.x.toFixed(4),e=_v0.y.toFixed(4),t=_v0.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${r}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function generateVertexExtensions(r){return[r.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",r.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(filterEmptyLine).join(`
`)}function generateDefines(r){const e=[];for(const t in r){const o=r[t];o!==!1&&e.push("#define "+t+" "+o)}return e.join(`
`)}function fetchAttributeLocations(r,e){const t={},o=r.getProgramParameter(e,r.ACTIVE_ATTRIBUTES);for(let y=0;y<o;y++){const R=r.getActiveAttrib(e,y),G=R.name;let K=1;R.type===r.FLOAT_MAT2&&(K=2),R.type===r.FLOAT_MAT3&&(K=3),R.type===r.FLOAT_MAT4&&(K=4),t[G]={type:R.type,location:r.getAttribLocation(e,G),locationSize:K}}return t}function filterEmptyLine(r){return r!==""}function replaceLightNums(r,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return r.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function replaceClippingPlaneNums(r,e){return r.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const includePattern=/^[ \t]*#include +<([\w\d./]+)>/gm;function resolveIncludes(r){return r.replace(includePattern,includeReplacer)}const shaderChunkMap=new Map;function includeReplacer(r,e){let t=ShaderChunk[e];if(t===void 0){const o=shaderChunkMap.get(e);if(o!==void 0)t=ShaderChunk[o],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,o);else throw new Error("Can not resolve #include <"+e+">")}return resolveIncludes(t)}const unrollLoopPattern=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function unrollLoops(r){return r.replace(unrollLoopPattern,loopReplacer)}function loopReplacer(r,e,t,o){let y="";for(let R=parseInt(e);R<parseInt(t);R++)y+=o.replace(/\[\s*i\s*\]/g,"[ "+R+" ]").replace(/UNROLLED_LOOP_INDEX/g,R);return y}function generatePrecision(r){let e=`precision ${r.precision} float;
	precision ${r.precision} int;
	precision ${r.precision} sampler2D;
	precision ${r.precision} samplerCube;
	precision ${r.precision} sampler3D;
	precision ${r.precision} sampler2DArray;
	precision ${r.precision} sampler2DShadow;
	precision ${r.precision} samplerCubeShadow;
	precision ${r.precision} sampler2DArrayShadow;
	precision ${r.precision} isampler2D;
	precision ${r.precision} isampler3D;
	precision ${r.precision} isamplerCube;
	precision ${r.precision} isampler2DArray;
	precision ${r.precision} usampler2D;
	precision ${r.precision} usampler3D;
	precision ${r.precision} usamplerCube;
	precision ${r.precision} usampler2DArray;
	`;return r.precision==="highp"?e+=`
#define HIGH_PRECISION`:r.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:r.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function generateShadowMapTypeDefine(r){let e="SHADOWMAP_TYPE_BASIC";return r.shadowMapType===PCFShadowMap?e="SHADOWMAP_TYPE_PCF":r.shadowMapType===PCFSoftShadowMap?e="SHADOWMAP_TYPE_PCF_SOFT":r.shadowMapType===VSMShadowMap&&(e="SHADOWMAP_TYPE_VSM"),e}function generateEnvMapTypeDefine(r){let e="ENVMAP_TYPE_CUBE";if(r.envMap)switch(r.envMapMode){case CubeReflectionMapping:case CubeRefractionMapping:e="ENVMAP_TYPE_CUBE";break;case CubeUVReflectionMapping:e="ENVMAP_TYPE_CUBE_UV";break}return e}function generateEnvMapModeDefine(r){let e="ENVMAP_MODE_REFLECTION";if(r.envMap)switch(r.envMapMode){case CubeRefractionMapping:e="ENVMAP_MODE_REFRACTION";break}return e}function generateEnvMapBlendingDefine(r){let e="ENVMAP_BLENDING_NONE";if(r.envMap)switch(r.combine){case MultiplyOperation:e="ENVMAP_BLENDING_MULTIPLY";break;case MixOperation:e="ENVMAP_BLENDING_MIX";break;case AddOperation:e="ENVMAP_BLENDING_ADD";break}return e}function generateCubeUVSize(r){const e=r.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,o=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:o,maxMip:t}}function WebGLProgram(r,e,t,o){const y=r.getContext(),R=t.defines;let G=t.vertexShader,K=t.fragmentShader;const Y=generateShadowMapTypeDefine(t),Q=generateEnvMapTypeDefine(t),ee=generateEnvMapModeDefine(t),ie=generateEnvMapBlendingDefine(t),re=generateCubeUVSize(t),se=generateVertexExtensions(t),le=generateDefines(R),ce=y.createProgram();let oe,ue,ge=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(oe=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,le].filter(filterEmptyLine).join(`
`),oe.length>0&&(oe+=`
`),ue=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,le].filter(filterEmptyLine).join(`
`),ue.length>0&&(ue+=`
`)):(oe=[generatePrecision(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,le,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+ee:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+Y:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(filterEmptyLine).join(`
`),ue=[generatePrecision(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,le,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+Q:"",t.envMap?"#define "+ee:"",t.envMap?"#define "+ie:"",re?"#define CUBEUV_TEXEL_WIDTH "+re.texelWidth:"",re?"#define CUBEUV_TEXEL_HEIGHT "+re.texelHeight:"",re?"#define CUBEUV_MAX_MIP "+re.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+Y:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==NoToneMapping?"#define TONE_MAPPING":"",t.toneMapping!==NoToneMapping?ShaderChunk.tonemapping_pars_fragment:"",t.toneMapping!==NoToneMapping?getToneMappingFunction("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",ShaderChunk.colorspace_pars_fragment,getTexelEncodingFunction("linearToOutputTexel",t.outputColorSpace),getLuminanceFunction(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(filterEmptyLine).join(`
`)),G=resolveIncludes(G),G=replaceLightNums(G,t),G=replaceClippingPlaneNums(G,t),K=resolveIncludes(K),K=replaceLightNums(K,t),K=replaceClippingPlaneNums(K,t),G=unrollLoops(G),K=unrollLoops(K),t.isRawShaderMaterial!==!0&&(ge=`#version 300 es
`,oe=[se,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+oe,ue=["#define varying in",t.glslVersion===GLSL3?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===GLSL3?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+ue);const ve=ge+oe+G,_e=ge+ue+K,be=WebGLShader(y,y.VERTEX_SHADER,ve),Re=WebGLShader(y,y.FRAGMENT_SHADER,_e);y.attachShader(ce,be),y.attachShader(ce,Re),t.index0AttributeName!==void 0?y.bindAttribLocation(ce,0,t.index0AttributeName):t.morphTargets===!0&&y.bindAttribLocation(ce,0,"position"),y.linkProgram(ce);function Se(Me){if(r.debug.checkShaderErrors){const Le=y.getProgramInfoLog(ce).trim(),Pe=y.getShaderInfoLog(be).trim(),Ue=y.getShaderInfoLog(Re).trim();let $e=!0,Ve=!0;if(y.getProgramParameter(ce,y.LINK_STATUS)===!1)if($e=!1,typeof r.debug.onShaderError=="function")r.debug.onShaderError(y,ce,be,Re);else{const Ce=getShaderErrors(y,be,"vertex"),De=getShaderErrors(y,Re,"fragment");console.error("THREE.WebGLProgram: Shader Error "+y.getError()+" - VALIDATE_STATUS "+y.getProgramParameter(ce,y.VALIDATE_STATUS)+`

Material Name: `+Me.name+`
Material Type: `+Me.type+`

Program Info Log: `+Le+`
`+Ce+`
`+De)}else Le!==""?console.warn("THREE.WebGLProgram: Program Info Log:",Le):(Pe===""||Ue==="")&&(Ve=!1);Ve&&(Me.diagnostics={runnable:$e,programLog:Le,vertexShader:{log:Pe,prefix:oe},fragmentShader:{log:Ue,prefix:ue}})}y.deleteShader(be),y.deleteShader(Re),Ee=new WebGLUniforms(y,ce),ye=fetchAttributeLocations(y,ce)}let Ee;this.getUniforms=function(){return Ee===void 0&&Se(this),Ee};let ye;this.getAttributes=function(){return ye===void 0&&Se(this),ye};let de=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return de===!1&&(de=y.getProgramParameter(ce,COMPLETION_STATUS_KHR)),de},this.destroy=function(){o.releaseStatesOfProgram(this),y.deleteProgram(ce),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=programIdCount++,this.cacheKey=e,this.usedTimes=1,this.program=ce,this.vertexShader=be,this.fragmentShader=Re,this}let _id=0;class WebGLShaderCache{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,o=e.fragmentShader,y=this._getShaderStage(t),R=this._getShaderStage(o),G=this._getShaderCacheForMaterial(e);return G.has(y)===!1&&(G.add(y),y.usedTimes++),G.has(R)===!1&&(G.add(R),R.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const o of t)o.usedTimes--,o.usedTimes===0&&this.shaderCache.delete(o.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let o=t.get(e);return o===void 0&&(o=new Set,t.set(e,o)),o}_getShaderStage(e){const t=this.shaderCache;let o=t.get(e);return o===void 0&&(o=new WebGLShaderStage(e),t.set(e,o)),o}}class WebGLShaderStage{constructor(e){this.id=_id++,this.code=e,this.usedTimes=0}}function WebGLPrograms(r,e,t,o,y,R,G){const K=new Layers,Y=new WebGLShaderCache,Q=new Set,ee=[],ie=y.logarithmicDepthBuffer,re=y.vertexTextures;let se=y.precision;const le={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function ce(ye){return Q.add(ye),ye===0?"uv":`uv${ye}`}function oe(ye,de,Me,Le,Pe){const Ue=Le.fog,$e=Pe.geometry,Ve=ye.isMeshStandardMaterial?Le.environment:null,Ce=(ye.isMeshStandardMaterial?t:e).get(ye.envMap||Ve),De=Ce&&Ce.mapping===CubeUVReflectionMapping?Ce.image.height:null,Oe=le[ye.type];ye.precision!==null&&(se=y.getMaxPrecision(ye.precision),se!==ye.precision&&console.warn("THREE.WebGLProgram.getParameters:",ye.precision,"not supported, using",se,"instead."));const Te=$e.morphAttributes.position||$e.morphAttributes.normal||$e.morphAttributes.color,Ne=Te!==void 0?Te.length:0;let Ye=0;$e.morphAttributes.position!==void 0&&(Ye=1),$e.morphAttributes.normal!==void 0&&(Ye=2),$e.morphAttributes.color!==void 0&&(Ye=3);let Qe,qe,Ze,ct;if(Oe){const gi=ShaderLib[Oe];Qe=gi.vertexShader,qe=gi.fragmentShader}else Qe=ye.vertexShader,qe=ye.fragmentShader,Y.update(ye),Ze=Y.getVertexShaderID(ye),ct=Y.getFragmentShaderID(ye);const xt=r.getRenderTarget(),un=r.state.buffers.depth.getReversed(),Vn=Pe.isInstancedMesh===!0,In=Pe.isBatchedMesh===!0,Un=!!ye.map,kn=!!ye.matcap,Ln=!!Ce,Ke=!!ye.aoMap,Qn=!!ye.lightMap,yn=!!ye.bumpMap,kt=!!ye.normalMap,cn=!!ye.displacementMap,Mn=!!ye.emissiveMap,Qt=!!ye.metalnessMap,He=!!ye.roughnessMap,ze=ye.anisotropy>0,Mt=ye.clearcoat>0,hn=ye.dispersion>0,En=ye.iridescence>0,an=ye.sheen>0,Cn=ye.transmission>0,Pn=ze&&!!ye.anisotropyMap,Fn=Mt&&!!ye.clearcoatMap,pi=Mt&&!!ye.clearcoatNormalMap,On=Mt&&!!ye.clearcoatRoughnessMap,Kn=En&&!!ye.iridescenceMap,ei=En&&!!ye.iridescenceThicknessMap,ti=an&&!!ye.sheenColorMap,Gn=an&&!!ye.sheenRoughnessMap,yt=!!ye.specularMap,xn=!!ye.specularColorMap,Xn=!!ye.specularIntensityMap,pt=Cn&&!!ye.transmissionMap,Nn=Cn&&!!ye.thicknessMap,gn=!!ye.gradientMap,Tn=!!ye.alphaMap,$n=ye.alphaTest>0,Hn=!!ye.alphaHash,ri=!!ye.extensions;let Ei=NoToneMapping;ye.toneMapped&&(xt===null||xt.isXRRenderTarget===!0)&&(Ei=r.toneMapping);const Hi={shaderID:Oe,shaderType:ye.type,shaderName:ye.name,vertexShader:Qe,fragmentShader:qe,defines:ye.defines,customVertexShaderID:Ze,customFragmentShaderID:ct,isRawShaderMaterial:ye.isRawShaderMaterial===!0,glslVersion:ye.glslVersion,precision:se,batching:In,batchingColor:In&&Pe._colorsTexture!==null,instancing:Vn,instancingColor:Vn&&Pe.instanceColor!==null,instancingMorph:Vn&&Pe.morphTexture!==null,supportsVertexTextures:re,outputColorSpace:xt===null?r.outputColorSpace:xt.isXRRenderTarget===!0?xt.texture.colorSpace:LinearSRGBColorSpace,alphaToCoverage:!!ye.alphaToCoverage,map:Un,matcap:kn,envMap:Ln,envMapMode:Ln&&Ce.mapping,envMapCubeUVHeight:De,aoMap:Ke,lightMap:Qn,bumpMap:yn,normalMap:kt,displacementMap:re&&cn,emissiveMap:Mn,normalMapObjectSpace:kt&&ye.normalMapType===ObjectSpaceNormalMap,normalMapTangentSpace:kt&&ye.normalMapType===TangentSpaceNormalMap,metalnessMap:Qt,roughnessMap:He,anisotropy:ze,anisotropyMap:Pn,clearcoat:Mt,clearcoatMap:Fn,clearcoatNormalMap:pi,clearcoatRoughnessMap:On,dispersion:hn,iridescence:En,iridescenceMap:Kn,iridescenceThicknessMap:ei,sheen:an,sheenColorMap:ti,sheenRoughnessMap:Gn,specularMap:yt,specularColorMap:xn,specularIntensityMap:Xn,transmission:Cn,transmissionMap:pt,thicknessMap:Nn,gradientMap:gn,opaque:ye.transparent===!1&&ye.blending===NormalBlending&&ye.alphaToCoverage===!1,alphaMap:Tn,alphaTest:$n,alphaHash:Hn,combine:ye.combine,mapUv:Un&&ce(ye.map.channel),aoMapUv:Ke&&ce(ye.aoMap.channel),lightMapUv:Qn&&ce(ye.lightMap.channel),bumpMapUv:yn&&ce(ye.bumpMap.channel),normalMapUv:kt&&ce(ye.normalMap.channel),displacementMapUv:cn&&ce(ye.displacementMap.channel),emissiveMapUv:Mn&&ce(ye.emissiveMap.channel),metalnessMapUv:Qt&&ce(ye.metalnessMap.channel),roughnessMapUv:He&&ce(ye.roughnessMap.channel),anisotropyMapUv:Pn&&ce(ye.anisotropyMap.channel),clearcoatMapUv:Fn&&ce(ye.clearcoatMap.channel),clearcoatNormalMapUv:pi&&ce(ye.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:On&&ce(ye.clearcoatRoughnessMap.channel),iridescenceMapUv:Kn&&ce(ye.iridescenceMap.channel),iridescenceThicknessMapUv:ei&&ce(ye.iridescenceThicknessMap.channel),sheenColorMapUv:ti&&ce(ye.sheenColorMap.channel),sheenRoughnessMapUv:Gn&&ce(ye.sheenRoughnessMap.channel),specularMapUv:yt&&ce(ye.specularMap.channel),specularColorMapUv:xn&&ce(ye.specularColorMap.channel),specularIntensityMapUv:Xn&&ce(ye.specularIntensityMap.channel),transmissionMapUv:pt&&ce(ye.transmissionMap.channel),thicknessMapUv:Nn&&ce(ye.thicknessMap.channel),alphaMapUv:Tn&&ce(ye.alphaMap.channel),vertexTangents:!!$e.attributes.tangent&&(kt||ze),vertexColors:ye.vertexColors,vertexAlphas:ye.vertexColors===!0&&!!$e.attributes.color&&$e.attributes.color.itemSize===4,pointsUvs:Pe.isPoints===!0&&!!$e.attributes.uv&&(Un||Tn),fog:!!Ue,useFog:ye.fog===!0,fogExp2:!!Ue&&Ue.isFogExp2,flatShading:ye.flatShading===!0,sizeAttenuation:ye.sizeAttenuation===!0,logarithmicDepthBuffer:ie,reverseDepthBuffer:un,skinning:Pe.isSkinnedMesh===!0,morphTargets:$e.morphAttributes.position!==void 0,morphNormals:$e.morphAttributes.normal!==void 0,morphColors:$e.morphAttributes.color!==void 0,morphTargetsCount:Ne,morphTextureStride:Ye,numDirLights:de.directional.length,numPointLights:de.point.length,numSpotLights:de.spot.length,numSpotLightMaps:de.spotLightMap.length,numRectAreaLights:de.rectArea.length,numHemiLights:de.hemi.length,numDirLightShadows:de.directionalShadowMap.length,numPointLightShadows:de.pointShadowMap.length,numSpotLightShadows:de.spotShadowMap.length,numSpotLightShadowsWithMaps:de.numSpotLightShadowsWithMaps,numLightProbes:de.numLightProbes,numClippingPlanes:G.numPlanes,numClipIntersection:G.numIntersection,dithering:ye.dithering,shadowMapEnabled:r.shadowMap.enabled&&Me.length>0,shadowMapType:r.shadowMap.type,toneMapping:Ei,decodeVideoTexture:Un&&ye.map.isVideoTexture===!0&&ColorManagement.getTransfer(ye.map.colorSpace)===SRGBTransfer,decodeVideoTextureEmissive:Mn&&ye.emissiveMap.isVideoTexture===!0&&ColorManagement.getTransfer(ye.emissiveMap.colorSpace)===SRGBTransfer,premultipliedAlpha:ye.premultipliedAlpha,doubleSided:ye.side===DoubleSide,flipSided:ye.side===BackSide,useDepthPacking:ye.depthPacking>=0,depthPacking:ye.depthPacking||0,index0AttributeName:ye.index0AttributeName,extensionClipCullDistance:ri&&ye.extensions.clipCullDistance===!0&&o.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(ri&&ye.extensions.multiDraw===!0||In)&&o.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:o.has("KHR_parallel_shader_compile"),customProgramCacheKey:ye.customProgramCacheKey()};return Hi.vertexUv1s=Q.has(1),Hi.vertexUv2s=Q.has(2),Hi.vertexUv3s=Q.has(3),Q.clear(),Hi}function ue(ye){const de=[];if(ye.shaderID?de.push(ye.shaderID):(de.push(ye.customVertexShaderID),de.push(ye.customFragmentShaderID)),ye.defines!==void 0)for(const Me in ye.defines)de.push(Me),de.push(ye.defines[Me]);return ye.isRawShaderMaterial===!1&&(ge(de,ye),ve(de,ye),de.push(r.outputColorSpace)),de.push(ye.customProgramCacheKey),de.join()}function ge(ye,de){ye.push(de.precision),ye.push(de.outputColorSpace),ye.push(de.envMapMode),ye.push(de.envMapCubeUVHeight),ye.push(de.mapUv),ye.push(de.alphaMapUv),ye.push(de.lightMapUv),ye.push(de.aoMapUv),ye.push(de.bumpMapUv),ye.push(de.normalMapUv),ye.push(de.displacementMapUv),ye.push(de.emissiveMapUv),ye.push(de.metalnessMapUv),ye.push(de.roughnessMapUv),ye.push(de.anisotropyMapUv),ye.push(de.clearcoatMapUv),ye.push(de.clearcoatNormalMapUv),ye.push(de.clearcoatRoughnessMapUv),ye.push(de.iridescenceMapUv),ye.push(de.iridescenceThicknessMapUv),ye.push(de.sheenColorMapUv),ye.push(de.sheenRoughnessMapUv),ye.push(de.specularMapUv),ye.push(de.specularColorMapUv),ye.push(de.specularIntensityMapUv),ye.push(de.transmissionMapUv),ye.push(de.thicknessMapUv),ye.push(de.combine),ye.push(de.fogExp2),ye.push(de.sizeAttenuation),ye.push(de.morphTargetsCount),ye.push(de.morphAttributeCount),ye.push(de.numDirLights),ye.push(de.numPointLights),ye.push(de.numSpotLights),ye.push(de.numSpotLightMaps),ye.push(de.numHemiLights),ye.push(de.numRectAreaLights),ye.push(de.numDirLightShadows),ye.push(de.numPointLightShadows),ye.push(de.numSpotLightShadows),ye.push(de.numSpotLightShadowsWithMaps),ye.push(de.numLightProbes),ye.push(de.shadowMapType),ye.push(de.toneMapping),ye.push(de.numClippingPlanes),ye.push(de.numClipIntersection),ye.push(de.depthPacking)}function ve(ye,de){K.disableAll(),de.supportsVertexTextures&&K.enable(0),de.instancing&&K.enable(1),de.instancingColor&&K.enable(2),de.instancingMorph&&K.enable(3),de.matcap&&K.enable(4),de.envMap&&K.enable(5),de.normalMapObjectSpace&&K.enable(6),de.normalMapTangentSpace&&K.enable(7),de.clearcoat&&K.enable(8),de.iridescence&&K.enable(9),de.alphaTest&&K.enable(10),de.vertexColors&&K.enable(11),de.vertexAlphas&&K.enable(12),de.vertexUv1s&&K.enable(13),de.vertexUv2s&&K.enable(14),de.vertexUv3s&&K.enable(15),de.vertexTangents&&K.enable(16),de.anisotropy&&K.enable(17),de.alphaHash&&K.enable(18),de.batching&&K.enable(19),de.dispersion&&K.enable(20),de.batchingColor&&K.enable(21),ye.push(K.mask),K.disableAll(),de.fog&&K.enable(0),de.useFog&&K.enable(1),de.flatShading&&K.enable(2),de.logarithmicDepthBuffer&&K.enable(3),de.reverseDepthBuffer&&K.enable(4),de.skinning&&K.enable(5),de.morphTargets&&K.enable(6),de.morphNormals&&K.enable(7),de.morphColors&&K.enable(8),de.premultipliedAlpha&&K.enable(9),de.shadowMapEnabled&&K.enable(10),de.doubleSided&&K.enable(11),de.flipSided&&K.enable(12),de.useDepthPacking&&K.enable(13),de.dithering&&K.enable(14),de.transmission&&K.enable(15),de.sheen&&K.enable(16),de.opaque&&K.enable(17),de.pointsUvs&&K.enable(18),de.decodeVideoTexture&&K.enable(19),de.decodeVideoTextureEmissive&&K.enable(20),de.alphaToCoverage&&K.enable(21),ye.push(K.mask)}function _e(ye){const de=le[ye.type];let Me;if(de){const Le=ShaderLib[de];Me=UniformsUtils.clone(Le.uniforms)}else Me=ye.uniforms;return Me}function be(ye,de){let Me;for(let Le=0,Pe=ee.length;Le<Pe;Le++){const Ue=ee[Le];if(Ue.cacheKey===de){Me=Ue,++Me.usedTimes;break}}return Me===void 0&&(Me=new WebGLProgram(r,de,ye,R),ee.push(Me)),Me}function Re(ye){if(--ye.usedTimes===0){const de=ee.indexOf(ye);ee[de]=ee[ee.length-1],ee.pop(),ye.destroy()}}function Se(ye){Y.remove(ye)}function Ee(){Y.dispose()}return{getParameters:oe,getProgramCacheKey:ue,getUniforms:_e,acquireProgram:be,releaseProgram:Re,releaseShaderCache:Se,programs:ee,dispose:Ee}}function WebGLProperties(){let r=new WeakMap;function e(G){return r.has(G)}function t(G){let K=r.get(G);return K===void 0&&(K={},r.set(G,K)),K}function o(G){r.delete(G)}function y(G,K,Y){r.get(G)[K]=Y}function R(){r=new WeakMap}return{has:e,get:t,remove:o,update:y,dispose:R}}function painterSortStable(r,e){return r.groupOrder!==e.groupOrder?r.groupOrder-e.groupOrder:r.renderOrder!==e.renderOrder?r.renderOrder-e.renderOrder:r.material.id!==e.material.id?r.material.id-e.material.id:r.z!==e.z?r.z-e.z:r.id-e.id}function reversePainterSortStable(r,e){return r.groupOrder!==e.groupOrder?r.groupOrder-e.groupOrder:r.renderOrder!==e.renderOrder?r.renderOrder-e.renderOrder:r.z!==e.z?e.z-r.z:r.id-e.id}function WebGLRenderList(){const r=[];let e=0;const t=[],o=[],y=[];function R(){e=0,t.length=0,o.length=0,y.length=0}function G(ie,re,se,le,ce,oe){let ue=r[e];return ue===void 0?(ue={id:ie.id,object:ie,geometry:re,material:se,groupOrder:le,renderOrder:ie.renderOrder,z:ce,group:oe},r[e]=ue):(ue.id=ie.id,ue.object=ie,ue.geometry=re,ue.material=se,ue.groupOrder=le,ue.renderOrder=ie.renderOrder,ue.z=ce,ue.group=oe),e++,ue}function K(ie,re,se,le,ce,oe){const ue=G(ie,re,se,le,ce,oe);se.transmission>0?o.push(ue):se.transparent===!0?y.push(ue):t.push(ue)}function Y(ie,re,se,le,ce,oe){const ue=G(ie,re,se,le,ce,oe);se.transmission>0?o.unshift(ue):se.transparent===!0?y.unshift(ue):t.unshift(ue)}function Q(ie,re){t.length>1&&t.sort(ie||painterSortStable),o.length>1&&o.sort(re||reversePainterSortStable),y.length>1&&y.sort(re||reversePainterSortStable)}function ee(){for(let ie=e,re=r.length;ie<re;ie++){const se=r[ie];if(se.id===null)break;se.id=null,se.object=null,se.geometry=null,se.material=null,se.group=null}}return{opaque:t,transmissive:o,transparent:y,init:R,push:K,unshift:Y,finish:ee,sort:Q}}function WebGLRenderLists(){let r=new WeakMap;function e(o,y){const R=r.get(o);let G;return R===void 0?(G=new WebGLRenderList,r.set(o,[G])):y>=R.length?(G=new WebGLRenderList,R.push(G)):G=R[y],G}function t(){r=new WeakMap}return{get:e,dispose:t}}function UniformsCache(){const r={};return{get:function(e){if(r[e.id]!==void 0)return r[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new Vector3,color:new Color};break;case"SpotLight":t={position:new Vector3,direction:new Vector3,color:new Color,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new Vector3,color:new Color,distance:0,decay:0};break;case"HemisphereLight":t={direction:new Vector3,skyColor:new Color,groundColor:new Color};break;case"RectAreaLight":t={color:new Color,position:new Vector3,halfWidth:new Vector3,halfHeight:new Vector3};break}return r[e.id]=t,t}}}function ShadowUniformsCache(){const r={};return{get:function(e){if(r[e.id]!==void 0)return r[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vector2};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vector2};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vector2,shadowCameraNear:1,shadowCameraFar:1e3};break}return r[e.id]=t,t}}}let nextVersion=0;function shadowCastingAndTexturingLightsFirst(r,e){return(e.castShadow?2:0)-(r.castShadow?2:0)+(e.map?1:0)-(r.map?1:0)}function WebGLLights(r){const e=new UniformsCache,t=ShadowUniformsCache(),o={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let Q=0;Q<9;Q++)o.probe.push(new Vector3);const y=new Vector3,R=new Matrix4,G=new Matrix4;function K(Q){let ee=0,ie=0,re=0;for(let ye=0;ye<9;ye++)o.probe[ye].set(0,0,0);let se=0,le=0,ce=0,oe=0,ue=0,ge=0,ve=0,_e=0,be=0,Re=0,Se=0;Q.sort(shadowCastingAndTexturingLightsFirst);for(let ye=0,de=Q.length;ye<de;ye++){const Me=Q[ye],Le=Me.color,Pe=Me.intensity,Ue=Me.distance,$e=Me.shadow&&Me.shadow.map?Me.shadow.map.texture:null;if(Me.isAmbientLight)ee+=Le.r*Pe,ie+=Le.g*Pe,re+=Le.b*Pe;else if(Me.isLightProbe){for(let Ve=0;Ve<9;Ve++)o.probe[Ve].addScaledVector(Me.sh.coefficients[Ve],Pe);Se++}else if(Me.isDirectionalLight){const Ve=e.get(Me);if(Ve.color.copy(Me.color).multiplyScalar(Me.intensity),Me.castShadow){const Ce=Me.shadow,De=t.get(Me);De.shadowIntensity=Ce.intensity,De.shadowBias=Ce.bias,De.shadowNormalBias=Ce.normalBias,De.shadowRadius=Ce.radius,De.shadowMapSize=Ce.mapSize,o.directionalShadow[se]=De,o.directionalShadowMap[se]=$e,o.directionalShadowMatrix[se]=Me.shadow.matrix,ge++}o.directional[se]=Ve,se++}else if(Me.isSpotLight){const Ve=e.get(Me);Ve.position.setFromMatrixPosition(Me.matrixWorld),Ve.color.copy(Le).multiplyScalar(Pe),Ve.distance=Ue,Ve.coneCos=Math.cos(Me.angle),Ve.penumbraCos=Math.cos(Me.angle*(1-Me.penumbra)),Ve.decay=Me.decay,o.spot[ce]=Ve;const Ce=Me.shadow;if(Me.map&&(o.spotLightMap[be]=Me.map,be++,Ce.updateMatrices(Me),Me.castShadow&&Re++),o.spotLightMatrix[ce]=Ce.matrix,Me.castShadow){const De=t.get(Me);De.shadowIntensity=Ce.intensity,De.shadowBias=Ce.bias,De.shadowNormalBias=Ce.normalBias,De.shadowRadius=Ce.radius,De.shadowMapSize=Ce.mapSize,o.spotShadow[ce]=De,o.spotShadowMap[ce]=$e,_e++}ce++}else if(Me.isRectAreaLight){const Ve=e.get(Me);Ve.color.copy(Le).multiplyScalar(Pe),Ve.halfWidth.set(Me.width*.5,0,0),Ve.halfHeight.set(0,Me.height*.5,0),o.rectArea[oe]=Ve,oe++}else if(Me.isPointLight){const Ve=e.get(Me);if(Ve.color.copy(Me.color).multiplyScalar(Me.intensity),Ve.distance=Me.distance,Ve.decay=Me.decay,Me.castShadow){const Ce=Me.shadow,De=t.get(Me);De.shadowIntensity=Ce.intensity,De.shadowBias=Ce.bias,De.shadowNormalBias=Ce.normalBias,De.shadowRadius=Ce.radius,De.shadowMapSize=Ce.mapSize,De.shadowCameraNear=Ce.camera.near,De.shadowCameraFar=Ce.camera.far,o.pointShadow[le]=De,o.pointShadowMap[le]=$e,o.pointShadowMatrix[le]=Me.shadow.matrix,ve++}o.point[le]=Ve,le++}else if(Me.isHemisphereLight){const Ve=e.get(Me);Ve.skyColor.copy(Me.color).multiplyScalar(Pe),Ve.groundColor.copy(Me.groundColor).multiplyScalar(Pe),o.hemi[ue]=Ve,ue++}}oe>0&&(r.has("OES_texture_float_linear")===!0?(o.rectAreaLTC1=UniformsLib.LTC_FLOAT_1,o.rectAreaLTC2=UniformsLib.LTC_FLOAT_2):(o.rectAreaLTC1=UniformsLib.LTC_HALF_1,o.rectAreaLTC2=UniformsLib.LTC_HALF_2)),o.ambient[0]=ee,o.ambient[1]=ie,o.ambient[2]=re;const Ee=o.hash;(Ee.directionalLength!==se||Ee.pointLength!==le||Ee.spotLength!==ce||Ee.rectAreaLength!==oe||Ee.hemiLength!==ue||Ee.numDirectionalShadows!==ge||Ee.numPointShadows!==ve||Ee.numSpotShadows!==_e||Ee.numSpotMaps!==be||Ee.numLightProbes!==Se)&&(o.directional.length=se,o.spot.length=ce,o.rectArea.length=oe,o.point.length=le,o.hemi.length=ue,o.directionalShadow.length=ge,o.directionalShadowMap.length=ge,o.pointShadow.length=ve,o.pointShadowMap.length=ve,o.spotShadow.length=_e,o.spotShadowMap.length=_e,o.directionalShadowMatrix.length=ge,o.pointShadowMatrix.length=ve,o.spotLightMatrix.length=_e+be-Re,o.spotLightMap.length=be,o.numSpotLightShadowsWithMaps=Re,o.numLightProbes=Se,Ee.directionalLength=se,Ee.pointLength=le,Ee.spotLength=ce,Ee.rectAreaLength=oe,Ee.hemiLength=ue,Ee.numDirectionalShadows=ge,Ee.numPointShadows=ve,Ee.numSpotShadows=_e,Ee.numSpotMaps=be,Ee.numLightProbes=Se,o.version=nextVersion++)}function Y(Q,ee){let ie=0,re=0,se=0,le=0,ce=0;const oe=ee.matrixWorldInverse;for(let ue=0,ge=Q.length;ue<ge;ue++){const ve=Q[ue];if(ve.isDirectionalLight){const _e=o.directional[ie];_e.direction.setFromMatrixPosition(ve.matrixWorld),y.setFromMatrixPosition(ve.target.matrixWorld),_e.direction.sub(y),_e.direction.transformDirection(oe),ie++}else if(ve.isSpotLight){const _e=o.spot[se];_e.position.setFromMatrixPosition(ve.matrixWorld),_e.position.applyMatrix4(oe),_e.direction.setFromMatrixPosition(ve.matrixWorld),y.setFromMatrixPosition(ve.target.matrixWorld),_e.direction.sub(y),_e.direction.transformDirection(oe),se++}else if(ve.isRectAreaLight){const _e=o.rectArea[le];_e.position.setFromMatrixPosition(ve.matrixWorld),_e.position.applyMatrix4(oe),G.identity(),R.copy(ve.matrixWorld),R.premultiply(oe),G.extractRotation(R),_e.halfWidth.set(ve.width*.5,0,0),_e.halfHeight.set(0,ve.height*.5,0),_e.halfWidth.applyMatrix4(G),_e.halfHeight.applyMatrix4(G),le++}else if(ve.isPointLight){const _e=o.point[re];_e.position.setFromMatrixPosition(ve.matrixWorld),_e.position.applyMatrix4(oe),re++}else if(ve.isHemisphereLight){const _e=o.hemi[ce];_e.direction.setFromMatrixPosition(ve.matrixWorld),_e.direction.transformDirection(oe),ce++}}}return{setup:K,setupView:Y,state:o}}function WebGLRenderState(r){const e=new WebGLLights(r),t=[],o=[];function y(ee){Q.camera=ee,t.length=0,o.length=0}function R(ee){t.push(ee)}function G(ee){o.push(ee)}function K(){e.setup(t)}function Y(ee){e.setupView(t,ee)}const Q={lightsArray:t,shadowsArray:o,camera:null,lights:e,transmissionRenderTarget:{}};return{init:y,state:Q,setupLights:K,setupLightsView:Y,pushLight:R,pushShadow:G}}function WebGLRenderStates(r){let e=new WeakMap;function t(y,R=0){const G=e.get(y);let K;return G===void 0?(K=new WebGLRenderState(r),e.set(y,[K])):R>=G.length?(K=new WebGLRenderState(r),G.push(K)):K=G[R],K}function o(){e=new WeakMap}return{get:t,dispose:o}}const vertex=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,fragment=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function WebGLShadowMap(r,e,t){let o=new Frustum;const y=new Vector2,R=new Vector2,G=new Vector4,K=new MeshDepthMaterial({depthPacking:RGBADepthPacking}),Y=new MeshDistanceMaterial,Q={},ee=t.maxTextureSize,ie={[FrontSide]:BackSide,[BackSide]:FrontSide,[DoubleSide]:DoubleSide},re=new ShaderMaterial({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Vector2},radius:{value:4}},vertexShader:vertex,fragmentShader:fragment}),se=re.clone();se.defines.HORIZONTAL_PASS=1;const le=new BufferGeometry;le.setAttribute("position",new BufferAttribute(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const ce=new Mesh(le,re),oe=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=PCFShadowMap;let ue=this.type;this.render=function(Re,Se,Ee){if(oe.enabled===!1||oe.autoUpdate===!1&&oe.needsUpdate===!1||Re.length===0)return;const ye=r.getRenderTarget(),de=r.getActiveCubeFace(),Me=r.getActiveMipmapLevel(),Le=r.state;Le.setBlending(NoBlending),Le.buffers.color.setClear(1,1,1,1),Le.buffers.depth.setTest(!0),Le.setScissorTest(!1);const Pe=ue!==VSMShadowMap&&this.type===VSMShadowMap,Ue=ue===VSMShadowMap&&this.type!==VSMShadowMap;for(let $e=0,Ve=Re.length;$e<Ve;$e++){const Ce=Re[$e],De=Ce.shadow;if(De===void 0){console.warn("THREE.WebGLShadowMap:",Ce,"has no shadow.");continue}if(De.autoUpdate===!1&&De.needsUpdate===!1)continue;y.copy(De.mapSize);const Oe=De.getFrameExtents();if(y.multiply(Oe),R.copy(De.mapSize),(y.x>ee||y.y>ee)&&(y.x>ee&&(R.x=Math.floor(ee/Oe.x),y.x=R.x*Oe.x,De.mapSize.x=R.x),y.y>ee&&(R.y=Math.floor(ee/Oe.y),y.y=R.y*Oe.y,De.mapSize.y=R.y)),De.map===null||Pe===!0||Ue===!0){const Ne=this.type!==VSMShadowMap?{minFilter:NearestFilter,magFilter:NearestFilter}:{};De.map!==null&&De.map.dispose(),De.map=new WebGLRenderTarget(y.x,y.y,Ne),De.map.texture.name=Ce.name+".shadowMap",De.camera.updateProjectionMatrix()}r.setRenderTarget(De.map),r.clear();const Te=De.getViewportCount();for(let Ne=0;Ne<Te;Ne++){const Ye=De.getViewport(Ne);G.set(R.x*Ye.x,R.y*Ye.y,R.x*Ye.z,R.y*Ye.w),Le.viewport(G),De.updateMatrices(Ce,Ne),o=De.getFrustum(),_e(Se,Ee,De.camera,Ce,this.type)}De.isPointLightShadow!==!0&&this.type===VSMShadowMap&&ge(De,Ee),De.needsUpdate=!1}ue=this.type,oe.needsUpdate=!1,r.setRenderTarget(ye,de,Me)};function ge(Re,Se){const Ee=e.update(ce);re.defines.VSM_SAMPLES!==Re.blurSamples&&(re.defines.VSM_SAMPLES=Re.blurSamples,se.defines.VSM_SAMPLES=Re.blurSamples,re.needsUpdate=!0,se.needsUpdate=!0),Re.mapPass===null&&(Re.mapPass=new WebGLRenderTarget(y.x,y.y)),re.uniforms.shadow_pass.value=Re.map.texture,re.uniforms.resolution.value=Re.mapSize,re.uniforms.radius.value=Re.radius,r.setRenderTarget(Re.mapPass),r.clear(),r.renderBufferDirect(Se,null,Ee,re,ce,null),se.uniforms.shadow_pass.value=Re.mapPass.texture,se.uniforms.resolution.value=Re.mapSize,se.uniforms.radius.value=Re.radius,r.setRenderTarget(Re.map),r.clear(),r.renderBufferDirect(Se,null,Ee,se,ce,null)}function ve(Re,Se,Ee,ye){let de=null;const Me=Ee.isPointLight===!0?Re.customDistanceMaterial:Re.customDepthMaterial;if(Me!==void 0)de=Me;else if(de=Ee.isPointLight===!0?Y:K,r.localClippingEnabled&&Se.clipShadows===!0&&Array.isArray(Se.clippingPlanes)&&Se.clippingPlanes.length!==0||Se.displacementMap&&Se.displacementScale!==0||Se.alphaMap&&Se.alphaTest>0||Se.map&&Se.alphaTest>0){const Le=de.uuid,Pe=Se.uuid;let Ue=Q[Le];Ue===void 0&&(Ue={},Q[Le]=Ue);let $e=Ue[Pe];$e===void 0&&($e=de.clone(),Ue[Pe]=$e,Se.addEventListener("dispose",be)),de=$e}if(de.visible=Se.visible,de.wireframe=Se.wireframe,ye===VSMShadowMap?de.side=Se.shadowSide!==null?Se.shadowSide:Se.side:de.side=Se.shadowSide!==null?Se.shadowSide:ie[Se.side],de.alphaMap=Se.alphaMap,de.alphaTest=Se.alphaTest,de.map=Se.map,de.clipShadows=Se.clipShadows,de.clippingPlanes=Se.clippingPlanes,de.clipIntersection=Se.clipIntersection,de.displacementMap=Se.displacementMap,de.displacementScale=Se.displacementScale,de.displacementBias=Se.displacementBias,de.wireframeLinewidth=Se.wireframeLinewidth,de.linewidth=Se.linewidth,Ee.isPointLight===!0&&de.isMeshDistanceMaterial===!0){const Le=r.properties.get(de);Le.light=Ee}return de}function _e(Re,Se,Ee,ye,de){if(Re.visible===!1)return;if(Re.layers.test(Se.layers)&&(Re.isMesh||Re.isLine||Re.isPoints)&&(Re.castShadow||Re.receiveShadow&&de===VSMShadowMap)&&(!Re.frustumCulled||o.intersectsObject(Re))){Re.modelViewMatrix.multiplyMatrices(Ee.matrixWorldInverse,Re.matrixWorld);const Pe=e.update(Re),Ue=Re.material;if(Array.isArray(Ue)){const $e=Pe.groups;for(let Ve=0,Ce=$e.length;Ve<Ce;Ve++){const De=$e[Ve],Oe=Ue[De.materialIndex];if(Oe&&Oe.visible){const Te=ve(Re,Oe,ye,de);Re.onBeforeShadow(r,Re,Se,Ee,Pe,Te,De),r.renderBufferDirect(Ee,null,Pe,Te,Re,De),Re.onAfterShadow(r,Re,Se,Ee,Pe,Te,De)}}}else if(Ue.visible){const $e=ve(Re,Ue,ye,de);Re.onBeforeShadow(r,Re,Se,Ee,Pe,$e,null),r.renderBufferDirect(Ee,null,Pe,$e,Re,null),Re.onAfterShadow(r,Re,Se,Ee,Pe,$e,null)}}const Le=Re.children;for(let Pe=0,Ue=Le.length;Pe<Ue;Pe++)_e(Le[Pe],Se,Ee,ye,de)}function be(Re){Re.target.removeEventListener("dispose",be);for(const Ee in Q){const ye=Q[Ee],de=Re.target.uuid;de in ye&&(ye[de].dispose(),delete ye[de])}}}const reversedFuncs={[NeverDepth]:AlwaysDepth,[LessDepth]:GreaterDepth,[EqualDepth]:NotEqualDepth,[LessEqualDepth]:GreaterEqualDepth,[AlwaysDepth]:NeverDepth,[GreaterDepth]:LessDepth,[NotEqualDepth]:EqualDepth,[GreaterEqualDepth]:LessEqualDepth};function WebGLState(r,e){function t(){let pt=!1;const Nn=new Vector4;let gn=null;const Tn=new Vector4(0,0,0,0);return{setMask:function($n){gn!==$n&&!pt&&(r.colorMask($n,$n,$n,$n),gn=$n)},setLocked:function($n){pt=$n},setClear:function($n,Hn,ri,Ei,Hi){Hi===!0&&($n*=Ei,Hn*=Ei,ri*=Ei),Nn.set($n,Hn,ri,Ei),Tn.equals(Nn)===!1&&(r.clearColor($n,Hn,ri,Ei),Tn.copy(Nn))},reset:function(){pt=!1,gn=null,Tn.set(-1,0,0,0)}}}function o(){let pt=!1,Nn=!1,gn=null,Tn=null,$n=null;return{setReversed:function(Hn){if(Nn!==Hn){const ri=e.get("EXT_clip_control");Hn?ri.clipControlEXT(ri.LOWER_LEFT_EXT,ri.ZERO_TO_ONE_EXT):ri.clipControlEXT(ri.LOWER_LEFT_EXT,ri.NEGATIVE_ONE_TO_ONE_EXT),Nn=Hn;const Ei=$n;$n=null,this.setClear(Ei)}},getReversed:function(){return Nn},setTest:function(Hn){Hn?xt(r.DEPTH_TEST):un(r.DEPTH_TEST)},setMask:function(Hn){gn!==Hn&&!pt&&(r.depthMask(Hn),gn=Hn)},setFunc:function(Hn){if(Nn&&(Hn=reversedFuncs[Hn]),Tn!==Hn){switch(Hn){case NeverDepth:r.depthFunc(r.NEVER);break;case AlwaysDepth:r.depthFunc(r.ALWAYS);break;case LessDepth:r.depthFunc(r.LESS);break;case LessEqualDepth:r.depthFunc(r.LEQUAL);break;case EqualDepth:r.depthFunc(r.EQUAL);break;case GreaterEqualDepth:r.depthFunc(r.GEQUAL);break;case GreaterDepth:r.depthFunc(r.GREATER);break;case NotEqualDepth:r.depthFunc(r.NOTEQUAL);break;default:r.depthFunc(r.LEQUAL)}Tn=Hn}},setLocked:function(Hn){pt=Hn},setClear:function(Hn){$n!==Hn&&(Nn&&(Hn=1-Hn),r.clearDepth(Hn),$n=Hn)},reset:function(){pt=!1,gn=null,Tn=null,$n=null,Nn=!1}}}function y(){let pt=!1,Nn=null,gn=null,Tn=null,$n=null,Hn=null,ri=null,Ei=null,Hi=null;return{setTest:function(gi){pt||(gi?xt(r.STENCIL_TEST):un(r.STENCIL_TEST))},setMask:function(gi){Nn!==gi&&!pt&&(r.stencilMask(gi),Nn=gi)},setFunc:function(gi,vr,Ci){(gn!==gi||Tn!==vr||$n!==Ci)&&(r.stencilFunc(gi,vr,Ci),gn=gi,Tn=vr,$n=Ci)},setOp:function(gi,vr,Ci){(Hn!==gi||ri!==vr||Ei!==Ci)&&(r.stencilOp(gi,vr,Ci),Hn=gi,ri=vr,Ei=Ci)},setLocked:function(gi){pt=gi},setClear:function(gi){Hi!==gi&&(r.clearStencil(gi),Hi=gi)},reset:function(){pt=!1,Nn=null,gn=null,Tn=null,$n=null,Hn=null,ri=null,Ei=null,Hi=null}}}const R=new t,G=new o,K=new y,Y=new WeakMap,Q=new WeakMap;let ee={},ie={},re=new WeakMap,se=[],le=null,ce=!1,oe=null,ue=null,ge=null,ve=null,_e=null,be=null,Re=null,Se=new Color(0,0,0),Ee=0,ye=!1,de=null,Me=null,Le=null,Pe=null,Ue=null;const $e=r.getParameter(r.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let Ve=!1,Ce=0;const De=r.getParameter(r.VERSION);De.indexOf("WebGL")!==-1?(Ce=parseFloat(/^WebGL (\d)/.exec(De)[1]),Ve=Ce>=1):De.indexOf("OpenGL ES")!==-1&&(Ce=parseFloat(/^OpenGL ES (\d)/.exec(De)[1]),Ve=Ce>=2);let Oe=null,Te={};const Ne=r.getParameter(r.SCISSOR_BOX),Ye=r.getParameter(r.VIEWPORT),Qe=new Vector4().fromArray(Ne),qe=new Vector4().fromArray(Ye);function Ze(pt,Nn,gn,Tn){const $n=new Uint8Array(4),Hn=r.createTexture();r.bindTexture(pt,Hn),r.texParameteri(pt,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(pt,r.TEXTURE_MAG_FILTER,r.NEAREST);for(let ri=0;ri<gn;ri++)pt===r.TEXTURE_3D||pt===r.TEXTURE_2D_ARRAY?r.texImage3D(Nn,0,r.RGBA,1,1,Tn,0,r.RGBA,r.UNSIGNED_BYTE,$n):r.texImage2D(Nn+ri,0,r.RGBA,1,1,0,r.RGBA,r.UNSIGNED_BYTE,$n);return Hn}const ct={};ct[r.TEXTURE_2D]=Ze(r.TEXTURE_2D,r.TEXTURE_2D,1),ct[r.TEXTURE_CUBE_MAP]=Ze(r.TEXTURE_CUBE_MAP,r.TEXTURE_CUBE_MAP_POSITIVE_X,6),ct[r.TEXTURE_2D_ARRAY]=Ze(r.TEXTURE_2D_ARRAY,r.TEXTURE_2D_ARRAY,1,1),ct[r.TEXTURE_3D]=Ze(r.TEXTURE_3D,r.TEXTURE_3D,1,1),R.setClear(0,0,0,1),G.setClear(1),K.setClear(0),xt(r.DEPTH_TEST),G.setFunc(LessEqualDepth),yn(!1),kt(CullFaceBack),xt(r.CULL_FACE),Ke(NoBlending);function xt(pt){ee[pt]!==!0&&(r.enable(pt),ee[pt]=!0)}function un(pt){ee[pt]!==!1&&(r.disable(pt),ee[pt]=!1)}function Vn(pt,Nn){return ie[pt]!==Nn?(r.bindFramebuffer(pt,Nn),ie[pt]=Nn,pt===r.DRAW_FRAMEBUFFER&&(ie[r.FRAMEBUFFER]=Nn),pt===r.FRAMEBUFFER&&(ie[r.DRAW_FRAMEBUFFER]=Nn),!0):!1}function In(pt,Nn){let gn=se,Tn=!1;if(pt){gn=re.get(Nn),gn===void 0&&(gn=[],re.set(Nn,gn));const $n=pt.textures;if(gn.length!==$n.length||gn[0]!==r.COLOR_ATTACHMENT0){for(let Hn=0,ri=$n.length;Hn<ri;Hn++)gn[Hn]=r.COLOR_ATTACHMENT0+Hn;gn.length=$n.length,Tn=!0}}else gn[0]!==r.BACK&&(gn[0]=r.BACK,Tn=!0);Tn&&r.drawBuffers(gn)}function Un(pt){return le!==pt?(r.useProgram(pt),le=pt,!0):!1}const kn={[AddEquation]:r.FUNC_ADD,[SubtractEquation]:r.FUNC_SUBTRACT,[ReverseSubtractEquation]:r.FUNC_REVERSE_SUBTRACT};kn[MinEquation]=r.MIN,kn[MaxEquation]=r.MAX;const Ln={[ZeroFactor]:r.ZERO,[OneFactor]:r.ONE,[SrcColorFactor]:r.SRC_COLOR,[SrcAlphaFactor]:r.SRC_ALPHA,[SrcAlphaSaturateFactor]:r.SRC_ALPHA_SATURATE,[DstColorFactor]:r.DST_COLOR,[DstAlphaFactor]:r.DST_ALPHA,[OneMinusSrcColorFactor]:r.ONE_MINUS_SRC_COLOR,[OneMinusSrcAlphaFactor]:r.ONE_MINUS_SRC_ALPHA,[OneMinusDstColorFactor]:r.ONE_MINUS_DST_COLOR,[OneMinusDstAlphaFactor]:r.ONE_MINUS_DST_ALPHA,[ConstantColorFactor]:r.CONSTANT_COLOR,[OneMinusConstantColorFactor]:r.ONE_MINUS_CONSTANT_COLOR,[ConstantAlphaFactor]:r.CONSTANT_ALPHA,[OneMinusConstantAlphaFactor]:r.ONE_MINUS_CONSTANT_ALPHA};function Ke(pt,Nn,gn,Tn,$n,Hn,ri,Ei,Hi,gi){if(pt===NoBlending){ce===!0&&(un(r.BLEND),ce=!1);return}if(ce===!1&&(xt(r.BLEND),ce=!0),pt!==CustomBlending){if(pt!==oe||gi!==ye){if((ue!==AddEquation||_e!==AddEquation)&&(r.blendEquation(r.FUNC_ADD),ue=AddEquation,_e=AddEquation),gi)switch(pt){case NormalBlending:r.blendFuncSeparate(r.ONE,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA);break;case AdditiveBlending:r.blendFunc(r.ONE,r.ONE);break;case SubtractiveBlending:r.blendFuncSeparate(r.ZERO,r.ONE_MINUS_SRC_COLOR,r.ZERO,r.ONE);break;case MultiplyBlending:r.blendFuncSeparate(r.ZERO,r.SRC_COLOR,r.ZERO,r.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",pt);break}else switch(pt){case NormalBlending:r.blendFuncSeparate(r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA);break;case AdditiveBlending:r.blendFunc(r.SRC_ALPHA,r.ONE);break;case SubtractiveBlending:r.blendFuncSeparate(r.ZERO,r.ONE_MINUS_SRC_COLOR,r.ZERO,r.ONE);break;case MultiplyBlending:r.blendFunc(r.ZERO,r.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",pt);break}ge=null,ve=null,be=null,Re=null,Se.set(0,0,0),Ee=0,oe=pt,ye=gi}return}$n=$n||Nn,Hn=Hn||gn,ri=ri||Tn,(Nn!==ue||$n!==_e)&&(r.blendEquationSeparate(kn[Nn],kn[$n]),ue=Nn,_e=$n),(gn!==ge||Tn!==ve||Hn!==be||ri!==Re)&&(r.blendFuncSeparate(Ln[gn],Ln[Tn],Ln[Hn],Ln[ri]),ge=gn,ve=Tn,be=Hn,Re=ri),(Ei.equals(Se)===!1||Hi!==Ee)&&(r.blendColor(Ei.r,Ei.g,Ei.b,Hi),Se.copy(Ei),Ee=Hi),oe=pt,ye=!1}function Qn(pt,Nn){pt.side===DoubleSide?un(r.CULL_FACE):xt(r.CULL_FACE);let gn=pt.side===BackSide;Nn&&(gn=!gn),yn(gn),pt.blending===NormalBlending&&pt.transparent===!1?Ke(NoBlending):Ke(pt.blending,pt.blendEquation,pt.blendSrc,pt.blendDst,pt.blendEquationAlpha,pt.blendSrcAlpha,pt.blendDstAlpha,pt.blendColor,pt.blendAlpha,pt.premultipliedAlpha),G.setFunc(pt.depthFunc),G.setTest(pt.depthTest),G.setMask(pt.depthWrite),R.setMask(pt.colorWrite);const Tn=pt.stencilWrite;K.setTest(Tn),Tn&&(K.setMask(pt.stencilWriteMask),K.setFunc(pt.stencilFunc,pt.stencilRef,pt.stencilFuncMask),K.setOp(pt.stencilFail,pt.stencilZFail,pt.stencilZPass)),Mn(pt.polygonOffset,pt.polygonOffsetFactor,pt.polygonOffsetUnits),pt.alphaToCoverage===!0?xt(r.SAMPLE_ALPHA_TO_COVERAGE):un(r.SAMPLE_ALPHA_TO_COVERAGE)}function yn(pt){de!==pt&&(pt?r.frontFace(r.CW):r.frontFace(r.CCW),de=pt)}function kt(pt){pt!==CullFaceNone?(xt(r.CULL_FACE),pt!==Me&&(pt===CullFaceBack?r.cullFace(r.BACK):pt===CullFaceFront?r.cullFace(r.FRONT):r.cullFace(r.FRONT_AND_BACK))):un(r.CULL_FACE),Me=pt}function cn(pt){pt!==Le&&(Ve&&r.lineWidth(pt),Le=pt)}function Mn(pt,Nn,gn){pt?(xt(r.POLYGON_OFFSET_FILL),(Pe!==Nn||Ue!==gn)&&(r.polygonOffset(Nn,gn),Pe=Nn,Ue=gn)):un(r.POLYGON_OFFSET_FILL)}function Qt(pt){pt?xt(r.SCISSOR_TEST):un(r.SCISSOR_TEST)}function He(pt){pt===void 0&&(pt=r.TEXTURE0+$e-1),Oe!==pt&&(r.activeTexture(pt),Oe=pt)}function ze(pt,Nn,gn){gn===void 0&&(Oe===null?gn=r.TEXTURE0+$e-1:gn=Oe);let Tn=Te[gn];Tn===void 0&&(Tn={type:void 0,texture:void 0},Te[gn]=Tn),(Tn.type!==pt||Tn.texture!==Nn)&&(Oe!==gn&&(r.activeTexture(gn),Oe=gn),r.bindTexture(pt,Nn||ct[pt]),Tn.type=pt,Tn.texture=Nn)}function Mt(){const pt=Te[Oe];pt!==void 0&&pt.type!==void 0&&(r.bindTexture(pt.type,null),pt.type=void 0,pt.texture=void 0)}function hn(){try{r.compressedTexImage2D(...arguments)}catch(pt){console.error("THREE.WebGLState:",pt)}}function En(){try{r.compressedTexImage3D(...arguments)}catch(pt){console.error("THREE.WebGLState:",pt)}}function an(){try{r.texSubImage2D(...arguments)}catch(pt){console.error("THREE.WebGLState:",pt)}}function Cn(){try{r.texSubImage3D(...arguments)}catch(pt){console.error("THREE.WebGLState:",pt)}}function Pn(){try{r.compressedTexSubImage2D(...arguments)}catch(pt){console.error("THREE.WebGLState:",pt)}}function Fn(){try{r.compressedTexSubImage3D(...arguments)}catch(pt){console.error("THREE.WebGLState:",pt)}}function pi(){try{r.texStorage2D(...arguments)}catch(pt){console.error("THREE.WebGLState:",pt)}}function On(){try{r.texStorage3D(...arguments)}catch(pt){console.error("THREE.WebGLState:",pt)}}function Kn(){try{r.texImage2D(...arguments)}catch(pt){console.error("THREE.WebGLState:",pt)}}function ei(){try{r.texImage3D(...arguments)}catch(pt){console.error("THREE.WebGLState:",pt)}}function ti(pt){Qe.equals(pt)===!1&&(r.scissor(pt.x,pt.y,pt.z,pt.w),Qe.copy(pt))}function Gn(pt){qe.equals(pt)===!1&&(r.viewport(pt.x,pt.y,pt.z,pt.w),qe.copy(pt))}function yt(pt,Nn){let gn=Q.get(Nn);gn===void 0&&(gn=new WeakMap,Q.set(Nn,gn));let Tn=gn.get(pt);Tn===void 0&&(Tn=r.getUniformBlockIndex(Nn,pt.name),gn.set(pt,Tn))}function xn(pt,Nn){const Tn=Q.get(Nn).get(pt);Y.get(Nn)!==Tn&&(r.uniformBlockBinding(Nn,Tn,pt.__bindingPointIndex),Y.set(Nn,Tn))}function Xn(){r.disable(r.BLEND),r.disable(r.CULL_FACE),r.disable(r.DEPTH_TEST),r.disable(r.POLYGON_OFFSET_FILL),r.disable(r.SCISSOR_TEST),r.disable(r.STENCIL_TEST),r.disable(r.SAMPLE_ALPHA_TO_COVERAGE),r.blendEquation(r.FUNC_ADD),r.blendFunc(r.ONE,r.ZERO),r.blendFuncSeparate(r.ONE,r.ZERO,r.ONE,r.ZERO),r.blendColor(0,0,0,0),r.colorMask(!0,!0,!0,!0),r.clearColor(0,0,0,0),r.depthMask(!0),r.depthFunc(r.LESS),G.setReversed(!1),r.clearDepth(1),r.stencilMask(4294967295),r.stencilFunc(r.ALWAYS,0,4294967295),r.stencilOp(r.KEEP,r.KEEP,r.KEEP),r.clearStencil(0),r.cullFace(r.BACK),r.frontFace(r.CCW),r.polygonOffset(0,0),r.activeTexture(r.TEXTURE0),r.bindFramebuffer(r.FRAMEBUFFER,null),r.bindFramebuffer(r.DRAW_FRAMEBUFFER,null),r.bindFramebuffer(r.READ_FRAMEBUFFER,null),r.useProgram(null),r.lineWidth(1),r.scissor(0,0,r.canvas.width,r.canvas.height),r.viewport(0,0,r.canvas.width,r.canvas.height),ee={},Oe=null,Te={},ie={},re=new WeakMap,se=[],le=null,ce=!1,oe=null,ue=null,ge=null,ve=null,_e=null,be=null,Re=null,Se=new Color(0,0,0),Ee=0,ye=!1,de=null,Me=null,Le=null,Pe=null,Ue=null,Qe.set(0,0,r.canvas.width,r.canvas.height),qe.set(0,0,r.canvas.width,r.canvas.height),R.reset(),G.reset(),K.reset()}return{buffers:{color:R,depth:G,stencil:K},enable:xt,disable:un,bindFramebuffer:Vn,drawBuffers:In,useProgram:Un,setBlending:Ke,setMaterial:Qn,setFlipSided:yn,setCullFace:kt,setLineWidth:cn,setPolygonOffset:Mn,setScissorTest:Qt,activeTexture:He,bindTexture:ze,unbindTexture:Mt,compressedTexImage2D:hn,compressedTexImage3D:En,texImage2D:Kn,texImage3D:ei,updateUBOMapping:yt,uniformBlockBinding:xn,texStorage2D:pi,texStorage3D:On,texSubImage2D:an,texSubImage3D:Cn,compressedTexSubImage2D:Pn,compressedTexSubImage3D:Fn,scissor:ti,viewport:Gn,reset:Xn}}function WebGLTextures(r,e,t,o,y,R,G){const K=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,Y=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),Q=new Vector2,ee=new WeakMap;let ie;const re=new WeakMap;let se=!1;try{se=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function le(He,ze){return se?new OffscreenCanvas(He,ze):createElementNS("canvas")}function ce(He,ze,Mt){let hn=1;const En=Qt(He);if((En.width>Mt||En.height>Mt)&&(hn=Mt/Math.max(En.width,En.height)),hn<1)if(typeof HTMLImageElement<"u"&&He instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&He instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&He instanceof ImageBitmap||typeof VideoFrame<"u"&&He instanceof VideoFrame){const an=Math.floor(hn*En.width),Cn=Math.floor(hn*En.height);ie===void 0&&(ie=le(an,Cn));const Pn=ze?le(an,Cn):ie;return Pn.width=an,Pn.height=Cn,Pn.getContext("2d").drawImage(He,0,0,an,Cn),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+En.width+"x"+En.height+") to ("+an+"x"+Cn+")."),Pn}else return"data"in He&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+En.width+"x"+En.height+")."),He;return He}function oe(He){return He.generateMipmaps}function ue(He){r.generateMipmap(He)}function ge(He){return He.isWebGLCubeRenderTarget?r.TEXTURE_CUBE_MAP:He.isWebGL3DRenderTarget?r.TEXTURE_3D:He.isWebGLArrayRenderTarget||He.isCompressedArrayTexture?r.TEXTURE_2D_ARRAY:r.TEXTURE_2D}function ve(He,ze,Mt,hn,En=!1){if(He!==null){if(r[He]!==void 0)return r[He];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+He+"'")}let an=ze;if(ze===r.RED&&(Mt===r.FLOAT&&(an=r.R32F),Mt===r.HALF_FLOAT&&(an=r.R16F),Mt===r.UNSIGNED_BYTE&&(an=r.R8)),ze===r.RED_INTEGER&&(Mt===r.UNSIGNED_BYTE&&(an=r.R8UI),Mt===r.UNSIGNED_SHORT&&(an=r.R16UI),Mt===r.UNSIGNED_INT&&(an=r.R32UI),Mt===r.BYTE&&(an=r.R8I),Mt===r.SHORT&&(an=r.R16I),Mt===r.INT&&(an=r.R32I)),ze===r.RG&&(Mt===r.FLOAT&&(an=r.RG32F),Mt===r.HALF_FLOAT&&(an=r.RG16F),Mt===r.UNSIGNED_BYTE&&(an=r.RG8)),ze===r.RG_INTEGER&&(Mt===r.UNSIGNED_BYTE&&(an=r.RG8UI),Mt===r.UNSIGNED_SHORT&&(an=r.RG16UI),Mt===r.UNSIGNED_INT&&(an=r.RG32UI),Mt===r.BYTE&&(an=r.RG8I),Mt===r.SHORT&&(an=r.RG16I),Mt===r.INT&&(an=r.RG32I)),ze===r.RGB_INTEGER&&(Mt===r.UNSIGNED_BYTE&&(an=r.RGB8UI),Mt===r.UNSIGNED_SHORT&&(an=r.RGB16UI),Mt===r.UNSIGNED_INT&&(an=r.RGB32UI),Mt===r.BYTE&&(an=r.RGB8I),Mt===r.SHORT&&(an=r.RGB16I),Mt===r.INT&&(an=r.RGB32I)),ze===r.RGBA_INTEGER&&(Mt===r.UNSIGNED_BYTE&&(an=r.RGBA8UI),Mt===r.UNSIGNED_SHORT&&(an=r.RGBA16UI),Mt===r.UNSIGNED_INT&&(an=r.RGBA32UI),Mt===r.BYTE&&(an=r.RGBA8I),Mt===r.SHORT&&(an=r.RGBA16I),Mt===r.INT&&(an=r.RGBA32I)),ze===r.RGB&&Mt===r.UNSIGNED_INT_5_9_9_9_REV&&(an=r.RGB9_E5),ze===r.RGBA){const Cn=En?LinearTransfer:ColorManagement.getTransfer(hn);Mt===r.FLOAT&&(an=r.RGBA32F),Mt===r.HALF_FLOAT&&(an=r.RGBA16F),Mt===r.UNSIGNED_BYTE&&(an=Cn===SRGBTransfer?r.SRGB8_ALPHA8:r.RGBA8),Mt===r.UNSIGNED_SHORT_4_4_4_4&&(an=r.RGBA4),Mt===r.UNSIGNED_SHORT_5_5_5_1&&(an=r.RGB5_A1)}return(an===r.R16F||an===r.R32F||an===r.RG16F||an===r.RG32F||an===r.RGBA16F||an===r.RGBA32F)&&e.get("EXT_color_buffer_float"),an}function _e(He,ze){let Mt;return He?ze===null||ze===UnsignedIntType||ze===UnsignedInt248Type?Mt=r.DEPTH24_STENCIL8:ze===FloatType?Mt=r.DEPTH32F_STENCIL8:ze===UnsignedShortType&&(Mt=r.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):ze===null||ze===UnsignedIntType||ze===UnsignedInt248Type?Mt=r.DEPTH_COMPONENT24:ze===FloatType?Mt=r.DEPTH_COMPONENT32F:ze===UnsignedShortType&&(Mt=r.DEPTH_COMPONENT16),Mt}function be(He,ze){return oe(He)===!0||He.isFramebufferTexture&&He.minFilter!==NearestFilter&&He.minFilter!==LinearFilter?Math.log2(Math.max(ze.width,ze.height))+1:He.mipmaps!==void 0&&He.mipmaps.length>0?He.mipmaps.length:He.isCompressedTexture&&Array.isArray(He.image)?ze.mipmaps.length:1}function Re(He){const ze=He.target;ze.removeEventListener("dispose",Re),Ee(ze),ze.isVideoTexture&&ee.delete(ze)}function Se(He){const ze=He.target;ze.removeEventListener("dispose",Se),de(ze)}function Ee(He){const ze=o.get(He);if(ze.__webglInit===void 0)return;const Mt=He.source,hn=re.get(Mt);if(hn){const En=hn[ze.__cacheKey];En.usedTimes--,En.usedTimes===0&&ye(He),Object.keys(hn).length===0&&re.delete(Mt)}o.remove(He)}function ye(He){const ze=o.get(He);r.deleteTexture(ze.__webglTexture);const Mt=He.source,hn=re.get(Mt);delete hn[ze.__cacheKey],G.memory.textures--}function de(He){const ze=o.get(He);if(He.depthTexture&&(He.depthTexture.dispose(),o.remove(He.depthTexture)),He.isWebGLCubeRenderTarget)for(let hn=0;hn<6;hn++){if(Array.isArray(ze.__webglFramebuffer[hn]))for(let En=0;En<ze.__webglFramebuffer[hn].length;En++)r.deleteFramebuffer(ze.__webglFramebuffer[hn][En]);else r.deleteFramebuffer(ze.__webglFramebuffer[hn]);ze.__webglDepthbuffer&&r.deleteRenderbuffer(ze.__webglDepthbuffer[hn])}else{if(Array.isArray(ze.__webglFramebuffer))for(let hn=0;hn<ze.__webglFramebuffer.length;hn++)r.deleteFramebuffer(ze.__webglFramebuffer[hn]);else r.deleteFramebuffer(ze.__webglFramebuffer);if(ze.__webglDepthbuffer&&r.deleteRenderbuffer(ze.__webglDepthbuffer),ze.__webglMultisampledFramebuffer&&r.deleteFramebuffer(ze.__webglMultisampledFramebuffer),ze.__webglColorRenderbuffer)for(let hn=0;hn<ze.__webglColorRenderbuffer.length;hn++)ze.__webglColorRenderbuffer[hn]&&r.deleteRenderbuffer(ze.__webglColorRenderbuffer[hn]);ze.__webglDepthRenderbuffer&&r.deleteRenderbuffer(ze.__webglDepthRenderbuffer)}const Mt=He.textures;for(let hn=0,En=Mt.length;hn<En;hn++){const an=o.get(Mt[hn]);an.__webglTexture&&(r.deleteTexture(an.__webglTexture),G.memory.textures--),o.remove(Mt[hn])}o.remove(He)}let Me=0;function Le(){Me=0}function Pe(){const He=Me;return He>=y.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+He+" texture units while this GPU supports only "+y.maxTextures),Me+=1,He}function Ue(He){const ze=[];return ze.push(He.wrapS),ze.push(He.wrapT),ze.push(He.wrapR||0),ze.push(He.magFilter),ze.push(He.minFilter),ze.push(He.anisotropy),ze.push(He.internalFormat),ze.push(He.format),ze.push(He.type),ze.push(He.generateMipmaps),ze.push(He.premultiplyAlpha),ze.push(He.flipY),ze.push(He.unpackAlignment),ze.push(He.colorSpace),ze.join()}function $e(He,ze){const Mt=o.get(He);if(He.isVideoTexture&&cn(He),He.isRenderTargetTexture===!1&&He.version>0&&Mt.__version!==He.version){const hn=He.image;if(hn===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(hn.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{qe(Mt,He,ze);return}}t.bindTexture(r.TEXTURE_2D,Mt.__webglTexture,r.TEXTURE0+ze)}function Ve(He,ze){const Mt=o.get(He);if(He.version>0&&Mt.__version!==He.version){qe(Mt,He,ze);return}t.bindTexture(r.TEXTURE_2D_ARRAY,Mt.__webglTexture,r.TEXTURE0+ze)}function Ce(He,ze){const Mt=o.get(He);if(He.version>0&&Mt.__version!==He.version){qe(Mt,He,ze);return}t.bindTexture(r.TEXTURE_3D,Mt.__webglTexture,r.TEXTURE0+ze)}function De(He,ze){const Mt=o.get(He);if(He.version>0&&Mt.__version!==He.version){Ze(Mt,He,ze);return}t.bindTexture(r.TEXTURE_CUBE_MAP,Mt.__webglTexture,r.TEXTURE0+ze)}const Oe={[RepeatWrapping]:r.REPEAT,[ClampToEdgeWrapping]:r.CLAMP_TO_EDGE,[MirroredRepeatWrapping]:r.MIRRORED_REPEAT},Te={[NearestFilter]:r.NEAREST,[NearestMipmapNearestFilter]:r.NEAREST_MIPMAP_NEAREST,[NearestMipmapLinearFilter]:r.NEAREST_MIPMAP_LINEAR,[LinearFilter]:r.LINEAR,[LinearMipmapNearestFilter]:r.LINEAR_MIPMAP_NEAREST,[LinearMipmapLinearFilter]:r.LINEAR_MIPMAP_LINEAR},Ne={[NeverCompare]:r.NEVER,[AlwaysCompare]:r.ALWAYS,[LessCompare]:r.LESS,[LessEqualCompare]:r.LEQUAL,[EqualCompare]:r.EQUAL,[GreaterEqualCompare]:r.GEQUAL,[GreaterCompare]:r.GREATER,[NotEqualCompare]:r.NOTEQUAL};function Ye(He,ze){if(ze.type===FloatType&&e.has("OES_texture_float_linear")===!1&&(ze.magFilter===LinearFilter||ze.magFilter===LinearMipmapNearestFilter||ze.magFilter===NearestMipmapLinearFilter||ze.magFilter===LinearMipmapLinearFilter||ze.minFilter===LinearFilter||ze.minFilter===LinearMipmapNearestFilter||ze.minFilter===NearestMipmapLinearFilter||ze.minFilter===LinearMipmapLinearFilter)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),r.texParameteri(He,r.TEXTURE_WRAP_S,Oe[ze.wrapS]),r.texParameteri(He,r.TEXTURE_WRAP_T,Oe[ze.wrapT]),(He===r.TEXTURE_3D||He===r.TEXTURE_2D_ARRAY)&&r.texParameteri(He,r.TEXTURE_WRAP_R,Oe[ze.wrapR]),r.texParameteri(He,r.TEXTURE_MAG_FILTER,Te[ze.magFilter]),r.texParameteri(He,r.TEXTURE_MIN_FILTER,Te[ze.minFilter]),ze.compareFunction&&(r.texParameteri(He,r.TEXTURE_COMPARE_MODE,r.COMPARE_REF_TO_TEXTURE),r.texParameteri(He,r.TEXTURE_COMPARE_FUNC,Ne[ze.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(ze.magFilter===NearestFilter||ze.minFilter!==NearestMipmapLinearFilter&&ze.minFilter!==LinearMipmapLinearFilter||ze.type===FloatType&&e.has("OES_texture_float_linear")===!1)return;if(ze.anisotropy>1||o.get(ze).__currentAnisotropy){const Mt=e.get("EXT_texture_filter_anisotropic");r.texParameterf(He,Mt.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(ze.anisotropy,y.getMaxAnisotropy())),o.get(ze).__currentAnisotropy=ze.anisotropy}}}function Qe(He,ze){let Mt=!1;He.__webglInit===void 0&&(He.__webglInit=!0,ze.addEventListener("dispose",Re));const hn=ze.source;let En=re.get(hn);En===void 0&&(En={},re.set(hn,En));const an=Ue(ze);if(an!==He.__cacheKey){En[an]===void 0&&(En[an]={texture:r.createTexture(),usedTimes:0},G.memory.textures++,Mt=!0),En[an].usedTimes++;const Cn=En[He.__cacheKey];Cn!==void 0&&(En[He.__cacheKey].usedTimes--,Cn.usedTimes===0&&ye(ze)),He.__cacheKey=an,He.__webglTexture=En[an].texture}return Mt}function qe(He,ze,Mt){let hn=r.TEXTURE_2D;(ze.isDataArrayTexture||ze.isCompressedArrayTexture)&&(hn=r.TEXTURE_2D_ARRAY),ze.isData3DTexture&&(hn=r.TEXTURE_3D);const En=Qe(He,ze),an=ze.source;t.bindTexture(hn,He.__webglTexture,r.TEXTURE0+Mt);const Cn=o.get(an);if(an.version!==Cn.__version||En===!0){t.activeTexture(r.TEXTURE0+Mt);const Pn=ColorManagement.getPrimaries(ColorManagement.workingColorSpace),Fn=ze.colorSpace===NoColorSpace?null:ColorManagement.getPrimaries(ze.colorSpace),pi=ze.colorSpace===NoColorSpace||Pn===Fn?r.NONE:r.BROWSER_DEFAULT_WEBGL;r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,ze.flipY),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ze.premultiplyAlpha),r.pixelStorei(r.UNPACK_ALIGNMENT,ze.unpackAlignment),r.pixelStorei(r.UNPACK_COLORSPACE_CONVERSION_WEBGL,pi);let On=ce(ze.image,!1,y.maxTextureSize);On=Mn(ze,On);const Kn=R.convert(ze.format,ze.colorSpace),ei=R.convert(ze.type);let ti=ve(ze.internalFormat,Kn,ei,ze.colorSpace,ze.isVideoTexture);Ye(hn,ze);let Gn;const yt=ze.mipmaps,xn=ze.isVideoTexture!==!0,Xn=Cn.__version===void 0||En===!0,pt=an.dataReady,Nn=be(ze,On);if(ze.isDepthTexture)ti=_e(ze.format===DepthStencilFormat,ze.type),Xn&&(xn?t.texStorage2D(r.TEXTURE_2D,1,ti,On.width,On.height):t.texImage2D(r.TEXTURE_2D,0,ti,On.width,On.height,0,Kn,ei,null));else if(ze.isDataTexture)if(yt.length>0){xn&&Xn&&t.texStorage2D(r.TEXTURE_2D,Nn,ti,yt[0].width,yt[0].height);for(let gn=0,Tn=yt.length;gn<Tn;gn++)Gn=yt[gn],xn?pt&&t.texSubImage2D(r.TEXTURE_2D,gn,0,0,Gn.width,Gn.height,Kn,ei,Gn.data):t.texImage2D(r.TEXTURE_2D,gn,ti,Gn.width,Gn.height,0,Kn,ei,Gn.data);ze.generateMipmaps=!1}else xn?(Xn&&t.texStorage2D(r.TEXTURE_2D,Nn,ti,On.width,On.height),pt&&t.texSubImage2D(r.TEXTURE_2D,0,0,0,On.width,On.height,Kn,ei,On.data)):t.texImage2D(r.TEXTURE_2D,0,ti,On.width,On.height,0,Kn,ei,On.data);else if(ze.isCompressedTexture)if(ze.isCompressedArrayTexture){xn&&Xn&&t.texStorage3D(r.TEXTURE_2D_ARRAY,Nn,ti,yt[0].width,yt[0].height,On.depth);for(let gn=0,Tn=yt.length;gn<Tn;gn++)if(Gn=yt[gn],ze.format!==RGBAFormat)if(Kn!==null)if(xn){if(pt)if(ze.layerUpdates.size>0){const $n=getByteLength(Gn.width,Gn.height,ze.format,ze.type);for(const Hn of ze.layerUpdates){const ri=Gn.data.subarray(Hn*$n/Gn.data.BYTES_PER_ELEMENT,(Hn+1)*$n/Gn.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(r.TEXTURE_2D_ARRAY,gn,0,0,Hn,Gn.width,Gn.height,1,Kn,ri)}ze.clearLayerUpdates()}else t.compressedTexSubImage3D(r.TEXTURE_2D_ARRAY,gn,0,0,0,Gn.width,Gn.height,On.depth,Kn,Gn.data)}else t.compressedTexImage3D(r.TEXTURE_2D_ARRAY,gn,ti,Gn.width,Gn.height,On.depth,0,Gn.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else xn?pt&&t.texSubImage3D(r.TEXTURE_2D_ARRAY,gn,0,0,0,Gn.width,Gn.height,On.depth,Kn,ei,Gn.data):t.texImage3D(r.TEXTURE_2D_ARRAY,gn,ti,Gn.width,Gn.height,On.depth,0,Kn,ei,Gn.data)}else{xn&&Xn&&t.texStorage2D(r.TEXTURE_2D,Nn,ti,yt[0].width,yt[0].height);for(let gn=0,Tn=yt.length;gn<Tn;gn++)Gn=yt[gn],ze.format!==RGBAFormat?Kn!==null?xn?pt&&t.compressedTexSubImage2D(r.TEXTURE_2D,gn,0,0,Gn.width,Gn.height,Kn,Gn.data):t.compressedTexImage2D(r.TEXTURE_2D,gn,ti,Gn.width,Gn.height,0,Gn.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):xn?pt&&t.texSubImage2D(r.TEXTURE_2D,gn,0,0,Gn.width,Gn.height,Kn,ei,Gn.data):t.texImage2D(r.TEXTURE_2D,gn,ti,Gn.width,Gn.height,0,Kn,ei,Gn.data)}else if(ze.isDataArrayTexture)if(xn){if(Xn&&t.texStorage3D(r.TEXTURE_2D_ARRAY,Nn,ti,On.width,On.height,On.depth),pt)if(ze.layerUpdates.size>0){const gn=getByteLength(On.width,On.height,ze.format,ze.type);for(const Tn of ze.layerUpdates){const $n=On.data.subarray(Tn*gn/On.data.BYTES_PER_ELEMENT,(Tn+1)*gn/On.data.BYTES_PER_ELEMENT);t.texSubImage3D(r.TEXTURE_2D_ARRAY,0,0,0,Tn,On.width,On.height,1,Kn,ei,$n)}ze.clearLayerUpdates()}else t.texSubImage3D(r.TEXTURE_2D_ARRAY,0,0,0,0,On.width,On.height,On.depth,Kn,ei,On.data)}else t.texImage3D(r.TEXTURE_2D_ARRAY,0,ti,On.width,On.height,On.depth,0,Kn,ei,On.data);else if(ze.isData3DTexture)xn?(Xn&&t.texStorage3D(r.TEXTURE_3D,Nn,ti,On.width,On.height,On.depth),pt&&t.texSubImage3D(r.TEXTURE_3D,0,0,0,0,On.width,On.height,On.depth,Kn,ei,On.data)):t.texImage3D(r.TEXTURE_3D,0,ti,On.width,On.height,On.depth,0,Kn,ei,On.data);else if(ze.isFramebufferTexture){if(Xn)if(xn)t.texStorage2D(r.TEXTURE_2D,Nn,ti,On.width,On.height);else{let gn=On.width,Tn=On.height;for(let $n=0;$n<Nn;$n++)t.texImage2D(r.TEXTURE_2D,$n,ti,gn,Tn,0,Kn,ei,null),gn>>=1,Tn>>=1}}else if(yt.length>0){if(xn&&Xn){const gn=Qt(yt[0]);t.texStorage2D(r.TEXTURE_2D,Nn,ti,gn.width,gn.height)}for(let gn=0,Tn=yt.length;gn<Tn;gn++)Gn=yt[gn],xn?pt&&t.texSubImage2D(r.TEXTURE_2D,gn,0,0,Kn,ei,Gn):t.texImage2D(r.TEXTURE_2D,gn,ti,Kn,ei,Gn);ze.generateMipmaps=!1}else if(xn){if(Xn){const gn=Qt(On);t.texStorage2D(r.TEXTURE_2D,Nn,ti,gn.width,gn.height)}pt&&t.texSubImage2D(r.TEXTURE_2D,0,0,0,Kn,ei,On)}else t.texImage2D(r.TEXTURE_2D,0,ti,Kn,ei,On);oe(ze)&&ue(hn),Cn.__version=an.version,ze.onUpdate&&ze.onUpdate(ze)}He.__version=ze.version}function Ze(He,ze,Mt){if(ze.image.length!==6)return;const hn=Qe(He,ze),En=ze.source;t.bindTexture(r.TEXTURE_CUBE_MAP,He.__webglTexture,r.TEXTURE0+Mt);const an=o.get(En);if(En.version!==an.__version||hn===!0){t.activeTexture(r.TEXTURE0+Mt);const Cn=ColorManagement.getPrimaries(ColorManagement.workingColorSpace),Pn=ze.colorSpace===NoColorSpace?null:ColorManagement.getPrimaries(ze.colorSpace),Fn=ze.colorSpace===NoColorSpace||Cn===Pn?r.NONE:r.BROWSER_DEFAULT_WEBGL;r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,ze.flipY),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ze.premultiplyAlpha),r.pixelStorei(r.UNPACK_ALIGNMENT,ze.unpackAlignment),r.pixelStorei(r.UNPACK_COLORSPACE_CONVERSION_WEBGL,Fn);const pi=ze.isCompressedTexture||ze.image[0].isCompressedTexture,On=ze.image[0]&&ze.image[0].isDataTexture,Kn=[];for(let Tn=0;Tn<6;Tn++)!pi&&!On?Kn[Tn]=ce(ze.image[Tn],!0,y.maxCubemapSize):Kn[Tn]=On?ze.image[Tn].image:ze.image[Tn],Kn[Tn]=Mn(ze,Kn[Tn]);const ei=Kn[0],ti=R.convert(ze.format,ze.colorSpace),Gn=R.convert(ze.type),yt=ve(ze.internalFormat,ti,Gn,ze.colorSpace),xn=ze.isVideoTexture!==!0,Xn=an.__version===void 0||hn===!0,pt=En.dataReady;let Nn=be(ze,ei);Ye(r.TEXTURE_CUBE_MAP,ze);let gn;if(pi){xn&&Xn&&t.texStorage2D(r.TEXTURE_CUBE_MAP,Nn,yt,ei.width,ei.height);for(let Tn=0;Tn<6;Tn++){gn=Kn[Tn].mipmaps;for(let $n=0;$n<gn.length;$n++){const Hn=gn[$n];ze.format!==RGBAFormat?ti!==null?xn?pt&&t.compressedTexSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Tn,$n,0,0,Hn.width,Hn.height,ti,Hn.data):t.compressedTexImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Tn,$n,yt,Hn.width,Hn.height,0,Hn.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):xn?pt&&t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Tn,$n,0,0,Hn.width,Hn.height,ti,Gn,Hn.data):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Tn,$n,yt,Hn.width,Hn.height,0,ti,Gn,Hn.data)}}}else{if(gn=ze.mipmaps,xn&&Xn){gn.length>0&&Nn++;const Tn=Qt(Kn[0]);t.texStorage2D(r.TEXTURE_CUBE_MAP,Nn,yt,Tn.width,Tn.height)}for(let Tn=0;Tn<6;Tn++)if(On){xn?pt&&t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Tn,0,0,0,Kn[Tn].width,Kn[Tn].height,ti,Gn,Kn[Tn].data):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Tn,0,yt,Kn[Tn].width,Kn[Tn].height,0,ti,Gn,Kn[Tn].data);for(let $n=0;$n<gn.length;$n++){const ri=gn[$n].image[Tn].image;xn?pt&&t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Tn,$n+1,0,0,ri.width,ri.height,ti,Gn,ri.data):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Tn,$n+1,yt,ri.width,ri.height,0,ti,Gn,ri.data)}}else{xn?pt&&t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Tn,0,0,0,ti,Gn,Kn[Tn]):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Tn,0,yt,ti,Gn,Kn[Tn]);for(let $n=0;$n<gn.length;$n++){const Hn=gn[$n];xn?pt&&t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Tn,$n+1,0,0,ti,Gn,Hn.image[Tn]):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Tn,$n+1,yt,ti,Gn,Hn.image[Tn])}}}oe(ze)&&ue(r.TEXTURE_CUBE_MAP),an.__version=En.version,ze.onUpdate&&ze.onUpdate(ze)}He.__version=ze.version}function ct(He,ze,Mt,hn,En,an){const Cn=R.convert(Mt.format,Mt.colorSpace),Pn=R.convert(Mt.type),Fn=ve(Mt.internalFormat,Cn,Pn,Mt.colorSpace),pi=o.get(ze),On=o.get(Mt);if(On.__renderTarget=ze,!pi.__hasExternalTextures){const Kn=Math.max(1,ze.width>>an),ei=Math.max(1,ze.height>>an);En===r.TEXTURE_3D||En===r.TEXTURE_2D_ARRAY?t.texImage3D(En,an,Fn,Kn,ei,ze.depth,0,Cn,Pn,null):t.texImage2D(En,an,Fn,Kn,ei,0,Cn,Pn,null)}t.bindFramebuffer(r.FRAMEBUFFER,He),kt(ze)?K.framebufferTexture2DMultisampleEXT(r.FRAMEBUFFER,hn,En,On.__webglTexture,0,yn(ze)):(En===r.TEXTURE_2D||En>=r.TEXTURE_CUBE_MAP_POSITIVE_X&&En<=r.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&r.framebufferTexture2D(r.FRAMEBUFFER,hn,En,On.__webglTexture,an),t.bindFramebuffer(r.FRAMEBUFFER,null)}function xt(He,ze,Mt){if(r.bindRenderbuffer(r.RENDERBUFFER,He),ze.depthBuffer){const hn=ze.depthTexture,En=hn&&hn.isDepthTexture?hn.type:null,an=_e(ze.stencilBuffer,En),Cn=ze.stencilBuffer?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT,Pn=yn(ze);kt(ze)?K.renderbufferStorageMultisampleEXT(r.RENDERBUFFER,Pn,an,ze.width,ze.height):Mt?r.renderbufferStorageMultisample(r.RENDERBUFFER,Pn,an,ze.width,ze.height):r.renderbufferStorage(r.RENDERBUFFER,an,ze.width,ze.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,Cn,r.RENDERBUFFER,He)}else{const hn=ze.textures;for(let En=0;En<hn.length;En++){const an=hn[En],Cn=R.convert(an.format,an.colorSpace),Pn=R.convert(an.type),Fn=ve(an.internalFormat,Cn,Pn,an.colorSpace),pi=yn(ze);Mt&&kt(ze)===!1?r.renderbufferStorageMultisample(r.RENDERBUFFER,pi,Fn,ze.width,ze.height):kt(ze)?K.renderbufferStorageMultisampleEXT(r.RENDERBUFFER,pi,Fn,ze.width,ze.height):r.renderbufferStorage(r.RENDERBUFFER,Fn,ze.width,ze.height)}}r.bindRenderbuffer(r.RENDERBUFFER,null)}function un(He,ze){if(ze&&ze.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(r.FRAMEBUFFER,He),!(ze.depthTexture&&ze.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const hn=o.get(ze.depthTexture);hn.__renderTarget=ze,(!hn.__webglTexture||ze.depthTexture.image.width!==ze.width||ze.depthTexture.image.height!==ze.height)&&(ze.depthTexture.image.width=ze.width,ze.depthTexture.image.height=ze.height,ze.depthTexture.needsUpdate=!0),$e(ze.depthTexture,0);const En=hn.__webglTexture,an=yn(ze);if(ze.depthTexture.format===DepthFormat)kt(ze)?K.framebufferTexture2DMultisampleEXT(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,En,0,an):r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,En,0);else if(ze.depthTexture.format===DepthStencilFormat)kt(ze)?K.framebufferTexture2DMultisampleEXT(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.TEXTURE_2D,En,0,an):r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.TEXTURE_2D,En,0);else throw new Error("Unknown depthTexture format")}function Vn(He){const ze=o.get(He),Mt=He.isWebGLCubeRenderTarget===!0;if(ze.__boundDepthTexture!==He.depthTexture){const hn=He.depthTexture;if(ze.__depthDisposeCallback&&ze.__depthDisposeCallback(),hn){const En=()=>{delete ze.__boundDepthTexture,delete ze.__depthDisposeCallback,hn.removeEventListener("dispose",En)};hn.addEventListener("dispose",En),ze.__depthDisposeCallback=En}ze.__boundDepthTexture=hn}if(He.depthTexture&&!ze.__autoAllocateDepthBuffer){if(Mt)throw new Error("target.depthTexture not supported in Cube render targets");un(ze.__webglFramebuffer,He)}else if(Mt){ze.__webglDepthbuffer=[];for(let hn=0;hn<6;hn++)if(t.bindFramebuffer(r.FRAMEBUFFER,ze.__webglFramebuffer[hn]),ze.__webglDepthbuffer[hn]===void 0)ze.__webglDepthbuffer[hn]=r.createRenderbuffer(),xt(ze.__webglDepthbuffer[hn],He,!1);else{const En=He.stencilBuffer?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT,an=ze.__webglDepthbuffer[hn];r.bindRenderbuffer(r.RENDERBUFFER,an),r.framebufferRenderbuffer(r.FRAMEBUFFER,En,r.RENDERBUFFER,an)}}else if(t.bindFramebuffer(r.FRAMEBUFFER,ze.__webglFramebuffer),ze.__webglDepthbuffer===void 0)ze.__webglDepthbuffer=r.createRenderbuffer(),xt(ze.__webglDepthbuffer,He,!1);else{const hn=He.stencilBuffer?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT,En=ze.__webglDepthbuffer;r.bindRenderbuffer(r.RENDERBUFFER,En),r.framebufferRenderbuffer(r.FRAMEBUFFER,hn,r.RENDERBUFFER,En)}t.bindFramebuffer(r.FRAMEBUFFER,null)}function In(He,ze,Mt){const hn=o.get(He);ze!==void 0&&ct(hn.__webglFramebuffer,He,He.texture,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,0),Mt!==void 0&&Vn(He)}function Un(He){const ze=He.texture,Mt=o.get(He),hn=o.get(ze);He.addEventListener("dispose",Se);const En=He.textures,an=He.isWebGLCubeRenderTarget===!0,Cn=En.length>1;if(Cn||(hn.__webglTexture===void 0&&(hn.__webglTexture=r.createTexture()),hn.__version=ze.version,G.memory.textures++),an){Mt.__webglFramebuffer=[];for(let Pn=0;Pn<6;Pn++)if(ze.mipmaps&&ze.mipmaps.length>0){Mt.__webglFramebuffer[Pn]=[];for(let Fn=0;Fn<ze.mipmaps.length;Fn++)Mt.__webglFramebuffer[Pn][Fn]=r.createFramebuffer()}else Mt.__webglFramebuffer[Pn]=r.createFramebuffer()}else{if(ze.mipmaps&&ze.mipmaps.length>0){Mt.__webglFramebuffer=[];for(let Pn=0;Pn<ze.mipmaps.length;Pn++)Mt.__webglFramebuffer[Pn]=r.createFramebuffer()}else Mt.__webglFramebuffer=r.createFramebuffer();if(Cn)for(let Pn=0,Fn=En.length;Pn<Fn;Pn++){const pi=o.get(En[Pn]);pi.__webglTexture===void 0&&(pi.__webglTexture=r.createTexture(),G.memory.textures++)}if(He.samples>0&&kt(He)===!1){Mt.__webglMultisampledFramebuffer=r.createFramebuffer(),Mt.__webglColorRenderbuffer=[],t.bindFramebuffer(r.FRAMEBUFFER,Mt.__webglMultisampledFramebuffer);for(let Pn=0;Pn<En.length;Pn++){const Fn=En[Pn];Mt.__webglColorRenderbuffer[Pn]=r.createRenderbuffer(),r.bindRenderbuffer(r.RENDERBUFFER,Mt.__webglColorRenderbuffer[Pn]);const pi=R.convert(Fn.format,Fn.colorSpace),On=R.convert(Fn.type),Kn=ve(Fn.internalFormat,pi,On,Fn.colorSpace,He.isXRRenderTarget===!0),ei=yn(He);r.renderbufferStorageMultisample(r.RENDERBUFFER,ei,Kn,He.width,He.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+Pn,r.RENDERBUFFER,Mt.__webglColorRenderbuffer[Pn])}r.bindRenderbuffer(r.RENDERBUFFER,null),He.depthBuffer&&(Mt.__webglDepthRenderbuffer=r.createRenderbuffer(),xt(Mt.__webglDepthRenderbuffer,He,!0)),t.bindFramebuffer(r.FRAMEBUFFER,null)}}if(an){t.bindTexture(r.TEXTURE_CUBE_MAP,hn.__webglTexture),Ye(r.TEXTURE_CUBE_MAP,ze);for(let Pn=0;Pn<6;Pn++)if(ze.mipmaps&&ze.mipmaps.length>0)for(let Fn=0;Fn<ze.mipmaps.length;Fn++)ct(Mt.__webglFramebuffer[Pn][Fn],He,ze,r.COLOR_ATTACHMENT0,r.TEXTURE_CUBE_MAP_POSITIVE_X+Pn,Fn);else ct(Mt.__webglFramebuffer[Pn],He,ze,r.COLOR_ATTACHMENT0,r.TEXTURE_CUBE_MAP_POSITIVE_X+Pn,0);oe(ze)&&ue(r.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(Cn){for(let Pn=0,Fn=En.length;Pn<Fn;Pn++){const pi=En[Pn],On=o.get(pi);t.bindTexture(r.TEXTURE_2D,On.__webglTexture),Ye(r.TEXTURE_2D,pi),ct(Mt.__webglFramebuffer,He,pi,r.COLOR_ATTACHMENT0+Pn,r.TEXTURE_2D,0),oe(pi)&&ue(r.TEXTURE_2D)}t.unbindTexture()}else{let Pn=r.TEXTURE_2D;if((He.isWebGL3DRenderTarget||He.isWebGLArrayRenderTarget)&&(Pn=He.isWebGL3DRenderTarget?r.TEXTURE_3D:r.TEXTURE_2D_ARRAY),t.bindTexture(Pn,hn.__webglTexture),Ye(Pn,ze),ze.mipmaps&&ze.mipmaps.length>0)for(let Fn=0;Fn<ze.mipmaps.length;Fn++)ct(Mt.__webglFramebuffer[Fn],He,ze,r.COLOR_ATTACHMENT0,Pn,Fn);else ct(Mt.__webglFramebuffer,He,ze,r.COLOR_ATTACHMENT0,Pn,0);oe(ze)&&ue(Pn),t.unbindTexture()}He.depthBuffer&&Vn(He)}function kn(He){const ze=He.textures;for(let Mt=0,hn=ze.length;Mt<hn;Mt++){const En=ze[Mt];if(oe(En)){const an=ge(He),Cn=o.get(En).__webglTexture;t.bindTexture(an,Cn),ue(an),t.unbindTexture()}}}const Ln=[],Ke=[];function Qn(He){if(He.samples>0){if(kt(He)===!1){const ze=He.textures,Mt=He.width,hn=He.height;let En=r.COLOR_BUFFER_BIT;const an=He.stencilBuffer?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT,Cn=o.get(He),Pn=ze.length>1;if(Pn)for(let Fn=0;Fn<ze.length;Fn++)t.bindFramebuffer(r.FRAMEBUFFER,Cn.__webglMultisampledFramebuffer),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+Fn,r.RENDERBUFFER,null),t.bindFramebuffer(r.FRAMEBUFFER,Cn.__webglFramebuffer),r.framebufferTexture2D(r.DRAW_FRAMEBUFFER,r.COLOR_ATTACHMENT0+Fn,r.TEXTURE_2D,null,0);t.bindFramebuffer(r.READ_FRAMEBUFFER,Cn.__webglMultisampledFramebuffer),t.bindFramebuffer(r.DRAW_FRAMEBUFFER,Cn.__webglFramebuffer);for(let Fn=0;Fn<ze.length;Fn++){if(He.resolveDepthBuffer&&(He.depthBuffer&&(En|=r.DEPTH_BUFFER_BIT),He.stencilBuffer&&He.resolveStencilBuffer&&(En|=r.STENCIL_BUFFER_BIT)),Pn){r.framebufferRenderbuffer(r.READ_FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.RENDERBUFFER,Cn.__webglColorRenderbuffer[Fn]);const pi=o.get(ze[Fn]).__webglTexture;r.framebufferTexture2D(r.DRAW_FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,pi,0)}r.blitFramebuffer(0,0,Mt,hn,0,0,Mt,hn,En,r.NEAREST),Y===!0&&(Ln.length=0,Ke.length=0,Ln.push(r.COLOR_ATTACHMENT0+Fn),He.depthBuffer&&He.resolveDepthBuffer===!1&&(Ln.push(an),Ke.push(an),r.invalidateFramebuffer(r.DRAW_FRAMEBUFFER,Ke)),r.invalidateFramebuffer(r.READ_FRAMEBUFFER,Ln))}if(t.bindFramebuffer(r.READ_FRAMEBUFFER,null),t.bindFramebuffer(r.DRAW_FRAMEBUFFER,null),Pn)for(let Fn=0;Fn<ze.length;Fn++){t.bindFramebuffer(r.FRAMEBUFFER,Cn.__webglMultisampledFramebuffer),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+Fn,r.RENDERBUFFER,Cn.__webglColorRenderbuffer[Fn]);const pi=o.get(ze[Fn]).__webglTexture;t.bindFramebuffer(r.FRAMEBUFFER,Cn.__webglFramebuffer),r.framebufferTexture2D(r.DRAW_FRAMEBUFFER,r.COLOR_ATTACHMENT0+Fn,r.TEXTURE_2D,pi,0)}t.bindFramebuffer(r.DRAW_FRAMEBUFFER,Cn.__webglMultisampledFramebuffer)}else if(He.depthBuffer&&He.resolveDepthBuffer===!1&&Y){const ze=He.stencilBuffer?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT;r.invalidateFramebuffer(r.DRAW_FRAMEBUFFER,[ze])}}}function yn(He){return Math.min(y.maxSamples,He.samples)}function kt(He){const ze=o.get(He);return He.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&ze.__useRenderToTexture!==!1}function cn(He){const ze=G.render.frame;ee.get(He)!==ze&&(ee.set(He,ze),He.update())}function Mn(He,ze){const Mt=He.colorSpace,hn=He.format,En=He.type;return He.isCompressedTexture===!0||He.isVideoTexture===!0||Mt!==LinearSRGBColorSpace&&Mt!==NoColorSpace&&(ColorManagement.getTransfer(Mt)===SRGBTransfer?(hn!==RGBAFormat||En!==UnsignedByteType)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",Mt)),ze}function Qt(He){return typeof HTMLImageElement<"u"&&He instanceof HTMLImageElement?(Q.width=He.naturalWidth||He.width,Q.height=He.naturalHeight||He.height):typeof VideoFrame<"u"&&He instanceof VideoFrame?(Q.width=He.displayWidth,Q.height=He.displayHeight):(Q.width=He.width,Q.height=He.height),Q}this.allocateTextureUnit=Pe,this.resetTextureUnits=Le,this.setTexture2D=$e,this.setTexture2DArray=Ve,this.setTexture3D=Ce,this.setTextureCube=De,this.rebindTextures=In,this.setupRenderTarget=Un,this.updateRenderTargetMipmap=kn,this.updateMultisampleRenderTarget=Qn,this.setupDepthRenderbuffer=Vn,this.setupFrameBufferTexture=ct,this.useMultisampledRTT=kt}function WebGLUtils(r,e){function t(o,y=NoColorSpace){let R;const G=ColorManagement.getTransfer(y);if(o===UnsignedByteType)return r.UNSIGNED_BYTE;if(o===UnsignedShort4444Type)return r.UNSIGNED_SHORT_4_4_4_4;if(o===UnsignedShort5551Type)return r.UNSIGNED_SHORT_5_5_5_1;if(o===UnsignedInt5999Type)return r.UNSIGNED_INT_5_9_9_9_REV;if(o===ByteType)return r.BYTE;if(o===ShortType)return r.SHORT;if(o===UnsignedShortType)return r.UNSIGNED_SHORT;if(o===IntType)return r.INT;if(o===UnsignedIntType)return r.UNSIGNED_INT;if(o===FloatType)return r.FLOAT;if(o===HalfFloatType)return r.HALF_FLOAT;if(o===AlphaFormat)return r.ALPHA;if(o===RGBFormat)return r.RGB;if(o===RGBAFormat)return r.RGBA;if(o===LuminanceFormat)return r.LUMINANCE;if(o===LuminanceAlphaFormat)return r.LUMINANCE_ALPHA;if(o===DepthFormat)return r.DEPTH_COMPONENT;if(o===DepthStencilFormat)return r.DEPTH_STENCIL;if(o===RedFormat)return r.RED;if(o===RedIntegerFormat)return r.RED_INTEGER;if(o===RGFormat)return r.RG;if(o===RGIntegerFormat)return r.RG_INTEGER;if(o===RGBAIntegerFormat)return r.RGBA_INTEGER;if(o===RGB_S3TC_DXT1_Format||o===RGBA_S3TC_DXT1_Format||o===RGBA_S3TC_DXT3_Format||o===RGBA_S3TC_DXT5_Format)if(G===SRGBTransfer)if(R=e.get("WEBGL_compressed_texture_s3tc_srgb"),R!==null){if(o===RGB_S3TC_DXT1_Format)return R.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(o===RGBA_S3TC_DXT1_Format)return R.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(o===RGBA_S3TC_DXT3_Format)return R.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(o===RGBA_S3TC_DXT5_Format)return R.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(R=e.get("WEBGL_compressed_texture_s3tc"),R!==null){if(o===RGB_S3TC_DXT1_Format)return R.COMPRESSED_RGB_S3TC_DXT1_EXT;if(o===RGBA_S3TC_DXT1_Format)return R.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(o===RGBA_S3TC_DXT3_Format)return R.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(o===RGBA_S3TC_DXT5_Format)return R.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(o===RGB_PVRTC_4BPPV1_Format||o===RGB_PVRTC_2BPPV1_Format||o===RGBA_PVRTC_4BPPV1_Format||o===RGBA_PVRTC_2BPPV1_Format)if(R=e.get("WEBGL_compressed_texture_pvrtc"),R!==null){if(o===RGB_PVRTC_4BPPV1_Format)return R.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(o===RGB_PVRTC_2BPPV1_Format)return R.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(o===RGBA_PVRTC_4BPPV1_Format)return R.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(o===RGBA_PVRTC_2BPPV1_Format)return R.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(o===RGB_ETC1_Format||o===RGB_ETC2_Format||o===RGBA_ETC2_EAC_Format)if(R=e.get("WEBGL_compressed_texture_etc"),R!==null){if(o===RGB_ETC1_Format||o===RGB_ETC2_Format)return G===SRGBTransfer?R.COMPRESSED_SRGB8_ETC2:R.COMPRESSED_RGB8_ETC2;if(o===RGBA_ETC2_EAC_Format)return G===SRGBTransfer?R.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:R.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(o===RGBA_ASTC_4x4_Format||o===RGBA_ASTC_5x4_Format||o===RGBA_ASTC_5x5_Format||o===RGBA_ASTC_6x5_Format||o===RGBA_ASTC_6x6_Format||o===RGBA_ASTC_8x5_Format||o===RGBA_ASTC_8x6_Format||o===RGBA_ASTC_8x8_Format||o===RGBA_ASTC_10x5_Format||o===RGBA_ASTC_10x6_Format||o===RGBA_ASTC_10x8_Format||o===RGBA_ASTC_10x10_Format||o===RGBA_ASTC_12x10_Format||o===RGBA_ASTC_12x12_Format)if(R=e.get("WEBGL_compressed_texture_astc"),R!==null){if(o===RGBA_ASTC_4x4_Format)return G===SRGBTransfer?R.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:R.COMPRESSED_RGBA_ASTC_4x4_KHR;if(o===RGBA_ASTC_5x4_Format)return G===SRGBTransfer?R.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:R.COMPRESSED_RGBA_ASTC_5x4_KHR;if(o===RGBA_ASTC_5x5_Format)return G===SRGBTransfer?R.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:R.COMPRESSED_RGBA_ASTC_5x5_KHR;if(o===RGBA_ASTC_6x5_Format)return G===SRGBTransfer?R.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:R.COMPRESSED_RGBA_ASTC_6x5_KHR;if(o===RGBA_ASTC_6x6_Format)return G===SRGBTransfer?R.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:R.COMPRESSED_RGBA_ASTC_6x6_KHR;if(o===RGBA_ASTC_8x5_Format)return G===SRGBTransfer?R.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:R.COMPRESSED_RGBA_ASTC_8x5_KHR;if(o===RGBA_ASTC_8x6_Format)return G===SRGBTransfer?R.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:R.COMPRESSED_RGBA_ASTC_8x6_KHR;if(o===RGBA_ASTC_8x8_Format)return G===SRGBTransfer?R.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:R.COMPRESSED_RGBA_ASTC_8x8_KHR;if(o===RGBA_ASTC_10x5_Format)return G===SRGBTransfer?R.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:R.COMPRESSED_RGBA_ASTC_10x5_KHR;if(o===RGBA_ASTC_10x6_Format)return G===SRGBTransfer?R.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:R.COMPRESSED_RGBA_ASTC_10x6_KHR;if(o===RGBA_ASTC_10x8_Format)return G===SRGBTransfer?R.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:R.COMPRESSED_RGBA_ASTC_10x8_KHR;if(o===RGBA_ASTC_10x10_Format)return G===SRGBTransfer?R.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:R.COMPRESSED_RGBA_ASTC_10x10_KHR;if(o===RGBA_ASTC_12x10_Format)return G===SRGBTransfer?R.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:R.COMPRESSED_RGBA_ASTC_12x10_KHR;if(o===RGBA_ASTC_12x12_Format)return G===SRGBTransfer?R.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:R.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(o===RGBA_BPTC_Format||o===RGB_BPTC_SIGNED_Format||o===RGB_BPTC_UNSIGNED_Format)if(R=e.get("EXT_texture_compression_bptc"),R!==null){if(o===RGBA_BPTC_Format)return G===SRGBTransfer?R.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:R.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(o===RGB_BPTC_SIGNED_Format)return R.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(o===RGB_BPTC_UNSIGNED_Format)return R.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(o===RED_RGTC1_Format||o===SIGNED_RED_RGTC1_Format||o===RED_GREEN_RGTC2_Format||o===SIGNED_RED_GREEN_RGTC2_Format)if(R=e.get("EXT_texture_compression_rgtc"),R!==null){if(o===RGBA_BPTC_Format)return R.COMPRESSED_RED_RGTC1_EXT;if(o===SIGNED_RED_RGTC1_Format)return R.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(o===RED_GREEN_RGTC2_Format)return R.COMPRESSED_RED_GREEN_RGTC2_EXT;if(o===SIGNED_RED_GREEN_RGTC2_Format)return R.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return o===UnsignedInt248Type?r.UNSIGNED_INT_24_8:r[o]!==void 0?r[o]:null}return{convert:t}}const _occlusion_vertex=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,_occlusion_fragment=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class WebXRDepthSensing{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,o){if(this.texture===null){const y=new Texture,R=e.properties.get(y);R.__webglTexture=t.texture,(t.depthNear!==o.depthNear||t.depthFar!==o.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=y}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,o=new ShaderMaterial({vertexShader:_occlusion_vertex,fragmentShader:_occlusion_fragment,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new Mesh(new PlaneGeometry(20,20),o)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class WebXRManager extends EventDispatcher$1{constructor(e,t){super();const o=this;let y=null,R=1,G=null,K="local-floor",Y=1,Q=null,ee=null,ie=null,re=null,se=null,le=null;const ce=new WebXRDepthSensing,oe=t.getContextAttributes();let ue=null,ge=null;const ve=[],_e=[],be=new Vector2;let Re=null;const Se=new PerspectiveCamera;Se.viewport=new Vector4;const Ee=new PerspectiveCamera;Ee.viewport=new Vector4;const ye=[Se,Ee],de=new ArrayCamera;let Me=null,Le=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(qe){let Ze=ve[qe];return Ze===void 0&&(Ze=new WebXRController,ve[qe]=Ze),Ze.getTargetRaySpace()},this.getControllerGrip=function(qe){let Ze=ve[qe];return Ze===void 0&&(Ze=new WebXRController,ve[qe]=Ze),Ze.getGripSpace()},this.getHand=function(qe){let Ze=ve[qe];return Ze===void 0&&(Ze=new WebXRController,ve[qe]=Ze),Ze.getHandSpace()};function Pe(qe){const Ze=_e.indexOf(qe.inputSource);if(Ze===-1)return;const ct=ve[Ze];ct!==void 0&&(ct.update(qe.inputSource,qe.frame,Q||G),ct.dispatchEvent({type:qe.type,data:qe.inputSource}))}function Ue(){y.removeEventListener("select",Pe),y.removeEventListener("selectstart",Pe),y.removeEventListener("selectend",Pe),y.removeEventListener("squeeze",Pe),y.removeEventListener("squeezestart",Pe),y.removeEventListener("squeezeend",Pe),y.removeEventListener("end",Ue),y.removeEventListener("inputsourceschange",$e);for(let qe=0;qe<ve.length;qe++){const Ze=_e[qe];Ze!==null&&(_e[qe]=null,ve[qe].disconnect(Ze))}Me=null,Le=null,ce.reset(),e.setRenderTarget(ue),se=null,re=null,ie=null,y=null,ge=null,Qe.stop(),o.isPresenting=!1,e.setPixelRatio(Re),e.setSize(be.width,be.height,!1),o.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(qe){R=qe,o.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(qe){K=qe,o.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return Q||G},this.setReferenceSpace=function(qe){Q=qe},this.getBaseLayer=function(){return re!==null?re:se},this.getBinding=function(){return ie},this.getFrame=function(){return le},this.getSession=function(){return y},this.setSession=async function(qe){if(y=qe,y!==null){if(ue=e.getRenderTarget(),y.addEventListener("select",Pe),y.addEventListener("selectstart",Pe),y.addEventListener("selectend",Pe),y.addEventListener("squeeze",Pe),y.addEventListener("squeezestart",Pe),y.addEventListener("squeezeend",Pe),y.addEventListener("end",Ue),y.addEventListener("inputsourceschange",$e),oe.xrCompatible!==!0&&await t.makeXRCompatible(),Re=e.getPixelRatio(),e.getSize(be),typeof XRWebGLBinding<"u"&&"createProjectionLayer"in XRWebGLBinding.prototype){let ct=null,xt=null,un=null;oe.depth&&(un=oe.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,ct=oe.stencil?DepthStencilFormat:DepthFormat,xt=oe.stencil?UnsignedInt248Type:UnsignedIntType);const Vn={colorFormat:t.RGBA8,depthFormat:un,scaleFactor:R};ie=new XRWebGLBinding(y,t),re=ie.createProjectionLayer(Vn),y.updateRenderState({layers:[re]}),e.setPixelRatio(1),e.setSize(re.textureWidth,re.textureHeight,!1),ge=new WebGLRenderTarget(re.textureWidth,re.textureHeight,{format:RGBAFormat,type:UnsignedByteType,depthTexture:new DepthTexture(re.textureWidth,re.textureHeight,xt,void 0,void 0,void 0,void 0,void 0,void 0,ct),stencilBuffer:oe.stencil,colorSpace:e.outputColorSpace,samples:oe.antialias?4:0,resolveDepthBuffer:re.ignoreDepthValues===!1,resolveStencilBuffer:re.ignoreDepthValues===!1})}else{const ct={antialias:oe.antialias,alpha:!0,depth:oe.depth,stencil:oe.stencil,framebufferScaleFactor:R};se=new XRWebGLLayer(y,t,ct),y.updateRenderState({baseLayer:se}),e.setPixelRatio(1),e.setSize(se.framebufferWidth,se.framebufferHeight,!1),ge=new WebGLRenderTarget(se.framebufferWidth,se.framebufferHeight,{format:RGBAFormat,type:UnsignedByteType,colorSpace:e.outputColorSpace,stencilBuffer:oe.stencil,resolveDepthBuffer:se.ignoreDepthValues===!1,resolveStencilBuffer:se.ignoreDepthValues===!1})}ge.isXRRenderTarget=!0,this.setFoveation(Y),Q=null,G=await y.requestReferenceSpace(K),Qe.setContext(y),Qe.start(),o.isPresenting=!0,o.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(y!==null)return y.environmentBlendMode},this.getDepthTexture=function(){return ce.getDepthTexture()};function $e(qe){for(let Ze=0;Ze<qe.removed.length;Ze++){const ct=qe.removed[Ze],xt=_e.indexOf(ct);xt>=0&&(_e[xt]=null,ve[xt].disconnect(ct))}for(let Ze=0;Ze<qe.added.length;Ze++){const ct=qe.added[Ze];let xt=_e.indexOf(ct);if(xt===-1){for(let Vn=0;Vn<ve.length;Vn++)if(Vn>=_e.length){_e.push(ct),xt=Vn;break}else if(_e[Vn]===null){_e[Vn]=ct,xt=Vn;break}if(xt===-1)break}const un=ve[xt];un&&un.connect(ct)}}const Ve=new Vector3,Ce=new Vector3;function De(qe,Ze,ct){Ve.setFromMatrixPosition(Ze.matrixWorld),Ce.setFromMatrixPosition(ct.matrixWorld);const xt=Ve.distanceTo(Ce),un=Ze.projectionMatrix.elements,Vn=ct.projectionMatrix.elements,In=un[14]/(un[10]-1),Un=un[14]/(un[10]+1),kn=(un[9]+1)/un[5],Ln=(un[9]-1)/un[5],Ke=(un[8]-1)/un[0],Qn=(Vn[8]+1)/Vn[0],yn=In*Ke,kt=In*Qn,cn=xt/(-Ke+Qn),Mn=cn*-Ke;if(Ze.matrixWorld.decompose(qe.position,qe.quaternion,qe.scale),qe.translateX(Mn),qe.translateZ(cn),qe.matrixWorld.compose(qe.position,qe.quaternion,qe.scale),qe.matrixWorldInverse.copy(qe.matrixWorld).invert(),un[10]===-1)qe.projectionMatrix.copy(Ze.projectionMatrix),qe.projectionMatrixInverse.copy(Ze.projectionMatrixInverse);else{const Qt=In+cn,He=Un+cn,ze=yn-Mn,Mt=kt+(xt-Mn),hn=kn*Un/He*Qt,En=Ln*Un/He*Qt;qe.projectionMatrix.makePerspective(ze,Mt,hn,En,Qt,He),qe.projectionMatrixInverse.copy(qe.projectionMatrix).invert()}}function Oe(qe,Ze){Ze===null?qe.matrixWorld.copy(qe.matrix):qe.matrixWorld.multiplyMatrices(Ze.matrixWorld,qe.matrix),qe.matrixWorldInverse.copy(qe.matrixWorld).invert()}this.updateCamera=function(qe){if(y===null)return;let Ze=qe.near,ct=qe.far;ce.texture!==null&&(ce.depthNear>0&&(Ze=ce.depthNear),ce.depthFar>0&&(ct=ce.depthFar)),de.near=Ee.near=Se.near=Ze,de.far=Ee.far=Se.far=ct,(Me!==de.near||Le!==de.far)&&(y.updateRenderState({depthNear:de.near,depthFar:de.far}),Me=de.near,Le=de.far),Se.layers.mask=qe.layers.mask|2,Ee.layers.mask=qe.layers.mask|4,de.layers.mask=Se.layers.mask|Ee.layers.mask;const xt=qe.parent,un=de.cameras;Oe(de,xt);for(let Vn=0;Vn<un.length;Vn++)Oe(un[Vn],xt);un.length===2?De(de,Se,Ee):de.projectionMatrix.copy(Se.projectionMatrix),Te(qe,de,xt)};function Te(qe,Ze,ct){ct===null?qe.matrix.copy(Ze.matrixWorld):(qe.matrix.copy(ct.matrixWorld),qe.matrix.invert(),qe.matrix.multiply(Ze.matrixWorld)),qe.matrix.decompose(qe.position,qe.quaternion,qe.scale),qe.updateMatrixWorld(!0),qe.projectionMatrix.copy(Ze.projectionMatrix),qe.projectionMatrixInverse.copy(Ze.projectionMatrixInverse),qe.isPerspectiveCamera&&(qe.fov=RAD2DEG*2*Math.atan(1/qe.projectionMatrix.elements[5]),qe.zoom=1)}this.getCamera=function(){return de},this.getFoveation=function(){if(!(re===null&&se===null))return Y},this.setFoveation=function(qe){Y=qe,re!==null&&(re.fixedFoveation=qe),se!==null&&se.fixedFoveation!==void 0&&(se.fixedFoveation=qe)},this.hasDepthSensing=function(){return ce.texture!==null},this.getDepthSensingMesh=function(){return ce.getMesh(de)};let Ne=null;function Ye(qe,Ze){if(ee=Ze.getViewerPose(Q||G),le=Ze,ee!==null){const ct=ee.views;se!==null&&(e.setRenderTargetFramebuffer(ge,se.framebuffer),e.setRenderTarget(ge));let xt=!1;ct.length!==de.cameras.length&&(de.cameras.length=0,xt=!0);for(let In=0;In<ct.length;In++){const Un=ct[In];let kn=null;if(se!==null)kn=se.getViewport(Un);else{const Ke=ie.getViewSubImage(re,Un);kn=Ke.viewport,In===0&&(e.setRenderTargetTextures(ge,Ke.colorTexture,Ke.depthStencilTexture),e.setRenderTarget(ge))}let Ln=ye[In];Ln===void 0&&(Ln=new PerspectiveCamera,Ln.layers.enable(In),Ln.viewport=new Vector4,ye[In]=Ln),Ln.matrix.fromArray(Un.transform.matrix),Ln.matrix.decompose(Ln.position,Ln.quaternion,Ln.scale),Ln.projectionMatrix.fromArray(Un.projectionMatrix),Ln.projectionMatrixInverse.copy(Ln.projectionMatrix).invert(),Ln.viewport.set(kn.x,kn.y,kn.width,kn.height),In===0&&(de.matrix.copy(Ln.matrix),de.matrix.decompose(de.position,de.quaternion,de.scale)),xt===!0&&de.cameras.push(Ln)}const un=y.enabledFeatures;if(un&&un.includes("depth-sensing")&&y.depthUsage=="gpu-optimized"&&ie){const In=ie.getDepthInformation(ct[0]);In&&In.isValid&&In.texture&&ce.init(e,In,y.renderState)}}for(let ct=0;ct<ve.length;ct++){const xt=_e[ct],un=ve[ct];xt!==null&&un!==void 0&&un.update(xt,Ze,Q||G)}Ne&&Ne(qe,Ze),Ze.detectedPlanes&&o.dispatchEvent({type:"planesdetected",data:Ze}),le=null}const Qe=new WebGLAnimation;Qe.setAnimationLoop(Ye),this.setAnimationLoop=function(qe){Ne=qe},this.dispose=function(){}}}const _e1=new Euler,_m1=new Matrix4;function WebGLMaterials(r,e){function t(oe,ue){oe.matrixAutoUpdate===!0&&oe.updateMatrix(),ue.value.copy(oe.matrix)}function o(oe,ue){ue.color.getRGB(oe.fogColor.value,getUnlitUniformColorSpace(r)),ue.isFog?(oe.fogNear.value=ue.near,oe.fogFar.value=ue.far):ue.isFogExp2&&(oe.fogDensity.value=ue.density)}function y(oe,ue,ge,ve,_e){ue.isMeshBasicMaterial||ue.isMeshLambertMaterial?R(oe,ue):ue.isMeshToonMaterial?(R(oe,ue),ie(oe,ue)):ue.isMeshPhongMaterial?(R(oe,ue),ee(oe,ue)):ue.isMeshStandardMaterial?(R(oe,ue),re(oe,ue),ue.isMeshPhysicalMaterial&&se(oe,ue,_e)):ue.isMeshMatcapMaterial?(R(oe,ue),le(oe,ue)):ue.isMeshDepthMaterial?R(oe,ue):ue.isMeshDistanceMaterial?(R(oe,ue),ce(oe,ue)):ue.isMeshNormalMaterial?R(oe,ue):ue.isLineBasicMaterial?(G(oe,ue),ue.isLineDashedMaterial&&K(oe,ue)):ue.isPointsMaterial?Y(oe,ue,ge,ve):ue.isSpriteMaterial?Q(oe,ue):ue.isShadowMaterial?(oe.color.value.copy(ue.color),oe.opacity.value=ue.opacity):ue.isShaderMaterial&&(ue.uniformsNeedUpdate=!1)}function R(oe,ue){oe.opacity.value=ue.opacity,ue.color&&oe.diffuse.value.copy(ue.color),ue.emissive&&oe.emissive.value.copy(ue.emissive).multiplyScalar(ue.emissiveIntensity),ue.map&&(oe.map.value=ue.map,t(ue.map,oe.mapTransform)),ue.alphaMap&&(oe.alphaMap.value=ue.alphaMap,t(ue.alphaMap,oe.alphaMapTransform)),ue.bumpMap&&(oe.bumpMap.value=ue.bumpMap,t(ue.bumpMap,oe.bumpMapTransform),oe.bumpScale.value=ue.bumpScale,ue.side===BackSide&&(oe.bumpScale.value*=-1)),ue.normalMap&&(oe.normalMap.value=ue.normalMap,t(ue.normalMap,oe.normalMapTransform),oe.normalScale.value.copy(ue.normalScale),ue.side===BackSide&&oe.normalScale.value.negate()),ue.displacementMap&&(oe.displacementMap.value=ue.displacementMap,t(ue.displacementMap,oe.displacementMapTransform),oe.displacementScale.value=ue.displacementScale,oe.displacementBias.value=ue.displacementBias),ue.emissiveMap&&(oe.emissiveMap.value=ue.emissiveMap,t(ue.emissiveMap,oe.emissiveMapTransform)),ue.specularMap&&(oe.specularMap.value=ue.specularMap,t(ue.specularMap,oe.specularMapTransform)),ue.alphaTest>0&&(oe.alphaTest.value=ue.alphaTest);const ge=e.get(ue),ve=ge.envMap,_e=ge.envMapRotation;ve&&(oe.envMap.value=ve,_e1.copy(_e),_e1.x*=-1,_e1.y*=-1,_e1.z*=-1,ve.isCubeTexture&&ve.isRenderTargetTexture===!1&&(_e1.y*=-1,_e1.z*=-1),oe.envMapRotation.value.setFromMatrix4(_m1.makeRotationFromEuler(_e1)),oe.flipEnvMap.value=ve.isCubeTexture&&ve.isRenderTargetTexture===!1?-1:1,oe.reflectivity.value=ue.reflectivity,oe.ior.value=ue.ior,oe.refractionRatio.value=ue.refractionRatio),ue.lightMap&&(oe.lightMap.value=ue.lightMap,oe.lightMapIntensity.value=ue.lightMapIntensity,t(ue.lightMap,oe.lightMapTransform)),ue.aoMap&&(oe.aoMap.value=ue.aoMap,oe.aoMapIntensity.value=ue.aoMapIntensity,t(ue.aoMap,oe.aoMapTransform))}function G(oe,ue){oe.diffuse.value.copy(ue.color),oe.opacity.value=ue.opacity,ue.map&&(oe.map.value=ue.map,t(ue.map,oe.mapTransform))}function K(oe,ue){oe.dashSize.value=ue.dashSize,oe.totalSize.value=ue.dashSize+ue.gapSize,oe.scale.value=ue.scale}function Y(oe,ue,ge,ve){oe.diffuse.value.copy(ue.color),oe.opacity.value=ue.opacity,oe.size.value=ue.size*ge,oe.scale.value=ve*.5,ue.map&&(oe.map.value=ue.map,t(ue.map,oe.uvTransform)),ue.alphaMap&&(oe.alphaMap.value=ue.alphaMap,t(ue.alphaMap,oe.alphaMapTransform)),ue.alphaTest>0&&(oe.alphaTest.value=ue.alphaTest)}function Q(oe,ue){oe.diffuse.value.copy(ue.color),oe.opacity.value=ue.opacity,oe.rotation.value=ue.rotation,ue.map&&(oe.map.value=ue.map,t(ue.map,oe.mapTransform)),ue.alphaMap&&(oe.alphaMap.value=ue.alphaMap,t(ue.alphaMap,oe.alphaMapTransform)),ue.alphaTest>0&&(oe.alphaTest.value=ue.alphaTest)}function ee(oe,ue){oe.specular.value.copy(ue.specular),oe.shininess.value=Math.max(ue.shininess,1e-4)}function ie(oe,ue){ue.gradientMap&&(oe.gradientMap.value=ue.gradientMap)}function re(oe,ue){oe.metalness.value=ue.metalness,ue.metalnessMap&&(oe.metalnessMap.value=ue.metalnessMap,t(ue.metalnessMap,oe.metalnessMapTransform)),oe.roughness.value=ue.roughness,ue.roughnessMap&&(oe.roughnessMap.value=ue.roughnessMap,t(ue.roughnessMap,oe.roughnessMapTransform)),ue.envMap&&(oe.envMapIntensity.value=ue.envMapIntensity)}function se(oe,ue,ge){oe.ior.value=ue.ior,ue.sheen>0&&(oe.sheenColor.value.copy(ue.sheenColor).multiplyScalar(ue.sheen),oe.sheenRoughness.value=ue.sheenRoughness,ue.sheenColorMap&&(oe.sheenColorMap.value=ue.sheenColorMap,t(ue.sheenColorMap,oe.sheenColorMapTransform)),ue.sheenRoughnessMap&&(oe.sheenRoughnessMap.value=ue.sheenRoughnessMap,t(ue.sheenRoughnessMap,oe.sheenRoughnessMapTransform))),ue.clearcoat>0&&(oe.clearcoat.value=ue.clearcoat,oe.clearcoatRoughness.value=ue.clearcoatRoughness,ue.clearcoatMap&&(oe.clearcoatMap.value=ue.clearcoatMap,t(ue.clearcoatMap,oe.clearcoatMapTransform)),ue.clearcoatRoughnessMap&&(oe.clearcoatRoughnessMap.value=ue.clearcoatRoughnessMap,t(ue.clearcoatRoughnessMap,oe.clearcoatRoughnessMapTransform)),ue.clearcoatNormalMap&&(oe.clearcoatNormalMap.value=ue.clearcoatNormalMap,t(ue.clearcoatNormalMap,oe.clearcoatNormalMapTransform),oe.clearcoatNormalScale.value.copy(ue.clearcoatNormalScale),ue.side===BackSide&&oe.clearcoatNormalScale.value.negate())),ue.dispersion>0&&(oe.dispersion.value=ue.dispersion),ue.iridescence>0&&(oe.iridescence.value=ue.iridescence,oe.iridescenceIOR.value=ue.iridescenceIOR,oe.iridescenceThicknessMinimum.value=ue.iridescenceThicknessRange[0],oe.iridescenceThicknessMaximum.value=ue.iridescenceThicknessRange[1],ue.iridescenceMap&&(oe.iridescenceMap.value=ue.iridescenceMap,t(ue.iridescenceMap,oe.iridescenceMapTransform)),ue.iridescenceThicknessMap&&(oe.iridescenceThicknessMap.value=ue.iridescenceThicknessMap,t(ue.iridescenceThicknessMap,oe.iridescenceThicknessMapTransform))),ue.transmission>0&&(oe.transmission.value=ue.transmission,oe.transmissionSamplerMap.value=ge.texture,oe.transmissionSamplerSize.value.set(ge.width,ge.height),ue.transmissionMap&&(oe.transmissionMap.value=ue.transmissionMap,t(ue.transmissionMap,oe.transmissionMapTransform)),oe.thickness.value=ue.thickness,ue.thicknessMap&&(oe.thicknessMap.value=ue.thicknessMap,t(ue.thicknessMap,oe.thicknessMapTransform)),oe.attenuationDistance.value=ue.attenuationDistance,oe.attenuationColor.value.copy(ue.attenuationColor)),ue.anisotropy>0&&(oe.anisotropyVector.value.set(ue.anisotropy*Math.cos(ue.anisotropyRotation),ue.anisotropy*Math.sin(ue.anisotropyRotation)),ue.anisotropyMap&&(oe.anisotropyMap.value=ue.anisotropyMap,t(ue.anisotropyMap,oe.anisotropyMapTransform))),oe.specularIntensity.value=ue.specularIntensity,oe.specularColor.value.copy(ue.specularColor),ue.specularColorMap&&(oe.specularColorMap.value=ue.specularColorMap,t(ue.specularColorMap,oe.specularColorMapTransform)),ue.specularIntensityMap&&(oe.specularIntensityMap.value=ue.specularIntensityMap,t(ue.specularIntensityMap,oe.specularIntensityMapTransform))}function le(oe,ue){ue.matcap&&(oe.matcap.value=ue.matcap)}function ce(oe,ue){const ge=e.get(ue).light;oe.referencePosition.value.setFromMatrixPosition(ge.matrixWorld),oe.nearDistance.value=ge.shadow.camera.near,oe.farDistance.value=ge.shadow.camera.far}return{refreshFogUniforms:o,refreshMaterialUniforms:y}}function WebGLUniformsGroups(r,e,t,o){let y={},R={},G=[];const K=r.getParameter(r.MAX_UNIFORM_BUFFER_BINDINGS);function Y(ge,ve){const _e=ve.program;o.uniformBlockBinding(ge,_e)}function Q(ge,ve){let _e=y[ge.id];_e===void 0&&(le(ge),_e=ee(ge),y[ge.id]=_e,ge.addEventListener("dispose",oe));const be=ve.program;o.updateUBOMapping(ge,be);const Re=e.render.frame;R[ge.id]!==Re&&(re(ge),R[ge.id]=Re)}function ee(ge){const ve=ie();ge.__bindingPointIndex=ve;const _e=r.createBuffer(),be=ge.__size,Re=ge.usage;return r.bindBuffer(r.UNIFORM_BUFFER,_e),r.bufferData(r.UNIFORM_BUFFER,be,Re),r.bindBuffer(r.UNIFORM_BUFFER,null),r.bindBufferBase(r.UNIFORM_BUFFER,ve,_e),_e}function ie(){for(let ge=0;ge<K;ge++)if(G.indexOf(ge)===-1)return G.push(ge),ge;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function re(ge){const ve=y[ge.id],_e=ge.uniforms,be=ge.__cache;r.bindBuffer(r.UNIFORM_BUFFER,ve);for(let Re=0,Se=_e.length;Re<Se;Re++){const Ee=Array.isArray(_e[Re])?_e[Re]:[_e[Re]];for(let ye=0,de=Ee.length;ye<de;ye++){const Me=Ee[ye];if(se(Me,Re,ye,be)===!0){const Le=Me.__offset,Pe=Array.isArray(Me.value)?Me.value:[Me.value];let Ue=0;for(let $e=0;$e<Pe.length;$e++){const Ve=Pe[$e],Ce=ce(Ve);typeof Ve=="number"||typeof Ve=="boolean"?(Me.__data[0]=Ve,r.bufferSubData(r.UNIFORM_BUFFER,Le+Ue,Me.__data)):Ve.isMatrix3?(Me.__data[0]=Ve.elements[0],Me.__data[1]=Ve.elements[1],Me.__data[2]=Ve.elements[2],Me.__data[3]=0,Me.__data[4]=Ve.elements[3],Me.__data[5]=Ve.elements[4],Me.__data[6]=Ve.elements[5],Me.__data[7]=0,Me.__data[8]=Ve.elements[6],Me.__data[9]=Ve.elements[7],Me.__data[10]=Ve.elements[8],Me.__data[11]=0):(Ve.toArray(Me.__data,Ue),Ue+=Ce.storage/Float32Array.BYTES_PER_ELEMENT)}r.bufferSubData(r.UNIFORM_BUFFER,Le,Me.__data)}}}r.bindBuffer(r.UNIFORM_BUFFER,null)}function se(ge,ve,_e,be){const Re=ge.value,Se=ve+"_"+_e;if(be[Se]===void 0)return typeof Re=="number"||typeof Re=="boolean"?be[Se]=Re:be[Se]=Re.clone(),!0;{const Ee=be[Se];if(typeof Re=="number"||typeof Re=="boolean"){if(Ee!==Re)return be[Se]=Re,!0}else if(Ee.equals(Re)===!1)return Ee.copy(Re),!0}return!1}function le(ge){const ve=ge.uniforms;let _e=0;const be=16;for(let Se=0,Ee=ve.length;Se<Ee;Se++){const ye=Array.isArray(ve[Se])?ve[Se]:[ve[Se]];for(let de=0,Me=ye.length;de<Me;de++){const Le=ye[de],Pe=Array.isArray(Le.value)?Le.value:[Le.value];for(let Ue=0,$e=Pe.length;Ue<$e;Ue++){const Ve=Pe[Ue],Ce=ce(Ve),De=_e%be,Oe=De%Ce.boundary,Te=De+Oe;_e+=Oe,Te!==0&&be-Te<Ce.storage&&(_e+=be-Te),Le.__data=new Float32Array(Ce.storage/Float32Array.BYTES_PER_ELEMENT),Le.__offset=_e,_e+=Ce.storage}}}const Re=_e%be;return Re>0&&(_e+=be-Re),ge.__size=_e,ge.__cache={},this}function ce(ge){const ve={boundary:0,storage:0};return typeof ge=="number"||typeof ge=="boolean"?(ve.boundary=4,ve.storage=4):ge.isVector2?(ve.boundary=8,ve.storage=8):ge.isVector3||ge.isColor?(ve.boundary=16,ve.storage=12):ge.isVector4?(ve.boundary=16,ve.storage=16):ge.isMatrix3?(ve.boundary=48,ve.storage=48):ge.isMatrix4?(ve.boundary=64,ve.storage=64):ge.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",ge),ve}function oe(ge){const ve=ge.target;ve.removeEventListener("dispose",oe);const _e=G.indexOf(ve.__bindingPointIndex);G.splice(_e,1),r.deleteBuffer(y[ve.id]),delete y[ve.id],delete R[ve.id]}function ue(){for(const ge in y)r.deleteBuffer(y[ge]);G=[],y={},R={}}return{bind:Y,update:Q,dispose:ue}}class WebGLRenderer{constructor(e={}){const{canvas:t=createCanvasElement(),context:o=null,depth:y=!0,stencil:R=!1,alpha:G=!1,antialias:K=!1,premultipliedAlpha:Y=!0,preserveDrawingBuffer:Q=!1,powerPreference:ee="default",failIfMajorPerformanceCaveat:ie=!1,reverseDepthBuffer:re=!1}=e;this.isWebGLRenderer=!0;let se;if(o!==null){if(typeof WebGLRenderingContext<"u"&&o instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");se=o.getContextAttributes().alpha}else se=G;const le=new Uint32Array(4),ce=new Int32Array(4);let oe=null,ue=null;const ge=[],ve=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=NoToneMapping,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const _e=this;let be=!1;this._outputColorSpace=SRGBColorSpace;let Re=0,Se=0,Ee=null,ye=-1,de=null;const Me=new Vector4,Le=new Vector4;let Pe=null;const Ue=new Color(0);let $e=0,Ve=t.width,Ce=t.height,De=1,Oe=null,Te=null;const Ne=new Vector4(0,0,Ve,Ce),Ye=new Vector4(0,0,Ve,Ce);let Qe=!1;const qe=new Frustum;let Ze=!1,ct=!1;const xt=new Matrix4,un=new Matrix4,Vn=new Vector3,In=new Vector4,Un={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let kn=!1;function Ln(){return Ee===null?De:1}let Ke=o;function Qn(Ge,Ct){return t.getContext(Ge,Ct)}try{const Ge={alpha:!0,depth:y,stencil:R,antialias:K,premultipliedAlpha:Y,preserveDrawingBuffer:Q,powerPreference:ee,failIfMajorPerformanceCaveat:ie};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${REVISION}`),t.addEventListener("webglcontextlost",Tn,!1),t.addEventListener("webglcontextrestored",$n,!1),t.addEventListener("webglcontextcreationerror",Hn,!1),Ke===null){const Ct="webgl2";if(Ke=Qn(Ct,Ge),Ke===null)throw Qn(Ct)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(Ge){throw console.error("THREE.WebGLRenderer: "+Ge.message),Ge}let yn,kt,cn,Mn,Qt,He,ze,Mt,hn,En,an,Cn,Pn,Fn,pi,On,Kn,ei,ti,Gn,yt,xn,Xn,pt;function Nn(){yn=new WebGLExtensions(Ke),yn.init(),xn=new WebGLUtils(Ke,yn),kt=new WebGLCapabilities(Ke,yn,e,xn),cn=new WebGLState(Ke,yn),kt.reverseDepthBuffer&&re&&cn.buffers.depth.setReversed(!0),Mn=new WebGLInfo(Ke),Qt=new WebGLProperties,He=new WebGLTextures(Ke,yn,cn,Qt,kt,xn,Mn),ze=new WebGLCubeMaps(_e),Mt=new WebGLCubeUVMaps(_e),hn=new WebGLAttributes(Ke),Xn=new WebGLBindingStates(Ke,hn),En=new WebGLGeometries(Ke,hn,Mn,Xn),an=new WebGLObjects(Ke,En,hn,Mn),ti=new WebGLMorphtargets(Ke,kt,He),On=new WebGLClipping(Qt),Cn=new WebGLPrograms(_e,ze,Mt,yn,kt,Xn,On),Pn=new WebGLMaterials(_e,Qt),Fn=new WebGLRenderLists,pi=new WebGLRenderStates(yn),ei=new WebGLBackground(_e,ze,Mt,cn,an,se,Y),Kn=new WebGLShadowMap(_e,an,kt),pt=new WebGLUniformsGroups(Ke,Mn,kt,cn),Gn=new WebGLBufferRenderer(Ke,yn,Mn),yt=new WebGLIndexedBufferRenderer(Ke,yn,Mn),Mn.programs=Cn.programs,_e.capabilities=kt,_e.extensions=yn,_e.properties=Qt,_e.renderLists=Fn,_e.shadowMap=Kn,_e.state=cn,_e.info=Mn}Nn();const gn=new WebXRManager(_e,Ke);this.xr=gn,this.getContext=function(){return Ke},this.getContextAttributes=function(){return Ke.getContextAttributes()},this.forceContextLoss=function(){const Ge=yn.get("WEBGL_lose_context");Ge&&Ge.loseContext()},this.forceContextRestore=function(){const Ge=yn.get("WEBGL_lose_context");Ge&&Ge.restoreContext()},this.getPixelRatio=function(){return De},this.setPixelRatio=function(Ge){Ge!==void 0&&(De=Ge,this.setSize(Ve,Ce,!1))},this.getSize=function(Ge){return Ge.set(Ve,Ce)},this.setSize=function(Ge,Ct,dn=!0){if(gn.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}Ve=Ge,Ce=Ct,t.width=Math.floor(Ge*De),t.height=Math.floor(Ct*De),dn===!0&&(t.style.width=Ge+"px",t.style.height=Ct+"px"),this.setViewport(0,0,Ge,Ct)},this.getDrawingBufferSize=function(Ge){return Ge.set(Ve*De,Ce*De).floor()},this.setDrawingBufferSize=function(Ge,Ct,dn){Ve=Ge,Ce=Ct,De=dn,t.width=Math.floor(Ge*dn),t.height=Math.floor(Ct*dn),this.setViewport(0,0,Ge,Ct)},this.getCurrentViewport=function(Ge){return Ge.copy(Me)},this.getViewport=function(Ge){return Ge.copy(Ne)},this.setViewport=function(Ge,Ct,dn,pn){Ge.isVector4?Ne.set(Ge.x,Ge.y,Ge.z,Ge.w):Ne.set(Ge,Ct,dn,pn),cn.viewport(Me.copy(Ne).multiplyScalar(De).round())},this.getScissor=function(Ge){return Ge.copy(Ye)},this.setScissor=function(Ge,Ct,dn,pn){Ge.isVector4?Ye.set(Ge.x,Ge.y,Ge.z,Ge.w):Ye.set(Ge,Ct,dn,pn),cn.scissor(Le.copy(Ye).multiplyScalar(De).round())},this.getScissorTest=function(){return Qe},this.setScissorTest=function(Ge){cn.setScissorTest(Qe=Ge)},this.setOpaqueSort=function(Ge){Oe=Ge},this.setTransparentSort=function(Ge){Te=Ge},this.getClearColor=function(Ge){return Ge.copy(ei.getClearColor())},this.setClearColor=function(){ei.setClearColor(...arguments)},this.getClearAlpha=function(){return ei.getClearAlpha()},this.setClearAlpha=function(){ei.setClearAlpha(...arguments)},this.clear=function(Ge=!0,Ct=!0,dn=!0){let pn=0;if(Ge){let Ot=!1;if(Ee!==null){const Dn=Ee.texture.format;Ot=Dn===RGBAIntegerFormat||Dn===RGIntegerFormat||Dn===RedIntegerFormat}if(Ot){const Dn=Ee.texture.type,jn=Dn===UnsignedByteType||Dn===UnsignedIntType||Dn===UnsignedShortType||Dn===UnsignedInt248Type||Dn===UnsignedShort4444Type||Dn===UnsignedShort5551Type,qn=ei.getClearColor(),Zn=ei.getClearAlpha(),ui=qn.r,si=qn.g,ii=qn.b;jn?(le[0]=ui,le[1]=si,le[2]=ii,le[3]=Zn,Ke.clearBufferuiv(Ke.COLOR,0,le)):(ce[0]=ui,ce[1]=si,ce[2]=ii,ce[3]=Zn,Ke.clearBufferiv(Ke.COLOR,0,ce))}else pn|=Ke.COLOR_BUFFER_BIT}Ct&&(pn|=Ke.DEPTH_BUFFER_BIT),dn&&(pn|=Ke.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),Ke.clear(pn)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Tn,!1),t.removeEventListener("webglcontextrestored",$n,!1),t.removeEventListener("webglcontextcreationerror",Hn,!1),ei.dispose(),Fn.dispose(),pi.dispose(),Qt.dispose(),ze.dispose(),Mt.dispose(),an.dispose(),Xn.dispose(),pt.dispose(),Cn.dispose(),gn.dispose(),gn.removeEventListener("sessionstart",Er),gn.removeEventListener("sessionend",pr),Cr.stop()};function Tn(Ge){Ge.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),be=!0}function $n(){console.log("THREE.WebGLRenderer: Context Restored."),be=!1;const Ge=Mn.autoReset,Ct=Kn.enabled,dn=Kn.autoUpdate,pn=Kn.needsUpdate,Ot=Kn.type;Nn(),Mn.autoReset=Ge,Kn.enabled=Ct,Kn.autoUpdate=dn,Kn.needsUpdate=pn,Kn.type=Ot}function Hn(Ge){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",Ge.statusMessage)}function ri(Ge){const Ct=Ge.target;Ct.removeEventListener("dispose",ri),Ei(Ct)}function Ei(Ge){Hi(Ge),Qt.remove(Ge)}function Hi(Ge){const Ct=Qt.get(Ge).programs;Ct!==void 0&&(Ct.forEach(function(dn){Cn.releaseProgram(dn)}),Ge.isShaderMaterial&&Cn.releaseShaderCache(Ge))}this.renderBufferDirect=function(Ge,Ct,dn,pn,Ot,Dn){Ct===null&&(Ct=Un);const jn=Ot.isMesh&&Ot.matrixWorld.determinant()<0,qn=js(Ge,Ct,dn,pn,Ot);cn.setMaterial(pn,jn);let Zn=dn.index,ui=1;if(pn.wireframe===!0){if(Zn=En.getWireframeAttribute(dn),Zn===void 0)return;ui=2}const si=dn.drawRange,ii=dn.attributes.position;let Mi=si.start*ui,Vi=(si.start+si.count)*ui;Dn!==null&&(Mi=Math.max(Mi,Dn.start*ui),Vi=Math.min(Vi,(Dn.start+Dn.count)*ui)),Zn!==null?(Mi=Math.max(Mi,0),Vi=Math.min(Vi,Zn.count)):ii!=null&&(Mi=Math.max(Mi,0),Vi=Math.min(Vi,ii.count));const nr=Vi-Mi;if(nr<0||nr===1/0)return;Xn.setup(Ot,pn,qn,dn,Zn);let Pi,Ii=Gn;if(Zn!==null&&(Pi=hn.get(Zn),Ii=yt,Ii.setIndex(Pi)),Ot.isMesh)pn.wireframe===!0?(cn.setLineWidth(pn.wireframeLinewidth*Ln()),Ii.setMode(Ke.LINES)):Ii.setMode(Ke.TRIANGLES);else if(Ot.isLine){let oi=pn.linewidth;oi===void 0&&(oi=1),cn.setLineWidth(oi*Ln()),Ot.isLineSegments?Ii.setMode(Ke.LINES):Ot.isLineLoop?Ii.setMode(Ke.LINE_LOOP):Ii.setMode(Ke.LINE_STRIP)}else Ot.isPoints?Ii.setMode(Ke.POINTS):Ot.isSprite&&Ii.setMode(Ke.TRIANGLES);if(Ot.isBatchedMesh)if(Ot._multiDrawInstances!==null)warnOnce("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),Ii.renderMultiDrawInstances(Ot._multiDrawStarts,Ot._multiDrawCounts,Ot._multiDrawCount,Ot._multiDrawInstances);else if(yn.get("WEBGL_multi_draw"))Ii.renderMultiDraw(Ot._multiDrawStarts,Ot._multiDrawCounts,Ot._multiDrawCount);else{const oi=Ot._multiDrawStarts,mr=Ot._multiDrawCounts,Li=Ot._multiDrawCount,Gr=Zn?hn.get(Zn).bytesPerElement:1,la=Qt.get(pn).currentProgram.getUniforms();for(let zi=0;zi<Li;zi++)la.setValue(Ke,"_gl_DrawID",zi),Ii.render(oi[zi]/Gr,mr[zi])}else if(Ot.isInstancedMesh)Ii.renderInstances(Mi,nr,Ot.count);else if(dn.isInstancedBufferGeometry){const oi=dn._maxInstanceCount!==void 0?dn._maxInstanceCount:1/0,mr=Math.min(dn.instanceCount,oi);Ii.renderInstances(Mi,nr,mr)}else Ii.render(Mi,nr)};function gi(Ge,Ct,dn){Ge.transparent===!0&&Ge.side===DoubleSide&&Ge.forceSinglePass===!1?(Ge.side=BackSide,Ge.needsUpdate=!0,ji(Ge,Ct,dn),Ge.side=FrontSide,Ge.needsUpdate=!0,ji(Ge,Ct,dn),Ge.side=DoubleSide):ji(Ge,Ct,dn)}this.compile=function(Ge,Ct,dn=null){dn===null&&(dn=Ge),ue=pi.get(dn),ue.init(Ct),ve.push(ue),dn.traverseVisible(function(Ot){Ot.isLight&&Ot.layers.test(Ct.layers)&&(ue.pushLight(Ot),Ot.castShadow&&ue.pushShadow(Ot))}),Ge!==dn&&Ge.traverseVisible(function(Ot){Ot.isLight&&Ot.layers.test(Ct.layers)&&(ue.pushLight(Ot),Ot.castShadow&&ue.pushShadow(Ot))}),ue.setupLights();const pn=new Set;return Ge.traverse(function(Ot){if(!(Ot.isMesh||Ot.isPoints||Ot.isLine||Ot.isSprite))return;const Dn=Ot.material;if(Dn)if(Array.isArray(Dn))for(let jn=0;jn<Dn.length;jn++){const qn=Dn[jn];gi(qn,dn,Ot),pn.add(qn)}else gi(Dn,dn,Ot),pn.add(Dn)}),ue=ve.pop(),pn},this.compileAsync=function(Ge,Ct,dn=null){const pn=this.compile(Ge,Ct,dn);return new Promise(Ot=>{function Dn(){if(pn.forEach(function(jn){Qt.get(jn).currentProgram.isReady()&&pn.delete(jn)}),pn.size===0){Ot(Ge);return}setTimeout(Dn,10)}yn.get("KHR_parallel_shader_compile")!==null?Dn():setTimeout(Dn,10)})};let vr=null;function Ci(Ge){vr&&vr(Ge)}function Er(){Cr.stop()}function pr(){Cr.start()}const Cr=new WebGLAnimation;Cr.setAnimationLoop(Ci),typeof self<"u"&&Cr.setContext(self),this.setAnimationLoop=function(Ge){vr=Ge,gn.setAnimationLoop(Ge),Ge===null?Cr.stop():Cr.start()},gn.addEventListener("sessionstart",Er),gn.addEventListener("sessionend",pr),this.render=function(Ge,Ct){if(Ct!==void 0&&Ct.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(be===!0)return;if(Ge.matrixWorldAutoUpdate===!0&&Ge.updateMatrixWorld(),Ct.parent===null&&Ct.matrixWorldAutoUpdate===!0&&Ct.updateMatrixWorld(),gn.enabled===!0&&gn.isPresenting===!0&&(gn.cameraAutoUpdate===!0&&gn.updateCamera(Ct),Ct=gn.getCamera()),Ge.isScene===!0&&Ge.onBeforeRender(_e,Ge,Ct,Ee),ue=pi.get(Ge,ve.length),ue.init(Ct),ve.push(ue),un.multiplyMatrices(Ct.projectionMatrix,Ct.matrixWorldInverse),qe.setFromProjectionMatrix(un),ct=this.localClippingEnabled,Ze=On.init(this.clippingPlanes,ct),oe=Fn.get(Ge,ge.length),oe.init(),ge.push(oe),gn.enabled===!0&&gn.isPresenting===!0){const Dn=_e.xr.getDepthSensingMesh();Dn!==null&&ms(Dn,Ct,-1/0,_e.sortObjects)}ms(Ge,Ct,0,_e.sortObjects),oe.finish(),_e.sortObjects===!0&&oe.sort(Oe,Te),kn=gn.enabled===!1||gn.isPresenting===!1||gn.hasDepthSensing()===!1,kn&&ei.addToRenderList(oe,Ge),this.info.render.frame++,Ze===!0&&On.beginShadows();const dn=ue.state.shadowsArray;Kn.render(dn,Ge,Ct),Ze===!0&&On.endShadows(),this.info.autoReset===!0&&this.info.reset();const pn=oe.opaque,Ot=oe.transmissive;if(ue.setupLights(),Ct.isArrayCamera){const Dn=Ct.cameras;if(Ot.length>0)for(let jn=0,qn=Dn.length;jn<qn;jn++){const Zn=Dn[jn];Jr(pn,Ot,Ge,Zn)}kn&&ei.render(Ge);for(let jn=0,qn=Dn.length;jn<qn;jn++){const Zn=Dn[jn];xl(oe,Ge,Zn,Zn.viewport)}}else Ot.length>0&&Jr(pn,Ot,Ge,Ct),kn&&ei.render(Ge),xl(oe,Ge,Ct);Ee!==null&&Se===0&&(He.updateMultisampleRenderTarget(Ee),He.updateRenderTargetMipmap(Ee)),Ge.isScene===!0&&Ge.onAfterRender(_e,Ge,Ct),Xn.resetDefaultState(),ye=-1,de=null,ve.pop(),ve.length>0?(ue=ve[ve.length-1],Ze===!0&&On.setGlobalState(_e.clippingPlanes,ue.state.camera)):ue=null,ge.pop(),ge.length>0?oe=ge[ge.length-1]:oe=null};function ms(Ge,Ct,dn,pn){if(Ge.visible===!1)return;if(Ge.layers.test(Ct.layers)){if(Ge.isGroup)dn=Ge.renderOrder;else if(Ge.isLOD)Ge.autoUpdate===!0&&Ge.update(Ct);else if(Ge.isLight)ue.pushLight(Ge),Ge.castShadow&&ue.pushShadow(Ge);else if(Ge.isSprite){if(!Ge.frustumCulled||qe.intersectsSprite(Ge)){pn&&In.setFromMatrixPosition(Ge.matrixWorld).applyMatrix4(un);const jn=an.update(Ge),qn=Ge.material;qn.visible&&oe.push(Ge,jn,qn,dn,In.z,null)}}else if((Ge.isMesh||Ge.isLine||Ge.isPoints)&&(!Ge.frustumCulled||qe.intersectsObject(Ge))){const jn=an.update(Ge),qn=Ge.material;if(pn&&(Ge.boundingSphere!==void 0?(Ge.boundingSphere===null&&Ge.computeBoundingSphere(),In.copy(Ge.boundingSphere.center)):(jn.boundingSphere===null&&jn.computeBoundingSphere(),In.copy(jn.boundingSphere.center)),In.applyMatrix4(Ge.matrixWorld).applyMatrix4(un)),Array.isArray(qn)){const Zn=jn.groups;for(let ui=0,si=Zn.length;ui<si;ui++){const ii=Zn[ui],Mi=qn[ii.materialIndex];Mi&&Mi.visible&&oe.push(Ge,jn,Mi,dn,In.z,ii)}}else qn.visible&&oe.push(Ge,jn,qn,dn,In.z,null)}}const Dn=Ge.children;for(let jn=0,qn=Dn.length;jn<qn;jn++)ms(Dn[jn],Ct,dn,pn)}function xl(Ge,Ct,dn,pn){const Ot=Ge.opaque,Dn=Ge.transmissive,jn=Ge.transparent;ue.setupLightsView(dn),Ze===!0&&On.setGlobalState(_e.clippingPlanes,dn),pn&&cn.viewport(Me.copy(pn)),Ot.length>0&&ls(Ot,Ct,dn),Dn.length>0&&ls(Dn,Ct,dn),jn.length>0&&ls(jn,Ct,dn),cn.buffers.depth.setTest(!0),cn.buffers.depth.setMask(!0),cn.buffers.color.setMask(!0),cn.setPolygonOffset(!1)}function Jr(Ge,Ct,dn,pn){if((dn.isScene===!0?dn.overrideMaterial:null)!==null)return;ue.state.transmissionRenderTarget[pn.id]===void 0&&(ue.state.transmissionRenderTarget[pn.id]=new WebGLRenderTarget(1,1,{generateMipmaps:!0,type:yn.has("EXT_color_buffer_half_float")||yn.has("EXT_color_buffer_float")?HalfFloatType:UnsignedByteType,minFilter:LinearMipmapLinearFilter,samples:4,stencilBuffer:R,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:ColorManagement.workingColorSpace}));const Dn=ue.state.transmissionRenderTarget[pn.id],jn=pn.viewport||Me;Dn.setSize(jn.z*_e.transmissionResolutionScale,jn.w*_e.transmissionResolutionScale);const qn=_e.getRenderTarget();_e.setRenderTarget(Dn),_e.getClearColor(Ue),$e=_e.getClearAlpha(),$e<1&&_e.setClearColor(16777215,.5),_e.clear(),kn&&ei.render(dn);const Zn=_e.toneMapping;_e.toneMapping=NoToneMapping;const ui=pn.viewport;if(pn.viewport!==void 0&&(pn.viewport=void 0),ue.setupLightsView(pn),Ze===!0&&On.setGlobalState(_e.clippingPlanes,pn),ls(Ge,dn,pn),He.updateMultisampleRenderTarget(Dn),He.updateRenderTargetMipmap(Dn),yn.has("WEBGL_multisampled_render_to_texture")===!1){let si=!1;for(let ii=0,Mi=Ct.length;ii<Mi;ii++){const Vi=Ct[ii],nr=Vi.object,Pi=Vi.geometry,Ii=Vi.material,oi=Vi.group;if(Ii.side===DoubleSide&&nr.layers.test(pn.layers)){const mr=Ii.side;Ii.side=BackSide,Ii.needsUpdate=!0,Hs(nr,dn,pn,Pi,Ii,oi),Ii.side=mr,Ii.needsUpdate=!0,si=!0}}si===!0&&(He.updateMultisampleRenderTarget(Dn),He.updateRenderTargetMipmap(Dn))}_e.setRenderTarget(qn),_e.setClearColor(Ue,$e),ui!==void 0&&(pn.viewport=ui),_e.toneMapping=Zn}function ls(Ge,Ct,dn){const pn=Ct.isScene===!0?Ct.overrideMaterial:null;for(let Ot=0,Dn=Ge.length;Ot<Dn;Ot++){const jn=Ge[Ot],qn=jn.object,Zn=jn.geometry,ui=jn.group;let si=jn.material;si.allowOverride===!0&&pn!==null&&(si=pn),qn.layers.test(dn.layers)&&Hs(qn,Ct,dn,Zn,si,ui)}}function Hs(Ge,Ct,dn,pn,Ot,Dn){Ge.onBeforeRender(_e,Ct,dn,pn,Ot,Dn),Ge.modelViewMatrix.multiplyMatrices(dn.matrixWorldInverse,Ge.matrixWorld),Ge.normalMatrix.getNormalMatrix(Ge.modelViewMatrix),Ot.onBeforeRender(_e,Ct,dn,pn,Ge,Dn),Ot.transparent===!0&&Ot.side===DoubleSide&&Ot.forceSinglePass===!1?(Ot.side=BackSide,Ot.needsUpdate=!0,_e.renderBufferDirect(dn,Ct,pn,Ot,Ge,Dn),Ot.side=FrontSide,Ot.needsUpdate=!0,_e.renderBufferDirect(dn,Ct,pn,Ot,Ge,Dn),Ot.side=DoubleSide):_e.renderBufferDirect(dn,Ct,pn,Ot,Ge,Dn),Ge.onAfterRender(_e,Ct,dn,pn,Ot,Dn)}function ji(Ge,Ct,dn){Ct.isScene!==!0&&(Ct=Un);const pn=Qt.get(Ge),Ot=ue.state.lights,Dn=ue.state.shadowsArray,jn=Ot.state.version,qn=Cn.getParameters(Ge,Ot.state,Dn,Ct,dn),Zn=Cn.getProgramCacheKey(qn);let ui=pn.programs;pn.environment=Ge.isMeshStandardMaterial?Ct.environment:null,pn.fog=Ct.fog,pn.envMap=(Ge.isMeshStandardMaterial?Mt:ze).get(Ge.envMap||pn.environment),pn.envMapRotation=pn.environment!==null&&Ge.envMap===null?Ct.environmentRotation:Ge.envMapRotation,ui===void 0&&(Ge.addEventListener("dispose",ri),ui=new Map,pn.programs=ui);let si=ui.get(Zn);if(si!==void 0){if(pn.currentProgram===si&&pn.lightsStateVersion===jn)return Ts(Ge,qn),si}else qn.uniforms=Cn.getUniforms(Ge),Ge.onBeforeCompile(qn,_e),si=Cn.acquireProgram(qn,Zn),ui.set(Zn,si),pn.uniforms=qn.uniforms;const ii=pn.uniforms;return(!Ge.isShaderMaterial&&!Ge.isRawShaderMaterial||Ge.clipping===!0)&&(ii.clippingPlanes=On.uniform),Ts(Ge,qn),pn.needsLights=Sr(Ge),pn.lightsStateVersion=jn,pn.needsLights&&(ii.ambientLightColor.value=Ot.state.ambient,ii.lightProbe.value=Ot.state.probe,ii.directionalLights.value=Ot.state.directional,ii.directionalLightShadows.value=Ot.state.directionalShadow,ii.spotLights.value=Ot.state.spot,ii.spotLightShadows.value=Ot.state.spotShadow,ii.rectAreaLights.value=Ot.state.rectArea,ii.ltc_1.value=Ot.state.rectAreaLTC1,ii.ltc_2.value=Ot.state.rectAreaLTC2,ii.pointLights.value=Ot.state.point,ii.pointLightShadows.value=Ot.state.pointShadow,ii.hemisphereLights.value=Ot.state.hemi,ii.directionalShadowMap.value=Ot.state.directionalShadowMap,ii.directionalShadowMatrix.value=Ot.state.directionalShadowMatrix,ii.spotShadowMap.value=Ot.state.spotShadowMap,ii.spotLightMatrix.value=Ot.state.spotLightMatrix,ii.spotLightMap.value=Ot.state.spotLightMap,ii.pointShadowMap.value=Ot.state.pointShadowMap,ii.pointShadowMatrix.value=Ot.state.pointShadowMatrix),pn.currentProgram=si,pn.uniformsList=null,si}function Vs(Ge){if(Ge.uniformsList===null){const Ct=Ge.currentProgram.getUniforms();Ge.uniformsList=WebGLUniforms.seqWithValue(Ct.seq,Ge.uniforms)}return Ge.uniformsList}function Ts(Ge,Ct){const dn=Qt.get(Ge);dn.outputColorSpace=Ct.outputColorSpace,dn.batching=Ct.batching,dn.batchingColor=Ct.batchingColor,dn.instancing=Ct.instancing,dn.instancingColor=Ct.instancingColor,dn.instancingMorph=Ct.instancingMorph,dn.skinning=Ct.skinning,dn.morphTargets=Ct.morphTargets,dn.morphNormals=Ct.morphNormals,dn.morphColors=Ct.morphColors,dn.morphTargetsCount=Ct.morphTargetsCount,dn.numClippingPlanes=Ct.numClippingPlanes,dn.numIntersection=Ct.numClipIntersection,dn.vertexAlphas=Ct.vertexAlphas,dn.vertexTangents=Ct.vertexTangents,dn.toneMapping=Ct.toneMapping}function js(Ge,Ct,dn,pn,Ot){Ct.isScene!==!0&&(Ct=Un),He.resetTextureUnits();const Dn=Ct.fog,jn=pn.isMeshStandardMaterial?Ct.environment:null,qn=Ee===null?_e.outputColorSpace:Ee.isXRRenderTarget===!0?Ee.texture.colorSpace:LinearSRGBColorSpace,Zn=(pn.isMeshStandardMaterial?Mt:ze).get(pn.envMap||jn),ui=pn.vertexColors===!0&&!!dn.attributes.color&&dn.attributes.color.itemSize===4,si=!!dn.attributes.tangent&&(!!pn.normalMap||pn.anisotropy>0),ii=!!dn.morphAttributes.position,Mi=!!dn.morphAttributes.normal,Vi=!!dn.morphAttributes.color;let nr=NoToneMapping;pn.toneMapped&&(Ee===null||Ee.isXRRenderTarget===!0)&&(nr=_e.toneMapping);const Pi=dn.morphAttributes.position||dn.morphAttributes.normal||dn.morphAttributes.color,Ii=Pi!==void 0?Pi.length:0,oi=Qt.get(pn),mr=ue.state.lights;if(Ze===!0&&(ct===!0||Ge!==de)){const Si=Ge===de&&pn.id===ye;On.setState(pn,Ge,Si)}let Li=!1;pn.version===oi.__version?(oi.needsLights&&oi.lightsStateVersion!==mr.state.version||oi.outputColorSpace!==qn||Ot.isBatchedMesh&&oi.batching===!1||!Ot.isBatchedMesh&&oi.batching===!0||Ot.isBatchedMesh&&oi.batchingColor===!0&&Ot.colorTexture===null||Ot.isBatchedMesh&&oi.batchingColor===!1&&Ot.colorTexture!==null||Ot.isInstancedMesh&&oi.instancing===!1||!Ot.isInstancedMesh&&oi.instancing===!0||Ot.isSkinnedMesh&&oi.skinning===!1||!Ot.isSkinnedMesh&&oi.skinning===!0||Ot.isInstancedMesh&&oi.instancingColor===!0&&Ot.instanceColor===null||Ot.isInstancedMesh&&oi.instancingColor===!1&&Ot.instanceColor!==null||Ot.isInstancedMesh&&oi.instancingMorph===!0&&Ot.morphTexture===null||Ot.isInstancedMesh&&oi.instancingMorph===!1&&Ot.morphTexture!==null||oi.envMap!==Zn||pn.fog===!0&&oi.fog!==Dn||oi.numClippingPlanes!==void 0&&(oi.numClippingPlanes!==On.numPlanes||oi.numIntersection!==On.numIntersection)||oi.vertexAlphas!==ui||oi.vertexTangents!==si||oi.morphTargets!==ii||oi.morphNormals!==Mi||oi.morphColors!==Vi||oi.toneMapping!==nr||oi.morphTargetsCount!==Ii)&&(Li=!0):(Li=!0,oi.__version=pn.version);let Gr=oi.currentProgram;Li===!0&&(Gr=ji(pn,Ct,Ot));let la=!1,zi=!1,Hr=!1;const qi=Gr.getUniforms(),Pr=oi.uniforms;if(cn.useProgram(Gr.program)&&(la=!0,zi=!0,Hr=!0),pn.id!==ye&&(ye=pn.id,zi=!0),la||de!==Ge){cn.buffers.depth.getReversed()?(xt.copy(Ge.projectionMatrix),toNormalizedProjectionMatrix(xt),toReversedProjectionMatrix(xt),qi.setValue(Ke,"projectionMatrix",xt)):qi.setValue(Ke,"projectionMatrix",Ge.projectionMatrix),qi.setValue(Ke,"viewMatrix",Ge.matrixWorldInverse);const Tr=qi.map.cameraPosition;Tr!==void 0&&Tr.setValue(Ke,Vn.setFromMatrixPosition(Ge.matrixWorld)),kt.logarithmicDepthBuffer&&qi.setValue(Ke,"logDepthBufFC",2/(Math.log(Ge.far+1)/Math.LN2)),(pn.isMeshPhongMaterial||pn.isMeshToonMaterial||pn.isMeshLambertMaterial||pn.isMeshBasicMaterial||pn.isMeshStandardMaterial||pn.isShaderMaterial)&&qi.setValue(Ke,"isOrthographic",Ge.isOrthographicCamera===!0),de!==Ge&&(de=Ge,zi=!0,Hr=!0)}if(Ot.isSkinnedMesh){qi.setOptional(Ke,Ot,"bindMatrix"),qi.setOptional(Ke,Ot,"bindMatrixInverse");const Si=Ot.skeleton;Si&&(Si.boneTexture===null&&Si.computeBoneTexture(),qi.setValue(Ke,"boneTexture",Si.boneTexture,He))}Ot.isBatchedMesh&&(qi.setOptional(Ke,Ot,"batchingTexture"),qi.setValue(Ke,"batchingTexture",Ot._matricesTexture,He),qi.setOptional(Ke,Ot,"batchingIdTexture"),qi.setValue(Ke,"batchingIdTexture",Ot._indirectTexture,He),qi.setOptional(Ke,Ot,"batchingColorTexture"),Ot._colorsTexture!==null&&qi.setValue(Ke,"batchingColorTexture",Ot._colorsTexture,He));const xr=dn.morphAttributes;if((xr.position!==void 0||xr.normal!==void 0||xr.color!==void 0)&&ti.update(Ot,dn,Gr),(zi||oi.receiveShadow!==Ot.receiveShadow)&&(oi.receiveShadow=Ot.receiveShadow,qi.setValue(Ke,"receiveShadow",Ot.receiveShadow)),pn.isMeshGouraudMaterial&&pn.envMap!==null&&(Pr.envMap.value=Zn,Pr.flipEnvMap.value=Zn.isCubeTexture&&Zn.isRenderTargetTexture===!1?-1:1),pn.isMeshStandardMaterial&&pn.envMap===null&&Ct.environment!==null&&(Pr.envMapIntensity.value=Ct.environmentIntensity),zi&&(qi.setValue(Ke,"toneMappingExposure",_e.toneMappingExposure),oi.needsLights&&es(Pr,Hr),Dn&&pn.fog===!0&&Pn.refreshFogUniforms(Pr,Dn),Pn.refreshMaterialUniforms(Pr,pn,De,Ce,ue.state.transmissionRenderTarget[Ge.id]),WebGLUniforms.upload(Ke,Vs(oi),Pr,He)),pn.isShaderMaterial&&pn.uniformsNeedUpdate===!0&&(WebGLUniforms.upload(Ke,Vs(oi),Pr,He),pn.uniformsNeedUpdate=!1),pn.isSpriteMaterial&&qi.setValue(Ke,"center",Ot.center),qi.setValue(Ke,"modelViewMatrix",Ot.modelViewMatrix),qi.setValue(Ke,"normalMatrix",Ot.normalMatrix),qi.setValue(Ke,"modelMatrix",Ot.matrixWorld),pn.isShaderMaterial||pn.isRawShaderMaterial){const Si=pn.uniformsGroups;for(let Tr=0,Lr=Si.length;Tr<Lr;Tr++){const gs=Si[Tr];pt.update(gs,Gr),pt.bind(gs,Gr)}}return Gr}function es(Ge,Ct){Ge.ambientLightColor.needsUpdate=Ct,Ge.lightProbe.needsUpdate=Ct,Ge.directionalLights.needsUpdate=Ct,Ge.directionalLightShadows.needsUpdate=Ct,Ge.pointLights.needsUpdate=Ct,Ge.pointLightShadows.needsUpdate=Ct,Ge.spotLights.needsUpdate=Ct,Ge.spotLightShadows.needsUpdate=Ct,Ge.rectAreaLights.needsUpdate=Ct,Ge.hemisphereLights.needsUpdate=Ct}function Sr(Ge){return Ge.isMeshLambertMaterial||Ge.isMeshToonMaterial||Ge.isMeshPhongMaterial||Ge.isMeshStandardMaterial||Ge.isShadowMaterial||Ge.isShaderMaterial&&Ge.lights===!0}this.getActiveCubeFace=function(){return Re},this.getActiveMipmapLevel=function(){return Se},this.getRenderTarget=function(){return Ee},this.setRenderTargetTextures=function(Ge,Ct,dn){const pn=Qt.get(Ge);pn.__autoAllocateDepthBuffer=Ge.resolveDepthBuffer===!1,pn.__autoAllocateDepthBuffer===!1&&(pn.__useRenderToTexture=!1),Qt.get(Ge.texture).__webglTexture=Ct,Qt.get(Ge.depthTexture).__webglTexture=pn.__autoAllocateDepthBuffer?void 0:dn,pn.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(Ge,Ct){const dn=Qt.get(Ge);dn.__webglFramebuffer=Ct,dn.__useDefaultFramebuffer=Ct===void 0};const po=Ke.createFramebuffer();this.setRenderTarget=function(Ge,Ct=0,dn=0){Ee=Ge,Re=Ct,Se=dn;let pn=!0,Ot=null,Dn=!1,jn=!1;if(Ge){const Zn=Qt.get(Ge);if(Zn.__useDefaultFramebuffer!==void 0)cn.bindFramebuffer(Ke.FRAMEBUFFER,null),pn=!1;else if(Zn.__webglFramebuffer===void 0)He.setupRenderTarget(Ge);else if(Zn.__hasExternalTextures)He.rebindTextures(Ge,Qt.get(Ge.texture).__webglTexture,Qt.get(Ge.depthTexture).__webglTexture);else if(Ge.depthBuffer){const ii=Ge.depthTexture;if(Zn.__boundDepthTexture!==ii){if(ii!==null&&Qt.has(ii)&&(Ge.width!==ii.image.width||Ge.height!==ii.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");He.setupDepthRenderbuffer(Ge)}}const ui=Ge.texture;(ui.isData3DTexture||ui.isDataArrayTexture||ui.isCompressedArrayTexture)&&(jn=!0);const si=Qt.get(Ge).__webglFramebuffer;Ge.isWebGLCubeRenderTarget?(Array.isArray(si[Ct])?Ot=si[Ct][dn]:Ot=si[Ct],Dn=!0):Ge.samples>0&&He.useMultisampledRTT(Ge)===!1?Ot=Qt.get(Ge).__webglMultisampledFramebuffer:Array.isArray(si)?Ot=si[dn]:Ot=si,Me.copy(Ge.viewport),Le.copy(Ge.scissor),Pe=Ge.scissorTest}else Me.copy(Ne).multiplyScalar(De).floor(),Le.copy(Ye).multiplyScalar(De).floor(),Pe=Qe;if(dn!==0&&(Ot=po),cn.bindFramebuffer(Ke.FRAMEBUFFER,Ot)&&pn&&cn.drawBuffers(Ge,Ot),cn.viewport(Me),cn.scissor(Le),cn.setScissorTest(Pe),Dn){const Zn=Qt.get(Ge.texture);Ke.framebufferTexture2D(Ke.FRAMEBUFFER,Ke.COLOR_ATTACHMENT0,Ke.TEXTURE_CUBE_MAP_POSITIVE_X+Ct,Zn.__webglTexture,dn)}else if(jn){const Zn=Qt.get(Ge.texture),ui=Ct;Ke.framebufferTextureLayer(Ke.FRAMEBUFFER,Ke.COLOR_ATTACHMENT0,Zn.__webglTexture,dn,ui)}else if(Ge!==null&&dn!==0){const Zn=Qt.get(Ge.texture);Ke.framebufferTexture2D(Ke.FRAMEBUFFER,Ke.COLOR_ATTACHMENT0,Ke.TEXTURE_2D,Zn.__webglTexture,dn)}ye=-1},this.readRenderTargetPixels=function(Ge,Ct,dn,pn,Ot,Dn,jn){if(!(Ge&&Ge.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let qn=Qt.get(Ge).__webglFramebuffer;if(Ge.isWebGLCubeRenderTarget&&jn!==void 0&&(qn=qn[jn]),qn){cn.bindFramebuffer(Ke.FRAMEBUFFER,qn);try{const Zn=Ge.texture,ui=Zn.format,si=Zn.type;if(!kt.textureFormatReadable(ui)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!kt.textureTypeReadable(si)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Ct>=0&&Ct<=Ge.width-pn&&dn>=0&&dn<=Ge.height-Ot&&Ke.readPixels(Ct,dn,pn,Ot,xn.convert(ui),xn.convert(si),Dn)}finally{const Zn=Ee!==null?Qt.get(Ee).__webglFramebuffer:null;cn.bindFramebuffer(Ke.FRAMEBUFFER,Zn)}}},this.readRenderTargetPixelsAsync=async function(Ge,Ct,dn,pn,Ot,Dn,jn){if(!(Ge&&Ge.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let qn=Qt.get(Ge).__webglFramebuffer;if(Ge.isWebGLCubeRenderTarget&&jn!==void 0&&(qn=qn[jn]),qn)if(Ct>=0&&Ct<=Ge.width-pn&&dn>=0&&dn<=Ge.height-Ot){cn.bindFramebuffer(Ke.FRAMEBUFFER,qn);const Zn=Ge.texture,ui=Zn.format,si=Zn.type;if(!kt.textureFormatReadable(ui))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!kt.textureTypeReadable(si))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const ii=Ke.createBuffer();Ke.bindBuffer(Ke.PIXEL_PACK_BUFFER,ii),Ke.bufferData(Ke.PIXEL_PACK_BUFFER,Dn.byteLength,Ke.STREAM_READ),Ke.readPixels(Ct,dn,pn,Ot,xn.convert(ui),xn.convert(si),0);const Mi=Ee!==null?Qt.get(Ee).__webglFramebuffer:null;cn.bindFramebuffer(Ke.FRAMEBUFFER,Mi);const Vi=Ke.fenceSync(Ke.SYNC_GPU_COMMANDS_COMPLETE,0);return Ke.flush(),await probeAsync(Ke,Vi,4),Ke.bindBuffer(Ke.PIXEL_PACK_BUFFER,ii),Ke.getBufferSubData(Ke.PIXEL_PACK_BUFFER,0,Dn),Ke.deleteBuffer(ii),Ke.deleteSync(Vi),Dn}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(Ge,Ct=null,dn=0){const pn=Math.pow(2,-dn),Ot=Math.floor(Ge.image.width*pn),Dn=Math.floor(Ge.image.height*pn),jn=Ct!==null?Ct.x:0,qn=Ct!==null?Ct.y:0;He.setTexture2D(Ge,0),Ke.copyTexSubImage2D(Ke.TEXTURE_2D,dn,0,0,jn,qn,Ot,Dn),cn.unbindTexture()};const Wa=Ke.createFramebuffer(),bs=Ke.createFramebuffer();this.copyTextureToTexture=function(Ge,Ct,dn=null,pn=null,Ot=0,Dn=null){Dn===null&&(Ot!==0?(warnOnce("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),Dn=Ot,Ot=0):Dn=0);let jn,qn,Zn,ui,si,ii,Mi,Vi,nr;const Pi=Ge.isCompressedTexture?Ge.mipmaps[Dn]:Ge.image;if(dn!==null)jn=dn.max.x-dn.min.x,qn=dn.max.y-dn.min.y,Zn=dn.isBox3?dn.max.z-dn.min.z:1,ui=dn.min.x,si=dn.min.y,ii=dn.isBox3?dn.min.z:0;else{const xr=Math.pow(2,-Ot);jn=Math.floor(Pi.width*xr),qn=Math.floor(Pi.height*xr),Ge.isDataArrayTexture?Zn=Pi.depth:Ge.isData3DTexture?Zn=Math.floor(Pi.depth*xr):Zn=1,ui=0,si=0,ii=0}pn!==null?(Mi=pn.x,Vi=pn.y,nr=pn.z):(Mi=0,Vi=0,nr=0);const Ii=xn.convert(Ct.format),oi=xn.convert(Ct.type);let mr;Ct.isData3DTexture?(He.setTexture3D(Ct,0),mr=Ke.TEXTURE_3D):Ct.isDataArrayTexture||Ct.isCompressedArrayTexture?(He.setTexture2DArray(Ct,0),mr=Ke.TEXTURE_2D_ARRAY):(He.setTexture2D(Ct,0),mr=Ke.TEXTURE_2D),Ke.pixelStorei(Ke.UNPACK_FLIP_Y_WEBGL,Ct.flipY),Ke.pixelStorei(Ke.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Ct.premultiplyAlpha),Ke.pixelStorei(Ke.UNPACK_ALIGNMENT,Ct.unpackAlignment);const Li=Ke.getParameter(Ke.UNPACK_ROW_LENGTH),Gr=Ke.getParameter(Ke.UNPACK_IMAGE_HEIGHT),la=Ke.getParameter(Ke.UNPACK_SKIP_PIXELS),zi=Ke.getParameter(Ke.UNPACK_SKIP_ROWS),Hr=Ke.getParameter(Ke.UNPACK_SKIP_IMAGES);Ke.pixelStorei(Ke.UNPACK_ROW_LENGTH,Pi.width),Ke.pixelStorei(Ke.UNPACK_IMAGE_HEIGHT,Pi.height),Ke.pixelStorei(Ke.UNPACK_SKIP_PIXELS,ui),Ke.pixelStorei(Ke.UNPACK_SKIP_ROWS,si),Ke.pixelStorei(Ke.UNPACK_SKIP_IMAGES,ii);const qi=Ge.isDataArrayTexture||Ge.isData3DTexture,Pr=Ct.isDataArrayTexture||Ct.isData3DTexture;if(Ge.isDepthTexture){const xr=Qt.get(Ge),Si=Qt.get(Ct),Tr=Qt.get(xr.__renderTarget),Lr=Qt.get(Si.__renderTarget);cn.bindFramebuffer(Ke.READ_FRAMEBUFFER,Tr.__webglFramebuffer),cn.bindFramebuffer(Ke.DRAW_FRAMEBUFFER,Lr.__webglFramebuffer);for(let gs=0;gs<Zn;gs++)qi&&(Ke.framebufferTextureLayer(Ke.READ_FRAMEBUFFER,Ke.COLOR_ATTACHMENT0,Qt.get(Ge).__webglTexture,Ot,ii+gs),Ke.framebufferTextureLayer(Ke.DRAW_FRAMEBUFFER,Ke.COLOR_ATTACHMENT0,Qt.get(Ct).__webglTexture,Dn,nr+gs)),Ke.blitFramebuffer(ui,si,jn,qn,Mi,Vi,jn,qn,Ke.DEPTH_BUFFER_BIT,Ke.NEAREST);cn.bindFramebuffer(Ke.READ_FRAMEBUFFER,null),cn.bindFramebuffer(Ke.DRAW_FRAMEBUFFER,null)}else if(Ot!==0||Ge.isRenderTargetTexture||Qt.has(Ge)){const xr=Qt.get(Ge),Si=Qt.get(Ct);cn.bindFramebuffer(Ke.READ_FRAMEBUFFER,Wa),cn.bindFramebuffer(Ke.DRAW_FRAMEBUFFER,bs);for(let Tr=0;Tr<Zn;Tr++)qi?Ke.framebufferTextureLayer(Ke.READ_FRAMEBUFFER,Ke.COLOR_ATTACHMENT0,xr.__webglTexture,Ot,ii+Tr):Ke.framebufferTexture2D(Ke.READ_FRAMEBUFFER,Ke.COLOR_ATTACHMENT0,Ke.TEXTURE_2D,xr.__webglTexture,Ot),Pr?Ke.framebufferTextureLayer(Ke.DRAW_FRAMEBUFFER,Ke.COLOR_ATTACHMENT0,Si.__webglTexture,Dn,nr+Tr):Ke.framebufferTexture2D(Ke.DRAW_FRAMEBUFFER,Ke.COLOR_ATTACHMENT0,Ke.TEXTURE_2D,Si.__webglTexture,Dn),Ot!==0?Ke.blitFramebuffer(ui,si,jn,qn,Mi,Vi,jn,qn,Ke.COLOR_BUFFER_BIT,Ke.NEAREST):Pr?Ke.copyTexSubImage3D(mr,Dn,Mi,Vi,nr+Tr,ui,si,jn,qn):Ke.copyTexSubImage2D(mr,Dn,Mi,Vi,ui,si,jn,qn);cn.bindFramebuffer(Ke.READ_FRAMEBUFFER,null),cn.bindFramebuffer(Ke.DRAW_FRAMEBUFFER,null)}else Pr?Ge.isDataTexture||Ge.isData3DTexture?Ke.texSubImage3D(mr,Dn,Mi,Vi,nr,jn,qn,Zn,Ii,oi,Pi.data):Ct.isCompressedArrayTexture?Ke.compressedTexSubImage3D(mr,Dn,Mi,Vi,nr,jn,qn,Zn,Ii,Pi.data):Ke.texSubImage3D(mr,Dn,Mi,Vi,nr,jn,qn,Zn,Ii,oi,Pi):Ge.isDataTexture?Ke.texSubImage2D(Ke.TEXTURE_2D,Dn,Mi,Vi,jn,qn,Ii,oi,Pi.data):Ge.isCompressedTexture?Ke.compressedTexSubImage2D(Ke.TEXTURE_2D,Dn,Mi,Vi,Pi.width,Pi.height,Ii,Pi.data):Ke.texSubImage2D(Ke.TEXTURE_2D,Dn,Mi,Vi,jn,qn,Ii,oi,Pi);Ke.pixelStorei(Ke.UNPACK_ROW_LENGTH,Li),Ke.pixelStorei(Ke.UNPACK_IMAGE_HEIGHT,Gr),Ke.pixelStorei(Ke.UNPACK_SKIP_PIXELS,la),Ke.pixelStorei(Ke.UNPACK_SKIP_ROWS,zi),Ke.pixelStorei(Ke.UNPACK_SKIP_IMAGES,Hr),Dn===0&&Ct.generateMipmaps&&Ke.generateMipmap(mr),cn.unbindTexture()},this.copyTextureToTexture3D=function(Ge,Ct,dn=null,pn=null,Ot=0){return warnOnce('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(Ge,Ct,dn,pn,Ot)},this.initRenderTarget=function(Ge){Qt.get(Ge).__webglFramebuffer===void 0&&He.setupRenderTarget(Ge)},this.initTexture=function(Ge){Ge.isCubeTexture?He.setTextureCube(Ge,0):Ge.isData3DTexture?He.setTexture3D(Ge,0):Ge.isDataArrayTexture||Ge.isCompressedArrayTexture?He.setTexture2DArray(Ge,0):He.setTexture2D(Ge,0),cn.unbindTexture()},this.resetState=function(){Re=0,Se=0,Ee=null,cn.reset(),Xn.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return WebGLCoordinateSystem}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=ColorManagement._getDrawingBufferColorSpace(e),t.unpackColorSpace=ColorManagement._getUnpackColorSpace()}}const THREE=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping,AddEquation,AddOperation,AdditiveAnimationBlendMode,AdditiveBlending,AgXToneMapping,AlphaFormat,AlwaysCompare,AlwaysDepth,AlwaysStencilFunc,AmbientLight,AnimationAction,AnimationClip,AnimationLoader,AnimationMixer,AnimationObjectGroup,AnimationUtils,ArcCurve,ArrayCamera,ArrowHelper,AttachedBindMode,Audio,AudioAnalyser,AudioContext,AudioListener,AudioLoader,AxesHelper,BackSide,BasicDepthPacking,BasicShadowMap,BatchedMesh,Bone,BooleanKeyframeTrack,Box2,Box3,Box3Helper,BoxGeometry,BoxHelper,BufferAttribute,BufferGeometry,BufferGeometryLoader,ByteType,Cache,Camera,CameraHelper,CanvasTexture,CapsuleGeometry,CatmullRomCurve3,CineonToneMapping,CircleGeometry,ClampToEdgeWrapping,Clock,Color,ColorKeyframeTrack,ColorManagement,CompressedArrayTexture,CompressedCubeTexture,CompressedTexture,CompressedTextureLoader,ConeGeometry,ConstantAlphaFactor,ConstantColorFactor,Controls,CubeCamera,CubeReflectionMapping,CubeRefractionMapping,CubeTexture,CubeTextureLoader,CubeUVReflectionMapping,CubicBezierCurve,CubicBezierCurve3,CubicInterpolant,CullFaceBack,CullFaceFront,CullFaceFrontBack,CullFaceNone,Curve,CurvePath,CustomBlending,CustomToneMapping,CylinderGeometry,Cylindrical,Data3DTexture,DataArrayTexture,DataTexture,DataTextureLoader,DataUtils,DecrementStencilOp,DecrementWrapStencilOp,DefaultLoadingManager,DepthFormat,DepthStencilFormat,DepthTexture,DetachedBindMode,DirectionalLight,DirectionalLightHelper,DiscreteInterpolant,DodecahedronGeometry,DoubleSide,DstAlphaFactor,DstColorFactor,DynamicCopyUsage,DynamicDrawUsage,DynamicReadUsage,EdgesGeometry,EllipseCurve,EqualCompare,EqualDepth,EqualStencilFunc,EquirectangularReflectionMapping,EquirectangularRefractionMapping,Euler,EventDispatcher:EventDispatcher$1,ExtrudeGeometry,FileLoader,Float16BufferAttribute,Float32BufferAttribute,FloatType,Fog,FogExp2,FramebufferTexture,FrontSide,Frustum,GLBufferAttribute,GLSL1,GLSL3,GreaterCompare,GreaterDepth,GreaterEqualCompare,GreaterEqualDepth,GreaterEqualStencilFunc,GreaterStencilFunc,GridHelper,Group,HalfFloatType,HemisphereLight,HemisphereLightHelper,IcosahedronGeometry,ImageBitmapLoader,ImageLoader,ImageUtils,IncrementStencilOp,IncrementWrapStencilOp,InstancedBufferAttribute,InstancedBufferGeometry,InstancedInterleavedBuffer,InstancedMesh,Int16BufferAttribute,Int32BufferAttribute,Int8BufferAttribute,IntType,InterleavedBuffer,InterleavedBufferAttribute,Interpolant,InterpolateDiscrete,InterpolateLinear,InterpolateSmooth,InvertStencilOp,KeepStencilOp,KeyframeTrack,LOD,LatheGeometry,Layers,LessCompare,LessDepth,LessEqualCompare,LessEqualDepth,LessEqualStencilFunc,LessStencilFunc,Light,LightProbe,Line,Line3,LineBasicMaterial,LineCurve,LineCurve3,LineDashedMaterial,LineLoop,LineSegments,LinearFilter,LinearInterpolant,LinearMipMapLinearFilter,LinearMipMapNearestFilter,LinearMipmapLinearFilter,LinearMipmapNearestFilter,LinearSRGBColorSpace,LinearToneMapping,LinearTransfer,Loader,LoaderUtils,LoadingManager,LoopOnce,LoopPingPong,LoopRepeat,LuminanceAlphaFormat,LuminanceFormat,MOUSE,Material,MaterialLoader,MathUtils,Matrix2,Matrix3,Matrix4,MaxEquation,Mesh,MeshBasicMaterial,MeshDepthMaterial,MeshDistanceMaterial,MeshLambertMaterial,MeshMatcapMaterial,MeshNormalMaterial,MeshPhongMaterial,MeshPhysicalMaterial,MeshStandardMaterial,MeshToonMaterial,MinEquation,MirroredRepeatWrapping,MixOperation,MultiplyBlending,MultiplyOperation,NearestFilter,NearestMipMapLinearFilter,NearestMipMapNearestFilter,NearestMipmapLinearFilter,NearestMipmapNearestFilter,NeutralToneMapping,NeverCompare,NeverDepth,NeverStencilFunc,NoBlending,NoColorSpace,NoToneMapping,NormalAnimationBlendMode,NormalBlending,NotEqualCompare,NotEqualDepth,NotEqualStencilFunc,NumberKeyframeTrack,Object3D,ObjectLoader,ObjectSpaceNormalMap,OctahedronGeometry,OneFactor,OneMinusConstantAlphaFactor,OneMinusConstantColorFactor,OneMinusDstAlphaFactor,OneMinusDstColorFactor,OneMinusSrcAlphaFactor,OneMinusSrcColorFactor,OrthographicCamera,PCFShadowMap,PCFSoftShadowMap,PMREMGenerator,Path,PerspectiveCamera,Plane,PlaneGeometry,PlaneHelper,PointLight,PointLightHelper,Points,PointsMaterial,PolarGridHelper,PolyhedronGeometry,PositionalAudio,PropertyBinding,PropertyMixer,QuadraticBezierCurve,QuadraticBezierCurve3,Quaternion,QuaternionKeyframeTrack,QuaternionLinearInterpolant,RED_GREEN_RGTC2_Format,RED_RGTC1_Format,REVISION,RGBADepthPacking,RGBAFormat,RGBAIntegerFormat,RGBA_ASTC_10x10_Format,RGBA_ASTC_10x5_Format,RGBA_ASTC_10x6_Format,RGBA_ASTC_10x8_Format,RGBA_ASTC_12x10_Format,RGBA_ASTC_12x12_Format,RGBA_ASTC_4x4_Format,RGBA_ASTC_5x4_Format,RGBA_ASTC_5x5_Format,RGBA_ASTC_6x5_Format,RGBA_ASTC_6x6_Format,RGBA_ASTC_8x5_Format,RGBA_ASTC_8x6_Format,RGBA_ASTC_8x8_Format,RGBA_BPTC_Format,RGBA_ETC2_EAC_Format,RGBA_PVRTC_2BPPV1_Format,RGBA_PVRTC_4BPPV1_Format,RGBA_S3TC_DXT1_Format,RGBA_S3TC_DXT3_Format,RGBA_S3TC_DXT5_Format,RGBDepthPacking,RGBFormat,RGBIntegerFormat,RGB_BPTC_SIGNED_Format,RGB_BPTC_UNSIGNED_Format,RGB_ETC1_Format,RGB_ETC2_Format,RGB_PVRTC_2BPPV1_Format,RGB_PVRTC_4BPPV1_Format,RGB_S3TC_DXT1_Format,RGDepthPacking,RGFormat,RGIntegerFormat,RawShaderMaterial,Ray,Raycaster,RectAreaLight,RedFormat,RedIntegerFormat,ReinhardToneMapping,RenderTarget,RenderTarget3D,RenderTargetArray,RepeatWrapping,ReplaceStencilOp,ReverseSubtractEquation,RingGeometry,SIGNED_RED_GREEN_RGTC2_Format,SIGNED_RED_RGTC1_Format,SRGBColorSpace,SRGBTransfer,Scene,ShaderChunk,ShaderLib,ShaderMaterial,ShadowMaterial,Shape,ShapeGeometry,ShapePath,ShapeUtils,ShortType,Skeleton,SkeletonHelper,SkinnedMesh,Source,Sphere,SphereGeometry,Spherical,SphericalHarmonics3,SplineCurve,SpotLight,SpotLightHelper,Sprite,SpriteMaterial,SrcAlphaFactor,SrcAlphaSaturateFactor,SrcColorFactor,StaticCopyUsage,StaticDrawUsage,StaticReadUsage,StereoCamera,StreamCopyUsage,StreamDrawUsage,StreamReadUsage,StringKeyframeTrack,SubtractEquation,SubtractiveBlending,TOUCH,TangentSpaceNormalMap,TetrahedronGeometry,Texture,TextureLoader,TextureUtils,TimestampQuery,TorusGeometry,TorusKnotGeometry,Triangle,TriangleFanDrawMode,TriangleStripDrawMode,TrianglesDrawMode,TubeGeometry,UVMapping,Uint16BufferAttribute,Uint32BufferAttribute,Uint8BufferAttribute,Uint8ClampedBufferAttribute,Uniform,UniformsGroup,UniformsLib,UniformsUtils,UnsignedByteType,UnsignedInt248Type,UnsignedInt5999Type,UnsignedIntType,UnsignedShort4444Type,UnsignedShort5551Type,UnsignedShortType,VSMShadowMap,Vector2,Vector3,Vector4,VectorKeyframeTrack,VideoFrameTexture,VideoTexture,WebGL3DRenderTarget,WebGLArrayRenderTarget,WebGLCoordinateSystem,WebGLCubeRenderTarget,WebGLRenderTarget,WebGLRenderer,WebGLUtils,WebGPUCoordinateSystem,WebXRController,WireframeGeometry,WrapAroundEnding,ZeroCurvatureEnding,ZeroFactor,ZeroSlopeEnding,ZeroStencilOp,createCanvasElement},Symbol.toStringTag,{value:"Module"}));var constants={exports:{}},reactReconcilerConstants_production={};/**
 * @license React
 * react-reconciler-constants.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactReconcilerConstants_production;function requireReactReconcilerConstants_production(){return hasRequiredReactReconcilerConstants_production||(hasRequiredReactReconcilerConstants_production=1,reactReconcilerConstants_production.ConcurrentRoot=1,reactReconcilerConstants_production.ContinuousEventPriority=8,reactReconcilerConstants_production.DefaultEventPriority=32,reactReconcilerConstants_production.DiscreteEventPriority=2,reactReconcilerConstants_production.IdleEventPriority=268435456,reactReconcilerConstants_production.LegacyRoot=0,reactReconcilerConstants_production.NoEventPriority=0),reactReconcilerConstants_production}var hasRequiredConstants;function requireConstants(){return hasRequiredConstants||(hasRequiredConstants=1,constants.exports=requireReactReconcilerConstants_production()),constants.exports}var constantsExports=requireConstants(),withSelector={exports:{}},withSelector_production={},shim={exports:{}},useSyncExternalStoreShim_production={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredUseSyncExternalStoreShim_production;function requireUseSyncExternalStoreShim_production(){if(hasRequiredUseSyncExternalStoreShim_production)return useSyncExternalStoreShim_production;hasRequiredUseSyncExternalStoreShim_production=1;var r=requireReact();function e(ie,re){return ie===re&&(ie!==0||1/ie===1/re)||ie!==ie&&re!==re}var t=typeof Object.is=="function"?Object.is:e,o=r.useState,y=r.useEffect,R=r.useLayoutEffect,G=r.useDebugValue;function K(ie,re){var se=re(),le=o({inst:{value:se,getSnapshot:re}}),ce=le[0].inst,oe=le[1];return R(function(){ce.value=se,ce.getSnapshot=re,Y(ce)&&oe({inst:ce})},[ie,se,re]),y(function(){return Y(ce)&&oe({inst:ce}),ie(function(){Y(ce)&&oe({inst:ce})})},[ie]),G(se),se}function Y(ie){var re=ie.getSnapshot;ie=ie.value;try{var se=re();return!t(ie,se)}catch{return!0}}function Q(ie,re){return re()}var ee=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Q:K;return useSyncExternalStoreShim_production.useSyncExternalStore=r.useSyncExternalStore!==void 0?r.useSyncExternalStore:ee,useSyncExternalStoreShim_production}var hasRequiredShim;function requireShim(){return hasRequiredShim||(hasRequiredShim=1,shim.exports=requireUseSyncExternalStoreShim_production()),shim.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredWithSelector_production;function requireWithSelector_production(){if(hasRequiredWithSelector_production)return withSelector_production;hasRequiredWithSelector_production=1;var r=requireReact(),e=requireShim();function t(Q,ee){return Q===ee&&(Q!==0||1/Q===1/ee)||Q!==Q&&ee!==ee}var o=typeof Object.is=="function"?Object.is:t,y=e.useSyncExternalStore,R=r.useRef,G=r.useEffect,K=r.useMemo,Y=r.useDebugValue;return withSelector_production.useSyncExternalStoreWithSelector=function(Q,ee,ie,re,se){var le=R(null);if(le.current===null){var ce={hasValue:!1,value:null};le.current=ce}else ce=le.current;le=K(function(){function ue(Re){if(!ge){if(ge=!0,ve=Re,Re=re(Re),se!==void 0&&ce.hasValue){var Se=ce.value;if(se(Se,Re))return _e=Se}return _e=Re}if(Se=_e,o(ve,Re))return Se;var Ee=re(Re);return se!==void 0&&se(Se,Ee)?(ve=Re,Se):(ve=Re,_e=Ee)}var ge=!1,ve,_e,be=ie===void 0?null:ie;return[function(){return ue(ee())},be===null?void 0:function(){return ue(be())}]},[ee,ie,re,se]);var oe=y(Q,le[0],le[1]);return G(function(){ce.hasValue=!0,ce.value=oe},[oe]),Y(oe),oe},withSelector_production}var hasRequiredWithSelector;function requireWithSelector(){return hasRequiredWithSelector||(hasRequiredWithSelector=1,withSelector.exports=requireWithSelector_production()),withSelector.exports}var withSelectorExports=requireWithSelector();const useSyncExternalStoreExports=getDefaultExportFromCjs(withSelectorExports),createStoreImpl=r=>{let e;const t=new Set,o=(Q,ee)=>{const ie=typeof Q=="function"?Q(e):Q;if(!Object.is(ie,e)){const re=e;e=ee??(typeof ie!="object"||ie===null)?ie:Object.assign({},e,ie),t.forEach(se=>se(e,re))}},y=()=>e,K={setState:o,getState:y,getInitialState:()=>Y,subscribe:Q=>(t.add(Q),()=>t.delete(Q))},Y=e=r(o,y,K);return K},createStore$1=r=>r?createStoreImpl(r):createStoreImpl,{useSyncExternalStoreWithSelector}=useSyncExternalStoreExports,identity=r=>r;function useStoreWithEqualityFn(r,e=identity,t){const o=useSyncExternalStoreWithSelector(r.subscribe,r.getState,r.getInitialState,e,t);return React.useDebugValue(o),o}const createWithEqualityFnImpl=(r,e)=>{const t=createStore$1(r),o=(y,R=e)=>useStoreWithEqualityFn(t,y,R);return Object.assign(o,t),o},createWithEqualityFn=(r,e)=>r?createWithEqualityFnImpl(r,e):createWithEqualityFnImpl;var reactReconciler={exports:{}},reactReconciler_production={exports:{}},scheduler$1={exports:{}},scheduler_production$1={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredScheduler_production$1;function requireScheduler_production$1(){return hasRequiredScheduler_production$1||(hasRequiredScheduler_production$1=1,function(r){function e(Ve,Ce){var De=Ve.length;Ve.push(Ce);e:for(;0<De;){var Oe=De-1>>>1,Te=Ve[Oe];if(0<y(Te,Ce))Ve[Oe]=Ce,Ve[De]=Te,De=Oe;else break e}}function t(Ve){return Ve.length===0?null:Ve[0]}function o(Ve){if(Ve.length===0)return null;var Ce=Ve[0],De=Ve.pop();if(De!==Ce){Ve[0]=De;e:for(var Oe=0,Te=Ve.length,Ne=Te>>>1;Oe<Ne;){var Ye=2*(Oe+1)-1,Qe=Ve[Ye],qe=Ye+1,Ze=Ve[qe];if(0>y(Qe,De))qe<Te&&0>y(Ze,Qe)?(Ve[Oe]=Ze,Ve[qe]=De,Oe=qe):(Ve[Oe]=Qe,Ve[Ye]=De,Oe=Ye);else if(qe<Te&&0>y(Ze,De))Ve[Oe]=Ze,Ve[qe]=De,Oe=qe;else break e}}return Ce}function y(Ve,Ce){var De=Ve.sortIndex-Ce.sortIndex;return De!==0?De:Ve.id-Ce.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var R=performance;r.unstable_now=function(){return R.now()}}else{var G=Date,K=G.now();r.unstable_now=function(){return G.now()-K}}var Y=[],Q=[],ee=1,ie=null,re=3,se=!1,le=!1,ce=!1,oe=typeof setTimeout=="function"?setTimeout:null,ue=typeof clearTimeout=="function"?clearTimeout:null,ge=typeof setImmediate<"u"?setImmediate:null;function ve(Ve){for(var Ce=t(Q);Ce!==null;){if(Ce.callback===null)o(Q);else if(Ce.startTime<=Ve)o(Q),Ce.sortIndex=Ce.expirationTime,e(Y,Ce);else break;Ce=t(Q)}}function _e(Ve){if(ce=!1,ve(Ve),!le)if(t(Y)!==null)le=!0,Ue();else{var Ce=t(Q);Ce!==null&&$e(_e,Ce.startTime-Ve)}}var be=!1,Re=-1,Se=5,Ee=-1;function ye(){return!(r.unstable_now()-Ee<Se)}function de(){if(be){var Ve=r.unstable_now();Ee=Ve;var Ce=!0;try{e:{le=!1,ce&&(ce=!1,ue(Re),Re=-1),se=!0;var De=re;try{t:{for(ve(Ve),ie=t(Y);ie!==null&&!(ie.expirationTime>Ve&&ye());){var Oe=ie.callback;if(typeof Oe=="function"){ie.callback=null,re=ie.priorityLevel;var Te=Oe(ie.expirationTime<=Ve);if(Ve=r.unstable_now(),typeof Te=="function"){ie.callback=Te,ve(Ve),Ce=!0;break t}ie===t(Y)&&o(Y),ve(Ve)}else o(Y);ie=t(Y)}if(ie!==null)Ce=!0;else{var Ne=t(Q);Ne!==null&&$e(_e,Ne.startTime-Ve),Ce=!1}}break e}finally{ie=null,re=De,se=!1}Ce=void 0}}finally{Ce?Me():be=!1}}}var Me;if(typeof ge=="function")Me=function(){ge(de)};else if(typeof MessageChannel<"u"){var Le=new MessageChannel,Pe=Le.port2;Le.port1.onmessage=de,Me=function(){Pe.postMessage(null)}}else Me=function(){oe(de,0)};function Ue(){be||(be=!0,Me())}function $e(Ve,Ce){Re=oe(function(){Ve(r.unstable_now())},Ce)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(Ve){Ve.callback=null},r.unstable_continueExecution=function(){le||se||(le=!0,Ue())},r.unstable_forceFrameRate=function(Ve){0>Ve||125<Ve?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Se=0<Ve?Math.floor(1e3/Ve):5},r.unstable_getCurrentPriorityLevel=function(){return re},r.unstable_getFirstCallbackNode=function(){return t(Y)},r.unstable_next=function(Ve){switch(re){case 1:case 2:case 3:var Ce=3;break;default:Ce=re}var De=re;re=Ce;try{return Ve()}finally{re=De}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(Ve,Ce){switch(Ve){case 1:case 2:case 3:case 4:case 5:break;default:Ve=3}var De=re;re=Ve;try{return Ce()}finally{re=De}},r.unstable_scheduleCallback=function(Ve,Ce,De){var Oe=r.unstable_now();switch(typeof De=="object"&&De!==null?(De=De.delay,De=typeof De=="number"&&0<De?Oe+De:Oe):De=Oe,Ve){case 1:var Te=-1;break;case 2:Te=250;break;case 5:Te=1073741823;break;case 4:Te=1e4;break;default:Te=5e3}return Te=De+Te,Ve={id:ee++,callback:Ce,priorityLevel:Ve,startTime:De,expirationTime:Te,sortIndex:-1},De>Oe?(Ve.sortIndex=De,e(Q,Ve),t(Y)===null&&Ve===t(Q)&&(ce?(ue(Re),Re=-1):ce=!0,$e(_e,De-Oe))):(Ve.sortIndex=Te,e(Y,Ve),le||se||(le=!0,Ue())),Ve},r.unstable_shouldYield=ye,r.unstable_wrapCallback=function(Ve){var Ce=re;return function(){var De=re;re=Ce;try{return Ve.apply(this,arguments)}finally{re=De}}}}(scheduler_production$1)),scheduler_production$1}var hasRequiredScheduler$1;function requireScheduler$1(){return hasRequiredScheduler$1||(hasRequiredScheduler$1=1,scheduler$1.exports=requireScheduler_production$1()),scheduler$1.exports}/**
 * @license React
 * react-reconciler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactReconciler_production;function requireReactReconciler_production(){return hasRequiredReactReconciler_production||(hasRequiredReactReconciler_production=1,function(r){r.exports=function(e){function t(J,te,he,me){return new zh(J,te,he,me)}function o(){}function y(J){var te="https://react.dev/errors/"+J;if(1<arguments.length){te+="?args[]="+encodeURIComponent(arguments[1]);for(var he=2;he<arguments.length;he++)te+="&args[]="+encodeURIComponent(arguments[he])}return"Minified React error #"+J+"; visit "+te+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function R(J){return J===null||typeof J!="object"?null:(J=Ro&&J[Ro]||J["@@iterator"],typeof J=="function"?J:null)}function G(J){if(J==null)return null;if(typeof J=="function")return J.$$typeof===jh?null:J.displayName||J.name||null;if(typeof J=="string")return J;switch(J){case il:return"Fragment";case Ea:return"Portal";case Wu:return"Profiler";case fu:return"StrictMode";case Xu:return"Suspense";case yc:return"SuspenseList"}if(typeof J=="object")switch(J.$$typeof){case Na:return(J.displayName||"Context")+".Provider";case Gh:return(J._context.displayName||"Context")+".Consumer";case pu:var te=J.render;return J=J.displayName,J||(J=te.displayName||te.name||"",J=J!==""?"ForwardRef("+J+")":"ForwardRef"),J;case $u:return te=J.displayName||null,te!==null?te:G(J.type)||"Memo";case Sa:te=J._payload,J=J._init;try{return G(J(te))}catch{}}return null}function K(J){if(Ja===void 0)try{throw Error()}catch(he){var te=he.stack.trim().match(/\n( *(at )?)/);Ja=te&&te[1]||"",Co=-1<he.stack.indexOf(`
    at`)?" (<anonymous>)":-1<he.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ja+J+Co}function Y(J,te){if(!J||Vl)return"";Vl=!0;var he=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var me={DetermineComponentFrameRoot:function(){try{if(te){var Yn=function(){throw Error()};if(Object.defineProperty(Yn.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Yn,[])}catch(Ti){var Jn=Ti}Reflect.construct(J,[],Yn)}else{try{Yn.call()}catch(Ti){Jn=Ti}J.call(Yn.prototype)}}else{try{throw Error()}catch(Ti){Jn=Ti}(Yn=J())&&typeof Yn.catch=="function"&&Yn.catch(function(){})}}catch(Ti){if(Ti&&Jn&&typeof Ti.stack=="string")return[Ti.stack,Jn.stack]}return[null,null]}};me.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var Ae=Object.getOwnPropertyDescriptor(me.DetermineComponentFrameRoot,"name");Ae&&Ae.configurable&&Object.defineProperty(me.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var Ie=me.DetermineComponentFrameRoot(),je=Ie[0],lt=Ie[1];if(je&&lt){var qt=je.split(`
`),bn=lt.split(`
`);for(Ae=me=0;me<qt.length&&!qt[me].includes("DetermineComponentFrameRoot");)me++;for(;Ae<bn.length&&!bn[Ae].includes("DetermineComponentFrameRoot");)Ae++;if(me===qt.length||Ae===bn.length)for(me=qt.length-1,Ae=bn.length-1;1<=me&&0<=Ae&&qt[me]!==bn[Ae];)Ae--;for(;1<=me&&0<=Ae;me--,Ae--)if(qt[me]!==bn[Ae]){if(me!==1||Ae!==1)do if(me--,Ae--,0>Ae||qt[me]!==bn[Ae]){var zn=`
`+qt[me].replace(" at new "," at ");return J.displayName&&zn.includes("<anonymous>")&&(zn=zn.replace("<anonymous>",J.displayName)),zn}while(1<=me&&0<=Ae);break}}}finally{Vl=!1,Error.prepareStackTrace=he}return(he=J?J.displayName||J.name:"")?K(he):""}function Q(J){switch(J.tag){case 26:case 27:case 5:return K(J.type);case 16:return K("Lazy");case 13:return K("Suspense");case 19:return K("SuspenseList");case 0:case 15:return J=Y(J.type,!1),J;case 11:return J=Y(J.type.render,!1),J;case 1:return J=Y(J.type,!0),J;default:return""}}function ee(J){try{var te="";do te+=Q(J),J=J.return;while(J);return te}catch(he){return`
Error generating stack: `+he.message+`
`+he.stack}}function ie(J){var te=J,he=J;if(J.alternate)for(;te.return;)te=te.return;else{J=te;do te=J,(te.flags&4098)!==0&&(he=te.return),J=te.return;while(J)}return te.tag===3?he:null}function re(J){if(ie(J)!==J)throw Error(y(188))}function se(J){var te=J.alternate;if(!te){if(te=ie(J),te===null)throw Error(y(188));return te!==J?null:J}for(var he=J,me=te;;){var Ae=he.return;if(Ae===null)break;var Ie=Ae.alternate;if(Ie===null){if(me=Ae.return,me!==null){he=me;continue}break}if(Ae.child===Ie.child){for(Ie=Ae.child;Ie;){if(Ie===he)return re(Ae),J;if(Ie===me)return re(Ae),te;Ie=Ie.sibling}throw Error(y(188))}if(he.return!==me.return)he=Ae,me=Ie;else{for(var je=!1,lt=Ae.child;lt;){if(lt===he){je=!0,he=Ae,me=Ie;break}if(lt===me){je=!0,me=Ae,he=Ie;break}lt=lt.sibling}if(!je){for(lt=Ie.child;lt;){if(lt===he){je=!0,he=Ie,me=Ae;break}if(lt===me){je=!0,me=Ie,he=Ae;break}lt=lt.sibling}if(!je)throw Error(y(189))}}if(he.alternate!==me)throw Error(y(190))}if(he.tag!==3)throw Error(y(188));return he.stateNode.current===he?J:te}function le(J){var te=J.tag;if(te===5||te===26||te===27||te===6)return J;for(J=J.child;J!==null;){if(te=le(J),te!==null)return te;J=J.sibling}return null}function ce(J){var te=J.tag;if(te===5||te===26||te===27||te===6)return J;for(J=J.child;J!==null;){if(J.tag!==4&&(te=ce(J),te!==null))return te;J=J.sibling}return null}function oe(J){return{current:J}}function ue(J){0>Do||(J.current=Ur[Do],Ur[Do]=null,Do--)}function ge(J,te){Do++,Ur[Do]=J.current,J.current=te}function ve(J){return J>>>=0,J===0?32:31-(gd(J)/yd|0)|0}function _e(J){var te=J&42;if(te!==0)return te;switch(J&-J){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return J&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return J&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return J}}function be(J,te){var he=J.pendingLanes;if(he===0)return 0;var me=0,Ae=J.suspendedLanes,Ie=J.pingedLanes,je=J.warmLanes;J=J.finishedLanes!==0;var lt=he&134217727;return lt!==0?(he=lt&~Ae,he!==0?me=_e(he):(Ie&=lt,Ie!==0?me=_e(Ie):J||(je=lt&~je,je!==0&&(me=_e(je))))):(lt=he&~Ae,lt!==0?me=_e(lt):Ie!==0?me=_e(Ie):J||(je=he&~je,je!==0&&(me=_e(je)))),me===0?0:te!==0&&te!==me&&(te&Ae)===0&&(Ae=me&-me,je=te&-te,Ae>=je||Ae===32&&(je&4194176)!==0)?te:me}function Re(J,te){return(J.pendingLanes&~(J.suspendedLanes&~J.pingedLanes)&te)===0}function Se(J,te){switch(J){case 1:case 2:case 4:case 8:return te+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return te+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ee(){var J=to;return to<<=1,(to&4194176)===0&&(to=128),J}function ye(){var J=Nl;return Nl<<=1,(Nl&62914560)===0&&(Nl=4194304),J}function de(J){for(var te=[],he=0;31>he;he++)te.push(J);return te}function Me(J,te){J.pendingLanes|=te,te!==268435456&&(J.suspendedLanes=0,J.pingedLanes=0,J.warmLanes=0)}function Le(J,te,he,me,Ae,Ie){var je=J.pendingLanes;J.pendingLanes=he,J.suspendedLanes=0,J.pingedLanes=0,J.warmLanes=0,J.expiredLanes&=he,J.entangledLanes&=he,J.errorRecoveryDisabledLanes&=he,J.shellSuspendCounter=0;var lt=J.entanglements,qt=J.expirationTimes,bn=J.hiddenUpdates;for(he=je&~he;0<he;){var zn=31-Ps(he),Yn=1<<zn;lt[zn]=0,qt[zn]=-1;var Jn=bn[zn];if(Jn!==null)for(bn[zn]=null,zn=0;zn<Jn.length;zn++){var Ti=Jn[zn];Ti!==null&&(Ti.lane&=-536870913)}he&=~Yn}me!==0&&Pe(J,me,0),Ie!==0&&Ae===0&&J.tag!==0&&(J.suspendedLanes|=Ie&~(je&~te))}function Pe(J,te,he){J.pendingLanes|=te,J.suspendedLanes&=~te;var me=31-Ps(te);J.entangledLanes|=te,J.entanglements[me]=J.entanglements[me]|1073741824|he&4194218}function Ue(J,te){var he=J.entangledLanes|=te;for(J=J.entanglements;he;){var me=31-Ps(he),Ae=1<<me;Ae&te|J[me]&te&&(J[me]|=te),he&=~Ae}}function $e(J){return J&=-J,2<J?8<J?(J&134217727)!==0?32:268435456:8:2}function Ve(J){if(ks&&typeof ks.onCommitFiberRoot=="function")try{ks.onCommitFiberRoot(zr,J,void 0,(J.current.flags&128)===128)}catch{}}function Ce(J){if(typeof Ed=="function"&&ss(J),ks&&typeof ks.setStrictMode=="function")try{ks.setStrictMode(zr,J)}catch{}}function De(J,te){return J===te&&(J!==0||1/J===1/te)||J!==J&&te!==te}function Oe(J,te){if(typeof J=="object"&&J!==null){var he=uf.get(J);return he!==void 0?he:(te={value:J,source:te,stack:ee(te)},uf.set(J,te),te)}return{value:J,source:te,stack:ee(te)}}function Te(J,te){Fl[Bl++]=Mc,Fl[Bl++]=Ul,Ul=J,Mc=te}function Ne(J,te,he){Zs[Qs++]=Ua,Zs[Qs++]=za,Zs[Qs++]=ul,ul=J;var me=Ua;J=za;var Ae=32-Ps(me)-1;me&=~(1<<Ae),he+=1;var Ie=32-Ps(te)+Ae;if(30<Ie){var je=Ae-Ae%5;Ie=(me&(1<<je)-1).toString(32),me>>=je,Ae-=je,Ua=1<<32-Ps(te)+Ae|he<<Ae|me,za=Ie+J}else Ua=1<<Ie|he<<Ae|me,za=J}function Ye(J){J.return!==null&&(Te(J,1),Ne(J,1,0))}function Qe(J){for(;J===Ul;)Ul=Fl[--Bl],Fl[Bl]=null,Mc=Fl[--Bl],Fl[Bl]=null;for(;J===ul;)ul=Zs[--Qs],Zs[Qs]=null,za=Zs[--Qs],Zs[Qs]=null,Ua=Zs[--Qs],Zs[Qs]=null}function qe(J,te){ge(no,te),ge(Rc,J),ge(Yr,null),J=Lf(te),ue(Yr),ge(Yr,J)}function Ze(){ue(Yr),ue(Rc),ue(no)}function ct(J){J.memoizedState!==null&&ge(zl,J);var te=Yr.current,he=Sc(te,J.type);te!==he&&(ge(Rc,J),ge(Yr,he))}function xt(J){Rc.current===J&&(ue(Yr),ue(Rc)),zl.current===J&&(ue(zl),Rs?Fa._currentValue=sl:Fa._currentValue2=sl)}function un(J){var te=Error(y(418,""));throw Ln(Oe(te,J)),Tu}function Vn(J,te){if(!fs)throw Error(y(175));ad(J.stateNode,J.type,J.memoizedProps,te,J)||un(J)}function In(J){for(ds=J.return;ds;)switch(ds.tag){case 3:case 27:as=!0;return;case 5:case 13:as=!1;return;default:ds=ds.return}}function Un(J){if(!fs||J!==ds)return!1;if(!Gi)return In(J),Gi=!0,!1;var te=!1;if(rr?J.tag!==3&&J.tag!==27&&(J.tag!==5||ih(J.type)&&!Ai(J.type,J.memoizedProps))&&(te=!0):J.tag!==3&&(J.tag!==5||ih(J.type)&&!Ai(J.type,J.memoizedProps))&&(te=!0),te&&ps&&un(J),In(J),J.tag===13){if(!fs)throw Error(y(316));if(J=J.memoizedState,J=J!==null?J.dehydrated:null,!J)throw Error(y(317));ps=ld(J)}else ps=ds?af(J.stateNode):null;return!0}function kn(){fs&&(ps=ds=null,Gi=!1)}function Ln(J){ba===null?ba=[J]:ba.push(J)}function Ke(){for(var J=kl,te=ka=kl=0;te<J;){var he=Aa[te];Aa[te++]=null;var me=Aa[te];Aa[te++]=null;var Ae=Aa[te];Aa[te++]=null;var Ie=Aa[te];if(Aa[te++]=null,me!==null&&Ae!==null){var je=me.pending;je===null?Ae.next=Ae:(Ae.next=je.next,je.next=Ae),me.pending=Ae}Ie!==0&&cn(he,Ae,Ie)}}function Qn(J,te,he,me){Aa[kl++]=J,Aa[kl++]=te,Aa[kl++]=he,Aa[kl++]=me,ka|=me,J.lanes|=me,J=J.alternate,J!==null&&(J.lanes|=me)}function yn(J,te,he,me){return Qn(J,te,he,me),Mn(J)}function kt(J,te){return Qn(J,null,null,te),Mn(J)}function cn(J,te,he){J.lanes|=he;var me=J.alternate;me!==null&&(me.lanes|=he);for(var Ae=!1,Ie=J.return;Ie!==null;)Ie.childLanes|=he,me=Ie.alternate,me!==null&&(me.childLanes|=he),Ie.tag===22&&(J=Ie.stateNode,J===null||J._visibility&1||(Ae=!0)),J=Ie,Ie=Ie.return;Ae&&te!==null&&J.tag===3&&(Ie=J.stateNode,Ae=31-Ps(he),Ie=Ie.hiddenUpdates,J=Ie[Ae],J===null?Ie[Ae]=[te]:J.push(te),te.lane=he|536870912)}function Mn(J){if(50<Nc)throw Nc=0,_h=null,Error(y(185));for(var te=J.return;te!==null;)J=te,te=J.return;return J.tag===3?J.stateNode:null}function Qt(J){J!==Vo&&J.next===null&&(Vo===null?bu=Vo=J:Vo=Vo.next=J),lr=!0,Gl||(Gl=!0,an(ze))}function He(J,te){if(!hf&&lr){hf=!0;do for(var he=!1,me=bu;me!==null;){if(J!==0){var Ae=me.pendingLanes;if(Ae===0)var Ie=0;else{var je=me.suspendedLanes,lt=me.pingedLanes;Ie=(1<<31-Ps(42|J)+1)-1,Ie&=Ae&~(je&~lt),Ie=Ie&201326677?Ie&201326677|1:Ie?Ie|2:0}Ie!==0&&(he=!0,En(me,Ie))}else Ie=Bi,Ie=be(me,me===Ji?Ie:0),(Ie&3)===0||Re(me,Ie)||(he=!0,En(me,Ie));me=me.next}while(he);hf=!1}}function ze(){lr=Gl=!1;var J=0;Cc!==0&&(Bf()&&(J=Cc),Cc=0);for(var te=Ta(),he=null,me=bu;me!==null;){var Ae=me.next,Ie=Mt(me,te);Ie===0?(me.next=null,he===null?bu=Ae:he.next=Ae,Ae===null&&(Vo=he)):(he=me,(J!==0||(Ie&3)!==0)&&(lr=!0)),me=Ae}He(J)}function Mt(J,te){for(var he=J.suspendedLanes,me=J.pingedLanes,Ae=J.expirationTimes,Ie=J.pendingLanes&-62914561;0<Ie;){var je=31-Ps(Ie),lt=1<<je,qt=Ae[je];qt===-1?((lt&he)===0||(lt&me)!==0)&&(Ae[je]=Se(lt,te)):qt<=te&&(J.expiredLanes|=lt),Ie&=~lt}if(te=Ji,he=Bi,he=be(J,J===te?he:0),me=J.callbackNode,he===0||J===te&&ir===2||J.cancelPendingCommit!==null)return me!==null&&me!==null&&oh(me),J.callbackNode=null,J.callbackPriority=0;if((he&3)===0||Re(J,he)){if(te=he&-he,te===J.callbackPriority)return te;switch(me!==null&&oh(me),$e(he)){case 2:case 8:he=vd;break;case 32:he=uh;break;case 268435456:he=$d;break;default:he=uh}return me=hn.bind(null,J),he=xu(he,me),J.callbackPriority=te,J.callbackNode=he,te}return me!==null&&me!==null&&oh(me),J.callbackPriority=2,J.callbackNode=null,2}function hn(J,te){var he=J.callbackNode;if(Oa()&&J.callbackNode!==he)return null;var me=Bi;return me=be(J,J===Ji?me:0),me===0?null:(Qo(J,me,te),Mt(J,Ta()),J.callbackNode!=null&&J.callbackNode===he?hn.bind(null,J):null)}function En(J,te){if(Oa())return null;Qo(J,te,!0)}function an(J){Kh?Io(function(){(Xi&6)!==0?xu(ch,J):J()}):xu(ch,J)}function Cn(){return Cc===0&&(Cc=Ee()),Cc}function Pn(J,te){if(Pc===null){var he=Pc=[];Hl=0,Js=Cn(),jl={status:"pending",value:void 0,then:function(me){he.push(me)}}}return Hl++,te.then(Fn,Fn),te}function Fn(){if(--Hl===0&&Pc!==null){jl!==null&&(jl.status="fulfilled");var J=Pc;Pc=null,Js=0,jl=null;for(var te=0;te<J.length;te++)(0,J[te])()}}function pi(J,te){var he=[],me={status:"pending",value:null,reason:null,then:function(Ae){he.push(Ae)}};return J.then(function(){me.status="fulfilled",me.value=te;for(var Ae=0;Ae<he.length;Ae++)(0,he[Ae])(te)},function(Ae){for(me.status="rejected",me.reason=Ae,Ae=0;Ae<he.length;Ae++)(0,he[Ae])(void 0)}),me}function On(J){J.updateQueue={baseState:J.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Kn(J,te){J=J.updateQueue,te.updateQueue===J&&(te.updateQueue={baseState:J.baseState,firstBaseUpdate:J.firstBaseUpdate,lastBaseUpdate:J.lastBaseUpdate,shared:J.shared,callbacks:null})}function ei(J){return{lane:J,tag:0,payload:null,callback:null,next:null}}function ti(J,te,he){var me=J.updateQueue;if(me===null)return null;if(me=me.shared,(Xi&2)!==0){var Ae=me.pending;return Ae===null?te.next=te:(te.next=Ae.next,Ae.next=te),me.pending=te,te=Mn(J),cn(J,null,he),te}return Qn(J,me,te,he),Mn(J)}function Gn(J,te,he){if(te=te.updateQueue,te!==null&&(te=te.shared,(he&4194176)!==0)){var me=te.lanes;me&=J.pendingLanes,he|=me,te.lanes=he,Ue(J,he)}}function yt(J,te){var he=J.updateQueue,me=J.alternate;if(me!==null&&(me=me.updateQueue,he===me)){var Ae=null,Ie=null;if(he=he.firstBaseUpdate,he!==null){do{var je={lane:he.lane,tag:he.tag,payload:he.payload,callback:null,next:null};Ie===null?Ae=Ie=je:Ie=Ie.next=je,he=he.next}while(he!==null);Ie===null?Ae=Ie=te:Ie=Ie.next=te}else Ae=Ie=te;he={baseState:me.baseState,firstBaseUpdate:Ae,lastBaseUpdate:Ie,shared:me.shared,callbacks:me.callbacks},J.updateQueue=he;return}J=he.lastBaseUpdate,J===null?he.firstBaseUpdate=te:J.next=te,he.lastBaseUpdate=te}function xn(){if(ql){var J=jl;if(J!==null)throw J}}function Xn(J,te,he,me){ql=!1;var Ae=J.updateQueue;Lo=!1;var Ie=Ae.firstBaseUpdate,je=Ae.lastBaseUpdate,lt=Ae.shared.pending;if(lt!==null){Ae.shared.pending=null;var qt=lt,bn=qt.next;qt.next=null,je===null?Ie=bn:je.next=bn,je=qt;var zn=J.alternate;zn!==null&&(zn=zn.updateQueue,lt=zn.lastBaseUpdate,lt!==je&&(lt===null?zn.firstBaseUpdate=bn:lt.next=bn,zn.lastBaseUpdate=qt))}if(Ie!==null){var Yn=Ae.baseState;je=0,zn=bn=qt=null,lt=Ie;do{var Jn=lt.lane&-536870913,Ti=Jn!==lt.lane;if(Ti?(Bi&Jn)===Jn:(me&Jn)===Jn){Jn!==0&&Jn===Js&&(ql=!0),zn!==null&&(zn=zn.next={lane:0,tag:lt.tag,payload:lt.payload,callback:null,next:null});e:{var oa=J,vl=lt;Jn=te;var El=he;switch(vl.tag){case 1:if(oa=vl.payload,typeof oa=="function"){Yn=oa.call(El,Yn,Jn);break e}Yn=oa;break e;case 3:oa.flags=oa.flags&-65537|128;case 0:if(oa=vl.payload,Jn=typeof oa=="function"?oa.call(El,Yn,Jn):oa,Jn==null)break e;Yn=qu({},Yn,Jn);break e;case 2:Lo=!0}}Jn=lt.callback,Jn!==null&&(J.flags|=64,Ti&&(J.flags|=8192),Ti=Ae.callbacks,Ti===null?Ae.callbacks=[Jn]:Ti.push(Jn))}else Ti={lane:Jn,tag:lt.tag,payload:lt.payload,callback:lt.callback,next:null},zn===null?(bn=zn=Ti,qt=Yn):zn=zn.next=Ti,je|=Jn;if(lt=lt.next,lt===null){if(lt=Ae.shared.pending,lt===null)break;Ti=lt,lt=Ti.next,Ti.next=null,Ae.lastBaseUpdate=Ti,Ae.shared.pending=null}}while(!0);zn===null&&(qt=Yn),Ae.baseState=qt,Ae.firstBaseUpdate=bn,Ae.lastBaseUpdate=zn,Ie===null&&(Ae.shared.lanes=0),sa|=je,J.lanes=je,J.memoizedState=Yn}}function pt(J,te){if(typeof J!="function")throw Error(y(191,J));J.call(te)}function Nn(J,te){var he=J.callbacks;if(he!==null)for(J.callbacks=null,J=0;J<he.length;J++)pt(he[J],te)}function gn(J,te){if(Gs(J,te))return!0;if(typeof J!="object"||J===null||typeof te!="object"||te===null)return!1;var he=Object.keys(J),me=Object.keys(te);if(he.length!==me.length)return!1;for(me=0;me<he.length;me++){var Ae=he[me];if(!io.call(te,Ae)||!Gs(J[Ae],te[Ae]))return!1}return!0}function Tn(J){return J=J.status,J==="fulfilled"||J==="rejected"}function $n(){}function Hn(J,te,he){switch(he=J[he],he===void 0?J.push(te):he!==te&&(te.then($n,$n),te=he),te.status){case"fulfilled":return te.value;case"rejected":throw J=te.reason,J===wc?Error(y(483)):J;default:if(typeof te.status=="string")te.then($n,$n);else{if(J=Ji,J!==null&&100<J.shellSuspendCounter)throw Error(y(482));J=te,J.status="pending",J.then(function(me){if(te.status==="pending"){var Ae=te;Ae.status="fulfilled",Ae.value=me}},function(me){if(te.status==="pending"){var Ae=te;Ae.status="rejected",Ae.reason=me}})}switch(te.status){case"fulfilled":return te.value;case"rejected":throw J=te.reason,J===wc?Error(y(483)):J}throw hl=te,wc}}function ri(){if(hl===null)throw Error(y(459));var J=hl;return hl=null,J}function Ei(J){var te=dl;return dl+=1,fl===null&&(fl=[]),Hn(fl,J,te)}function Hi(J,te){te=te.props.ref,J.ref=te!==void 0?te:null}function gi(J,te){throw te.$$typeof===kd?Error(y(525)):(J=Object.prototype.toString.call(te),Error(y(31,J==="[object Object]"?"object with keys {"+Object.keys(te).join(", ")+"}":J)))}function vr(J){var te=J._init;return te(J._payload)}function Ci(J){function te(fn,Rt){if(J){var vn=fn.deletions;vn===null?(fn.deletions=[Rt],fn.flags|=16):vn.push(Rt)}}function he(fn,Rt){if(!J)return null;for(;Rt!==null;)te(fn,Rt),Rt=Rt.sibling;return null}function me(fn){for(var Rt=new Map;fn!==null;)fn.key!==null?Rt.set(fn.key,fn):Rt.set(fn.index,fn),fn=fn.sibling;return Rt}function Ae(fn,Rt){return fn=va(fn,Rt),fn.index=0,fn.sibling=null,fn}function Ie(fn,Rt,vn){return fn.index=vn,J?(vn=fn.alternate,vn!==null?(vn=vn.index,vn<Rt?(fn.flags|=33554434,Rt):vn):(fn.flags|=33554434,Rt)):(fn.flags|=1048576,Rt)}function je(fn){return J&&fn.alternate===null&&(fn.flags|=33554434),fn}function lt(fn,Rt,vn,Bn){return Rt===null||Rt.tag!==6?(Rt=Hu(vn,fn.mode,Bn),Rt.return=fn,Rt):(Rt=Ae(Rt,vn),Rt.return=fn,Rt)}function qt(fn,Rt,vn,Bn){var ai=vn.type;return ai===il?zn(fn,Rt,vn.props.children,Bn,vn.key):Rt!==null&&(Rt.elementType===ai||typeof ai=="object"&&ai!==null&&ai.$$typeof===Sa&&vr(ai)===Rt.type)?(Rt=Ae(Rt,vn.props),Hi(Rt,vn),Rt.return=fn,Rt):(Rt=Qa(vn.type,vn.key,vn.props,null,fn.mode,Bn),Hi(Rt,vn),Rt.return=fn,Rt)}function bn(fn,Rt,vn,Bn){return Rt===null||Rt.tag!==4||Rt.stateNode.containerInfo!==vn.containerInfo||Rt.stateNode.implementation!==vn.implementation?(Rt=kh(vn,fn.mode,Bn),Rt.return=fn,Rt):(Rt=Ae(Rt,vn.children||[]),Rt.return=fn,Rt)}function zn(fn,Rt,vn,Bn,ai){return Rt===null||Rt.tag!==7?(Rt=wr(vn,fn.mode,Bn,ai),Rt.return=fn,Rt):(Rt=Ae(Rt,vn),Rt.return=fn,Rt)}function Yn(fn,Rt,vn){if(typeof Rt=="string"&&Rt!==""||typeof Rt=="number"||typeof Rt=="bigint")return Rt=Hu(""+Rt,fn.mode,vn),Rt.return=fn,Rt;if(typeof Rt=="object"&&Rt!==null){switch(Rt.$$typeof){case hu:return vn=Qa(Rt.type,Rt.key,Rt.props,null,fn.mode,vn),Hi(vn,Rt),vn.return=fn,vn;case Ea:return Rt=kh(Rt,fn.mode,vn),Rt.return=fn,Rt;case Sa:var Bn=Rt._init;return Rt=Bn(Rt._payload),Yn(fn,Rt,vn)}if(_c(Rt)||R(Rt))return Rt=wr(Rt,fn.mode,vn,null),Rt.return=fn,Rt;if(typeof Rt.then=="function")return Yn(fn,Ei(Rt),vn);if(Rt.$$typeof===Na)return Yn(fn,Sn(fn,Rt),vn);gi(fn,Rt)}return null}function Jn(fn,Rt,vn,Bn){var ai=Rt!==null?Rt.key:null;if(typeof vn=="string"&&vn!==""||typeof vn=="number"||typeof vn=="bigint")return ai!==null?null:lt(fn,Rt,""+vn,Bn);if(typeof vn=="object"&&vn!==null){switch(vn.$$typeof){case hu:return vn.key===ai?qt(fn,Rt,vn,Bn):null;case Ea:return vn.key===ai?bn(fn,Rt,vn,Bn):null;case Sa:return ai=vn._init,vn=ai(vn._payload),Jn(fn,Rt,vn,Bn)}if(_c(vn)||R(vn))return ai!==null?null:zn(fn,Rt,vn,Bn,null);if(typeof vn.then=="function")return Jn(fn,Rt,Ei(vn),Bn);if(vn.$$typeof===Na)return Jn(fn,Rt,Sn(fn,vn),Bn);gi(fn,vn)}return null}function Ti(fn,Rt,vn,Bn,ai){if(typeof Bn=="string"&&Bn!==""||typeof Bn=="number"||typeof Bn=="bigint")return fn=fn.get(vn)||null,lt(Rt,fn,""+Bn,ai);if(typeof Bn=="object"&&Bn!==null){switch(Bn.$$typeof){case hu:return fn=fn.get(Bn.key===null?vn:Bn.key)||null,qt(Rt,fn,Bn,ai);case Ea:return fn=fn.get(Bn.key===null?vn:Bn.key)||null,bn(Rt,fn,Bn,ai);case Sa:var yr=Bn._init;return Bn=yr(Bn._payload),Ti(fn,Rt,vn,Bn,ai)}if(_c(Bn)||R(Bn))return fn=fn.get(vn)||null,zn(Rt,fn,Bn,ai,null);if(typeof Bn.then=="function")return Ti(fn,Rt,vn,Ei(Bn),ai);if(Bn.$$typeof===Na)return Ti(fn,Rt,vn,Sn(Rt,Bn),ai);gi(Rt,Bn)}return null}function oa(fn,Rt,vn,Bn){for(var ai=null,yr=null,_i=Rt,Ki=Rt=0,kr=null;_i!==null&&Ki<vn.length;Ki++){_i.index>Ki?(kr=_i,_i=null):kr=_i.sibling;var Oi=Jn(fn,_i,vn[Ki],Bn);if(Oi===null){_i===null&&(_i=kr);break}J&&_i&&Oi.alternate===null&&te(fn,_i),Rt=Ie(Oi,Rt,Ki),yr===null?ai=Oi:yr.sibling=Oi,yr=Oi,_i=kr}if(Ki===vn.length)return he(fn,_i),Gi&&Te(fn,Ki),ai;if(_i===null){for(;Ki<vn.length;Ki++)_i=Yn(fn,vn[Ki],Bn),_i!==null&&(Rt=Ie(_i,Rt,Ki),yr===null?ai=_i:yr.sibling=_i,yr=_i);return Gi&&Te(fn,Ki),ai}for(_i=me(_i);Ki<vn.length;Ki++)kr=Ti(_i,fn,Ki,vn[Ki],Bn),kr!==null&&(J&&kr.alternate!==null&&_i.delete(kr.key===null?Ki:kr.key),Rt=Ie(kr,Rt,Ki),yr===null?ai=kr:yr.sibling=kr,yr=kr);return J&&_i.forEach(function(ho){return te(fn,ho)}),Gi&&Te(fn,Ki),ai}function vl(fn,Rt,vn,Bn){if(vn==null)throw Error(y(151));for(var ai=null,yr=null,_i=Rt,Ki=Rt=0,kr=null,Oi=vn.next();_i!==null&&!Oi.done;Ki++,Oi=vn.next()){_i.index>Ki?(kr=_i,_i=null):kr=_i.sibling;var ho=Jn(fn,_i,Oi.value,Bn);if(ho===null){_i===null&&(_i=kr);break}J&&_i&&ho.alternate===null&&te(fn,_i),Rt=Ie(ho,Rt,Ki),yr===null?ai=ho:yr.sibling=ho,yr=ho,_i=kr}if(Oi.done)return he(fn,_i),Gi&&Te(fn,Ki),ai;if(_i===null){for(;!Oi.done;Ki++,Oi=vn.next())Oi=Yn(fn,Oi.value,Bn),Oi!==null&&(Rt=Ie(Oi,Rt,Ki),yr===null?ai=Oi:yr.sibling=Oi,yr=Oi);return Gi&&Te(fn,Ki),ai}for(_i=me(_i);!Oi.done;Ki++,Oi=vn.next())Oi=Ti(_i,fn,Ki,Oi.value,Bn),Oi!==null&&(J&&Oi.alternate!==null&&_i.delete(Oi.key===null?Ki:Oi.key),Rt=Ie(Oi,Rt,Ki),yr===null?ai=Oi:yr.sibling=Oi,yr=Oi);return J&&_i.forEach(function(Eh){return te(fn,Eh)}),Gi&&Te(fn,Ki),ai}function El(fn,Rt,vn,Bn){if(typeof vn=="object"&&vn!==null&&vn.type===il&&vn.key===null&&(vn=vn.props.children),typeof vn=="object"&&vn!==null){switch(vn.$$typeof){case hu:e:{for(var ai=vn.key;Rt!==null;){if(Rt.key===ai){if(ai=vn.type,ai===il){if(Rt.tag===7){he(fn,Rt.sibling),Bn=Ae(Rt,vn.props.children),Bn.return=fn,fn=Bn;break e}}else if(Rt.elementType===ai||typeof ai=="object"&&ai!==null&&ai.$$typeof===Sa&&vr(ai)===Rt.type){he(fn,Rt.sibling),Bn=Ae(Rt,vn.props),Hi(Bn,vn),Bn.return=fn,fn=Bn;break e}he(fn,Rt);break}else te(fn,Rt);Rt=Rt.sibling}vn.type===il?(Bn=wr(vn.props.children,fn.mode,Bn,vn.key),Bn.return=fn,fn=Bn):(Bn=Qa(vn.type,vn.key,vn.props,null,fn.mode,Bn),Hi(Bn,vn),Bn.return=fn,fn=Bn)}return je(fn);case Ea:e:{for(ai=vn.key;Rt!==null;){if(Rt.key===ai)if(Rt.tag===4&&Rt.stateNode.containerInfo===vn.containerInfo&&Rt.stateNode.implementation===vn.implementation){he(fn,Rt.sibling),Bn=Ae(Rt,vn.children||[]),Bn.return=fn,fn=Bn;break e}else{he(fn,Rt);break}else te(fn,Rt);Rt=Rt.sibling}Bn=kh(vn,fn.mode,Bn),Bn.return=fn,fn=Bn}return je(fn);case Sa:return ai=vn._init,vn=ai(vn._payload),El(fn,Rt,vn,Bn)}if(_c(vn))return oa(fn,Rt,vn,Bn);if(R(vn)){if(ai=R(vn),typeof ai!="function")throw Error(y(150));return vn=ai.call(vn),vl(fn,Rt,vn,Bn)}if(typeof vn.then=="function")return El(fn,Rt,Ei(vn),Bn);if(vn.$$typeof===Na)return El(fn,Rt,Sn(fn,vn),Bn);gi(fn,vn)}return typeof vn=="string"&&vn!==""||typeof vn=="number"||typeof vn=="bigint"?(vn=""+vn,Rt!==null&&Rt.tag===6?(he(fn,Rt.sibling),Bn=Ae(Rt,vn),Bn.return=fn,fn=Bn):(he(fn,Rt),Bn=Hu(vn,fn.mode,Bn),Bn.return=fn,fn=Bn),je(fn)):he(fn,Rt)}return function(fn,Rt,vn,Bn){try{dl=0;var ai=El(fn,Rt,vn,Bn);return fl=null,ai}catch(_i){if(_i===wc)throw _i;var yr=t(29,_i,null,fn.mode);return yr.lanes=Bn,yr.return=fn,yr}finally{}}}function Er(J,te){J=Ss,ge(Ic,J),ge(cr,te),Ss=J|te.baseLanes}function pr(){ge(Ic,Ss),ge(cr,cr.current)}function Cr(){Ss=Ic.current,ue(cr),ue(Ic)}function ms(J){var te=J.alternate;ge(Zr,Zr.current&1),ge(ea,J),sr===null&&(te===null||cr.current!==null||te.memoizedState!==null)&&(sr=J)}function xl(J){if(J.tag===22){if(ge(Zr,Zr.current),ge(ea,J),sr===null){var te=J.alternate;te!==null&&te.memoizedState!==null&&(sr=J)}}else Jr()}function Jr(){ge(Zr,Zr.current),ge(ea,ea.current)}function ls(J){ue(ea),sr===J&&(sr=null),ue(Zr)}function Hs(J){for(var te=J;te!==null;){if(te.tag===13){var he=te.memoizedState;if(he!==null&&(he=he.dehydrated,he===null||eh(he)||th(he)))return te}else if(te.tag===19&&te.memoizedProps.revealOrder!==void 0){if((te.flags&128)!==0)return te}else if(te.child!==null){te.child.return=te,te=te.child;continue}if(te===J)break;for(;te.sibling===null;){if(te.return===null||te.return===J)return null;te=te.return}te.sibling.return=te.return,te=te.sibling}return null}function ji(){throw Error(y(321))}function Vs(J,te){if(te===null)return!1;for(var he=0;he<te.length&&he<J.length;he++)if(!Gs(J[he],te[he]))return!1;return!0}function Ts(J,te,he,me,Ae,Ie){return Oo=Ie,wi=te,te.memoizedState=null,te.updateQueue=null,te.lanes=0,yi.H=J===null||J.memoizedState===null?gl:ws,ml=!1,Ie=he(me,Ae),ml=!1,Wl&&(Ie=es(te,he,me,Ae)),js(J),Ie}function js(J){yi.H=Ir;var te=hi!==null&&hi.next!==null;if(Oo=0,Wi=hi=wi=null,Ma=!1,Xl=0,os=null,te)throw Error(y(300));J===null||ar||(J=J.dependencies,J!==null&&Fe(J)&&(ar=!0))}function es(J,te,he,me){wi=J;var Ae=0;do{if(Wl&&(os=null),Xl=0,Wl=!1,25<=Ae)throw Error(y(301));if(Ae+=1,Wi=hi=null,J.updateQueue!=null){var Ie=J.updateQueue;Ie.lastEffect=null,Ie.events=null,Ie.stores=null,Ie.memoCache!=null&&(Ie.memoCache.index=0)}yi.H=ta,Ie=te(he,me)}while(Wl);return Ie}function Sr(){var J=yi.H,te=J.useState()[0];return te=typeof te.then=="function"?dn(te):te,J=J.useState()[0],(hi!==null?hi.memoizedState:null)!==J&&(wi.flags|=1024),te}function po(){var J=hh!==0;return hh=0,J}function Wa(J,te,he){te.updateQueue=J.updateQueue,te.flags&=-2053,J.lanes&=~he}function bs(J){if(Ma){for(J=J.memoizedState;J!==null;){var te=J.queue;te!==null&&(te.pending=null),J=J.next}Ma=!1}Oo=0,Wi=hi=wi=null,Wl=!1,Xl=hh=0,os=null}function Ge(){var J={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Wi===null?wi.memoizedState=Wi=J:Wi=Wi.next=J,Wi}function Ct(){if(hi===null){var J=wi.alternate;J=J!==null?J.memoizedState:null}else J=hi.next;var te=Wi===null?wi.memoizedState:Wi.next;if(te!==null)Wi=te,hi=J;else{if(J===null)throw wi.alternate===null?Error(y(467)):Error(y(310));hi=J,J={memoizedState:hi.memoizedState,baseState:hi.baseState,baseQueue:hi.baseQueue,queue:hi.queue,next:null},Wi===null?wi.memoizedState=Wi=J:Wi=Wi.next=J}return Wi}function dn(J){var te=Xl;return Xl+=1,os===null&&(os=[]),J=Hn(os,J,te),te=wi,(Wi===null?te.memoizedState:Wi.next)===null&&(te=te.alternate,yi.H=te===null||te.memoizedState===null?gl:ws),J}function pn(J){if(J!==null&&typeof J=="object"){if(typeof J.then=="function")return dn(J);if(J.$$typeof===Na)return Lt(J)}throw Error(y(438,String(J)))}function Ot(J){var te=null,he=wi.updateQueue;if(he!==null&&(te=he.memoCache),te==null){var me=wi.alternate;me!==null&&(me=me.updateQueue,me!==null&&(me=me.memoCache,me!=null&&(te={data:me.data.map(function(Ae){return Ae.slice()}),index:0})))}if(te==null&&(te={data:[],index:0}),he===null&&(he=fh(),wi.updateQueue=he),he.memoCache=te,he=te.data[te.index],he===void 0)for(he=te.data[te.index]=Array(J),me=0;me<J;me++)he[me]=Vf;return te.index++,he}function Dn(J,te){return typeof te=="function"?te(J):te}function jn(J){var te=Ct();return qn(te,hi,J)}function qn(J,te,he){var me=J.queue;if(me===null)throw Error(y(311));me.lastRenderedReducer=he;var Ae=J.baseQueue,Ie=me.pending;if(Ie!==null){if(Ae!==null){var je=Ae.next;Ae.next=Ie.next,Ie.next=je}te.baseQueue=Ae=Ie,me.pending=null}if(Ie=J.baseState,Ae===null)J.memoizedState=Ie;else{te=Ae.next;var lt=je=null,qt=null,bn=te,zn=!1;do{var Yn=bn.lane&-536870913;if(Yn!==bn.lane?(Bi&Yn)===Yn:(Oo&Yn)===Yn){var Jn=bn.revertLane;if(Jn===0)qt!==null&&(qt=qt.next={lane:0,revertLane:0,action:bn.action,hasEagerState:bn.hasEagerState,eagerState:bn.eagerState,next:null}),Yn===Js&&(zn=!0);else if((Oo&Jn)===Jn){bn=bn.next,Jn===Js&&(zn=!0);continue}else Yn={lane:0,revertLane:bn.revertLane,action:bn.action,hasEagerState:bn.hasEagerState,eagerState:bn.eagerState,next:null},qt===null?(lt=qt=Yn,je=Ie):qt=qt.next=Yn,wi.lanes|=Jn,sa|=Jn;Yn=bn.action,ml&&he(Ie,Yn),Ie=bn.hasEagerState?bn.eagerState:he(Ie,Yn)}else Jn={lane:Yn,revertLane:bn.revertLane,action:bn.action,hasEagerState:bn.hasEagerState,eagerState:bn.eagerState,next:null},qt===null?(lt=qt=Jn,je=Ie):qt=qt.next=Jn,wi.lanes|=Yn,sa|=Yn;bn=bn.next}while(bn!==null&&bn!==te);if(qt===null?je=Ie:qt.next=lt,!Gs(Ie,J.memoizedState)&&(ar=!0,zn&&(he=jl,he!==null)))throw he;J.memoizedState=Ie,J.baseState=je,J.baseQueue=qt,me.lastRenderedState=Ie}return Ae===null&&(me.lanes=0),[J.memoizedState,me.dispatch]}function Zn(J){var te=Ct(),he=te.queue;if(he===null)throw Error(y(311));he.lastRenderedReducer=J;var me=he.dispatch,Ae=he.pending,Ie=te.memoizedState;if(Ae!==null){he.pending=null;var je=Ae=Ae.next;do Ie=J(Ie,je.action),je=je.next;while(je!==Ae);Gs(Ie,te.memoizedState)||(ar=!0),te.memoizedState=Ie,te.baseQueue===null&&(te.baseState=Ie),he.lastRenderedState=Ie}return[Ie,me]}function ui(J,te,he){var me=wi,Ae=Ct(),Ie=Gi;if(Ie){if(he===void 0)throw Error(y(407));he=he()}else he=te();var je=!Gs((hi||Ae).memoizedState,he);if(je&&(Ae.memoizedState=he,ar=!0),Ae=Ae.queue,Hc(Mi.bind(null,me,Ae,J),[J]),Ae.getSnapshot!==te||je||Wi!==null&&Wi.memoizedState.tag&1){if(me.flags|=2048,Lr(9,ii.bind(null,me,Ae,he,te),{destroy:void 0},null),Ji===null)throw Error(y(349));Ie||(Oo&60)!==0||si(me,te,he)}return he}function si(J,te,he){J.flags|=16384,J={getSnapshot:te,value:he},te=wi.updateQueue,te===null?(te=fh(),wi.updateQueue=te,te.stores=[J]):(he=te.stores,he===null?te.stores=[J]:he.push(J))}function ii(J,te,he,me){te.value=he,te.getSnapshot=me,Vi(te)&&nr(J)}function Mi(J,te,he){return he(function(){Vi(te)&&nr(J)})}function Vi(J){var te=J.getSnapshot;J=J.value;try{var he=te();return!Gs(J,he)}catch{return!0}}function nr(J){var te=kt(J,2);te!==null&&rs(te,J,2)}function Pi(J){var te=Ge();if(typeof J=="function"){var he=J;if(J=he(),ml){Ce(!0);try{he()}finally{Ce(!1)}}}return te.memoizedState=te.baseState=J,te.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Dn,lastRenderedState:J},te}function Ii(J,te,he,me){return J.baseState=he,qn(J,hi,typeof me=="function"?me:Dn)}function oi(J,te,he,me,Ae){if(Ho(J))throw Error(y(485));if(J=te.action,J!==null){var Ie={payload:Ae,action:J,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(je){Ie.listeners.push(je)}};yi.T!==null?he(!0):Ie.isTransition=!1,me(Ie),he=te.pending,he===null?(Ie.next=te.pending=Ie,mr(te,Ie)):(Ie.next=he.next,te.pending=he.next=Ie)}}function mr(J,te){var he=te.action,me=te.payload,Ae=J.state;if(te.isTransition){var Ie=yi.T,je={};yi.T=je;try{var lt=he(Ae,me),qt=yi.S;qt!==null&&qt(je,lt),Li(J,te,lt)}catch(bn){la(J,te,bn)}finally{yi.T=Ie}}else try{Ie=he(Ae,me),Li(J,te,Ie)}catch(bn){la(J,te,bn)}}function Li(J,te,he){he!==null&&typeof he=="object"&&typeof he.then=="function"?he.then(function(me){Gr(J,te,me)},function(me){return la(J,te,me)}):Gr(J,te,he)}function Gr(J,te,he){te.status="fulfilled",te.value=he,zi(te),J.state=he,te=J.pending,te!==null&&(he=te.next,he===te?J.pending=null:(he=he.next,te.next=he,mr(J,he)))}function la(J,te,he){var me=J.pending;if(J.pending=null,me!==null){me=me.next;do te.status="rejected",te.reason=he,zi(te),te=te.next;while(te!==me)}J.action=null}function zi(J){J=J.listeners;for(var te=0;te<J.length;te++)(0,J[te])()}function Hr(J,te){return te}function qi(J,te){if(Gi){var he=Ji.formState;if(he!==null){e:{var me=wi;if(Gi){if(ps){var Ae=sf(ps,as);if(Ae){ps=af(Ae),me=td(Ae);break e}}un(me)}me=!1}me&&(te=he[0])}}he=Ge(),he.memoizedState=he.baseState=te,me={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hr,lastRenderedState:te},he.queue=me,he=ec.bind(null,wi,me),me.dispatch=he,me=Pi(!1);var Ie=ha.bind(null,wi,!1,me.queue);return me=Ge(),Ae={state:te,dispatch:null,action:J,pending:null},me.queue=Ae,he=oi.bind(null,wi,Ae,Ie,he),Ae.dispatch=he,me.memoizedState=J,[te,he,!1]}function Pr(J){var te=Ct();return xr(te,hi,J)}function xr(J,te,he){te=qn(J,te,Hr)[0],J=jn(Dn)[0],te=typeof te=="object"&&te!==null&&typeof te.then=="function"?dn(te):te;var me=Ct(),Ae=me.queue,Ie=Ae.dispatch;return he!==me.memoizedState&&(wi.flags|=2048,Lr(9,Si.bind(null,Ae,he),{destroy:void 0},null)),[te,Ie,J]}function Si(J,te){J.action=te}function Tr(J){var te=Ct(),he=hi;if(he!==null)return xr(te,he,J);Ct(),te=te.memoizedState,he=Ct();var me=he.queue.dispatch;return he.memoizedState=J,[te,me,!1]}function Lr(J,te,he,me){return J={tag:J,create:te,inst:he,deps:me,next:null},te=wi.updateQueue,te===null&&(te=fh(),wi.updateQueue=te),he=te.lastEffect,he===null?te.lastEffect=J.next=J:(me=he.next,he.next=J,J.next=me,te.lastEffect=J),J}function gs(){return Ct().memoizedState}function Tl(J,te,he,me){var Ae=Ge();wi.flags|=J,Ae.memoizedState=Lr(1|te,he,{destroy:void 0},me===void 0?null:me)}function Uo(J,te,he,me){var Ae=Ct();me=me===void 0?null:me;var Ie=Ae.memoizedState.inst;hi!==null&&me!==null&&Vs(me,hi.memoizedState.deps)?Ae.memoizedState=Lr(te,he,Ie,me):(wi.flags|=J,Ae.memoizedState=Lr(1|te,he,Ie,me))}function Ql(J,te){Tl(8390656,8,J,te)}function Hc(J,te){Uo(2048,8,J,te)}function wu(J,te){return Uo(4,2,J,te)}function bl(J,te){return Uo(4,4,J,te)}function Xa(J,te){if(typeof te=="function"){J=J();var he=te(J);return function(){typeof he=="function"?he():te(null)}}if(te!=null)return J=J(),te.current=J,function(){te.current=null}}function qs(J,te,he){he=he!=null?he.concat([J]):null,Uo(4,4,Xa.bind(null,te,J),he)}function wa(){}function $a(J,te){var he=Ct();te=te===void 0?null:te;var me=he.memoizedState;return te!==null&&Vs(te,me[1])?me[0]:(he.memoizedState=[J,te],J)}function Jl(J,te){var he=Ct();te=te===void 0?null:te;var me=he.memoizedState;if(te!==null&&Vs(te,me[1]))return me[0];if(me=J(),ml){Ce(!0);try{J()}finally{Ce(!1)}}return he.memoizedState=[me,te],me}function ca(J,te,he){return he===void 0||(Oo&1073741824)!==0?J.memoizedState=te:(J.memoizedState=he,J=Oh(),wi.lanes|=J,sa|=J,he)}function jc(J,te,he,me){return Gs(he,te)?he:cr.current!==null?(J=ca(J,he,me),Gs(J,te)||(ar=!0),J):(Oo&42)===0?(ar=!0,J.memoizedState=he):(J=Oh(),wi.lanes|=J,sa|=J,te)}function zo(J,te,he,me,Ae){var Ie=wo();vs(Ie!==0&&8>Ie?Ie:8);var je=yi.T,lt={};yi.T=lt,ha(J,!1,te,he);try{var qt=Ae(),bn=yi.S;if(bn!==null&&bn(lt,qt),qt!==null&&typeof qt=="object"&&typeof qt.then=="function"){var zn=pi(qt,me);Os(J,te,zn,Fr(J))}else Os(J,te,me,Fr(J))}catch(Yn){Os(J,te,{then:function(){},status:"rejected",reason:Yn},Fr())}finally{vs(Ie),yi.T=je}}function ua(J){var te=J.memoizedState;if(te!==null)return te;te={memoizedState:sl,baseState:sl,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Dn,lastRenderedState:sl},next:null};var he={};return te.next={memoizedState:he,baseState:he,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Dn,lastRenderedState:he},next:null},J.memoizedState=te,J=J.alternate,J!==null&&(J.memoizedState=te),te}function Ls(){return Lt(Fa)}function ko(){return Ct().memoizedState}function Ia(){return Ct().memoizedState}function Go(J){for(var te=J.return;te!==null;){switch(te.tag){case 24:case 3:var he=Fr();J=ei(he);var me=ti(te,J,he);me!==null&&(rs(me,te,he),Gn(me,te,he)),te={cache:Ni()},J.payload=te;return}te=te.return}}function mo(J,te,he){var me=Fr();he={lane:me,revertLane:0,action:he,hasEagerState:!1,eagerState:null,next:null},Ho(J)?$r(te,he):(he=yn(J,te,he,me),he!==null&&(rs(he,J,me),Yi(he,te,me)))}function ec(J,te,he){var me=Fr();Os(J,te,he,me)}function Os(J,te,he,me){var Ae={lane:me,revertLane:0,action:he,hasEagerState:!1,eagerState:null,next:null};if(Ho(J))$r(te,Ae);else{var Ie=J.alternate;if(J.lanes===0&&(Ie===null||Ie.lanes===0)&&(Ie=te.lastRenderedReducer,Ie!==null))try{var je=te.lastRenderedState,lt=Ie(je,he);if(Ae.hasEagerState=!0,Ae.eagerState=lt,Gs(lt,je))return Qn(J,te,Ae,0),Ji===null&&Ke(),!1}catch{}finally{}if(he=yn(J,te,Ae,me),he!==null)return rs(he,J,me),Yi(he,te,me),!0}return!1}function ha(J,te,he,me){if(me={lane:2,revertLane:Cn(),action:me,hasEagerState:!1,eagerState:null,next:null},Ho(J)){if(te)throw Error(y(479))}else te=yn(J,he,me,2),te!==null&&rs(te,J,2)}function Ho(J){var te=J.alternate;return J===wi||te!==null&&te===wi}function $r(J,te){Wl=Ma=!0;var he=J.pending;he===null?te.next=te:(te.next=he.next,he.next=te),J.pending=te}function Yi(J,te,he){if((he&4194176)!==0){var me=te.lanes;me&=J.pendingLanes,he|=me,te.lanes=he,Ue(J,he)}}function jo(J,te,he,me){te=J.memoizedState,he=he(me,te),he=he==null?te:qu({},te,he),J.memoizedState=he,J.lanes===0&&(J.updateQueue.baseState=he)}function qo(J,te,he,me,Ae,Ie,je){return J=J.stateNode,typeof J.shouldComponentUpdate=="function"?J.shouldComponentUpdate(me,Ie,je):te.prototype&&te.prototype.isPureReactComponent?!gn(he,me)||!gn(Ae,Ie):!0}function qc(J,te,he,me){J=te.state,typeof te.componentWillReceiveProps=="function"&&te.componentWillReceiveProps(he,me),typeof te.UNSAFE_componentWillReceiveProps=="function"&&te.UNSAFE_componentWillReceiveProps(he,me),te.state!==J&&so.enqueueReplaceState(te,te.state,null)}function fa(J,te){var he=te;if("ref"in te){he={};for(var me in te)me!=="ref"&&(he[me]=te[me])}if(J=J.defaultProps){he===te&&(he=qu({},he));for(var Ae in J)he[Ae]===void 0&&(he[Ae]=J[Ae])}return he}function go(J,te){try{var he=J.onUncaughtError;he(te.value,{componentStack:te.stack})}catch(me){setTimeout(function(){throw me})}}function Da(J,te,he){try{var me=J.onCaughtError;me(he.value,{componentStack:he.stack,errorBoundary:te.tag===1?te.stateNode:null})}catch(Ae){setTimeout(function(){throw Ae})}}function yo(J,te,he){return he=ei(he),he.tag=3,he.payload={element:null},he.callback=function(){go(J,te)},he}function Ws(J){return J=ei(J),J.tag=3,J}function Wc(J,te,he,me){var Ae=he.type.getDerivedStateFromError;if(typeof Ae=="function"){var Ie=me.value;J.payload=function(){return Ae(Ie)},J.callback=function(){Da(te,he,me)}}var je=he.stateNode;je!==null&&typeof je.componentDidCatch=="function"&&(J.callback=function(){Da(te,he,me),typeof Ae!="function"&&(yl===null?yl=new Set([this]):yl.add(this));var lt=me.stack;this.componentDidCatch(me.value,{componentStack:lt!==null?lt:""})})}function Ah(J,te,he,me,Ae){if(he.flags|=32768,me!==null&&typeof me=="object"&&typeof me.then=="function"){if(te=he.alternate,te!==null&&we(te,he,Ae,!0),he=ea.current,he!==null){switch(he.tag){case 13:return sr===null?bo():he.alternate===null&&or===0&&(or=3),he.flags&=-257,he.flags|=65536,he.lanes=Ae,me===Mu?he.flags|=16384:(te=he.updateQueue,te===null?he.updateQueue=new Set([me]):te.add(me),Dl(J,me,Ae)),!1;case 22:return he.flags|=65536,me===Mu?he.flags|=16384:(te=he.updateQueue,te===null?(te={transitions:null,markerInstances:null,retryQueue:new Set([me])},he.updateQueue=te):(he=te.retryQueue,he===null?te.retryQueue=new Set([me]):he.add(me)),Dl(J,me,Ae)),!1}throw Error(y(435,he.tag))}return Dl(J,me,Ae),bo(),!1}if(Gi)return te=ea.current,te!==null?((te.flags&65536)===0&&(te.flags|=256),te.flags|=65536,te.lanes=Ae,me!==Tu&&(J=Error(y(422),{cause:me}),Ln(Oe(J,he)))):(me!==Tu&&(te=Error(y(423),{cause:me}),Ln(Oe(te,he))),J=J.current.alternate,J.flags|=65536,Ae&=-Ae,J.lanes|=Ae,me=Oe(me,he),Ae=yo(J.stateNode,me,Ae),yt(J,Ae),or!==4&&(or=2)),!1;var Ie=Error(y(520),{cause:me});if(Ie=Oe(Ie,he),Kl===null?Kl=[Ie]:Kl.push(Ie),or!==4&&(or=2),te===null)return!0;me=Oe(me,he),he=te;do{switch(he.tag){case 3:return he.flags|=65536,J=Ae&-Ae,he.lanes|=J,J=yo(he.stateNode,me,J),yt(he,J),!1;case 1:if(te=he.type,Ie=he.stateNode,(he.flags&128)===0&&(typeof te.getDerivedStateFromError=="function"||Ie!==null&&typeof Ie.componentDidCatch=="function"&&(yl===null||!yl.has(Ie))))return he.flags|=65536,Ae&=-Ae,he.lanes|=Ae,Ae=Ws(Ae),Wc(Ae,J,he,me),yt(he,Ae),!1}he=he.return}while(he!==null);return!1}function br(J,te,he,me){te.child=J===null?ro(te,null,he,me):pl(te,J.child,he,me)}function Al(J,te,he,me,Ae){he=he.render;var Ie=te.ref;if("ref"in me){var je={};for(var lt in me)lt!=="ref"&&(je[lt]=me[lt])}else je=me;return We(te),me=Ts(J,te,he,je,Ie,Ae),lt=po(),J!==null&&!ar?(Wa(J,te,Ae),da(J,te,Ae)):(Gi&&lt&&Ye(te),te.flags|=1,br(J,te,me,Ae),te.child)}function tc(J,te,he,me,Ae){if(J===null){var Ie=he.type;return typeof Ie=="function"&&!ou(Ie)&&Ie.defaultProps===void 0&&he.compare===null?(te.tag=15,te.type=Ie,Ml(J,te,Ie,me,Ae)):(J=Qa(he.type,null,me,te,te.mode,Ae),J.ref=te.ref,J.return=te,te.child=J)}if(Ie=J.child,!rc(J,Ae)){var je=Ie.memoizedProps;if(he=he.compare,he=he!==null?he:gn,he(je,me)&&J.ref===te.ref)return da(J,te,Ae)}return te.flags|=1,J=va(Ie,me),J.ref=te.ref,J.return=te,te.child=J}function Ml(J,te,he,me,Ae){if(J!==null){var Ie=J.memoizedProps;if(gn(Ie,me)&&J.ref===te.ref)if(ar=!1,te.pendingProps=me=Ie,rc(J,Ae))(J.flags&131072)!==0&&(ar=!0);else return te.lanes=J.lanes,da(J,te,Ae)}return Pl(J,te,he,me,Ae)}function Xc(J,te,he){var me=te.pendingProps,Ae=me.children,Ie=(te.stateNode._pendingVisibility&2)!==0,je=J!==null?J.memoizedState:null;if(Cl(J,te),me.mode==="hidden"||Ie){if((te.flags&128)!==0){if(me=je!==null?je.baseLanes|he:he,J!==null){for(Ae=te.child=J.child,Ie=0;Ae!==null;)Ie=Ie|Ae.lanes|Ae.childLanes,Ae=Ae.sibling;te.childLanes=Ie&~me}else te.childLanes=0,te.child=null;return Rl(J,te,me,he)}if((he&536870912)!==0)te.memoizedState={baseLanes:0,cachePool:null},J!==null&&Or(te,je!==null?je.cachePool:null),je!==null?Er(te,je):pr(),xl(te);else return te.lanes=te.childLanes=536870912,Rl(J,te,je!==null?je.baseLanes|he:he,he)}else je!==null?(Or(te,je.cachePool),Er(te,je),Jr(),te.memoizedState=null):(J!==null&&Or(te,null),pr(),Jr());return br(J,te,Ae,he),te.child}function Rl(J,te,he,me){var Ae=Fi();return Ae=Ae===null?null:{parent:Rs?ur._currentValue:ur._currentValue2,pool:Ae},te.memoizedState={baseLanes:he,cachePool:Ae},J!==null&&Or(te,null),pr(),xl(te),J!==null&&we(J,te,me,!0),null}function Cl(J,te){var he=te.ref;if(he===null)J!==null&&J.ref!==null&&(te.flags|=2097664);else{if(typeof he!="function"&&typeof he!="object")throw Error(y(284));(J===null||J.ref!==he)&&(te.flags|=2097664)}}function Pl(J,te,he,me,Ae){return We(te),he=Ts(J,te,he,me,void 0,Ae),me=po(),J!==null&&!ar?(Wa(J,te,Ae),da(J,te,Ae)):(Gi&&me&&Ye(te),te.flags|=1,br(J,te,he,Ae),te.child)}function Wo(J,te,he,me,Ae,Ie){return We(te),te.updateQueue=null,he=es(te,me,he,Ae),js(J),me=po(),J!==null&&!ar?(Wa(J,te,Ie),da(J,te,Ie)):(Gi&&me&&Ye(te),te.flags|=1,br(J,te,he,Ie),te.child)}function $c(J,te,he,me,Ae){if(We(te),te.stateNode===null){var Ie=cl,je=he.contextType;typeof je=="object"&&je!==null&&(Ie=Lt(je)),Ie=new he(me,Ie),te.memoizedState=Ie.state!==null&&Ie.state!==void 0?Ie.state:null,Ie.updater=so,te.stateNode=Ie,Ie._reactInternals=te,Ie=te.stateNode,Ie.props=me,Ie.state=te.memoizedState,Ie.refs={},On(te),je=he.contextType,Ie.context=typeof je=="object"&&je!==null?Lt(je):cl,Ie.state=te.memoizedState,je=he.getDerivedStateFromProps,typeof je=="function"&&(jo(te,he,je,me),Ie.state=te.memoizedState),typeof he.getDerivedStateFromProps=="function"||typeof Ie.getSnapshotBeforeUpdate=="function"||typeof Ie.UNSAFE_componentWillMount!="function"&&typeof Ie.componentWillMount!="function"||(je=Ie.state,typeof Ie.componentWillMount=="function"&&Ie.componentWillMount(),typeof Ie.UNSAFE_componentWillMount=="function"&&Ie.UNSAFE_componentWillMount(),je!==Ie.state&&so.enqueueReplaceState(Ie,Ie.state,null),Xn(te,me,Ie,Ae),xn(),Ie.state=te.memoizedState),typeof Ie.componentDidMount=="function"&&(te.flags|=4194308),me=!0}else if(J===null){Ie=te.stateNode;var lt=te.memoizedProps,qt=fa(he,lt);Ie.props=qt;var bn=Ie.context,zn=he.contextType;je=cl,typeof zn=="object"&&zn!==null&&(je=Lt(zn));var Yn=he.getDerivedStateFromProps;zn=typeof Yn=="function"||typeof Ie.getSnapshotBeforeUpdate=="function",lt=te.pendingProps!==lt,zn||typeof Ie.UNSAFE_componentWillReceiveProps!="function"&&typeof Ie.componentWillReceiveProps!="function"||(lt||bn!==je)&&qc(te,Ie,me,je),Lo=!1;var Jn=te.memoizedState;Ie.state=Jn,Xn(te,me,Ie,Ae),xn(),bn=te.memoizedState,lt||Jn!==bn||Lo?(typeof Yn=="function"&&(jo(te,he,Yn,me),bn=te.memoizedState),(qt=Lo||qo(te,he,qt,me,Jn,bn,je))?(zn||typeof Ie.UNSAFE_componentWillMount!="function"&&typeof Ie.componentWillMount!="function"||(typeof Ie.componentWillMount=="function"&&Ie.componentWillMount(),typeof Ie.UNSAFE_componentWillMount=="function"&&Ie.UNSAFE_componentWillMount()),typeof Ie.componentDidMount=="function"&&(te.flags|=4194308)):(typeof Ie.componentDidMount=="function"&&(te.flags|=4194308),te.memoizedProps=me,te.memoizedState=bn),Ie.props=me,Ie.state=bn,Ie.context=je,me=qt):(typeof Ie.componentDidMount=="function"&&(te.flags|=4194308),me=!1)}else{Ie=te.stateNode,Kn(J,te),je=te.memoizedProps,zn=fa(he,je),Ie.props=zn,Yn=te.pendingProps,Jn=Ie.context,bn=he.contextType,qt=cl,typeof bn=="object"&&bn!==null&&(qt=Lt(bn)),lt=he.getDerivedStateFromProps,(bn=typeof lt=="function"||typeof Ie.getSnapshotBeforeUpdate=="function")||typeof Ie.UNSAFE_componentWillReceiveProps!="function"&&typeof Ie.componentWillReceiveProps!="function"||(je!==Yn||Jn!==qt)&&qc(te,Ie,me,qt),Lo=!1,Jn=te.memoizedState,Ie.state=Jn,Xn(te,me,Ie,Ae),xn();var Ti=te.memoizedState;je!==Yn||Jn!==Ti||Lo||J!==null&&J.dependencies!==null&&Fe(J.dependencies)?(typeof lt=="function"&&(jo(te,he,lt,me),Ti=te.memoizedState),(zn=Lo||qo(te,he,zn,me,Jn,Ti,qt)||J!==null&&J.dependencies!==null&&Fe(J.dependencies))?(bn||typeof Ie.UNSAFE_componentWillUpdate!="function"&&typeof Ie.componentWillUpdate!="function"||(typeof Ie.componentWillUpdate=="function"&&Ie.componentWillUpdate(me,Ti,qt),typeof Ie.UNSAFE_componentWillUpdate=="function"&&Ie.UNSAFE_componentWillUpdate(me,Ti,qt)),typeof Ie.componentDidUpdate=="function"&&(te.flags|=4),typeof Ie.getSnapshotBeforeUpdate=="function"&&(te.flags|=1024)):(typeof Ie.componentDidUpdate!="function"||je===J.memoizedProps&&Jn===J.memoizedState||(te.flags|=4),typeof Ie.getSnapshotBeforeUpdate!="function"||je===J.memoizedProps&&Jn===J.memoizedState||(te.flags|=1024),te.memoizedProps=me,te.memoizedState=Ti),Ie.props=me,Ie.state=Ti,Ie.context=qt,me=zn):(typeof Ie.componentDidUpdate!="function"||je===J.memoizedProps&&Jn===J.memoizedState||(te.flags|=4),typeof Ie.getSnapshotBeforeUpdate!="function"||je===J.memoizedProps&&Jn===J.memoizedState||(te.flags|=1024),me=!1)}return Ie=me,Cl(J,te),me=(te.flags&128)!==0,Ie||me?(Ie=te.stateNode,he=me&&typeof he.getDerivedStateFromError!="function"?null:Ie.render(),te.flags|=1,J!==null&&me?(te.child=pl(te,J.child,null,Ae),te.child=pl(te,null,he,Ae)):br(J,te,he,Ae),te.memoizedState=Ie.state,J=te.child):J=da(J,te,Ae),J}function Kc(J,te,he,me){return kn(),te.flags|=256,br(J,te,he,me),te.child}function wl(J){return{baseLanes:J,cachePool:jr()}}function _o(J,te,he){return J=J!==null?J.childLanes&~he:0,te&&(J|=aa),J}function Yc(J,te,he){var me=te.pendingProps,Ae=!1,Ie=(te.flags&128)!==0,je;if((je=Ie)||(je=J!==null&&J.memoizedState===null?!1:(Zr.current&2)!==0),je&&(Ae=!0,te.flags&=-129),je=(te.flags&32)!==0,te.flags&=-33,J===null){if(Gi){if(Ae?ms(te):Jr(),Gi){var lt=ps,qt;(qt=lt)&&(lt=sd(lt,as),lt!==null?(te.memoizedState={dehydrated:lt,treeContext:ul!==null?{id:Ua,overflow:za}:null,retryLane:536870912},qt=t(18,null,null,0),qt.stateNode=lt,qt.return=te,te.child=qt,ds=te,ps=null,qt=!0):qt=!1),qt||un(te)}if(lt=te.memoizedState,lt!==null&&(lt=lt.dehydrated,lt!==null))return th(lt)?te.lanes=16:te.lanes=536870912,null;ls(te)}return lt=me.children,me=me.fallback,Ae?(Jr(),Ae=te.mode,lt=nc({mode:"hidden",children:lt},Ae),me=wr(me,Ae,he,null),lt.return=te,me.return=te,lt.sibling=me,te.child=lt,Ae=te.child,Ae.memoizedState=wl(he),Ae.childLanes=_o(J,je,he),te.memoizedState=mh,me):(ms(te),Xo(te,lt))}if(qt=J.memoizedState,qt!==null&&(lt=qt.dehydrated,lt!==null)){if(Ie)te.flags&256?(ms(te),te.flags&=-257,te=Il(J,te,he)):te.memoizedState!==null?(Jr(),te.child=J.child,te.flags|=128,te=null):(Jr(),Ae=me.fallback,lt=te.mode,me=nc({mode:"visible",children:me.children},lt),Ae=wr(Ae,lt,he,null),Ae.flags|=2,me.return=te,Ae.return=te,me.sibling=Ae,te.child=me,pl(te,J.child,null,he),me=te.child,me.memoizedState=wl(he),me.childLanes=_o(J,je,he),te.memoizedState=mh,te=Ae);else if(ms(te),th(lt))je=Jf(lt).digest,me=Error(y(419)),me.stack="",me.digest=je,Ln({value:me,source:null,stack:null}),te=Il(J,te,he);else if(ar||we(J,te,he,!1),je=(he&J.childLanes)!==0,ar||je){if(je=Ji,je!==null){if(me=he&-he,(me&42)!==0)me=1;else switch(me){case 2:me=1;break;case 8:me=4;break;case 32:me=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:me=64;break;case 268435456:me=134217728;break;default:me=0}if(me=(me&(je.suspendedLanes|he))!==0?0:me,me!==0&&me!==qt.retryLane)throw qt.retryLane=me,kt(J,me),rs(je,J,me),ph}eh(lt)||bo(),te=Il(J,te,he)}else eh(lt)?(te.flags|=128,te.child=J.child,te=Ao.bind(null,J),ed(lt,te),te=null):(J=qt.treeContext,fs&&(ps=rd(lt),ds=te,Gi=!0,ba=null,as=!1,J!==null&&(Zs[Qs++]=Ua,Zs[Qs++]=za,Zs[Qs++]=ul,Ua=J.id,za=J.overflow,ul=te)),te=Xo(te,me.children),te.flags|=4096);return te}return Ae?(Jr(),Ae=me.fallback,lt=te.mode,qt=J.child,Ie=qt.sibling,me=va(qt,{mode:"hidden",children:me.children}),me.subtreeFlags=qt.subtreeFlags&31457280,Ie!==null?Ae=va(Ie,Ae):(Ae=wr(Ae,lt,he,null),Ae.flags|=2),Ae.return=te,me.return=te,me.sibling=Ae,te.child=me,me=Ae,Ae=te.child,lt=J.child.memoizedState,lt===null?lt=wl(he):(qt=lt.cachePool,qt!==null?(Ie=Rs?ur._currentValue:ur._currentValue2,qt=qt.parent!==Ie?{parent:Ie,pool:Ie}:qt):qt=jr(),lt={baseLanes:lt.baseLanes|he,cachePool:qt}),Ae.memoizedState=lt,Ae.childLanes=_o(J,je,he),te.memoizedState=mh,me):(ms(te),he=J.child,J=he.sibling,he=va(he,{mode:"visible",children:me.children}),he.return=te,he.sibling=null,J!==null&&(je=te.deletions,je===null?(te.deletions=[J],te.flags|=16):je.push(J)),te.child=he,te.memoizedState=null,he)}function Xo(J,te){return te=nc({mode:"visible",children:te},J.mode),te.return=J,J.child=te}function nc(J,te){return cu(J,te,0,null)}function Il(J,te,he){return pl(te,J.child,null,he),J=Xo(te,te.pendingProps.children),J.flags|=2,te.memoizedState=null,J}function Ka(J,te,he){J.lanes|=te;var me=J.alternate;me!==null&&(me.lanes|=te),ma(J.return,te,he)}function ic(J,te,he,me,Ae){var Ie=J.memoizedState;Ie===null?J.memoizedState={isBackwards:te,rendering:null,renderingStartTime:0,last:me,tail:he,tailMode:Ae}:(Ie.isBackwards=te,Ie.rendering=null,Ie.renderingStartTime=0,Ie.last=me,Ie.tail=he,Ie.tailMode=Ae)}function Zc(J,te,he){var me=te.pendingProps,Ae=me.revealOrder,Ie=me.tail;if(br(J,te,me.children,he),me=Zr.current,(me&2)!==0)me=me&1|2,te.flags|=128;else{if(J!==null&&(J.flags&128)!==0)e:for(J=te.child;J!==null;){if(J.tag===13)J.memoizedState!==null&&Ka(J,he,te);else if(J.tag===19)Ka(J,he,te);else if(J.child!==null){J.child.return=J,J=J.child;continue}if(J===te)break e;for(;J.sibling===null;){if(J.return===null||J.return===te)break e;J=J.return}J.sibling.return=J.return,J=J.sibling}me&=1}switch(ge(Zr,me),Ae){case"forwards":for(he=te.child,Ae=null;he!==null;)J=he.alternate,J!==null&&Hs(J)===null&&(Ae=he),he=he.sibling;he=Ae,he===null?(Ae=te.child,te.child=null):(Ae=he.sibling,he.sibling=null),ic(te,!1,Ae,he,Ie);break;case"backwards":for(he=null,Ae=te.child,te.child=null;Ae!==null;){if(J=Ae.alternate,J!==null&&Hs(J)===null){te.child=Ae;break}J=Ae.sibling,Ae.sibling=he,he=Ae,Ae=J}ic(te,!0,he,null,Ie);break;case"together":ic(te,!1,null,null,void 0);break;default:te.memoizedState=null}return te.child}function da(J,te,he){if(J!==null&&(te.dependencies=J.dependencies),sa|=te.lanes,(he&te.childLanes)===0)if(J!==null){if(we(J,te,he,!1),(he&te.childLanes)===0)return null}else return null;if(J!==null&&te.child!==J.child)throw Error(y(153));if(te.child!==null){for(J=te.child,he=va(J,J.pendingProps),te.child=he,he.return=te;J.sibling!==null;)J=J.sibling,he=he.sibling=va(J,J.pendingProps),he.return=te;he.sibling=null}return te.child}function rc(J,te){return(J.lanes&te)!==0?!0:(J=J.dependencies,!!(J!==null&&Fe(J)))}function sc(J,te,he){switch(te.tag){case 3:qe(te,te.stateNode.containerInfo),Va(te,ur,J.memoizedState.cache),kn();break;case 27:case 5:ct(te);break;case 4:qe(te,te.stateNode.containerInfo);break;case 10:Va(te,te.type,te.memoizedProps.value);break;case 13:var me=te.memoizedState;if(me!==null)return me.dehydrated!==null?(ms(te),te.flags|=128,null):(he&te.child.childLanes)!==0?Yc(J,te,he):(ms(te),J=da(J,te,he),J!==null?J.sibling:null);ms(te);break;case 19:var Ae=(J.flags&128)!==0;if(me=(he&te.childLanes)!==0,me||(we(J,te,he,!1),me=(he&te.childLanes)!==0),Ae){if(me)return Zc(J,te,he);te.flags|=128}if(Ae=te.memoizedState,Ae!==null&&(Ae.rendering=null,Ae.tail=null,Ae.lastEffect=null),ge(Zr,Zr.current),me)break;return null;case 22:case 23:return te.lanes=0,Xc(J,te,he);case 24:Va(te,ur,J.memoizedState.cache)}return da(J,te,he)}function ys(J,te,he){if(J!==null)if(J.memoizedProps!==te.pendingProps)ar=!0;else{if(!rc(J,he)&&(te.flags&128)===0)return ar=!1,sc(J,te,he);ar=(J.flags&131072)!==0}else ar=!1,Gi&&(te.flags&1048576)!==0&&Ne(te,Mc,te.index);switch(te.lanes=0,te.tag){case 16:e:{J=te.pendingProps;var me=te.elementType,Ae=me._init;if(me=Ae(me._payload),te.type=me,typeof me=="function")ou(me)?(J=fa(me,J),te.tag=1,te=$c(null,te,me,J,he)):(te.tag=0,te=Pl(null,te,me,J,he));else{if(me!=null){if(Ae=me.$$typeof,Ae===pu){te.tag=11,te=Al(null,te,me,J,he);break e}else if(Ae===$u){te.tag=14,te=tc(null,te,me,J,he);break e}}throw te=G(me)||me,Error(y(306,te,""))}}return te;case 0:return Pl(J,te,te.type,te.pendingProps,he);case 1:return me=te.type,Ae=fa(me,te.pendingProps),$c(J,te,me,Ae,he);case 3:e:{if(qe(te,te.stateNode.containerInfo),J===null)throw Error(y(387));var Ie=te.pendingProps;Ae=te.memoizedState,me=Ae.element,Kn(J,te),Xn(te,Ie,null,he);var je=te.memoizedState;if(Ie=je.cache,Va(te,ur,Ie),Ie!==Ae.cache&&fe(te,[ur],he,!0),xn(),Ie=je.element,fs&&Ae.isDehydrated)if(Ae={element:Ie,isDehydrated:!1,cache:je.cache},te.updateQueue.baseState=Ae,te.memoizedState=Ae,te.flags&256){te=Kc(J,te,Ie,he);break e}else if(Ie!==me){me=Oe(Error(y(424)),te),Ln(me),te=Kc(J,te,Ie,he);break e}else for(fs&&(ps=nd(te.stateNode.containerInfo),ds=te,Gi=!0,ba=null,as=!0),he=ro(te,null,Ie,he),te.child=he;he;)he.flags=he.flags&-3|4096,he=he.sibling;else{if(kn(),Ie===me){te=da(J,te,he);break e}br(J,te,Ie,he)}te=te.child}return te;case 26:if(Ys)return Cl(J,te),J===null?(he=cf(te.type,null,te.pendingProps,null))?te.memoizedState=he:Gi||(te.stateNode=ah(te.type,te.pendingProps,no.current,te)):te.memoizedState=cf(te.type,J.memoizedProps,te.pendingProps,J.memoizedState),null;case 27:if(rr)return ct(te),J===null&&rr&&Gi&&(me=te.stateNode=Ba(te.type,te.pendingProps,no.current,Yr.current,!1),ds=te,as=!0,ps=nh(me)),me=te.pendingProps.children,J!==null||Gi?br(J,te,me,he):te.child=pl(te,null,me,he),Cl(J,te),te.child;case 5:return J===null&&Gi&&(rh(te.type,te.pendingProps,Yr.current),(Ae=me=ps)&&(me=qd(me,te.type,te.pendingProps,as),me!==null?(te.stateNode=me,ds=te,ps=nh(me),as=!1,Ae=!0):Ae=!1),Ae||un(te)),ct(te),Ae=te.type,Ie=te.pendingProps,je=J!==null?J.memoizedProps:null,me=Ie.children,Ai(Ae,Ie)?me=null:je!==null&&Ai(Ae,je)&&(te.flags|=32),te.memoizedState!==null&&(Ae=Ts(J,te,Sr,null,null,he),Rs?Fa._currentValue=Ae:Fa._currentValue2=Ae),Cl(J,te),br(J,te,me,he),te.child;case 6:return J===null&&Gi&&(ud(te.pendingProps,Yr.current),(J=he=ps)&&(he=of(he,te.pendingProps,as),he!==null?(te.stateNode=he,ds=te,ps=null,J=!0):J=!1),J||un(te)),null;case 13:return Yc(J,te,he);case 4:return qe(te,te.stateNode.containerInfo),me=te.pendingProps,J===null?te.child=pl(te,null,me,he):br(J,te,me,he),te.child;case 11:return Al(J,te,te.type,te.pendingProps,he);case 7:return br(J,te,te.pendingProps,he),te.child;case 8:return br(J,te,te.pendingProps.children,he),te.child;case 12:return br(J,te,te.pendingProps.children,he),te.child;case 10:return me=te.pendingProps,Va(te,te.type,me.value),br(J,te,me.children,he),te.child;case 9:return Ae=te.type._context,me=te.pendingProps.children,We(te),Ae=Lt(Ae),me=me(Ae),te.flags|=1,br(J,te,me,he),te.child;case 14:return tc(J,te,te.type,te.pendingProps,he);case 15:return Ml(J,te,te.type,te.pendingProps,he);case 19:return Zc(J,te,he);case 22:return Xc(J,te,he);case 24:return We(te),me=Lt(ur),J===null?(Ae=Fi(),Ae===null&&(Ae=Ji,Ie=Ni(),Ae.pooledCache=Ie,Ie.refCount++,Ie!==null&&(Ae.pooledCacheLanes|=he),Ae=Ie),te.memoizedState={parent:me,cache:Ae},On(te),Va(te,ur,Ae)):((J.lanes&he)!==0&&(Kn(J,te),Xn(te,null,null,he),xn()),Ae=J.memoizedState,Ie=te.memoizedState,Ae.parent!==me?(Ae={parent:me,cache:me},te.memoizedState=Ae,te.lanes===0&&(te.memoizedState=te.updateQueue.baseState=Ae),Va(te,ur,me)):(me=Ie.cache,Va(te,ur,me),me!==Ae.cache&&fe(te,[ur],he,!0))),br(J,te,te.pendingProps.children,he),te.child;case 29:throw te.pendingProps}throw Error(y(156,te.tag))}function Va(J,te,he){Rs?(ge(No,te._currentValue),te._currentValue=he):(ge(No,te._currentValue2),te._currentValue2=he)}function pa(J){var te=No.current;Rs?J._currentValue=te:J._currentValue2=te,ue(No)}function ma(J,te,he){for(;J!==null;){var me=J.alternate;if((J.childLanes&te)!==te?(J.childLanes|=te,me!==null&&(me.childLanes|=te)):me!==null&&(me.childLanes&te)!==te&&(me.childLanes|=te),J===he)break;J=J.return}}function fe(J,te,he,me){var Ae=J.child;for(Ae!==null&&(Ae.return=J);Ae!==null;){var Ie=Ae.dependencies;if(Ie!==null){var je=Ae.child;Ie=Ie.firstContext;e:for(;Ie!==null;){var lt=Ie;Ie=Ae;for(var qt=0;qt<te.length;qt++)if(lt.context===te[qt]){Ie.lanes|=he,lt=Ie.alternate,lt!==null&&(lt.lanes|=he),ma(Ie.return,he,J),me||(je=null);break e}Ie=lt.next}}else if(Ae.tag===18){if(je=Ae.return,je===null)throw Error(y(341));je.lanes|=he,Ie=je.alternate,Ie!==null&&(Ie.lanes|=he),ma(je,he,J),je=null}else je=Ae.child;if(je!==null)je.return=Ae;else for(je=Ae;je!==null;){if(je===J){je=null;break}if(Ae=je.sibling,Ae!==null){Ae.return=je.return,je=Ae;break}je=je.return}Ae=je}}function we(J,te,he,me){J=null;for(var Ae=te,Ie=!1;Ae!==null;){if(!Ie){if((Ae.flags&524288)!==0)Ie=!0;else if((Ae.flags&262144)!==0)break}if(Ae.tag===10){var je=Ae.alternate;if(je===null)throw Error(y(387));if(je=je.memoizedProps,je!==null){var lt=Ae.type;Gs(Ae.pendingProps.value,je.value)||(J!==null?J.push(lt):J=[lt])}}else if(Ae===zl.current){if(je=Ae.alternate,je===null)throw Error(y(387));je.memoizedState.memoizedState!==Ae.memoizedState.memoizedState&&(J!==null?J.push(Fa):J=[Fa])}Ae=Ae.return}J!==null&&fe(te,J,he,me),te.flags|=262144}function Fe(J){for(J=J.firstContext;J!==null;){var te=J.context;if(!Gs(Rs?te._currentValue:te._currentValue2,J.memoizedValue))return!0;J=J.next}return!1}function We(J){Ha=J,na=null,J=J.dependencies,J!==null&&(J.firstContext=null)}function Lt(J){return Wn(Ha,J)}function Sn(J,te){return Ha===null&&We(J),Wn(J,te)}function Wn(J,te){var he=Rs?te._currentValue:te._currentValue2;if(te={context:te,memoizedValue:he,next:null},na===null){if(J===null)throw Error(y(308));na=te,J.dependencies={lanes:0,firstContext:te},J.flags|=524288}else na=na.next=te;return he}function Ni(){return{controller:new Dc,data:new Map,refCount:0}}function Ar(J){J.refCount--,J.refCount===0&&Sd(xd,function(){J.controller.abort()})}function Fi(){var J=ao.current;return J!==null?J:Ji.pooledCache}function Or(J,te){te===null?ge(ao,ao.current):ge(ao,te.pool)}function jr(){var J=Fi();return J===null?null:{parent:Rs?ur._currentValue:ur._currentValue2,pool:J}}function Nr(J){J.flags|=4}function ts(J,te){if(J!==null&&J.child===te.child)return!1;if((te.flags&16)!==0)return!0;for(J=te.child;J!==null;){if((J.flags&13878)!==0||(J.subtreeFlags&13878)!==0)return!0;J=J.sibling}return!1}function ga(J,te,he,me){if(Kr)for(he=te.child;he!==null;){if(he.tag===5||he.tag===6)gu(J,he.stateNode);else if(!(he.tag===4||rr&&he.tag===27)&&he.child!==null){he.child.return=he,he=he.child;continue}if(he===te)break;for(;he.sibling===null;){if(he.return===null||he.return===te)return;he=he.return}he.sibling.return=he.return,he=he.sibling}else if(xa)for(var Ae=te.child;Ae!==null;){if(Ae.tag===5){var Ie=Ae.stateNode;he&&me&&(Ie=nf(Ie,Ae.type,Ae.memoizedProps)),gu(J,Ie)}else if(Ae.tag===6)Ie=Ae.stateNode,he&&me&&(Ie=rf(Ie,Ae.memoizedProps)),gu(J,Ie);else if(Ae.tag!==4){if(Ae.tag===22&&Ae.memoizedState!==null)Ie=Ae.child,Ie!==null&&(Ie.return=Ae),ga(J,Ae,!0,!0);else if(Ae.child!==null){Ae.child.return=Ae,Ae=Ae.child;continue}}if(Ae===te)break;for(;Ae.sibling===null;){if(Ae.return===null||Ae.return===te)return;Ae=Ae.return}Ae.sibling.return=Ae.return,Ae=Ae.sibling}}function ac(J,te,he,me){if(xa)for(var Ae=te.child;Ae!==null;){if(Ae.tag===5){var Ie=Ae.stateNode;he&&me&&(Ie=nf(Ie,Ae.type,Ae.memoizedProps)),tf(J,Ie)}else if(Ae.tag===6)Ie=Ae.stateNode,he&&me&&(Ie=rf(Ie,Ae.memoizedProps)),tf(J,Ie);else if(Ae.tag!==4){if(Ae.tag===22&&Ae.memoizedState!==null)Ie=Ae.child,Ie!==null&&(Ie.return=Ae),ac(J,Ae,!(Ae.memoizedProps!==null&&Ae.memoizedProps.mode==="manual"),!0);else if(Ae.child!==null){Ae.child.return=Ae,Ae=Ae.child;continue}}if(Ae===te)break;for(;Ae.sibling===null;){if(Ae.return===null||Ae.return===te)return;Ae=Ae.return}Ae.sibling.return=Ae.return,Ae=Ae.sibling}}function Qc(J,te){if(xa&&ts(J,te)){J=te.stateNode;var he=J.containerInfo,me=yu();ac(me,te,!1,!1),J.pendingChildren=me,Nr(te),Ju(he,me)}}function Iu(J,te,he,me){if(Kr)J.memoizedProps!==me&&Nr(te);else if(xa){var Ae=J.stateNode,Ie=J.memoizedProps;if((J=ts(J,te))||Ie!==me){var je=Yr.current;Ie=Tc(Ae,he,Ie,me,!J,null),Ie===Ae?te.stateNode=Ae:(Po(Ie,he,me,je)&&Nr(te),te.stateNode=Ie,J?ga(Ie,te,!1,!1):Nr(te))}else te.stateNode=Ae}}function Du(J,te,he){if(Xh(te,he)){if(J.flags|=16777216,!Zu(te,he))if(Jo())J.flags|=8192;else throw hl=Mu,Au}else J.flags&=-16777217}function Vu(J,te){if(dd(te)){if(J.flags|=16777216,!Ol(te))if(Jo())J.flags|=8192;else throw hl=Mu,Au}else J.flags&=-16777217}function oc(J,te){te!==null&&(J.flags|=4),J.flags&16384&&(te=J.tag!==22?ye():536870912,J.lanes|=te,co|=te)}function lc(J,te){if(!Gi)switch(J.tailMode){case"hidden":te=J.tail;for(var he=null;te!==null;)te.alternate!==null&&(he=te),te=te.sibling;he===null?J.tail=null:he.sibling=null;break;case"collapsed":he=J.tail;for(var me=null;he!==null;)he.alternate!==null&&(me=he),he=he.sibling;me===null?te||J.tail===null?J.tail=null:J.tail.sibling=null:me.sibling=null}}function _r(J){var te=J.alternate!==null&&J.alternate.child===J.child,he=0,me=0;if(te)for(var Ae=J.child;Ae!==null;)he|=Ae.lanes|Ae.childLanes,me|=Ae.subtreeFlags&31457280,me|=Ae.flags&31457280,Ae.return=J,Ae=Ae.sibling;else for(Ae=J.child;Ae!==null;)he|=Ae.lanes|Ae.childLanes,me|=Ae.subtreeFlags,me|=Ae.flags,Ae.return=J,Ae=Ae.sibling;return J.subtreeFlags|=me,J.childLanes=he,te}function Mf(J,te,he){var me=te.pendingProps;switch(Qe(te),te.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _r(te),null;case 1:return _r(te),null;case 3:return he=te.stateNode,me=null,J!==null&&(me=J.memoizedState.cache),te.memoizedState.cache!==me&&(te.flags|=2048),pa(ur),Ze(),he.pendingContext&&(he.context=he.pendingContext,he.pendingContext=null),(J===null||J.child===null)&&(Un(te)?Nr(te):J===null||J.memoizedState.isDehydrated&&(te.flags&256)===0||(te.flags|=1024,ba!==null&&(su(ba),ba=null))),Qc(J,te),_r(te),null;case 26:if(Ys){he=te.type;var Ae=te.memoizedState;return J===null?(Nr(te),Ae!==null?(_r(te),Vu(te,Ae)):(_r(te),Du(te,he,me))):Ae?Ae!==J.memoizedState?(Nr(te),_r(te),Vu(te,Ae)):(_r(te),te.flags&=-16777217):(Kr?J.memoizedProps!==me&&Nr(te):Iu(J,te,he,me),_r(te),Du(te,he,me)),null}case 27:if(rr){if(xt(te),he=no.current,Ae=te.type,J!==null&&te.stateNode!=null)Kr?J.memoizedProps!==me&&Nr(te):Iu(J,te,Ae,me);else{if(!me){if(te.stateNode===null)throw Error(y(166));return _r(te),null}J=Yr.current,Un(te)?Vn(te,J):(J=Ba(Ae,me,he,J,!0),te.stateNode=J,Nr(te))}return _r(te),null}case 5:if(xt(te),he=te.type,J!==null&&te.stateNode!=null)Iu(J,te,he,me);else{if(!me){if(te.stateNode===null)throw Error(y(166));return _r(te),null}J=Yr.current,Un(te)?Vn(te,J):(Ae=Wh(he,me,no.current,J,te),ga(Ae,te,!1,!1),te.stateNode=Ae,Po(Ae,he,me,J)&&Nr(te))}return _r(te),Du(te,te.type,te.pendingProps),null;case 6:if(J&&te.stateNode!=null)he=J.memoizedProps,Kr?he!==me&&Nr(te):xa&&(he!==me?(te.stateNode=tr(me,no.current,Yr.current,te),Nr(te)):te.stateNode=J.stateNode);else{if(typeof me!="string"&&te.stateNode===null)throw Error(y(166));if(J=no.current,he=Yr.current,Un(te)){if(!fs)throw Error(y(176));if(J=te.stateNode,he=te.memoizedProps,me=null,Ae=ds,Ae!==null)switch(Ae.tag){case 27:case 5:me=Ae.memoizedProps}lf(J,he,te,me)||un(te)}else te.stateNode=tr(me,J,he,te)}return _r(te),null;case 13:if(me=te.memoizedState,J===null||J.memoizedState!==null&&J.memoizedState.dehydrated!==null){if(Ae=Un(te),me!==null&&me.dehydrated!==null){if(J===null){if(!Ae)throw Error(y(318));if(!fs)throw Error(y(344));if(Ae=te.memoizedState,Ae=Ae!==null?Ae.dehydrated:null,!Ae)throw Error(y(317));od(Ae,te)}else kn(),(te.flags&128)===0&&(te.memoizedState=null),te.flags|=4;_r(te),Ae=!1}else ba!==null&&(su(ba),ba=null),Ae=!0;if(!Ae)return te.flags&256?(ls(te),te):(ls(te),null)}if(ls(te),(te.flags&128)!==0)return te.lanes=he,te;if(he=me!==null,J=J!==null&&J.memoizedState!==null,he){me=te.child,Ae=null,me.alternate!==null&&me.alternate.memoizedState!==null&&me.alternate.memoizedState.cachePool!==null&&(Ae=me.alternate.memoizedState.cachePool.pool);var Ie=null;me.memoizedState!==null&&me.memoizedState.cachePool!==null&&(Ie=me.memoizedState.cachePool.pool),Ie!==Ae&&(me.flags|=2048)}return he!==J&&he&&(te.child.flags|=8192),oc(te,te.updateQueue),_r(te),null;case 4:return Ze(),Qc(J,te),J===null&&Br(te.stateNode.containerInfo),_r(te),null;case 10:return pa(te.type),_r(te),null;case 19:if(ue(Zr),Ae=te.memoizedState,Ae===null)return _r(te),null;if(me=(te.flags&128)!==0,Ie=Ae.rendering,Ie===null)if(me)lc(Ae,!1);else{if(or!==0||J!==null&&(J.flags&128)!==0)for(J=te.child;J!==null;){if(Ie=Hs(J),Ie!==null){for(te.flags|=128,lc(Ae,!1),J=Ie.updateQueue,te.updateQueue=J,oc(te,J),te.subtreeFlags=0,J=he,he=te.child;he!==null;)lu(he,J),he=he.sibling;return ge(Zr,Zr.current&1|2),te.child}J=J.sibling}Ae.tail!==null&&Ta()>Oc&&(te.flags|=128,me=!0,lc(Ae,!1),te.lanes=4194304)}else{if(!me)if(J=Hs(Ie),J!==null){if(te.flags|=128,me=!0,J=J.updateQueue,te.updateQueue=J,oc(te,J),lc(Ae,!0),Ae.tail===null&&Ae.tailMode==="hidden"&&!Ie.alternate&&!Gi)return _r(te),null}else 2*Ta()-Ae.renderingStartTime>Oc&&he!==536870912&&(te.flags|=128,me=!0,lc(Ae,!1),te.lanes=4194304);Ae.isBackwards?(Ie.sibling=te.child,te.child=Ie):(J=Ae.last,J!==null?J.sibling=Ie:te.child=Ie,Ae.last=Ie)}return Ae.tail!==null?(te=Ae.tail,Ae.rendering=te,Ae.tail=te.sibling,Ae.renderingStartTime=Ta(),te.sibling=null,J=Zr.current,ge(Zr,me?J&1|2:J&1),te):(_r(te),null);case 22:case 23:return ls(te),Cr(),me=te.memoizedState!==null,J!==null?J.memoizedState!==null!==me&&(te.flags|=8192):me&&(te.flags|=8192),me?(he&536870912)!==0&&(te.flags&128)===0&&(_r(te),te.subtreeFlags&6&&(te.flags|=8192)):_r(te),he=te.updateQueue,he!==null&&oc(te,he.retryQueue),he=null,J!==null&&J.memoizedState!==null&&J.memoizedState.cachePool!==null&&(he=J.memoizedState.cachePool.pool),me=null,te.memoizedState!==null&&te.memoizedState.cachePool!==null&&(me=te.memoizedState.cachePool.pool),me!==he&&(te.flags|=2048),J!==null&&ue(ao),null;case 24:return he=null,J!==null&&(he=J.memoizedState.cache),te.memoizedState.cache!==he&&(te.flags|=2048),pa(ur),_r(te),null;case 25:return null}throw Error(y(156,te.tag))}function Ud(J,te){switch(Qe(te),te.tag){case 1:return J=te.flags,J&65536?(te.flags=J&-65537|128,te):null;case 3:return pa(ur),Ze(),J=te.flags,(J&65536)!==0&&(J&128)===0?(te.flags=J&-65537|128,te):null;case 26:case 27:case 5:return xt(te),null;case 13:if(ls(te),J=te.memoizedState,J!==null&&J.dehydrated!==null){if(te.alternate===null)throw Error(y(340));kn()}return J=te.flags,J&65536?(te.flags=J&-65537|128,te):null;case 19:return ue(Zr),null;case 4:return Ze(),null;case 10:return pa(te.type),null;case 22:case 23:return ls(te),Cr(),J!==null&&ue(ao),J=te.flags,J&65536?(te.flags=J&-65537|128,te):null;case 24:return pa(ur),null;case 25:return null;default:return null}}function Rf(J,te){switch(Qe(te),te.tag){case 3:pa(ur),Ze();break;case 26:case 27:case 5:xt(te);break;case 4:Ze();break;case 13:ls(te);break;case 19:ue(Zr);break;case 10:pa(te.type);break;case 22:case 23:ls(te),Cr(),J!==null&&ue(ao);break;case 24:pa(ur)}}function Jc(J,te){try{var he=te.updateQueue,me=he!==null?he.lastEffect:null;if(me!==null){var Ae=me.next;he=Ae;do{if((he.tag&J)===J){me=void 0;var Ie=he.create,je=he.inst;me=Ie(),je.destroy=me}he=he.next}while(he!==Ae)}}catch(lt){Zi(te,te.return,lt)}}function $o(J,te,he){try{var me=te.updateQueue,Ae=me!==null?me.lastEffect:null;if(Ae!==null){var Ie=Ae.next;me=Ie;do{if((me.tag&J)===J){var je=me.inst,lt=je.destroy;if(lt!==void 0){je.destroy=void 0,Ae=te;var qt=he;try{lt()}catch(bn){Zi(Ae,qt,bn)}}}me=me.next}while(me!==Ie)}}catch(bn){Zi(te,te.return,bn)}}function Cf(J){var te=J.updateQueue;if(te!==null){var he=J.stateNode;try{Nn(te,he)}catch(me){Zi(J,J.return,me)}}}function Ns(J,te,he){he.props=fa(J.type,J.memoizedProps),he.state=J.memoizedState;try{he.componentWillUnmount()}catch(me){Zi(J,te,me)}}function La(J,te){try{var he=J.ref;if(he!==null){var me=J.stateNode;switch(J.tag){case 26:case 27:case 5:var Ae=Ec(me);break;default:Ae=me}typeof he=="function"?J.refCleanup=he(Ae):he.current=Ae}}catch(Ie){Zi(J,te,Ie)}}function Fs(J,te){var he=J.ref,me=J.refCleanup;if(he!==null)if(typeof me=="function")try{me()}catch(Ae){Zi(J,te,Ae)}finally{J.refCleanup=null,J=J.alternate,J!=null&&(J.refCleanup=null)}else if(typeof he=="function")try{he(null)}catch(Ae){Zi(J,te,Ae)}else he.current=null}function Mh(J){var te=J.type,he=J.memoizedProps,me=J.stateNode;try{Hd(me,te,he,J)}catch(Ae){Zi(J,J.return,Ae)}}function Rh(J,te,he){try{qf(J.stateNode,J.type,he,te,J)}catch(me){Zi(J,J.return,me)}}function Ch(J){return J.tag===5||J.tag===3||(Ys?J.tag===26:!1)||(rr?J.tag===27:!1)||J.tag===4}function eu(J){e:for(;;){for(;J.sibling===null;){if(J.return===null||Ch(J.return))return null;J=J.return}for(J.sibling.return=J.return,J=J.sibling;J.tag!==5&&J.tag!==6&&(!rr||J.tag!==27)&&J.tag!==18;){if(J.flags&2||J.child===null||J.tag===4)continue e;J.child.return=J,J=J.child}if(!(J.flags&2))return J.stateNode}}function Ph(J,te,he){var me=J.tag;if(me===5||me===6)J=J.stateNode,te?Xf(he,J,te):Qh(he,J);else if(!(me===4||rr&&me===27)&&(J=J.child,J!==null))for(Ph(J,te,he),J=J.sibling;J!==null;)Ph(J,te,he),J=J.sibling}function vo(J,te,he){var me=J.tag;if(me===5||me===6)J=J.stateNode,te?Wf(he,J,te):Hf(he,J);else if(!(me===4||rr&&me===27)&&(J=J.child,J!==null))for(vo(J,te,he),J=J.sibling;J!==null;)vo(J,te,he),J=J.sibling}function Lu(J,te,he){J=J.containerInfo;try{bc(J,he)}catch(me){Zi(te,te.return,me)}}function tu(J,te){for(Ku(J.containerInfo),xi=te;xi!==null;)if(J=xi,te=J.child,(J.subtreeFlags&1028)!==0&&te!==null)te.return=J,xi=te;else for(;xi!==null;){J=xi;var he=J.alternate;switch(te=J.flags,J.tag){case 0:break;case 11:case 15:break;case 1:if((te&1024)!==0&&he!==null){te=void 0;var me=J,Ae=he.memoizedProps;he=he.memoizedState;var Ie=me.stateNode;try{var je=fa(me.type,Ae,me.elementType===me.type);te=Ie.getSnapshotBeforeUpdate(je,he),Ie.__reactInternalSnapshotBeforeUpdate=te}catch(lt){Zi(me,me.return,lt)}}break;case 3:(te&1024)!==0&&Kr&&Qf(J.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((te&1024)!==0)throw Error(y(163))}if(te=J.sibling,te!==null){te.return=J.return,xi=te;break}xi=J.return}return je=Di,Di=!1,je}function Ou(J,te,he){var me=he.flags;switch(he.tag){case 0:case 11:case 15:So(J,he),me&4&&Jc(5,he);break;case 1:if(So(J,he),me&4)if(J=he.stateNode,te===null)try{J.componentDidMount()}catch(lt){Zi(he,he.return,lt)}else{var Ae=fa(he.type,te.memoizedProps);te=te.memoizedState;try{J.componentDidUpdate(Ae,te,J.__reactInternalSnapshotBeforeUpdate)}catch(lt){Zi(he,he.return,lt)}}me&64&&Cf(he),me&512&&La(he,he.return);break;case 3:if(So(J,he),me&64&&(me=he.updateQueue,me!==null)){if(J=null,he.child!==null)switch(he.child.tag){case 27:case 5:J=Ec(he.child.stateNode);break;case 1:J=he.child.stateNode}try{Nn(me,J)}catch(lt){Zi(he,he.return,lt)}}break;case 26:if(Ys){So(J,he),me&512&&La(he,he.return);break}case 27:case 5:So(J,he),te===null&&me&4&&Mh(he),me&512&&La(he,he.return);break;case 12:So(J,he);break;case 13:So(J,he),me&4&&Nu(J,he);break;case 22:if(Ae=he.memoizedState!==null||oo,!Ae){te=te!==null&&te.memoizedState!==null||Dr;var Ie=oo,je=Dr;oo=Ae,(Dr=te)&&!je?xo(J,he,(he.subtreeFlags&8772)!==0):So(J,he),oo=Ie,Dr=je}me&512&&(he.memoizedProps.mode==="manual"?La(he,he.return):Fs(he,he.return));break;default:So(J,he)}}function wh(J){var te=J.alternate;te!==null&&(J.alternate=null,wh(te)),J.child=null,J.deletions=null,J.sibling=null,J.tag===5&&(te=J.stateNode,te!==null&&Gd(te)),J.stateNode=null,J.return=null,J.dependencies=null,J.memoizedProps=null,J.memoizedState=null,J.pendingProps=null,J.stateNode=null,J.updateQueue=null}function cs(J,te,he){for(he=he.child;he!==null;)Ko(J,te,he),he=he.sibling}function Ko(J,te,he){if(ks&&typeof ks.onCommitFiberUnmount=="function")try{ks.onCommitFiberUnmount(zr,he)}catch{}switch(he.tag){case 26:if(Ys){Dr||Fs(he,te),cs(J,te,he),he.memoizedState?Ll(he.memoizedState):he.stateNode&&Ac(he.stateNode);break}case 27:if(rr){Dr||Fs(he,te);var me=ci,Ae=Ri;ci=he.stateNode,cs(J,te,he),ll(he.stateNode),ci=me,Ri=Ae;break}case 5:Dr||Fs(he,te);case 6:if(Kr){if(me=ci,Ae=Ri,ci=null,cs(J,te,he),ci=me,Ri=Ae,ci!==null)if(Ri)try{$f(ci,he.stateNode)}catch(Ie){Zi(he,te,Ie)}else try{Jh(ci,he.stateNode)}catch(Ie){Zi(he,te,Ie)}}else cs(J,te,he);break;case 18:Kr&&ci!==null&&(Ri?_u(ci,he.stateNode):cd(ci,he.stateNode));break;case 4:Kr?(me=ci,Ae=Ri,ci=he.stateNode.containerInfo,Ri=!0,cs(J,te,he),ci=me,Ri=Ae):(xa&&Lu(he.stateNode,he,yu()),cs(J,te,he));break;case 0:case 11:case 14:case 15:Dr||$o(2,he,te),Dr||$o(4,he,te),cs(J,te,he);break;case 1:Dr||(Fs(he,te),me=he.stateNode,typeof me.componentWillUnmount=="function"&&Ns(he,te,me)),cs(J,te,he);break;case 21:cs(J,te,he);break;case 22:Dr||Fs(he,te),Dr=(me=Dr)||he.memoizedState!==null,cs(J,te,he),Dr=me;break;default:cs(J,te,he)}}function Nu(J,te){if(fs&&te.memoizedState===null&&(J=te.alternate,J!==null&&(J=J.memoizedState,J!==null&&(J=J.dehydrated,J!==null))))try{Xd(J)}catch(he){Zi(te,te.return,he)}}function Pf(J){switch(J.tag){case 13:case 19:var te=J.stateNode;return te===null&&(te=J.stateNode=new Qi),te;case 22:return J=J.stateNode,te=J._retryCache,te===null&&(te=J._retryCache=new Qi),te;default:throw Error(y(435,J.tag))}}function Eo(J,te){var he=Pf(J);te.forEach(function(me){var Ae=nl.bind(null,J,me);he.has(me)||(he.add(me),me.then(Ae,Ae))})}function As(J,te){var he=te.deletions;if(he!==null)for(var me=0;me<he.length;me++){var Ae=he[me],Ie=J,je=te;if(Kr){var lt=je;e:for(;lt!==null;){switch(lt.tag){case 27:case 5:ci=lt.stateNode,Ri=!1;break e;case 3:ci=lt.stateNode.containerInfo,Ri=!0;break e;case 4:ci=lt.stateNode.containerInfo,Ri=!0;break e}lt=lt.return}if(ci===null)throw Error(y(160));Ko(Ie,je,Ae),ci=null,Ri=!1}else Ko(Ie,je,Ae);Ie=Ae.alternate,Ie!==null&&(Ie.return=null),Ae.return=null}if(te.subtreeFlags&13878)for(te=te.child;te!==null;)Ih(te,J),te=te.sibling}function Ih(J,te){var he=J.alternate,me=J.flags;switch(J.tag){case 0:case 11:case 14:case 15:As(te,J),Bs(J),me&4&&($o(3,J,J.return),Jc(3,J),$o(5,J,J.return));break;case 1:As(te,J),Bs(J),me&512&&(Dr||he===null||Fs(he,he.return)),me&64&&oo&&(J=J.updateQueue,J!==null&&(me=J.callbacks,me!==null&&(he=J.shared.hiddenCallbacks,J.shared.hiddenCallbacks=he===null?me:he.concat(me))));break;case 26:if(Ys){var Ae=Rr;As(te,J),Bs(J),me&512&&(Dr||he===null||Fs(he,he.return)),me&4&&(me=he!==null?he.memoizedState:null,te=J.memoizedState,he===null?te===null?J.stateNode===null?J.stateNode=Eu(Ae,J.type,J.memoizedProps,J):Su(Ae,J.type,J.stateNode):J.stateNode=hd(Ae,te,J.memoizedProps):me!==te?(me===null?he.stateNode!==null&&Ac(he.stateNode):Ll(me),te===null?Su(Ae,J.type,J.stateNode):hd(Ae,te,J.memoizedProps)):te===null&&J.stateNode!==null&&Rh(J,J.memoizedProps,he.memoizedProps));break}case 27:if(rr&&me&4&&J.alternate===null){Ae=J.stateNode;var Ie=J.memoizedProps;try{ol(Ae),md(J.type,Ie,Ae,J)}catch(zn){Zi(J,J.return,zn)}}case 5:if(As(te,J),Bs(J),me&512&&(Dr||he===null||Fs(he,he.return)),Kr){if(J.flags&32){te=J.stateNode;try{ef(te)}catch(zn){Zi(J,J.return,zn)}}me&4&&J.stateNode!=null&&(te=J.memoizedProps,Rh(J,te,he!==null?he.memoizedProps:te)),me&1024&&(df=!0)}break;case 6:if(As(te,J),Bs(J),me&4&&Kr){if(J.stateNode===null)throw Error(y(162));me=J.memoizedProps,he=he!==null?he.memoizedProps:me,te=J.stateNode;try{jf(te,he,me)}catch(zn){Zi(J,J.return,zn)}}break;case 3:if(Ys?(fd(),Ae=Rr,Rr=sh(te.containerInfo),As(te,J),Rr=Ae):As(te,J),Bs(J),me&4){if(Kr&&fs&&he!==null&&he.memoizedState.isDehydrated)try{Wd(te.containerInfo)}catch(zn){Zi(J,J.return,zn)}if(xa){me=te.containerInfo,he=te.pendingChildren;try{bc(me,he)}catch(zn){Zi(J,J.return,zn)}}}df&&(df=!1,wf(J));break;case 4:Ys?(he=Rr,Rr=sh(J.stateNode.containerInfo),As(te,J),Bs(J),Rr=he):(As(te,J),Bs(J)),me&4&&xa&&Lu(J.stateNode,J,J.stateNode.pendingChildren);break;case 12:As(te,J),Bs(J);break;case 13:As(te,J),Bs(J),J.child.flags&8192&&J.memoizedState!==null!=(he!==null&&he.memoizedState!==null)&&(Is=Ta()),me&4&&(me=J.updateQueue,me!==null&&(J.updateQueue=null,Eo(J,me)));break;case 22:me&512&&(Dr||he===null||Fs(he,he.return)),Ae=J.memoizedState!==null;var je=he!==null&&he.memoizedState!==null,lt=oo,qt=Dr;if(oo=lt||Ae,Dr=qt||je,As(te,J),Dr=qt,oo=lt,Bs(J),te=J.stateNode,te._current=J,te._visibility&=-3,te._visibility|=te._pendingVisibility&2,me&8192&&(te._visibility=Ae?te._visibility&-2:te._visibility|1,Ae&&(te=oo||Dr,he===null||je||te||cc(J)),Kr&&(J.memoizedProps===null||J.memoizedProps.mode!=="manual"))){e:if(he=null,Kr)for(te=J;;){if(te.tag===5||Ys&&te.tag===26||rr&&te.tag===27){if(he===null){je=he=te;try{Ie=je.stateNode,Ae?Kf(Ie):Zf(je.stateNode,je.memoizedProps)}catch(zn){Zi(je,je.return,zn)}}}else if(te.tag===6){if(he===null){je=te;try{var bn=je.stateNode;Ae?Yf(bn):jd(bn,je.memoizedProps)}catch(zn){Zi(je,je.return,zn)}}}else if((te.tag!==22&&te.tag!==23||te.memoizedState===null||te===J)&&te.child!==null){te.child.return=te,te=te.child;continue}if(te===J)break e;for(;te.sibling===null;){if(te.return===null||te.return===J)break e;he===te&&(he=null),te=te.return}he===te&&(he=null),te.sibling.return=te.return,te=te.sibling}}me&4&&(me=J.updateQueue,me!==null&&(he=me.retryQueue,he!==null&&(me.retryQueue=null,Eo(J,he))));break;case 19:As(te,J),Bs(J),me&4&&(me=J.updateQueue,me!==null&&(J.updateQueue=null,Eo(J,me)));break;case 21:break;default:As(te,J),Bs(J)}}function Bs(J){var te=J.flags;if(te&2){try{if(Kr&&(!rr||J.tag!==27)){e:{for(var he=J.return;he!==null;){if(Ch(he)){var me=he;break e}he=he.return}throw Error(y(160))}switch(me.tag){case 27:if(rr){var Ae=me.stateNode,Ie=eu(J);vo(J,Ie,Ae);break}case 5:var je=me.stateNode;me.flags&32&&(ef(je),me.flags&=-33);var lt=eu(J);vo(J,lt,je);break;case 3:case 4:var qt=me.stateNode.containerInfo,bn=eu(J);Ph(J,bn,qt);break;default:throw Error(y(161))}}}catch(zn){Zi(J,J.return,zn)}J.flags&=-3}te&4096&&(J.flags&=-4097)}function wf(J){if(J.subtreeFlags&1024)for(J=J.child;J!==null;){var te=J;wf(te),te.tag===5&&te.flags&1024&&Qu(te.stateNode),J=J.sibling}}function So(J,te){if(te.subtreeFlags&8772)for(te=te.child;te!==null;)Ou(J,te.alternate,te),te=te.sibling}function cc(J){for(J=J.child;J!==null;){var te=J;switch(te.tag){case 0:case 11:case 14:case 15:$o(4,te,te.return),cc(te);break;case 1:Fs(te,te.return);var he=te.stateNode;typeof he.componentWillUnmount=="function"&&Ns(te,te.return,he),cc(te);break;case 26:case 27:case 5:Fs(te,te.return),cc(te);break;case 22:Fs(te,te.return),te.memoizedState===null&&cc(te);break;default:cc(te)}J=J.sibling}}function xo(J,te,he){for(he=he&&(te.subtreeFlags&8772)!==0,te=te.child;te!==null;){var me=te.alternate,Ae=J,Ie=te,je=Ie.flags;switch(Ie.tag){case 0:case 11:case 15:xo(Ae,Ie,he),Jc(4,Ie);break;case 1:if(xo(Ae,Ie,he),me=Ie,Ae=me.stateNode,typeof Ae.componentDidMount=="function")try{Ae.componentDidMount()}catch(bn){Zi(me,me.return,bn)}if(me=Ie,Ae=me.updateQueue,Ae!==null){var lt=me.stateNode;try{var qt=Ae.shared.hiddenCallbacks;if(qt!==null)for(Ae.shared.hiddenCallbacks=null,Ae=0;Ae<qt.length;Ae++)pt(qt[Ae],lt)}catch(bn){Zi(me,me.return,bn)}}he&&je&64&&Cf(Ie),La(Ie,Ie.return);break;case 26:case 27:case 5:xo(Ae,Ie,he),he&&me===null&&je&4&&Mh(Ie),La(Ie,Ie.return);break;case 12:xo(Ae,Ie,he);break;case 13:xo(Ae,Ie,he),he&&je&4&&Nu(Ae,Ie);break;case 22:Ie.memoizedState===null&&xo(Ae,Ie,he),La(Ie,Ie.return);break;default:xo(Ae,Ie,he)}te=te.sibling}}function Fu(J,te){var he=null;J!==null&&J.memoizedState!==null&&J.memoizedState.cachePool!==null&&(he=J.memoizedState.cachePool.pool),J=null,te.memoizedState!==null&&te.memoizedState.cachePool!==null&&(J=te.memoizedState.cachePool.pool),J!==he&&(J!=null&&J.refCount++,he!=null&&Ar(he))}function nu(J,te){J=null,te.alternate!==null&&(J=te.alternate.memoizedState.cache),te=te.memoizedState.cache,te!==J&&(te.refCount++,J!=null&&Ar(J))}function ns(J,te,he,me){if(te.subtreeFlags&10256)for(te=te.child;te!==null;)Dh(J,te,he,me),te=te.sibling}function Dh(J,te,he,me){var Ae=te.flags;switch(te.tag){case 0:case 11:case 15:ns(J,te,he,me),Ae&2048&&Jc(9,te);break;case 3:ns(J,te,he,me),Ae&2048&&(J=null,te.alternate!==null&&(J=te.alternate.memoizedState.cache),te=te.memoizedState.cache,te!==J&&(te.refCount++,J!=null&&Ar(J)));break;case 12:if(Ae&2048){ns(J,te,he,me),J=te.stateNode;try{var Ie=te.memoizedProps,je=Ie.id,lt=Ie.onPostCommit;typeof lt=="function"&&lt(je,te.alternate===null?"mount":"update",J.passiveEffectDuration,-0)}catch(qt){Zi(te,te.return,qt)}}else ns(J,te,he,me);break;case 23:break;case 22:Ie=te.stateNode,te.memoizedState!==null?Ie._visibility&4?ns(J,te,he,me):_s(J,te):Ie._visibility&4?ns(J,te,he,me):(Ie._visibility|=4,us(J,te,he,me,(te.subtreeFlags&10256)!==0)),Ae&2048&&Fu(te.alternate,te);break;case 24:ns(J,te,he,me),Ae&2048&&nu(te.alternate,te);break;default:ns(J,te,he,me)}}function us(J,te,he,me,Ae){for(Ae=Ae&&(te.subtreeFlags&10256)!==0,te=te.child;te!==null;){var Ie=J,je=te,lt=he,qt=me,bn=je.flags;switch(je.tag){case 0:case 11:case 15:us(Ie,je,lt,qt,Ae),Jc(8,je);break;case 23:break;case 22:var zn=je.stateNode;je.memoizedState!==null?zn._visibility&4?us(Ie,je,lt,qt,Ae):_s(Ie,je):(zn._visibility|=4,us(Ie,je,lt,qt,Ae)),Ae&&bn&2048&&Fu(je.alternate,je);break;case 24:us(Ie,je,lt,qt,Ae),Ae&&bn&2048&&nu(je.alternate,je);break;default:us(Ie,je,lt,qt,Ae)}te=te.sibling}}function _s(J,te){if(te.subtreeFlags&10256)for(te=te.child;te!==null;){var he=J,me=te,Ae=me.flags;switch(me.tag){case 22:_s(he,me),Ae&2048&&Fu(me.alternate,me);break;case 24:_s(he,me),Ae&2048&&nu(me.alternate,me);break;default:_s(he,me)}te=te.sibling}}function ya(J){if(J.subtreeFlags&ia)for(J=J.child;J!==null;)Bu(J),J=J.sibling}function Bu(J){switch(J.tag){case 26:ya(J),J.flags&ia&&(J.memoizedState!==null?pd(Rr,J.memoizedState,J.memoizedProps):Cs(J.type,J.memoizedProps));break;case 5:ya(J),J.flags&ia&&Cs(J.type,J.memoizedProps);break;case 3:case 4:if(Ys){var te=Rr;Rr=sh(J.stateNode.containerInfo),ya(J),Rr=te}else ya(J);break;case 22:J.memoizedState===null&&(te=J.alternate,te!==null&&te.memoizedState!==null?(te=ia,ia=16777216,ya(J),ia=te):ya(J));break;default:ya(J)}}function iu(J){var te=J.alternate;if(te!==null&&(J=te.child,J!==null)){te.child=null;do te=J.sibling,J.sibling=null,J=te;while(J!==null)}}function Yo(J){var te=J.deletions;if((J.flags&16)!==0){if(te!==null)for(var he=0;he<te.length;he++){var me=te[he];xi=me,Vh(me,J)}iu(J)}if(J.subtreeFlags&10256)for(J=J.child;J!==null;)Uu(J),J=J.sibling}function Uu(J){switch(J.tag){case 0:case 11:case 15:Yo(J),J.flags&2048&&$o(9,J,J.return);break;case 3:Yo(J);break;case 12:Yo(J);break;case 22:var te=J.stateNode;J.memoizedState!==null&&te._visibility&4&&(J.return===null||J.return.tag!==13)?(te._visibility&=-5,To(J)):Yo(J);break;default:Yo(J)}}function To(J){var te=J.deletions;if((J.flags&16)!==0){if(te!==null)for(var he=0;he<te.length;he++){var me=te[he];xi=me,Vh(me,J)}iu(J)}for(J=J.child;J!==null;){switch(te=J,te.tag){case 0:case 11:case 15:$o(8,te,te.return),To(te);break;case 22:he=te.stateNode,he._visibility&4&&(he._visibility&=-5,To(te));break;default:To(te)}J=J.sibling}}function Vh(J,te){for(;xi!==null;){var he=xi;switch(he.tag){case 0:case 11:case 15:$o(8,he,te);break;case 23:case 22:if(he.memoizedState!==null&&he.memoizedState.cachePool!==null){var me=he.memoizedState.cachePool.pool;me!=null&&me.refCount++}break;case 24:Ar(he.memoizedState.cache)}if(me=he.child,me!==null)me.return=he,xi=me;else e:for(he=J;xi!==null;){me=xi;var Ae=me.sibling,Ie=me.return;if(wh(me),me===he){xi=null;break e}if(Ae!==null){Ae.return=Ie,xi=Ae;break e}xi=Ie}}}function uc(J){var te=Nf(J);if(te!=null){if(typeof te.memoizedProps["data-testname"]!="string")throw Error(y(364));return te}if(J=Yh(J),J===null)throw Error(y(362));return J.stateNode.current}function Zo(J,te){var he=J.tag;switch(te.$$typeof){case Lc:if(J.type===te.value)return!0;break;case Ra:e:{for(te=te.value,J=[J,0],he=0;he<J.length;){var me=J[he++],Ae=me.tag,Ie=J[he++],je=te[Ie];if(Ae!==5&&Ae!==26&&Ae!==27||!xc(me)){for(;je!=null&&Zo(me,je);)Ie++,je=te[Ie];if(Ie===te.length){te=!0;break e}else for(me=me.child;me!==null;)J.push(me,Ie),me=me.sibling}}te=!1}return te;case gr:if((he===5||he===26||he===27)&&zf(J.stateNode,te.value))return!0;break;case lo:if((he===5||he===6||he===26||he===27)&&(J=Uf(J),J!==null&&0<=J.indexOf(te.value)))return!0;break;case ja:if((he===5||he===26||he===27)&&(J=J.memoizedProps["data-testname"],typeof J=="string"&&J.toLowerCase()===te.value.toLowerCase()))return!0;break;default:throw Error(y(365))}return!1}function Lh(J){switch(J.$$typeof){case Lc:return"<"+(G(J.value)||"Unknown")+">";case Ra:return":has("+(Lh(J)||"")+")";case gr:return'[role="'+J.value+'"]';case lo:return'"'+J.value+'"';case ja:return'[data-testname="'+J.value+'"]';default:throw Error(y(365))}}function Us(J,te){var he=[];J=[J,0];for(var me=0;me<J.length;){var Ae=J[me++],Ie=Ae.tag,je=J[me++],lt=te[je];if(Ie!==5&&Ie!==26&&Ie!==27||!xc(Ae)){for(;lt!=null&&Zo(Ae,lt);)je++,lt=te[je];if(je===te.length)he.push(Ae);else for(Ae=Ae.child;Ae!==null;)J.push(Ae,je),Ae=Ae.sibling}}return he}function ru(J,te){if(!al)throw Error(y(363));J=uc(J),J=Us(J,te),te=[],J=Array.from(J);for(var he=0;he<J.length;){var me=J[he++],Ae=me.tag;if(Ae===5||Ae===26||Ae===27)xc(me)||te.push(me.stateNode);else for(me=me.child;me!==null;)J.push(me),me=me.sibling}return te}function Fr(){if((Xi&2)!==0&&Bi!==0)return Bi&-Bi;if(yi.T!==null){var J=Js;return J!==0?J:Cn()}return Ff()}function Oh(){aa===0&&(aa=(Bi&536870912)===0||Gi?Ee():536870912);var J=ea.current;return J!==null&&(J.flags|=32),aa}function rs(J,te,he){(J===Ji&&ir===2||J.cancelPendingCommit!==null)&&(hs(J,0),zs(J,Bi,aa,!1)),Me(J,he),((Xi&2)===0||J!==Ji)&&(J===Ji&&((Xi&2)===0&&(Fo|=he),or===4&&zs(J,Bi,aa,!1)),Qt(J))}function Qo(J,te,he){if((Xi&6)!==0)throw Error(y(327));var me=!he&&(te&60)===0&&(te&J.expiredLanes)===0||Re(J,te),Ae=me?Fh(J,te):ku(J,te,!0),Ie=me;do{if(Ae===0){ra&&!me&&zs(J,te,0,!1);break}else if(Ae===6)zs(J,te,0,!Pa);else{if(he=J.current.alternate,Ie&&!hc(he)){Ae=ku(J,te,!1),Ie=!1;continue}if(Ae===2){if(Ie=te,J.errorRecoveryDisabledLanes&Ie)var je=0;else je=J.pendingLanes&-536870913,je=je!==0?je:je&536870912?536870912:0;if(je!==0){te=je;e:{var lt=J;Ae=Kl;var qt=fs&&lt.current.memoizedState.isDehydrated;if(qt&&(hs(lt,je).flags|=256),je=ku(lt,je,!1),je!==2){if(Qr&&!qt){lt.errorRecoveryDisabledLanes|=Ie,Fo|=Ie,Ae=4;break e}Ie=Vr,Vr=Ae,Ie!==null&&su(Ie)}Ae=je}if(Ie=!1,Ae!==2)continue}}if(Ae===1){hs(J,0),zs(J,te,0,!0);break}e:{switch(me=J,Ae){case 0:case 1:throw Error(y(345));case 4:if((te&4194176)===te){zs(me,te,aa,!Pa);break e}break;case 2:Vr=null;break;case 3:case 5:break;default:throw Error(y(329))}if(me.finishedWork=he,me.finishedLanes=te,(te&62914560)===te&&(Ie=Is+300-Ta(),10<Ie)){if(zs(me,te,aa,!Pa),be(me,0)!==0)break e;me.timeoutHandle=Wr(zu.bind(null,me,he,Vr,Cu,gh,te,aa,Fo,co,Pa,2,-0,0),Ie);break e}zu(me,he,Vr,Cu,gh,te,aa,Fo,co,Pa,0,-0,0)}}break}while(!0);Qt(J)}function su(J){Vr===null?Vr=J:Vr.push.apply(Vr,J)}function zu(J,te,he,me,Ae,Ie,je,lt,qt,bn,zn,Yn,Jn){var Ti=te.subtreeFlags;if((Ti&8192||(Ti&16785408)===16785408)&&($h(),Bu(te),te=Xr(),te!==null)){J.cancelPendingCommit=te(el.bind(null,J,he,me,Ae,je,lt,qt,1,Yn,Jn)),zs(J,Ie,je,!bn);return}el(J,he,me,Ae,je,lt,qt,zn,Yn,Jn)}function hc(J){for(var te=J;;){var he=te.tag;if((he===0||he===11||he===15)&&te.flags&16384&&(he=te.updateQueue,he!==null&&(he=he.stores,he!==null)))for(var me=0;me<he.length;me++){var Ae=he[me],Ie=Ae.getSnapshot;Ae=Ae.value;try{if(!Gs(Ie(),Ae))return!1}catch{return!1}}if(he=te.child,te.subtreeFlags&16384&&he!==null)he.return=te,te=he;else{if(te===J)break;for(;te.sibling===null;){if(te.return===null||te.return===J)return!0;te=te.return}te.sibling.return=te.return,te=te.sibling}}return!0}function zs(J,te,he,me){te&=~Ru,te&=~Fo,J.suspendedLanes|=te,J.pingedLanes&=~te,me&&(J.warmLanes|=te),me=J.expirationTimes;for(var Ae=te;0<Ae;){var Ie=31-Ps(Ae),je=1<<Ie;me[Ie]=-1,Ae&=~je}he!==0&&Pe(J,he,te)}function au(){return(Xi&6)===0?(He(0),!1):!0}function fc(){if(fi!==null){if(ir===0)var J=fi.return;else J=fi,na=Ha=null,bs(J),fl=null,dl=0,J=fi;for(;J!==null;)Rf(J.alternate,J),J=J.return;fi=null}}function hs(J,te){J.finishedWork=null,J.finishedLanes=0;var he=J.timeoutHandle;he!==rl&&(J.timeoutHandle=rl,Yu(he)),he=J.cancelPendingCommit,he!==null&&(J.cancelPendingCommit=null,he()),fc(),Ji=J,fi=he=va(J.current,null),Bi=te,ir=0,Es=null,Pa=!1,ra=Re(J,te),Qr=!1,co=aa=Ru=Fo=sa=or=0,Vr=Kl=null,gh=!1,(te&8)!==0&&(te|=te&32);var me=J.entangledLanes;if(me!==0)for(J=J.entanglements,me&=te;0<me;){var Ae=31-Ps(me),Ie=1<<Ae;te|=J[Ae],me&=~Ie}return Ss=te,Ke(),he}function Xs(J,te){wi=null,yi.H=Ir,te===wc?(te=ri(),ir=3):te===Au?(te=ri(),ir=4):ir=te===ph?8:te!==null&&typeof te=="object"&&typeof te.then=="function"?6:1,Es=te,fi===null&&(or=1,go(J,Oe(te,J.current)))}function Jo(){var J=ea.current;return J===null?!0:(Bi&4194176)===Bi?sr===null:(Bi&62914560)===Bi||(Bi&536870912)!==0?J===sr:!1}function Ya(){var J=yi.H;return yi.H=Ir,J===null?Ir:J}function Za(){var J=yi.A;return yi.A=Vc,J}function bo(){or=4,Pa||(Bi&4194176)!==Bi&&ea.current!==null||(ra=!0),(sa&134217727)===0&&(Fo&134217727)===0||Ji===null||zs(Ji,Bi,aa,!1)}function ku(J,te,he){var me=Xi;Xi|=2;var Ae=Ya(),Ie=Za();(Ji!==J||Bi!==te)&&(Cu=null,hs(J,te)),te=!1;var je=or;e:do try{if(ir!==0&&fi!==null){var lt=fi,qt=Es;switch(ir){case 8:fc(),je=6;break e;case 3:case 2:case 6:ea.current===null&&(te=!0);var bn=ir;if(ir=0,Es=null,_a(J,lt,qt,bn),he&&ra){je=0;break e}break;default:bn=ir,ir=0,Es=null,_a(J,lt,qt,bn)}}Nh(),je=or;break}catch(zn){Xs(J,zn)}while(!0);return te&&J.shellSuspendCounter++,na=Ha=null,Xi=me,yi.H=Ae,yi.A=Ie,fi===null&&(Ji=null,Bi=0,Ke()),je}function Nh(){for(;fi!==null;)Mr(fi)}function Fh(J,te){var he=Xi;Xi|=2;var me=Ya(),Ae=Za();Ji!==J||Bi!==te?(Cu=null,Oc=Ta()+500,hs(J,te)):ra=Re(J,te);e:do try{if(ir!==0&&fi!==null){te=fi;var Ie=Es;t:switch(ir){case 1:ir=0,Es=null,_a(J,te,Ie,1);break;case 2:if(Tn(Ie)){ir=0,Es=null,$i(te);break}te=function(){ir===2&&Ji===J&&(ir=7),Qt(J)},Ie.then(te,te);break e;case 3:ir=7;break e;case 4:ir=5;break e;case 7:Tn(Ie)?(ir=0,Es=null,$i(te)):(ir=0,Es=null,_a(J,te,Ie,7));break;case 5:var je=null;switch(fi.tag){case 26:je=fi.memoizedState;case 5:case 27:var lt=fi,qt=lt.type,bn=lt.pendingProps;if(je?Ol(je):Zu(qt,bn)){ir=0,Es=null;var zn=lt.sibling;if(zn!==null)fi=zn;else{var Yn=lt.return;Yn!==null?(fi=Yn,$s(Yn)):fi=null}break t}}ir=0,Es=null,_a(J,te,Ie,5);break;case 6:ir=0,Es=null,_a(J,te,Ie,6);break;case 8:fc(),or=6;break e;default:throw Error(y(462))}}Ms();break}catch(Jn){Xs(J,Jn)}while(!0);return na=Ha=null,yi.H=me,yi.A=Ae,Xi=he,fi!==null?0:(Ji=null,Bi=0,Ke(),or)}function Ms(){for(;fi!==null&&!_d();)Mr(fi)}function Mr(J){var te=ys(J.alternate,J,Ss);J.memoizedProps=J.pendingProps,te===null?$s(J):fi=te}function $i(J){var te=J,he=te.alternate;switch(te.tag){case 15:case 0:te=Wo(he,te,te.pendingProps,te.type,void 0,Bi);break;case 11:te=Wo(he,te,te.pendingProps,te.type.render,te.ref,Bi);break;case 5:bs(te);default:Rf(he,te),te=fi=lu(te,Ss),te=ys(he,te,Ss)}J.memoizedProps=J.pendingProps,te===null?$s(J):fi=te}function _a(J,te,he,me){na=Ha=null,bs(te),fl=null,dl=0;var Ae=te.return;try{if(Ah(J,Ae,te,he,Bi)){or=1,go(J,Oe(he,J.current)),fi=null;return}}catch(Ie){if(Ae!==null)throw fi=Ae,Ie;or=1,go(J,Oe(he,J.current)),fi=null;return}te.flags&32768?(Gi||me===1?J=!0:ra||(Bi&536870912)!==0?J=!1:(Pa=J=!0,(me===2||me===3||me===6)&&(me=ea.current,me!==null&&me.tag===13&&(me.flags|=16384))),Gu(te,J)):$s(te)}function $s(J){var te=J;do{if((te.flags&32768)!==0){Gu(te,Pa);return}J=te.return;var he=Mf(te.alternate,te,Ss);if(he!==null){fi=he;return}if(te=te.sibling,te!==null){fi=te;return}fi=te=J}while(te!==null);or===0&&(or=5)}function Gu(J,te){do{var he=Ud(J.alternate,J);if(he!==null){he.flags&=32767,fi=he;return}if(he=J.return,he!==null&&(he.flags|=32768,he.subtreeFlags=0,he.deletions=null),!te&&(J=J.sibling,J!==null)){fi=J;return}fi=J=he}while(J!==null);or=6,fi=null}function el(J,te,he,me,Ae,Ie,je,lt,qt,bn){var zn=yi.T,Yn=wo();try{vs(2),yi.T=null,If(J,te,he,me,Yn,Ae,Ie,je,lt,qt,bn)}finally{yi.T=zn,vs(Yn)}}function If(J,te,he,me,Ae,Ie,je,lt){do Oa();while(uo!==null);if((Xi&6)!==0)throw Error(y(327));var qt=J.finishedWork;if(me=J.finishedLanes,qt===null)return null;if(J.finishedWork=null,J.finishedLanes=0,qt===J.current)throw Error(y(177));J.callbackNode=null,J.callbackPriority=0,J.cancelPendingCommit=null;var bn=qt.lanes|qt.childLanes;if(bn|=ka,Le(J,me,bn,Ie,je,lt),J===Ji&&(fi=Ji=null,Bi=0),(qt.subtreeFlags&10256)===0&&(qt.flags&10256)===0||qa||(qa=!0,_l=bn,yh=he,Mo(uh,function(){return Oa(),null})),he=(qt.flags&15990)!==0,(qt.subtreeFlags&15990)!==0||he?(he=yi.T,yi.T=null,Ie=wo(),vs(2),je=Xi,Xi|=4,tu(J,qt),Ih(qt,J),Of(J.containerInfo),J.current=qt,Ou(J,qt.alternate,qt),lh(),Xi=je,vs(Ie),yi.T=he):J.current=qt,qa?(qa=!1,uo=J,Yl=me):Bh(J,bn),bn=J.pendingLanes,bn===0&&(yl=null),Ve(qt.stateNode),Qt(J),te!==null)for(Ae=J.onRecoverableError,qt=0;qt<te.length;qt++)bn=te[qt],Ae(bn.value,{componentStack:bn.stack});return(Yl&3)!==0&&Oa(),bn=J.pendingLanes,(me&4194218)!==0&&(bn&42)!==0?J===_h?Nc++:(Nc=0,_h=J):Nc=0,He(0),null}function Bh(J,te){(J.pooledCacheLanes&=te)===0&&(te=J.pooledCache,te!=null&&(J.pooledCache=null,Ar(te)))}function Oa(){if(uo!==null){var J=uo,te=_l;_l=0;var he=$e(Yl),me=32>he?32:he;he=yi.T;var Ae=wo();try{if(vs(me),yi.T=null,uo===null)var Ie=!1;else{me=yh,yh=null;var je=uo,lt=Yl;if(uo=null,Yl=0,(Xi&6)!==0)throw Error(y(331));var qt=Xi;if(Xi|=4,Uu(je.current),Dh(je,je.current,lt,me),Xi=qt,He(0,!1),ks&&typeof ks.onPostCommitFiberRoot=="function")try{ks.onPostCommitFiberRoot(zr,je)}catch{}Ie=!0}return Ie}finally{vs(Ae),yi.T=he,Bh(J,te)}}return!1}function dc(J,te,he){te=Oe(he,te),te=yo(J.stateNode,te,2),J=ti(J,te,2),J!==null&&(Me(J,2),Qt(J))}function Zi(J,te,he){if(J.tag===3)dc(J,J,he);else for(;te!==null;){if(te.tag===3){dc(te,J,he);break}else if(te.tag===1){var me=te.stateNode;if(typeof te.type.getDerivedStateFromError=="function"||typeof me.componentDidCatch=="function"&&(yl===null||!yl.has(me))){J=Oe(he,J),he=Ws(2),me=ti(te,he,2),me!==null&&(Wc(he,me,te,J),Me(me,2),Qt(me));break}}te=te.return}}function Dl(J,te,he){var me=J.pingCache;if(me===null){me=J.pingCache=new Ca;var Ae=new Set;me.set(te,Ae)}else Ae=me.get(te),Ae===void 0&&(Ae=new Set,me.set(te,Ae));Ae.has(he)||(Qr=!0,Ae.add(he),J=Uh.bind(null,J,te,he),te.then(J,J))}function Uh(J,te,he){var me=J.pingCache;me!==null&&me.delete(te),J.pingedLanes|=J.suspendedLanes&he,J.warmLanes&=~he,Ji===J&&(Bi&he)===he&&(or===4||or===3&&(Bi&62914560)===Bi&&300>Ta()-Is?(Xi&2)===0&&hs(J,0):Ru|=he,co===Bi&&(co=0)),Qt(J)}function tl(J,te){te===0&&(te=ye()),J=kt(J,te),J!==null&&(Me(J,te),Qt(J))}function Ao(J){var te=J.memoizedState,he=0;te!==null&&(he=te.retryLane),tl(J,he)}function nl(J,te){var he=0;switch(J.tag){case 13:var me=J.stateNode,Ae=J.memoizedState;Ae!==null&&(he=Ae.retryLane);break;case 19:me=J.stateNode;break;case 22:me=J.stateNode._retryCache;break;default:throw Error(y(314))}me!==null&&me.delete(te),tl(J,he)}function Mo(J,te){return xu(J,te)}function zh(J,te,he,me){this.tag=J,this.key=he,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=te,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=me,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ou(J){return J=J.prototype,!(!J||!J.isReactComponent)}function va(J,te){var he=J.alternate;return he===null?(he=t(J.tag,te,J.key,J.mode),he.elementType=J.elementType,he.type=J.type,he.stateNode=J.stateNode,he.alternate=J,J.alternate=he):(he.pendingProps=te,he.type=J.type,he.flags=0,he.subtreeFlags=0,he.deletions=null),he.flags=J.flags&31457280,he.childLanes=J.childLanes,he.lanes=J.lanes,he.child=J.child,he.memoizedProps=J.memoizedProps,he.memoizedState=J.memoizedState,he.updateQueue=J.updateQueue,te=J.dependencies,he.dependencies=te===null?null:{lanes:te.lanes,firstContext:te.firstContext},he.sibling=J.sibling,he.index=J.index,he.ref=J.ref,he.refCleanup=J.refCleanup,he}function lu(J,te){J.flags&=31457282;var he=J.alternate;return he===null?(J.childLanes=0,J.lanes=te,J.child=null,J.subtreeFlags=0,J.memoizedProps=null,J.memoizedState=null,J.updateQueue=null,J.dependencies=null,J.stateNode=null):(J.childLanes=he.childLanes,J.lanes=he.lanes,J.child=he.child,J.subtreeFlags=0,J.deletions=null,J.memoizedProps=he.memoizedProps,J.memoizedState=he.memoizedState,J.updateQueue=he.updateQueue,J.type=he.type,te=he.dependencies,J.dependencies=te===null?null:{lanes:te.lanes,firstContext:te.firstContext}),J}function Qa(J,te,he,me,Ae,Ie){var je=0;if(me=J,typeof J=="function")ou(J)&&(je=1);else if(typeof J=="string")je=Ys&&rr?vu(J,he,Yr.current)?26:eo(J)?27:5:Ys?vu(J,he,Yr.current)?26:5:rr&&eo(J)?27:5;else e:switch(J){case il:return wr(he.children,Ae,Ie,te);case fu:je=8,Ae|=24;break;case Wu:return J=t(12,he,te,Ae|2),J.elementType=Wu,J.lanes=Ie,J;case Xu:return J=t(13,he,te,Ae),J.elementType=Xu,J.lanes=Ie,J;case yc:return J=t(19,he,te,Ae),J.elementType=yc,J.lanes=Ie,J;case Hh:return cu(he,Ae,Ie,te);default:if(typeof J=="object"&&J!==null)switch(J.$$typeof){case du:case Na:je=10;break e;case Gh:je=9;break e;case pu:je=11;break e;case $u:je=14;break e;case Sa:je=16,me=null;break e}je=29,he=Error(y(130,J===null?"null":typeof J,"")),me=null}return te=t(je,he,te,Ae),te.elementType=J,te.type=me,te.lanes=Ie,te}function wr(J,te,he,me){return J=t(7,J,me,te),J.lanes=he,J}function cu(J,te,he,me){J=t(22,J,me,te),J.elementType=Hh,J.lanes=he;var Ae={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var Ie=Ae._current;if(Ie===null)throw Error(y(456));if((Ae._pendingVisibility&2)===0){var je=kt(Ie,2);je!==null&&(Ae._pendingVisibility|=2,rs(je,Ie,2))}},attach:function(){var Ie=Ae._current;if(Ie===null)throw Error(y(456));if((Ae._pendingVisibility&2)!==0){var je=kt(Ie,2);je!==null&&(Ae._pendingVisibility&=-3,rs(je,Ie,2))}}};return J.stateNode=Ae,J}function Hu(J,te,he){return J=t(6,J,null,te),J.lanes=he,J}function kh(J,te,he){return te=t(4,J.children!==null?J.children:[],J.key,te),te.lanes=he,te.stateNode={containerInfo:J.containerInfo,pendingChildren:null,implementation:J.implementation},te}function zd(J,te,he,me,Ae,Ie,je,lt){this.tag=1,this.containerInfo=J,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=rl,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=de(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=de(0),this.hiddenUpdates=de(null),this.identifierPrefix=me,this.onUncaughtError=Ae,this.onCaughtError=Ie,this.onRecoverableError=je,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=lt,this.incompleteTransitions=new Map}function Df(J,te,he,me,Ae,Ie,je,lt,qt,bn,zn,Yn){return J=new zd(J,te,he,je,lt,qt,bn,Yn),te=1,Ie===!0&&(te|=24),Ie=t(3,null,null,te),J.current=Ie,Ie.stateNode=J,te=Ni(),te.refCount++,J.pooledCache=te,te.refCount++,Ie.memoizedState={element:me,isDehydrated:he,cache:te},On(Ie),J}function qr(J){return J?(J=cl,J):cl}function ju(J){var te=J._reactInternals;if(te===void 0)throw typeof J.render=="function"?Error(y(188)):(J=Object.keys(J).join(","),Error(y(268,J)));return J=se(te),J=J!==null?le(J):null,J===null?null:Ec(J.stateNode)}function pc(J,te,he,me,Ae,Ie){Ae=qr(Ae),me.context===null?me.context=Ae:me.pendingContext=Ae,me=ei(te),me.payload={element:he},Ie=Ie===void 0?null:Ie,Ie!==null&&(me.callback=Ie),he=ti(J,me,te),he!==null&&(rs(he,J,te),Gn(he,J,te))}function mc(J,te){if(J=J.memoizedState,J!==null&&J.dehydrated!==null){var he=J.retryLane;J.retryLane=he!==0&&he<te?he:te}}function uu(J,te){mc(J,te),(J=J.alternate)&&mc(J,te)}var bi={},gc=requireReact(),Ks=requireScheduler$1(),qu=Object.assign,kd=Symbol.for("react.element"),hu=Symbol.for("react.transitional.element"),Ea=Symbol.for("react.portal"),il=Symbol.for("react.fragment"),fu=Symbol.for("react.strict_mode"),Wu=Symbol.for("react.profiler"),du=Symbol.for("react.provider"),Gh=Symbol.for("react.consumer"),Na=Symbol.for("react.context"),pu=Symbol.for("react.forward_ref"),Xu=Symbol.for("react.suspense"),yc=Symbol.for("react.suspense_list"),$u=Symbol.for("react.memo"),Sa=Symbol.for("react.lazy"),Hh=Symbol.for("react.offscreen"),Vf=Symbol.for("react.memo_cache_sentinel"),Ro=Symbol.iterator,jh=Symbol.for("react.client.reference"),yi=gc.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ja,Co,Vl=!1,_c=Array.isArray,qh=e.rendererVersion,mu=e.rendererPackageName,vc=e.extraDevToolsConfig,Ec=e.getPublicInstance,Lf=e.getRootHostContext,Sc=e.getChildHostContext,Ku=e.prepareForCommit,Of=e.resetAfterCommit,Wh=e.createInstance,gu=e.appendInitialChild,Po=e.finalizeInitialChildren,Ai=e.shouldSetTextContent,tr=e.createTextInstance,Wr=e.scheduleTimeout,Yu=e.cancelTimeout,rl=e.noTimeout,Rs=e.isPrimaryRenderer;e.warnsIfNotActing;var Kr=e.supportsMutation,xa=e.supportsPersistence,fs=e.supportsHydration,Nf=e.getInstanceFromNode;e.beforeActiveInstanceBlur,e.afterActiveInstanceBlur;var Br=e.preparePortalMount;e.prepareScopeUpdate,e.getInstanceFromScope;var vs=e.setCurrentUpdatePriority,wo=e.getCurrentUpdatePriority,Ff=e.resolveUpdatePriority;e.resolveEventType,e.resolveEventTimeStamp;var Bf=e.shouldAttemptEagerTransition,Gd=e.detachDeletedInstance;e.requestPostPaintCallback;var Xh=e.maySuspendCommit,Zu=e.preloadInstance,$h=e.startSuspendingCommit,Cs=e.suspendInstance,Xr=e.waitForCommitToBeReady,sl=e.NotPendingTransition,Fa=e.HostTransitionContext,Qu=e.resetFormInstance;e.bindToConsole;var Kh=e.supportsMicrotasks,Io=e.scheduleMicrotask,al=e.supportsTestSelectors,Yh=e.findFiberRoot,Zh=e.getBoundingRect,Uf=e.getTextContent,xc=e.isHiddenSubtree,zf=e.matchAccessibilityRole,kf=e.setFocusIfFocusable,Gf=e.setupIntersectionObserver,Hf=e.appendChild,Qh=e.appendChildToContainer,jf=e.commitTextUpdate,Hd=e.commitMount,qf=e.commitUpdate,Wf=e.insertBefore,Xf=e.insertInContainerBefore,Jh=e.removeChild,$f=e.removeChildFromContainer,ef=e.resetTextContent,Kf=e.hideInstance,Yf=e.hideTextInstance,Zf=e.unhideInstance,jd=e.unhideTextInstance,Qf=e.clearContainer,Tc=e.cloneInstance,yu=e.createContainerChildSet,tf=e.appendChildToContainerChildSet,Ju=e.finalizeContainerChildren,bc=e.replaceContainerChildren,nf=e.cloneHiddenInstance,rf=e.cloneHiddenTextInstance,eh=e.isSuspenseInstancePending,th=e.isSuspenseInstanceFallback,Jf=e.getSuspenseInstanceFallbackErrorDetails,ed=e.registerSuspenseInstanceRetry,sf=e.canHydrateFormStateMarker,td=e.isFormStateMarkerMatching,af=e.getNextHydratableSibling,nh=e.getFirstHydratableChild,nd=e.getFirstHydratableChildWithinContainer,rd=e.getFirstHydratableChildWithinSuspenseInstance,qd=e.canHydrateInstance,of=e.canHydrateTextInstance,sd=e.canHydrateSuspenseInstance,ad=e.hydrateInstance,lf=e.hydrateTextInstance,od=e.hydrateSuspenseInstance,ld=e.getNextHydratableInstanceAfterSuspenseInstance,Wd=e.commitHydratedContainer,Xd=e.commitHydratedSuspenseInstance,cd=e.clearSuspenseBoundary,_u=e.clearSuspenseBoundaryFromContainer,ih=e.shouldDeleteUnhydratedTailInstances;e.diffHydratedPropsForDevWarnings,e.diffHydratedTextForDevWarnings,e.describeHydratableInstanceForDevWarnings;var rh=e.validateHydratableInstance,ud=e.validateHydratableTextInstance,Ys=e.supportsResources,vu=e.isHostHoistableType,sh=e.getHoistableRoot,cf=e.getResource,hd=e.acquireResource,Ll=e.releaseResource,Eu=e.hydrateHoistable,Su=e.mountHoistable,Ac=e.unmountHoistable,ah=e.createHoistableInstance,fd=e.prepareToCommitHoistables,dd=e.mayResourceSuspendCommit,Ol=e.preloadResource,pd=e.suspendResource,rr=e.supportsSingletons,Ba=e.resolveSingletonInstance,ol=e.clearSingleton,md=e.acquireSingletonInstance,ll=e.releaseSingletonInstance,eo=e.isHostSingletonType,Ur=[],Do=-1,cl={},Ps=Math.clz32?Math.clz32:ve,gd=Math.log,yd=Math.LN2,to=128,Nl=4194304,xu=Ks.unstable_scheduleCallback,oh=Ks.unstable_cancelCallback,_d=Ks.unstable_shouldYield,lh=Ks.unstable_requestPaint,Ta=Ks.unstable_now,ch=Ks.unstable_ImmediatePriority,vd=Ks.unstable_UserBlockingPriority,uh=Ks.unstable_NormalPriority,$d=Ks.unstable_IdlePriority,Ed=Ks.log,ss=Ks.unstable_setDisableYieldValue,zr=null,ks=null,Gs=typeof Object.is=="function"?Object.is:De,uf=new WeakMap,Fl=[],Bl=0,Ul=null,Mc=0,Zs=[],Qs=0,ul=null,Ua=1,za="",Yr=oe(null),Rc=oe(null),no=oe(null),zl=oe(null),ds=null,ps=null,Gi=!1,ba=null,as=!1,Tu=Error(y(519)),Aa=[],kl=0,ka=0,bu=null,Vo=null,Gl=!1,lr=!1,hf=!1,Cc=0,Pc=null,Hl=0,Js=0,jl=null,Lo=!1,ql=!1,io=Object.prototype.hasOwnProperty,wc=Error(y(460)),Au=Error(y(474)),Mu={then:function(){}},hl=null,fl=null,dl=0,pl=Ci(!0),ro=Ci(!1),cr=oe(null),Ic=oe(0),ea=oe(null),sr=null,Zr=oe(0),Oo=0,wi=null,hi=null,Wi=null,Ma=!1,Wl=!1,ml=!1,hh=0,Xl=0,os=null,Ga=0,fh=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}},Ir={readContext:Lt,use:pn,useCallback:ji,useContext:ji,useEffect:ji,useImperativeHandle:ji,useLayoutEffect:ji,useInsertionEffect:ji,useMemo:ji,useReducer:ji,useRef:ji,useState:ji,useDebugValue:ji,useDeferredValue:ji,useTransition:ji,useSyncExternalStore:ji,useId:ji};Ir.useCacheRefresh=ji,Ir.useMemoCache=ji,Ir.useHostTransitionStatus=ji,Ir.useFormState=ji,Ir.useActionState=ji,Ir.useOptimistic=ji;var gl={readContext:Lt,use:pn,useCallback:function(J,te){return Ge().memoizedState=[J,te===void 0?null:te],J},useContext:Lt,useEffect:Ql,useImperativeHandle:function(J,te,he){he=he!=null?he.concat([J]):null,Tl(4194308,4,Xa.bind(null,te,J),he)},useLayoutEffect:function(J,te){return Tl(4194308,4,J,te)},useInsertionEffect:function(J,te){Tl(4,2,J,te)},useMemo:function(J,te){var he=Ge();te=te===void 0?null:te;var me=J();if(ml){Ce(!0);try{J()}finally{Ce(!1)}}return he.memoizedState=[me,te],me},useReducer:function(J,te,he){var me=Ge();if(he!==void 0){var Ae=he(te);if(ml){Ce(!0);try{he(te)}finally{Ce(!1)}}}else Ae=te;return me.memoizedState=me.baseState=Ae,J={pending:null,lanes:0,dispatch:null,lastRenderedReducer:J,lastRenderedState:Ae},me.queue=J,J=J.dispatch=mo.bind(null,wi,J),[me.memoizedState,J]},useRef:function(J){var te=Ge();return J={current:J},te.memoizedState=J},useState:function(J){J=Pi(J);var te=J.queue,he=ec.bind(null,wi,te);return te.dispatch=he,[J.memoizedState,he]},useDebugValue:wa,useDeferredValue:function(J,te){var he=Ge();return ca(he,J,te)},useTransition:function(){var J=Pi(!1);return J=zo.bind(null,wi,J.queue,!0,!1),Ge().memoizedState=J,[!1,J]},useSyncExternalStore:function(J,te,he){var me=wi,Ae=Ge();if(Gi){if(he===void 0)throw Error(y(407));he=he()}else{if(he=te(),Ji===null)throw Error(y(349));(Bi&60)!==0||si(me,te,he)}Ae.memoizedState=he;var Ie={value:he,getSnapshot:te};return Ae.queue=Ie,Ql(Mi.bind(null,me,Ie,J),[J]),me.flags|=2048,Lr(9,ii.bind(null,me,Ie,he,te),{destroy:void 0},null),he},useId:function(){var J=Ge(),te=Ji.identifierPrefix;if(Gi){var he=za,me=Ua;he=(me&~(1<<32-Ps(me)-1)).toString(32)+he,te=":"+te+"R"+he,he=hh++,0<he&&(te+="H"+he.toString(32)),te+=":"}else he=Ga++,te=":"+te+"r"+he.toString(32)+":";return J.memoizedState=te},useCacheRefresh:function(){return Ge().memoizedState=Go.bind(null,wi)}};gl.useMemoCache=Ot,gl.useHostTransitionStatus=Ls,gl.useFormState=qi,gl.useActionState=qi,gl.useOptimistic=function(J){var te=Ge();te.memoizedState=te.baseState=J;var he={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return te.queue=he,te=ha.bind(null,wi,!0,he),he.dispatch=te,[J,te]};var ws={readContext:Lt,use:pn,useCallback:$a,useContext:Lt,useEffect:Hc,useImperativeHandle:qs,useInsertionEffect:wu,useLayoutEffect:bl,useMemo:Jl,useReducer:jn,useRef:gs,useState:function(){return jn(Dn)},useDebugValue:wa,useDeferredValue:function(J,te){var he=Ct();return jc(he,hi.memoizedState,J,te)},useTransition:function(){var J=jn(Dn)[0],te=Ct().memoizedState;return[typeof J=="boolean"?J:dn(J),te]},useSyncExternalStore:ui,useId:ko};ws.useCacheRefresh=Ia,ws.useMemoCache=Ot,ws.useHostTransitionStatus=Ls,ws.useFormState=Pr,ws.useActionState=Pr,ws.useOptimistic=function(J,te){var he=Ct();return Ii(he,hi,J,te)};var ta={readContext:Lt,use:pn,useCallback:$a,useContext:Lt,useEffect:Hc,useImperativeHandle:qs,useInsertionEffect:wu,useLayoutEffect:bl,useMemo:Jl,useReducer:Zn,useRef:gs,useState:function(){return Zn(Dn)},useDebugValue:wa,useDeferredValue:function(J,te){var he=Ct();return hi===null?ca(he,J,te):jc(he,hi.memoizedState,J,te)},useTransition:function(){var J=Zn(Dn)[0],te=Ct().memoizedState;return[typeof J=="boolean"?J:dn(J),te]},useSyncExternalStore:ui,useId:ko};ta.useCacheRefresh=Ia,ta.useMemoCache=Ot,ta.useHostTransitionStatus=Ls,ta.useFormState=Tr,ta.useActionState=Tr,ta.useOptimistic=function(J,te){var he=Ct();return hi!==null?Ii(he,hi,J,te):(he.baseState=J,[J,he.queue.dispatch])};var so={isMounted:function(J){return(J=J._reactInternals)?ie(J)===J:!1},enqueueSetState:function(J,te,he){J=J._reactInternals;var me=Fr(),Ae=ei(me);Ae.payload=te,he!=null&&(Ae.callback=he),te=ti(J,Ae,me),te!==null&&(rs(te,J,me),Gn(te,J,me))},enqueueReplaceState:function(J,te,he){J=J._reactInternals;var me=Fr(),Ae=ei(me);Ae.tag=1,Ae.payload=te,he!=null&&(Ae.callback=he),te=ti(J,Ae,me),te!==null&&(rs(te,J,me),Gn(te,J,me))},enqueueForceUpdate:function(J,te){J=J._reactInternals;var he=Fr(),me=ei(he);me.tag=2,te!=null&&(me.callback=te),te=ti(J,me,he),te!==null&&(rs(te,J,he),Gn(te,J,he))}},dh=typeof reportError=="function"?reportError:function(J){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var te=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof J=="object"&&J!==null&&typeof J.message=="string"?String(J.message):String(J),error:J});if(!window.dispatchEvent(te))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",J);return}console.error(J)},ph=Error(y(461)),ar=!1,mh={dehydrated:null,treeContext:null,retryLane:0},No=oe(null),Ha=null,na=null,Dc=typeof AbortController<"u"?AbortController:function(){var J=[],te=this.signal={aborted:!1,addEventListener:function(he,me){J.push(me)}};this.abort=function(){te.aborted=!0,J.forEach(function(he){return he()})}},Sd=Ks.unstable_scheduleCallback,xd=Ks.unstable_NormalPriority,ur={$$typeof:Na,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},ff=yi.S;yi.S=function(J,te){typeof te=="object"&&te!==null&&typeof te.then=="function"&&Pn(J,te),ff!==null&&ff(J,te)};var ao=oe(null),oo=!1,Dr=!1,df=!1,Qi=typeof WeakSet=="function"?WeakSet:Set,xi=null,Di=!1,ci=null,Ri=!1,Rr=null,ia=8192,Vc={getCacheForType:function(J){var te=Lt(ur),he=te.data.get(J);return he===void 0&&(he=J(),te.data.set(J,he)),he}},Lc=0,Ra=1,gr=2,ja=3,lo=4;if(typeof Symbol=="function"&&Symbol.for){var $l=Symbol.for;Lc=$l("selector.component"),Ra=$l("selector.has_pseudo_class"),gr=$l("selector.role"),ja=$l("selector.test_id"),lo=$l("selector.text")}var Ca=typeof WeakMap=="function"?WeakMap:Map,Xi=0,Ji=null,fi=null,Bi=0,ir=0,Es=null,Pa=!1,ra=!1,Qr=!1,Ss=0,or=0,sa=0,Fo=0,Ru=0,aa=0,co=0,Kl=null,Vr=null,gh=!1,Is=0,Oc=1/0,Cu=null,yl=null,qa=!1,uo=null,Yl=0,_l=0,yh=null,Nc=0,_h=null;return bi.attemptContinuousHydration=function(J){if(J.tag===13){var te=kt(J,67108864);te!==null&&rs(te,J,67108864),uu(J,67108864)}},bi.attemptHydrationAtCurrentPriority=function(J){if(J.tag===13){var te=Fr(),he=kt(J,te);he!==null&&rs(he,J,te),uu(J,te)}},bi.attemptSynchronousHydration=function(J){switch(J.tag){case 3:if(J=J.stateNode,J.current.memoizedState.isDehydrated){var te=_e(J.pendingLanes);if(te!==0){for(J.pendingLanes|=2,J.entangledLanes|=2;te;){var he=1<<31-Ps(te);J.entanglements[1]|=he,te&=~he}Qt(J),(Xi&6)===0&&(Oc=Ta()+500,He(0))}}break;case 13:te=kt(J,2),te!==null&&rs(te,J,2),au(),uu(J,2)}},bi.batchedUpdates=function(J,te){return J(te)},bi.createComponentSelector=function(J){return{$$typeof:Lc,value:J}},bi.createContainer=function(J,te,he,me,Ae,Ie,je,lt,qt,bn){return Df(J,te,!1,null,he,me,Ie,je,lt,qt,bn,null)},bi.createHasPseudoClassSelector=function(J){return{$$typeof:Ra,value:J}},bi.createHydrationContainer=function(J,te,he,me,Ae,Ie,je,lt,qt,bn,zn,Yn,Jn){return J=Df(he,me,!0,J,Ae,Ie,lt,qt,bn,zn,Yn,Jn),J.context=qr(null),he=J.current,me=Fr(),Ae=ei(me),Ae.callback=te??null,ti(he,Ae,me),J.current.lanes=me,Me(J,me),Qt(J),J},bi.createPortal=function(J,te,he){var me=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ea,key:me==null?null:""+me,children:J,containerInfo:te,implementation:he}},bi.createRoleSelector=function(J){return{$$typeof:gr,value:J}},bi.createTestNameSelector=function(J){return{$$typeof:ja,value:J}},bi.createTextSelector=function(J){return{$$typeof:lo,value:J}},bi.defaultOnCaughtError=function(J){console.error(J)},bi.defaultOnRecoverableError=function(J){dh(J)},bi.defaultOnUncaughtError=function(J){dh(J)},bi.deferredUpdates=function(J){var te=yi.T,he=wo();try{return vs(32),yi.T=null,J()}finally{vs(he),yi.T=te}},bi.discreteUpdates=function(J,te,he,me,Ae){var Ie=yi.T,je=wo();try{return vs(2),yi.T=null,J(te,he,me,Ae)}finally{vs(je),yi.T=Ie,Xi===0&&(Oc=Ta()+500)}},bi.findAllNodes=ru,bi.findBoundingRects=function(J,te){if(!al)throw Error(y(363));te=ru(J,te),J=[];for(var he=0;he<te.length;he++)J.push(Zh(te[he]));for(te=J.length-1;0<te;te--){he=J[te];for(var me=he.x,Ae=me+he.width,Ie=he.y,je=Ie+he.height,lt=te-1;0<=lt;lt--)if(te!==lt){var qt=J[lt],bn=qt.x,zn=bn+qt.width,Yn=qt.y,Jn=Yn+qt.height;if(me>=bn&&Ie>=Yn&&Ae<=zn&&je<=Jn){J.splice(te,1);break}else if(me!==bn||he.width!==qt.width||Jn<Ie||Yn>je){if(!(Ie!==Yn||he.height!==qt.height||zn<me||bn>Ae)){bn>me&&(qt.width+=bn-me,qt.x=me),zn<Ae&&(qt.width=Ae-bn),J.splice(te,1);break}}else{Yn>Ie&&(qt.height+=Yn-Ie,qt.y=Ie),Jn<je&&(qt.height=je-Yn),J.splice(te,1);break}}}return J},bi.findHostInstance=ju,bi.findHostInstanceWithNoPortals=function(J){return J=se(J),J=J!==null?ce(J):null,J===null?null:Ec(J.stateNode)},bi.findHostInstanceWithWarning=function(J){return ju(J)},bi.flushPassiveEffects=Oa,bi.flushSyncFromReconciler=function(J){var te=Xi;Xi|=1;var he=yi.T,me=wo();try{if(vs(2),yi.T=null,J)return J()}finally{vs(me),yi.T=he,Xi=te,(Xi&6)===0&&He(0)}},bi.flushSyncWork=au,bi.focusWithin=function(J,te){if(!al)throw Error(y(363));for(J=uc(J),te=Us(J,te),te=Array.from(te),J=0;J<te.length;){var he=te[J++],me=he.tag;if(!xc(he)){if((me===5||me===26||me===27)&&kf(he.stateNode))return!0;for(he=he.child;he!==null;)te.push(he),he=he.sibling}}return!1},bi.getFindAllNodesFailureDescription=function(J,te){if(!al)throw Error(y(363));var he=0,me=[];J=[uc(J),0];for(var Ae=0;Ae<J.length;){var Ie=J[Ae++],je=Ie.tag,lt=J[Ae++],qt=te[lt];if((je!==5&&je!==26&&je!==27||!xc(Ie))&&(Zo(Ie,qt)&&(me.push(Lh(qt)),lt++,lt>he&&(he=lt)),lt<te.length))for(Ie=Ie.child;Ie!==null;)J.push(Ie,lt),Ie=Ie.sibling}if(he<te.length){for(J=[];he<te.length;he++)J.push(Lh(te[he]));return`findAllNodes was able to match part of the selector:
  `+(me.join(" > ")+`

No matching component was found for:
  `)+J.join(" > ")}return null},bi.getPublicRootInstance=function(J){if(J=J.current,!J.child)return null;switch(J.child.tag){case 27:case 5:return Ec(J.child.stateNode);default:return J.child.stateNode}},bi.injectIntoDevTools=function(){var J={bundleType:0,version:qh,rendererPackageName:mu,currentDispatcherRef:yi,findFiberByHostInstance:Nf,reconcilerVersion:"19.0.0"};if(vc!==null&&(J.rendererConfig=vc),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")J=!1;else{var te=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(te.isDisabled||!te.supportsFiber)J=!0;else{try{zr=te.inject(J),ks=te}catch{}J=!!te.checkDCE}}return J},bi.isAlreadyRendering=function(){return!1},bi.observeVisibleRects=function(J,te,he,me){if(!al)throw Error(y(363));J=ru(J,te);var Ae=Gf(J,he,me).disconnect;return{disconnect:function(){Ae()}}},bi.shouldError=function(){return null},bi.shouldSuspend=function(){return!1},bi.startHostTransition=function(J,te,he,me){if(J.tag!==5)throw Error(y(476));var Ae=ua(J).queue;zo(J,Ae,te,sl,he===null?o:function(){var Ie=ua(J).next.queue;return Os(J,Ie,{},Fr()),he(me)})},bi.updateContainer=function(J,te,he,me){var Ae=te.current,Ie=Fr();return pc(Ae,Ie,J,te,he,me),Ie},bi.updateContainerSync=function(J,te,he,me){return te.tag===0&&Oa(),pc(te.current,2,J,te,he,me),2},bi},r.exports.default=r.exports,Object.defineProperty(r.exports,"__esModule",{value:!0})}(reactReconciler_production)),reactReconciler_production.exports}var hasRequiredReactReconciler;function requireReactReconciler(){return hasRequiredReactReconciler||(hasRequiredReactReconciler=1,reactReconciler.exports=requireReactReconciler_production()),reactReconciler.exports}var reactReconcilerExports=requireReactReconciler();const Reconciler=getDefaultExportFromCjs(reactReconcilerExports);var scheduler={exports:{}},scheduler_production={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredScheduler_production;function requireScheduler_production(){return hasRequiredScheduler_production||(hasRequiredScheduler_production=1,function(r){function e(Ve,Ce){var De=Ve.length;Ve.push(Ce);e:for(;0<De;){var Oe=De-1>>>1,Te=Ve[Oe];if(0<y(Te,Ce))Ve[Oe]=Ce,Ve[De]=Te,De=Oe;else break e}}function t(Ve){return Ve.length===0?null:Ve[0]}function o(Ve){if(Ve.length===0)return null;var Ce=Ve[0],De=Ve.pop();if(De!==Ce){Ve[0]=De;e:for(var Oe=0,Te=Ve.length,Ne=Te>>>1;Oe<Ne;){var Ye=2*(Oe+1)-1,Qe=Ve[Ye],qe=Ye+1,Ze=Ve[qe];if(0>y(Qe,De))qe<Te&&0>y(Ze,Qe)?(Ve[Oe]=Ze,Ve[qe]=De,Oe=qe):(Ve[Oe]=Qe,Ve[Ye]=De,Oe=Ye);else if(qe<Te&&0>y(Ze,De))Ve[Oe]=Ze,Ve[qe]=De,Oe=qe;else break e}}return Ce}function y(Ve,Ce){var De=Ve.sortIndex-Ce.sortIndex;return De!==0?De:Ve.id-Ce.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var R=performance;r.unstable_now=function(){return R.now()}}else{var G=Date,K=G.now();r.unstable_now=function(){return G.now()-K}}var Y=[],Q=[],ee=1,ie=null,re=3,se=!1,le=!1,ce=!1,oe=typeof setTimeout=="function"?setTimeout:null,ue=typeof clearTimeout=="function"?clearTimeout:null,ge=typeof setImmediate<"u"?setImmediate:null;function ve(Ve){for(var Ce=t(Q);Ce!==null;){if(Ce.callback===null)o(Q);else if(Ce.startTime<=Ve)o(Q),Ce.sortIndex=Ce.expirationTime,e(Y,Ce);else break;Ce=t(Q)}}function _e(Ve){if(ce=!1,ve(Ve),!le)if(t(Y)!==null)le=!0,Ue();else{var Ce=t(Q);Ce!==null&&$e(_e,Ce.startTime-Ve)}}var be=!1,Re=-1,Se=5,Ee=-1;function ye(){return!(r.unstable_now()-Ee<Se)}function de(){if(be){var Ve=r.unstable_now();Ee=Ve;var Ce=!0;try{e:{le=!1,ce&&(ce=!1,ue(Re),Re=-1),se=!0;var De=re;try{t:{for(ve(Ve),ie=t(Y);ie!==null&&!(ie.expirationTime>Ve&&ye());){var Oe=ie.callback;if(typeof Oe=="function"){ie.callback=null,re=ie.priorityLevel;var Te=Oe(ie.expirationTime<=Ve);if(Ve=r.unstable_now(),typeof Te=="function"){ie.callback=Te,ve(Ve),Ce=!0;break t}ie===t(Y)&&o(Y),ve(Ve)}else o(Y);ie=t(Y)}if(ie!==null)Ce=!0;else{var Ne=t(Q);Ne!==null&&$e(_e,Ne.startTime-Ve),Ce=!1}}break e}finally{ie=null,re=De,se=!1}Ce=void 0}}finally{Ce?Me():be=!1}}}var Me;if(typeof ge=="function")Me=function(){ge(de)};else if(typeof MessageChannel<"u"){var Le=new MessageChannel,Pe=Le.port2;Le.port1.onmessage=de,Me=function(){Pe.postMessage(null)}}else Me=function(){oe(de,0)};function Ue(){be||(be=!0,Me())}function $e(Ve,Ce){Re=oe(function(){Ve(r.unstable_now())},Ce)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(Ve){Ve.callback=null},r.unstable_continueExecution=function(){le||se||(le=!0,Ue())},r.unstable_forceFrameRate=function(Ve){0>Ve||125<Ve?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Se=0<Ve?Math.floor(1e3/Ve):5},r.unstable_getCurrentPriorityLevel=function(){return re},r.unstable_getFirstCallbackNode=function(){return t(Y)},r.unstable_next=function(Ve){switch(re){case 1:case 2:case 3:var Ce=3;break;default:Ce=re}var De=re;re=Ce;try{return Ve()}finally{re=De}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(Ve,Ce){switch(Ve){case 1:case 2:case 3:case 4:case 5:break;default:Ve=3}var De=re;re=Ve;try{return Ce()}finally{re=De}},r.unstable_scheduleCallback=function(Ve,Ce,De){var Oe=r.unstable_now();switch(typeof De=="object"&&De!==null?(De=De.delay,De=typeof De=="number"&&0<De?Oe+De:Oe):De=Oe,Ve){case 1:var Te=-1;break;case 2:Te=250;break;case 5:Te=1073741823;break;case 4:Te=1e4;break;default:Te=5e3}return Te=De+Te,Ve={id:ee++,callback:Ce,priorityLevel:Ve,startTime:De,expirationTime:Te,sortIndex:-1},De>Oe?(Ve.sortIndex=De,e(Q,Ve),t(Y)===null&&Ve===t(Q)&&(ce?(ue(Re),Re=-1):ce=!0,$e(_e,De-Oe))):(Ve.sortIndex=Te,e(Y,Ve),le||se||(le=!0,Ue())),Ve},r.unstable_shouldYield=ye,r.unstable_wrapCallback=function(Ve){var Ce=re;return function(){var De=re;re=Ce;try{return Ve.apply(this,arguments)}finally{re=De}}}}(scheduler_production)),scheduler_production}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler.exports=requireScheduler_production()),scheduler.exports}var schedulerExports=requireScheduler();const isPromise=r=>typeof r=="object"&&typeof r.then=="function",globalCache=[];function shallowEqualArrays(r,e,t=(o,y)=>o===y){if(r===e)return!0;if(!r||!e)return!1;const o=r.length;if(e.length!==o)return!1;for(let y=0;y<o;y++)if(!t(r[y],e[y]))return!1;return!0}function query(r,e=null,t=!1,o={}){e===null&&(e=[r]);for(const R of globalCache)if(shallowEqualArrays(e,R.keys,R.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(R,"error"))throw R.error;if(Object.prototype.hasOwnProperty.call(R,"response"))return o.lifespan&&o.lifespan>0&&(R.timeout&&clearTimeout(R.timeout),R.timeout=setTimeout(R.remove,o.lifespan)),R.response;if(!t)throw R.promise}const y={keys:e,equal:o.equal,remove:()=>{const R=globalCache.indexOf(y);R!==-1&&globalCache.splice(R,1)},promise:(isPromise(r)?r:r(...e)).then(R=>{y.response=R,o.lifespan&&o.lifespan>0&&(y.timeout=setTimeout(y.remove,o.lifespan))}).catch(R=>y.error=R)};if(globalCache.push(y),!t)throw y.promise}const suspend=(r,e,t)=>query(r,e,!1,t),preload=(r,e,t)=>void query(r,e,!0,t),clear=r=>{if(r===void 0||r.length===0)globalCache.splice(0,globalCache.length);else{const e=globalCache.find(t=>shallowEqualArrays(r,t.keys,t.equal));e&&e.remove()}};function i$1(r,e,t){if(!r)return;if(t(r)===!0)return r;let o=e?r.return:r.child;for(;o;){const y=i$1(o,e,t);if(y)return y;o=e?null:o.sibling}}function l(r){try{return Object.defineProperties(r,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return r}}const a=l(reactExports.createContext(null));class m extends reactExports.Component{render(){return reactExports.createElement(a.Provider,{value:this._reactInternals},this.props.children)}}function c(){const r=reactExports.useContext(a);if(r===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=reactExports.useId();return reactExports.useMemo(()=>{for(const t of[r,r==null?void 0:r.alternate]){if(!t)continue;const o=i$1(t,!1,y=>{let R=y.memoizedState;for(;R;){if(R.memoizedState===e)return!0;R=R.next}});if(o)return o}},[r,e])}const p=Symbol.for("react.context"),b=r=>r!==null&&typeof r=="object"&&"$$typeof"in r&&r.$$typeof===p;function h(){const r=c(),[e]=reactExports.useState(()=>new Map);e.clear();let t=r;for(;t;){const o=t.type;b(o)&&o!==a&&!e.has(o)&&e.set(o,reactExports.use(l(o))),t=t.return}return e}function x$1(){const r=h();return reactExports.useMemo(()=>Array.from(r.keys()).reduce((e,t)=>o=>reactExports.createElement(e,null,reactExports.createElement(t.Provider,{...o,value:r.get(t)})),e=>reactExports.createElement(m,{...e})),[r])}function findInitialRoot(r){let e=r.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const isOrthographicCamera=r=>r&&r.isOrthographicCamera,isRef=r=>r&&r.hasOwnProperty("current"),isColorRepresentation=r=>r!=null&&(typeof r=="string"||typeof r=="number"||r.isColor),useIsomorphicLayoutEffect$1=((r,e)=>typeof window<"u"&&(((r=window.document)==null?void 0:r.createElement)||((e=window.navigator)==null?void 0:e.product)==="ReactNative"))()?reactExports.useLayoutEffect:reactExports.useEffect;function useMutableCallback(r){const e=reactExports.useRef(r);return useIsomorphicLayoutEffect$1(()=>void(e.current=r),[r]),e}function useBridge(){const r=c(),e=x$1();return reactExports.useMemo(()=>({children:t})=>{const y=!!i$1(r,!0,R=>R.type===reactExports.StrictMode)?reactExports.StrictMode:reactExports.Fragment;return jsxRuntimeExports.jsx(y,{children:jsxRuntimeExports.jsx(e,{children:t})})},[r,e])}function Block({set:r}){return useIsomorphicLayoutEffect$1(()=>(r(new Promise(()=>null)),()=>r(!1)),[r]),null}const ErrorBoundary=(r=>(r=class extends reactExports.Component{constructor(...t){super(...t),this.state={error:!1}}componentDidCatch(t){this.props.set(t)}render(){return this.state.error?null:this.props.children}},r.getDerivedStateFromError=()=>({error:!0}),r))();function calculateDpr(r){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(r)?Math.min(Math.max(r[0],t),r[1]):r}function getRootState(r){var e;return(e=r.__r3f)==null?void 0:e.root.getState()}const is={obj:r=>r===Object(r)&&!is.arr(r)&&typeof r!="function",fun:r=>typeof r=="function",str:r=>typeof r=="string",num:r=>typeof r=="number",boo:r=>typeof r=="boolean",und:r=>r===void 0,nul:r=>r===null,arr:r=>Array.isArray(r),equ(r,e,{arrays:t="shallow",objects:o="reference",strict:y=!0}={}){if(typeof r!=typeof e||!!r!=!!e)return!1;if(is.str(r)||is.num(r)||is.boo(r))return r===e;const R=is.obj(r);if(R&&o==="reference")return r===e;const G=is.arr(r);if(G&&t==="reference")return r===e;if((G||R)&&r===e)return!0;let K;for(K in r)if(!(K in e))return!1;if(R&&t==="shallow"&&o==="shallow"){for(K in y?e:r)if(!is.equ(r[K],e[K],{strict:y,objects:"reference"}))return!1}else for(K in y?e:r)if(r[K]!==e[K])return!1;if(is.und(K)){if(G&&r.length===0&&e.length===0||R&&Object.keys(r).length===0&&Object.keys(e).length===0)return!0;if(r!==e)return!1}return!0}};function buildGraph(r){const e={nodes:{},materials:{},meshes:{}};return r&&r.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material),t.isMesh&&!e.meshes[t.name]&&(e.meshes[t.name]=t)}),e}function dispose(r){r.type!=="Scene"&&(r.dispose==null||r.dispose());for(const e in r){const t=r[e];(t==null?void 0:t.type)!=="Scene"&&(t==null||t.dispose==null||t.dispose())}}const REACT_INTERNAL_PROPS=["children","key","ref"];function getInstanceProps(r){const e={};for(const t in r)REACT_INTERNAL_PROPS.includes(t)||(e[t]=r[t]);return e}function prepare(r,e,t,o){const y=r;let R=y==null?void 0:y.__r3f;return R||(R={root:e,type:t,parent:null,children:[],props:getInstanceProps(o),object:y,eventCount:0,handlers:{},isHidden:!1},y&&(y.__r3f=R)),R}function resolve(r,e){let t=r[e];if(!e.includes("-"))return{root:r,key:e,target:t};t=r;for(const y of e.split("-")){var o;e=y,r=t,t=(o=t)==null?void 0:o[e]}return{root:r,key:e,target:t}}const INDEX_REGEX=/-\d+$/;function attach(r,e){if(is.str(e.props.attach)){if(INDEX_REGEX.test(e.props.attach)){const y=e.props.attach.replace(INDEX_REGEX,""),{root:R,key:G}=resolve(r.object,y);Array.isArray(R[G])||(R[G]=[])}const{root:t,key:o}=resolve(r.object,e.props.attach);e.previousAttach=t[o],t[o]=e.object}else is.fun(e.props.attach)&&(e.previousAttach=e.props.attach(r.object,e.object))}function detach(r,e){if(is.str(e.props.attach)){const{root:t,key:o}=resolve(r.object,e.props.attach),y=e.previousAttach;y===void 0?delete t[o]:t[o]=y}else e.previousAttach==null||e.previousAttach(r.object,e.object);delete e.previousAttach}const RESERVED_PROPS=[...REACT_INTERNAL_PROPS,"args","dispose","attach","object","onUpdate","dispose"],MEMOIZED_PROTOTYPES=new Map;function getMemoizedPrototype(r){let e=MEMOIZED_PROTOTYPES.get(r.constructor);try{e||(e=new r.constructor,MEMOIZED_PROTOTYPES.set(r.constructor,e))}catch{}return e}function diffProps(r,e){const t={};for(const o in e)if(!RESERVED_PROPS.includes(o)&&!is.equ(e[o],r.props[o])){t[o]=e[o];for(const y in e)y.startsWith(`${o}-`)&&(t[y]=e[y])}for(const o in r.props){if(RESERVED_PROPS.includes(o)||e.hasOwnProperty(o))continue;const{root:y,key:R}=resolve(r.object,o);if(y.constructor&&y.constructor.length===0){const G=getMemoizedPrototype(y);is.und(G)||(t[R]=G[R])}else t[R]=0}return t}const colorMaps=["map","emissiveMap","sheenColorMap","specularColorMap","envMap"],EVENT_REGEX=/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/;function applyProps(r,e){var t;const o=r.__r3f,y=o&&findInitialRoot(o).getState(),R=o==null?void 0:o.eventCount;for(const K in e){let Y=e[K];if(RESERVED_PROPS.includes(K))continue;if(o&&EVENT_REGEX.test(K)){typeof Y=="function"?o.handlers[K]=Y:delete o.handlers[K],o.eventCount=Object.keys(o.handlers).length;continue}if(Y===void 0)continue;let{root:Q,key:ee,target:ie}=resolve(r,K);if(ie instanceof Layers&&Y instanceof Layers)ie.mask=Y.mask;else if(ie instanceof Color&&isColorRepresentation(Y))ie.set(Y);else if(ie!==null&&typeof ie=="object"&&typeof ie.set=="function"&&typeof ie.copy=="function"&&Y!=null&&Y.constructor&&ie.constructor===Y.constructor)ie.copy(Y);else if(ie!==null&&typeof ie=="object"&&typeof ie.set=="function"&&Array.isArray(Y))typeof ie.fromArray=="function"?ie.fromArray(Y):ie.set(...Y);else if(ie!==null&&typeof ie=="object"&&typeof ie.set=="function"&&typeof Y=="number")typeof ie.setScalar=="function"?ie.setScalar(Y):ie.set(Y);else{var G;Q[ee]=Y,y&&!y.linear&&colorMaps.includes(ee)&&(G=Q[ee])!=null&&G.isTexture&&Q[ee].format===RGBAFormat&&Q[ee].type===UnsignedByteType&&(Q[ee].colorSpace=SRGBColorSpace)}}if(o!=null&&o.parent&&y!=null&&y.internal&&(t=o.object)!=null&&t.isObject3D&&R!==o.eventCount){const K=o.object,Y=y.internal.interaction.indexOf(K);Y>-1&&y.internal.interaction.splice(Y,1),o.eventCount&&K.raycast!==null&&y.internal.interaction.push(K)}return o&&o.props.attach===void 0&&(o.object.isBufferGeometry?o.props.attach="geometry":o.object.isMaterial&&(o.props.attach="material")),o&&invalidateInstance(o),r}function invalidateInstance(r){var e;if(!r.parent)return;r.props.onUpdate==null||r.props.onUpdate(r.object);const t=(e=r.root)==null||e.getState==null?void 0:e.getState();t&&t.internal.frames===0&&t.invalidate()}function updateCamera(r,e){r.manual||(isOrthographicCamera(r)?(r.left=e.width/-2,r.right=e.width/2,r.top=e.height/2,r.bottom=e.height/-2):r.aspect=e.width/e.height,r.updateProjectionMatrix())}const isObject3D=r=>r==null?void 0:r.isObject3D;function makeId(r){return(r.eventObject||r.object).uuid+"/"+r.index+r.instanceId}function releaseInternalPointerCapture(r,e,t,o){const y=t.get(e);y&&(t.delete(e),t.size===0&&(r.delete(o),y.target.releasePointerCapture(o)))}function removeInteractivity(r,e){const{internal:t}=r.getState();t.interaction=t.interaction.filter(o=>o!==e),t.initialHits=t.initialHits.filter(o=>o!==e),t.hovered.forEach((o,y)=>{(o.eventObject===e||o.object===e)&&t.hovered.delete(y)}),t.capturedMap.forEach((o,y)=>{releaseInternalPointerCapture(t.capturedMap,e,o,y)})}function createEvents(r){function e(Y){const{internal:Q}=r.getState(),ee=Y.offsetX-Q.initialClick[0],ie=Y.offsetY-Q.initialClick[1];return Math.round(Math.sqrt(ee*ee+ie*ie))}function t(Y){return Y.filter(Q=>["Move","Over","Enter","Out","Leave"].some(ee=>{var ie;return(ie=Q.__r3f)==null?void 0:ie.handlers["onPointer"+ee]}))}function o(Y,Q){const ee=r.getState(),ie=new Set,re=[],se=Q?Q(ee.internal.interaction):ee.internal.interaction;for(let ue=0;ue<se.length;ue++){const ge=getRootState(se[ue]);ge&&(ge.raycaster.camera=void 0)}ee.previousRoot||ee.events.compute==null||ee.events.compute(Y,ee);function le(ue){const ge=getRootState(ue);if(!ge||!ge.events.enabled||ge.raycaster.camera===null)return[];if(ge.raycaster.camera===void 0){var ve;ge.events.compute==null||ge.events.compute(Y,ge,(ve=ge.previousRoot)==null?void 0:ve.getState()),ge.raycaster.camera===void 0&&(ge.raycaster.camera=null)}return ge.raycaster.camera?ge.raycaster.intersectObject(ue,!0):[]}let ce=se.flatMap(le).sort((ue,ge)=>{const ve=getRootState(ue.object),_e=getRootState(ge.object);return!ve||!_e?ue.distance-ge.distance:_e.events.priority-ve.events.priority||ue.distance-ge.distance}).filter(ue=>{const ge=makeId(ue);return ie.has(ge)?!1:(ie.add(ge),!0)});ee.events.filter&&(ce=ee.events.filter(ce,ee));for(const ue of ce){let ge=ue.object;for(;ge;){var oe;(oe=ge.__r3f)!=null&&oe.eventCount&&re.push({...ue,eventObject:ge}),ge=ge.parent}}if("pointerId"in Y&&ee.internal.capturedMap.has(Y.pointerId))for(let ue of ee.internal.capturedMap.get(Y.pointerId).values())ie.has(makeId(ue.intersection))||re.push(ue.intersection);return re}function y(Y,Q,ee,ie){if(Y.length){const re={stopped:!1};for(const se of Y){let le=getRootState(se.object);if(le||se.object.traverseAncestors(ce=>{const oe=getRootState(ce);if(oe)return le=oe,!1}),le){const{raycaster:ce,pointer:oe,camera:ue,internal:ge}=le,ve=new Vector3(oe.x,oe.y,0).unproject(ue),_e=ye=>{var de,Me;return(de=(Me=ge.capturedMap.get(ye))==null?void 0:Me.has(se.eventObject))!=null?de:!1},be=ye=>{const de={intersection:se,target:Q.target};ge.capturedMap.has(ye)?ge.capturedMap.get(ye).set(se.eventObject,de):ge.capturedMap.set(ye,new Map([[se.eventObject,de]])),Q.target.setPointerCapture(ye)},Re=ye=>{const de=ge.capturedMap.get(ye);de&&releaseInternalPointerCapture(ge.capturedMap,se.eventObject,de,ye)};let Se={};for(let ye in Q){let de=Q[ye];typeof de!="function"&&(Se[ye]=de)}let Ee={...se,...Se,pointer:oe,intersections:Y,stopped:re.stopped,delta:ee,unprojectedPoint:ve,ray:ce.ray,camera:ue,stopPropagation(){const ye="pointerId"in Q&&ge.capturedMap.get(Q.pointerId);if((!ye||ye.has(se.eventObject))&&(Ee.stopped=re.stopped=!0,ge.hovered.size&&Array.from(ge.hovered.values()).find(de=>de.eventObject===se.eventObject))){const de=Y.slice(0,Y.indexOf(se));R([...de,se])}},target:{hasPointerCapture:_e,setPointerCapture:be,releasePointerCapture:Re},currentTarget:{hasPointerCapture:_e,setPointerCapture:be,releasePointerCapture:Re},nativeEvent:Q};if(ie(Ee),re.stopped===!0)break}}}return Y}function R(Y){const{internal:Q}=r.getState();for(const ee of Q.hovered.values())if(!Y.length||!Y.find(ie=>ie.object===ee.object&&ie.index===ee.index&&ie.instanceId===ee.instanceId)){const re=ee.eventObject.__r3f;if(Q.hovered.delete(makeId(ee)),re!=null&&re.eventCount){const se=re.handlers,le={...ee,intersections:Y};se.onPointerOut==null||se.onPointerOut(le),se.onPointerLeave==null||se.onPointerLeave(le)}}}function G(Y,Q){for(let ee=0;ee<Q.length;ee++){const ie=Q[ee].__r3f;ie==null||ie.handlers.onPointerMissed==null||ie.handlers.onPointerMissed(Y)}}function K(Y){switch(Y){case"onPointerLeave":case"onPointerCancel":return()=>R([]);case"onLostPointerCapture":return Q=>{const{internal:ee}=r.getState();"pointerId"in Q&&ee.capturedMap.has(Q.pointerId)&&requestAnimationFrame(()=>{ee.capturedMap.has(Q.pointerId)&&(ee.capturedMap.delete(Q.pointerId),R([]))})}}return function(ee){const{onPointerMissed:ie,internal:re}=r.getState();re.lastEvent.current=ee;const se=Y==="onPointerMove",le=Y==="onClick"||Y==="onContextMenu"||Y==="onDoubleClick",oe=o(ee,se?t:void 0),ue=le?e(ee):0;Y==="onPointerDown"&&(re.initialClick=[ee.offsetX,ee.offsetY],re.initialHits=oe.map(ve=>ve.eventObject)),le&&!oe.length&&ue<=2&&(G(ee,re.interaction),ie&&ie(ee)),se&&R(oe);function ge(ve){const _e=ve.eventObject,be=_e.__r3f;if(!(be!=null&&be.eventCount))return;const Re=be.handlers;if(se){if(Re.onPointerOver||Re.onPointerEnter||Re.onPointerOut||Re.onPointerLeave){const Se=makeId(ve),Ee=re.hovered.get(Se);Ee?Ee.stopped&&ve.stopPropagation():(re.hovered.set(Se,ve),Re.onPointerOver==null||Re.onPointerOver(ve),Re.onPointerEnter==null||Re.onPointerEnter(ve))}Re.onPointerMove==null||Re.onPointerMove(ve)}else{const Se=Re[Y];Se?(!le||re.initialHits.includes(_e))&&(G(ee,re.interaction.filter(Ee=>!re.initialHits.includes(Ee))),Se(ve)):le&&re.initialHits.includes(_e)&&G(ee,re.interaction.filter(Ee=>!re.initialHits.includes(Ee)))}}y(oe,ee,ue,ge)}}return{handlePointer:K}}const isRenderer=r=>!!(r!=null&&r.render),context=reactExports.createContext(null),createStore=(r,e)=>{const t=createWithEqualityFn((K,Y)=>{const Q=new Vector3,ee=new Vector3,ie=new Vector3;function re(ue=Y().camera,ge=ee,ve=Y().size){const{width:_e,height:be,top:Re,left:Se}=ve,Ee=_e/be;ge.isVector3?ie.copy(ge):ie.set(...ge);const ye=ue.getWorldPosition(Q).distanceTo(ie);if(isOrthographicCamera(ue))return{width:_e/ue.zoom,height:be/ue.zoom,top:Re,left:Se,factor:1,distance:ye,aspect:Ee};{const de=ue.fov*Math.PI/180,Me=2*Math.tan(de/2)*ye,Le=Me*(_e/be);return{width:Le,height:Me,top:Re,left:Se,factor:_e/Le,distance:ye,aspect:Ee}}}let se;const le=ue=>K(ge=>({performance:{...ge.performance,current:ue}})),ce=new Vector2;return{set:K,get:Y,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},scene:null,xr:null,invalidate:(ue=1)=>r(Y(),ue),advance:(ue,ge)=>e(ue,ge,Y()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new Clock,pointer:ce,mouse:ce,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const ue=Y();se&&clearTimeout(se),ue.performance.current!==ue.performance.min&&le(ue.performance.min),se=setTimeout(()=>le(Y().performance.max),ue.performance.debounce)}},size:{width:0,height:0,top:0,left:0},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:re},setEvents:ue=>K(ge=>({...ge,events:{...ge.events,...ue}})),setSize:(ue,ge,ve=0,_e=0)=>{const be=Y().camera,Re={width:ue,height:ge,top:ve,left:_e};K(Se=>({size:Re,viewport:{...Se.viewport,...re(be,ee,Re)}}))},setDpr:ue=>K(ge=>{const ve=calculateDpr(ue);return{viewport:{...ge.viewport,dpr:ve,initialDpr:ge.viewport.initialDpr||ve}}}),setFrameloop:(ue="always")=>{const ge=Y().clock;ge.stop(),ge.elapsedTime=0,ue!=="never"&&(ge.start(),ge.elapsedTime=0),K(()=>({frameloop:ue}))},previousRoot:void 0,internal:{interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,lastEvent:reactExports.createRef(),active:!1,frames:0,priority:0,subscribe:(ue,ge,ve)=>{const _e=Y().internal;return _e.priority=_e.priority+(ge>0?1:0),_e.subscribers.push({ref:ue,priority:ge,store:ve}),_e.subscribers=_e.subscribers.sort((be,Re)=>be.priority-Re.priority),()=>{const be=Y().internal;be!=null&&be.subscribers&&(be.priority=be.priority-(ge>0?1:0),be.subscribers=be.subscribers.filter(Re=>Re.ref!==ue))}}}}}),o=t.getState();let y=o.size,R=o.viewport.dpr,G=o.camera;return t.subscribe(()=>{const{camera:K,size:Y,viewport:Q,gl:ee,set:ie}=t.getState();if(Y.width!==y.width||Y.height!==y.height||Q.dpr!==R){y=Y,R=Q.dpr,updateCamera(K,Y),Q.dpr>0&&ee.setPixelRatio(Q.dpr);const re=typeof HTMLCanvasElement<"u"&&ee.domElement instanceof HTMLCanvasElement;ee.setSize(Y.width,Y.height,re)}K!==G&&(G=K,ie(re=>({viewport:{...re.viewport,...re.viewport.getCurrentViewport(K)}})))}),t.subscribe(K=>r(K)),t};function useStore(){const r=reactExports.useContext(context);if(!r)throw new Error("R3F: Hooks can only be used within the Canvas component!");return r}function useThree(r=t=>t,e){return useStore()(r,e)}function useFrame(r,e=0){const t=useStore(),o=t.getState().internal.subscribe,y=useMutableCallback(r);return useIsomorphicLayoutEffect$1(()=>o(y,e,t),[e,o,t]),null}const memoizedLoaders=new WeakMap,isConstructor$1=r=>{var e;return typeof r=="function"&&(r==null||(e=r.prototype)==null?void 0:e.constructor)===r};function loadingFn(r,e){return function(t,...o){let y;return isConstructor$1(t)?(y=memoizedLoaders.get(t),y||(y=new t,memoizedLoaders.set(t,y))):y=t,r&&r(y),Promise.all(o.map(R=>new Promise((G,K)=>y.load(R,Y=>{isObject3D(Y==null?void 0:Y.scene)&&Object.assign(Y,buildGraph(Y.scene)),G(Y)},e,Y=>K(new Error(`Could not load ${R}: ${Y==null?void 0:Y.message}`))))))}}function useLoader(r,e,t,o){const y=Array.isArray(e)?e:[e],R=suspend(loadingFn(t,o),[r,...y],{equal:is.equ});return Array.isArray(e)?R:R[0]}useLoader.preload=function(r,e,t){const o=Array.isArray(e)?e:[e];return preload(loadingFn(t),[r,...o])};useLoader.clear=function(r,e){const t=Array.isArray(e)?e:[e];return clear([r,...t])};function createReconciler(r){const e=Reconciler(r);return e.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:reactExports.version}),e}const NoEventPriority=0,catalogue={},PREFIX_REGEX=/^three(?=[A-Z])/,toPascalCase=r=>`${r[0].toUpperCase()}${r.slice(1)}`;let i=0;const isConstructor=r=>typeof r=="function";function extend(r){if(isConstructor(r)){const e=`${i++}`;return catalogue[e]=r,e}else Object.assign(catalogue,r)}function validateInstance(r,e){const t=toPascalCase(r),o=catalogue[t];if(r!=="primitive"&&!o)throw new Error(`R3F: ${t} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(r==="primitive"&&!e.object)throw new Error("R3F: Primitives without 'object' are invalid!");if(e.args!==void 0&&!Array.isArray(e.args))throw new Error("R3F: The args prop must be an array!")}function createInstance(r,e,t){var o;return r=toPascalCase(r)in catalogue?r:r.replace(PREFIX_REGEX,""),validateInstance(r,e),r==="primitive"&&(o=e.object)!=null&&o.__r3f&&delete e.object.__r3f,prepare(e.object,t,r,e)}function hideInstance(r){if(!r.isHidden){var e;r.props.attach&&(e=r.parent)!=null&&e.object?detach(r.parent,r):isObject3D(r.object)&&(r.object.visible=!1),r.isHidden=!0,invalidateInstance(r)}}function unhideInstance(r){if(r.isHidden){var e;r.props.attach&&(e=r.parent)!=null&&e.object?attach(r.parent,r):isObject3D(r.object)&&r.props.visible!==!1&&(r.object.visible=!0),r.isHidden=!1,invalidateInstance(r)}}function handleContainerEffects(r,e,t){const o=e.root.getState();if(!(!r.parent&&r.object!==o.scene)){if(!e.object){var y,R;const G=catalogue[toPascalCase(e.type)];e.object=(y=e.props.object)!=null?y:new G(...(R=e.props.args)!=null?R:[]),e.object.__r3f=e}if(applyProps(e.object,e.props),e.props.attach)attach(r,e);else if(isObject3D(e.object)&&isObject3D(r.object)){const G=r.object.children.indexOf(t==null?void 0:t.object);if(t&&G!==-1){const K=r.object.children.indexOf(e.object);if(K!==-1){r.object.children.splice(K,1);const Y=K<G?G-1:G;r.object.children.splice(Y,0,e.object)}else e.object.parent=r.object,r.object.children.splice(G,0,e.object),e.object.dispatchEvent({type:"added"}),r.object.dispatchEvent({type:"childadded",child:e.object})}else r.object.add(e.object)}for(const G of e.children)handleContainerEffects(e,G);invalidateInstance(e)}}function appendChild(r,e){e&&(e.parent=r,r.children.push(e),handleContainerEffects(r,e))}function insertBefore(r,e,t){if(!e||!t)return;e.parent=r;const o=r.children.indexOf(t);o!==-1?r.children.splice(o,0,e):r.children.push(e),handleContainerEffects(r,e,t)}function disposeOnIdle(r){if(typeof r.dispose=="function"){const e=()=>{try{r.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT<"u"?e():schedulerExports.unstable_scheduleCallback(schedulerExports.unstable_IdlePriority,e)}}function removeChild(r,e,t){if(!e)return;e.parent=null;const o=r.children.indexOf(e);o!==-1&&r.children.splice(o,1),e.props.attach?detach(r,e):isObject3D(e.object)&&isObject3D(r.object)&&(r.object.remove(e.object),removeInteractivity(findInitialRoot(e),e.object));const y=e.props.dispose!==null&&t!==!1;for(let R=e.children.length-1;R>=0;R--){const G=e.children[R];removeChild(e,G,y)}e.children.length=0,delete e.object.__r3f,y&&e.type!=="primitive"&&e.object.type!=="Scene"&&disposeOnIdle(e.object),t===void 0&&invalidateInstance(e)}function setFiberRef(r,e){for(const t of[r,r.alternate])if(t!==null)if(typeof t.ref=="function"){t.refCleanup==null||t.refCleanup();const o=t.ref(e);typeof o=="function"&&(t.refCleanup=o)}else t.ref&&(t.ref.current=e)}const reconstructed=[];function swapInstances(){for(const[t]of reconstructed){const o=t.parent;if(o){t.props.attach?detach(o,t):isObject3D(t.object)&&isObject3D(o.object)&&o.object.remove(t.object);for(const y of t.children)y.props.attach?detach(t,y):isObject3D(y.object)&&isObject3D(t.object)&&t.object.remove(y.object)}t.isHidden&&unhideInstance(t),t.object.__r3f&&delete t.object.__r3f,t.type!=="primitive"&&disposeOnIdle(t.object)}for(const[t,o,y]of reconstructed){t.props=o;const R=t.parent;if(R){var r,e;const G=catalogue[toPascalCase(t.type)];t.object=(r=t.props.object)!=null?r:new G(...(e=t.props.args)!=null?e:[]),t.object.__r3f=t,setFiberRef(y,t.object),applyProps(t.object,t.props),t.props.attach?attach(R,t):isObject3D(t.object)&&isObject3D(R.object)&&R.object.add(t.object);for(const K of t.children)K.props.attach?attach(t,K):isObject3D(K.object)&&isObject3D(t.object)&&t.object.add(K.object);invalidateInstance(t)}}reconstructed.length=0}const handleTextInstance=()=>{},NO_CONTEXT={};let currentUpdatePriority=NoEventPriority;const NoFlags=0,Update=4,reconciler=createReconciler({isPrimaryRenderer:!1,warnsIfNotActing:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,createInstance,removeChild,appendChild,appendInitialChild:appendChild,insertBefore,appendChildToContainer(r,e){const t=r.getState().scene.__r3f;!e||!t||appendChild(t,e)},removeChildFromContainer(r,e){const t=r.getState().scene.__r3f;!e||!t||removeChild(t,e)},insertInContainerBefore(r,e,t){const o=r.getState().scene.__r3f;!e||!t||!o||insertBefore(o,e,t)},getRootHostContext:()=>NO_CONTEXT,getChildHostContext:()=>NO_CONTEXT,commitUpdate(r,e,t,o,y){var R,G,K;validateInstance(e,o);let Y=!1;if((r.type==="primitive"&&t.object!==o.object||((R=o.args)==null?void 0:R.length)!==((G=t.args)==null?void 0:G.length)||(K=o.args)!=null&&K.some((ee,ie)=>{var re;return ee!==((re=t.args)==null?void 0:re[ie])}))&&(Y=!0),Y)reconstructed.push([r,{...o},y]);else{const ee=diffProps(r,o);Object.keys(ee).length&&(Object.assign(r.props,ee),applyProps(r.object,ee))}(y.sibling===null||(y.flags&Update)===NoFlags)&&swapInstances()},finalizeInitialChildren:()=>!1,commitMount(){},getPublicInstance:r=>r==null?void 0:r.object,prepareForCommit:()=>null,preparePortalMount:r=>prepare(r.getState().scene,r,"",{}),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance,unhideInstance,createTextInstance:handleTextInstance,hideTextInstance:handleTextInstance,unhideTextInstance:handleTextInstance,scheduleTimeout:typeof setTimeout=="function"?setTimeout:void 0,cancelTimeout:typeof clearTimeout=="function"?clearTimeout:void 0,noTimeout:-1,getInstanceFromNode:()=>null,beforeActiveInstanceBlur(){},afterActiveInstanceBlur(){},detachDeletedInstance(){},prepareScopeUpdate(){},getInstanceFromScope:()=>null,shouldAttemptEagerTransition:()=>!1,trackSchedulerEvent:()=>{},resolveEventType:()=>null,resolveEventTimeStamp:()=>-1.1,requestPostPaintCallback(){},maySuspendCommit:()=>!1,preloadInstance:()=>!0,startSuspendingCommit(){},suspendInstance(){},waitForCommitToBeReady:()=>null,NotPendingTransition:null,HostTransitionContext:reactExports.createContext(null),setCurrentUpdatePriority(r){currentUpdatePriority=r},getCurrentUpdatePriority(){return currentUpdatePriority},resolveUpdatePriority(){var r;if(currentUpdatePriority!==NoEventPriority)return currentUpdatePriority;switch(typeof window<"u"&&((r=window.event)==null?void 0:r.type)){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return constantsExports.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return constantsExports.ContinuousEventPriority;default:return constantsExports.DefaultEventPriority}},resetFormInstance(){}}),_roots=new Map,shallowLoose={objects:"shallow",strict:!1};function computeInitialSize(r,e){if(!e&&typeof HTMLCanvasElement<"u"&&r instanceof HTMLCanvasElement&&r.parentElement){const{width:t,height:o,top:y,left:R}=r.parentElement.getBoundingClientRect();return{width:t,height:o,top:y,left:R}}else if(!e&&typeof OffscreenCanvas<"u"&&r instanceof OffscreenCanvas)return{width:r.width,height:r.height,top:0,left:0};return{width:0,height:0,top:0,left:0,...e}}function createRoot(r){const e=_roots.get(r),t=e==null?void 0:e.fiber,o=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const y=typeof reportError=="function"?reportError:console.error,R=o||createStore(invalidate,advance),G=t||reconciler.createContainer(R,constantsExports.ConcurrentRoot,null,!1,null,"",y,y,y,null);e||_roots.set(r,{fiber:G,store:R});let K,Y,Q=!1,ee=null;return{async configure(ie={}){let re;ee=new Promise(Ne=>re=Ne);let{gl:se,size:le,scene:ce,events:oe,onCreated:ue,shadows:ge=!1,linear:ve=!1,flat:_e=!1,legacy:be=!1,orthographic:Re=!1,frameloop:Se="always",dpr:Ee=[1,2],performance:ye,raycaster:de,camera:Me,onPointerMissed:Le}=ie,Pe=R.getState(),Ue=Pe.gl;if(!Pe.gl){const Ne={canvas:r,powerPreference:"high-performance",antialias:!0,alpha:!0},Ye=typeof se=="function"?await se(Ne):se;isRenderer(Ye)?Ue=Ye:Ue=new WebGLRenderer({...Ne,...se}),Pe.set({gl:Ue})}let $e=Pe.raycaster;$e||Pe.set({raycaster:$e=new Raycaster});const{params:Ve,...Ce}=de||{};if(is.equ(Ce,$e,shallowLoose)||applyProps($e,{...Ce}),is.equ(Ve,$e.params,shallowLoose)||applyProps($e,{params:{...$e.params,...Ve}}),!Pe.camera||Pe.camera===Y&&!is.equ(Y,Me,shallowLoose)){Y=Me;const Ne=Me==null?void 0:Me.isCamera,Ye=Ne?Me:Re?new OrthographicCamera(0,0,0,0,.1,1e3):new PerspectiveCamera(75,0,.1,1e3);Ne||(Ye.position.z=5,Me&&(applyProps(Ye,Me),Ye.manual||("aspect"in Me||"left"in Me||"right"in Me||"bottom"in Me||"top"in Me)&&(Ye.manual=!0,Ye.updateProjectionMatrix())),!Pe.camera&&!(Me!=null&&Me.rotation)&&Ye.lookAt(0,0,0)),Pe.set({camera:Ye}),$e.camera=Ye}if(!Pe.scene){let Ne;ce!=null&&ce.isScene?(Ne=ce,prepare(Ne,R,"",{})):(Ne=new Scene,prepare(Ne,R,"",{}),ce&&applyProps(Ne,ce)),Pe.set({scene:Ne})}oe&&!Pe.events.handlers&&Pe.set({events:oe(R)});const De=computeInitialSize(r,le);if(is.equ(De,Pe.size,shallowLoose)||Pe.setSize(De.width,De.height,De.top,De.left),Ee&&Pe.viewport.dpr!==calculateDpr(Ee)&&Pe.setDpr(Ee),Pe.frameloop!==Se&&Pe.setFrameloop(Se),Pe.onPointerMissed||Pe.set({onPointerMissed:Le}),ye&&!is.equ(ye,Pe.performance,shallowLoose)&&Pe.set(Ne=>({performance:{...Ne.performance,...ye}})),!Pe.xr){var Oe;const Ne=(qe,Ze)=>{const ct=R.getState();ct.frameloop!=="never"&&advance(qe,!0,ct,Ze)},Ye=()=>{const qe=R.getState();qe.gl.xr.enabled=qe.gl.xr.isPresenting,qe.gl.xr.setAnimationLoop(qe.gl.xr.isPresenting?Ne:null),qe.gl.xr.isPresenting||invalidate(qe)},Qe={connect(){const qe=R.getState().gl;qe.xr.addEventListener("sessionstart",Ye),qe.xr.addEventListener("sessionend",Ye)},disconnect(){const qe=R.getState().gl;qe.xr.removeEventListener("sessionstart",Ye),qe.xr.removeEventListener("sessionend",Ye)}};typeof((Oe=Ue.xr)==null?void 0:Oe.addEventListener)=="function"&&Qe.connect(),Pe.set({xr:Qe})}if(Ue.shadowMap){const Ne=Ue.shadowMap.enabled,Ye=Ue.shadowMap.type;if(Ue.shadowMap.enabled=!!ge,is.boo(ge))Ue.shadowMap.type=PCFSoftShadowMap;else if(is.str(ge)){var Te;const Qe={basic:BasicShadowMap,percentage:PCFShadowMap,soft:PCFSoftShadowMap,variance:VSMShadowMap};Ue.shadowMap.type=(Te=Qe[ge])!=null?Te:PCFSoftShadowMap}else is.obj(ge)&&Object.assign(Ue.shadowMap,ge);(Ne!==Ue.shadowMap.enabled||Ye!==Ue.shadowMap.type)&&(Ue.shadowMap.needsUpdate=!0)}return ColorManagement.enabled=!be,Q||(Ue.outputColorSpace=ve?LinearSRGBColorSpace:SRGBColorSpace,Ue.toneMapping=_e?NoToneMapping:ACESFilmicToneMapping),Pe.legacy!==be&&Pe.set(()=>({legacy:be})),Pe.linear!==ve&&Pe.set(()=>({linear:ve})),Pe.flat!==_e&&Pe.set(()=>({flat:_e})),se&&!is.fun(se)&&!isRenderer(se)&&!is.equ(se,Ue,shallowLoose)&&applyProps(Ue,se),K=ue,Q=!0,re(),this},render(ie){return!Q&&!ee&&this.configure(),ee.then(()=>{reconciler.updateContainer(jsxRuntimeExports.jsx(Provider$1,{store:R,children:ie,onCreated:K,rootElement:r}),G,null,()=>{})}),R},unmount(){unmountComponentAtNode(r)}}}function Provider$1({store:r,children:e,onCreated:t,rootElement:o}){return useIsomorphicLayoutEffect$1(()=>{const y=r.getState();y.set(R=>({internal:{...R.internal,active:!0}})),t&&t(y),r.getState().events.connected||y.events.connect==null||y.events.connect(o)},[]),jsxRuntimeExports.jsx(context.Provider,{value:r,children:e})}function unmountComponentAtNode(r,e){const t=_roots.get(r),o=t==null?void 0:t.fiber;if(o){const y=t==null?void 0:t.store.getState();y&&(y.internal.active=!1),reconciler.updateContainer(null,o,null,()=>{y&&setTimeout(()=>{try{var R,G,K,Y;y.events.disconnect==null||y.events.disconnect(),(R=y.gl)==null||(G=R.renderLists)==null||G.dispose==null||G.dispose(),(K=y.gl)==null||K.forceContextLoss==null||K.forceContextLoss(),(Y=y.gl)!=null&&Y.xr&&y.xr.disconnect(),dispose(y.scene),_roots.delete(r)}catch{}},500)})}}const globalEffects=new Set,globalAfterEffects=new Set,globalTailEffects=new Set;function run(r,e){if(r.size)for(const{callback:t}of r.values())t(e)}function flushGlobalEffects(r,e){switch(r){case"before":return run(globalEffects,e);case"after":return run(globalAfterEffects,e);case"tail":return run(globalTailEffects,e)}}let subscribers,subscription;function update(r,e,t){let o=e.clock.getDelta();e.frameloop==="never"&&typeof r=="number"&&(o=r-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=r),subscribers=e.internal.subscribers;for(let y=0;y<subscribers.length;y++)subscription=subscribers[y],subscription.ref.current(subscription.store.getState(),o,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}let running=!1,useFrameInProgress=!1,repeat,frame$1,state;function loop(r){frame$1=requestAnimationFrame(loop),running=!0,repeat=0,flushGlobalEffects("before",r),useFrameInProgress=!0;for(const t of _roots.values()){var e;state=t.store.getState(),state.internal.active&&(state.frameloop==="always"||state.internal.frames>0)&&!((e=state.gl.xr)!=null&&e.isPresenting)&&(repeat+=update(r,state))}if(useFrameInProgress=!1,flushGlobalEffects("after",r),repeat===0)return flushGlobalEffects("tail",r),running=!1,cancelAnimationFrame(frame$1)}function invalidate(r,e=1){var t;if(!r)return _roots.forEach(o=>invalidate(o.store.getState(),e));(t=r.gl.xr)!=null&&t.isPresenting||!r.internal.active||r.frameloop==="never"||(e>1?r.internal.frames=Math.min(60,r.internal.frames+e):useFrameInProgress?r.internal.frames=2:r.internal.frames=1,running||(running=!0,requestAnimationFrame(loop)))}function advance(r,e=!0,t,o){if(e&&flushGlobalEffects("before",r),t)update(r,t,o);else for(const y of _roots.values())update(r,y.store.getState());e&&flushGlobalEffects("after",r)}const DOM_EVENTS={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function createPointerEvents(r){const{handlePointer:e}=createEvents(r);return{priority:1,enabled:!0,compute(t,o,y){o.pointer.set(t.offsetX/o.size.width*2-1,-(t.offsetY/o.size.height)*2+1),o.raycaster.setFromCamera(o.pointer,o.camera)},connected:void 0,handlers:Object.keys(DOM_EVENTS).reduce((t,o)=>({...t,[o]:e(o)}),{}),update:()=>{var t;const{events:o,internal:y}=r.getState();(t=y.lastEvent)!=null&&t.current&&o.handlers&&o.handlers.onPointerMove(y.lastEvent.current)},connect:t=>{const{set:o,events:y}=r.getState();if(y.disconnect==null||y.disconnect(),o(R=>({events:{...R.events,connected:t}})),y.handlers)for(const R in y.handlers){const G=y.handlers[R],[K,Y]=DOM_EVENTS[R];t.addEventListener(K,G,{passive:Y})}},disconnect:()=>{const{set:t,events:o}=r.getState();if(o.connected){if(o.handlers)for(const y in o.handlers){const R=o.handlers[y],[G]=DOM_EVENTS[y];o.connected.removeEventListener(G,R)}t(y=>({events:{...y.events,connected:void 0}}))}}}}function g(r,e){let t;return(...o)=>{window.clearTimeout(t),t=window.setTimeout(()=>r(...o),e)}}function j({debounce:r,scroll:e,polyfill:t,offsetSize:o}={debounce:0,scroll:!1,offsetSize:!1}){const y=t||(typeof window>"u"?class{}:window.ResizeObserver);if(!y)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[R,G]=reactExports.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),K=reactExports.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:R,orientationHandler:null}),Y=r?typeof r=="number"?r:r.scroll:null,Q=r?typeof r=="number"?r:r.resize:null,ee=reactExports.useRef(!1);reactExports.useEffect(()=>(ee.current=!0,()=>void(ee.current=!1)));const[ie,re,se]=reactExports.useMemo(()=>{const ue=()=>{if(!K.current.element)return;const{left:ge,top:ve,width:_e,height:be,bottom:Re,right:Se,x:Ee,y:ye}=K.current.element.getBoundingClientRect(),de={left:ge,top:ve,width:_e,height:be,bottom:Re,right:Se,x:Ee,y:ye};K.current.element instanceof HTMLElement&&o&&(de.height=K.current.element.offsetHeight,de.width=K.current.element.offsetWidth),Object.freeze(de),ee.current&&!D$1(K.current.lastBounds,de)&&G(K.current.lastBounds=de)};return[ue,Q?g(ue,Q):ue,Y?g(ue,Y):ue]},[G,o,Y,Q]);function le(){K.current.scrollContainers&&(K.current.scrollContainers.forEach(ue=>ue.removeEventListener("scroll",se,!0)),K.current.scrollContainers=null),K.current.resizeObserver&&(K.current.resizeObserver.disconnect(),K.current.resizeObserver=null),K.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",K.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",K.current.orientationHandler))}function ce(){K.current.element&&(K.current.resizeObserver=new y(se),K.current.resizeObserver.observe(K.current.element),e&&K.current.scrollContainers&&K.current.scrollContainers.forEach(ue=>ue.addEventListener("scroll",se,{capture:!0,passive:!0})),K.current.orientationHandler=()=>{se()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",K.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",K.current.orientationHandler))}const oe=ue=>{!ue||ue===K.current.element||(le(),K.current.element=ue,K.current.scrollContainers=E(ue),ce())};return X(se,!!e),W(re),reactExports.useEffect(()=>{le(),ce()},[e,se,re]),reactExports.useEffect(()=>le,[]),[oe,R,ie]}function W(r){reactExports.useEffect(()=>{const e=r;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[r])}function X(r,e){reactExports.useEffect(()=>{if(e){const t=r;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[r,e])}function E(r){const e=[];if(!r||r===document.body)return e;const{overflow:t,overflowX:o,overflowY:y}=window.getComputedStyle(r);return[t,o,y].some(R=>R==="auto"||R==="scroll")&&e.push(r),[...e,...E(r.parentElement)]}const k=["x","y","top","bottom","left","right","width","height"],D$1=(r,e)=>k.every(t=>r[t]===e[t]);function CanvasImpl({ref:r,children:e,fallback:t,resize:o,style:y,gl:R,events:G=createPointerEvents,eventSource:K,eventPrefix:Y,shadows:Q,linear:ee,flat:ie,legacy:re,orthographic:se,frameloop:le,dpr:ce,performance:oe,raycaster:ue,camera:ge,scene:ve,onPointerMissed:_e,onCreated:be,...Re}){reactExports.useMemo(()=>extend(THREE),[]);const Se=useBridge(),[Ee,ye]=j({scroll:!0,debounce:{scroll:50,resize:0},...o}),de=reactExports.useRef(null),Me=reactExports.useRef(null);reactExports.useImperativeHandle(r,()=>de.current);const Le=useMutableCallback(_e),[Pe,Ue]=reactExports.useState(!1),[$e,Ve]=reactExports.useState(!1);if(Pe)throw Pe;if($e)throw $e;const Ce=reactExports.useRef(null);useIsomorphicLayoutEffect$1(()=>{const Oe=de.current;if(ye.width>0&&ye.height>0&&Oe){Ce.current||(Ce.current=createRoot(Oe));async function Te(){await Ce.current.configure({gl:R,scene:ve,events:G,shadows:Q,linear:ee,flat:ie,legacy:re,orthographic:se,frameloop:le,dpr:ce,performance:oe,raycaster:ue,camera:ge,size:ye,onPointerMissed:(...Ne)=>Le.current==null?void 0:Le.current(...Ne),onCreated:Ne=>{Ne.events.connect==null||Ne.events.connect(K?isRef(K)?K.current:K:Me.current),Y&&Ne.setEvents({compute:(Ye,Qe)=>{const qe=Ye[Y+"X"],Ze=Ye[Y+"Y"];Qe.pointer.set(qe/Qe.size.width*2-1,-(Ze/Qe.size.height)*2+1),Qe.raycaster.setFromCamera(Qe.pointer,Qe.camera)}}),be==null||be(Ne)}}),Ce.current.render(jsxRuntimeExports.jsx(Se,{children:jsxRuntimeExports.jsx(ErrorBoundary,{set:Ve,children:jsxRuntimeExports.jsx(reactExports.Suspense,{fallback:jsxRuntimeExports.jsx(Block,{set:Ue}),children:e??null})})}))}Te()}}),reactExports.useEffect(()=>{const Oe=de.current;if(Oe)return()=>unmountComponentAtNode(Oe)},[]);const De=K?"none":"auto";return jsxRuntimeExports.jsx("div",{ref:Me,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:De,...y},...Re,children:jsxRuntimeExports.jsx("div",{ref:Ee,style:{width:"100%",height:"100%"},children:jsxRuntimeExports.jsx("canvas",{ref:de,style:{display:"block"},children:t})})})}function Canvas(r){return jsxRuntimeExports.jsx(m,{children:jsxRuntimeExports.jsx(CanvasImpl,{...r})})}function _extends(){return _extends=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var o in t)({}).hasOwnProperty.call(t,o)&&(r[o]=t[o])}return r},_extends.apply(null,arguments)}var __defProp$1=Object.defineProperty,__defNormalProp$1=(r,e,t)=>e in r?__defProp$1(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,__publicField$1=(r,e,t)=>(__defNormalProp$1(r,e+"",t),t);class EventDispatcher{constructor(){__publicField$1(this,"_listeners")}addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const o=this._listeners;o[e]===void 0&&(o[e]=[]),o[e].indexOf(t)===-1&&o[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const o=this._listeners;return o[e]!==void 0&&o[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const y=this._listeners[e];if(y!==void 0){const R=y.indexOf(t);R!==-1&&y.splice(R,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const o=this._listeners[e.type];if(o!==void 0){e.target=this;const y=o.slice(0);for(let R=0,G=y.length;R<G;R++)y[R].call(this,e);e.target=null}}}var __defProp=Object.defineProperty,__defNormalProp=(r,e,t)=>e in r?__defProp(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,__publicField=(r,e,t)=>(__defNormalProp(r,typeof e!="symbol"?e+"":e,t),t);const _ray=new Ray,_plane=new Plane,TILT_LIMIT=Math.cos(70*(Math.PI/180)),moduloWrapAround=(r,e)=>(r%e+e)%e;let OrbitControls$1=class extends EventDispatcher{constructor(e,t){super(),__publicField(this,"object"),__publicField(this,"domElement"),__publicField(this,"enabled",!0),__publicField(this,"target",new Vector3),__publicField(this,"minDistance",0),__publicField(this,"maxDistance",1/0),__publicField(this,"minZoom",0),__publicField(this,"maxZoom",1/0),__publicField(this,"minPolarAngle",0),__publicField(this,"maxPolarAngle",Math.PI),__publicField(this,"minAzimuthAngle",-1/0),__publicField(this,"maxAzimuthAngle",1/0),__publicField(this,"enableDamping",!1),__publicField(this,"dampingFactor",.05),__publicField(this,"enableZoom",!0),__publicField(this,"zoomSpeed",1),__publicField(this,"enableRotate",!0),__publicField(this,"rotateSpeed",1),__publicField(this,"enablePan",!0),__publicField(this,"panSpeed",1),__publicField(this,"screenSpacePanning",!0),__publicField(this,"keyPanSpeed",7),__publicField(this,"zoomToCursor",!1),__publicField(this,"autoRotate",!1),__publicField(this,"autoRotateSpeed",2),__publicField(this,"reverseOrbit",!1),__publicField(this,"reverseHorizontalOrbit",!1),__publicField(this,"reverseVerticalOrbit",!1),__publicField(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),__publicField(this,"mouseButtons",{LEFT:MOUSE.ROTATE,MIDDLE:MOUSE.DOLLY,RIGHT:MOUSE.PAN}),__publicField(this,"touches",{ONE:TOUCH.ROTATE,TWO:TOUCH.DOLLY_PAN}),__publicField(this,"target0"),__publicField(this,"position0"),__publicField(this,"zoom0"),__publicField(this,"_domElementKeyEvents",null),__publicField(this,"getPolarAngle"),__publicField(this,"getAzimuthalAngle"),__publicField(this,"setPolarAngle"),__publicField(this,"setAzimuthalAngle"),__publicField(this,"getDistance"),__publicField(this,"getZoomScale"),__publicField(this,"listenToKeyEvents"),__publicField(this,"stopListenToKeyEvents"),__publicField(this,"saveState"),__publicField(this,"reset"),__publicField(this,"update"),__publicField(this,"connect"),__publicField(this,"dispose"),__publicField(this,"dollyIn"),__publicField(this,"dollyOut"),__publicField(this,"getScale"),__publicField(this,"setScale"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>ee.phi,this.getAzimuthalAngle=()=>ee.theta,this.setPolarAngle=yt=>{let xn=moduloWrapAround(yt,2*Math.PI),Xn=ee.phi;Xn<0&&(Xn+=2*Math.PI),xn<0&&(xn+=2*Math.PI);let pt=Math.abs(xn-Xn);2*Math.PI-pt<pt&&(xn<Xn?xn+=2*Math.PI:Xn+=2*Math.PI),ie.phi=xn-Xn,o.update()},this.setAzimuthalAngle=yt=>{let xn=moduloWrapAround(yt,2*Math.PI),Xn=ee.theta;Xn<0&&(Xn+=2*Math.PI),xn<0&&(xn+=2*Math.PI);let pt=Math.abs(xn-Xn);2*Math.PI-pt<pt&&(xn<Xn?xn+=2*Math.PI:Xn+=2*Math.PI),ie.theta=xn-Xn,o.update()},this.getDistance=()=>o.object.position.distanceTo(o.target),this.listenToKeyEvents=yt=>{yt.addEventListener("keydown",Pn),this._domElementKeyEvents=yt},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",Pn),this._domElementKeyEvents=null},this.saveState=()=>{o.target0.copy(o.target),o.position0.copy(o.object.position),o.zoom0=o.object.zoom},this.reset=()=>{o.target.copy(o.target0),o.object.position.copy(o.position0),o.object.zoom=o.zoom0,o.object.updateProjectionMatrix(),o.dispatchEvent(y),o.update(),Y=K.NONE},this.update=(()=>{const yt=new Vector3,xn=new Vector3(0,1,0),Xn=new Quaternion().setFromUnitVectors(e.up,xn),pt=Xn.clone().invert(),Nn=new Vector3,gn=new Quaternion,Tn=2*Math.PI;return function(){const Hn=o.object.position;Xn.setFromUnitVectors(e.up,xn),pt.copy(Xn).invert(),yt.copy(Hn).sub(o.target),yt.applyQuaternion(Xn),ee.setFromVector3(yt),o.autoRotate&&Y===K.NONE&&Ue(Le()),o.enableDamping?(ee.theta+=ie.theta*o.dampingFactor,ee.phi+=ie.phi*o.dampingFactor):(ee.theta+=ie.theta,ee.phi+=ie.phi);let ri=o.minAzimuthAngle,Ei=o.maxAzimuthAngle;isFinite(ri)&&isFinite(Ei)&&(ri<-Math.PI?ri+=Tn:ri>Math.PI&&(ri-=Tn),Ei<-Math.PI?Ei+=Tn:Ei>Math.PI&&(Ei-=Tn),ri<=Ei?ee.theta=Math.max(ri,Math.min(Ei,ee.theta)):ee.theta=ee.theta>(ri+Ei)/2?Math.max(ri,ee.theta):Math.min(Ei,ee.theta)),ee.phi=Math.max(o.minPolarAngle,Math.min(o.maxPolarAngle,ee.phi)),ee.makeSafe(),o.enableDamping===!0?o.target.addScaledVector(se,o.dampingFactor):o.target.add(se),o.zoomToCursor&&ye||o.object.isOrthographicCamera?ee.radius=Qe(ee.radius):ee.radius=Qe(ee.radius*re),yt.setFromSpherical(ee),yt.applyQuaternion(pt),Hn.copy(o.target).add(yt),o.object.matrixAutoUpdate||o.object.updateMatrix(),o.object.lookAt(o.target),o.enableDamping===!0?(ie.theta*=1-o.dampingFactor,ie.phi*=1-o.dampingFactor,se.multiplyScalar(1-o.dampingFactor)):(ie.set(0,0,0),se.set(0,0,0));let Hi=!1;if(o.zoomToCursor&&ye){let gi=null;if(o.object instanceof PerspectiveCamera&&o.object.isPerspectiveCamera){const vr=yt.length();gi=Qe(vr*re);const Ci=vr-gi;o.object.position.addScaledVector(Se,Ci),o.object.updateMatrixWorld()}else if(o.object.isOrthographicCamera){const vr=new Vector3(Ee.x,Ee.y,0);vr.unproject(o.object),o.object.zoom=Math.max(o.minZoom,Math.min(o.maxZoom,o.object.zoom/re)),o.object.updateProjectionMatrix(),Hi=!0;const Ci=new Vector3(Ee.x,Ee.y,0);Ci.unproject(o.object),o.object.position.sub(Ci).add(vr),o.object.updateMatrixWorld(),gi=yt.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),o.zoomToCursor=!1;gi!==null&&(o.screenSpacePanning?o.target.set(0,0,-1).transformDirection(o.object.matrix).multiplyScalar(gi).add(o.object.position):(_ray.origin.copy(o.object.position),_ray.direction.set(0,0,-1).transformDirection(o.object.matrix),Math.abs(o.object.up.dot(_ray.direction))<TILT_LIMIT?e.lookAt(o.target):(_plane.setFromNormalAndCoplanarPoint(o.object.up,o.target),_ray.intersectPlane(_plane,o.target))))}else o.object instanceof OrthographicCamera&&o.object.isOrthographicCamera&&(Hi=re!==1,Hi&&(o.object.zoom=Math.max(o.minZoom,Math.min(o.maxZoom,o.object.zoom/re)),o.object.updateProjectionMatrix()));return re=1,ye=!1,Hi||Nn.distanceToSquared(o.object.position)>Q||8*(1-gn.dot(o.object.quaternion))>Q?(o.dispatchEvent(y),Nn.copy(o.object.position),gn.copy(o.object.quaternion),Hi=!1,!0):!1}})(),this.connect=yt=>{o.domElement=yt,o.domElement.style.touchAction="none",o.domElement.addEventListener("contextmenu",On),o.domElement.addEventListener("pointerdown",ze),o.domElement.addEventListener("pointercancel",hn),o.domElement.addEventListener("wheel",Cn)},this.dispose=()=>{var yt,xn,Xn,pt,Nn,gn;o.domElement&&(o.domElement.style.touchAction="auto"),(yt=o.domElement)==null||yt.removeEventListener("contextmenu",On),(xn=o.domElement)==null||xn.removeEventListener("pointerdown",ze),(Xn=o.domElement)==null||Xn.removeEventListener("pointercancel",hn),(pt=o.domElement)==null||pt.removeEventListener("wheel",Cn),(Nn=o.domElement)==null||Nn.ownerDocument.removeEventListener("pointermove",Mt),(gn=o.domElement)==null||gn.ownerDocument.removeEventListener("pointerup",hn),o._domElementKeyEvents!==null&&o._domElementKeyEvents.removeEventListener("keydown",Pn)};const o=this,y={type:"change"},R={type:"start"},G={type:"end"},K={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let Y=K.NONE;const Q=1e-6,ee=new Spherical,ie=new Spherical;let re=1;const se=new Vector3,le=new Vector2,ce=new Vector2,oe=new Vector2,ue=new Vector2,ge=new Vector2,ve=new Vector2,_e=new Vector2,be=new Vector2,Re=new Vector2,Se=new Vector3,Ee=new Vector2;let ye=!1;const de=[],Me={};function Le(){return 2*Math.PI/60/60*o.autoRotateSpeed}function Pe(){return Math.pow(.95,o.zoomSpeed)}function Ue(yt){o.reverseOrbit||o.reverseHorizontalOrbit?ie.theta+=yt:ie.theta-=yt}function $e(yt){o.reverseOrbit||o.reverseVerticalOrbit?ie.phi+=yt:ie.phi-=yt}const Ve=(()=>{const yt=new Vector3;return function(Xn,pt){yt.setFromMatrixColumn(pt,0),yt.multiplyScalar(-Xn),se.add(yt)}})(),Ce=(()=>{const yt=new Vector3;return function(Xn,pt){o.screenSpacePanning===!0?yt.setFromMatrixColumn(pt,1):(yt.setFromMatrixColumn(pt,0),yt.crossVectors(o.object.up,yt)),yt.multiplyScalar(Xn),se.add(yt)}})(),De=(()=>{const yt=new Vector3;return function(Xn,pt){const Nn=o.domElement;if(Nn&&o.object instanceof PerspectiveCamera&&o.object.isPerspectiveCamera){const gn=o.object.position;yt.copy(gn).sub(o.target);let Tn=yt.length();Tn*=Math.tan(o.object.fov/2*Math.PI/180),Ve(2*Xn*Tn/Nn.clientHeight,o.object.matrix),Ce(2*pt*Tn/Nn.clientHeight,o.object.matrix)}else Nn&&o.object instanceof OrthographicCamera&&o.object.isOrthographicCamera?(Ve(Xn*(o.object.right-o.object.left)/o.object.zoom/Nn.clientWidth,o.object.matrix),Ce(pt*(o.object.top-o.object.bottom)/o.object.zoom/Nn.clientHeight,o.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),o.enablePan=!1)}})();function Oe(yt){o.object instanceof PerspectiveCamera&&o.object.isPerspectiveCamera||o.object instanceof OrthographicCamera&&o.object.isOrthographicCamera?re=yt:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),o.enableZoom=!1)}function Te(yt){Oe(re/yt)}function Ne(yt){Oe(re*yt)}function Ye(yt){if(!o.zoomToCursor||!o.domElement)return;ye=!0;const xn=o.domElement.getBoundingClientRect(),Xn=yt.clientX-xn.left,pt=yt.clientY-xn.top,Nn=xn.width,gn=xn.height;Ee.x=Xn/Nn*2-1,Ee.y=-(pt/gn)*2+1,Se.set(Ee.x,Ee.y,1).unproject(o.object).sub(o.object.position).normalize()}function Qe(yt){return Math.max(o.minDistance,Math.min(o.maxDistance,yt))}function qe(yt){le.set(yt.clientX,yt.clientY)}function Ze(yt){Ye(yt),_e.set(yt.clientX,yt.clientY)}function ct(yt){ue.set(yt.clientX,yt.clientY)}function xt(yt){ce.set(yt.clientX,yt.clientY),oe.subVectors(ce,le).multiplyScalar(o.rotateSpeed);const xn=o.domElement;xn&&(Ue(2*Math.PI*oe.x/xn.clientHeight),$e(2*Math.PI*oe.y/xn.clientHeight)),le.copy(ce),o.update()}function un(yt){be.set(yt.clientX,yt.clientY),Re.subVectors(be,_e),Re.y>0?Te(Pe()):Re.y<0&&Ne(Pe()),_e.copy(be),o.update()}function Vn(yt){ge.set(yt.clientX,yt.clientY),ve.subVectors(ge,ue).multiplyScalar(o.panSpeed),De(ve.x,ve.y),ue.copy(ge),o.update()}function In(yt){Ye(yt),yt.deltaY<0?Ne(Pe()):yt.deltaY>0&&Te(Pe()),o.update()}function Un(yt){let xn=!1;switch(yt.code){case o.keys.UP:De(0,o.keyPanSpeed),xn=!0;break;case o.keys.BOTTOM:De(0,-o.keyPanSpeed),xn=!0;break;case o.keys.LEFT:De(o.keyPanSpeed,0),xn=!0;break;case o.keys.RIGHT:De(-o.keyPanSpeed,0),xn=!0;break}xn&&(yt.preventDefault(),o.update())}function kn(){if(de.length==1)le.set(de[0].pageX,de[0].pageY);else{const yt=.5*(de[0].pageX+de[1].pageX),xn=.5*(de[0].pageY+de[1].pageY);le.set(yt,xn)}}function Ln(){if(de.length==1)ue.set(de[0].pageX,de[0].pageY);else{const yt=.5*(de[0].pageX+de[1].pageX),xn=.5*(de[0].pageY+de[1].pageY);ue.set(yt,xn)}}function Ke(){const yt=de[0].pageX-de[1].pageX,xn=de[0].pageY-de[1].pageY,Xn=Math.sqrt(yt*yt+xn*xn);_e.set(0,Xn)}function Qn(){o.enableZoom&&Ke(),o.enablePan&&Ln()}function yn(){o.enableZoom&&Ke(),o.enableRotate&&kn()}function kt(yt){if(de.length==1)ce.set(yt.pageX,yt.pageY);else{const Xn=Gn(yt),pt=.5*(yt.pageX+Xn.x),Nn=.5*(yt.pageY+Xn.y);ce.set(pt,Nn)}oe.subVectors(ce,le).multiplyScalar(o.rotateSpeed);const xn=o.domElement;xn&&(Ue(2*Math.PI*oe.x/xn.clientHeight),$e(2*Math.PI*oe.y/xn.clientHeight)),le.copy(ce)}function cn(yt){if(de.length==1)ge.set(yt.pageX,yt.pageY);else{const xn=Gn(yt),Xn=.5*(yt.pageX+xn.x),pt=.5*(yt.pageY+xn.y);ge.set(Xn,pt)}ve.subVectors(ge,ue).multiplyScalar(o.panSpeed),De(ve.x,ve.y),ue.copy(ge)}function Mn(yt){const xn=Gn(yt),Xn=yt.pageX-xn.x,pt=yt.pageY-xn.y,Nn=Math.sqrt(Xn*Xn+pt*pt);be.set(0,Nn),Re.set(0,Math.pow(be.y/_e.y,o.zoomSpeed)),Te(Re.y),_e.copy(be)}function Qt(yt){o.enableZoom&&Mn(yt),o.enablePan&&cn(yt)}function He(yt){o.enableZoom&&Mn(yt),o.enableRotate&&kt(yt)}function ze(yt){var xn,Xn;o.enabled!==!1&&(de.length===0&&((xn=o.domElement)==null||xn.ownerDocument.addEventListener("pointermove",Mt),(Xn=o.domElement)==null||Xn.ownerDocument.addEventListener("pointerup",hn)),Kn(yt),yt.pointerType==="touch"?Fn(yt):En(yt))}function Mt(yt){o.enabled!==!1&&(yt.pointerType==="touch"?pi(yt):an(yt))}function hn(yt){var xn,Xn,pt;ei(yt),de.length===0&&((xn=o.domElement)==null||xn.releasePointerCapture(yt.pointerId),(Xn=o.domElement)==null||Xn.ownerDocument.removeEventListener("pointermove",Mt),(pt=o.domElement)==null||pt.ownerDocument.removeEventListener("pointerup",hn)),o.dispatchEvent(G),Y=K.NONE}function En(yt){let xn;switch(yt.button){case 0:xn=o.mouseButtons.LEFT;break;case 1:xn=o.mouseButtons.MIDDLE;break;case 2:xn=o.mouseButtons.RIGHT;break;default:xn=-1}switch(xn){case MOUSE.DOLLY:if(o.enableZoom===!1)return;Ze(yt),Y=K.DOLLY;break;case MOUSE.ROTATE:if(yt.ctrlKey||yt.metaKey||yt.shiftKey){if(o.enablePan===!1)return;ct(yt),Y=K.PAN}else{if(o.enableRotate===!1)return;qe(yt),Y=K.ROTATE}break;case MOUSE.PAN:if(yt.ctrlKey||yt.metaKey||yt.shiftKey){if(o.enableRotate===!1)return;qe(yt),Y=K.ROTATE}else{if(o.enablePan===!1)return;ct(yt),Y=K.PAN}break;default:Y=K.NONE}Y!==K.NONE&&o.dispatchEvent(R)}function an(yt){if(o.enabled!==!1)switch(Y){case K.ROTATE:if(o.enableRotate===!1)return;xt(yt);break;case K.DOLLY:if(o.enableZoom===!1)return;un(yt);break;case K.PAN:if(o.enablePan===!1)return;Vn(yt);break}}function Cn(yt){o.enabled===!1||o.enableZoom===!1||Y!==K.NONE&&Y!==K.ROTATE||(yt.preventDefault(),o.dispatchEvent(R),In(yt),o.dispatchEvent(G))}function Pn(yt){o.enabled===!1||o.enablePan===!1||Un(yt)}function Fn(yt){switch(ti(yt),de.length){case 1:switch(o.touches.ONE){case TOUCH.ROTATE:if(o.enableRotate===!1)return;kn(),Y=K.TOUCH_ROTATE;break;case TOUCH.PAN:if(o.enablePan===!1)return;Ln(),Y=K.TOUCH_PAN;break;default:Y=K.NONE}break;case 2:switch(o.touches.TWO){case TOUCH.DOLLY_PAN:if(o.enableZoom===!1&&o.enablePan===!1)return;Qn(),Y=K.TOUCH_DOLLY_PAN;break;case TOUCH.DOLLY_ROTATE:if(o.enableZoom===!1&&o.enableRotate===!1)return;yn(),Y=K.TOUCH_DOLLY_ROTATE;break;default:Y=K.NONE}break;default:Y=K.NONE}Y!==K.NONE&&o.dispatchEvent(R)}function pi(yt){switch(ti(yt),Y){case K.TOUCH_ROTATE:if(o.enableRotate===!1)return;kt(yt),o.update();break;case K.TOUCH_PAN:if(o.enablePan===!1)return;cn(yt),o.update();break;case K.TOUCH_DOLLY_PAN:if(o.enableZoom===!1&&o.enablePan===!1)return;Qt(yt),o.update();break;case K.TOUCH_DOLLY_ROTATE:if(o.enableZoom===!1&&o.enableRotate===!1)return;He(yt),o.update();break;default:Y=K.NONE}}function On(yt){o.enabled!==!1&&yt.preventDefault()}function Kn(yt){de.push(yt)}function ei(yt){delete Me[yt.pointerId];for(let xn=0;xn<de.length;xn++)if(de[xn].pointerId==yt.pointerId){de.splice(xn,1);return}}function ti(yt){let xn=Me[yt.pointerId];xn===void 0&&(xn=new Vector2,Me[yt.pointerId]=xn),xn.set(yt.pageX,yt.pageY)}function Gn(yt){const xn=yt.pointerId===de[0].pointerId?de[1]:de[0];return Me[xn.pointerId]}this.dollyIn=(yt=Pe())=>{Ne(yt),o.update()},this.dollyOut=(yt=Pe())=>{Te(yt),o.update()},this.getScale=()=>re,this.setScale=yt=>{Oe(yt),o.update()},this.getZoomScale=()=>Pe(),t!==void 0&&this.connect(t),this.update()}};const IsObject=r=>r===Object(r)&&!Array.isArray(r)&&typeof r!="function";function useTexture(r,e){const t=useThree(R=>R.gl),o=useLoader(TextureLoader,IsObject(r)?Object.values(r):r);return reactExports.useLayoutEffect(()=>{e==null||e(o)},[e]),reactExports.useEffect(()=>{if("initTexture"in t){let R=[];Array.isArray(o)?R=o:o instanceof Texture?R=[o]:IsObject(o)&&(R=Object.values(o)),R.forEach(G=>{G instanceof Texture&&t.initTexture(G)})}},[t,o]),reactExports.useMemo(()=>{if(IsObject(r)){const R={};let G=0;for(const K in r)R[K]=o[G++];return R}else return o},[r,o])}useTexture.preload=r=>useLoader.preload(TextureLoader,r);useTexture.clear=r=>useLoader.clear(TextureLoader,r);const OrbitControls=reactExports.forwardRef(({makeDefault:r,camera:e,regress:t,domElement:o,enableDamping:y=!0,keyEvents:R=!1,onChange:G,onStart:K,onEnd:Y,...Q},ee)=>{const ie=useThree(Re=>Re.invalidate),re=useThree(Re=>Re.camera),se=useThree(Re=>Re.gl),le=useThree(Re=>Re.events),ce=useThree(Re=>Re.setEvents),oe=useThree(Re=>Re.set),ue=useThree(Re=>Re.get),ge=useThree(Re=>Re.performance),ve=e||re,_e=o||le.connected||se.domElement,be=reactExports.useMemo(()=>new OrbitControls$1(ve),[ve]);return useFrame(()=>{be.enabled&&be.update()},-1),reactExports.useEffect(()=>(R&&be.connect(R===!0?_e:R),be.connect(_e),()=>void be.dispose()),[R,_e,t,be,ie]),reactExports.useEffect(()=>{const Re=ye=>{ie(),t&&ge.regress(),G&&G(ye)},Se=ye=>{K&&K(ye)},Ee=ye=>{Y&&Y(ye)};return be.addEventListener("change",Re),be.addEventListener("start",Se),be.addEventListener("end",Ee),()=>{be.removeEventListener("start",Se),be.removeEventListener("end",Ee),be.removeEventListener("change",Re)}},[G,K,Y,be,ie,ce]),reactExports.useEffect(()=>{if(r){const Re=ue().controls;return oe({controls:be}),()=>oe({controls:Re})}},[r,be]),reactExports.createElement("primitive",_extends({ref:ee,object:be,enableDamping:y},Q))});function toTrianglesDrawMode(r,e){if(e===TrianglesDrawMode)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),r;if(e===TriangleFanDrawMode||e===TriangleStripDrawMode){let t=r.getIndex();if(t===null){const G=[],K=r.getAttribute("position");if(K!==void 0){for(let Y=0;Y<K.count;Y++)G.push(Y);r.setIndex(G),t=r.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),r}const o=t.count-2,y=[];if(e===TriangleFanDrawMode)for(let G=1;G<=o;G++)y.push(t.getX(0)),y.push(t.getX(G)),y.push(t.getX(G+1));else for(let G=0;G<o;G++)G%2===0?(y.push(t.getX(G)),y.push(t.getX(G+1)),y.push(t.getX(G+2))):(y.push(t.getX(G+2)),y.push(t.getX(G+1)),y.push(t.getX(G)));y.length/3!==o&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const R=r.clone();return R.setIndex(y),R.clearGroups(),R}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),r}class GLTFLoader extends Loader{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new GLTFMaterialsClearcoatExtension(t)}),this.register(function(t){return new GLTFMaterialsDispersionExtension(t)}),this.register(function(t){return new GLTFTextureBasisUExtension(t)}),this.register(function(t){return new GLTFTextureWebPExtension(t)}),this.register(function(t){return new GLTFTextureAVIFExtension(t)}),this.register(function(t){return new GLTFMaterialsSheenExtension(t)}),this.register(function(t){return new GLTFMaterialsTransmissionExtension(t)}),this.register(function(t){return new GLTFMaterialsVolumeExtension(t)}),this.register(function(t){return new GLTFMaterialsIorExtension(t)}),this.register(function(t){return new GLTFMaterialsEmissiveStrengthExtension(t)}),this.register(function(t){return new GLTFMaterialsSpecularExtension(t)}),this.register(function(t){return new GLTFMaterialsIridescenceExtension(t)}),this.register(function(t){return new GLTFMaterialsAnisotropyExtension(t)}),this.register(function(t){return new GLTFMaterialsBumpExtension(t)}),this.register(function(t){return new GLTFLightsExtension(t)}),this.register(function(t){return new GLTFMeshoptCompression(t)}),this.register(function(t){return new GLTFMeshGpuInstancing(t)})}load(e,t,o,y){const R=this;let G;if(this.resourcePath!=="")G=this.resourcePath;else if(this.path!==""){const Q=LoaderUtils.extractUrlBase(e);G=LoaderUtils.resolveURL(Q,this.path)}else G=LoaderUtils.extractUrlBase(e);this.manager.itemStart(e);const K=function(Q){y?y(Q):console.error(Q),R.manager.itemError(e),R.manager.itemEnd(e)},Y=new FileLoader(this.manager);Y.setPath(this.path),Y.setResponseType("arraybuffer"),Y.setRequestHeader(this.requestHeader),Y.setWithCredentials(this.withCredentials),Y.load(e,function(Q){try{R.parse(Q,G,function(ee){t(ee),R.manager.itemEnd(e)},K)}catch(ee){K(ee)}},o,K)}setDRACOLoader(e){return this.dracoLoader=e,this}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,o,y){let R;const G={},K={},Y=new TextDecoder;if(typeof e=="string")R=JSON.parse(e);else if(e instanceof ArrayBuffer)if(Y.decode(new Uint8Array(e,0,4))===BINARY_EXTENSION_HEADER_MAGIC){try{G[EXTENSIONS.KHR_BINARY_GLTF]=new GLTFBinaryExtension(e)}catch(ie){y&&y(ie);return}R=JSON.parse(G[EXTENSIONS.KHR_BINARY_GLTF].content)}else R=JSON.parse(Y.decode(e));else R=e;if(R.asset===void 0||R.asset.version[0]<2){y&&y(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const Q=new GLTFParser(R,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});Q.fileLoader.setRequestHeader(this.requestHeader);for(let ee=0;ee<this.pluginCallbacks.length;ee++){const ie=this.pluginCallbacks[ee](Q);ie.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),K[ie.name]=ie,G[ie.name]=!0}if(R.extensionsUsed)for(let ee=0;ee<R.extensionsUsed.length;++ee){const ie=R.extensionsUsed[ee],re=R.extensionsRequired||[];switch(ie){case EXTENSIONS.KHR_MATERIALS_UNLIT:G[ie]=new GLTFMaterialsUnlitExtension;break;case EXTENSIONS.KHR_DRACO_MESH_COMPRESSION:G[ie]=new GLTFDracoMeshCompressionExtension(R,this.dracoLoader);break;case EXTENSIONS.KHR_TEXTURE_TRANSFORM:G[ie]=new GLTFTextureTransformExtension;break;case EXTENSIONS.KHR_MESH_QUANTIZATION:G[ie]=new GLTFMeshQuantizationExtension;break;default:re.indexOf(ie)>=0&&K[ie]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+ie+'".')}}Q.setExtensions(G),Q.setPlugins(K),Q.parse(o,y)}parseAsync(e,t){const o=this;return new Promise(function(y,R){o.parse(e,t,y,R)})}}function GLTFRegistry(){let r={};return{get:function(e){return r[e]},add:function(e,t){r[e]=t},remove:function(e){delete r[e]},removeAll:function(){r={}}}}const EXTENSIONS={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class GLTFLightsExtension{constructor(e){this.parser=e,this.name=EXTENSIONS.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let o=0,y=t.length;o<y;o++){const R=t[o];R.extensions&&R.extensions[this.name]&&R.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,R.extensions[this.name].light)}}_loadLight(e){const t=this.parser,o="light:"+e;let y=t.cache.get(o);if(y)return y;const R=t.json,Y=((R.extensions&&R.extensions[this.name]||{}).lights||[])[e];let Q;const ee=new Color(16777215);Y.color!==void 0&&ee.setRGB(Y.color[0],Y.color[1],Y.color[2],LinearSRGBColorSpace);const ie=Y.range!==void 0?Y.range:0;switch(Y.type){case"directional":Q=new DirectionalLight(ee),Q.target.position.set(0,0,-1),Q.add(Q.target);break;case"point":Q=new PointLight(ee),Q.distance=ie;break;case"spot":Q=new SpotLight(ee),Q.distance=ie,Y.spot=Y.spot||{},Y.spot.innerConeAngle=Y.spot.innerConeAngle!==void 0?Y.spot.innerConeAngle:0,Y.spot.outerConeAngle=Y.spot.outerConeAngle!==void 0?Y.spot.outerConeAngle:Math.PI/4,Q.angle=Y.spot.outerConeAngle,Q.penumbra=1-Y.spot.innerConeAngle/Y.spot.outerConeAngle,Q.target.position.set(0,0,-1),Q.add(Q.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+Y.type)}return Q.position.set(0,0,0),assignExtrasToUserData(Q,Y),Y.intensity!==void 0&&(Q.intensity=Y.intensity),Q.name=t.createUniqueName(Y.name||"light_"+e),y=Promise.resolve(Q),t.cache.add(o,y),y}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,o=this.parser,R=o.json.nodes[e],K=(R.extensions&&R.extensions[this.name]||{}).light;return K===void 0?null:this._loadLight(K).then(function(Y){return o._getNodeRef(t.cache,K,Y)})}}class GLTFMaterialsUnlitExtension{constructor(){this.name=EXTENSIONS.KHR_MATERIALS_UNLIT}getMaterialType(){return MeshBasicMaterial}extendParams(e,t,o){const y=[];e.color=new Color(1,1,1),e.opacity=1;const R=t.pbrMetallicRoughness;if(R){if(Array.isArray(R.baseColorFactor)){const G=R.baseColorFactor;e.color.setRGB(G[0],G[1],G[2],LinearSRGBColorSpace),e.opacity=G[3]}R.baseColorTexture!==void 0&&y.push(o.assignTexture(e,"map",R.baseColorTexture,SRGBColorSpace))}return Promise.all(y)}}class GLTFMaterialsEmissiveStrengthExtension{constructor(e){this.parser=e,this.name=EXTENSIONS.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const y=this.parser.json.materials[e];if(!y.extensions||!y.extensions[this.name])return Promise.resolve();const R=y.extensions[this.name].emissiveStrength;return R!==void 0&&(t.emissiveIntensity=R),Promise.resolve()}}class GLTFMaterialsClearcoatExtension{constructor(e){this.parser=e,this.name=EXTENSIONS.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const o=this.parser.json.materials[e];return!o.extensions||!o.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(e,t){const o=this.parser,y=o.json.materials[e];if(!y.extensions||!y.extensions[this.name])return Promise.resolve();const R=[],G=y.extensions[this.name];if(G.clearcoatFactor!==void 0&&(t.clearcoat=G.clearcoatFactor),G.clearcoatTexture!==void 0&&R.push(o.assignTexture(t,"clearcoatMap",G.clearcoatTexture)),G.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=G.clearcoatRoughnessFactor),G.clearcoatRoughnessTexture!==void 0&&R.push(o.assignTexture(t,"clearcoatRoughnessMap",G.clearcoatRoughnessTexture)),G.clearcoatNormalTexture!==void 0&&(R.push(o.assignTexture(t,"clearcoatNormalMap",G.clearcoatNormalTexture)),G.clearcoatNormalTexture.scale!==void 0)){const K=G.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new Vector2(K,K)}return Promise.all(R)}}class GLTFMaterialsDispersionExtension{constructor(e){this.parser=e,this.name=EXTENSIONS.KHR_MATERIALS_DISPERSION}getMaterialType(e){const o=this.parser.json.materials[e];return!o.extensions||!o.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(e,t){const y=this.parser.json.materials[e];if(!y.extensions||!y.extensions[this.name])return Promise.resolve();const R=y.extensions[this.name];return t.dispersion=R.dispersion!==void 0?R.dispersion:0,Promise.resolve()}}class GLTFMaterialsIridescenceExtension{constructor(e){this.parser=e,this.name=EXTENSIONS.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const o=this.parser.json.materials[e];return!o.extensions||!o.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(e,t){const o=this.parser,y=o.json.materials[e];if(!y.extensions||!y.extensions[this.name])return Promise.resolve();const R=[],G=y.extensions[this.name];return G.iridescenceFactor!==void 0&&(t.iridescence=G.iridescenceFactor),G.iridescenceTexture!==void 0&&R.push(o.assignTexture(t,"iridescenceMap",G.iridescenceTexture)),G.iridescenceIor!==void 0&&(t.iridescenceIOR=G.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),G.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=G.iridescenceThicknessMinimum),G.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=G.iridescenceThicknessMaximum),G.iridescenceThicknessTexture!==void 0&&R.push(o.assignTexture(t,"iridescenceThicknessMap",G.iridescenceThicknessTexture)),Promise.all(R)}}class GLTFMaterialsSheenExtension{constructor(e){this.parser=e,this.name=EXTENSIONS.KHR_MATERIALS_SHEEN}getMaterialType(e){const o=this.parser.json.materials[e];return!o.extensions||!o.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(e,t){const o=this.parser,y=o.json.materials[e];if(!y.extensions||!y.extensions[this.name])return Promise.resolve();const R=[];t.sheenColor=new Color(0,0,0),t.sheenRoughness=0,t.sheen=1;const G=y.extensions[this.name];if(G.sheenColorFactor!==void 0){const K=G.sheenColorFactor;t.sheenColor.setRGB(K[0],K[1],K[2],LinearSRGBColorSpace)}return G.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=G.sheenRoughnessFactor),G.sheenColorTexture!==void 0&&R.push(o.assignTexture(t,"sheenColorMap",G.sheenColorTexture,SRGBColorSpace)),G.sheenRoughnessTexture!==void 0&&R.push(o.assignTexture(t,"sheenRoughnessMap",G.sheenRoughnessTexture)),Promise.all(R)}}class GLTFMaterialsTransmissionExtension{constructor(e){this.parser=e,this.name=EXTENSIONS.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const o=this.parser.json.materials[e];return!o.extensions||!o.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(e,t){const o=this.parser,y=o.json.materials[e];if(!y.extensions||!y.extensions[this.name])return Promise.resolve();const R=[],G=y.extensions[this.name];return G.transmissionFactor!==void 0&&(t.transmission=G.transmissionFactor),G.transmissionTexture!==void 0&&R.push(o.assignTexture(t,"transmissionMap",G.transmissionTexture)),Promise.all(R)}}class GLTFMaterialsVolumeExtension{constructor(e){this.parser=e,this.name=EXTENSIONS.KHR_MATERIALS_VOLUME}getMaterialType(e){const o=this.parser.json.materials[e];return!o.extensions||!o.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(e,t){const o=this.parser,y=o.json.materials[e];if(!y.extensions||!y.extensions[this.name])return Promise.resolve();const R=[],G=y.extensions[this.name];t.thickness=G.thicknessFactor!==void 0?G.thicknessFactor:0,G.thicknessTexture!==void 0&&R.push(o.assignTexture(t,"thicknessMap",G.thicknessTexture)),t.attenuationDistance=G.attenuationDistance||1/0;const K=G.attenuationColor||[1,1,1];return t.attenuationColor=new Color().setRGB(K[0],K[1],K[2],LinearSRGBColorSpace),Promise.all(R)}}class GLTFMaterialsIorExtension{constructor(e){this.parser=e,this.name=EXTENSIONS.KHR_MATERIALS_IOR}getMaterialType(e){const o=this.parser.json.materials[e];return!o.extensions||!o.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(e,t){const y=this.parser.json.materials[e];if(!y.extensions||!y.extensions[this.name])return Promise.resolve();const R=y.extensions[this.name];return t.ior=R.ior!==void 0?R.ior:1.5,Promise.resolve()}}class GLTFMaterialsSpecularExtension{constructor(e){this.parser=e,this.name=EXTENSIONS.KHR_MATERIALS_SPECULAR}getMaterialType(e){const o=this.parser.json.materials[e];return!o.extensions||!o.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(e,t){const o=this.parser,y=o.json.materials[e];if(!y.extensions||!y.extensions[this.name])return Promise.resolve();const R=[],G=y.extensions[this.name];t.specularIntensity=G.specularFactor!==void 0?G.specularFactor:1,G.specularTexture!==void 0&&R.push(o.assignTexture(t,"specularIntensityMap",G.specularTexture));const K=G.specularColorFactor||[1,1,1];return t.specularColor=new Color().setRGB(K[0],K[1],K[2],LinearSRGBColorSpace),G.specularColorTexture!==void 0&&R.push(o.assignTexture(t,"specularColorMap",G.specularColorTexture,SRGBColorSpace)),Promise.all(R)}}class GLTFMaterialsBumpExtension{constructor(e){this.parser=e,this.name=EXTENSIONS.EXT_MATERIALS_BUMP}getMaterialType(e){const o=this.parser.json.materials[e];return!o.extensions||!o.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(e,t){const o=this.parser,y=o.json.materials[e];if(!y.extensions||!y.extensions[this.name])return Promise.resolve();const R=[],G=y.extensions[this.name];return t.bumpScale=G.bumpFactor!==void 0?G.bumpFactor:1,G.bumpTexture!==void 0&&R.push(o.assignTexture(t,"bumpMap",G.bumpTexture)),Promise.all(R)}}class GLTFMaterialsAnisotropyExtension{constructor(e){this.parser=e,this.name=EXTENSIONS.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const o=this.parser.json.materials[e];return!o.extensions||!o.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(e,t){const o=this.parser,y=o.json.materials[e];if(!y.extensions||!y.extensions[this.name])return Promise.resolve();const R=[],G=y.extensions[this.name];return G.anisotropyStrength!==void 0&&(t.anisotropy=G.anisotropyStrength),G.anisotropyRotation!==void 0&&(t.anisotropyRotation=G.anisotropyRotation),G.anisotropyTexture!==void 0&&R.push(o.assignTexture(t,"anisotropyMap",G.anisotropyTexture)),Promise.all(R)}}class GLTFTextureBasisUExtension{constructor(e){this.parser=e,this.name=EXTENSIONS.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,o=t.json,y=o.textures[e];if(!y.extensions||!y.extensions[this.name])return null;const R=y.extensions[this.name],G=t.options.ktx2Loader;if(!G){if(o.extensionsRequired&&o.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,R.source,G)}}class GLTFTextureWebPExtension{constructor(e){this.parser=e,this.name=EXTENSIONS.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,o=this.parser,y=o.json,R=y.textures[e];if(!R.extensions||!R.extensions[t])return null;const G=R.extensions[t],K=y.images[G.source];let Y=o.textureLoader;if(K.uri){const Q=o.options.manager.getHandler(K.uri);Q!==null&&(Y=Q)}return this.detectSupport().then(function(Q){if(Q)return o.loadTextureImage(e,G.source,Y);if(y.extensionsRequired&&y.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return o.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class GLTFTextureAVIFExtension{constructor(e){this.parser=e,this.name=EXTENSIONS.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,o=this.parser,y=o.json,R=y.textures[e];if(!R.extensions||!R.extensions[t])return null;const G=R.extensions[t],K=y.images[G.source];let Y=o.textureLoader;if(K.uri){const Q=o.options.manager.getHandler(K.uri);Q!==null&&(Y=Q)}return this.detectSupport().then(function(Q){if(Q)return o.loadTextureImage(e,G.source,Y);if(y.extensionsRequired&&y.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return o.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class GLTFMeshoptCompression{constructor(e){this.name=EXTENSIONS.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,o=t.bufferViews[e];if(o.extensions&&o.extensions[this.name]){const y=o.extensions[this.name],R=this.parser.getDependency("buffer",y.buffer),G=this.parser.options.meshoptDecoder;if(!G||!G.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return R.then(function(K){const Y=y.byteOffset||0,Q=y.byteLength||0,ee=y.count,ie=y.byteStride,re=new Uint8Array(K,Y,Q);return G.decodeGltfBufferAsync?G.decodeGltfBufferAsync(ee,ie,re,y.mode,y.filter).then(function(se){return se.buffer}):G.ready.then(function(){const se=new ArrayBuffer(ee*ie);return G.decodeGltfBuffer(new Uint8Array(se),ee,ie,re,y.mode,y.filter),se})})}else return null}}class GLTFMeshGpuInstancing{constructor(e){this.name=EXTENSIONS.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,o=t.nodes[e];if(!o.extensions||!o.extensions[this.name]||o.mesh===void 0)return null;const y=t.meshes[o.mesh];for(const Q of y.primitives)if(Q.mode!==WEBGL_CONSTANTS.TRIANGLES&&Q.mode!==WEBGL_CONSTANTS.TRIANGLE_STRIP&&Q.mode!==WEBGL_CONSTANTS.TRIANGLE_FAN&&Q.mode!==void 0)return null;const G=o.extensions[this.name].attributes,K=[],Y={};for(const Q in G)K.push(this.parser.getDependency("accessor",G[Q]).then(ee=>(Y[Q]=ee,Y[Q])));return K.length<1?null:(K.push(this.parser.createNodeMesh(e)),Promise.all(K).then(Q=>{const ee=Q.pop(),ie=ee.isGroup?ee.children:[ee],re=Q[0].count,se=[];for(const le of ie){const ce=new Matrix4,oe=new Vector3,ue=new Quaternion,ge=new Vector3(1,1,1),ve=new InstancedMesh(le.geometry,le.material,re);for(let _e=0;_e<re;_e++)Y.TRANSLATION&&oe.fromBufferAttribute(Y.TRANSLATION,_e),Y.ROTATION&&ue.fromBufferAttribute(Y.ROTATION,_e),Y.SCALE&&ge.fromBufferAttribute(Y.SCALE,_e),ve.setMatrixAt(_e,ce.compose(oe,ue,ge));for(const _e in Y)if(_e==="_COLOR_0"){const be=Y[_e];ve.instanceColor=new InstancedBufferAttribute(be.array,be.itemSize,be.normalized)}else _e!=="TRANSLATION"&&_e!=="ROTATION"&&_e!=="SCALE"&&le.geometry.setAttribute(_e,Y[_e]);Object3D.prototype.copy.call(ve,le),this.parser.assignFinalMaterial(ve),se.push(ve)}return ee.isGroup?(ee.clear(),ee.add(...se),ee):se[0]}))}}const BINARY_EXTENSION_HEADER_MAGIC="glTF",BINARY_EXTENSION_HEADER_LENGTH=12,BINARY_EXTENSION_CHUNK_TYPES={JSON:1313821514,BIN:5130562};class GLTFBinaryExtension{constructor(e){this.name=EXTENSIONS.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,BINARY_EXTENSION_HEADER_LENGTH),o=new TextDecoder;if(this.header={magic:o.decode(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==BINARY_EXTENSION_HEADER_MAGIC)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const y=this.header.length-BINARY_EXTENSION_HEADER_LENGTH,R=new DataView(e,BINARY_EXTENSION_HEADER_LENGTH);let G=0;for(;G<y;){const K=R.getUint32(G,!0);G+=4;const Y=R.getUint32(G,!0);if(G+=4,Y===BINARY_EXTENSION_CHUNK_TYPES.JSON){const Q=new Uint8Array(e,BINARY_EXTENSION_HEADER_LENGTH+G,K);this.content=o.decode(Q)}else if(Y===BINARY_EXTENSION_CHUNK_TYPES.BIN){const Q=BINARY_EXTENSION_HEADER_LENGTH+G;this.body=e.slice(Q,Q+K)}G+=K}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class GLTFDracoMeshCompressionExtension{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=EXTENSIONS.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const o=this.json,y=this.dracoLoader,R=e.extensions[this.name].bufferView,G=e.extensions[this.name].attributes,K={},Y={},Q={};for(const ee in G){const ie=ATTRIBUTES[ee]||ee.toLowerCase();K[ie]=G[ee]}for(const ee in e.attributes){const ie=ATTRIBUTES[ee]||ee.toLowerCase();if(G[ee]!==void 0){const re=o.accessors[e.attributes[ee]],se=WEBGL_COMPONENT_TYPES[re.componentType];Q[ie]=se.name,Y[ie]=re.normalized===!0}}return t.getDependency("bufferView",R).then(function(ee){return new Promise(function(ie,re){y.decodeDracoFile(ee,function(se){for(const le in se.attributes){const ce=se.attributes[le],oe=Y[le];oe!==void 0&&(ce.normalized=oe)}ie(se)},K,Q,LinearSRGBColorSpace,re)})})}}class GLTFTextureTransformExtension{constructor(){this.name=EXTENSIONS.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class GLTFMeshQuantizationExtension{constructor(){this.name=EXTENSIONS.KHR_MESH_QUANTIZATION}}class GLTFCubicSplineInterpolant extends Interpolant{constructor(e,t,o,y){super(e,t,o,y)}copySampleValue_(e){const t=this.resultBuffer,o=this.sampleValues,y=this.valueSize,R=e*y*3+y;for(let G=0;G!==y;G++)t[G]=o[R+G];return t}interpolate_(e,t,o,y){const R=this.resultBuffer,G=this.sampleValues,K=this.valueSize,Y=K*2,Q=K*3,ee=y-t,ie=(o-t)/ee,re=ie*ie,se=re*ie,le=e*Q,ce=le-Q,oe=-2*se+3*re,ue=se-re,ge=1-oe,ve=ue-re+ie;for(let _e=0;_e!==K;_e++){const be=G[ce+_e+K],Re=G[ce+_e+Y]*ee,Se=G[le+_e+K],Ee=G[le+_e]*ee;R[_e]=ge*be+ve*Re+oe*Se+ue*Ee}return R}}const _q=new Quaternion;class GLTFCubicSplineQuaternionInterpolant extends GLTFCubicSplineInterpolant{interpolate_(e,t,o,y){const R=super.interpolate_(e,t,o,y);return _q.fromArray(R).normalize().toArray(R),R}}const WEBGL_CONSTANTS={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},WEBGL_COMPONENT_TYPES={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},WEBGL_FILTERS={9728:NearestFilter,9729:LinearFilter,9984:NearestMipmapNearestFilter,9985:LinearMipmapNearestFilter,9986:NearestMipmapLinearFilter,9987:LinearMipmapLinearFilter},WEBGL_WRAPPINGS={33071:ClampToEdgeWrapping,33648:MirroredRepeatWrapping,10497:RepeatWrapping},WEBGL_TYPE_SIZES={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},ATTRIBUTES={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},PATH_PROPERTIES={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},INTERPOLATION={CUBICSPLINE:void 0,LINEAR:InterpolateLinear,STEP:InterpolateDiscrete},ALPHA_MODES={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function createDefaultMaterial(r){return r.DefaultMaterial===void 0&&(r.DefaultMaterial=new MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:FrontSide})),r.DefaultMaterial}function addUnknownExtensionsToUserData(r,e,t){for(const o in t.extensions)r[o]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[o]=t.extensions[o])}function assignExtrasToUserData(r,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(r.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function addMorphTargets(r,e,t){let o=!1,y=!1,R=!1;for(let Q=0,ee=e.length;Q<ee;Q++){const ie=e[Q];if(ie.POSITION!==void 0&&(o=!0),ie.NORMAL!==void 0&&(y=!0),ie.COLOR_0!==void 0&&(R=!0),o&&y&&R)break}if(!o&&!y&&!R)return Promise.resolve(r);const G=[],K=[],Y=[];for(let Q=0,ee=e.length;Q<ee;Q++){const ie=e[Q];if(o){const re=ie.POSITION!==void 0?t.getDependency("accessor",ie.POSITION):r.attributes.position;G.push(re)}if(y){const re=ie.NORMAL!==void 0?t.getDependency("accessor",ie.NORMAL):r.attributes.normal;K.push(re)}if(R){const re=ie.COLOR_0!==void 0?t.getDependency("accessor",ie.COLOR_0):r.attributes.color;Y.push(re)}}return Promise.all([Promise.all(G),Promise.all(K),Promise.all(Y)]).then(function(Q){const ee=Q[0],ie=Q[1],re=Q[2];return o&&(r.morphAttributes.position=ee),y&&(r.morphAttributes.normal=ie),R&&(r.morphAttributes.color=re),r.morphTargetsRelative=!0,r})}function updateMorphTargets(r,e){if(r.updateMorphTargets(),e.weights!==void 0)for(let t=0,o=e.weights.length;t<o;t++)r.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(r.morphTargetInfluences.length===t.length){r.morphTargetDictionary={};for(let o=0,y=t.length;o<y;o++)r.morphTargetDictionary[t[o]]=o}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function createPrimitiveKey(r){let e;const t=r.extensions&&r.extensions[EXTENSIONS.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+createAttributesKey(t.attributes):e=r.indices+":"+createAttributesKey(r.attributes)+":"+r.mode,r.targets!==void 0)for(let o=0,y=r.targets.length;o<y;o++)e+=":"+createAttributesKey(r.targets[o]);return e}function createAttributesKey(r){let e="";const t=Object.keys(r).sort();for(let o=0,y=t.length;o<y;o++)e+=t[o]+":"+r[t[o]]+";";return e}function getNormalizedComponentScale(r){switch(r){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function getImageURIMimeType(r){return r.search(/\.jpe?g($|\?)/i)>0||r.search(/^data\:image\/jpeg/)===0?"image/jpeg":r.search(/\.webp($|\?)/i)>0||r.search(/^data\:image\/webp/)===0?"image/webp":r.search(/\.ktx2($|\?)/i)>0||r.search(/^data\:image\/ktx2/)===0?"image/ktx2":"image/png"}const _identityMatrix=new Matrix4;class GLTFParser{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new GLTFRegistry,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let o=!1,y=-1,R=!1,G=-1;if(typeof navigator<"u"){const K=navigator.userAgent;o=/^((?!chrome|android).)*safari/i.test(K)===!0;const Y=K.match(/Version\/(\d+)/);y=o&&Y?parseInt(Y[1],10):-1,R=K.indexOf("Firefox")>-1,G=R?K.match(/Firefox\/([0-9]+)\./)[1]:-1}typeof createImageBitmap>"u"||o&&y<17||R&&G<98?this.textureLoader=new TextureLoader(this.options.manager):this.textureLoader=new ImageBitmapLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const o=this,y=this.json,R=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(G){return G._markDefs&&G._markDefs()}),Promise.all(this._invokeAll(function(G){return G.beforeRoot&&G.beforeRoot()})).then(function(){return Promise.all([o.getDependencies("scene"),o.getDependencies("animation"),o.getDependencies("camera")])}).then(function(G){const K={scene:G[0][y.scene||0],scenes:G[0],animations:G[1],cameras:G[2],asset:y.asset,parser:o,userData:{}};return addUnknownExtensionsToUserData(R,K,y),assignExtrasToUserData(K,y),Promise.all(o._invokeAll(function(Y){return Y.afterRoot&&Y.afterRoot(K)})).then(function(){for(const Y of K.scenes)Y.updateMatrixWorld();e(K)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],o=this.json.meshes||[];for(let y=0,R=t.length;y<R;y++){const G=t[y].joints;for(let K=0,Y=G.length;K<Y;K++)e[G[K]].isBone=!0}for(let y=0,R=e.length;y<R;y++){const G=e[y];G.mesh!==void 0&&(this._addNodeRef(this.meshCache,G.mesh),G.skin!==void 0&&(o[G.mesh].isSkinnedMesh=!0)),G.camera!==void 0&&this._addNodeRef(this.cameraCache,G.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,o){if(e.refs[t]<=1)return o;const y=o.clone(),R=(G,K)=>{const Y=this.associations.get(G);Y!=null&&this.associations.set(K,Y);for(const[Q,ee]of G.children.entries())R(ee,K.children[Q])};return R(o,y),y.name+="_instance_"+e.uses[t]++,y}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let o=0;o<t.length;o++){const y=e(t[o]);if(y)return y}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const o=[];for(let y=0;y<t.length;y++){const R=e(t[y]);R&&o.push(R)}return o}getDependency(e,t){const o=e+":"+t;let y=this.cache.get(o);if(!y){switch(e){case"scene":y=this.loadScene(t);break;case"node":y=this._invokeOne(function(R){return R.loadNode&&R.loadNode(t)});break;case"mesh":y=this._invokeOne(function(R){return R.loadMesh&&R.loadMesh(t)});break;case"accessor":y=this.loadAccessor(t);break;case"bufferView":y=this._invokeOne(function(R){return R.loadBufferView&&R.loadBufferView(t)});break;case"buffer":y=this.loadBuffer(t);break;case"material":y=this._invokeOne(function(R){return R.loadMaterial&&R.loadMaterial(t)});break;case"texture":y=this._invokeOne(function(R){return R.loadTexture&&R.loadTexture(t)});break;case"skin":y=this.loadSkin(t);break;case"animation":y=this._invokeOne(function(R){return R.loadAnimation&&R.loadAnimation(t)});break;case"camera":y=this.loadCamera(t);break;default:if(y=this._invokeOne(function(R){return R!=this&&R.getDependency&&R.getDependency(e,t)}),!y)throw new Error("Unknown type: "+e);break}this.cache.add(o,y)}return y}getDependencies(e){let t=this.cache.get(e);if(!t){const o=this,y=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(y.map(function(R,G){return o.getDependency(e,G)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],o=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[EXTENSIONS.KHR_BINARY_GLTF].body);const y=this.options;return new Promise(function(R,G){o.load(LoaderUtils.resolveURL(t.uri,y.path),R,void 0,function(){G(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(o){const y=t.byteLength||0,R=t.byteOffset||0;return o.slice(R,R+y)})}loadAccessor(e){const t=this,o=this.json,y=this.json.accessors[e];if(y.bufferView===void 0&&y.sparse===void 0){const G=WEBGL_TYPE_SIZES[y.type],K=WEBGL_COMPONENT_TYPES[y.componentType],Y=y.normalized===!0,Q=new K(y.count*G);return Promise.resolve(new BufferAttribute(Q,G,Y))}const R=[];return y.bufferView!==void 0?R.push(this.getDependency("bufferView",y.bufferView)):R.push(null),y.sparse!==void 0&&(R.push(this.getDependency("bufferView",y.sparse.indices.bufferView)),R.push(this.getDependency("bufferView",y.sparse.values.bufferView))),Promise.all(R).then(function(G){const K=G[0],Y=WEBGL_TYPE_SIZES[y.type],Q=WEBGL_COMPONENT_TYPES[y.componentType],ee=Q.BYTES_PER_ELEMENT,ie=ee*Y,re=y.byteOffset||0,se=y.bufferView!==void 0?o.bufferViews[y.bufferView].byteStride:void 0,le=y.normalized===!0;let ce,oe;if(se&&se!==ie){const ue=Math.floor(re/se),ge="InterleavedBuffer:"+y.bufferView+":"+y.componentType+":"+ue+":"+y.count;let ve=t.cache.get(ge);ve||(ce=new Q(K,ue*se,y.count*se/ee),ve=new InterleavedBuffer(ce,se/ee),t.cache.add(ge,ve)),oe=new InterleavedBufferAttribute(ve,Y,re%se/ee,le)}else K===null?ce=new Q(y.count*Y):ce=new Q(K,re,y.count*Y),oe=new BufferAttribute(ce,Y,le);if(y.sparse!==void 0){const ue=WEBGL_TYPE_SIZES.SCALAR,ge=WEBGL_COMPONENT_TYPES[y.sparse.indices.componentType],ve=y.sparse.indices.byteOffset||0,_e=y.sparse.values.byteOffset||0,be=new ge(G[1],ve,y.sparse.count*ue),Re=new Q(G[2],_e,y.sparse.count*Y);K!==null&&(oe=new BufferAttribute(oe.array.slice(),oe.itemSize,oe.normalized)),oe.normalized=!1;for(let Se=0,Ee=be.length;Se<Ee;Se++){const ye=be[Se];if(oe.setX(ye,Re[Se*Y]),Y>=2&&oe.setY(ye,Re[Se*Y+1]),Y>=3&&oe.setZ(ye,Re[Se*Y+2]),Y>=4&&oe.setW(ye,Re[Se*Y+3]),Y>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}oe.normalized=le}return oe})}loadTexture(e){const t=this.json,o=this.options,R=t.textures[e].source,G=t.images[R];let K=this.textureLoader;if(G.uri){const Y=o.manager.getHandler(G.uri);Y!==null&&(K=Y)}return this.loadTextureImage(e,R,K)}loadTextureImage(e,t,o){const y=this,R=this.json,G=R.textures[e],K=R.images[t],Y=(K.uri||K.bufferView)+":"+G.sampler;if(this.textureCache[Y])return this.textureCache[Y];const Q=this.loadImageSource(t,o).then(function(ee){ee.flipY=!1,ee.name=G.name||K.name||"",ee.name===""&&typeof K.uri=="string"&&K.uri.startsWith("data:image/")===!1&&(ee.name=K.uri);const re=(R.samplers||{})[G.sampler]||{};return ee.magFilter=WEBGL_FILTERS[re.magFilter]||LinearFilter,ee.minFilter=WEBGL_FILTERS[re.minFilter]||LinearMipmapLinearFilter,ee.wrapS=WEBGL_WRAPPINGS[re.wrapS]||RepeatWrapping,ee.wrapT=WEBGL_WRAPPINGS[re.wrapT]||RepeatWrapping,ee.generateMipmaps=!ee.isCompressedTexture&&ee.minFilter!==NearestFilter&&ee.minFilter!==LinearFilter,y.associations.set(ee,{textures:e}),ee}).catch(function(){return null});return this.textureCache[Y]=Q,Q}loadImageSource(e,t){const o=this,y=this.json,R=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(ie=>ie.clone());const G=y.images[e],K=self.URL||self.webkitURL;let Y=G.uri||"",Q=!1;if(G.bufferView!==void 0)Y=o.getDependency("bufferView",G.bufferView).then(function(ie){Q=!0;const re=new Blob([ie],{type:G.mimeType});return Y=K.createObjectURL(re),Y});else if(G.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const ee=Promise.resolve(Y).then(function(ie){return new Promise(function(re,se){let le=re;t.isImageBitmapLoader===!0&&(le=function(ce){const oe=new Texture(ce);oe.needsUpdate=!0,re(oe)}),t.load(LoaderUtils.resolveURL(ie,R.path),le,void 0,se)})}).then(function(ie){return Q===!0&&K.revokeObjectURL(Y),assignExtrasToUserData(ie,G),ie.userData.mimeType=G.mimeType||getImageURIMimeType(G.uri),ie}).catch(function(ie){throw console.error("THREE.GLTFLoader: Couldn't load texture",Y),ie});return this.sourceCache[e]=ee,ee}assignTexture(e,t,o,y){const R=this;return this.getDependency("texture",o.index).then(function(G){if(!G)return null;if(o.texCoord!==void 0&&o.texCoord>0&&(G=G.clone(),G.channel=o.texCoord),R.extensions[EXTENSIONS.KHR_TEXTURE_TRANSFORM]){const K=o.extensions!==void 0?o.extensions[EXTENSIONS.KHR_TEXTURE_TRANSFORM]:void 0;if(K){const Y=R.associations.get(G);G=R.extensions[EXTENSIONS.KHR_TEXTURE_TRANSFORM].extendTexture(G,K),R.associations.set(G,Y)}}return y!==void 0&&(G.colorSpace=y),e[t]=G,G})}assignFinalMaterial(e){const t=e.geometry;let o=e.material;const y=t.attributes.tangent===void 0,R=t.attributes.color!==void 0,G=t.attributes.normal===void 0;if(e.isPoints){const K="PointsMaterial:"+o.uuid;let Y=this.cache.get(K);Y||(Y=new PointsMaterial,Material.prototype.copy.call(Y,o),Y.color.copy(o.color),Y.map=o.map,Y.sizeAttenuation=!1,this.cache.add(K,Y)),o=Y}else if(e.isLine){const K="LineBasicMaterial:"+o.uuid;let Y=this.cache.get(K);Y||(Y=new LineBasicMaterial,Material.prototype.copy.call(Y,o),Y.color.copy(o.color),Y.map=o.map,this.cache.add(K,Y)),o=Y}if(y||R||G){let K="ClonedMaterial:"+o.uuid+":";y&&(K+="derivative-tangents:"),R&&(K+="vertex-colors:"),G&&(K+="flat-shading:");let Y=this.cache.get(K);Y||(Y=o.clone(),R&&(Y.vertexColors=!0),G&&(Y.flatShading=!0),y&&(Y.normalScale&&(Y.normalScale.y*=-1),Y.clearcoatNormalScale&&(Y.clearcoatNormalScale.y*=-1)),this.cache.add(K,Y),this.associations.set(Y,this.associations.get(o))),o=Y}e.material=o}getMaterialType(){return MeshStandardMaterial}loadMaterial(e){const t=this,o=this.json,y=this.extensions,R=o.materials[e];let G;const K={},Y=R.extensions||{},Q=[];if(Y[EXTENSIONS.KHR_MATERIALS_UNLIT]){const ie=y[EXTENSIONS.KHR_MATERIALS_UNLIT];G=ie.getMaterialType(),Q.push(ie.extendParams(K,R,t))}else{const ie=R.pbrMetallicRoughness||{};if(K.color=new Color(1,1,1),K.opacity=1,Array.isArray(ie.baseColorFactor)){const re=ie.baseColorFactor;K.color.setRGB(re[0],re[1],re[2],LinearSRGBColorSpace),K.opacity=re[3]}ie.baseColorTexture!==void 0&&Q.push(t.assignTexture(K,"map",ie.baseColorTexture,SRGBColorSpace)),K.metalness=ie.metallicFactor!==void 0?ie.metallicFactor:1,K.roughness=ie.roughnessFactor!==void 0?ie.roughnessFactor:1,ie.metallicRoughnessTexture!==void 0&&(Q.push(t.assignTexture(K,"metalnessMap",ie.metallicRoughnessTexture)),Q.push(t.assignTexture(K,"roughnessMap",ie.metallicRoughnessTexture))),G=this._invokeOne(function(re){return re.getMaterialType&&re.getMaterialType(e)}),Q.push(Promise.all(this._invokeAll(function(re){return re.extendMaterialParams&&re.extendMaterialParams(e,K)})))}R.doubleSided===!0&&(K.side=DoubleSide);const ee=R.alphaMode||ALPHA_MODES.OPAQUE;if(ee===ALPHA_MODES.BLEND?(K.transparent=!0,K.depthWrite=!1):(K.transparent=!1,ee===ALPHA_MODES.MASK&&(K.alphaTest=R.alphaCutoff!==void 0?R.alphaCutoff:.5)),R.normalTexture!==void 0&&G!==MeshBasicMaterial&&(Q.push(t.assignTexture(K,"normalMap",R.normalTexture)),K.normalScale=new Vector2(1,1),R.normalTexture.scale!==void 0)){const ie=R.normalTexture.scale;K.normalScale.set(ie,ie)}if(R.occlusionTexture!==void 0&&G!==MeshBasicMaterial&&(Q.push(t.assignTexture(K,"aoMap",R.occlusionTexture)),R.occlusionTexture.strength!==void 0&&(K.aoMapIntensity=R.occlusionTexture.strength)),R.emissiveFactor!==void 0&&G!==MeshBasicMaterial){const ie=R.emissiveFactor;K.emissive=new Color().setRGB(ie[0],ie[1],ie[2],LinearSRGBColorSpace)}return R.emissiveTexture!==void 0&&G!==MeshBasicMaterial&&Q.push(t.assignTexture(K,"emissiveMap",R.emissiveTexture,SRGBColorSpace)),Promise.all(Q).then(function(){const ie=new G(K);return R.name&&(ie.name=R.name),assignExtrasToUserData(ie,R),t.associations.set(ie,{materials:e}),R.extensions&&addUnknownExtensionsToUserData(y,ie,R),ie})}createUniqueName(e){const t=PropertyBinding.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,o=this.extensions,y=this.primitiveCache;function R(K){return o[EXTENSIONS.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(K,t).then(function(Y){return addPrimitiveAttributes(Y,K,t)})}const G=[];for(let K=0,Y=e.length;K<Y;K++){const Q=e[K],ee=createPrimitiveKey(Q),ie=y[ee];if(ie)G.push(ie.promise);else{let re;Q.extensions&&Q.extensions[EXTENSIONS.KHR_DRACO_MESH_COMPRESSION]?re=R(Q):re=addPrimitiveAttributes(new BufferGeometry,Q,t),y[ee]={primitive:Q,promise:re},G.push(re)}}return Promise.all(G)}loadMesh(e){const t=this,o=this.json,y=this.extensions,R=o.meshes[e],G=R.primitives,K=[];for(let Y=0,Q=G.length;Y<Q;Y++){const ee=G[Y].material===void 0?createDefaultMaterial(this.cache):this.getDependency("material",G[Y].material);K.push(ee)}return K.push(t.loadGeometries(G)),Promise.all(K).then(function(Y){const Q=Y.slice(0,Y.length-1),ee=Y[Y.length-1],ie=[];for(let se=0,le=ee.length;se<le;se++){const ce=ee[se],oe=G[se];let ue;const ge=Q[se];if(oe.mode===WEBGL_CONSTANTS.TRIANGLES||oe.mode===WEBGL_CONSTANTS.TRIANGLE_STRIP||oe.mode===WEBGL_CONSTANTS.TRIANGLE_FAN||oe.mode===void 0)ue=R.isSkinnedMesh===!0?new SkinnedMesh(ce,ge):new Mesh(ce,ge),ue.isSkinnedMesh===!0&&ue.normalizeSkinWeights(),oe.mode===WEBGL_CONSTANTS.TRIANGLE_STRIP?ue.geometry=toTrianglesDrawMode(ue.geometry,TriangleStripDrawMode):oe.mode===WEBGL_CONSTANTS.TRIANGLE_FAN&&(ue.geometry=toTrianglesDrawMode(ue.geometry,TriangleFanDrawMode));else if(oe.mode===WEBGL_CONSTANTS.LINES)ue=new LineSegments(ce,ge);else if(oe.mode===WEBGL_CONSTANTS.LINE_STRIP)ue=new Line(ce,ge);else if(oe.mode===WEBGL_CONSTANTS.LINE_LOOP)ue=new LineLoop(ce,ge);else if(oe.mode===WEBGL_CONSTANTS.POINTS)ue=new Points(ce,ge);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+oe.mode);Object.keys(ue.geometry.morphAttributes).length>0&&updateMorphTargets(ue,R),ue.name=t.createUniqueName(R.name||"mesh_"+e),assignExtrasToUserData(ue,R),oe.extensions&&addUnknownExtensionsToUserData(y,ue,oe),t.assignFinalMaterial(ue),ie.push(ue)}for(let se=0,le=ie.length;se<le;se++)t.associations.set(ie[se],{meshes:e,primitives:se});if(ie.length===1)return R.extensions&&addUnknownExtensionsToUserData(y,ie[0],R),ie[0];const re=new Group;R.extensions&&addUnknownExtensionsToUserData(y,re,R),t.associations.set(re,{meshes:e});for(let se=0,le=ie.length;se<le;se++)re.add(ie[se]);return re})}loadCamera(e){let t;const o=this.json.cameras[e],y=o[o.type];if(!y){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return o.type==="perspective"?t=new PerspectiveCamera(MathUtils.radToDeg(y.yfov),y.aspectRatio||1,y.znear||1,y.zfar||2e6):o.type==="orthographic"&&(t=new OrthographicCamera(-y.xmag,y.xmag,y.ymag,-y.ymag,y.znear,y.zfar)),o.name&&(t.name=this.createUniqueName(o.name)),assignExtrasToUserData(t,o),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],o=[];for(let y=0,R=t.joints.length;y<R;y++)o.push(this._loadNodeShallow(t.joints[y]));return t.inverseBindMatrices!==void 0?o.push(this.getDependency("accessor",t.inverseBindMatrices)):o.push(null),Promise.all(o).then(function(y){const R=y.pop(),G=y,K=[],Y=[];for(let Q=0,ee=G.length;Q<ee;Q++){const ie=G[Q];if(ie){K.push(ie);const re=new Matrix4;R!==null&&re.fromArray(R.array,Q*16),Y.push(re)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[Q])}return new Skeleton(K,Y)})}loadAnimation(e){const t=this.json,o=this,y=t.animations[e],R=y.name?y.name:"animation_"+e,G=[],K=[],Y=[],Q=[],ee=[];for(let ie=0,re=y.channels.length;ie<re;ie++){const se=y.channels[ie],le=y.samplers[se.sampler],ce=se.target,oe=ce.node,ue=y.parameters!==void 0?y.parameters[le.input]:le.input,ge=y.parameters!==void 0?y.parameters[le.output]:le.output;ce.node!==void 0&&(G.push(this.getDependency("node",oe)),K.push(this.getDependency("accessor",ue)),Y.push(this.getDependency("accessor",ge)),Q.push(le),ee.push(ce))}return Promise.all([Promise.all(G),Promise.all(K),Promise.all(Y),Promise.all(Q),Promise.all(ee)]).then(function(ie){const re=ie[0],se=ie[1],le=ie[2],ce=ie[3],oe=ie[4],ue=[];for(let ge=0,ve=re.length;ge<ve;ge++){const _e=re[ge],be=se[ge],Re=le[ge],Se=ce[ge],Ee=oe[ge];if(_e===void 0)continue;_e.updateMatrix&&_e.updateMatrix();const ye=o._createAnimationTracks(_e,be,Re,Se,Ee);if(ye)for(let de=0;de<ye.length;de++)ue.push(ye[de])}return new AnimationClip(R,void 0,ue)})}createNodeMesh(e){const t=this.json,o=this,y=t.nodes[e];return y.mesh===void 0?null:o.getDependency("mesh",y.mesh).then(function(R){const G=o._getNodeRef(o.meshCache,y.mesh,R);return y.weights!==void 0&&G.traverse(function(K){if(K.isMesh)for(let Y=0,Q=y.weights.length;Y<Q;Y++)K.morphTargetInfluences[Y]=y.weights[Y]}),G})}loadNode(e){const t=this.json,o=this,y=t.nodes[e],R=o._loadNodeShallow(e),G=[],K=y.children||[];for(let Q=0,ee=K.length;Q<ee;Q++)G.push(o.getDependency("node",K[Q]));const Y=y.skin===void 0?Promise.resolve(null):o.getDependency("skin",y.skin);return Promise.all([R,Promise.all(G),Y]).then(function(Q){const ee=Q[0],ie=Q[1],re=Q[2];re!==null&&ee.traverse(function(se){se.isSkinnedMesh&&se.bind(re,_identityMatrix)});for(let se=0,le=ie.length;se<le;se++)ee.add(ie[se]);return ee})}_loadNodeShallow(e){const t=this.json,o=this.extensions,y=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const R=t.nodes[e],G=R.name?y.createUniqueName(R.name):"",K=[],Y=y._invokeOne(function(Q){return Q.createNodeMesh&&Q.createNodeMesh(e)});return Y&&K.push(Y),R.camera!==void 0&&K.push(y.getDependency("camera",R.camera).then(function(Q){return y._getNodeRef(y.cameraCache,R.camera,Q)})),y._invokeAll(function(Q){return Q.createNodeAttachment&&Q.createNodeAttachment(e)}).forEach(function(Q){K.push(Q)}),this.nodeCache[e]=Promise.all(K).then(function(Q){let ee;if(R.isBone===!0?ee=new Bone:Q.length>1?ee=new Group:Q.length===1?ee=Q[0]:ee=new Object3D,ee!==Q[0])for(let ie=0,re=Q.length;ie<re;ie++)ee.add(Q[ie]);if(R.name&&(ee.userData.name=R.name,ee.name=G),assignExtrasToUserData(ee,R),R.extensions&&addUnknownExtensionsToUserData(o,ee,R),R.matrix!==void 0){const ie=new Matrix4;ie.fromArray(R.matrix),ee.applyMatrix4(ie)}else R.translation!==void 0&&ee.position.fromArray(R.translation),R.rotation!==void 0&&ee.quaternion.fromArray(R.rotation),R.scale!==void 0&&ee.scale.fromArray(R.scale);return y.associations.has(ee)||y.associations.set(ee,{}),y.associations.get(ee).nodes=e,ee}),this.nodeCache[e]}loadScene(e){const t=this.extensions,o=this.json.scenes[e],y=this,R=new Group;o.name&&(R.name=y.createUniqueName(o.name)),assignExtrasToUserData(R,o),o.extensions&&addUnknownExtensionsToUserData(t,R,o);const G=o.nodes||[],K=[];for(let Y=0,Q=G.length;Y<Q;Y++)K.push(y.getDependency("node",G[Y]));return Promise.all(K).then(function(Y){for(let ee=0,ie=Y.length;ee<ie;ee++)R.add(Y[ee]);const Q=ee=>{const ie=new Map;for(const[re,se]of y.associations)(re instanceof Material||re instanceof Texture)&&ie.set(re,se);return ee.traverse(re=>{const se=y.associations.get(re);se!=null&&ie.set(re,se)}),ie};return y.associations=Q(R),R})}_createAnimationTracks(e,t,o,y,R){const G=[],K=e.name?e.name:e.uuid,Y=[];PATH_PROPERTIES[R.path]===PATH_PROPERTIES.weights?e.traverse(function(re){re.morphTargetInfluences&&Y.push(re.name?re.name:re.uuid)}):Y.push(K);let Q;switch(PATH_PROPERTIES[R.path]){case PATH_PROPERTIES.weights:Q=NumberKeyframeTrack;break;case PATH_PROPERTIES.rotation:Q=QuaternionKeyframeTrack;break;case PATH_PROPERTIES.translation:case PATH_PROPERTIES.scale:Q=VectorKeyframeTrack;break;default:switch(o.itemSize){case 1:Q=NumberKeyframeTrack;break;case 2:case 3:default:Q=VectorKeyframeTrack;break}break}const ee=y.interpolation!==void 0?INTERPOLATION[y.interpolation]:InterpolateLinear,ie=this._getArrayFromAccessor(o);for(let re=0,se=Y.length;re<se;re++){const le=new Q(Y[re]+"."+PATH_PROPERTIES[R.path],t.array,ie,ee);y.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(le),G.push(le)}return G}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const o=getNormalizedComponentScale(t.constructor),y=new Float32Array(t.length);for(let R=0,G=t.length;R<G;R++)y[R]=t[R]*o;t=y}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(o){const y=this instanceof QuaternionKeyframeTrack?GLTFCubicSplineQuaternionInterpolant:GLTFCubicSplineInterpolant;return new y(this.times,this.values,this.getValueSize()/3,o)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function computeBounds(r,e,t){const o=e.attributes,y=new Box3;if(o.POSITION!==void 0){const K=t.json.accessors[o.POSITION],Y=K.min,Q=K.max;if(Y!==void 0&&Q!==void 0){if(y.set(new Vector3(Y[0],Y[1],Y[2]),new Vector3(Q[0],Q[1],Q[2])),K.normalized){const ee=getNormalizedComponentScale(WEBGL_COMPONENT_TYPES[K.componentType]);y.min.multiplyScalar(ee),y.max.multiplyScalar(ee)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const R=e.targets;if(R!==void 0){const K=new Vector3,Y=new Vector3;for(let Q=0,ee=R.length;Q<ee;Q++){const ie=R[Q];if(ie.POSITION!==void 0){const re=t.json.accessors[ie.POSITION],se=re.min,le=re.max;if(se!==void 0&&le!==void 0){if(Y.setX(Math.max(Math.abs(se[0]),Math.abs(le[0]))),Y.setY(Math.max(Math.abs(se[1]),Math.abs(le[1]))),Y.setZ(Math.max(Math.abs(se[2]),Math.abs(le[2]))),re.normalized){const ce=getNormalizedComponentScale(WEBGL_COMPONENT_TYPES[re.componentType]);Y.multiplyScalar(ce)}K.max(Y)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}y.expandByVector(K)}r.boundingBox=y;const G=new Sphere;y.getCenter(G.center),G.radius=y.min.distanceTo(y.max)/2,r.boundingSphere=G}function addPrimitiveAttributes(r,e,t){const o=e.attributes,y=[];function R(G,K){return t.getDependency("accessor",G).then(function(Y){r.setAttribute(K,Y)})}for(const G in o){const K=ATTRIBUTES[G]||G.toLowerCase();K in r.attributes||y.push(R(o[G],K))}if(e.indices!==void 0&&!r.index){const G=t.getDependency("accessor",e.indices).then(function(K){r.setIndex(K)});y.push(G)}return ColorManagement.workingColorSpace!==LinearSRGBColorSpace&&"COLOR_0"in o&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${ColorManagement.workingColorSpace}" not supported.`),assignExtrasToUserData(r,e),computeBounds(r,e,t),Promise.all(y).then(function(){return e.targets!==void 0?addMorphTargets(r,e.targets,t):r})}const brainModel="/brain/brain.glb",Brain=()=>{const r=reactExports.useRef(),{scene:e}=useLoader(GLTFLoader,new URL(brainModel,import.meta.url).href),[t,o]=reactExports.useState(0);return reactExports.useEffect(()=>{const y=R=>{const G=R.clientX/window.innerWidth*2-1;o(G)};return window.addEventListener("mousemove",y),()=>{window.removeEventListener("mousemove",y)}},[]),reactExports.useEffect(()=>{e&&e.scale.set(4,4,4)},[e]),useFrame(()=>{if(r.current){const y=Math.PI/4,R=MathUtils.lerp(r.current.rotation.y,MathUtils.clamp(t*y,-y,y),.05);r.current.rotation.y=R}}),jsxRuntimeExports.jsx("group",{ref:r,children:jsxRuntimeExports.jsx("primitive",{object:e})})},BrainCanvas=()=>jsxRuntimeExports.jsxs(Canvas,{camera:{position:[0,0,5]},style:{background:"transparent",color:"#20C20E"},children:[jsxRuntimeExports.jsx("ambientLight",{intensity:.5}),jsxRuntimeExports.jsx("directionalLight",{position:[2,2,5],intensity:1}),jsxRuntimeExports.jsx(Brain,{}),jsxRuntimeExports.jsx(OrbitControls,{enableZoom:!1})]}),StreamerText=({texts:r,direction:e=1,speed:t=.6})=>{const o=reactExports.useRef(null),y=reactExports.useRef(null),[R,G]=reactExports.useState(0),K=reactExports.useRef(0),Y=reactExports.useRef(null),Q=reactExports.useRef(window.scrollY),ee=r.map(re=>`<span class="text-[white]"> ${re}</span> <span class="text-[#20C20E]"> • </span> `).join(""),ie=Array(50).fill(ee).join(" ");return reactExports.useEffect(()=>{y.current&&G(y.current.scrollWidth/2)},[]),reactExports.useEffect(()=>{const re=()=>{const se=window.scrollY,le=se-Q.current;Q.current=se,K.current+=le*e*t,R>0&&(K.current=(K.current%R+R)%R,y.current.style.transform=`translateX(${-K.current}px)`),Y.current=requestAnimationFrame(re)};return Y.current=requestAnimationFrame(re),()=>cancelAnimationFrame(Y.current)},[e,t,R]),jsxRuntimeExports.jsx("div",{ref:o,className:"relative w-full overflow-hidden bg-black flex items-center",children:jsxRuntimeExports.jsx("div",{ref:y,className:"flex text-2xl font-bold custom-green",style:{whiteSpace:"nowrap",willChange:"transform"},dangerouslySetInnerHTML:{__html:ie}})})};function RiBootstrapFill(r){return GenIcon({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M5.42333 3.03818C4.13949 3.03818 3.18953 4.16184 3.23206 5.38047C3.27286 6.55123 3.21985 8.0675 2.83811 9.30405C2.45523 10.5442 1.80769 11.3298 0.75 11.4307V12.5694C1.80769 12.6703 2.45523 13.4559 2.83811 14.696C3.21985 15.9326 3.27286 17.4489 3.23206 18.6196C3.18953 19.8381 4.13949 20.9619 5.42352 20.9619H18.5784C19.8622 20.9619 20.812 19.8382 20.7695 18.6196C20.7287 17.4489 20.7817 15.9326 21.1634 14.696C21.5465 13.4559 22.1923 12.6703 23.25 12.5694V11.4307C22.1923 11.3298 21.5465 10.5442 21.1634 9.30405C20.7817 8.06769 20.7287 6.55123 20.7695 5.38047C20.812 4.16203 19.8622 3.03818 18.5784 3.03818H5.42314H5.42333ZM16.0042 14.0714C16.0042 15.7493 14.7526 16.767 12.6756 16.767H9.13983C9.03869 16.767 8.94169 16.7268 8.87017 16.6553C8.79865 16.5838 8.75847 16.4868 8.75847 16.3856V7.61445C8.75847 7.51331 8.79865 7.41631 8.87017 7.34479C8.94169 7.27327 9.03869 7.23309 9.13983 7.23309H12.6554C14.3873 7.23309 15.5239 8.17123 15.5239 9.61161C15.5239 10.6226 14.7593 11.5277 13.7851 11.6862V11.739C15.1113 11.8845 16.0042 12.8028 16.0042 14.0714ZM12.29 8.44199H10.274V11.2896H11.972C13.2846 11.2896 14.0084 10.761 14.0084 9.81621C14.0084 8.93089 13.386 8.44199 12.29 8.44199ZM10.274 12.4195V15.5577H12.3642C13.7308 15.5577 14.4548 15.0093 14.4548 13.9787C14.4548 12.9479 13.7106 12.4193 12.2763 12.4193L10.274 12.4195Z"},child:[]}]})(r)}function RiGithubFill(r){return GenIcon({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M12.001 2C6.47598 2 2.00098 6.475 2.00098 12C2.00098 16.425 4.86348 20.1625 8.83848 21.4875C9.33848 21.575 9.52598 21.275 9.52598 21.0125C9.52598 20.775 9.51348 19.9875 9.51348 19.15C7.00098 19.6125 6.35098 18.5375 6.15098 17.975C6.03848 17.6875 5.55098 16.8 5.12598 16.5625C4.77598 16.375 4.27598 15.9125 5.11348 15.9C5.90098 15.8875 6.46348 16.625 6.65098 16.925C7.55098 18.4375 8.98848 18.0125 9.56348 17.75C9.65098 17.1 9.91348 16.6625 10.201 16.4125C7.97598 16.1625 5.65098 15.3 5.65098 11.475C5.65098 10.3875 6.03848 9.4875 6.67598 8.7875C6.57598 8.5375 6.22598 7.5125 6.77598 6.1375C6.77598 6.1375 7.61348 5.875 9.52598 7.1625C10.326 6.9375 11.176 6.825 12.026 6.825C12.876 6.825 13.726 6.9375 14.526 7.1625C16.4385 5.8625 17.276 6.1375 17.276 6.1375C17.826 7.5125 17.476 8.5375 17.376 8.7875C18.0135 9.4875 18.401 10.375 18.401 11.475C18.401 15.3125 16.0635 16.1625 13.8385 16.4125C14.201 16.725 14.5135 17.325 14.5135 18.2625C14.5135 19.6 14.501 20.675 14.501 21.0125C14.501 21.275 14.6885 21.5875 15.1885 21.4875C19.259 20.1133 21.9999 16.2963 22.001 12C22.001 6.475 17.526 2 12.001 2Z"},child:[]}]})(r)}function RiNextjsLine(r){return GenIcon({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M17.6644 17.6493L10.2602 8H8V16H10V10.9462L16.0869 18.8788C14.8907 19.5909 13.4931 20 12 20C7.58172 20 4 16.4183 4 12C4 7.58172 7.58172 4 12 4C16.4183 4 20 7.58172 20 12C20 14.2053 19.1077 16.2022 17.6644 17.6493ZM12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22ZM14 12V8H16V12H14Z"},child:[]}]})(r)}function RiNodejsLine(r){return GenIcon({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M12.8873 1.36173C12.3396 1.03958 11.6604 1.03958 11.1127 1.36173L3.36271 5.92056C2.8282 6.23498 2.5 6.8088 2.5 7.42894V16.571C2.5 17.1912 2.8282 17.765 3.36272 18.0794L5.98596 19.6225C7.31923 20.4068 9 19.4454 9 17.8986V7.74655H7V17.8986L4.5 16.428V7.57193L12 3.16016L19.5 7.57193V16.428L12 20.8398L10.2316 19.7996L9.21757 21.5234L11.1127 22.6382C11.6604 22.9604 12.3396 22.9604 12.8873 22.6382L20.6373 18.0794C21.1718 17.765 21.5 17.1912 21.5 16.571V7.42894C21.5 6.8088 21.1718 6.23498 20.6373 5.92056L12.8873 1.36173ZM13.9999 7.49998C12.6372 7.49998 11.6712 7.85114 11.0504 8.46993C10.4336 9.08484 10.3135 9.80885 10.3135 10.2313C10.3135 10.7862 10.4705 11.289 10.7951 11.7048C11.1076 12.1053 11.5199 12.3537 11.9146 12.5159C12.6341 12.8116 13.5358 12.9086 14.2587 12.9863L14.346 12.9957C15.1774 13.0856 15.7998 13.1627 16.2263 13.3411C16.4189 13.4217 16.4983 13.4954 16.531 13.5379C16.5524 13.5658 16.5934 13.6278 16.5934 13.7977C16.5934 14.0618 16.5027 14.2319 16.2204 14.3926C15.873 14.5904 15.2596 14.7396 14.3368 14.7396C13.4218 14.7396 12.7838 14.5705 12.4192 14.3181C12.1357 14.1218 11.9273 13.821 11.9822 13.1683L9.98923 13.0007C9.88075 14.29 10.3479 15.3167 11.2808 15.9625C12.1325 16.5521 13.2518 16.7396 14.3368 16.7396C15.414 16.7396 16.4289 16.5753 17.2098 16.1307C18.0558 15.6491 18.5934 14.8482 18.5934 13.7977C18.5934 13.2414 18.4381 12.7369 18.1162 12.3184C17.8054 11.9144 17.3942 11.6617 16.9981 11.496C16.2701 11.1915 15.3576 11.0932 14.6296 11.0147H14.6296L14.5609 11.0073C13.7274 10.9172 13.1036 10.8423 12.6748 10.666C12.4808 10.5863 12.4025 10.5137 12.3716 10.4742C12.3528 10.4501 12.3135 10.394 12.3135 10.2313C12.3135 10.1538 12.3363 10.0121 12.4624 9.88637C12.5847 9.76449 12.9618 9.49998 13.9999 9.49998C14.9904 9.49998 15.5674 9.60515 15.897 9.80064C16.1123 9.92838 16.3451 10.1633 16.3761 10.9329L18.3745 10.8524C18.3243 9.60675 17.8694 8.64527 16.9173 8.08051C16.0795 7.58349 15.0094 7.49998 13.9999 7.49998Z"},child:[]}]})(r)}function RiReactjsFill(r){return GenIcon({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M14.448 16.2394C13.8809 17.0412 13.2933 17.7714 12.7015 18.4146C14.3738 20.0375 15.9291 20.7975 16.792 20.2993C17.6549 19.8011 17.7744 18.0742 17.2051 15.8145C16.3521 16.0054 15.426 16.1492 14.448 16.2394ZM13.138 16.3265C12.7641 16.342 12.3845 16.3499 12.0003 16.3499C11.6161 16.3499 11.2365 16.342 10.8627 16.3265C11.2394 16.8188 11.6208 17.2749 12.0003 17.6905C12.3798 17.2749 12.7612 16.8188 13.138 16.3265ZM18.1787 8.43278C20.8434 9.19718 22.5837 10.4672 22.5837 11.9999C22.5837 13.5325 20.8434 14.8026 18.1787 15.567C18.8491 18.2569 18.6193 20.399 17.292 21.1653C15.9647 21.9316 13.9947 21.0595 12.0003 19.134C10.006 21.0595 8.03596 21.9316 6.70866 21.1653C5.38136 20.399 5.15158 18.2569 5.82195 15.567C3.15724 14.8026 1.41699 13.5325 1.41699 11.9999C1.41699 10.4672 3.15724 9.19718 5.82195 8.43278C5.15158 5.74288 5.38136 3.60075 6.70866 2.83443C8.03596 2.06811 10.006 2.94019 12.0003 4.86569C13.9947 2.94019 15.9647 2.06811 17.292 2.83443C18.6193 3.60075 18.8491 5.74288 18.1787 8.43278ZM17.2051 8.18527C17.7744 5.92558 17.6549 4.19865 16.792 3.70046C15.9291 3.20226 14.3738 3.96221 12.7015 5.58509C13.2933 6.2283 13.8809 6.95849 14.448 7.76031C15.426 7.85054 16.3521 7.99432 17.2051 8.18527ZM6.79554 15.8145C6.22624 18.0742 6.34577 19.8011 7.20866 20.2993C8.07155 20.7975 9.62688 20.0375 11.2992 18.4146C10.7073 17.7714 10.1197 17.0412 9.55262 16.2394C8.57467 16.1492 7.6485 16.0054 6.79554 15.8145ZM10.8627 7.67324C11.2365 7.65776 11.6161 7.64987 12.0003 7.64987C12.3845 7.64987 12.7641 7.65776 13.138 7.67324C12.7612 7.18096 12.3798 6.7248 12.0003 6.30922C11.6208 6.7248 11.2394 7.18096 10.8627 7.67324ZM9.55262 7.76031C10.1197 6.95849 10.7073 6.2283 11.2992 5.58509C9.62688 3.96221 8.07155 3.20226 7.20866 3.70046C6.34577 4.19865 6.22624 5.92558 6.79554 8.18527C7.6485 7.99432 8.57467 7.85054 9.55262 7.76031ZM13.8939 15.2797C14.2395 14.7728 14.5772 14.2366 14.9015 13.6749C15.2258 13.1131 15.5213 12.5526 15.7875 11.9999C15.5213 11.4471 15.2258 10.8866 14.9015 10.3249C14.5772 9.76311 14.2395 9.22694 13.8939 8.72005C13.2821 8.6742 12.649 8.64987 12.0003 8.64987C11.3517 8.64987 10.7185 8.6742 10.1067 8.72005C9.76112 9.22694 9.42347 9.76311 9.09914 10.3249C8.77481 10.8866 8.4793 11.4471 8.21312 11.9999C8.4793 12.5526 8.77481 13.1131 9.09914 13.6749C9.42347 14.2366 9.76112 14.7728 10.1067 15.2797C10.7185 15.3255 11.3517 15.3499 12.0003 15.3499C12.649 15.3499 13.2821 15.3255 13.8939 15.2797ZM15.1785 15.1484C15.7932 15.0683 16.3789 14.9661 16.9286 14.8452C16.7584 14.3087 16.5541 13.7504 16.3161 13.178C16.1426 13.5095 15.9596 13.8421 15.7675 14.1749C15.5754 14.5076 15.3788 14.8324 15.1785 15.1484ZM8.82218 8.85133C8.20747 8.93147 7.62174 9.03367 7.07208 9.15454C7.24223 9.691 7.44659 10.2494 7.68454 10.8218C7.85806 10.4903 8.04101 10.1576 8.23311 9.82487C8.42522 9.49212 8.62185 9.16736 8.82218 8.85133ZM7.07208 14.8452C7.62174 14.9661 8.20747 15.0683 8.82218 15.1484C8.62185 14.8324 8.42522 14.5076 8.23311 14.1749C8.04101 13.8421 7.85806 13.5095 7.68454 13.178C7.44659 13.7504 7.24223 14.3087 7.07208 14.8452ZM6.09439 14.6C6.35551 13.7659 6.69407 12.8919 7.10491 11.9999C6.69407 11.1078 6.35551 10.2339 6.09439 9.39969C3.85279 10.0365 2.41699 11.0035 2.41699 11.9999C2.41699 12.9962 3.85279 13.9632 6.09439 14.6ZM16.9286 9.15454C16.3789 9.03367 15.7932 8.93147 15.1785 8.85133C15.3788 9.16736 15.5754 9.49212 15.7675 9.82487C15.9596 10.1576 16.1426 10.4903 16.3161 10.8218C16.5541 10.2494 16.7584 9.691 16.9286 9.15454ZM17.9063 9.39969C17.6451 10.2339 17.3066 11.1078 16.8957 11.9999C17.3066 12.8919 17.6451 13.7659 17.9063 14.6C20.1479 13.9632 21.5837 12.9962 21.5837 11.9999C21.5837 11.0035 20.1479 10.0365 17.9063 9.39969ZM12.0003 13.879C10.9625 13.879 10.1212 13.0377 10.1212 11.9999C10.1212 10.962 10.9625 10.1207 12.0003 10.1207C13.0382 10.1207 13.8795 10.962 13.8795 11.9999C13.8795 13.0377 13.0382 13.879 12.0003 13.879Z"},child:[]}]})(r)}function RiTailwindCssLine(r){return GenIcon({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8.1267 6.21913C9.17785 5.37821 10.4989 5 12.0014 5C13.41 5 14.4863 5.33092 15.3593 5.83363C16.0983 6.25922 16.7127 6.84126 17.3072 7.44492C17.953 8.10062 18.3034 8.41984 18.7437 8.52979C19.217 8.64811 19.617 8.61249 19.9825 8.45585C20.3621 8.29317 20.7745 7.96918 21.2014 7.4L22.9715 8.24254C22.6005 9.72673 21.9241 10.9425 20.8761 11.7809C19.8249 12.6218 18.5038 13 17.0014 13C15.5931 13 14.517 12.669 13.6441 12.1664C12.8103 11.6862 12.2012 11.068 11.7232 10.583C11.0611 9.9112 10.7056 9.5817 10.2591 9.47021C9.78583 9.35189 9.3858 9.38751 9.02031 9.54415C8.64071 9.70683 8.22828 10.0308 7.80139 10.6L6.03125 9.75746C6.4023 8.27328 7.07869 7.05754 8.1267 6.21913ZM12.0014 7C11.1728 7 10.5057 7.14609 9.96802 7.40781C11.2881 7.49046 12.1492 8.30299 13.0247 9.12911C13.5289 9.60492 14.0379 10.0852 14.6422 10.4332C15.2012 10.7551 15.9313 11 17.0014 11C17.8299 11 18.497 10.8539 19.0347 10.5922C17.7147 10.5095 16.8538 9.69708 15.9786 8.87101C15.4744 8.39515 14.9655 7.91478 14.3612 7.56679C13.8022 7.24491 13.0719 7 12.0014 7ZM3.1267 12.2191C4.17785 11.3782 5.49894 11 7.00139 11C8.41001 11 9.48634 11.3309 10.3593 11.8336C11.0983 12.2592 11.7127 12.8413 12.3072 13.4449C12.953 14.1006 13.3034 14.4198 13.7437 14.5298C14.217 14.6481 14.617 14.6125 14.9825 14.4559C15.3621 14.2932 15.7745 13.9692 16.2014 13.4L17.9715 14.2425C17.6005 15.7267 16.9241 16.9425 15.8761 17.7809C14.8249 18.6218 13.5038 19 12.0014 19C10.5931 19 9.51701 18.669 8.64412 18.1664C7.81033 17.6862 7.20115 17.068 6.72319 16.583C6.06109 15.9112 5.70557 15.5817 5.25911 15.4702C4.78583 15.3519 4.3858 15.3875 4.02031 15.5441C3.64071 15.7068 3.22828 16.0308 2.80139 16.6L1.03125 15.7575C1.4023 14.2733 2.07869 13.0575 3.1267 12.2191ZM7.00136 13C6.17284 13 5.50571 13.1461 4.96802 13.4078C6.28809 13.4905 7.14918 14.303 8.02466 15.1291L8.02467 15.1291C8.52891 15.6049 9.03793 16.0852 9.64217 16.4332C10.2012 16.7551 10.9313 17 12.0014 17C12.8299 17 13.497 16.8539 14.0347 16.5922C12.7147 16.5095 11.8538 15.6971 10.9786 14.871C10.4744 14.3952 9.96546 13.9148 9.36117 13.5668C8.80225 13.2449 8.0719 13 7.00136 13Z"},child:[]}]})(r)}function SiDocker(r){return GenIcon({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M13.983 11.078h2.119a.186.186 0 00.186-.185V9.006a.186.186 0 00-.186-.186h-2.119a.185.185 0 00-.185.185v1.888c0 .102.083.185.185.185m-2.954-5.43h2.118a.186.186 0 00.186-.186V3.574a.186.186 0 00-.186-.185h-2.118a.185.185 0 00-.185.185v1.888c0 .102.082.185.185.185m0 2.716h2.118a.187.187 0 00.186-.186V6.29a.186.186 0 00-.186-.185h-2.118a.185.185 0 00-.185.185v1.887c0 .102.082.185.185.186m-2.93 0h2.12a.186.186 0 00.184-.186V6.29a.185.185 0 00-.185-.185H8.1a.185.185 0 00-.185.185v1.887c0 .102.083.185.185.186m-2.964 0h2.119a.186.186 0 00.185-.186V6.29a.185.185 0 00-.185-.185H5.136a.186.186 0 00-.186.185v1.887c0 .102.084.185.186.186m5.893 2.715h2.118a.186.186 0 00.186-.185V9.006a.186.186 0 00-.186-.186h-2.118a.185.185 0 00-.185.185v1.888c0 .102.082.185.185.185m-2.93 0h2.12a.185.185 0 00.184-.185V9.006a.185.185 0 00-.184-.186h-2.12a.185.185 0 00-.184.185v1.888c0 .102.083.185.185.185m-2.964 0h2.119a.185.185 0 00.185-.185V9.006a.185.185 0 00-.184-.186h-2.12a.186.186 0 00-.186.186v1.887c0 .102.084.185.186.185m-2.92 0h2.12a.185.185 0 00.184-.185V9.006a.185.185 0 00-.184-.186h-2.12a.185.185 0 00-.184.185v1.888c0 .102.082.185.185.185M23.763 9.89c-.065-.051-.672-.51-1.954-.51-.338.001-.676.03-1.01.087-.248-1.7-1.653-2.53-1.716-2.566l-.344-.199-.226.327c-.284.438-.49.922-.612 1.43-.23.97-.09 1.882.403 2.661-.595.332-1.55.413-1.744.42H.751a.751.751 0 00-.75.748 11.376 11.376 0 00.692 4.062c.545 1.428 1.355 2.48 2.41 3.124 1.18.723 3.1 1.137 5.275 1.137.983.003 1.963-.086 2.93-.266a12.248 12.248 0 003.823-1.389c.98-.567 1.86-1.288 2.61-2.136 1.252-1.418 1.998-2.997 2.553-4.4h.221c1.372 0 2.215-.549 2.68-1.009.309-.293.55-.65.707-1.046l.098-.288Z"},child:[]}]})(r)}function SiExpress(r){return GenIcon({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M24 18.588a1.529 1.529 0 01-1.895-.72l-3.45-4.771-.5-.667-4.003 5.444a1.466 1.466 0 01-1.802.708l5.158-6.92-4.798-6.251a1.595 1.595 0 011.9.666l3.576 4.83 3.596-4.81a1.435 1.435 0 011.788-.668L21.708 7.9l-2.522 3.283a.666.666 0 000 .994l4.804 6.412zM.002 11.576l.42-2.075c1.154-4.103 5.858-5.81 9.094-3.27 1.895 1.489 2.368 3.597 2.275 5.973H1.116C.943 16.447 4.005 19.009 7.92 17.7a4.078 4.078 0 002.582-2.876c.207-.666.548-.78 1.174-.588a5.417 5.417 0 01-2.589 3.957 6.272 6.272 0 01-7.306-.933 6.575 6.575 0 01-1.64-3.858c0-.235-.08-.455-.134-.666A88.33 88.33 0 010 11.577zm1.127-.286h9.654c-.06-3.076-2.001-5.258-4.59-5.278-2.882-.04-4.944 2.094-5.071 5.264z"},child:[]}]})(r)}function SiFlask(r){return GenIcon({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M7.172 20.36c-.914-.72-1.89-1.41-2.556-2.38-1.402-1.712-2.482-3.694-3.22-5.777-.446-1.355-.6-2.808-1.174-4.11-.602-.944.103-1.978 1.138-2.28.46-.087 1.272-.522.293-.211-.878.644-.963-.585-.063-.662.615-.082.84-.585.63-1.037-.66-.43 1.6-.903.463-1.544C1.5 1.08 4.34.835 3.64 2.285 3.473 3.4 5.624 2.08 5.125 3.368c.507.619 1.9.14 1.865 1.009.74.05.993.672 1.687.72.72.325 2.022.58 2.266 1.39-.713.566-2.364-1.165-2.443.398.215 2.31.16 4.689 1.004 6.888.4 1.332 1.37 2.38 2.244 3.418.837 1.016 1.971 1.73 3.127 2.333 1.014.478 2.107.795 3.213.994.448-.343 1.24-1.617 1.938-1.08.033.604-1.388 1.263-.067 1.196.776-.234 1.314.6 1.953-.152.588.697 2.446-.446 2.027.98-.566.364-1.392.144-1.959.646-.935-.467-1.68.418-2.715.306a19.86 19.86 0 01-3.484.29c-1.912-.15-3.865-.214-5.684-.88-1.024-.297-2.023-.881-2.924-1.464zm1.615.7c1 .432 1.978.888 3.074 1.026 1.74.24 3.537.614 5.283.274-.79-.357-1.608.14-2.395-.255-.944.203-1.957-.052-2.917-.177-1.092-.486-2.27-.82-3.291-1.452-1.277-.466.66.598 1.005.685.798.453-.877-.233-1.114-.421-.668-.375-.754-.297-.066.084.139.08.276.166.42.235zm-1.904-1.346c.97.359-.004-.682-.45-.622-.196-.341-.751-.557-.36-.74-.704.244-.737-.93-1.07-.763-.744-.235-.29-1.07-1.176-1.58-.081-.54-.882-1.008-1.138-1.822-.113-.416-.905-1.613-.418-.5.414 1.072 1.143 1.99 1.75 2.907.47.873 1.027 1.786 1.885 2.33.29.278.568.703.977.79zM4.09 16.647c.033-.146.177.317 0 0zm3.954 3.497c.215-.096-.31-.12 0 0zm.526.192c-.054-.265-.24.148 0 0zm.66.275c.312-.3-.484-.188 0 0zm1.127.63c.191-.282-.61-.107 0 0zM8.19 19.728c.487-.315-.63-.004 0 0zm.494.246c-.014-.166-.176.075 0 0zm2.47 1.542c.397.25 2.32.55 1.115.103-.2.042-2.23-.574-1.116-.103zm-3.921-3.054c-.04-.167-.616-.185 0 0zm1.15.67c.3-.21-.621-.16 0 0zm.966.593c.43-.162-.696-.163 0 0zm-2.584-1.773c.466.358 1.88.046.714-.213-.53-.283-1.727-.476-.912.17zm3.24 1.978c.193-.33-.815-.19 0 0zm-.984-.783c1.14.323-.958-.72-.281-.118l.15.068.13.05zm1.973 1.14c1.08.01-.975-.147 0 0zm-4.644-2.96c-.042-.2-.266.018 0 0zm6.47 3.985c.028-.363-.353.27 0 0zm-4.63-2.856c-.064-.191-.336-.008 0 0zm-1.738-1.254c.62-.037-.848-.273 0 0zm-2.06-1.332c-.077-.297-.674-.534 0 0zm5.407 3.435c-.114-.13-.054.028 0 0zm3.366 2.065c-.01-.197-.183.075 0 0zm-3.664-2.373c.06-.255-.528-.077 0 0zm-2.506-1.592c.46-.05-.74-.311 0 0zm4.241 2.637c.718-.285-.7-.14 0 0zM9.03 18.545c.827.106-.985-.563-.181-.06zm2.876 1.768c.773-.462.518 1.082 1.311.13.782-.57-.675.707.29.103.696-.467 1.726.22 2.376.445.468-.023.923.405 1.403.145.923-.25-1.806-.37-1.09-.81-.845.245-1.47-.294-1.885-.835-.948-.22-2.044-.703-2.517-1.542-.192-.315.28.044-.166-.47-.57-.508-.856-1.085-1.24-1.702-.457-.244-.51-.963-.557-.024.004-.593-.553-.992-.688-.826-.002-.571.595-.285.176-.707-.09-.592-.386-1.21-.475-1.877-.138-.322-.02-1.011-.473-.282-.165.77-.055-.947.202-.38.337-.58-.12-.51-.14-.43.22-.488.14-1.18-.057-.916.117-.517.185-1.902-.175-1.656.218-.54.414-2.473-.534-1.736-.384.005-1.048.14-1.363.296.986.543-.1.196-.5.11-.052.502-.45.285-.946.29.793.098-.386.81-.841.534-.59.282.51.987.012 1.205.06.328-.905-.12-.83.64-.573-.241-.078.9.209.514.975.264.686.866.71 1.437-.158.333-.784-.783-.14-.731-.507-.827-.561-.3-.984.085-.1.028 1.079.547.34.803.65.1.668.67.8 1.03.39.407.31-.45.779.04-.296-.436-1.567-1.228-.544-.974-.005-.44-.185-.793.129-.784.31-.562-.325 1.387.375.672.193-.085.24-.563.59.045.505.498.182.858-.531.403.127.433.954.587.799 1.265.165.595.395.376.596.342.158.578.247.153.255-.123.72.155.552.58.778.88.497.224-.712-1.522.142-.526.898.81.337 1.15-.47 1.02.51-.041.675.69 1.313.664.582.277.975 1.34-.027.897-.348-.313-1.58-.7-.573-.104.929.43 1.665.688 2.561 1.227.64.458.918.982 1.16 1.086-.538.257-1.623-.206-.817-.348-.503-.091-1.068-.345-.587.28.41.343 1.45.306 1.637.345-.159.348-.43.376.006.403-.486.26.156.3.201.448zm-.994-2.808c-.296-.31-.373-.89-.053-.385.164.066.525.947.053.385zm3.238 2.057c.185-.011.006.14 0 0zm-3.706-2.816c-.01-.468.107.36 0 0zm-.322-.433c-.372-.72.47.204 0 0zm-3.9-2.692c.219-.06.108.374 0 0zm3.104 1.682c.134-.504.158.424 0 0zm-2.192-1.525c-.155-.278.323.26 0 0zm1.882.604c-.352-.79.25-.432.078.13zM5.77 12.217c-.158-.26-.418-1.02-.334-1.252.076.378.804 1.627.357.518-.494-.93.59.302.702.534.05.23-.305-.063-.064.478-.44-.617-.26.34-.661-.278zm-1.003-.691c.04-.603.23.413 0 0zm.45.155c.216-.455.366.634 0 0zm-1.084-.84c-.374-.37-.644-.713.017-.23.255.01-.566-.778.06-.25.66.12.327 1.082-.077.48zm.57-.015c.217-.215.115.212 0 0zm.35.113c-.328-.617.4.258 0 0zm-.697-.667c-1.086-.966 1.365.506.177.18zm3.11 1.808c-.47-.282-.123-1.984.037-.82.457-.148-.025.6.315.594-.053.473-.206.643-.35.226zm1.15.68c.048-.513.099.35 0 0zm-.2-.198c.054-.22.007.258 0 0zM4.57 9.955c-.697-.963 2.027.973.447.244-.165-.043-.364-.06-.447-.244zm2.216 1.175c-.066-.81.147.134 0 0zm1.682 1.079c.13-.462.01.305 0 0zM4.676 9.587c.415-.088 1.718.729.52.234-.132-.148-.416-.08-.52-.234zm3.56 1.775c.044-.83.248-.495.002.118zM4.985 9.299c.169-.248-.45-1.12.089-.313.232.185.672.31.283.387.61.539-.15.146-.372-.074zm3.075 1.804c.117-.944.103.553 0 0zM4.632 8.427c.129-.055.068.172 0 0zm.802.478c.206-.434.38.483 0 0zm2.263 1.259c-.002-.167.043.242 0 0zm-.131-.29c-.314-.776.292.41 0 0zm-.193-.51c-.053-.32.18.404 0 0zm.314-.51c-.216-.38.272-1.673.326-.87-.227.625-.065.975.093.136.293-.66-.063 1.303-.42.735zm.322-1.923c.094-.115.02.139 0 0zM7.47 17.544c-.128-.111.016.07 0 0zm1.11.56c.615.16.612-.095.055-.17-.3-.28-1.246-.575-.4-.035.057.142.235.139.344.206zM6.389 16.65c.34.253 1.28.719.484.096.269-.312-.514-.478-.254-.686-.66-.404-.52-.368-.058-.356-.794-.354.114-.328.07-.51-.305-.06-1.52-.54-.804.04-.726-.37-.173.138-.392.084-.743-.202.66.565-.118.375.425.337 1.146.864.18.357-.128.183.69.46.892.6zm1.16.667c1.41.454-.691-.556 0 0zm5.94 3.598c.02-.28-.193.24 0 0zm.611.257c.325-.315.013.503.54-.077.005-.415-.017-.66-.606-.156-.162.09-.234.473.066.233zm-9.692-6.087c-.1-.393-.7-.39 0 0zm.652.428c-.242-.402-.864-.364 0 0zm3.71 2.237c.362.32 1.662.236.44.04-.182-.27-1.151-.204-.44-.04zm5.097 3.149c.558-.468-.54.208 0 0zm1.16.796c.003-.15-.24.066 0 0zm.001-.21c.617-.654-.598.039 0 0zM2.805 13.743c-.526-.75-.327-1.088-.835-1.7-.096-.47-.87-1.533-.4-.406.43.659.558 1.679 1.235 2.106zm12.03 7.534c1.135-.734-.466-.32 0 0zm.866.34c.57-.488-.36-.102 0 0zM4.215 14.255c.163-.242-.42-.031 0 0zm11.305 7.129c.551-.355-.126-.3-.1.032zm-7.47-4.71c-.02-.24-.291.02 0 0zm.46.267c-.145-.297-.224.047 0 0zm7.894 4.684c.705-.51-.428-.098-.148.096zm-.27-.13c.574-.482-.607.213 0 0zm1.38.918c.386-.258-.469-.083 0 0zM4.57 14.08c.517.116 2.066 1.274 1.152.08-.468-.138-.187-1.283-.665-1.08.32.535.264.763-.41.426-.845-.413-.474.204-.31.374-.224.052.299.196.233.2zm-2.356-1.86c.092-.383-.853-2.107-.446-.864.146.26.13.754.446.864zm4.324 2.666c-.266-.223-.013-.032 0 0zm.656.152c0-.405-.725-.164 0 0zm5.681 3.583c-.108-.278-.428-.006 0 0zm.273.199c-.04-.155-.157.03 0 0zM15.4 20.24c.216-.16-.27-.02 0 0zM3.39 12.52c.62-.24-.664-.17 0 0zm8.984 5.662c-.007-.401-.395.1 0 0zm-9.23-6.231c.399-.135-.367-.09 0 0zm1.156.56c-.007-.133-.122.05 0 0zm14.09 8.64c.512-.104 1.678.26 1.866-.136-.62-.015-2.15-.438-2.222.1l.136.023.22.013zM4.667 12.603c.009-.407-.317-.015 0 0zM1.63 10.495c-.138-.775-.525-.118 0 0zm.724.182c.009-.25-.663-.224 0 0zm.414.203c-.12-.097-.094.122 0 0zm2.605 1.67c.122-.112-.29-.083 0 0zm-2.88-2.128c-.07-.585-.84-.088 0 0zm-1.486-.964c-.02-.27-.144.102 0 0zm.22-.167c-.035-.32-.19.04 0 0zm1.22.729c.518-.203-.94-.42-.104-.04zm16.334 10.089c.33-.303-.42-.094 0 0zm1.974 1.023c.132-.392-.334.05 0 0zM2.573 9.38c.055-.38-.41.075 0 0zM.837 8.218c-.093-.535-.08-1.474.812-1.156-1.191.236.824 1.48.57.498.5.024.98-.296.716.19.987-.11 1.67-.964 2.624-.845.742-.098 1.554-.172 2.354-.471.658-.048 1.29-.756.93-1.175-.896-.076-1.835.036-2.827.233-1.098.228-2.096.662-3.205.849-1.08.145.217.4-.092.456-.564.196.672.328-.073.534-.46-.088-.94-.246-.743-.73-1.035.133-1.945.563-1.127 1.616h.06zm2.494-1.27c.243-.894 1.3.735.398.118-.108-.08-.285-.146-.398-.12zm.047-.434c.35-.26.186.146 0 0zm.445.008c.032-.411 1.018.218.163.148zm.608-.245c.222-.26.064.23 0 0zm.156-.104c.37-.444 2.095-.283.832-.043-.338-.255-.598.15-.832.043zm2.25-.347c-.055-1.214 1.119.432 0 0zm.64-.004c.233-.612.906-.245.108-.123.017.065-.024.316-.108.123zM2.322 9.067c.697-.427-.741-.37 0 0zm.515.144c.245-.26-.531-.106 0 0zm-1.52-1.08c.399-.305-.471-.116 0 0zm20.602 12.89c.012-.355-.304.16 0 0zm-2.093-1.43c.06-.408-.27.037 0 0zm2.67 1.568c.557 0 1.688-.173.475-.173-.19.03-1.109.024-.476.173zM3.29 8.959c.45-.03.706-.497-.087-.47-1.23-.127 1.084.42-.158.264-.167.11.236.237.245.207zm.398.202c-.048-.29-.14.154 0 0zm.47-1.257c.197-.243-.27-.065 0 0zm-1.5-2.508c.806-.274 1.907-.581 2.287.135-.387-.466-.156-.924.21-.243.516.689.775-.313.438-.545.383.476.819.7.257.03.61-.734-1.223.097-1.64.088-.2.09-2.071.477-1.551.535zm.472-.903c.46-.347 1.588.206.864-.345-.07-.062-1.586.418-.864.345zm1.674.069c.538.013-.231-.722.409-.39-.105-.343-.746-.407-1.06-.544-.176.314.36.938.65.934zm-1.38-1.52c.186-.252-.326.128 0 0zm.684.164c.866-.115-.22-.373-.174-.01zm-1.277-1c-.61-.796 1.146.134.527-.7-.522-.415-1.023.468-.527.7zm7.824 4.215c.28-.496-1.155-.668-.188-.175.09.03.07.21.188.175z"},child:[]}]})(r)}function SiGnubash(r){return GenIcon({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M21.038,4.9l-7.577-4.498C13.009,0.134,12.505,0,12,0c-0.505,0-1.009,0.134-1.462,0.403L2.961,4.9 C2.057,5.437,1.5,6.429,1.5,7.503v8.995c0,1.073,0.557,2.066,1.462,2.603l7.577,4.497C10.991,23.866,11.495,24,12,24 c0.505,0,1.009-0.134,1.461-0.402l7.577-4.497c0.904-0.537,1.462-1.529,1.462-2.603V7.503C22.5,6.429,21.943,5.437,21.038,4.9z M15.17,18.946l0.013,0.646c0.001,0.078-0.05,0.167-0.111,0.198l-0.383,0.22c-0.061,0.031-0.111-0.007-0.112-0.085L14.57,19.29 c-0.328,0.136-0.66,0.169-0.872,0.084c-0.04-0.016-0.057-0.075-0.041-0.142l0.139-0.584c0.011-0.046,0.036-0.092,0.069-0.121 c0.012-0.011,0.024-0.02,0.036-0.026c0.022-0.011,0.043-0.014,0.062-0.006c0.229,0.077,0.521,0.041,0.802-0.101 c0.357-0.181,0.596-0.545,0.592-0.907c-0.003-0.328-0.181-0.465-0.613-0.468c-0.55,0.001-1.064-0.107-1.072-0.917 c-0.007-0.667,0.34-1.361,0.889-1.8l-0.007-0.652c-0.001-0.08,0.048-0.168,0.111-0.2l0.37-0.236 c0.061-0.031,0.111,0.007,0.112,0.087l0.006,0.653c0.273-0.109,0.511-0.138,0.726-0.088c0.047,0.012,0.067,0.076,0.048,0.151 l-0.144,0.578c-0.011,0.044-0.036,0.088-0.065,0.116c-0.012,0.012-0.025,0.021-0.038,0.028c-0.019,0.01-0.038,0.013-0.057,0.009 c-0.098-0.022-0.332-0.073-0.699,0.113c-0.385,0.195-0.52,0.53-0.517,0.778c0.003,0.297,0.155,0.387,0.681,0.396 c0.7,0.012,1.003,0.318,1.01,1.023C16.105,17.747,15.736,18.491,15.17,18.946z M19.143,17.859c0,0.06-0.008,0.116-0.058,0.145 l-1.916,1.164c-0.05,0.029-0.09,0.004-0.09-0.056v-0.494c0-0.06,0.037-0.093,0.087-0.122l1.887-1.129 c0.05-0.029,0.09-0.004,0.09,0.056V17.859z M20.459,6.797l-7.168,4.427c-0.894,0.523-1.553,1.109-1.553,2.187v8.833 c0,0.645,0.26,1.063,0.66,1.184c-0.131,0.023-0.264,0.039-0.398,0.039c-0.42,0-0.833-0.114-1.197-0.33L3.226,18.64 c-0.741-0.44-1.201-1.261-1.201-2.142V7.503c0-0.881,0.46-1.702,1.201-2.142l7.577-4.498c0.363-0.216,0.777-0.33,1.197-0.33 c0.419,0,0.833,0.114,1.197,0.33l7.577,4.498c0.624,0.371,1.046,1.013,1.164,1.732C21.686,6.557,21.12,6.411,20.459,6.797z"},child:[]}]})(r)}function SiMongodb(r){return GenIcon({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M17.193 9.555c-1.264-5.58-4.252-7.414-4.573-8.115-.28-.394-.53-.954-.735-1.44-.036.495-.055.685-.523 1.184-.723.566-4.438 3.682-4.74 10.02-.282 5.912 4.27 9.435 4.888 9.884l.07.05A73.49 73.49 0 0111.91 24h.481c.114-1.032.284-2.056.51-3.07.417-.296.604-.463.85-.693a11.342 11.342 0 003.639-8.464c.01-.814-.103-1.662-.197-2.218zm-5.336 8.195s0-8.291.275-8.29c.213 0 .49 10.695.49 10.695-.381-.045-.765-1.76-.765-2.405z"},child:[]}]})(r)}function SiMysql(r){return GenIcon({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M16.405 5.501c-.115 0-.193.014-.274.033v.013h.014c.054.104.146.18.214.273.054.107.1.214.154.32l.014-.015c.094-.066.14-.172.14-.333-.04-.047-.046-.094-.08-.14-.04-.067-.126-.1-.18-.153zM5.77 18.695h-.927a50.854 50.854 0 00-.27-4.41h-.008l-1.41 4.41H2.45l-1.4-4.41h-.01a72.892 72.892 0 00-.195 4.41H0c.055-1.966.192-3.81.41-5.53h1.15l1.335 4.064h.008l1.347-4.064h1.095c.242 2.015.384 3.86.428 5.53zm4.017-4.08c-.378 2.045-.876 3.533-1.492 4.46-.482.716-1.01 1.073-1.583 1.073-.153 0-.34-.046-.566-.138v-.494c.11.017.24.026.386.026.268 0 .483-.075.647-.222.197-.18.295-.382.295-.605 0-.155-.077-.47-.23-.944L6.23 14.615h.91l.727 2.36c.164.536.233.91.205 1.123.4-1.064.678-2.227.835-3.483zm12.325 4.08h-2.63v-5.53h.885v4.85h1.745zm-3.32.135l-1.016-.5c.09-.076.177-.158.255-.25.433-.506.648-1.258.648-2.253 0-1.83-.718-2.746-2.155-2.746-.704 0-1.254.232-1.65.697-.43.508-.646 1.256-.646 2.245 0 .972.19 1.686.574 2.14.35.41.877.615 1.583.615.264 0 .506-.033.725-.098l1.325.772.36-.622zM15.5 17.588c-.225-.36-.337-.94-.337-1.736 0-1.393.424-2.09 1.27-2.09.443 0 .77.167.977.5.224.362.336.936.336 1.723 0 1.404-.424 2.108-1.27 2.108-.445 0-.77-.167-.978-.5zm-1.658-.425c0 .47-.172.856-.516 1.156-.344.3-.803.45-1.384.45-.543 0-1.064-.172-1.573-.515l.237-.476c.438.22.833.328 1.19.328.332 0 .593-.073.783-.22a.754.754 0 00.3-.615c0-.33-.23-.61-.648-.845-.388-.213-1.163-.657-1.163-.657-.422-.307-.632-.636-.632-1.177 0-.45.157-.81.47-1.085.315-.278.72-.415 1.22-.415.512 0 .98.136 1.4.41l-.213.476a2.726 2.726 0 00-1.064-.23c-.283 0-.502.068-.654.206a.685.685 0 00-.248.524c0 .328.234.61.666.85.393.215 1.187.67 1.187.67.433.305.648.63.648 1.168zm9.382-5.852c-.535-.014-.95.04-1.297.188-.1.04-.26.04-.274.167.055.053.063.14.11.214.08.134.218.313.346.407.14.11.28.216.427.31.26.16.555.255.81.416.145.094.293.213.44.313.073.05.12.14.214.172v-.02c-.046-.06-.06-.147-.105-.214-.067-.067-.134-.127-.2-.193a3.223 3.223 0 00-.695-.675c-.214-.146-.682-.35-.77-.595l-.013-.014c.146-.013.32-.066.46-.106.227-.06.435-.047.67-.106.106-.027.213-.06.32-.094v-.06c-.12-.12-.21-.283-.334-.395a8.867 8.867 0 00-1.104-.823c-.21-.134-.476-.22-.697-.334-.08-.04-.214-.06-.26-.127-.12-.146-.19-.34-.275-.514a17.69 17.69 0 01-.547-1.163c-.12-.262-.193-.523-.34-.763-.69-1.137-1.437-1.826-2.586-2.5-.247-.14-.543-.2-.856-.274-.167-.008-.334-.02-.5-.027-.11-.047-.216-.174-.31-.235-.38-.24-1.364-.76-1.644-.072-.18.434.267.862.422 1.082.115.153.26.328.34.5.047.116.06.235.107.356.106.294.207.622.347.897.073.14.153.287.247.413.054.073.146.107.167.227-.094.136-.1.334-.154.5-.24.757-.146 1.693.194 2.25.107.166.362.534.703.393.3-.12.234-.5.32-.835.02-.08.007-.133.048-.187v.015c.094.188.188.367.274.555.206.328.566.668.867.895.16.12.287.328.487.402v-.02h-.015c-.043-.058-.1-.086-.154-.133a3.445 3.445 0 01-.35-.4 8.76 8.76 0 01-.747-1.218c-.11-.21-.202-.436-.29-.643-.04-.08-.04-.2-.107-.24-.1.146-.247.273-.32.453-.127.288-.14.642-.188 1.01-.027.007-.014 0-.027.014-.214-.052-.287-.274-.367-.46-.2-.475-.233-1.238-.06-1.785.047-.14.247-.582.167-.716-.042-.127-.174-.2-.247-.303a2.478 2.478 0 01-.24-.427c-.16-.374-.24-.788-.414-1.162-.08-.173-.22-.354-.334-.513-.127-.18-.267-.307-.368-.52-.033-.073-.08-.194-.027-.274.014-.054.042-.075.094-.09.088-.072.335.022.422.062.247.1.455.194.662.334.094.066.195.193.315.226h.14c.214.047.455.014.655.073.355.114.675.28.962.46a5.953 5.953 0 012.085 2.286c.08.154.115.295.188.455.14.33.313.663.455.982.14.315.275.636.476.897.1.14.502.213.682.286.133.06.34.115.46.188.23.14.454.3.67.454.11.076.443.243.463.378z"},child:[]}]})(r)}function SiPandas(r){return GenIcon({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M16.922 0h2.623v18.104h-2.623zm-4.126 12.94h2.623v2.57h-2.623zm0-7.037h2.623v5.446h-2.623zm0 11.197h2.623v5.446h-2.623zM4.456 5.896h2.622V24H4.455zm4.213 2.559h2.623v2.57H8.67zm0 4.151h2.623v5.447H8.67zm0-11.187h2.623v5.446H8.67Z"},child:[]}]})(r)}function SiPytorch(r){return GenIcon({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12.005 0L4.952 7.053a9.865 9.865 0 000 14.022 9.866 9.866 0 0014.022 0c3.984-3.9 3.986-10.205.085-14.023l-1.744 1.743c2.904 2.905 2.904 7.634 0 10.538s-7.634 2.904-10.538 0-2.904-7.634 0-10.538l4.647-4.646.582-.665zm3.568 3.899a1.327 1.327 0 00-1.327 1.327 1.327 1.327 0 001.327 1.328A1.327 1.327 0 0016.9 5.226 1.327 1.327 0 0015.573 3.9z"},child:[]}]})(r)}function SiRabbitmq(r){return GenIcon({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M23.035 9.601h-7.677a.956.956 0 01-.962-.962V.962a.956.956 0 00-.962-.956H10.56a.956.956 0 00-.962.956V8.64a.956.956 0 01-.962.962H5.762a.956.956 0 01-.961-.962V.962A.956.956 0 003.839 0H.959a.956.956 0 00-.956.962v22.076A.956.956 0 00.965 24h22.07a.956.956 0 00.962-.962V10.58a.956.956 0 00-.962-.98zm-3.86 8.152a1.437 1.437 0 01-1.437 1.443h-1.924a1.437 1.437 0 01-1.436-1.443v-1.917a1.437 1.437 0 011.436-1.443h1.924a1.437 1.437 0 011.437 1.443z"},child:[]}]})(r)}function SiScikitlearn(r){return GenIcon({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M15.601 5.53c-1.91.035-3.981.91-5.63 2.56-2.93 2.93-2.083 8.53-1.088 9.525.805.804 6.595 1.843 9.526-1.088a9.74 9.74 0 0 0 .584-.643c.043-.292.205-.66.489-1.106a1.848 1.848 0 0 1-.537.176c-.144.265-.37.55-.676.855-.354.335-.607.554-.76.656a.795.795 0 0 1-.437.152c-.35 0-.514-.308-.494-.924-.22.316-.425.549-.612.7a.914.914 0 0 1-.578.224c-.194 0-.36-.09-.496-.273a1.03 1.03 0 0 1-.193-.507 4.016 4.016 0 0 1-.726.583c-.224.132-.47.197-.74.197-.3 0-.543-.096-.727-.288a.978.978 0 0 1-.257-.524v.004c-.3.276-.564.48-.79.611a1.295 1.295 0 0 1-.649.197.693.693 0 0 1-.571-.275c-.145-.183-.218-.43-.218-.739 0-.464.101-1.02.302-1.67.201-.65.445-1.25.733-1.797l.842-.312a.21.21 0 0 1 .06-.013c.063 0 .116.047.157.14.04.095.061.221.061.38 0 .451-.104.888-.312 1.31-.207.422-.532.873-.974 1.352-.018.23-.027.388-.027.474 0 .193.036.345.106.458.071.113.165.169.282.169a.71.71 0 0 0 .382-.13c.132-.084.333-.26.602-.523.028-.418.187-.798.482-1.142.324-.38.685-.569 1.08-.569.206 0 .37.054.494.16a.524.524 0 0 1 .186.417c0 .458-.486.829-1.459 1.114.088.43.32.646.693.646a.807.807 0 0 0 .417-.117c.129-.076.321-.243.575-.497.032-.252.118-.495.259-.728.182-.3.416-.544.701-.73.285-.185.537-.278.756-.278.276 0 .47.127.58.381l.677-.374h.186l-.292.971c-.15.488-.226.823-.226 1.004 0 .19.067.285.202.285.086 0 .181-.045.285-.137.104-.092.25-.232.437-.42v.001c.143-.155.274-.32.392-.494-.19-.084-.285-.21-.285-.375 0-.17.058-.352.174-.545.116-.194.275-.29.479-.29.172 0 .258.088.258.265 0 .139-.05.338-.149.596.367-.04.687-.32.961-.842l.228-.01c1.059-2.438.828-5.075-.83-6.732-1.019-1.02-2.408-1.5-3.895-1.471zm4.725 8.203a8.938 8.938 0 0 1-1.333 2.151 1.09 1.09 0 0 0-.012.147c0 .168.047.309.14.423.092.113.206.17.34.17.296 0 .714-.264 1.254-.787-.001.04-.003.08-.003.121 0 .146.012.368.036.666l.733-.172c0-.2.003-.357.01-.474.01-.157.033-.33.066-.517.02-.11.07-.216.152-.315l.186-.216a5.276 5.276 0 0 1 .378-.397c.062-.055.116-.099.162-.13a.26.26 0 0 1 .123-.046c.055 0 .083.035.083.106 0 .07-.052.236-.156.497-.194.486-.292.848-.292 1.084 0 .175.046.314.136.418a.45.45 0 0 0 .358.155c.365 0 .803-.269 1.313-.808v-.381c-.361.426-.623.64-.784.64-.109 0-.163-.067-.163-.2 0-.1.065-.316.195-.65.19-.486.285-.836.285-1.048a.464.464 0 0 0-.112-.319.36.36 0 0 0-.282-.127c-.165 0-.354.077-.567.233-.213.156-.5.436-.863.84.053-.262.165-.622.335-1.08l-.809.156a6.54 6.54 0 0 0-.399 1.074c-.04.156-.07.316-.092.48a7.447 7.447 0 0 1-.49.45.38.38 0 0 1-.229.08.208.208 0 0 1-.174-.082.352.352 0 0 1-.064-.222c0-.1.019-.214.056-.343.038-.13.12-.373.249-.731l.308-.849zm-17.21-2.927c-.863-.016-1.67.263-2.261.854-1.352 1.352-1.07 3.827.631 5.527 1.7 1.701 4.95 1.21 5.527.632.467-.466 1.07-3.827-.631-5.527-.957-.957-2.158-1.465-3.267-1.486zm12.285.358h.166v.21H15.4zm.427 0h.166v.865l.46-.455h.195l-.364.362.428.684h-.198l-.357-.575-.164.166v.41h-.166zm1.016 0h.166v.21h-.166zm.481.122h.166v.288h.172v.135h-.172v.717c0 .037.006.062.02.075.012.013.037.02.074.02a.23.23 0 0 0 .078-.01v.141a.802.802 0 0 1-.136.014.23.23 0 0 1-.15-.043.15.15 0 0 1-.052-.123v-.79h-.141v-.136h.141zm-3.562.258c.081 0 .15.012.207.038.057.024.1.061.13.11s.045.106.045.173h-.176c-.006-.111-.075-.167-.208-.167a.285.285 0 0 0-.164.041.134.134 0 0 0-.06.117c0 .035.015.065.045.088.03.024.08.044.15.06l.16.039a.47.47 0 0 1 .224.105c.047.046.07.108.07.186a.3.3 0 0 1-.052.175.327.327 0 0 1-.152.116.585.585 0 0 1-.226.041c-.136 0-.24-.03-.309-.088-.069-.059-.105-.149-.109-.269h.176c.004.037.01.065.017.084a.166.166 0 0 0 .034.054c.044.043.112.065.204.065a.31.31 0 0 0 .177-.045.139.139 0 0 0 .067-.119.116.116 0 0 0-.038-.09.287.287 0 0 0-.124-.055l-.156-.038a1.248 1.248 0 0 1-.159-.05.359.359 0 0 1-.098-.061.22.22 0 0 1-.058-.083.32.32 0 0 1-.016-.108c0-.096.036-.174.109-.232a.45.45 0 0 1 .29-.087zm1.035 0a.46.46 0 0 1 .202.043.351.351 0 0 1 .187.212.577.577 0 0 1 .023.126h-.168a.256.256 0 0 0-.078-.168.242.242 0 0 0-.17-.06.248.248 0 0 0-.155.05.306.306 0 0 0-.1.144.662.662 0 0 0-.034.224.58.58 0 0 0 .035.214.299.299 0 0 0 .101.135.261.261 0 0 0 .157.048c.142 0 .227-.084.256-.252h.167a.519.519 0 0 1-.065.22.35.35 0 0 1-.146.138.464.464 0 0 1-.216.048.448.448 0 0 1-.246-.066.441.441 0 0 1-.161-.192.703.703 0 0 1-.057-.293c0-.085.01-.163.032-.233a.522.522 0 0 1 .095-.182.403.403 0 0 1 .15-.117.453.453 0 0 1 .191-.04zm.603.03h.166v1.046H15.4zm1.443 0h.166v1.046h-.166zm-5.05.618c-.08 0-.2.204-.356.611-.155.407-.308.977-.459 1.71.281-.312.509-.662.683-1.05.175-.387.262-.72.262-.999a.455.455 0 0 0-.036-.197c-.025-.05-.056-.075-.093-.075zm4.662 1.797c-.221 0-.431.188-.629.563-.197.376-.296.722-.296 1.038 0 .12.029.216.088.29a.273.273 0 0 0 .223.111c.221 0 .43-.188.625-.565.196-.377.294-.725.294-1.043a.457.457 0 0 0-.083-.29.269.269 0 0 0-.222-.104zm-2.848.007c-.146 0-.285.11-.417.333-.133.222-.2.51-.2.866.566-.159.849-.452.849-.881 0-.212-.077-.318-.232-.318Z"},child:[]}]})(r)}function SiSqlalchemy(r){return GenIcon({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M11.8 15.955a44.068 44.068 0 0 1-1.673-.691c-1.736-.757-1.981-.772-2.499-.143-.119.146-.25.236-.287.2-.111-.111.219-.644.617-.993.325-.285.433-.325.791-.285.228.025.985.29 1.682.586 1.573.669 2.034.811 2.635.811.731 0 1.106-.512.876-1.192-.057-.171-.04-.228.074-.228.213 0 .322.797.168 1.255a1.617 1.617 0 0 1-.424.614c-.251.211-.41.257-.879.254a3.853 3.853 0 0 1-1.082-.188h.001Zm.301-2.225c0-.048.179-.134.401-.188l.401-.099.086-1.446c.094-1.599.025-3.172-.148-3.383-.063-.074-.253-.165-.427-.205-.705-.156-.236-.264 1.133-.264 1.368 0 1.803.099 1.152.264-.561.14-.564.148-.564 2.43 0 1.266.046 2.22.111 2.342.092.171.228.207.752.207 1.081 0 1.453-.255 1.747-1.203.088-.284.315-.233.236.054-.037.134-.097.54-.134.91l-.068.669H14.44c-1.286 0-2.339-.04-2.339-.088Zm5.312-.068c0-.086.083-.171.219-.236.183-.086.302-.265.734-1.11.686-1.337 1.767-3.634 1.87-3.978.079-.262.097-.276.392-.31.171-.02.313-.031.316-.025l.527 1.152c.284.628.856 1.824 1.271 2.654.695 1.397.772 1.523 1.005 1.636.142.069.253.174.253.237 0 .099-.122.111-1.175.111-1.056 0-1.175-.012-1.175-.114 0-.068.091-.142.236-.191.134-.043.236-.122.236-.182 0-.057-.139-.432-.31-.834l-.31-.731h-2.35l-.225.495c-.421.928-.43 1.147-.037 1.252.196.054.25.097.227.185-.025.103-.127.117-.867.117-.794.006-.837 0-.837-.128Zm-15.652.025a10.933 10.933 0 0 1-.808-.196l-.549-.154.282-.518.281-.518-.227-.281c-.322-.399-.737-1.272-.74-1.554-.003-.657.851-1.61 1.898-2.122.72-.353 1.291-.362 2.009-.026l.54.253.157-.224c.085-.123.156-.285.156-.356 0-.071.071-.134.157-.134.085 0 .156.023.156.048 0 .063-.629 1.651-.669 1.691-.017.016-.187-.063-.381-.177-.546-.321-1.232-.535-1.764-.549-1.238-.031-1.667 1.178-.794 2.236l.308.373.839-.68c.942-.76 1.05-.777 1.784-.27.825.569.839 1.434.042 2.339-.705.805-1.431 1.027-2.677.819Zm5.984-.165c-.646-.301-1.229-.876-1.565-1.547-.538-1.076-.373-1.765.646-2.695.856-.782 1.556-1.087 2.498-1.087.68 0 .825.037 1.266.307 1.044.646 1.303 1.878.675 3.221-.737 1.577-2.294 2.37-3.52 1.801Zm-3.872-.702c.409-.322.381-.917-.063-1.389-.558-.592-.731-.566-1.713.253-.976.814-.982.783.185 1.155.771.251 1.255.242 1.591-.019Zm6.034-.046c.484-.239.817-1.343.68-2.259-.17-1.13-1.698-1.901-2.819-1.423-1.153.493-1.17 1.804-.037 2.985.791.828 1.471 1.044 2.176.697Zm11.359-1.414c.04-.071-.845-2.003-.928-2.023-.06-.017-.976 1.872-.976 2.014 0 .072 1.861.08 1.904.009Z"},child:[]}]})(r)}function SiTensorflow(r){return GenIcon({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M1.292 5.856L11.54 0v24l-4.095-2.378V7.603l-6.168 3.564.015-5.31zm21.43 5.311l-.014-5.31L12.46 0v24l4.095-2.378V14.87l3.092 1.788-.018-4.618-3.074-1.756V7.603l6.168 3.564z"},child:[]}]})(r)}function SiUnity(r){return GenIcon({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"m12.9288 4.2939 3.7997 2.1929c.1366.077.1415.2905 0 .3675l-4.515 2.6076a.4192.4192 0 0 1-.4246 0L7.274 6.8543c-.139-.0745-.1415-.293 0-.3675l3.7972-2.193V0L1.3758 5.5977V16.793l3.7177-2.1456v-4.3858c-.0025-.1565.1813-.2682.318-.1838l4.5148 2.6076a.4252.4252 0 0 1 .2136.3676v5.2127c.0025.1565-.1813.2682-.3179.1838l-3.7996-2.1929-3.7178 2.1457L12 24l9.6954-5.5977-3.7178-2.1457-3.7996 2.1929c-.1341.082-.3229-.0248-.3179-.1838V13.053c0-.1565.087-.2956.2136-.3676l4.5149-2.6076c.134-.082.3228.0224.3179.1838v4.3858l3.7177 2.1456V5.5977L12.9288 0Z"},child:[]}]})(r)}const LayoutGroupContext=reactExports.createContext({});function useConstant(r){const e=reactExports.useRef(null);return e.current===null&&(e.current=r()),e.current}const isBrowser=typeof window<"u",useIsomorphicLayoutEffect=isBrowser?reactExports.useLayoutEffect:reactExports.useEffect,PresenceContext=reactExports.createContext(null),MotionConfigContext=reactExports.createContext({transformPagePoint:r=>r,isStatic:!1,reducedMotion:"never"});function usePresence(r=!0){const e=reactExports.useContext(PresenceContext);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:o,register:y}=e,R=reactExports.useId();reactExports.useEffect(()=>{if(r)return y(R)},[r]);const G=reactExports.useCallback(()=>r&&o&&o(R),[R,o,r]);return!t&&o?[!1,G]:[!0]}function addUniqueItem(r,e){r.indexOf(e)===-1&&r.push(e)}function removeItem(r,e){const t=r.indexOf(e);t>-1&&r.splice(t,1)}const clamp=(r,e,t)=>t>e?e:t<r?r:t;let invariant=()=>{};const MotionGlobalConfig={},isNumericalString=r=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(r),isZeroValueString=r=>/^0[^.\s]+$/u.test(r);function memo(r){let e;return()=>(e===void 0&&(e=r()),e)}const noop=r=>r,combineFunctions=(r,e)=>t=>e(r(t)),pipe=(...r)=>r.reduce(combineFunctions),progress=(r,e,t)=>{const o=e-r;return o===0?1:(t-r)/o};class SubscriptionManager{constructor(){this.subscriptions=[]}add(e){return addUniqueItem(this.subscriptions,e),()=>removeItem(this.subscriptions,e)}notify(e,t,o){const y=this.subscriptions.length;if(y)if(y===1)this.subscriptions[0](e,t,o);else for(let R=0;R<y;R++){const G=this.subscriptions[R];G&&G(e,t,o)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const secondsToMilliseconds=r=>r*1e3,millisecondsToSeconds=r=>r/1e3;function velocityPerSecond(r,e){return e?r*(1e3/e):0}const wrap$1=(r,e,t)=>{const o=e-r;return((t-r)%o+o)%o+r},calcBezier=(r,e,t)=>(((1-3*t+3*e)*r+(3*t-6*e))*r+3*e)*r,subdivisionPrecision=1e-7,subdivisionMaxIterations=12;function binarySubdivide(r,e,t,o,y){let R,G,K=0;do G=e+(t-e)/2,R=calcBezier(G,o,y)-r,R>0?t=G:e=G;while(Math.abs(R)>subdivisionPrecision&&++K<subdivisionMaxIterations);return G}function cubicBezier(r,e,t,o){if(r===e&&t===o)return noop;const y=R=>binarySubdivide(R,0,1,r,t);return R=>R===0||R===1?R:calcBezier(y(R),e,o)}const mirrorEasing=r=>e=>e<=.5?r(2*e)/2:(2-r(2*(1-e)))/2,reverseEasing=r=>e=>1-r(1-e),backOut=cubicBezier(.33,1.53,.69,.99),backIn=reverseEasing(backOut),backInOut=mirrorEasing(backIn),anticipate=r=>(r*=2)<1?.5*backIn(r):.5*(2-Math.pow(2,-10*(r-1))),circIn=r=>1-Math.sin(Math.acos(r)),circOut=reverseEasing(circIn),circInOut=mirrorEasing(circIn),easeIn=cubicBezier(.42,0,1,1),easeOut=cubicBezier(0,0,.58,1),easeInOut=cubicBezier(.42,0,.58,1),isEasingArray=r=>Array.isArray(r)&&typeof r[0]!="number";function getEasingForSegment(r,e){return isEasingArray(r)?r[wrap$1(0,r.length,e)]:r}const isBezierDefinition=r=>Array.isArray(r)&&typeof r[0]=="number",easingLookup={linear:noop,easeIn,easeInOut,easeOut,circIn,circInOut,circOut,backIn,backInOut,backOut,anticipate},isValidEasing=r=>typeof r=="string",easingDefinitionToFunction=r=>{if(isBezierDefinition(r)){invariant(r.length===4);const[e,t,o,y]=r;return cubicBezier(e,t,o,y)}else if(isValidEasing(r))return easingLookup[r];return r},stepsOrder=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function createRenderStep(r,e){let t=new Set,o=new Set,y=!1,R=!1;const G=new WeakSet;let K={delta:0,timestamp:0,isProcessing:!1};function Y(ee){G.has(ee)&&(Q.schedule(ee),r()),ee(K)}const Q={schedule:(ee,ie=!1,re=!1)=>{const le=re&&y?t:o;return ie&&G.add(ee),le.has(ee)||le.add(ee),ee},cancel:ee=>{o.delete(ee),G.delete(ee)},process:ee=>{if(K=ee,y){R=!0;return}y=!0,[t,o]=[o,t],t.forEach(Y),t.clear(),y=!1,R&&(R=!1,Q.process(ee))}};return Q}const maxElapsed=40;function createRenderBatcher(r,e){let t=!1,o=!0;const y={delta:0,timestamp:0,isProcessing:!1},R=()=>t=!0,G=stepsOrder.reduce((ve,_e)=>(ve[_e]=createRenderStep(R),ve),{}),{setup:K,read:Y,resolveKeyframes:Q,preUpdate:ee,update:ie,preRender:re,render:se,postRender:le}=G,ce=()=>{const ve=MotionGlobalConfig.useManualTiming?y.timestamp:performance.now();t=!1,MotionGlobalConfig.useManualTiming||(y.delta=o?1e3/60:Math.max(Math.min(ve-y.timestamp,maxElapsed),1)),y.timestamp=ve,y.isProcessing=!0,K.process(y),Y.process(y),Q.process(y),ee.process(y),ie.process(y),re.process(y),se.process(y),le.process(y),y.isProcessing=!1,t&&e&&(o=!1,r(ce))},oe=()=>{t=!0,o=!0,y.isProcessing||r(ce)};return{schedule:stepsOrder.reduce((ve,_e)=>{const be=G[_e];return ve[_e]=(Re,Se=!1,Ee=!1)=>(t||oe(),be.schedule(Re,Se,Ee)),ve},{}),cancel:ve=>{for(let _e=0;_e<stepsOrder.length;_e++)G[stepsOrder[_e]].cancel(ve)},state:y,steps:G}}const{schedule:frame,cancel:cancelFrame,state:frameData,steps:frameSteps}=createRenderBatcher(typeof requestAnimationFrame<"u"?requestAnimationFrame:noop,!0);let now;function clearTime(){now=void 0}const time={now:()=>(now===void 0&&time.set(frameData.isProcessing||MotionGlobalConfig.useManualTiming?frameData.timestamp:performance.now()),now),set:r=>{now=r,queueMicrotask(clearTime)}},checkStringStartsWith=r=>e=>typeof e=="string"&&e.startsWith(r),isCSSVariableName=checkStringStartsWith("--"),startsAsVariableToken=checkStringStartsWith("var(--"),isCSSVariableToken=r=>startsAsVariableToken(r)?singleCssVariableRegex.test(r.split("/*")[0].trim()):!1,singleCssVariableRegex=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,number={test:r=>typeof r=="number",parse:parseFloat,transform:r=>r},alpha={...number,transform:r=>clamp(0,1,r)},scale={...number,default:1},sanitize=r=>Math.round(r*1e5)/1e5,floatRegex=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function isNullish(r){return r==null}const singleColorRegex=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,isColorString=(r,e)=>t=>!!(typeof t=="string"&&singleColorRegex.test(t)&&t.startsWith(r)||e&&!isNullish(t)&&Object.prototype.hasOwnProperty.call(t,e)),splitColor=(r,e,t)=>o=>{if(typeof o!="string")return o;const[y,R,G,K]=o.match(floatRegex);return{[r]:parseFloat(y),[e]:parseFloat(R),[t]:parseFloat(G),alpha:K!==void 0?parseFloat(K):1}},clampRgbUnit=r=>clamp(0,255,r),rgbUnit={...number,transform:r=>Math.round(clampRgbUnit(r))},rgba={test:isColorString("rgb","red"),parse:splitColor("red","green","blue"),transform:({red:r,green:e,blue:t,alpha:o=1})=>"rgba("+rgbUnit.transform(r)+", "+rgbUnit.transform(e)+", "+rgbUnit.transform(t)+", "+sanitize(alpha.transform(o))+")"};function parseHex(r){let e="",t="",o="",y="";return r.length>5?(e=r.substring(1,3),t=r.substring(3,5),o=r.substring(5,7),y=r.substring(7,9)):(e=r.substring(1,2),t=r.substring(2,3),o=r.substring(3,4),y=r.substring(4,5),e+=e,t+=t,o+=o,y+=y),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(o,16),alpha:y?parseInt(y,16)/255:1}}const hex={test:isColorString("#"),parse:parseHex,transform:rgba.transform},createUnitType=r=>({test:e=>typeof e=="string"&&e.endsWith(r)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${r}`}),degrees=createUnitType("deg"),percent=createUnitType("%"),px=createUnitType("px"),vh=createUnitType("vh"),vw=createUnitType("vw"),progressPercentage={...percent,parse:r=>percent.parse(r)/100,transform:r=>percent.transform(r*100)},hsla={test:isColorString("hsl","hue"),parse:splitColor("hue","saturation","lightness"),transform:({hue:r,saturation:e,lightness:t,alpha:o=1})=>"hsla("+Math.round(r)+", "+percent.transform(sanitize(e))+", "+percent.transform(sanitize(t))+", "+sanitize(alpha.transform(o))+")"},color={test:r=>rgba.test(r)||hex.test(r)||hsla.test(r),parse:r=>rgba.test(r)?rgba.parse(r):hsla.test(r)?hsla.parse(r):hex.parse(r),transform:r=>typeof r=="string"?r:r.hasOwnProperty("red")?rgba.transform(r):hsla.transform(r)},colorRegex=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function test(r){var e,t;return isNaN(r)&&typeof r=="string"&&(((e=r.match(floatRegex))==null?void 0:e.length)||0)+(((t=r.match(colorRegex))==null?void 0:t.length)||0)>0}const NUMBER_TOKEN="number",COLOR_TOKEN="color",VAR_TOKEN="var",VAR_FUNCTION_TOKEN="var(",SPLIT_TOKEN="${}",complexRegex=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function analyseComplexValue(r){const e=r.toString(),t=[],o={color:[],number:[],var:[]},y=[];let R=0;const K=e.replace(complexRegex,Y=>(color.test(Y)?(o.color.push(R),y.push(COLOR_TOKEN),t.push(color.parse(Y))):Y.startsWith(VAR_FUNCTION_TOKEN)?(o.var.push(R),y.push(VAR_TOKEN),t.push(Y)):(o.number.push(R),y.push(NUMBER_TOKEN),t.push(parseFloat(Y))),++R,SPLIT_TOKEN)).split(SPLIT_TOKEN);return{values:t,split:K,indexes:o,types:y}}function parseComplexValue(r){return analyseComplexValue(r).values}function createTransformer(r){const{split:e,types:t}=analyseComplexValue(r),o=e.length;return y=>{let R="";for(let G=0;G<o;G++)if(R+=e[G],y[G]!==void 0){const K=t[G];K===NUMBER_TOKEN?R+=sanitize(y[G]):K===COLOR_TOKEN?R+=color.transform(y[G]):R+=y[G]}return R}}const convertNumbersToZero=r=>typeof r=="number"?0:r;function getAnimatableNone$1(r){const e=parseComplexValue(r);return createTransformer(r)(e.map(convertNumbersToZero))}const complex={test,parse:parseComplexValue,createTransformer,getAnimatableNone:getAnimatableNone$1};function hueToRgb(r,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?r+(e-r)*6*t:t<1/2?e:t<2/3?r+(e-r)*(2/3-t)*6:r}function hslaToRgba({hue:r,saturation:e,lightness:t,alpha:o}){r/=360,e/=100,t/=100;let y=0,R=0,G=0;if(!e)y=R=G=t;else{const K=t<.5?t*(1+e):t+e-t*e,Y=2*t-K;y=hueToRgb(Y,K,r+1/3),R=hueToRgb(Y,K,r),G=hueToRgb(Y,K,r-1/3)}return{red:Math.round(y*255),green:Math.round(R*255),blue:Math.round(G*255),alpha:o}}function mixImmediate(r,e){return t=>t>0?e:r}const mixNumber$1=(r,e,t)=>r+(e-r)*t,mixLinearColor=(r,e,t)=>{const o=r*r,y=t*(e*e-o)+o;return y<0?0:Math.sqrt(y)},colorTypes=[hex,rgba,hsla],getColorType=r=>colorTypes.find(e=>e.test(r));function asRGBA(r){const e=getColorType(r);if(!e)return!1;let t=e.parse(r);return e===hsla&&(t=hslaToRgba(t)),t}const mixColor=(r,e)=>{const t=asRGBA(r),o=asRGBA(e);if(!t||!o)return mixImmediate(r,e);const y={...t};return R=>(y.red=mixLinearColor(t.red,o.red,R),y.green=mixLinearColor(t.green,o.green,R),y.blue=mixLinearColor(t.blue,o.blue,R),y.alpha=mixNumber$1(t.alpha,o.alpha,R),rgba.transform(y))},invisibleValues=new Set(["none","hidden"]);function mixVisibility(r,e){return invisibleValues.has(r)?t=>t<=0?r:e:t=>t>=1?e:r}function mixNumber(r,e){return t=>mixNumber$1(r,e,t)}function getMixer(r){return typeof r=="number"?mixNumber:typeof r=="string"?isCSSVariableToken(r)?mixImmediate:color.test(r)?mixColor:mixComplex:Array.isArray(r)?mixArray:typeof r=="object"?color.test(r)?mixColor:mixObject:mixImmediate}function mixArray(r,e){const t=[...r],o=t.length,y=r.map((R,G)=>getMixer(R)(R,e[G]));return R=>{for(let G=0;G<o;G++)t[G]=y[G](R);return t}}function mixObject(r,e){const t={...r,...e},o={};for(const y in t)r[y]!==void 0&&e[y]!==void 0&&(o[y]=getMixer(r[y])(r[y],e[y]));return y=>{for(const R in o)t[R]=o[R](y);return t}}function matchOrder(r,e){const t=[],o={color:0,var:0,number:0};for(let y=0;y<e.values.length;y++){const R=e.types[y],G=r.indexes[R][o[R]],K=r.values[G]??0;t[y]=K,o[R]++}return t}const mixComplex=(r,e)=>{const t=complex.createTransformer(e),o=analyseComplexValue(r),y=analyseComplexValue(e);return o.indexes.var.length===y.indexes.var.length&&o.indexes.color.length===y.indexes.color.length&&o.indexes.number.length>=y.indexes.number.length?invisibleValues.has(r)&&!y.values.length||invisibleValues.has(e)&&!o.values.length?mixVisibility(r,e):pipe(mixArray(matchOrder(o,y),y.values),t):mixImmediate(r,e)};function mix(r,e,t){return typeof r=="number"&&typeof e=="number"&&typeof t=="number"?mixNumber$1(r,e,t):getMixer(r)(r,e)}const frameloopDriver=r=>{const e=({timestamp:t})=>r(t);return{start:()=>frame.update(e,!0),stop:()=>cancelFrame(e),now:()=>frameData.isProcessing?frameData.timestamp:time.now()}},generateLinearEasing=(r,e,t=10)=>{let o="";const y=Math.max(Math.round(e/t),2);for(let R=0;R<y;R++)o+=r(R/(y-1))+", ";return`linear(${o.substring(0,o.length-2)})`},maxGeneratorDuration=2e4;function calcGeneratorDuration(r){let e=0;const t=50;let o=r.next(e);for(;!o.done&&e<maxGeneratorDuration;)e+=t,o=r.next(e);return e>=maxGeneratorDuration?1/0:e}function createGeneratorEasing(r,e=100,t){const o=t({...r,keyframes:[0,e]}),y=Math.min(calcGeneratorDuration(o),maxGeneratorDuration);return{type:"keyframes",ease:R=>o.next(y*R).value/e,duration:millisecondsToSeconds(y)}}const velocitySampleDuration=5;function calcGeneratorVelocity(r,e,t){const o=Math.max(e-velocitySampleDuration,0);return velocityPerSecond(t-r(o),e-o)}const springDefaults={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},safeMin=.001;function findSpring({duration:r=springDefaults.duration,bounce:e=springDefaults.bounce,velocity:t=springDefaults.velocity,mass:o=springDefaults.mass}){let y,R,G=1-e;G=clamp(springDefaults.minDamping,springDefaults.maxDamping,G),r=clamp(springDefaults.minDuration,springDefaults.maxDuration,millisecondsToSeconds(r)),G<1?(y=Q=>{const ee=Q*G,ie=ee*r,re=ee-t,se=calcAngularFreq(Q,G),le=Math.exp(-ie);return safeMin-re/se*le},R=Q=>{const ie=Q*G*r,re=ie*t+t,se=Math.pow(G,2)*Math.pow(Q,2)*r,le=Math.exp(-ie),ce=calcAngularFreq(Math.pow(Q,2),G);return(-y(Q)+safeMin>0?-1:1)*((re-se)*le)/ce}):(y=Q=>{const ee=Math.exp(-Q*r),ie=(Q-t)*r+1;return-.001+ee*ie},R=Q=>{const ee=Math.exp(-Q*r),ie=(t-Q)*(r*r);return ee*ie});const K=5/r,Y=approximateRoot(y,R,K);if(r=secondsToMilliseconds(r),isNaN(Y))return{stiffness:springDefaults.stiffness,damping:springDefaults.damping,duration:r};{const Q=Math.pow(Y,2)*o;return{stiffness:Q,damping:G*2*Math.sqrt(o*Q),duration:r}}}const rootIterations=12;function approximateRoot(r,e,t){let o=t;for(let y=1;y<rootIterations;y++)o=o-r(o)/e(o);return o}function calcAngularFreq(r,e){return r*Math.sqrt(1-e*e)}const durationKeys=["duration","bounce"],physicsKeys=["stiffness","damping","mass"];function isSpringType(r,e){return e.some(t=>r[t]!==void 0)}function getSpringOptions(r){let e={velocity:springDefaults.velocity,stiffness:springDefaults.stiffness,damping:springDefaults.damping,mass:springDefaults.mass,isResolvedFromDuration:!1,...r};if(!isSpringType(r,physicsKeys)&&isSpringType(r,durationKeys))if(r.visualDuration){const t=r.visualDuration,o=2*Math.PI/(t*1.2),y=o*o,R=2*clamp(.05,1,1-(r.bounce||0))*Math.sqrt(y);e={...e,mass:springDefaults.mass,stiffness:y,damping:R}}else{const t=findSpring(r);e={...e,...t,mass:springDefaults.mass},e.isResolvedFromDuration=!0}return e}function spring(r=springDefaults.visualDuration,e=springDefaults.bounce){const t=typeof r!="object"?{visualDuration:r,keyframes:[0,1],bounce:e}:r;let{restSpeed:o,restDelta:y}=t;const R=t.keyframes[0],G=t.keyframes[t.keyframes.length-1],K={done:!1,value:R},{stiffness:Y,damping:Q,mass:ee,duration:ie,velocity:re,isResolvedFromDuration:se}=getSpringOptions({...t,velocity:-millisecondsToSeconds(t.velocity||0)}),le=re||0,ce=Q/(2*Math.sqrt(Y*ee)),oe=G-R,ue=millisecondsToSeconds(Math.sqrt(Y/ee)),ge=Math.abs(oe)<5;o||(o=ge?springDefaults.restSpeed.granular:springDefaults.restSpeed.default),y||(y=ge?springDefaults.restDelta.granular:springDefaults.restDelta.default);let ve;if(ce<1){const be=calcAngularFreq(ue,ce);ve=Re=>{const Se=Math.exp(-ce*ue*Re);return G-Se*((le+ce*ue*oe)/be*Math.sin(be*Re)+oe*Math.cos(be*Re))}}else if(ce===1)ve=be=>G-Math.exp(-ue*be)*(oe+(le+ue*oe)*be);else{const be=ue*Math.sqrt(ce*ce-1);ve=Re=>{const Se=Math.exp(-ce*ue*Re),Ee=Math.min(be*Re,300);return G-Se*((le+ce*ue*oe)*Math.sinh(Ee)+be*oe*Math.cosh(Ee))/be}}const _e={calculatedDuration:se&&ie||null,next:be=>{const Re=ve(be);if(se)K.done=be>=ie;else{let Se=be===0?le:0;ce<1&&(Se=be===0?secondsToMilliseconds(le):calcGeneratorVelocity(ve,be,Re));const Ee=Math.abs(Se)<=o,ye=Math.abs(G-Re)<=y;K.done=Ee&&ye}return K.value=K.done?G:Re,K},toString:()=>{const be=Math.min(calcGeneratorDuration(_e),maxGeneratorDuration),Re=generateLinearEasing(Se=>_e.next(be*Se).value,be,30);return be+"ms "+Re},toTransition:()=>{}};return _e}spring.applyToOptions=r=>{const e=createGeneratorEasing(r,100,spring);return r.ease=e.ease,r.duration=secondsToMilliseconds(e.duration),r.type="keyframes",r};function inertia({keyframes:r,velocity:e=0,power:t=.8,timeConstant:o=325,bounceDamping:y=10,bounceStiffness:R=500,modifyTarget:G,min:K,max:Y,restDelta:Q=.5,restSpeed:ee}){const ie=r[0],re={done:!1,value:ie},se=Ee=>K!==void 0&&Ee<K||Y!==void 0&&Ee>Y,le=Ee=>K===void 0?Y:Y===void 0||Math.abs(K-Ee)<Math.abs(Y-Ee)?K:Y;let ce=t*e;const oe=ie+ce,ue=G===void 0?oe:G(oe);ue!==oe&&(ce=ue-ie);const ge=Ee=>-ce*Math.exp(-Ee/o),ve=Ee=>ue+ge(Ee),_e=Ee=>{const ye=ge(Ee),de=ve(Ee);re.done=Math.abs(ye)<=Q,re.value=re.done?ue:de};let be,Re;const Se=Ee=>{se(re.value)&&(be=Ee,Re=spring({keyframes:[re.value,le(re.value)],velocity:calcGeneratorVelocity(ve,Ee,re.value),damping:y,stiffness:R,restDelta:Q,restSpeed:ee}))};return Se(0),{calculatedDuration:null,next:Ee=>{let ye=!1;return!Re&&be===void 0&&(ye=!0,_e(Ee),Se(Ee)),be!==void 0&&Ee>=be?Re.next(Ee-be):(!ye&&_e(Ee),re)}}}function createMixers(r,e,t){const o=[],y=t||MotionGlobalConfig.mix||mix,R=r.length-1;for(let G=0;G<R;G++){let K=y(r[G],r[G+1]);if(e){const Y=Array.isArray(e)?e[G]||noop:e;K=pipe(Y,K)}o.push(K)}return o}function interpolate(r,e,{clamp:t=!0,ease:o,mixer:y}={}){const R=r.length;if(invariant(R===e.length),R===1)return()=>e[0];if(R===2&&e[0]===e[1])return()=>e[1];const G=r[0]===r[1];r[0]>r[R-1]&&(r=[...r].reverse(),e=[...e].reverse());const K=createMixers(e,o,y),Y=K.length,Q=ee=>{if(G&&ee<r[0])return e[0];let ie=0;if(Y>1)for(;ie<r.length-2&&!(ee<r[ie+1]);ie++);const re=progress(r[ie],r[ie+1],ee);return K[ie](re)};return t?ee=>Q(clamp(r[0],r[R-1],ee)):Q}function fillOffset(r,e){const t=r[r.length-1];for(let o=1;o<=e;o++){const y=progress(0,e,o);r.push(mixNumber$1(t,1,y))}}function defaultOffset(r){const e=[0];return fillOffset(e,r.length-1),e}function convertOffsetToTimes(r,e){return r.map(t=>t*e)}function defaultEasing(r,e){return r.map(()=>e||easeInOut).splice(0,r.length-1)}function keyframes({duration:r=300,keyframes:e,times:t,ease:o="easeInOut"}){const y=isEasingArray(o)?o.map(easingDefinitionToFunction):easingDefinitionToFunction(o),R={done:!1,value:e[0]},G=convertOffsetToTimes(t&&t.length===e.length?t:defaultOffset(e),r),K=interpolate(G,e,{ease:Array.isArray(y)?y:defaultEasing(e,y)});return{calculatedDuration:r,next:Y=>(R.value=K(Y),R.done=Y>=r,R)}}const isNotNull$1=r=>r!==null;function getFinalKeyframe$1(r,{repeat:e,repeatType:t="loop"},o,y=1){const R=r.filter(isNotNull$1),K=y<0||e&&t!=="loop"&&e%2===1?0:R.length-1;return!K||o===void 0?R[K]:o}const transitionTypeMap={decay:inertia,inertia,tween:keyframes,keyframes,spring};function replaceTransitionType(r){typeof r.type=="string"&&(r.type=transitionTypeMap[r.type])}class WithPromise{constructor(){this.count=0,this.updateFinished()}get finished(){return this._finished}updateFinished(){this.count++,this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const percentToProgress=r=>r/100;class JSAnimation extends WithPromise{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:t}=this.options;if(t&&t.updatedAt!==time.now()&&this.tick(time.now()),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:o}=this.options;o&&o()},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;replaceTransitionType(e);const{type:t=keyframes,repeat:o=0,repeatDelay:y=0,repeatType:R,velocity:G=0}=e;let{keyframes:K}=e;const Y=t||keyframes;Y!==keyframes&&typeof K[0]!="number"&&(this.mixKeyframes=pipe(percentToProgress,mix(K[0],K[1])),K=[0,100]);const Q=Y({...e,keyframes:K});R==="mirror"&&(this.mirroredGenerator=Y({...e,keyframes:[...K].reverse(),velocity:-G})),Q.calculatedDuration===null&&(Q.calculatedDuration=calcGeneratorDuration(Q));const{calculatedDuration:ee}=Q;this.calculatedDuration=ee,this.resolvedDuration=ee+y,this.totalDuration=this.resolvedDuration*(o+1)-y,this.generator=Q}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:o,totalDuration:y,mixKeyframes:R,mirroredGenerator:G,resolvedDuration:K,calculatedDuration:Y}=this;if(this.startTime===null)return o.next(0);const{delay:Q=0,keyframes:ee,repeat:ie,repeatType:re,repeatDelay:se,type:le,onUpdate:ce,finalKeyframe:oe}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-y/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const ue=this.currentTime-Q*(this.playbackSpeed>=0?1:-1),ge=this.playbackSpeed>=0?ue<0:ue>y;this.currentTime=Math.max(ue,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=y);let ve=this.currentTime,_e=o;if(ie){const Ee=Math.min(this.currentTime,y)/K;let ye=Math.floor(Ee),de=Ee%1;!de&&Ee>=1&&(de=1),de===1&&ye--,ye=Math.min(ye,ie+1),!!(ye%2)&&(re==="reverse"?(de=1-de,se&&(de-=se/K)):re==="mirror"&&(_e=G)),ve=clamp(0,1,de)*K}const be=ge?{done:!1,value:ee[0]}:_e.next(ve);R&&(be.value=R(be.value));let{done:Re}=be;!ge&&Y!==null&&(Re=this.playbackSpeed>=0?this.currentTime>=y:this.currentTime<=0);const Se=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&Re);return Se&&le!==inertia&&(be.value=getFinalKeyframe$1(ee,this.options,oe,this.speed)),ce&&ce(be.value),Se&&this.finish(),be}then(e,t){return this.finished.then(e,t)}get duration(){return millisecondsToSeconds(this.calculatedDuration)}get time(){return millisecondsToSeconds(this.currentTime)}set time(e){e=secondsToMilliseconds(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(time.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=millisecondsToSeconds(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=frameloopDriver,onPlay:t,startTime:o}=this.options;this.driver||(this.driver=e(R=>this.tick(R))),t&&t();const y=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=y):this.holdTime!==null?this.startTime=y-this.holdTime:this.startTime||(this.startTime=o??y),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(time.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown()}teardown(){this.notifyFinished(),this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),e.observe(this)}}function fillWildcards(r){for(let e=1;e<r.length;e++)r[e]??(r[e]=r[e-1])}const radToDeg=r=>r*180/Math.PI,rotate=r=>{const e=radToDeg(Math.atan2(r[1],r[0]));return rebaseAngle(e)},matrix2dParsers={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:r=>(Math.abs(r[0])+Math.abs(r[3]))/2,rotate,rotateZ:rotate,skewX:r=>radToDeg(Math.atan(r[1])),skewY:r=>radToDeg(Math.atan(r[2])),skew:r=>(Math.abs(r[1])+Math.abs(r[2]))/2},rebaseAngle=r=>(r=r%360,r<0&&(r+=360),r),rotateZ=rotate,scaleX=r=>Math.sqrt(r[0]*r[0]+r[1]*r[1]),scaleY=r=>Math.sqrt(r[4]*r[4]+r[5]*r[5]),matrix3dParsers={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX,scaleY,scale:r=>(scaleX(r)+scaleY(r))/2,rotateX:r=>rebaseAngle(radToDeg(Math.atan2(r[6],r[5]))),rotateY:r=>rebaseAngle(radToDeg(Math.atan2(-r[2],r[0]))),rotateZ,rotate:rotateZ,skewX:r=>radToDeg(Math.atan(r[4])),skewY:r=>radToDeg(Math.atan(r[1])),skew:r=>(Math.abs(r[1])+Math.abs(r[4]))/2};function defaultTransformValue(r){return r.includes("scale")?1:0}function parseValueFromTransform(r,e){if(!r||r==="none")return defaultTransformValue(e);const t=r.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let o,y;if(t)o=matrix3dParsers,y=t;else{const K=r.match(/^matrix\(([-\d.e\s,]+)\)$/u);o=matrix2dParsers,y=K}if(!y)return defaultTransformValue(e);const R=o[e],G=y[1].split(",").map(convertTransformToNumber);return typeof R=="function"?R(G):G[R]}const readTransformValue=(r,e)=>{const{transform:t="none"}=getComputedStyle(r);return parseValueFromTransform(t,e)};function convertTransformToNumber(r){return parseFloat(r.trim())}const transformPropOrder=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],transformProps=new Set(transformPropOrder),isNumOrPxType=r=>r===number||r===px,transformKeys=new Set(["x","y","z"]),nonTranslationalTransformKeys=transformPropOrder.filter(r=>!transformKeys.has(r));function removeNonTranslationalTransform(r){const e=[];return nonTranslationalTransformKeys.forEach(t=>{const o=r.getValue(t);o!==void 0&&(e.push([t,o.get()]),o.set(t.startsWith("scale")?1:0))}),e}const positionalValues={width:({x:r},{paddingLeft:e="0",paddingRight:t="0"})=>r.max-r.min-parseFloat(e)-parseFloat(t),height:({y:r},{paddingTop:e="0",paddingBottom:t="0"})=>r.max-r.min-parseFloat(e)-parseFloat(t),top:(r,{top:e})=>parseFloat(e),left:(r,{left:e})=>parseFloat(e),bottom:({y:r},{top:e})=>parseFloat(e)+(r.max-r.min),right:({x:r},{left:e})=>parseFloat(e)+(r.max-r.min),x:(r,{transform:e})=>parseValueFromTransform(e,"x"),y:(r,{transform:e})=>parseValueFromTransform(e,"y")};positionalValues.translateX=positionalValues.x;positionalValues.translateY=positionalValues.y;const toResolve=new Set;let isScheduled=!1,anyNeedsMeasurement=!1,isForced=!1;function measureAllKeyframes(){if(anyNeedsMeasurement){const r=Array.from(toResolve).filter(o=>o.needsMeasurement),e=new Set(r.map(o=>o.element)),t=new Map;e.forEach(o=>{const y=removeNonTranslationalTransform(o);y.length&&(t.set(o,y),o.render())}),r.forEach(o=>o.measureInitialState()),e.forEach(o=>{o.render();const y=t.get(o);y&&y.forEach(([R,G])=>{var K;(K=o.getValue(R))==null||K.set(G)})}),r.forEach(o=>o.measureEndState()),r.forEach(o=>{o.suspendedScrollY!==void 0&&window.scrollTo(0,o.suspendedScrollY)})}anyNeedsMeasurement=!1,isScheduled=!1,toResolve.forEach(r=>r.complete(isForced)),toResolve.clear()}function readAllKeyframes(){toResolve.forEach(r=>{r.readKeyframes(),r.needsMeasurement&&(anyNeedsMeasurement=!0)})}function flushKeyframeResolvers(){isForced=!0,readAllKeyframes(),measureAllKeyframes(),isForced=!1}class KeyframeResolver{constructor(e,t,o,y,R,G=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=o,this.motionValue=y,this.element=R,this.isAsync=G}scheduleResolve(){this.isScheduled=!0,this.isAsync?(toResolve.add(this),isScheduled||(isScheduled=!0,frame.read(readAllKeyframes),frame.resolveKeyframes(measureAllKeyframes))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:o,motionValue:y}=this;if(e[0]===null){const R=y==null?void 0:y.get(),G=e[e.length-1];if(R!==void 0)e[0]=R;else if(o&&t){const K=o.readValue(t,G);K!=null&&(e[0]=K)}e[0]===void 0&&(e[0]=G),y&&R===void 0&&y.set(e[0])}fillWildcards(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),toResolve.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,toResolve.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const isCSSVar=r=>r.startsWith("--");function setStyle(r,e,t){isCSSVar(e)?r.style.setProperty(e,t):r.style[e]=t}const supportsScrollTimeline=memo(()=>window.ScrollTimeline!==void 0),supportsFlags={};function memoSupports(r,e){const t=memo(r);return()=>supportsFlags[e]??t()}const supportsLinearEasing=memoSupports(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),cubicBezierAsString=([r,e,t,o])=>`cubic-bezier(${r}, ${e}, ${t}, ${o})`,supportedWaapiEasing={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:cubicBezierAsString([0,.65,.55,1]),circOut:cubicBezierAsString([.55,0,1,.45]),backIn:cubicBezierAsString([.31,.01,.66,-.59]),backOut:cubicBezierAsString([.33,1.53,.69,.99])};function mapEasingToNativeEasing(r,e){if(r)return typeof r=="function"?supportsLinearEasing()?generateLinearEasing(r,e):"ease-out":isBezierDefinition(r)?cubicBezierAsString(r):Array.isArray(r)?r.map(t=>mapEasingToNativeEasing(t,e)||supportedWaapiEasing.easeOut):supportedWaapiEasing[r]}function startWaapiAnimation(r,e,t,{delay:o=0,duration:y=300,repeat:R=0,repeatType:G="loop",ease:K="easeOut",times:Y}={},Q=void 0){const ee={[e]:t};Y&&(ee.offset=Y);const ie=mapEasingToNativeEasing(K,y);Array.isArray(ie)&&(ee.easing=ie);const re={delay:o,duration:y,easing:Array.isArray(ie)?"linear":ie,fill:"both",iterations:R+1,direction:G==="reverse"?"alternate":"normal"};return Q&&(re.pseudoElement=Q),r.animate(ee,re)}function isGenerator(r){return typeof r=="function"&&"applyToOptions"in r}function applyGeneratorOptions({type:r,...e}){return isGenerator(r)&&supportsLinearEasing()?r.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class NativeAnimation extends WithPromise{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:t,name:o,keyframes:y,pseudoElement:R,allowFlatten:G=!1,finalKeyframe:K,onComplete:Y}=e;this.isPseudoElement=!!R,this.allowFlatten=G,this.options=e,invariant(typeof e.type!="string");const Q=applyGeneratorOptions(e);this.animation=startWaapiAnimation(t,o,y,Q,R),Q.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!R){const ee=getFinalKeyframe$1(y,this.options,K,this.speed);this.updateMotionValue?this.updateMotionValue(ee):setStyle(t,o,ee),this.animation.cancel()}Y==null||Y(),this.notifyFinished()},this.animation.oncancel=()=>this.notifyFinished()}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,t;(t=(e=this.animation).finish)==null||t.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,t;this.isPseudoElement||(t=(e=this.animation).commitStyles)==null||t.call(e)}get duration(){var t,o;const e=((o=(t=this.animation.effect)==null?void 0:t.getComputedTiming)==null?void 0:o.call(t).duration)||0;return millisecondsToSeconds(Number(e))}get time(){return millisecondsToSeconds(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=secondsToMilliseconds(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){var o;return this.allowFlatten&&((o=this.animation.effect)==null||o.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&supportsScrollTimeline()?(this.animation.timeline=e,noop):t(this)}}const unsupportedEasingFunctions={anticipate,backInOut,circInOut};function isUnsupportedEase(r){return r in unsupportedEasingFunctions}function replaceStringEasing(r){typeof r.ease=="string"&&isUnsupportedEase(r.ease)&&(r.ease=unsupportedEasingFunctions[r.ease])}const sampleDelta=10;class NativeAnimationExtended extends NativeAnimation{constructor(e){replaceStringEasing(e),replaceTransitionType(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:o,onComplete:y,element:R,...G}=this.options;if(!t)return;if(e!==void 0){t.set(e);return}const K=new JSAnimation({...G,autoplay:!1}),Y=secondsToMilliseconds(this.finishedTime??this.time);t.setWithVelocity(K.sample(Y-sampleDelta).value,K.sample(Y).value,sampleDelta),K.stop()}}const isAnimatable=(r,e)=>e==="zIndex"?!1:!!(typeof r=="number"||Array.isArray(r)||typeof r=="string"&&(complex.test(r)||r==="0")&&!r.startsWith("url("));function hasKeyframesChanged(r){const e=r[0];if(r.length===1)return!0;for(let t=0;t<r.length;t++)if(r[t]!==e)return!0}function canAnimate(r,e,t,o){const y=r[0];if(y===null)return!1;if(e==="display"||e==="visibility")return!0;const R=r[r.length-1],G=isAnimatable(y,e),K=isAnimatable(R,e);return!G||!K?!1:hasKeyframesChanged(r)||(t==="spring"||isGenerator(t))&&o}const acceleratedValues=new Set(["opacity","clipPath","filter","transform"]),supportsWaapi=memo(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function supportsBrowserAnimation(r){const{motionValue:e,name:t,repeatDelay:o,repeatType:y,damping:R,type:G}=r;if(!e||!e.owner||!(e.owner.current instanceof HTMLElement))return!1;const{onUpdate:K,transformTemplate:Y}=e.owner.getProps();return supportsWaapi()&&t&&acceleratedValues.has(t)&&(t!=="transform"||!Y)&&!K&&!o&&y!=="mirror"&&R!==0&&G!=="inertia"}const MAX_RESOLVE_DELAY=40;class AsyncMotionValueAnimation extends WithPromise{constructor({autoplay:e=!0,delay:t=0,type:o="keyframes",repeat:y=0,repeatDelay:R=0,repeatType:G="loop",keyframes:K,name:Y,motionValue:Q,element:ee,...ie}){var le;super(),this.stop=()=>{var ce,oe;this._animation?(this._animation.stop(),(ce=this.stopTimeline)==null||ce.call(this)):(oe=this.keyframeResolver)==null||oe.cancel()},this.createdAt=time.now();const re={autoplay:e,delay:t,type:o,repeat:y,repeatDelay:R,repeatType:G,name:Y,motionValue:Q,element:ee,...ie},se=(ee==null?void 0:ee.KeyframeResolver)||KeyframeResolver;this.keyframeResolver=new se(K,(ce,oe,ue)=>this.onKeyframesResolved(ce,oe,re,!ue),Y,Q,ee),(le=this.keyframeResolver)==null||le.scheduleResolve()}onKeyframesResolved(e,t,o,y){this.keyframeResolver=void 0;const{name:R,type:G,velocity:K,delay:Y,isHandoff:Q,onUpdate:ee}=o;this.resolvedAt=time.now(),canAnimate(e,R,G,K)||((MotionGlobalConfig.instantAnimations||!Y)&&(ee==null||ee(getFinalKeyframe$1(e,o,t))),e[0]=e[e.length-1],o.duration=0,o.repeat=0);const re={startTime:y?this.resolvedAt?this.resolvedAt-this.createdAt>MAX_RESOLVE_DELAY?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:t,...o,keyframes:e},se=!Q&&supportsBrowserAnimation(re)?new NativeAnimationExtended({...re,element:re.motionValue.owner.current}):new JSAnimation(re);se.finished.then(()=>this.notifyFinished()).catch(noop),this.pendingTimeline&&(this.stopTimeline=se.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=se}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||flushKeyframeResolvers(),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this.animation.cancel()}}class GroupAnimation{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>e.finished))}getAll(e){return this.animations[0][e]}setAll(e,t){for(let o=0;o<this.animations.length;o++)this.animations[o][e]=t}attachTimeline(e){const t=this.animations.map(o=>o.attachTimeline(e));return()=>{t.forEach((o,y)=>{o&&o(),this.animations[y].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get state(){return this.getAll("state")}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let t=0;t<this.animations.length;t++)e=Math.max(e,this.animations[t].duration);return e}runAll(e){this.animations.forEach(t=>t[e]())}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class GroupAnimationWithThen extends GroupAnimation{then(e,t){return this.finished.finally(e).then(()=>{})}}const splitCSSVariableRegex=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function parseCSSVariable(r){const e=splitCSSVariableRegex.exec(r);if(!e)return[,];const[,t,o,y]=e;return[`--${t??o}`,y]}function getVariableValue(r,e,t=1){const[o,y]=parseCSSVariable(r);if(!o)return;const R=window.getComputedStyle(e).getPropertyValue(o);if(R){const G=R.trim();return isNumericalString(G)?parseFloat(G):G}return isCSSVariableToken(y)?getVariableValue(y,e,t+1):y}function getValueTransition$1(r,e){return(r==null?void 0:r[e])??(r==null?void 0:r.default)??r}const positionalKeys=new Set(["width","height","top","left","right","bottom",...transformPropOrder]),auto={test:r=>r==="auto",parse:r=>r},testValueType=r=>e=>e.test(r),dimensionValueTypes=[number,px,percent,degrees,vw,vh,auto],findDimensionValueType=r=>dimensionValueTypes.find(testValueType(r));function isNone(r){return typeof r=="number"?r===0:r!==null?r==="none"||r==="0"||isZeroValueString(r):!0}const maxDefaults=new Set(["brightness","contrast","saturate","opacity"]);function applyDefaultFilter(r){const[e,t]=r.slice(0,-1).split("(");if(e==="drop-shadow")return r;const[o]=t.match(floatRegex)||[];if(!o)return r;const y=t.replace(o,"");let R=maxDefaults.has(e)?1:0;return o!==t&&(R*=100),e+"("+R+y+")"}const functionRegex=/\b([a-z-]*)\(.*?\)/gu,filter={...complex,getAnimatableNone:r=>{const e=r.match(functionRegex);return e?e.map(applyDefaultFilter).join(" "):r}},int={...number,transform:Math.round},transformValueTypes={rotate:degrees,rotateX:degrees,rotateY:degrees,rotateZ:degrees,scale,scaleX:scale,scaleY:scale,scaleZ:scale,skew:degrees,skewX:degrees,skewY:degrees,distance:px,translateX:px,translateY:px,translateZ:px,x:px,y:px,z:px,perspective:px,transformPerspective:px,opacity:alpha,originX:progressPercentage,originY:progressPercentage,originZ:px},numberValueTypes={borderWidth:px,borderTopWidth:px,borderRightWidth:px,borderBottomWidth:px,borderLeftWidth:px,borderRadius:px,radius:px,borderTopLeftRadius:px,borderTopRightRadius:px,borderBottomRightRadius:px,borderBottomLeftRadius:px,width:px,maxWidth:px,height:px,maxHeight:px,top:px,right:px,bottom:px,left:px,padding:px,paddingTop:px,paddingRight:px,paddingBottom:px,paddingLeft:px,margin:px,marginTop:px,marginRight:px,marginBottom:px,marginLeft:px,backgroundPositionX:px,backgroundPositionY:px,...transformValueTypes,zIndex:int,fillOpacity:alpha,strokeOpacity:alpha,numOctaves:int},defaultValueTypes={...numberValueTypes,color,backgroundColor:color,outlineColor:color,fill:color,stroke:color,borderColor:color,borderTopColor:color,borderRightColor:color,borderBottomColor:color,borderLeftColor:color,filter,WebkitFilter:filter},getDefaultValueType=r=>defaultValueTypes[r];function getAnimatableNone(r,e){let t=getDefaultValueType(r);return t!==filter&&(t=complex),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const invalidTemplates=new Set(["auto","none","0"]);function makeNoneKeyframesAnimatable(r,e,t){let o=0,y;for(;o<r.length&&!y;){const R=r[o];typeof R=="string"&&!invalidTemplates.has(R)&&analyseComplexValue(R).values.length&&(y=r[o]),o++}if(y&&t)for(const R of e)r[R]=getAnimatableNone(t,y)}class DOMKeyframesResolver extends KeyframeResolver{constructor(e,t,o,y,R){super(e,t,o,y,R,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:o}=this;if(!t||!t.current)return;super.readKeyframes();for(let Y=0;Y<e.length;Y++){let Q=e[Y];if(typeof Q=="string"&&(Q=Q.trim(),isCSSVariableToken(Q))){const ee=getVariableValue(Q,t.current);ee!==void 0&&(e[Y]=ee),Y===e.length-1&&(this.finalKeyframe=Q)}}if(this.resolveNoneKeyframes(),!positionalKeys.has(o)||e.length!==2)return;const[y,R]=e,G=findDimensionValueType(y),K=findDimensionValueType(R);if(G!==K)if(isNumOrPxType(G)&&isNumOrPxType(K))for(let Y=0;Y<e.length;Y++){const Q=e[Y];typeof Q=="string"&&(e[Y]=parseFloat(Q))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,o=[];for(let y=0;y<e.length;y++)(e[y]===null||isNone(e[y]))&&o.push(y);o.length&&makeNoneKeyframesAnimatable(e,o,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:o}=this;if(!e||!e.current)return;o==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=positionalValues[o](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const y=t[t.length-1];y!==void 0&&e.getValue(o,y).jump(y,!1)}measureEndState(){var K;const{element:e,name:t,unresolvedKeyframes:o}=this;if(!e||!e.current)return;const y=e.getValue(t);y&&y.jump(this.measuredOrigin,!1);const R=o.length-1,G=o[R];o[R]=positionalValues[t](e.measureViewportBox(),window.getComputedStyle(e.current)),G!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=G),(K=this.removedTransforms)!=null&&K.length&&this.removedTransforms.forEach(([Y,Q])=>{e.getValue(Y).set(Q)}),this.resolveNoneKeyframes()}}function resolveElements(r,e,t){if(r instanceof EventTarget)return[r];if(typeof r=="string"){let o=document;const y=(t==null?void 0:t[r])??o.querySelectorAll(r);return y?Array.from(y):[]}return Array.from(r)}const{schedule:microtask}=createRenderBatcher(queueMicrotask,!1),isDragging={x:!1,y:!1};function isDragActive(){return isDragging.x||isDragging.y}function setDragLock(r){return r==="x"||r==="y"?isDragging[r]?null:(isDragging[r]=!0,()=>{isDragging[r]=!1}):isDragging.x||isDragging.y?null:(isDragging.x=isDragging.y=!0,()=>{isDragging.x=isDragging.y=!1})}function setupGesture(r,e){const t=resolveElements(r),o=new AbortController,y={passive:!0,...e,signal:o.signal};return[t,y,()=>o.abort()]}function isValidHover(r){return!(r.pointerType==="touch"||isDragActive())}function hover(r,e,t={}){const[o,y,R]=setupGesture(r,t),G=K=>{if(!isValidHover(K))return;const{target:Y}=K,Q=e(Y,K);if(typeof Q!="function"||!Y)return;const ee=ie=>{isValidHover(ie)&&(Q(ie),Y.removeEventListener("pointerleave",ee))};Y.addEventListener("pointerleave",ee,y)};return o.forEach(K=>{K.addEventListener("pointerenter",G,y)}),R}const isNodeOrChild=(r,e)=>e?r===e?!0:isNodeOrChild(r,e.parentElement):!1,isPrimaryPointer=r=>r.pointerType==="mouse"?typeof r.button!="number"||r.button<=0:r.isPrimary!==!1,focusableElements=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function isElementKeyboardAccessible(r){return focusableElements.has(r.tagName)||r.tabIndex!==-1}const isPressing=new WeakSet;function filterEvents(r){return e=>{e.key==="Enter"&&r(e)}}function firePointerEvent(r,e){r.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const enableKeyboardPress=(r,e)=>{const t=r.currentTarget;if(!t)return;const o=filterEvents(()=>{if(isPressing.has(t))return;firePointerEvent(t,"down");const y=filterEvents(()=>{firePointerEvent(t,"up")}),R=()=>firePointerEvent(t,"cancel");t.addEventListener("keyup",y,e),t.addEventListener("blur",R,e)});t.addEventListener("keydown",o,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",o),e)};function isValidPressEvent(r){return isPrimaryPointer(r)&&!isDragActive()}function press(r,e,t={}){const[o,y,R]=setupGesture(r,t),G=K=>{const Y=K.currentTarget;if(!isValidPressEvent(K)||isPressing.has(Y))return;isPressing.add(Y);const Q=e(Y,K),ee=(se,le)=>{window.removeEventListener("pointerup",ie),window.removeEventListener("pointercancel",re),!(!isValidPressEvent(se)||!isPressing.has(Y))&&(isPressing.delete(Y),typeof Q=="function"&&Q(se,{success:le}))},ie=se=>{ee(se,Y===window||Y===document||t.useGlobalTarget||isNodeOrChild(Y,se.target))},re=se=>{ee(se,!1)};window.addEventListener("pointerup",ie,y),window.addEventListener("pointercancel",re,y)};return o.forEach(K=>{(t.useGlobalTarget?window:K).addEventListener("pointerdown",G,y),K instanceof HTMLElement&&(K.addEventListener("focus",Q=>enableKeyboardPress(Q,y)),!isElementKeyboardAccessible(K)&&!K.hasAttribute("tabindex")&&(K.tabIndex=0))}),R}function transform(...r){const e=!Array.isArray(r[0]),t=e?0:-1,o=r[0+t],y=r[1+t],R=r[2+t],G=r[3+t],K=interpolate(y,R,G);return e?K(o):K}const MAX_VELOCITY_DELTA=30,isFloat=r=>!isNaN(parseFloat(r)),collectMotionValues={current:void 0};class MotionValue{constructor(e,t={}){this.version="12.9.1",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(o,y=!0)=>{var G,K;const R=time.now();this.updatedAt!==R&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(o),this.current!==this.prev&&((G=this.events.change)==null||G.notify(this.current)),y&&((K=this.events.renderRequest)==null||K.notify(this.current))},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=time.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=isFloat(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new SubscriptionManager);const o=this.events[e].add(t);return e==="change"?()=>{o(),frame.read(()=>{this.events.change.getSize()||this.stop()})}:o}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,o){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-o}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return collectMotionValues.current&&collectMotionValues.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const e=time.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>MAX_VELOCITY_DELTA)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,MAX_VELOCITY_DELTA);return velocityPerSecond(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e;(e=this.events.destroy)==null||e.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function motionValue(r,e){return new MotionValue(r,e)}const valueTypes=[...dimensionValueTypes,color,complex],findValueType=r=>valueTypes.find(testValueType(r)),getValueAsType=(r,e)=>e&&typeof r=="number"?e.transform(r):r,LazyContext=reactExports.createContext({strict:!1}),featureProps={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},featureDefinitions={};for(const r in featureProps)featureDefinitions[r]={isEnabled:e=>featureProps[r].some(t=>!!e[t])};function loadFeatures(r){for(const e in r)featureDefinitions[e]={...featureDefinitions[e],...r[e]}}const validMotionProps=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function isValidMotionProp(r){return r.startsWith("while")||r.startsWith("drag")&&r!=="draggable"||r.startsWith("layout")||r.startsWith("onTap")||r.startsWith("onPan")||r.startsWith("onLayout")||validMotionProps.has(r)}let shouldForward=r=>!isValidMotionProp(r);function loadExternalIsValidProp(r){r&&(shouldForward=e=>e.startsWith("on")?!isValidMotionProp(e):r(e))}try{loadExternalIsValidProp(require("@emotion/is-prop-valid").default)}catch{}function filterProps(r,e,t){const o={};for(const y in r)y==="values"&&typeof r.values=="object"||(shouldForward(y)||t===!0&&isValidMotionProp(y)||!e&&!isValidMotionProp(y)||r.draggable&&y.startsWith("onDrag"))&&(o[y]=r[y]);return o}function createDOMMotionComponentProxy(r){if(typeof Proxy>"u")return r;const e=new Map,t=(...o)=>r(...o);return new Proxy(t,{get:(o,y)=>y==="create"?r:(e.has(y)||e.set(y,r(y)),e.get(y))})}const MotionContext=reactExports.createContext({});function isAnimationControls(r){return r!==null&&typeof r=="object"&&typeof r.start=="function"}function isVariantLabel(r){return typeof r=="string"||Array.isArray(r)}const variantPriorityOrder=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],variantProps=["initial",...variantPriorityOrder];function isControllingVariants(r){return isAnimationControls(r.animate)||variantProps.some(e=>isVariantLabel(r[e]))}function isVariantNode(r){return!!(isControllingVariants(r)||r.variants)}function getCurrentTreeVariants(r,e){if(isControllingVariants(r)){const{initial:t,animate:o}=r;return{initial:t===!1||isVariantLabel(t)?t:void 0,animate:isVariantLabel(o)?o:void 0}}return r.inherit!==!1?e:{}}function useCreateMotionContext(r){const{initial:e,animate:t}=getCurrentTreeVariants(r,reactExports.useContext(MotionContext));return reactExports.useMemo(()=>({initial:e,animate:t}),[variantLabelsAsDependency(e),variantLabelsAsDependency(t)])}function variantLabelsAsDependency(r){return Array.isArray(r)?r.join(" "):r}const motionComponentSymbol=Symbol.for("motionComponentSymbol");function isRefObject(r){return r&&typeof r=="object"&&Object.prototype.hasOwnProperty.call(r,"current")}function useMotionRef(r,e,t){return reactExports.useCallback(o=>{o&&r.onMount&&r.onMount(o),e&&(o?e.mount(o):e.unmount()),t&&(typeof t=="function"?t(o):isRefObject(t)&&(t.current=o))},[e])}const camelToDash=r=>r.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),optimizedAppearDataId="framerAppearId",optimizedAppearDataAttribute="data-"+camelToDash(optimizedAppearDataId),SwitchLayoutGroupContext=reactExports.createContext({});function useVisualElement(r,e,t,o,y){var ce,oe;const{visualElement:R}=reactExports.useContext(MotionContext),G=reactExports.useContext(LazyContext),K=reactExports.useContext(PresenceContext),Y=reactExports.useContext(MotionConfigContext).reducedMotion,Q=reactExports.useRef(null);o=o||G.renderer,!Q.current&&o&&(Q.current=o(r,{visualState:e,parent:R,props:t,presenceContext:K,blockInitialAnimation:K?K.initial===!1:!1,reducedMotionConfig:Y}));const ee=Q.current,ie=reactExports.useContext(SwitchLayoutGroupContext);ee&&!ee.projection&&y&&(ee.type==="html"||ee.type==="svg")&&createProjectionNode$1(Q.current,t,y,ie);const re=reactExports.useRef(!1);reactExports.useInsertionEffect(()=>{ee&&re.current&&ee.update(t,K)});const se=t[optimizedAppearDataAttribute],le=reactExports.useRef(!!se&&!((ce=window.MotionHandoffIsComplete)!=null&&ce.call(window,se))&&((oe=window.MotionHasOptimisedAnimation)==null?void 0:oe.call(window,se)));return useIsomorphicLayoutEffect(()=>{ee&&(re.current=!0,window.MotionIsMounted=!0,ee.updateFeatures(),microtask.render(ee.render),le.current&&ee.animationState&&ee.animationState.animateChanges())}),reactExports.useEffect(()=>{ee&&(!le.current&&ee.animationState&&ee.animationState.animateChanges(),le.current&&(queueMicrotask(()=>{var ue;(ue=window.MotionHandoffMarkAsComplete)==null||ue.call(window,se)}),le.current=!1))}),ee}function createProjectionNode$1(r,e,t,o){const{layoutId:y,layout:R,drag:G,dragConstraints:K,layoutScroll:Y,layoutRoot:Q,layoutCrossfade:ee}=e;r.projection=new t(r.latestValues,e["data-framer-portal-id"]?void 0:getClosestProjectingNode(r.parent)),r.projection.setOptions({layoutId:y,layout:R,alwaysMeasureLayout:!!G||K&&isRefObject(K),visualElement:r,animationType:typeof R=="string"?R:"both",initialPromotionConfig:o,crossfade:ee,layoutScroll:Y,layoutRoot:Q})}function getClosestProjectingNode(r){if(r)return r.options.allowProjection!==!1?r.projection:getClosestProjectingNode(r.parent)}function createRendererMotionComponent({preloadedFeatures:r,createVisualElement:e,useRender:t,useVisualState:o,Component:y}){r&&loadFeatures(r);function R(K,Y){let Q;const ee={...reactExports.useContext(MotionConfigContext),...K,layoutId:useLayoutId(K)},{isStatic:ie}=ee,re=useCreateMotionContext(K),se=o(K,ie);if(!ie&&isBrowser){useStrictMode();const le=getProjectionFunctionality(ee);Q=le.MeasureLayout,re.visualElement=useVisualElement(y,se,ee,e,le.ProjectionNode)}return jsxRuntimeExports.jsxs(MotionContext.Provider,{value:re,children:[Q&&re.visualElement?jsxRuntimeExports.jsx(Q,{visualElement:re.visualElement,...ee}):null,t(y,K,useMotionRef(se,re.visualElement,Y),se,ie,re.visualElement)]})}R.displayName=`motion.${typeof y=="string"?y:`create(${y.displayName??y.name??""})`}`;const G=reactExports.forwardRef(R);return G[motionComponentSymbol]=y,G}function useLayoutId({layoutId:r}){const e=reactExports.useContext(LayoutGroupContext).id;return e&&r!==void 0?e+"-"+r:r}function useStrictMode(r,e){reactExports.useContext(LazyContext).strict}function getProjectionFunctionality(r){const{drag:e,layout:t}=featureDefinitions;if(!e&&!t)return{};const o={...e,...t};return{MeasureLayout:e!=null&&e.isEnabled(r)||t!=null&&t.isEnabled(r)?o.MeasureLayout:void 0,ProjectionNode:o.ProjectionNode}}const scaleCorrectors={};function addScaleCorrector(r){for(const e in r)scaleCorrectors[e]=r[e],isCSSVariableName(e)&&(scaleCorrectors[e].isCSSVariable=!0)}function isForcedMotionValue(r,{layout:e,layoutId:t}){return transformProps.has(r)||r.startsWith("origin")||(e||t!==void 0)&&(!!scaleCorrectors[r]||r==="opacity")}const isMotionValue=r=>!!(r&&r.getVelocity),translateAlias={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},numTransforms=transformPropOrder.length;function buildTransform(r,e,t){let o="",y=!0;for(let R=0;R<numTransforms;R++){const G=transformPropOrder[R],K=r[G];if(K===void 0)continue;let Y=!0;if(typeof K=="number"?Y=K===(G.startsWith("scale")?1:0):Y=parseFloat(K)===0,!Y||t){const Q=getValueAsType(K,numberValueTypes[G]);if(!Y){y=!1;const ee=translateAlias[G]||G;o+=`${ee}(${Q}) `}t&&(e[G]=Q)}}return o=o.trim(),t?o=t(e,y?"":o):y&&(o="none"),o}function buildHTMLStyles(r,e,t){const{style:o,vars:y,transformOrigin:R}=r;let G=!1,K=!1;for(const Y in e){const Q=e[Y];if(transformProps.has(Y)){G=!0;continue}else if(isCSSVariableName(Y)){y[Y]=Q;continue}else{const ee=getValueAsType(Q,numberValueTypes[Y]);Y.startsWith("origin")?(K=!0,R[Y]=ee):o[Y]=ee}}if(e.transform||(G||t?o.transform=buildTransform(e,r.transform,t):o.transform&&(o.transform="none")),K){const{originX:Y="50%",originY:Q="50%",originZ:ee=0}=R;o.transformOrigin=`${Y} ${Q} ${ee}`}}const createHtmlRenderState=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function copyRawValuesOnly(r,e,t){for(const o in e)!isMotionValue(e[o])&&!isForcedMotionValue(o,t)&&(r[o]=e[o])}function useInitialMotionValues({transformTemplate:r},e){return reactExports.useMemo(()=>{const t=createHtmlRenderState();return buildHTMLStyles(t,e,r),Object.assign({},t.vars,t.style)},[e])}function useStyle(r,e){const t=r.style||{},o={};return copyRawValuesOnly(o,t,r),Object.assign(o,useInitialMotionValues(r,e)),o}function useHTMLProps(r,e){const t={},o=useStyle(r,e);return r.drag&&r.dragListener!==!1&&(t.draggable=!1,o.userSelect=o.WebkitUserSelect=o.WebkitTouchCallout="none",o.touchAction=r.drag===!0?"none":`pan-${r.drag==="x"?"y":"x"}`),r.tabIndex===void 0&&(r.onTap||r.onTapStart||r.whileTap)&&(t.tabIndex=0),t.style=o,t}const lowercaseSVGElements=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function isSVGComponent(r){return typeof r!="string"||r.includes("-")?!1:!!(lowercaseSVGElements.indexOf(r)>-1||/[A-Z]/u.test(r))}const dashKeys={offset:"stroke-dashoffset",array:"stroke-dasharray"},camelKeys={offset:"strokeDashoffset",array:"strokeDasharray"};function buildSVGPath(r,e,t=1,o=0,y=!0){r.pathLength=1;const R=y?dashKeys:camelKeys;r[R.offset]=px.transform(-o);const G=px.transform(e),K=px.transform(t);r[R.array]=`${G} ${K}`}function buildSVGAttrs(r,{attrX:e,attrY:t,attrScale:o,pathLength:y,pathSpacing:R=1,pathOffset:G=0,...K},Y,Q){if(buildHTMLStyles(r,K,Q),Y){r.style.viewBox&&(r.attrs.viewBox=r.style.viewBox);return}r.attrs=r.style,r.style={};const{attrs:ee,style:ie}=r;ee.transform&&(ie.transform=ee.transform,delete ee.transform),(ie.transform||ee.transformOrigin)&&(ie.transformOrigin=ee.transformOrigin??"50% 50%",delete ee.transformOrigin),ie.transform&&(ie.transformBox="fill-box",delete ee.transformBox),e!==void 0&&(ee.x=e),t!==void 0&&(ee.y=t),o!==void 0&&(ee.scale=o),y!==void 0&&buildSVGPath(ee,y,R,G,!1)}const createSvgRenderState=()=>({...createHtmlRenderState(),attrs:{}}),isSVGTag=r=>typeof r=="string"&&r.toLowerCase()==="svg";function useSVGProps(r,e,t,o){const y=reactExports.useMemo(()=>{const R=createSvgRenderState();return buildSVGAttrs(R,e,isSVGTag(o),r.transformTemplate),{...R.attrs,style:{...R.style}}},[e]);if(r.style){const R={};copyRawValuesOnly(R,r.style,r),y.style={...R,...y.style}}return y}function createUseRender(r=!1){return(t,o,y,{latestValues:R},G)=>{const Y=(isSVGComponent(t)?useSVGProps:useHTMLProps)(o,R,G,t),Q=filterProps(o,typeof t=="string",r),ee=t!==reactExports.Fragment?{...Q,...Y,ref:y}:{},{children:ie}=o,re=reactExports.useMemo(()=>isMotionValue(ie)?ie.get():ie,[ie]);return reactExports.createElement(t,{...ee,children:re})}}function getValueState(r){const e=[{},{}];return r==null||r.values.forEach((t,o)=>{e[0][o]=t.get(),e[1][o]=t.getVelocity()}),e}function resolveVariantFromProps(r,e,t,o){if(typeof e=="function"){const[y,R]=getValueState(o);e=e(t!==void 0?t:r.custom,y,R)}if(typeof e=="string"&&(e=r.variants&&r.variants[e]),typeof e=="function"){const[y,R]=getValueState(o);e=e(t!==void 0?t:r.custom,y,R)}return e}function resolveMotionValue(r){return isMotionValue(r)?r.get():r}function makeState({scrapeMotionValuesFromProps:r,createRenderState:e},t,o,y){return{latestValues:makeLatestValues(t,o,y,r),renderState:e()}}const makeUseVisualState=r=>(e,t)=>{const o=reactExports.useContext(MotionContext),y=reactExports.useContext(PresenceContext),R=()=>makeState(r,e,o,y);return t?R():useConstant(R)};function makeLatestValues(r,e,t,o){const y={},R=o(r,{});for(const re in R)y[re]=resolveMotionValue(R[re]);let{initial:G,animate:K}=r;const Y=isControllingVariants(r),Q=isVariantNode(r);e&&Q&&!Y&&r.inherit!==!1&&(G===void 0&&(G=e.initial),K===void 0&&(K=e.animate));let ee=t?t.initial===!1:!1;ee=ee||G===!1;const ie=ee?K:G;if(ie&&typeof ie!="boolean"&&!isAnimationControls(ie)){const re=Array.isArray(ie)?ie:[ie];for(let se=0;se<re.length;se++){const le=resolveVariantFromProps(r,re[se]);if(le){const{transitionEnd:ce,transition:oe,...ue}=le;for(const ge in ue){let ve=ue[ge];if(Array.isArray(ve)){const _e=ee?ve.length-1:0;ve=ve[_e]}ve!==null&&(y[ge]=ve)}for(const ge in ce)y[ge]=ce[ge]}}}return y}function scrapeMotionValuesFromProps$1(r,e,t){var R;const{style:o}=r,y={};for(const G in o)(isMotionValue(o[G])||e.style&&isMotionValue(e.style[G])||isForcedMotionValue(G,r)||((R=t==null?void 0:t.getValue(G))==null?void 0:R.liveStyle)!==void 0)&&(y[G]=o[G]);return y}const htmlMotionConfig={useVisualState:makeUseVisualState({scrapeMotionValuesFromProps:scrapeMotionValuesFromProps$1,createRenderState:createHtmlRenderState})};function scrapeMotionValuesFromProps(r,e,t){const o=scrapeMotionValuesFromProps$1(r,e,t);for(const y in r)if(isMotionValue(r[y])||isMotionValue(e[y])){const R=transformPropOrder.indexOf(y)!==-1?"attr"+y.charAt(0).toUpperCase()+y.substring(1):y;o[R]=r[y]}return o}const svgMotionConfig={useVisualState:makeUseVisualState({scrapeMotionValuesFromProps,createRenderState:createSvgRenderState})};function createMotionComponentFactory(r,e){return function(o,{forwardMotionProps:y}={forwardMotionProps:!1}){const G={...isSVGComponent(o)?svgMotionConfig:htmlMotionConfig,preloadedFeatures:r,useRender:createUseRender(y),createVisualElement:e,Component:o};return createRendererMotionComponent(G)}}function resolveVariant(r,e,t){const o=r.getProps();return resolveVariantFromProps(o,e,t!==void 0?t:o.custom,r)}const isKeyframesTarget=r=>Array.isArray(r);function setMotionValue(r,e,t){r.hasValue(e)?r.getValue(e).set(t):r.addValue(e,motionValue(t))}function resolveFinalValueInKeyframes(r){return isKeyframesTarget(r)?r[r.length-1]||0:r}function setTarget(r,e){const t=resolveVariant(r,e);let{transitionEnd:o={},transition:y={},...R}=t||{};R={...R,...o};for(const G in R){const K=resolveFinalValueInKeyframes(R[G]);setMotionValue(r,G,K)}}function isWillChangeMotionValue(r){return!!(isMotionValue(r)&&r.add)}function addValueToWillChange(r,e){const t=r.getValue("willChange");if(isWillChangeMotionValue(t))return t.add(e);if(!t&&MotionGlobalConfig.WillChange){const o=new MotionGlobalConfig.WillChange("auto");r.addValue("willChange",o),o.add(e)}}function getOptimisedAppearId(r){return r.props[optimizedAppearDataAttribute]}const isNotNull=r=>r!==null;function getFinalKeyframe(r,{repeat:e,repeatType:t="loop"},o){const y=r.filter(isNotNull),R=e&&t!=="loop"&&e%2===1?0:y.length-1;return y[R]}const underDampedSpring={type:"spring",stiffness:500,damping:25,restSpeed:10},criticallyDampedSpring=r=>({type:"spring",stiffness:550,damping:r===0?2*Math.sqrt(550):30,restSpeed:10}),keyframesTransition={type:"keyframes",duration:.8},ease={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},getDefaultTransition=(r,{keyframes:e})=>e.length>2?keyframesTransition:transformProps.has(r)?r.startsWith("scale")?criticallyDampedSpring(e[1]):underDampedSpring:ease;function isTransitionDefined({when:r,delay:e,delayChildren:t,staggerChildren:o,staggerDirection:y,repeat:R,repeatType:G,repeatDelay:K,from:Y,elapsed:Q,...ee}){return!!Object.keys(ee).length}const animateMotionValue=(r,e,t,o={},y,R)=>G=>{const K=getValueTransition$1(o,r)||{},Y=K.delay||o.delay||0;let{elapsed:Q=0}=o;Q=Q-secondsToMilliseconds(Y);const ee={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...K,delay:-Q,onUpdate:re=>{e.set(re),K.onUpdate&&K.onUpdate(re)},onComplete:()=>{G(),K.onComplete&&K.onComplete()},name:r,motionValue:e,element:R?void 0:y};isTransitionDefined(K)||Object.assign(ee,getDefaultTransition(r,ee)),ee.duration&&(ee.duration=secondsToMilliseconds(ee.duration)),ee.repeatDelay&&(ee.repeatDelay=secondsToMilliseconds(ee.repeatDelay)),ee.from!==void 0&&(ee.keyframes[0]=ee.from);let ie=!1;if((ee.type===!1||ee.duration===0&&!ee.repeatDelay)&&(ee.duration=0,ee.delay===0&&(ie=!0)),(MotionGlobalConfig.instantAnimations||MotionGlobalConfig.skipAnimations)&&(ie=!0,ee.duration=0,ee.delay=0),ee.allowFlatten=!K.type&&!K.ease,ie&&!R&&e.get()!==void 0){const re=getFinalKeyframe(ee.keyframes,K);if(re!==void 0){frame.update(()=>{ee.onUpdate(re),ee.onComplete()});return}}return new AsyncMotionValueAnimation(ee)};function shouldBlockAnimation({protectedKeys:r,needsAnimating:e},t){const o=r.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,o}function animateTarget(r,e,{delay:t=0,transitionOverride:o,type:y}={}){let{transition:R=r.getDefaultTransition(),transitionEnd:G,...K}=e;o&&(R=o);const Y=[],Q=y&&r.animationState&&r.animationState.getState()[y];for(const ee in K){const ie=r.getValue(ee,r.latestValues[ee]??null),re=K[ee];if(re===void 0||Q&&shouldBlockAnimation(Q,ee))continue;const se={delay:t,...getValueTransition$1(R||{},ee)},le=ie.get();if(le!==void 0&&!ie.isAnimating&&!Array.isArray(re)&&re===le&&!se.velocity)continue;let ce=!1;if(window.MotionHandoffAnimation){const ue=getOptimisedAppearId(r);if(ue){const ge=window.MotionHandoffAnimation(ue,ee,frame);ge!==null&&(se.startTime=ge,ce=!0)}}addValueToWillChange(r,ee),ie.start(animateMotionValue(ee,ie,re,r.shouldReduceMotion&&positionalKeys.has(ee)?{type:!1}:se,r,ce));const oe=ie.animation;oe&&Y.push(oe)}return G&&Promise.all(Y).then(()=>{frame.update(()=>{G&&setTarget(r,G)})}),Y}function animateVariant(r,e,t={}){var Y;const o=resolveVariant(r,e,t.type==="exit"?(Y=r.presenceContext)==null?void 0:Y.custom:void 0);let{transition:y=r.getDefaultTransition()||{}}=o||{};t.transitionOverride&&(y=t.transitionOverride);const R=o?()=>Promise.all(animateTarget(r,o,t)):()=>Promise.resolve(),G=r.variantChildren&&r.variantChildren.size?(Q=0)=>{const{delayChildren:ee=0,staggerChildren:ie,staggerDirection:re}=y;return animateChildren(r,e,ee+Q,ie,re,t)}:()=>Promise.resolve(),{when:K}=y;if(K){const[Q,ee]=K==="beforeChildren"?[R,G]:[G,R];return Q().then(()=>ee())}else return Promise.all([R(),G(t.delay)])}function animateChildren(r,e,t=0,o=0,y=1,R){const G=[],K=(r.variantChildren.size-1)*o,Y=y===1?(Q=0)=>Q*o:(Q=0)=>K-Q*o;return Array.from(r.variantChildren).sort(sortByTreeOrder).forEach((Q,ee)=>{Q.notify("AnimationStart",e),G.push(animateVariant(Q,e,{...R,delay:t+Y(ee)}).then(()=>Q.notify("AnimationComplete",e)))}),Promise.all(G)}function sortByTreeOrder(r,e){return r.sortNodePosition(e)}function animateVisualElement(r,e,t={}){r.notify("AnimationStart",e);let o;if(Array.isArray(e)){const y=e.map(R=>animateVariant(r,R,t));o=Promise.all(y)}else if(typeof e=="string")o=animateVariant(r,e,t);else{const y=typeof e=="function"?resolveVariant(r,e,t.custom):e;o=Promise.all(animateTarget(r,y,t))}return o.then(()=>{r.notify("AnimationComplete",e)})}function shallowCompare(r,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==r.length)return!1;for(let o=0;o<t;o++)if(e[o]!==r[o])return!1;return!0}const numVariantProps=variantProps.length;function getVariantContext(r){if(!r)return;if(!r.isControllingVariants){const t=r.parent?getVariantContext(r.parent)||{}:{};return r.props.initial!==void 0&&(t.initial=r.props.initial),t}const e={};for(let t=0;t<numVariantProps;t++){const o=variantProps[t],y=r.props[o];(isVariantLabel(y)||y===!1)&&(e[o]=y)}return e}const reversePriorityOrder=[...variantPriorityOrder].reverse(),numAnimationTypes=variantPriorityOrder.length;function animateList(r){return e=>Promise.all(e.map(({animation:t,options:o})=>animateVisualElement(r,t,o)))}function createAnimationState(r){let e=animateList(r),t=createState(),o=!0;const y=Y=>(Q,ee)=>{var re;const ie=resolveVariant(r,ee,Y==="exit"?(re=r.presenceContext)==null?void 0:re.custom:void 0);if(ie){const{transition:se,transitionEnd:le,...ce}=ie;Q={...Q,...ce,...le}}return Q};function R(Y){e=Y(r)}function G(Y){const{props:Q}=r,ee=getVariantContext(r.parent)||{},ie=[],re=new Set;let se={},le=1/0;for(let oe=0;oe<numAnimationTypes;oe++){const ue=reversePriorityOrder[oe],ge=t[ue],ve=Q[ue]!==void 0?Q[ue]:ee[ue],_e=isVariantLabel(ve),be=ue===Y?ge.isActive:null;be===!1&&(le=oe);let Re=ve===ee[ue]&&ve!==Q[ue]&&_e;if(Re&&o&&r.manuallyAnimateOnMount&&(Re=!1),ge.protectedKeys={...se},!ge.isActive&&be===null||!ve&&!ge.prevProp||isAnimationControls(ve)||typeof ve=="boolean")continue;const Se=checkVariantsDidChange(ge.prevProp,ve);let Ee=Se||ue===Y&&ge.isActive&&!Re&&_e||oe>le&&_e,ye=!1;const de=Array.isArray(ve)?ve:[ve];let Me=de.reduce(y(ue),{});be===!1&&(Me={});const{prevResolvedValues:Le={}}=ge,Pe={...Le,...Me},Ue=Ce=>{Ee=!0,re.has(Ce)&&(ye=!0,re.delete(Ce)),ge.needsAnimating[Ce]=!0;const De=r.getValue(Ce);De&&(De.liveStyle=!1)};for(const Ce in Pe){const De=Me[Ce],Oe=Le[Ce];if(se.hasOwnProperty(Ce))continue;let Te=!1;isKeyframesTarget(De)&&isKeyframesTarget(Oe)?Te=!shallowCompare(De,Oe):Te=De!==Oe,Te?De!=null?Ue(Ce):re.add(Ce):De!==void 0&&re.has(Ce)?Ue(Ce):ge.protectedKeys[Ce]=!0}ge.prevProp=ve,ge.prevResolvedValues=Me,ge.isActive&&(se={...se,...Me}),o&&r.blockInitialAnimation&&(Ee=!1),Ee&&(!(Re&&Se)||ye)&&ie.push(...de.map(Ce=>({animation:Ce,options:{type:ue}})))}if(re.size){const oe={};if(typeof Q.initial!="boolean"){const ue=resolveVariant(r,Array.isArray(Q.initial)?Q.initial[0]:Q.initial);ue&&ue.transition&&(oe.transition=ue.transition)}re.forEach(ue=>{const ge=r.getBaseTarget(ue),ve=r.getValue(ue);ve&&(ve.liveStyle=!0),oe[ue]=ge??null}),ie.push({animation:oe})}let ce=!!ie.length;return o&&(Q.initial===!1||Q.initial===Q.animate)&&!r.manuallyAnimateOnMount&&(ce=!1),o=!1,ce?e(ie):Promise.resolve()}function K(Y,Q){var ie;if(t[Y].isActive===Q)return Promise.resolve();(ie=r.variantChildren)==null||ie.forEach(re=>{var se;return(se=re.animationState)==null?void 0:se.setActive(Y,Q)}),t[Y].isActive=Q;const ee=G(Y);for(const re in t)t[re].protectedKeys={};return ee}return{animateChanges:G,setActive:K,setAnimateFunction:R,getState:()=>t,reset:()=>{t=createState(),o=!0}}}function checkVariantsDidChange(r,e){return typeof e=="string"?e!==r:Array.isArray(e)?!shallowCompare(e,r):!1}function createTypeState(r=!1){return{isActive:r,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function createState(){return{animate:createTypeState(!0),whileInView:createTypeState(),whileHover:createTypeState(),whileTap:createTypeState(),whileDrag:createTypeState(),whileFocus:createTypeState(),exit:createTypeState()}}class Feature{constructor(e){this.isMounted=!1,this.node=e}update(){}}class AnimationFeature extends Feature{constructor(e){super(e),e.animationState||(e.animationState=createAnimationState(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();isAnimationControls(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let id$1=0;class ExitAnimationFeature extends Feature{constructor(){super(...arguments),this.id=id$1++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:o}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===o)return;const y=this.node.animationState.setActive("exit",!e);t&&!e&&y.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const animations={animation:{Feature:AnimationFeature},exit:{Feature:ExitAnimationFeature}};function addDomEvent(r,e,t,o={passive:!0}){return r.addEventListener(e,t,o),()=>r.removeEventListener(e,t)}function extractEventInfo(r){return{point:{x:r.pageX,y:r.pageY}}}const addPointerInfo=r=>e=>isPrimaryPointer(e)&&r(e,extractEventInfo(e));function addPointerEvent(r,e,t,o){return addDomEvent(r,e,addPointerInfo(t),o)}function convertBoundingBoxToBox({top:r,left:e,right:t,bottom:o}){return{x:{min:e,max:t},y:{min:r,max:o}}}function convertBoxToBoundingBox({x:r,y:e}){return{top:e.min,right:r.max,bottom:e.max,left:r.min}}function transformBoxPoints(r,e){if(!e)return r;const t=e({x:r.left,y:r.top}),o=e({x:r.right,y:r.bottom});return{top:t.y,left:t.x,bottom:o.y,right:o.x}}const SCALE_PRECISION=1e-4,SCALE_MIN=1-SCALE_PRECISION,SCALE_MAX=1+SCALE_PRECISION,TRANSLATE_PRECISION=.01,TRANSLATE_MIN=0-TRANSLATE_PRECISION,TRANSLATE_MAX=0+TRANSLATE_PRECISION;function calcLength(r){return r.max-r.min}function isNear(r,e,t){return Math.abs(r-e)<=t}function calcAxisDelta(r,e,t,o=.5){r.origin=o,r.originPoint=mixNumber$1(e.min,e.max,r.origin),r.scale=calcLength(t)/calcLength(e),r.translate=mixNumber$1(t.min,t.max,r.origin)-r.originPoint,(r.scale>=SCALE_MIN&&r.scale<=SCALE_MAX||isNaN(r.scale))&&(r.scale=1),(r.translate>=TRANSLATE_MIN&&r.translate<=TRANSLATE_MAX||isNaN(r.translate))&&(r.translate=0)}function calcBoxDelta(r,e,t,o){calcAxisDelta(r.x,e.x,t.x,o?o.originX:void 0),calcAxisDelta(r.y,e.y,t.y,o?o.originY:void 0)}function calcRelativeAxis(r,e,t){r.min=t.min+e.min,r.max=r.min+calcLength(e)}function calcRelativeBox(r,e,t){calcRelativeAxis(r.x,e.x,t.x),calcRelativeAxis(r.y,e.y,t.y)}function calcRelativeAxisPosition(r,e,t){r.min=e.min-t.min,r.max=r.min+calcLength(e)}function calcRelativePosition(r,e,t){calcRelativeAxisPosition(r.x,e.x,t.x),calcRelativeAxisPosition(r.y,e.y,t.y)}const createAxisDelta=()=>({translate:0,scale:1,origin:0,originPoint:0}),createDelta=()=>({x:createAxisDelta(),y:createAxisDelta()}),createAxis=()=>({min:0,max:0}),createBox=()=>({x:createAxis(),y:createAxis()});function eachAxis(r){return[r("x"),r("y")]}function isIdentityScale(r){return r===void 0||r===1}function hasScale({scale:r,scaleX:e,scaleY:t}){return!isIdentityScale(r)||!isIdentityScale(e)||!isIdentityScale(t)}function hasTransform(r){return hasScale(r)||has2DTranslate(r)||r.z||r.rotate||r.rotateX||r.rotateY||r.skewX||r.skewY}function has2DTranslate(r){return is2DTranslate(r.x)||is2DTranslate(r.y)}function is2DTranslate(r){return r&&r!=="0%"}function scalePoint(r,e,t){const o=r-t,y=e*o;return t+y}function applyPointDelta(r,e,t,o,y){return y!==void 0&&(r=scalePoint(r,y,o)),scalePoint(r,t,o)+e}function applyAxisDelta(r,e=0,t=1,o,y){r.min=applyPointDelta(r.min,e,t,o,y),r.max=applyPointDelta(r.max,e,t,o,y)}function applyBoxDelta(r,{x:e,y:t}){applyAxisDelta(r.x,e.translate,e.scale,e.originPoint),applyAxisDelta(r.y,t.translate,t.scale,t.originPoint)}const TREE_SCALE_SNAP_MIN=.999999999999,TREE_SCALE_SNAP_MAX=1.0000000000001;function applyTreeDeltas(r,e,t,o=!1){const y=t.length;if(!y)return;e.x=e.y=1;let R,G;for(let K=0;K<y;K++){R=t[K],G=R.projectionDelta;const{visualElement:Y}=R.options;Y&&Y.props.style&&Y.props.style.display==="contents"||(o&&R.options.layoutScroll&&R.scroll&&R!==R.root&&transformBox(r,{x:-R.scroll.offset.x,y:-R.scroll.offset.y}),G&&(e.x*=G.x.scale,e.y*=G.y.scale,applyBoxDelta(r,G)),o&&hasTransform(R.latestValues)&&transformBox(r,R.latestValues))}e.x<TREE_SCALE_SNAP_MAX&&e.x>TREE_SCALE_SNAP_MIN&&(e.x=1),e.y<TREE_SCALE_SNAP_MAX&&e.y>TREE_SCALE_SNAP_MIN&&(e.y=1)}function translateAxis(r,e){r.min=r.min+e,r.max=r.max+e}function transformAxis(r,e,t,o,y=.5){const R=mixNumber$1(r.min,r.max,y);applyAxisDelta(r,e,t,R,o)}function transformBox(r,e){transformAxis(r.x,e.x,e.scaleX,e.scale,e.originX),transformAxis(r.y,e.y,e.scaleY,e.scale,e.originY)}function measureViewportBox(r,e){return convertBoundingBoxToBox(transformBoxPoints(r.getBoundingClientRect(),e))}function measurePageBox(r,e,t){const o=measureViewportBox(r,t),{scroll:y}=e;return y&&(translateAxis(o.x,y.offset.x),translateAxis(o.y,y.offset.y)),o}const getContextWindow=({current:r})=>r?r.ownerDocument.defaultView:null,distance=(r,e)=>Math.abs(r-e);function distance2D(r,e){const t=distance(r.x,e.x),o=distance(r.y,e.y);return Math.sqrt(t**2+o**2)}class PanSession{constructor(e,t,{transformPagePoint:o,contextWindow:y,dragSnapToOrigin:R=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const ie=getPanInfo(this.lastMoveEventInfo,this.history),re=this.startEvent!==null,se=distance2D(ie.offset,{x:0,y:0})>=3;if(!re&&!se)return;const{point:le}=ie,{timestamp:ce}=frameData;this.history.push({...le,timestamp:ce});const{onStart:oe,onMove:ue}=this.handlers;re||(oe&&oe(this.lastMoveEvent,ie),this.startEvent=this.lastMoveEvent),ue&&ue(this.lastMoveEvent,ie)},this.handlePointerMove=(ie,re)=>{this.lastMoveEvent=ie,this.lastMoveEventInfo=transformPoint(re,this.transformPagePoint),frame.update(this.updatePoint,!0)},this.handlePointerUp=(ie,re)=>{this.end();const{onEnd:se,onSessionEnd:le,resumeAnimation:ce}=this.handlers;if(this.dragSnapToOrigin&&ce&&ce(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const oe=getPanInfo(ie.type==="pointercancel"?this.lastMoveEventInfo:transformPoint(re,this.transformPagePoint),this.history);this.startEvent&&se&&se(ie,oe),le&&le(ie,oe)},!isPrimaryPointer(e))return;this.dragSnapToOrigin=R,this.handlers=t,this.transformPagePoint=o,this.contextWindow=y||window;const G=extractEventInfo(e),K=transformPoint(G,this.transformPagePoint),{point:Y}=K,{timestamp:Q}=frameData;this.history=[{...Y,timestamp:Q}];const{onSessionStart:ee}=t;ee&&ee(e,getPanInfo(K,this.history)),this.removeListeners=pipe(addPointerEvent(this.contextWindow,"pointermove",this.handlePointerMove),addPointerEvent(this.contextWindow,"pointerup",this.handlePointerUp),addPointerEvent(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),cancelFrame(this.updatePoint)}}function transformPoint(r,e){return e?{point:e(r.point)}:r}function subtractPoint(r,e){return{x:r.x-e.x,y:r.y-e.y}}function getPanInfo({point:r},e){return{point:r,delta:subtractPoint(r,lastDevicePoint(e)),offset:subtractPoint(r,startDevicePoint(e)),velocity:getVelocity(e,.1)}}function startDevicePoint(r){return r[0]}function lastDevicePoint(r){return r[r.length-1]}function getVelocity(r,e){if(r.length<2)return{x:0,y:0};let t=r.length-1,o=null;const y=lastDevicePoint(r);for(;t>=0&&(o=r[t],!(y.timestamp-o.timestamp>secondsToMilliseconds(e)));)t--;if(!o)return{x:0,y:0};const R=millisecondsToSeconds(y.timestamp-o.timestamp);if(R===0)return{x:0,y:0};const G={x:(y.x-o.x)/R,y:(y.y-o.y)/R};return G.x===1/0&&(G.x=0),G.y===1/0&&(G.y=0),G}function applyConstraints(r,{min:e,max:t},o){return e!==void 0&&r<e?r=o?mixNumber$1(e,r,o.min):Math.max(r,e):t!==void 0&&r>t&&(r=o?mixNumber$1(t,r,o.max):Math.min(r,t)),r}function calcRelativeAxisConstraints(r,e,t){return{min:e!==void 0?r.min+e:void 0,max:t!==void 0?r.max+t-(r.max-r.min):void 0}}function calcRelativeConstraints(r,{top:e,left:t,bottom:o,right:y}){return{x:calcRelativeAxisConstraints(r.x,t,y),y:calcRelativeAxisConstraints(r.y,e,o)}}function calcViewportAxisConstraints(r,e){let t=e.min-r.min,o=e.max-r.max;return e.max-e.min<r.max-r.min&&([t,o]=[o,t]),{min:t,max:o}}function calcViewportConstraints(r,e){return{x:calcViewportAxisConstraints(r.x,e.x),y:calcViewportAxisConstraints(r.y,e.y)}}function calcOrigin(r,e){let t=.5;const o=calcLength(r),y=calcLength(e);return y>o?t=progress(e.min,e.max-o,r.min):o>y&&(t=progress(r.min,r.max-y,e.min)),clamp(0,1,t)}function rebaseAxisConstraints(r,e){const t={};return e.min!==void 0&&(t.min=e.min-r.min),e.max!==void 0&&(t.max=e.max-r.min),t}const defaultElastic=.35;function resolveDragElastic(r=defaultElastic){return r===!1?r=0:r===!0&&(r=defaultElastic),{x:resolveAxisElastic(r,"left","right"),y:resolveAxisElastic(r,"top","bottom")}}function resolveAxisElastic(r,e,t){return{min:resolvePointElastic(r,e),max:resolvePointElastic(r,t)}}function resolvePointElastic(r,e){return typeof r=="number"?r:r[e]||0}const elementDragControls=new WeakMap;class VisualElementDragControls{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=createBox(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:o}=this.visualElement;if(o&&o.isPresent===!1)return;const y=ee=>{const{dragSnapToOrigin:ie}=this.getProps();ie?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(extractEventInfo(ee).point)},R=(ee,ie)=>{const{drag:re,dragPropagation:se,onDragStart:le}=this.getProps();if(re&&!se&&(this.openDragLock&&this.openDragLock(),this.openDragLock=setDragLock(re),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),eachAxis(oe=>{let ue=this.getAxisMotionValue(oe).get()||0;if(percent.test(ue)){const{projection:ge}=this.visualElement;if(ge&&ge.layout){const ve=ge.layout.layoutBox[oe];ve&&(ue=calcLength(ve)*(parseFloat(ue)/100))}}this.originPoint[oe]=ue}),le&&frame.postRender(()=>le(ee,ie)),addValueToWillChange(this.visualElement,"transform");const{animationState:ce}=this.visualElement;ce&&ce.setActive("whileDrag",!0)},G=(ee,ie)=>{const{dragPropagation:re,dragDirectionLock:se,onDirectionLock:le,onDrag:ce}=this.getProps();if(!re&&!this.openDragLock)return;const{offset:oe}=ie;if(se&&this.currentDirection===null){this.currentDirection=getCurrentDirection(oe),this.currentDirection!==null&&le&&le(this.currentDirection);return}this.updateAxis("x",ie.point,oe),this.updateAxis("y",ie.point,oe),this.visualElement.render(),ce&&ce(ee,ie)},K=(ee,ie)=>this.stop(ee,ie),Y=()=>eachAxis(ee=>{var ie;return this.getAnimationState(ee)==="paused"&&((ie=this.getAxisMotionValue(ee).animation)==null?void 0:ie.play())}),{dragSnapToOrigin:Q}=this.getProps();this.panSession=new PanSession(e,{onSessionStart:y,onStart:R,onMove:G,onSessionEnd:K,resumeAnimation:Y},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:Q,contextWindow:getContextWindow(this.visualElement)})}stop(e,t){const o=this.isDragging;if(this.cancel(),!o)return;const{velocity:y}=t;this.startAnimation(y);const{onDragEnd:R}=this.getProps();R&&frame.postRender(()=>R(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:o}=this.getProps();!o&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,o){const{drag:y}=this.getProps();if(!o||!shouldDrag(e,y,this.currentDirection))return;const R=this.getAxisMotionValue(e);let G=this.originPoint[e]+o[e];this.constraints&&this.constraints[e]&&(G=applyConstraints(G,this.constraints[e],this.elastic[e])),R.set(G)}resolveConstraints(){var R;const{dragConstraints:e,dragElastic:t}=this.getProps(),o=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(R=this.visualElement.projection)==null?void 0:R.layout,y=this.constraints;e&&isRefObject(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&o?this.constraints=calcRelativeConstraints(o.layoutBox,e):this.constraints=!1,this.elastic=resolveDragElastic(t),y!==this.constraints&&o&&this.constraints&&!this.hasMutatedConstraints&&eachAxis(G=>{this.constraints!==!1&&this.getAxisMotionValue(G)&&(this.constraints[G]=rebaseAxisConstraints(o.layoutBox[G],this.constraints[G]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!isRefObject(e))return!1;const o=e.current,{projection:y}=this.visualElement;if(!y||!y.layout)return!1;const R=measurePageBox(o,y.root,this.visualElement.getTransformPagePoint());let G=calcViewportConstraints(y.layout.layoutBox,R);if(t){const K=t(convertBoxToBoundingBox(G));this.hasMutatedConstraints=!!K,K&&(G=convertBoundingBoxToBox(K))}return G}startAnimation(e){const{drag:t,dragMomentum:o,dragElastic:y,dragTransition:R,dragSnapToOrigin:G,onDragTransitionEnd:K}=this.getProps(),Y=this.constraints||{},Q=eachAxis(ee=>{if(!shouldDrag(ee,t,this.currentDirection))return;let ie=Y&&Y[ee]||{};G&&(ie={min:0,max:0});const re=y?200:1e6,se=y?40:1e7,le={type:"inertia",velocity:o?e[ee]:0,bounceStiffness:re,bounceDamping:se,timeConstant:750,restDelta:1,restSpeed:10,...R,...ie};return this.startAxisValueAnimation(ee,le)});return Promise.all(Q).then(K)}startAxisValueAnimation(e,t){const o=this.getAxisMotionValue(e);return addValueToWillChange(this.visualElement,e),o.start(animateMotionValue(e,o,0,t,this.visualElement,!1))}stopAnimation(){eachAxis(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){eachAxis(e=>{var t;return(t=this.getAxisMotionValue(e).animation)==null?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)==null?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,o=this.visualElement.getProps(),y=o[t];return y||this.visualElement.getValue(e,(o.initial?o.initial[e]:void 0)||0)}snapToCursor(e){eachAxis(t=>{const{drag:o}=this.getProps();if(!shouldDrag(t,o,this.currentDirection))return;const{projection:y}=this.visualElement,R=this.getAxisMotionValue(t);if(y&&y.layout){const{min:G,max:K}=y.layout.layoutBox[t];R.set(e[t]-mixNumber$1(G,K,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:o}=this.visualElement;if(!isRefObject(t)||!o||!this.constraints)return;this.stopAnimation();const y={x:0,y:0};eachAxis(G=>{const K=this.getAxisMotionValue(G);if(K&&this.constraints!==!1){const Y=K.get();y[G]=calcOrigin({min:Y,max:Y},this.constraints[G])}});const{transformTemplate:R}=this.visualElement.getProps();this.visualElement.current.style.transform=R?R({},""):"none",o.root&&o.root.updateScroll(),o.updateLayout(),this.resolveConstraints(),eachAxis(G=>{if(!shouldDrag(G,e,null))return;const K=this.getAxisMotionValue(G),{min:Y,max:Q}=this.constraints[G];K.set(mixNumber$1(Y,Q,y[G]))})}addListeners(){if(!this.visualElement.current)return;elementDragControls.set(this.visualElement,this);const e=this.visualElement.current,t=addPointerEvent(e,"pointerdown",Y=>{const{drag:Q,dragListener:ee=!0}=this.getProps();Q&&ee&&this.start(Y)}),o=()=>{const{dragConstraints:Y}=this.getProps();isRefObject(Y)&&Y.current&&(this.constraints=this.resolveRefConstraints())},{projection:y}=this.visualElement,R=y.addEventListener("measure",o);y&&!y.layout&&(y.root&&y.root.updateScroll(),y.updateLayout()),frame.read(o);const G=addDomEvent(window,"resize",()=>this.scalePositionWithinConstraints()),K=y.addEventListener("didUpdate",({delta:Y,hasLayoutChanged:Q})=>{this.isDragging&&Q&&(eachAxis(ee=>{const ie=this.getAxisMotionValue(ee);ie&&(this.originPoint[ee]+=Y[ee].translate,ie.set(ie.get()+Y[ee].translate))}),this.visualElement.render())});return()=>{G(),t(),R(),K&&K()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:o=!1,dragPropagation:y=!1,dragConstraints:R=!1,dragElastic:G=defaultElastic,dragMomentum:K=!0}=e;return{...e,drag:t,dragDirectionLock:o,dragPropagation:y,dragConstraints:R,dragElastic:G,dragMomentum:K}}}function shouldDrag(r,e,t){return(e===!0||e===r)&&(t===null||t===r)}function getCurrentDirection(r,e=10){let t=null;return Math.abs(r.y)>e?t="y":Math.abs(r.x)>e&&(t="x"),t}class DragGesture extends Feature{constructor(e){super(e),this.removeGroupControls=noop,this.removeListeners=noop,this.controls=new VisualElementDragControls(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||noop}unmount(){this.removeGroupControls(),this.removeListeners()}}const asyncHandler=r=>(e,t)=>{r&&frame.postRender(()=>r(e,t))};class PanGesture extends Feature{constructor(){super(...arguments),this.removePointerDownListener=noop}onPointerDown(e){this.session=new PanSession(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:getContextWindow(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:o,onPanEnd:y}=this.node.getProps();return{onSessionStart:asyncHandler(e),onStart:asyncHandler(t),onMove:o,onEnd:(R,G)=>{delete this.session,y&&frame.postRender(()=>y(R,G))}}}mount(){this.removePointerDownListener=addPointerEvent(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const globalProjectionState={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function pixelsToPercent(r,e){return e.max===e.min?0:r/(e.max-e.min)*100}const correctBorderRadius={correct:(r,e)=>{if(!e.target)return r;if(typeof r=="string")if(px.test(r))r=parseFloat(r);else return r;const t=pixelsToPercent(r,e.target.x),o=pixelsToPercent(r,e.target.y);return`${t}% ${o}%`}},correctBoxShadow={correct:(r,{treeScale:e,projectionDelta:t})=>{const o=r,y=complex.parse(r);if(y.length>5)return o;const R=complex.createTransformer(r),G=typeof y[0]!="number"?1:0,K=t.x.scale*e.x,Y=t.y.scale*e.y;y[0+G]/=K,y[1+G]/=Y;const Q=mixNumber$1(K,Y,.5);return typeof y[2+G]=="number"&&(y[2+G]/=Q),typeof y[3+G]=="number"&&(y[3+G]/=Q),R(y)}};class MeasureLayoutWithContext extends reactExports.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:o,layoutId:y}=this.props,{projection:R}=e;addScaleCorrector(defaultScaleCorrectors),R&&(t.group&&t.group.add(R),o&&o.register&&y&&o.register(R),R.root.didUpdate(),R.addEventListener("animationComplete",()=>{this.safeToRemove()}),R.setOptions({...R.options,onExitComplete:()=>this.safeToRemove()})),globalProjectionState.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:o,drag:y,isPresent:R}=this.props,G=o.projection;return G&&(G.isPresent=R,y||e.layoutDependency!==t||t===void 0||e.isPresent!==R?G.willUpdate():this.safeToRemove(),e.isPresent!==R&&(R?G.promote():G.relegate()||frame.postRender(()=>{const K=G.getStack();(!K||!K.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),microtask.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:o}=this.props,{projection:y}=e;y&&(y.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(y),o&&o.deregister&&o.deregister(y))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function MeasureLayout(r){const[e,t]=usePresence(),o=reactExports.useContext(LayoutGroupContext);return jsxRuntimeExports.jsx(MeasureLayoutWithContext,{...r,layoutGroup:o,switchLayoutGroup:reactExports.useContext(SwitchLayoutGroupContext),isPresent:e,safeToRemove:t})}const defaultScaleCorrectors={borderRadius:{...correctBorderRadius,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:correctBorderRadius,borderTopRightRadius:correctBorderRadius,borderBottomLeftRadius:correctBorderRadius,borderBottomRightRadius:correctBorderRadius,boxShadow:correctBoxShadow};function animateSingleValue(r,e,t){const o=isMotionValue(r)?r:motionValue(r);return o.start(animateMotionValue("",o,e,t)),o.animation}function isSVGElement(r){return r instanceof SVGElement&&r.tagName!=="svg"}const compareByDepth=(r,e)=>r.depth-e.depth;class FlatTree{constructor(){this.children=[],this.isDirty=!1}add(e){addUniqueItem(this.children,e),this.isDirty=!0}remove(e){removeItem(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(compareByDepth),this.isDirty=!1,this.children.forEach(e)}}function delay(r,e){const t=time.now(),o=({timestamp:y})=>{const R=y-t;R>=e&&(cancelFrame(o),r(R-e))};return frame.setup(o,!0),()=>cancelFrame(o)}const borders=["TopLeft","TopRight","BottomLeft","BottomRight"],numBorders=borders.length,asNumber$1=r=>typeof r=="string"?parseFloat(r):r,isPx=r=>typeof r=="number"||px.test(r);function mixValues(r,e,t,o,y,R){y?(r.opacity=mixNumber$1(0,t.opacity??1,easeCrossfadeIn(o)),r.opacityExit=mixNumber$1(e.opacity??1,0,easeCrossfadeOut(o))):R&&(r.opacity=mixNumber$1(e.opacity??1,t.opacity??1,o));for(let G=0;G<numBorders;G++){const K=`border${borders[G]}Radius`;let Y=getRadius(e,K),Q=getRadius(t,K);if(Y===void 0&&Q===void 0)continue;Y||(Y=0),Q||(Q=0),Y===0||Q===0||isPx(Y)===isPx(Q)?(r[K]=Math.max(mixNumber$1(asNumber$1(Y),asNumber$1(Q),o),0),(percent.test(Q)||percent.test(Y))&&(r[K]+="%")):r[K]=Q}(e.rotate||t.rotate)&&(r.rotate=mixNumber$1(e.rotate||0,t.rotate||0,o))}function getRadius(r,e){return r[e]!==void 0?r[e]:r.borderRadius}const easeCrossfadeIn=compress(0,.5,circOut),easeCrossfadeOut=compress(.5,.95,noop);function compress(r,e,t){return o=>o<r?0:o>e?1:t(progress(r,e,o))}function copyAxisInto(r,e){r.min=e.min,r.max=e.max}function copyBoxInto(r,e){copyAxisInto(r.x,e.x),copyAxisInto(r.y,e.y)}function copyAxisDeltaInto(r,e){r.translate=e.translate,r.scale=e.scale,r.originPoint=e.originPoint,r.origin=e.origin}function removePointDelta(r,e,t,o,y){return r-=e,r=scalePoint(r,1/t,o),y!==void 0&&(r=scalePoint(r,1/y,o)),r}function removeAxisDelta(r,e=0,t=1,o=.5,y,R=r,G=r){if(percent.test(e)&&(e=parseFloat(e),e=mixNumber$1(G.min,G.max,e/100)-G.min),typeof e!="number")return;let K=mixNumber$1(R.min,R.max,o);r===R&&(K-=e),r.min=removePointDelta(r.min,e,t,K,y),r.max=removePointDelta(r.max,e,t,K,y)}function removeAxisTransforms(r,e,[t,o,y],R,G){removeAxisDelta(r,e[t],e[o],e[y],e.scale,R,G)}const xKeys=["x","scaleX","originX"],yKeys=["y","scaleY","originY"];function removeBoxTransforms(r,e,t,o){removeAxisTransforms(r.x,e,xKeys,t?t.x:void 0,o?o.x:void 0),removeAxisTransforms(r.y,e,yKeys,t?t.y:void 0,o?o.y:void 0)}function isAxisDeltaZero(r){return r.translate===0&&r.scale===1}function isDeltaZero(r){return isAxisDeltaZero(r.x)&&isAxisDeltaZero(r.y)}function axisEquals(r,e){return r.min===e.min&&r.max===e.max}function boxEquals(r,e){return axisEquals(r.x,e.x)&&axisEquals(r.y,e.y)}function axisEqualsRounded(r,e){return Math.round(r.min)===Math.round(e.min)&&Math.round(r.max)===Math.round(e.max)}function boxEqualsRounded(r,e){return axisEqualsRounded(r.x,e.x)&&axisEqualsRounded(r.y,e.y)}function aspectRatio(r){return calcLength(r.x)/calcLength(r.y)}function axisDeltaEquals(r,e){return r.translate===e.translate&&r.scale===e.scale&&r.originPoint===e.originPoint}class NodeStack{constructor(){this.members=[]}add(e){addUniqueItem(this.members,e),e.scheduleRender()}remove(e){if(removeItem(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(y=>e===y);if(t===0)return!1;let o;for(let y=t;y>=0;y--){const R=this.members[y];if(R.isPresent!==!1){o=R;break}}return o?(this.promote(o),!0):!1}promote(e,t){const o=this.lead;if(e!==o&&(this.prevLead=o,this.lead=e,e.show(),o)){o.instance&&o.scheduleRender(),e.scheduleRender(),e.resumeFrom=o,t&&(e.resumeFrom.preserveOpacity=!0),o.snapshot&&(e.snapshot=o.snapshot,e.snapshot.latestValues=o.animationValues||o.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:y}=e.options;y===!1&&o.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:o}=e;t.onExitComplete&&t.onExitComplete(),o&&o.options.onExitComplete&&o.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function buildProjectionTransform(r,e,t){let o="";const y=r.x.translate/e.x,R=r.y.translate/e.y,G=(t==null?void 0:t.z)||0;if((y||R||G)&&(o=`translate3d(${y}px, ${R}px, ${G}px) `),(e.x!==1||e.y!==1)&&(o+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:Q,rotate:ee,rotateX:ie,rotateY:re,skewX:se,skewY:le}=t;Q&&(o=`perspective(${Q}px) ${o}`),ee&&(o+=`rotate(${ee}deg) `),ie&&(o+=`rotateX(${ie}deg) `),re&&(o+=`rotateY(${re}deg) `),se&&(o+=`skewX(${se}deg) `),le&&(o+=`skewY(${le}deg) `)}const K=r.x.scale*e.x,Y=r.y.scale*e.y;return(K!==1||Y!==1)&&(o+=`scale(${K}, ${Y})`),o||"none"}const transformAxes=["","X","Y","Z"],hiddenVisibility={visibility:"hidden"},animationTarget=1e3;let id=0;function resetDistortingTransform(r,e,t,o){const{latestValues:y}=e;y[r]&&(t[r]=y[r],e.setStaticValue(r,0),o&&(o[r]=0))}function cancelTreeOptimisedTransformAnimations(r){if(r.hasCheckedOptimisedAppear=!0,r.root===r)return;const{visualElement:e}=r.options;if(!e)return;const t=getOptimisedAppearId(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:y,layoutId:R}=r.options;window.MotionCancelOptimisedAnimation(t,"transform",frame,!(y||R))}const{parent:o}=r;o&&!o.hasCheckedOptimisedAppear&&cancelTreeOptimisedTransformAnimations(o)}function createProjectionNode({attachResizeListener:r,defaultParent:e,measureScroll:t,checkIsScrollRoot:o,resetTransform:y}){return class{constructor(G={},K=e==null?void 0:e()){this.id=id++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(propagateDirtyNodes),this.nodes.forEach(resolveTargetDelta),this.nodes.forEach(calcProjection),this.nodes.forEach(cleanDirtyNodes)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=G,this.root=K?K.root||K:this,this.path=K?[...K.path,K]:[],this.parent=K,this.depth=K?K.depth+1:0;for(let Y=0;Y<this.path.length;Y++)this.path[Y].shouldResetTransform=!0;this.root===this&&(this.nodes=new FlatTree)}addEventListener(G,K){return this.eventHandlers.has(G)||this.eventHandlers.set(G,new SubscriptionManager),this.eventHandlers.get(G).add(K)}notifyListeners(G,...K){const Y=this.eventHandlers.get(G);Y&&Y.notify(...K)}hasListeners(G){return this.eventHandlers.has(G)}mount(G,K=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=isSVGElement(G),this.instance=G;const{layoutId:Y,layout:Q,visualElement:ee}=this.options;if(ee&&!ee.current&&ee.mount(G),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),K&&(Q||Y)&&(this.isLayoutDirty=!0),r){let ie;const re=()=>this.root.updateBlockedByResize=!1;r(G,()=>{this.root.updateBlockedByResize=!0,ie&&ie(),ie=delay(re,250),globalProjectionState.hasAnimatedSinceResize&&(globalProjectionState.hasAnimatedSinceResize=!1,this.nodes.forEach(finishAnimation))})}Y&&this.root.registerSharedNode(Y,this),this.options.animate!==!1&&ee&&(Y||Q)&&this.addEventListener("didUpdate",({delta:ie,hasLayoutChanged:re,hasRelativeLayoutChanged:se,layout:le})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const ce=this.options.transition||ee.getDefaultTransition()||defaultLayoutTransition,{onLayoutAnimationStart:oe,onLayoutAnimationComplete:ue}=ee.getProps(),ge=!this.targetLayout||!boxEqualsRounded(this.targetLayout,le),ve=!re&&se;if(this.options.layoutRoot||this.resumeFrom||ve||re&&(ge||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(ie,ve);const _e={...getValueTransition$1(ce,"layout"),onPlay:oe,onComplete:ue};(ee.shouldReduceMotion||this.options.layoutRoot)&&(_e.delay=0,_e.type=!1),this.startAnimation(_e)}else re||finishAnimation(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=le})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const G=this.getStack();G&&G.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,cancelFrame(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(resetSkewAndRotation),this.animationId++)}getTransformTemplate(){const{visualElement:G}=this.options;return G&&G.getProps().transformTemplate}willUpdate(G=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&cancelTreeOptimisedTransformAnimations(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let ee=0;ee<this.path.length;ee++){const ie=this.path[ee];ie.shouldResetTransform=!0,ie.updateScroll("snapshot"),ie.options.layoutRoot&&ie.willUpdate(!1)}const{layoutId:K,layout:Y}=this.options;if(K===void 0&&!Y)return;const Q=this.getTransformTemplate();this.prevTransformTemplateValue=Q?Q(this.latestValues,""):void 0,this.updateSnapshot(),G&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(clearMeasurements);return}this.isUpdating||this.nodes.forEach(clearIsLayoutDirty),this.isUpdating=!1,this.nodes.forEach(resetTransformStyle),this.nodes.forEach(updateLayout),this.nodes.forEach(notifyLayoutUpdate),this.clearAllSnapshots();const K=time.now();frameData.delta=clamp(0,1e3/60,K-frameData.timestamp),frameData.timestamp=K,frameData.isProcessing=!0,frameSteps.update.process(frameData),frameSteps.preRender.process(frameData),frameSteps.render.process(frameData),frameData.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,microtask.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(clearSnapshot),this.sharedNodes.forEach(removeLeadSnapshots)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,frame.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){frame.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!calcLength(this.snapshot.measuredBox.x)&&!calcLength(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let Y=0;Y<this.path.length;Y++)this.path[Y].updateScroll();const G=this.layout;this.layout=this.measure(!1),this.layoutCorrected=createBox(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:K}=this.options;K&&K.notify("LayoutMeasure",this.layout.layoutBox,G?G.layoutBox:void 0)}updateScroll(G="measure"){let K=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===G&&(K=!1),K){const Y=o(this.instance);this.scroll={animationId:this.root.animationId,phase:G,isRoot:Y,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:Y}}}resetTransform(){if(!y)return;const G=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,K=this.projectionDelta&&!isDeltaZero(this.projectionDelta),Y=this.getTransformTemplate(),Q=Y?Y(this.latestValues,""):void 0,ee=Q!==this.prevTransformTemplateValue;G&&(K||hasTransform(this.latestValues)||ee)&&(y(this.instance,Q),this.shouldResetTransform=!1,this.scheduleRender())}measure(G=!0){const K=this.measurePageBox();let Y=this.removeElementScroll(K);return G&&(Y=this.removeTransform(Y)),roundBox(Y),{animationId:this.root.animationId,measuredBox:K,layoutBox:Y,latestValues:{},source:this.id}}measurePageBox(){var Q;const{visualElement:G}=this.options;if(!G)return createBox();const K=G.measureViewportBox();if(!(((Q=this.scroll)==null?void 0:Q.wasRoot)||this.path.some(checkNodeWasScrollRoot))){const{scroll:ee}=this.root;ee&&(translateAxis(K.x,ee.offset.x),translateAxis(K.y,ee.offset.y))}return K}removeElementScroll(G){var Y;const K=createBox();if(copyBoxInto(K,G),(Y=this.scroll)!=null&&Y.wasRoot)return K;for(let Q=0;Q<this.path.length;Q++){const ee=this.path[Q],{scroll:ie,options:re}=ee;ee!==this.root&&ie&&re.layoutScroll&&(ie.wasRoot&&copyBoxInto(K,G),translateAxis(K.x,ie.offset.x),translateAxis(K.y,ie.offset.y))}return K}applyTransform(G,K=!1){const Y=createBox();copyBoxInto(Y,G);for(let Q=0;Q<this.path.length;Q++){const ee=this.path[Q];!K&&ee.options.layoutScroll&&ee.scroll&&ee!==ee.root&&transformBox(Y,{x:-ee.scroll.offset.x,y:-ee.scroll.offset.y}),hasTransform(ee.latestValues)&&transformBox(Y,ee.latestValues)}return hasTransform(this.latestValues)&&transformBox(Y,this.latestValues),Y}removeTransform(G){const K=createBox();copyBoxInto(K,G);for(let Y=0;Y<this.path.length;Y++){const Q=this.path[Y];if(!Q.instance||!hasTransform(Q.latestValues))continue;hasScale(Q.latestValues)&&Q.updateSnapshot();const ee=createBox(),ie=Q.measurePageBox();copyBoxInto(ee,ie),removeBoxTransforms(K,Q.latestValues,Q.snapshot?Q.snapshot.layoutBox:void 0,ee)}return hasTransform(this.latestValues)&&removeBoxTransforms(K,this.latestValues),K}setTargetDelta(G){this.targetDelta=G,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(G){this.options={...this.options,...G,crossfade:G.crossfade!==void 0?G.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==frameData.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(G=!1){var re;const K=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=K.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=K.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=K.isSharedProjectionDirty);const Y=!!this.resumingFrom||this!==K;if(!(G||Y&&this.isSharedProjectionDirty||this.isProjectionDirty||(re=this.parent)!=null&&re.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:ee,layoutId:ie}=this.options;if(!(!this.layout||!(ee||ie))){if(this.resolvedRelativeTargetAt=frameData.timestamp,!this.targetDelta&&!this.relativeTarget){const se=this.getClosestProjectingParent();se&&se.layout&&this.animationProgress!==1?(this.relativeParent=se,this.forceRelativeParentToResolveTarget(),this.relativeTarget=createBox(),this.relativeTargetOrigin=createBox(),calcRelativePosition(this.relativeTargetOrigin,this.layout.layoutBox,se.layout.layoutBox),copyBoxInto(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=createBox(),this.targetWithTransforms=createBox()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),calcRelativeBox(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):copyBoxInto(this.target,this.layout.layoutBox),applyBoxDelta(this.target,this.targetDelta)):copyBoxInto(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const se=this.getClosestProjectingParent();se&&!!se.resumingFrom==!!this.resumingFrom&&!se.options.layoutScroll&&se.target&&this.animationProgress!==1?(this.relativeParent=se,this.forceRelativeParentToResolveTarget(),this.relativeTarget=createBox(),this.relativeTargetOrigin=createBox(),calcRelativePosition(this.relativeTargetOrigin,this.target,se.target),copyBoxInto(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||hasScale(this.parent.latestValues)||has2DTranslate(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var le;const G=this.getLead(),K=!!this.resumingFrom||this!==G;let Y=!0;if((this.isProjectionDirty||(le=this.parent)!=null&&le.isProjectionDirty)&&(Y=!1),K&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(Y=!1),this.resolvedRelativeTargetAt===frameData.timestamp&&(Y=!1),Y)return;const{layout:Q,layoutId:ee}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(Q||ee))return;copyBoxInto(this.layoutCorrected,this.layout.layoutBox);const ie=this.treeScale.x,re=this.treeScale.y;applyTreeDeltas(this.layoutCorrected,this.treeScale,this.path,K),G.layout&&!G.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(G.target=G.layout.layoutBox,G.targetWithTransforms=createBox());const{target:se}=G;if(!se){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(copyAxisDeltaInto(this.prevProjectionDelta.x,this.projectionDelta.x),copyAxisDeltaInto(this.prevProjectionDelta.y,this.projectionDelta.y)),calcBoxDelta(this.projectionDelta,this.layoutCorrected,se,this.latestValues),(this.treeScale.x!==ie||this.treeScale.y!==re||!axisDeltaEquals(this.projectionDelta.x,this.prevProjectionDelta.x)||!axisDeltaEquals(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",se))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(G=!0){var K;if((K=this.options.visualElement)==null||K.scheduleRender(),G){const Y=this.getStack();Y&&Y.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=createDelta(),this.projectionDelta=createDelta(),this.projectionDeltaWithTransform=createDelta()}setAnimationOrigin(G,K=!1){const Y=this.snapshot,Q=Y?Y.latestValues:{},ee={...this.latestValues},ie=createDelta();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!K;const re=createBox(),se=Y?Y.source:void 0,le=this.layout?this.layout.source:void 0,ce=se!==le,oe=this.getStack(),ue=!oe||oe.members.length<=1,ge=!!(ce&&!ue&&this.options.crossfade===!0&&!this.path.some(hasOpacityCrossfade));this.animationProgress=0;let ve;this.mixTargetDelta=_e=>{const be=_e/1e3;mixAxisDelta(ie.x,G.x,be),mixAxisDelta(ie.y,G.y,be),this.setTargetDelta(ie),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(calcRelativePosition(re,this.layout.layoutBox,this.relativeParent.layout.layoutBox),mixBox(this.relativeTarget,this.relativeTargetOrigin,re,be),ve&&boxEquals(this.relativeTarget,ve)&&(this.isProjectionDirty=!1),ve||(ve=createBox()),copyBoxInto(ve,this.relativeTarget)),ce&&(this.animationValues=ee,mixValues(ee,Q,this.latestValues,be,ge,ue)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=be},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(G){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(cancelFrame(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=frame.update(()=>{globalProjectionState.hasAnimatedSinceResize=!0,this.currentAnimation=animateSingleValue(0,animationTarget,{...G,onUpdate:K=>{this.mixTargetDelta(K),G.onUpdate&&G.onUpdate(K)},onStop:()=>{},onComplete:()=>{G.onComplete&&G.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const G=this.getStack();G&&G.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(animationTarget),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const G=this.getLead();let{targetWithTransforms:K,target:Y,layout:Q,latestValues:ee}=G;if(!(!K||!Y||!Q)){if(this!==G&&this.layout&&Q&&shouldAnimatePositionOnly(this.options.animationType,this.layout.layoutBox,Q.layoutBox)){Y=this.target||createBox();const ie=calcLength(this.layout.layoutBox.x);Y.x.min=G.target.x.min,Y.x.max=Y.x.min+ie;const re=calcLength(this.layout.layoutBox.y);Y.y.min=G.target.y.min,Y.y.max=Y.y.min+re}copyBoxInto(K,Y),transformBox(K,ee),calcBoxDelta(this.projectionDeltaWithTransform,this.layoutCorrected,K,ee)}}registerSharedNode(G,K){this.sharedNodes.has(G)||this.sharedNodes.set(G,new NodeStack),this.sharedNodes.get(G).add(K);const Q=K.options.initialPromotionConfig;K.promote({transition:Q?Q.transition:void 0,preserveFollowOpacity:Q&&Q.shouldPreserveFollowOpacity?Q.shouldPreserveFollowOpacity(K):void 0})}isLead(){const G=this.getStack();return G?G.lead===this:!0}getLead(){var K;const{layoutId:G}=this.options;return G?((K=this.getStack())==null?void 0:K.lead)||this:this}getPrevLead(){var K;const{layoutId:G}=this.options;return G?(K=this.getStack())==null?void 0:K.prevLead:void 0}getStack(){const{layoutId:G}=this.options;if(G)return this.root.sharedNodes.get(G)}promote({needsReset:G,transition:K,preserveFollowOpacity:Y}={}){const Q=this.getStack();Q&&Q.promote(this,Y),G&&(this.projectionDelta=void 0,this.needsReset=!0),K&&this.setOptions({transition:K})}relegate(){const G=this.getStack();return G?G.relegate(this):!1}resetSkewAndRotation(){const{visualElement:G}=this.options;if(!G)return;let K=!1;const{latestValues:Y}=G;if((Y.z||Y.rotate||Y.rotateX||Y.rotateY||Y.rotateZ||Y.skewX||Y.skewY)&&(K=!0),!K)return;const Q={};Y.z&&resetDistortingTransform("z",G,Q,this.animationValues);for(let ee=0;ee<transformAxes.length;ee++)resetDistortingTransform(`rotate${transformAxes[ee]}`,G,Q,this.animationValues),resetDistortingTransform(`skew${transformAxes[ee]}`,G,Q,this.animationValues);G.render();for(const ee in Q)G.setStaticValue(ee,Q[ee]),this.animationValues&&(this.animationValues[ee]=Q[ee]);G.scheduleRender()}getProjectionStyles(G){if(!this.instance||this.isSVG)return;if(!this.isVisible)return hiddenVisibility;const K={visibility:""},Y=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,K.opacity="",K.pointerEvents=resolveMotionValue(G==null?void 0:G.pointerEvents)||"",K.transform=Y?Y(this.latestValues,""):"none",K;const Q=this.getLead();if(!this.projectionDelta||!this.layout||!Q.target){const se={};return this.options.layoutId&&(se.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,se.pointerEvents=resolveMotionValue(G==null?void 0:G.pointerEvents)||""),this.hasProjected&&!hasTransform(this.latestValues)&&(se.transform=Y?Y({},""):"none",this.hasProjected=!1),se}const ee=Q.animationValues||Q.latestValues;this.applyTransformsToTarget(),K.transform=buildProjectionTransform(this.projectionDeltaWithTransform,this.treeScale,ee),Y&&(K.transform=Y(ee,K.transform));const{x:ie,y:re}=this.projectionDelta;K.transformOrigin=`${ie.origin*100}% ${re.origin*100}% 0`,Q.animationValues?K.opacity=Q===this?ee.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:ee.opacityExit:K.opacity=Q===this?ee.opacity!==void 0?ee.opacity:"":ee.opacityExit!==void 0?ee.opacityExit:0;for(const se in scaleCorrectors){if(ee[se]===void 0)continue;const{correct:le,applyTo:ce,isCSSVariable:oe}=scaleCorrectors[se],ue=K.transform==="none"?ee[se]:le(ee[se],Q);if(ce){const ge=ce.length;for(let ve=0;ve<ge;ve++)K[ce[ve]]=ue}else oe?this.options.visualElement.renderState.vars[se]=ue:K[se]=ue}return this.options.layoutId&&(K.pointerEvents=Q===this?resolveMotionValue(G==null?void 0:G.pointerEvents)||"":"none"),K}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(G=>{var K;return(K=G.currentAnimation)==null?void 0:K.stop()}),this.root.nodes.forEach(clearMeasurements),this.root.sharedNodes.clear()}}}function updateLayout(r){r.updateLayout()}function notifyLayoutUpdate(r){var t;const e=((t=r.resumeFrom)==null?void 0:t.snapshot)||r.snapshot;if(r.isLead()&&r.layout&&e&&r.hasListeners("didUpdate")){const{layoutBox:o,measuredBox:y}=r.layout,{animationType:R}=r.options,G=e.source!==r.layout.source;R==="size"?eachAxis(ie=>{const re=G?e.measuredBox[ie]:e.layoutBox[ie],se=calcLength(re);re.min=o[ie].min,re.max=re.min+se}):shouldAnimatePositionOnly(R,e.layoutBox,o)&&eachAxis(ie=>{const re=G?e.measuredBox[ie]:e.layoutBox[ie],se=calcLength(o[ie]);re.max=re.min+se,r.relativeTarget&&!r.currentAnimation&&(r.isProjectionDirty=!0,r.relativeTarget[ie].max=r.relativeTarget[ie].min+se)});const K=createDelta();calcBoxDelta(K,o,e.layoutBox);const Y=createDelta();G?calcBoxDelta(Y,r.applyTransform(y,!0),e.measuredBox):calcBoxDelta(Y,o,e.layoutBox);const Q=!isDeltaZero(K);let ee=!1;if(!r.resumeFrom){const ie=r.getClosestProjectingParent();if(ie&&!ie.resumeFrom){const{snapshot:re,layout:se}=ie;if(re&&se){const le=createBox();calcRelativePosition(le,e.layoutBox,re.layoutBox);const ce=createBox();calcRelativePosition(ce,o,se.layoutBox),boxEqualsRounded(le,ce)||(ee=!0),ie.options.layoutRoot&&(r.relativeTarget=ce,r.relativeTargetOrigin=le,r.relativeParent=ie)}}}r.notifyListeners("didUpdate",{layout:o,snapshot:e,delta:Y,layoutDelta:K,hasLayoutChanged:Q,hasRelativeLayoutChanged:ee})}else if(r.isLead()){const{onExitComplete:o}=r.options;o&&o()}r.options.transition=void 0}function propagateDirtyNodes(r){r.parent&&(r.isProjecting()||(r.isProjectionDirty=r.parent.isProjectionDirty),r.isSharedProjectionDirty||(r.isSharedProjectionDirty=!!(r.isProjectionDirty||r.parent.isProjectionDirty||r.parent.isSharedProjectionDirty)),r.isTransformDirty||(r.isTransformDirty=r.parent.isTransformDirty))}function cleanDirtyNodes(r){r.isProjectionDirty=r.isSharedProjectionDirty=r.isTransformDirty=!1}function clearSnapshot(r){r.clearSnapshot()}function clearMeasurements(r){r.clearMeasurements()}function clearIsLayoutDirty(r){r.isLayoutDirty=!1}function resetTransformStyle(r){const{visualElement:e}=r.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),r.resetTransform()}function finishAnimation(r){r.finishAnimation(),r.targetDelta=r.relativeTarget=r.target=void 0,r.isProjectionDirty=!0}function resolveTargetDelta(r){r.resolveTargetDelta()}function calcProjection(r){r.calcProjection()}function resetSkewAndRotation(r){r.resetSkewAndRotation()}function removeLeadSnapshots(r){r.removeLeadSnapshot()}function mixAxisDelta(r,e,t){r.translate=mixNumber$1(e.translate,0,t),r.scale=mixNumber$1(e.scale,1,t),r.origin=e.origin,r.originPoint=e.originPoint}function mixAxis(r,e,t,o){r.min=mixNumber$1(e.min,t.min,o),r.max=mixNumber$1(e.max,t.max,o)}function mixBox(r,e,t,o){mixAxis(r.x,e.x,t.x,o),mixAxis(r.y,e.y,t.y,o)}function hasOpacityCrossfade(r){return r.animationValues&&r.animationValues.opacityExit!==void 0}const defaultLayoutTransition={duration:.45,ease:[.4,0,.1,1]},userAgentContains=r=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(r),roundPoint=userAgentContains("applewebkit/")&&!userAgentContains("chrome/")?Math.round:noop;function roundAxis(r){r.min=roundPoint(r.min),r.max=roundPoint(r.max)}function roundBox(r){roundAxis(r.x),roundAxis(r.y)}function shouldAnimatePositionOnly(r,e,t){return r==="position"||r==="preserve-aspect"&&!isNear(aspectRatio(e),aspectRatio(t),.2)}function checkNodeWasScrollRoot(r){var e;return r!==r.root&&((e=r.scroll)==null?void 0:e.wasRoot)}const DocumentProjectionNode=createProjectionNode({attachResizeListener:(r,e)=>addDomEvent(r,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),rootProjectionNode={current:void 0},HTMLProjectionNode=createProjectionNode({measureScroll:r=>({x:r.scrollLeft,y:r.scrollTop}),defaultParent:()=>{if(!rootProjectionNode.current){const r=new DocumentProjectionNode({});r.mount(window),r.setOptions({layoutScroll:!0}),rootProjectionNode.current=r}return rootProjectionNode.current},resetTransform:(r,e)=>{r.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:r=>window.getComputedStyle(r).position==="fixed"}),drag={pan:{Feature:PanGesture},drag:{Feature:DragGesture,ProjectionNode:HTMLProjectionNode,MeasureLayout}};function handleHoverEvent(r,e,t){const{props:o}=r;r.animationState&&o.whileHover&&r.animationState.setActive("whileHover",t==="Start");const y="onHover"+t,R=o[y];R&&frame.postRender(()=>R(e,extractEventInfo(e)))}class HoverGesture extends Feature{mount(){const{current:e}=this.node;e&&(this.unmount=hover(e,(t,o)=>(handleHoverEvent(this.node,o,"Start"),y=>handleHoverEvent(this.node,y,"End"))))}unmount(){}}class FocusGesture extends Feature{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=pipe(addDomEvent(this.node.current,"focus",()=>this.onFocus()),addDomEvent(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function handlePressEvent(r,e,t){const{props:o}=r;if(r.current instanceof HTMLButtonElement&&r.current.disabled)return;r.animationState&&o.whileTap&&r.animationState.setActive("whileTap",t==="Start");const y="onTap"+(t==="End"?"":t),R=o[y];R&&frame.postRender(()=>R(e,extractEventInfo(e)))}class PressGesture extends Feature{mount(){const{current:e}=this.node;e&&(this.unmount=press(e,(t,o)=>(handlePressEvent(this.node,o,"Start"),(y,{success:R})=>handlePressEvent(this.node,y,R?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const observerCallbacks=new WeakMap,observers=new WeakMap,fireObserverCallback=r=>{const e=observerCallbacks.get(r.target);e&&e(r)},fireAllObserverCallbacks=r=>{r.forEach(fireObserverCallback)};function initIntersectionObserver({root:r,...e}){const t=r||document;observers.has(t)||observers.set(t,{});const o=observers.get(t),y=JSON.stringify(e);return o[y]||(o[y]=new IntersectionObserver(fireAllObserverCallbacks,{root:r,...e})),o[y]}function observeIntersection(r,e,t){const o=initIntersectionObserver(e);return observerCallbacks.set(r,t),o.observe(r),()=>{observerCallbacks.delete(r),o.unobserve(r)}}const thresholdNames={some:0,all:1};class InViewFeature extends Feature{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:o,amount:y="some",once:R}=e,G={root:t?t.current:void 0,rootMargin:o,threshold:typeof y=="number"?y:thresholdNames[y]},K=Y=>{const{isIntersecting:Q}=Y;if(this.isInView===Q||(this.isInView=Q,R&&!Q&&this.hasEnteredView))return;Q&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",Q);const{onViewportEnter:ee,onViewportLeave:ie}=this.node.getProps(),re=Q?ee:ie;re&&re(Y)};return observeIntersection(this.node.current,G,K)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(hasViewportOptionChanged(e,t))&&this.startObserver()}unmount(){}}function hasViewportOptionChanged({viewport:r={}},{viewport:e={}}={}){return t=>r[t]!==e[t]}const gestureAnimations={inView:{Feature:InViewFeature},tap:{Feature:PressGesture},focus:{Feature:FocusGesture},hover:{Feature:HoverGesture}},layout={layout:{ProjectionNode:HTMLProjectionNode,MeasureLayout}},prefersReducedMotion={current:null},hasReducedMotionListener={current:!1};function initPrefersReducedMotion(){if(hasReducedMotionListener.current=!0,!!isBrowser)if(window.matchMedia){const r=window.matchMedia("(prefers-reduced-motion)"),e=()=>prefersReducedMotion.current=r.matches;r.addListener(e),e()}else prefersReducedMotion.current=!1}const visualElementStore=new WeakMap;function updateMotionValuesFromProps(r,e,t){for(const o in e){const y=e[o],R=t[o];if(isMotionValue(y))r.addValue(o,y);else if(isMotionValue(R))r.addValue(o,motionValue(y,{owner:r}));else if(R!==y)if(r.hasValue(o)){const G=r.getValue(o);G.liveStyle===!0?G.jump(y):G.hasAnimated||G.set(y)}else{const G=r.getStaticValue(o);r.addValue(o,motionValue(G!==void 0?G:y,{owner:r}))}}for(const o in t)e[o]===void 0&&r.removeValue(o);return e}const propEventHandlers=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class VisualElement{scrapeMotionValuesFromProps(e,t,o){return{}}constructor({parent:e,props:t,presenceContext:o,reducedMotionConfig:y,blockInitialAnimation:R,visualState:G},K={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=KeyframeResolver,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const re=time.now();this.renderScheduledAt<re&&(this.renderScheduledAt=re,frame.render(this.render,!1,!0))};const{latestValues:Y,renderState:Q}=G;this.latestValues=Y,this.baseTarget={...Y},this.initialValues=t.initial?{...Y}:{},this.renderState=Q,this.parent=e,this.props=t,this.presenceContext=o,this.depth=e?e.depth+1:0,this.reducedMotionConfig=y,this.options=K,this.blockInitialAnimation=!!R,this.isControllingVariants=isControllingVariants(t),this.isVariantNode=isVariantNode(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:ee,...ie}=this.scrapeMotionValuesFromProps(t,{},this);for(const re in ie){const se=ie[re];Y[re]!==void 0&&isMotionValue(se)&&se.set(Y[re],!1)}}mount(e){this.current=e,visualElementStore.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,o)=>this.bindToMotionValue(o,t)),hasReducedMotionListener.current||initPrefersReducedMotion(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:prefersReducedMotion.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),cancelFrame(this.notifyUpdate),cancelFrame(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const o=transformProps.has(e);o&&this.onBindTransform&&this.onBindTransform();const y=t.on("change",K=>{this.latestValues[e]=K,this.props.onUpdate&&frame.preRender(this.notifyUpdate),o&&this.projection&&(this.projection.isTransformDirty=!0)}),R=t.on("renderRequest",this.scheduleRender);let G;window.MotionCheckAppearSync&&(G=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{y(),R(),G&&G(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in featureDefinitions){const t=featureDefinitions[e];if(!t)continue;const{isEnabled:o,Feature:y}=t;if(!this.features[e]&&y&&o(this.props)&&(this.features[e]=new y(this)),this.features[e]){const R=this.features[e];R.isMounted?R.update():(R.mount(),R.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):createBox()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let o=0;o<propEventHandlers.length;o++){const y=propEventHandlers[o];this.propEventSubscriptions[y]&&(this.propEventSubscriptions[y](),delete this.propEventSubscriptions[y]);const R="on"+y,G=e[R];G&&(this.propEventSubscriptions[y]=this.on(y,G))}this.prevMotionValues=updateMotionValuesFromProps(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const o=this.values.get(e);t!==o&&(o&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let o=this.values.get(e);return o===void 0&&t!==void 0&&(o=motionValue(t===null?void 0:t,{owner:this}),this.addValue(e,o)),o}readValue(e,t){let o=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return o!=null&&(typeof o=="string"&&(isNumericalString(o)||isZeroValueString(o))?o=parseFloat(o):!findValueType(o)&&complex.test(t)&&(o=getAnimatableNone(e,t)),this.setBaseTarget(e,isMotionValue(o)?o.get():o)),isMotionValue(o)?o.get():o}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var R;const{initial:t}=this.props;let o;if(typeof t=="string"||typeof t=="object"){const G=resolveVariantFromProps(this.props,t,(R=this.presenceContext)==null?void 0:R.custom);G&&(o=G[e])}if(t&&o!==void 0)return o;const y=this.getBaseTargetFromProps(this.props,e);return y!==void 0&&!isMotionValue(y)?y:this.initialValues[e]!==void 0&&o===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new SubscriptionManager),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class DOMVisualElement extends VisualElement{constructor(){super(...arguments),this.KeyframeResolver=DOMKeyframesResolver}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:o}){delete t[e],delete o[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;isMotionValue(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function renderHTML(r,{style:e,vars:t},o,y){Object.assign(r.style,e,y&&y.getProjectionStyles(o));for(const R in t)r.style.setProperty(R,t[R])}function getComputedStyle$1(r){return window.getComputedStyle(r)}class HTMLVisualElement extends DOMVisualElement{constructor(){super(...arguments),this.type="html",this.renderInstance=renderHTML}readValueFromInstance(e,t){if(transformProps.has(t))return readTransformValue(e,t);{const o=getComputedStyle$1(e),y=(isCSSVariableName(t)?o.getPropertyValue(t):o[t])||0;return typeof y=="string"?y.trim():y}}measureInstanceViewportBox(e,{transformPagePoint:t}){return measureViewportBox(e,t)}build(e,t,o){buildHTMLStyles(e,t,o.transformTemplate)}scrapeMotionValuesFromProps(e,t,o){return scrapeMotionValuesFromProps$1(e,t,o)}}const camelCaseAttributes=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function renderSVG(r,e,t,o){renderHTML(r,e,void 0,o);for(const y in e.attrs)r.setAttribute(camelCaseAttributes.has(y)?y:camelToDash(y),e.attrs[y])}class SVGVisualElement extends DOMVisualElement{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=createBox}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(transformProps.has(t)){const o=getDefaultValueType(t);return o&&o.default||0}return t=camelCaseAttributes.has(t)?t:camelToDash(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,o){return scrapeMotionValuesFromProps(e,t,o)}build(e,t,o){buildSVGAttrs(e,t,this.isSVGTag,o.transformTemplate)}renderInstance(e,t,o,y){renderSVG(e,t,o,y)}mount(e){this.isSVGTag=isSVGTag(e.tagName),super.mount(e)}}const createDomVisualElement=(r,e)=>isSVGComponent(r)?new SVGVisualElement(e):new HTMLVisualElement(e,{allowProjection:r!==reactExports.Fragment}),createMotionComponent=createMotionComponentFactory({...animations,...gestureAnimations,...drag,...layout},createDomVisualElement),motion=createDOMMotionComponentProxy(createMotionComponent);function useMotionValue(r){const e=useConstant(()=>motionValue(r)),{isStatic:t}=reactExports.useContext(MotionConfigContext);if(t){const[,o]=reactExports.useState(r);reactExports.useEffect(()=>e.on("change",o),[])}return e}function useCombineMotionValues(r,e){const t=useMotionValue(e()),o=()=>t.set(e());return o(),useIsomorphicLayoutEffect(()=>{const y=()=>frame.preRender(o,!1,!0),R=r.map(G=>G.on("change",y));return()=>{R.forEach(G=>G()),cancelFrame(o)}}),t}function useComputed(r){collectMotionValues.current=[],r();const e=useCombineMotionValues(collectMotionValues.current,r);return collectMotionValues.current=void 0,e}function useTransform(r,e,t,o){if(typeof r=="function")return useComputed(r);const y=typeof e=="function"?e:transform(e,t,o);return Array.isArray(r)?useListTransform(r,y):useListTransform([r],([R])=>y(R))}function useListTransform(r,e){const t=useConstant(()=>[]);return useCombineMotionValues(r,()=>{t.length=0;const o=r.length;for(let y=0;y<o;y++)t[y]=r[y].get();return e(t)})}function isDOMKeyframes(r){return typeof r=="object"&&!Array.isArray(r)}function resolveSubjects(r,e,t,o){return typeof r=="string"&&isDOMKeyframes(e)?resolveElements(r,t,o):r instanceof NodeList?Array.from(r):Array.isArray(r)?r:[r]}function calculateRepeatDuration(r,e,t){return r*(e+1)}function calcNextTime(r,e,t,o){return typeof e=="number"?e:e.startsWith("-")||e.startsWith("+")?Math.max(0,r+parseFloat(e)):e==="<"?t:o.get(e)??r}function eraseKeyframes(r,e,t){for(let o=0;o<r.length;o++){const y=r[o];y.at>e&&y.at<t&&(removeItem(r,y),o--)}}function addKeyframes(r,e,t,o,y,R){eraseKeyframes(r,y,R);for(let G=0;G<e.length;G++)r.push({value:e[G],at:mixNumber$1(y,R,o[G]),easing:getEasingForSegment(t,G)})}function normalizeTimes(r,e){for(let t=0;t<r.length;t++)r[t]=r[t]/(e+1)}function compareByTime(r,e){return r.at===e.at?r.value===null?1:e.value===null?-1:0:r.at-e.at}const defaultSegmentEasing="easeInOut";function createAnimationsFromSequence(r,{defaultTransition:e={},...t}={},o,y){const R=e.duration||.3,G=new Map,K=new Map,Y={},Q=new Map;let ee=0,ie=0,re=0;for(let se=0;se<r.length;se++){const le=r[se];if(typeof le=="string"){Q.set(le,ie);continue}else if(!Array.isArray(le)){Q.set(le.name,calcNextTime(ie,le.at,ee,Q));continue}let[ce,oe,ue={}]=le;ue.at!==void 0&&(ie=calcNextTime(ie,ue.at,ee,Q));let ge=0;const ve=(_e,be,Re,Se=0,Ee=0)=>{const ye=keyframesAsList(_e),{delay:de=0,times:Me=defaultOffset(ye),type:Le="keyframes",repeat:Pe,repeatType:Ue,repeatDelay:$e=0,...Ve}=be;let{ease:Ce=e.ease||"easeOut",duration:De}=be;const Oe=typeof de=="function"?de(Se,Ee):de,Te=ye.length,Ne=isGenerator(Le)?Le:y==null?void 0:y[Le];if(Te<=2&&Ne){let Ze=100;if(Te===2&&isNumberKeyframesArray(ye)){const un=ye[1]-ye[0];Ze=Math.abs(un)}const ct={...Ve};De!==void 0&&(ct.duration=secondsToMilliseconds(De));const xt=createGeneratorEasing(ct,Ze,Ne);Ce=xt.ease,De=xt.duration}De??(De=R);const Ye=ie+Oe;Me.length===1&&Me[0]===0&&(Me[1]=1);const Qe=Me.length-ye.length;if(Qe>0&&fillOffset(Me,Qe),ye.length===1&&ye.unshift(null),Pe){De=calculateRepeatDuration(De,Pe);const Ze=[...ye],ct=[...Me];Ce=Array.isArray(Ce)?[...Ce]:[Ce];const xt=[...Ce];for(let un=0;un<Pe;un++){ye.push(...Ze);for(let Vn=0;Vn<Ze.length;Vn++)Me.push(ct[Vn]+(un+1)),Ce.push(Vn===0?"linear":getEasingForSegment(xt,Vn-1))}normalizeTimes(Me,Pe)}const qe=Ye+De;addKeyframes(Re,ye,Ce,Me,Ye,qe),ge=Math.max(Oe+De,ge),re=Math.max(qe,re)};if(isMotionValue(ce)){const _e=getSubjectSequence(ce,K);ve(oe,ue,getValueSequence("default",_e))}else{const _e=resolveSubjects(ce,oe,o,Y),be=_e.length;for(let Re=0;Re<be;Re++){oe=oe,ue=ue;const Se=_e[Re],Ee=getSubjectSequence(Se,K);for(const ye in oe)ve(oe[ye],getValueTransition(ue,ye),getValueSequence(ye,Ee),Re,be)}}ee=ie,ie+=ge}return K.forEach((se,le)=>{for(const ce in se){const oe=se[ce];oe.sort(compareByTime);const ue=[],ge=[],ve=[];for(let be=0;be<oe.length;be++){const{at:Re,value:Se,easing:Ee}=oe[be];ue.push(Se),ge.push(progress(0,re,Re)),ve.push(Ee||"easeOut")}ge[0]!==0&&(ge.unshift(0),ue.unshift(ue[0]),ve.unshift(defaultSegmentEasing)),ge[ge.length-1]!==1&&(ge.push(1),ue.push(null)),G.has(le)||G.set(le,{keyframes:{},transition:{}});const _e=G.get(le);_e.keyframes[ce]=ue,_e.transition[ce]={...e,duration:re,ease:ve,times:ge,...t}}}),G}function getSubjectSequence(r,e){return!e.has(r)&&e.set(r,{}),e.get(r)}function getValueSequence(r,e){return e[r]||(e[r]=[]),e[r]}function keyframesAsList(r){return Array.isArray(r)?r:[r]}function getValueTransition(r,e){return r&&r[e]?{...r,...r[e]}:{...r}}const isNumber=r=>typeof r=="number",isNumberKeyframesArray=r=>r.every(isNumber);function isObjectKey(r,e){return r in e}class ObjectVisualElement extends VisualElement{constructor(){super(...arguments),this.type="object"}readValueFromInstance(e,t){if(isObjectKey(t,e)){const o=e[t];if(typeof o=="string"||typeof o=="number")return o}}getBaseTargetFromProps(){}removeValueFromRenderState(e,t){delete t.output[e]}measureInstanceViewportBox(){return createBox()}build(e,t){Object.assign(e.output,t)}renderInstance(e,{output:t}){Object.assign(e,t)}sortInstanceNodePosition(){return 0}}function createDOMVisualElement(r){const e={presenceContext:null,props:{},visualState:{renderState:{transform:{},transformOrigin:{},style:{},vars:{},attrs:{}},latestValues:{}}},t=isSVGElement(r)?new SVGVisualElement(e):new HTMLVisualElement(e);t.mount(r),visualElementStore.set(r,t)}function createObjectVisualElement(r){const e={presenceContext:null,props:{},visualState:{renderState:{output:{}},latestValues:{}}},t=new ObjectVisualElement(e);t.mount(r),visualElementStore.set(r,t)}function isSingleValue(r,e){return isMotionValue(r)||typeof r=="number"||typeof r=="string"&&!isDOMKeyframes(e)}function animateSubject(r,e,t,o){const y=[];if(isSingleValue(r,e))y.push(animateSingleValue(r,isDOMKeyframes(e)&&e.default||e,t&&(t.default||t)));else{const R=resolveSubjects(r,e,o),G=R.length;for(let K=0;K<G;K++){const Y=R[K],Q=Y instanceof Element?createDOMVisualElement:createObjectVisualElement;visualElementStore.has(Y)||Q(Y);const ee=visualElementStore.get(Y),ie={...t};"delay"in ie&&typeof ie.delay=="function"&&(ie.delay=ie.delay(K,G)),y.push(...animateTarget(ee,{...e,transition:ie},{}))}}return y}function animateSequence(r,e,t){const o=[];return createAnimationsFromSequence(r,e,t,{spring}).forEach(({keyframes:R,transition:G},K)=>{o.push(...animateSubject(K,R,G))}),o}function isSequence(r){return Array.isArray(r)&&r.some(Array.isArray)}function createScopedAnimate(r){function e(t,o,y){let R=[];return isSequence(t)?R=animateSequence(t,o,r):R=animateSubject(t,o,y,r),new GroupAnimationWithThen(R)}return e}const animate=createScopedAnimate(),getDefaultsFromPostinstall=()=>{};var define_process_env_default={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const stringToByteArray$1=function(r){const e=[];let t=0;for(let o=0;o<r.length;o++){let y=r.charCodeAt(o);y<128?e[t++]=y:y<2048?(e[t++]=y>>6|192,e[t++]=y&63|128):(y&64512)===55296&&o+1<r.length&&(r.charCodeAt(o+1)&64512)===56320?(y=65536+((y&1023)<<10)+(r.charCodeAt(++o)&1023),e[t++]=y>>18|240,e[t++]=y>>12&63|128,e[t++]=y>>6&63|128,e[t++]=y&63|128):(e[t++]=y>>12|224,e[t++]=y>>6&63|128,e[t++]=y&63|128)}return e},byteArrayToString=function(r){const e=[];let t=0,o=0;for(;t<r.length;){const y=r[t++];if(y<128)e[o++]=String.fromCharCode(y);else if(y>191&&y<224){const R=r[t++];e[o++]=String.fromCharCode((y&31)<<6|R&63)}else if(y>239&&y<365){const R=r[t++],G=r[t++],K=r[t++],Y=((y&7)<<18|(R&63)<<12|(G&63)<<6|K&63)-65536;e[o++]=String.fromCharCode(55296+(Y>>10)),e[o++]=String.fromCharCode(56320+(Y&1023))}else{const R=r[t++],G=r[t++];e[o++]=String.fromCharCode((y&15)<<12|(R&63)<<6|G&63)}}return e.join("")},base64={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,o=[];for(let y=0;y<r.length;y+=3){const R=r[y],G=y+1<r.length,K=G?r[y+1]:0,Y=y+2<r.length,Q=Y?r[y+2]:0,ee=R>>2,ie=(R&3)<<4|K>>4;let re=(K&15)<<2|Q>>6,se=Q&63;Y||(se=64,G||(re=64)),o.push(t[ee],t[ie],t[re],t[se])}return o.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(stringToByteArray$1(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):byteArrayToString(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,o=[];for(let y=0;y<r.length;){const R=t[r.charAt(y++)],K=y<r.length?t[r.charAt(y)]:0;++y;const Q=y<r.length?t[r.charAt(y)]:64;++y;const ie=y<r.length?t[r.charAt(y)]:64;if(++y,R==null||K==null||Q==null||ie==null)throw new DecodeBase64StringError;const re=R<<2|K>>4;if(o.push(re),Q!==64){const se=K<<4&240|Q>>2;if(o.push(se),ie!==64){const le=Q<<6&192|ie;o.push(le)}}}return o},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class DecodeBase64StringError extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const base64Encode=function(r){const e=stringToByteArray$1(r);return base64.encodeByteArray(e,!0)},base64urlEncodeWithoutPadding=function(r){return base64Encode(r).replace(/\./g,"")},base64Decode=function(r){try{return base64.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getGlobal(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const getDefaultsFromGlobal=()=>getGlobal().__FIREBASE_DEFAULTS__,getDefaultsFromEnvVariable=()=>{if(typeof process>"u"||typeof define_process_env_default>"u")return;const r=define_process_env_default.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},getDefaultsFromCookie=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&base64Decode(r[1]);return e&&JSON.parse(e)},getDefaults=()=>{try{return getDefaultsFromPostinstall()||getDefaultsFromGlobal()||getDefaultsFromEnvVariable()||getDefaultsFromCookie()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},getDefaultEmulatorHost=r=>{var e,t;return(t=(e=getDefaults())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[r]},getDefaultEmulatorHostnameAndPort=r=>{const e=getDefaultEmulatorHost(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const o=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),o]:[e.substring(0,t),o]},getDefaultAppConfig=()=>{var r;return(r=getDefaults())===null||r===void 0?void 0:r.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Deferred{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,o)=>{t?this.reject(t):this.resolve(o),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,o))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function createMockUserToken(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},o=e||"demo-project",y=r.iat||0,R=r.sub||r.user_id;if(!R)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const G=Object.assign({iss:`https://securetoken.google.com/${o}`,aud:o,iat:y,exp:y+3600,auth_time:y,sub:R,user_id:R,firebase:{sign_in_provider:"custom",identities:{}}},r);return[base64urlEncodeWithoutPadding(JSON.stringify(t)),base64urlEncodeWithoutPadding(JSON.stringify(G)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getUA(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function isNode(){var r;const e=(r=getDefaults())===null||r===void 0?void 0:r.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function isSafari(){return!isNode()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function isIndexedDBAvailable(){try{return typeof indexedDB=="object"}catch{return!1}}function validateIndexedDBOpenable(){return new Promise((r,e)=>{try{let t=!0;const o="validate-browser-context-for-indexeddb-analytics-module",y=self.indexedDB.open(o);y.onsuccess=()=>{y.result.close(),t||self.indexedDB.deleteDatabase(o),r(!0)},y.onupgradeneeded=()=>{t=!1},y.onerror=()=>{var R;e(((R=y.error)===null||R===void 0?void 0:R.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ERROR_NAME="FirebaseError";class FirebaseError extends Error{constructor(e,t,o){super(t),this.code=e,this.customData=o,this.name=ERROR_NAME,Object.setPrototypeOf(this,FirebaseError.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ErrorFactory.prototype.create)}}class ErrorFactory{constructor(e,t,o){this.service=e,this.serviceName=t,this.errors=o}create(e,...t){const o=t[0]||{},y=`${this.service}/${e}`,R=this.errors[e],G=R?replaceTemplate(R,o):"Error",K=`${this.serviceName}: ${G} (${y}).`;return new FirebaseError(y,K,o)}}function replaceTemplate(r,e){return r.replace(PATTERN,(t,o)=>{const y=e[o];return y!=null?String(y):`<${o}?>`})}const PATTERN=/\{\$([^}]+)}/g;function deepEqual(r,e){if(r===e)return!0;const t=Object.keys(r),o=Object.keys(e);for(const y of t){if(!o.includes(y))return!1;const R=r[y],G=e[y];if(isObject(R)&&isObject(G)){if(!deepEqual(R,G))return!1}else if(R!==G)return!1}for(const y of o)if(!t.includes(y))return!1;return!0}function isObject(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getModularInstance(r){return r&&r._delegate?r._delegate:r}class Component{constructor(e,t,o){this.name=e,this.instanceFactory=t,this.type=o,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_ENTRY_NAME$1="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Provider{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const o=new Deferred;if(this.instancesDeferred.set(t,o),this.isInitialized(t)||this.shouldAutoInitialize())try{const y=this.getOrInitializeService({instanceIdentifier:t});y&&o.resolve(y)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const o=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),y=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(o)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:o})}catch(R){if(y)return null;throw R}else{if(y)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(isComponentEager(e))try{this.getOrInitializeService({instanceIdentifier:DEFAULT_ENTRY_NAME$1})}catch{}for(const[t,o]of this.instancesDeferred.entries()){const y=this.normalizeInstanceIdentifier(t);try{const R=this.getOrInitializeService({instanceIdentifier:y});o.resolve(R)}catch{}}}}clearInstance(e=DEFAULT_ENTRY_NAME$1){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=DEFAULT_ENTRY_NAME$1){return this.instances.has(e)}getOptions(e=DEFAULT_ENTRY_NAME$1){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,o=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(o))throw Error(`${this.name}(${o}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const y=this.getOrInitializeService({instanceIdentifier:o,options:t});for(const[R,G]of this.instancesDeferred.entries()){const K=this.normalizeInstanceIdentifier(R);o===K&&G.resolve(y)}return y}onInit(e,t){var o;const y=this.normalizeInstanceIdentifier(t),R=(o=this.onInitCallbacks.get(y))!==null&&o!==void 0?o:new Set;R.add(e),this.onInitCallbacks.set(y,R);const G=this.instances.get(y);return G&&e(G,y),()=>{R.delete(e)}}invokeOnInitCallbacks(e,t){const o=this.onInitCallbacks.get(t);if(o)for(const y of o)try{y(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let o=this.instances.get(e);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:normalizeIdentifierForFactory(e),options:t}),this.instances.set(e,o),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(o,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,o)}catch{}return o||null}normalizeInstanceIdentifier(e=DEFAULT_ENTRY_NAME$1){return this.component?this.component.multipleInstances?e:DEFAULT_ENTRY_NAME$1:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function normalizeIdentifierForFactory(r){return r===DEFAULT_ENTRY_NAME$1?void 0:r}function isComponentEager(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ComponentContainer{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Provider(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var LogLevel;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(LogLevel||(LogLevel={}));const levelStringToEnum={debug:LogLevel.DEBUG,verbose:LogLevel.VERBOSE,info:LogLevel.INFO,warn:LogLevel.WARN,error:LogLevel.ERROR,silent:LogLevel.SILENT},defaultLogLevel=LogLevel.INFO,ConsoleMethod={[LogLevel.DEBUG]:"log",[LogLevel.VERBOSE]:"log",[LogLevel.INFO]:"info",[LogLevel.WARN]:"warn",[LogLevel.ERROR]:"error"},defaultLogHandler=(r,e,...t)=>{if(e<r.logLevel)return;const o=new Date().toISOString(),y=ConsoleMethod[e];if(y)console[y](`[${o}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Logger{constructor(e){this.name=e,this._logLevel=defaultLogLevel,this._logHandler=defaultLogHandler,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in LogLevel))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?levelStringToEnum[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.DEBUG,...e),this._logHandler(this,LogLevel.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.VERBOSE,...e),this._logHandler(this,LogLevel.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.INFO,...e),this._logHandler(this,LogLevel.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.WARN,...e),this._logHandler(this,LogLevel.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.ERROR,...e),this._logHandler(this,LogLevel.ERROR,...e)}}const instanceOfAny=(r,e)=>e.some(t=>r instanceof t);let idbProxyableTypes,cursorAdvanceMethods;function getIdbProxyableTypes(){return idbProxyableTypes||(idbProxyableTypes=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function getCursorAdvanceMethods(){return cursorAdvanceMethods||(cursorAdvanceMethods=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const cursorRequestMap=new WeakMap,transactionDoneMap=new WeakMap,transactionStoreNamesMap=new WeakMap,transformCache=new WeakMap,reverseTransformCache=new WeakMap;function promisifyRequest(r){const e=new Promise((t,o)=>{const y=()=>{r.removeEventListener("success",R),r.removeEventListener("error",G)},R=()=>{t(wrap(r.result)),y()},G=()=>{o(r.error),y()};r.addEventListener("success",R),r.addEventListener("error",G)});return e.then(t=>{t instanceof IDBCursor&&cursorRequestMap.set(t,r)}).catch(()=>{}),reverseTransformCache.set(e,r),e}function cacheDonePromiseForTransaction(r){if(transactionDoneMap.has(r))return;const e=new Promise((t,o)=>{const y=()=>{r.removeEventListener("complete",R),r.removeEventListener("error",G),r.removeEventListener("abort",G)},R=()=>{t(),y()},G=()=>{o(r.error||new DOMException("AbortError","AbortError")),y()};r.addEventListener("complete",R),r.addEventListener("error",G),r.addEventListener("abort",G)});transactionDoneMap.set(r,e)}let idbProxyTraps={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return transactionDoneMap.get(r);if(e==="objectStoreNames")return r.objectStoreNames||transactionStoreNamesMap.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return wrap(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function replaceTraps(r){idbProxyTraps=r(idbProxyTraps)}function wrapFunction(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const o=r.call(unwrap(this),e,...t);return transactionStoreNamesMap.set(o,e.sort?e.sort():[e]),wrap(o)}:getCursorAdvanceMethods().includes(r)?function(...e){return r.apply(unwrap(this),e),wrap(cursorRequestMap.get(this))}:function(...e){return wrap(r.apply(unwrap(this),e))}}function transformCachableValue(r){return typeof r=="function"?wrapFunction(r):(r instanceof IDBTransaction&&cacheDonePromiseForTransaction(r),instanceOfAny(r,getIdbProxyableTypes())?new Proxy(r,idbProxyTraps):r)}function wrap(r){if(r instanceof IDBRequest)return promisifyRequest(r);if(transformCache.has(r))return transformCache.get(r);const e=transformCachableValue(r);return e!==r&&(transformCache.set(r,e),reverseTransformCache.set(e,r)),e}const unwrap=r=>reverseTransformCache.get(r);function openDB(r,e,{blocked:t,upgrade:o,blocking:y,terminated:R}={}){const G=indexedDB.open(r,e),K=wrap(G);return o&&G.addEventListener("upgradeneeded",Y=>{o(wrap(G.result),Y.oldVersion,Y.newVersion,wrap(G.transaction),Y)}),t&&G.addEventListener("blocked",Y=>t(Y.oldVersion,Y.newVersion,Y)),K.then(Y=>{R&&Y.addEventListener("close",()=>R()),y&&Y.addEventListener("versionchange",Q=>y(Q.oldVersion,Q.newVersion,Q))}).catch(()=>{}),K}const readMethods=["get","getKey","getAll","getAllKeys","count"],writeMethods=["put","add","delete","clear"],cachedMethods=new Map;function getMethod(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(cachedMethods.get(e))return cachedMethods.get(e);const t=e.replace(/FromIndex$/,""),o=e!==t,y=writeMethods.includes(t);if(!(t in(o?IDBIndex:IDBObjectStore).prototype)||!(y||readMethods.includes(t)))return;const R=async function(G,...K){const Y=this.transaction(G,y?"readwrite":"readonly");let Q=Y.store;return o&&(Q=Q.index(K.shift())),(await Promise.all([Q[t](...K),y&&Y.done]))[0]};return cachedMethods.set(e,R),R}replaceTraps(r=>({...r,get:(e,t,o)=>getMethod(e,t)||r.get(e,t,o),has:(e,t)=>!!getMethod(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PlatformLoggerServiceImpl{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(isVersionServiceProvider(t)){const o=t.getImmediate();return`${o.library}/${o.version}`}else return null}).filter(t=>t).join(" ")}}function isVersionServiceProvider(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const name$q="@firebase/app",version$1="0.11.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const logger=new Logger("@firebase/app"),name$p="@firebase/app-compat",name$o="@firebase/analytics-compat",name$n="@firebase/analytics",name$m="@firebase/app-check-compat",name$l="@firebase/app-check",name$k="@firebase/auth",name$j="@firebase/auth-compat",name$i="@firebase/database",name$h="@firebase/data-connect",name$g="@firebase/database-compat",name$f="@firebase/functions",name$e="@firebase/functions-compat",name$d="@firebase/installations",name$c="@firebase/installations-compat",name$b="@firebase/messaging",name$a="@firebase/messaging-compat",name$9="@firebase/performance",name$8="@firebase/performance-compat",name$7="@firebase/remote-config",name$6="@firebase/remote-config-compat",name$5="@firebase/storage",name$4="@firebase/storage-compat",name$3="@firebase/firestore",name$2="@firebase/vertexai",name$1="@firebase/firestore-compat",name$r="firebase",version$2="11.6.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_ENTRY_NAME="[DEFAULT]",PLATFORM_LOG_STRING={[name$q]:"fire-core",[name$p]:"fire-core-compat",[name$n]:"fire-analytics",[name$o]:"fire-analytics-compat",[name$l]:"fire-app-check",[name$m]:"fire-app-check-compat",[name$k]:"fire-auth",[name$j]:"fire-auth-compat",[name$i]:"fire-rtdb",[name$h]:"fire-data-connect",[name$g]:"fire-rtdb-compat",[name$f]:"fire-fn",[name$e]:"fire-fn-compat",[name$d]:"fire-iid",[name$c]:"fire-iid-compat",[name$b]:"fire-fcm",[name$a]:"fire-fcm-compat",[name$9]:"fire-perf",[name$8]:"fire-perf-compat",[name$7]:"fire-rc",[name$6]:"fire-rc-compat",[name$5]:"fire-gcs",[name$4]:"fire-gcs-compat",[name$3]:"fire-fst",[name$1]:"fire-fst-compat",[name$2]:"fire-vertex","fire-js":"fire-js",[name$r]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _apps=new Map,_serverApps=new Map,_components=new Map;function _addComponent(r,e){try{r.container.addComponent(e)}catch(t){logger.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function _registerComponent(r){const e=r.name;if(_components.has(e))return logger.debug(`There were multiple attempts to register component ${e}.`),!1;_components.set(e,r);for(const t of _apps.values())_addComponent(t,r);for(const t of _serverApps.values())_addComponent(t,r);return!0}function _getProvider(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function _isFirebaseServerApp(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ERRORS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ERROR_FACTORY=new ErrorFactory("app","Firebase",ERRORS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FirebaseAppImpl{constructor(e,t,o){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=o,this.container.addComponent(new Component("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ERROR_FACTORY.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SDK_VERSION=version$2;function initializeApp(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const o=Object.assign({name:DEFAULT_ENTRY_NAME,automaticDataCollectionEnabled:!1},e),y=o.name;if(typeof y!="string"||!y)throw ERROR_FACTORY.create("bad-app-name",{appName:String(y)});if(t||(t=getDefaultAppConfig()),!t)throw ERROR_FACTORY.create("no-options");const R=_apps.get(y);if(R){if(deepEqual(t,R.options)&&deepEqual(o,R.config))return R;throw ERROR_FACTORY.create("duplicate-app",{appName:y})}const G=new ComponentContainer(y);for(const Y of _components.values())G.addComponent(Y);const K=new FirebaseAppImpl(t,o,G);return _apps.set(y,K),K}function getApp(r=DEFAULT_ENTRY_NAME){const e=_apps.get(r);if(!e&&r===DEFAULT_ENTRY_NAME&&getDefaultAppConfig())return initializeApp();if(!e)throw ERROR_FACTORY.create("no-app",{appName:r});return e}function registerVersion(r,e,t){var o;let y=(o=PLATFORM_LOG_STRING[r])!==null&&o!==void 0?o:r;t&&(y+=`-${t}`);const R=y.match(/\s|\//),G=e.match(/\s|\//);if(R||G){const K=[`Unable to register library "${y}" with version "${e}":`];R&&K.push(`library name "${y}" contains illegal characters (whitespace or "/")`),R&&G&&K.push("and"),G&&K.push(`version name "${e}" contains illegal characters (whitespace or "/")`),logger.warn(K.join(" "));return}_registerComponent(new Component(`${y}-version`,()=>({library:y,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DB_NAME="firebase-heartbeat-database",DB_VERSION=1,STORE_NAME="firebase-heartbeat-store";let dbPromise=null;function getDbPromise(){return dbPromise||(dbPromise=openDB(DB_NAME,DB_VERSION,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(STORE_NAME)}catch(t){console.warn(t)}}}}).catch(r=>{throw ERROR_FACTORY.create("idb-open",{originalErrorMessage:r.message})})),dbPromise}async function readHeartbeatsFromIndexedDB(r){try{const t=(await getDbPromise()).transaction(STORE_NAME),o=await t.objectStore(STORE_NAME).get(computeKey(r));return await t.done,o}catch(e){if(e instanceof FirebaseError)logger.warn(e.message);else{const t=ERROR_FACTORY.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});logger.warn(t.message)}}}async function writeHeartbeatsToIndexedDB(r,e){try{const o=(await getDbPromise()).transaction(STORE_NAME,"readwrite");await o.objectStore(STORE_NAME).put(e,computeKey(r)),await o.done}catch(t){if(t instanceof FirebaseError)logger.warn(t.message);else{const o=ERROR_FACTORY.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});logger.warn(o.message)}}}function computeKey(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MAX_HEADER_BYTES=1024,MAX_NUM_STORED_HEARTBEATS=30;class HeartbeatServiceImpl{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new HeartbeatStorageImpl(t),this._heartbeatsCachePromise=this._storage.read().then(o=>(this._heartbeatsCache=o,o))}async triggerHeartbeat(){var e,t;try{const y=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),R=getUTCDateString();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===R||this._heartbeatsCache.heartbeats.some(G=>G.date===R))return;if(this._heartbeatsCache.heartbeats.push({date:R,agent:y}),this._heartbeatsCache.heartbeats.length>MAX_NUM_STORED_HEARTBEATS){const G=getEarliestHeartbeatIdx(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(G,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(o){logger.warn(o)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=getUTCDateString(),{heartbeatsToSend:o,unsentEntries:y}=extractHeartbeatsForHeader(this._heartbeatsCache.heartbeats),R=base64urlEncodeWithoutPadding(JSON.stringify({version:2,heartbeats:o}));return this._heartbeatsCache.lastSentHeartbeatDate=t,y.length>0?(this._heartbeatsCache.heartbeats=y,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),R}catch(t){return logger.warn(t),""}}}function getUTCDateString(){return new Date().toISOString().substring(0,10)}function extractHeartbeatsForHeader(r,e=MAX_HEADER_BYTES){const t=[];let o=r.slice();for(const y of r){const R=t.find(G=>G.agent===y.agent);if(R){if(R.dates.push(y.date),countBytes(t)>e){R.dates.pop();break}}else if(t.push({agent:y.agent,dates:[y.date]}),countBytes(t)>e){t.pop();break}o=o.slice(1)}return{heartbeatsToSend:t,unsentEntries:o}}class HeartbeatStorageImpl{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return isIndexedDBAvailable()?validateIndexedDBOpenable().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await readHeartbeatsFromIndexedDB(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const y=await this.read();return writeHeartbeatsToIndexedDB(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:y.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const y=await this.read();return writeHeartbeatsToIndexedDB(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:y.lastSentHeartbeatDate,heartbeats:[...y.heartbeats,...e.heartbeats]})}else return}}function countBytes(r){return base64urlEncodeWithoutPadding(JSON.stringify({version:2,heartbeats:r})).length}function getEarliestHeartbeatIdx(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let o=1;o<r.length;o++)r[o].date<t&&(t=r[o].date,e=o);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function registerCoreComponents(r){_registerComponent(new Component("platform-logger",e=>new PlatformLoggerServiceImpl(e),"PRIVATE")),_registerComponent(new Component("heartbeat",e=>new HeartbeatServiceImpl(e),"PRIVATE")),registerVersion(name$q,version$1,r),registerVersion(name$q,version$1,"esm2017"),registerVersion("fire-js","")}registerCoreComponents("");var commonjsGlobal$1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Integer,Md5;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(Se,Ee){function ye(){}ye.prototype=Ee.prototype,Se.D=Ee.prototype,Se.prototype=new ye,Se.prototype.constructor=Se,Se.C=function(de,Me,Le){for(var Pe=Array(arguments.length-2),Ue=2;Ue<arguments.length;Ue++)Pe[Ue-2]=arguments[Ue];return Ee.prototype[Me].apply(de,Pe)}}function t(){this.blockSize=-1}function o(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(o,t),o.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function y(Se,Ee,ye){ye||(ye=0);var de=Array(16);if(typeof Ee=="string")for(var Me=0;16>Me;++Me)de[Me]=Ee.charCodeAt(ye++)|Ee.charCodeAt(ye++)<<8|Ee.charCodeAt(ye++)<<16|Ee.charCodeAt(ye++)<<24;else for(Me=0;16>Me;++Me)de[Me]=Ee[ye++]|Ee[ye++]<<8|Ee[ye++]<<16|Ee[ye++]<<24;Ee=Se.g[0],ye=Se.g[1],Me=Se.g[2];var Le=Se.g[3],Pe=Ee+(Le^ye&(Me^Le))+de[0]+3614090360&4294967295;Ee=ye+(Pe<<7&4294967295|Pe>>>25),Pe=Le+(Me^Ee&(ye^Me))+de[1]+3905402710&4294967295,Le=Ee+(Pe<<12&4294967295|Pe>>>20),Pe=Me+(ye^Le&(Ee^ye))+de[2]+606105819&4294967295,Me=Le+(Pe<<17&4294967295|Pe>>>15),Pe=ye+(Ee^Me&(Le^Ee))+de[3]+3250441966&4294967295,ye=Me+(Pe<<22&4294967295|Pe>>>10),Pe=Ee+(Le^ye&(Me^Le))+de[4]+4118548399&4294967295,Ee=ye+(Pe<<7&4294967295|Pe>>>25),Pe=Le+(Me^Ee&(ye^Me))+de[5]+1200080426&4294967295,Le=Ee+(Pe<<12&4294967295|Pe>>>20),Pe=Me+(ye^Le&(Ee^ye))+de[6]+2821735955&4294967295,Me=Le+(Pe<<17&4294967295|Pe>>>15),Pe=ye+(Ee^Me&(Le^Ee))+de[7]+4249261313&4294967295,ye=Me+(Pe<<22&4294967295|Pe>>>10),Pe=Ee+(Le^ye&(Me^Le))+de[8]+1770035416&4294967295,Ee=ye+(Pe<<7&4294967295|Pe>>>25),Pe=Le+(Me^Ee&(ye^Me))+de[9]+2336552879&4294967295,Le=Ee+(Pe<<12&4294967295|Pe>>>20),Pe=Me+(ye^Le&(Ee^ye))+de[10]+4294925233&4294967295,Me=Le+(Pe<<17&4294967295|Pe>>>15),Pe=ye+(Ee^Me&(Le^Ee))+de[11]+2304563134&4294967295,ye=Me+(Pe<<22&4294967295|Pe>>>10),Pe=Ee+(Le^ye&(Me^Le))+de[12]+1804603682&4294967295,Ee=ye+(Pe<<7&4294967295|Pe>>>25),Pe=Le+(Me^Ee&(ye^Me))+de[13]+4254626195&4294967295,Le=Ee+(Pe<<12&4294967295|Pe>>>20),Pe=Me+(ye^Le&(Ee^ye))+de[14]+2792965006&4294967295,Me=Le+(Pe<<17&4294967295|Pe>>>15),Pe=ye+(Ee^Me&(Le^Ee))+de[15]+1236535329&4294967295,ye=Me+(Pe<<22&4294967295|Pe>>>10),Pe=Ee+(Me^Le&(ye^Me))+de[1]+4129170786&4294967295,Ee=ye+(Pe<<5&4294967295|Pe>>>27),Pe=Le+(ye^Me&(Ee^ye))+de[6]+3225465664&4294967295,Le=Ee+(Pe<<9&4294967295|Pe>>>23),Pe=Me+(Ee^ye&(Le^Ee))+de[11]+643717713&4294967295,Me=Le+(Pe<<14&4294967295|Pe>>>18),Pe=ye+(Le^Ee&(Me^Le))+de[0]+3921069994&4294967295,ye=Me+(Pe<<20&4294967295|Pe>>>12),Pe=Ee+(Me^Le&(ye^Me))+de[5]+3593408605&4294967295,Ee=ye+(Pe<<5&4294967295|Pe>>>27),Pe=Le+(ye^Me&(Ee^ye))+de[10]+38016083&4294967295,Le=Ee+(Pe<<9&4294967295|Pe>>>23),Pe=Me+(Ee^ye&(Le^Ee))+de[15]+3634488961&4294967295,Me=Le+(Pe<<14&4294967295|Pe>>>18),Pe=ye+(Le^Ee&(Me^Le))+de[4]+3889429448&4294967295,ye=Me+(Pe<<20&4294967295|Pe>>>12),Pe=Ee+(Me^Le&(ye^Me))+de[9]+568446438&4294967295,Ee=ye+(Pe<<5&4294967295|Pe>>>27),Pe=Le+(ye^Me&(Ee^ye))+de[14]+3275163606&4294967295,Le=Ee+(Pe<<9&4294967295|Pe>>>23),Pe=Me+(Ee^ye&(Le^Ee))+de[3]+4107603335&4294967295,Me=Le+(Pe<<14&4294967295|Pe>>>18),Pe=ye+(Le^Ee&(Me^Le))+de[8]+1163531501&4294967295,ye=Me+(Pe<<20&4294967295|Pe>>>12),Pe=Ee+(Me^Le&(ye^Me))+de[13]+2850285829&4294967295,Ee=ye+(Pe<<5&4294967295|Pe>>>27),Pe=Le+(ye^Me&(Ee^ye))+de[2]+4243563512&4294967295,Le=Ee+(Pe<<9&4294967295|Pe>>>23),Pe=Me+(Ee^ye&(Le^Ee))+de[7]+1735328473&4294967295,Me=Le+(Pe<<14&4294967295|Pe>>>18),Pe=ye+(Le^Ee&(Me^Le))+de[12]+2368359562&4294967295,ye=Me+(Pe<<20&4294967295|Pe>>>12),Pe=Ee+(ye^Me^Le)+de[5]+4294588738&4294967295,Ee=ye+(Pe<<4&4294967295|Pe>>>28),Pe=Le+(Ee^ye^Me)+de[8]+2272392833&4294967295,Le=Ee+(Pe<<11&4294967295|Pe>>>21),Pe=Me+(Le^Ee^ye)+de[11]+1839030562&4294967295,Me=Le+(Pe<<16&4294967295|Pe>>>16),Pe=ye+(Me^Le^Ee)+de[14]+4259657740&4294967295,ye=Me+(Pe<<23&4294967295|Pe>>>9),Pe=Ee+(ye^Me^Le)+de[1]+2763975236&4294967295,Ee=ye+(Pe<<4&4294967295|Pe>>>28),Pe=Le+(Ee^ye^Me)+de[4]+1272893353&4294967295,Le=Ee+(Pe<<11&4294967295|Pe>>>21),Pe=Me+(Le^Ee^ye)+de[7]+4139469664&4294967295,Me=Le+(Pe<<16&4294967295|Pe>>>16),Pe=ye+(Me^Le^Ee)+de[10]+3200236656&4294967295,ye=Me+(Pe<<23&4294967295|Pe>>>9),Pe=Ee+(ye^Me^Le)+de[13]+681279174&4294967295,Ee=ye+(Pe<<4&4294967295|Pe>>>28),Pe=Le+(Ee^ye^Me)+de[0]+3936430074&4294967295,Le=Ee+(Pe<<11&4294967295|Pe>>>21),Pe=Me+(Le^Ee^ye)+de[3]+3572445317&4294967295,Me=Le+(Pe<<16&4294967295|Pe>>>16),Pe=ye+(Me^Le^Ee)+de[6]+76029189&4294967295,ye=Me+(Pe<<23&4294967295|Pe>>>9),Pe=Ee+(ye^Me^Le)+de[9]+3654602809&4294967295,Ee=ye+(Pe<<4&4294967295|Pe>>>28),Pe=Le+(Ee^ye^Me)+de[12]+3873151461&4294967295,Le=Ee+(Pe<<11&4294967295|Pe>>>21),Pe=Me+(Le^Ee^ye)+de[15]+530742520&4294967295,Me=Le+(Pe<<16&4294967295|Pe>>>16),Pe=ye+(Me^Le^Ee)+de[2]+3299628645&4294967295,ye=Me+(Pe<<23&4294967295|Pe>>>9),Pe=Ee+(Me^(ye|~Le))+de[0]+4096336452&4294967295,Ee=ye+(Pe<<6&4294967295|Pe>>>26),Pe=Le+(ye^(Ee|~Me))+de[7]+1126891415&4294967295,Le=Ee+(Pe<<10&4294967295|Pe>>>22),Pe=Me+(Ee^(Le|~ye))+de[14]+2878612391&4294967295,Me=Le+(Pe<<15&4294967295|Pe>>>17),Pe=ye+(Le^(Me|~Ee))+de[5]+4237533241&4294967295,ye=Me+(Pe<<21&4294967295|Pe>>>11),Pe=Ee+(Me^(ye|~Le))+de[12]+1700485571&4294967295,Ee=ye+(Pe<<6&4294967295|Pe>>>26),Pe=Le+(ye^(Ee|~Me))+de[3]+2399980690&4294967295,Le=Ee+(Pe<<10&4294967295|Pe>>>22),Pe=Me+(Ee^(Le|~ye))+de[10]+4293915773&4294967295,Me=Le+(Pe<<15&4294967295|Pe>>>17),Pe=ye+(Le^(Me|~Ee))+de[1]+2240044497&4294967295,ye=Me+(Pe<<21&4294967295|Pe>>>11),Pe=Ee+(Me^(ye|~Le))+de[8]+1873313359&4294967295,Ee=ye+(Pe<<6&4294967295|Pe>>>26),Pe=Le+(ye^(Ee|~Me))+de[15]+4264355552&4294967295,Le=Ee+(Pe<<10&4294967295|Pe>>>22),Pe=Me+(Ee^(Le|~ye))+de[6]+2734768916&4294967295,Me=Le+(Pe<<15&4294967295|Pe>>>17),Pe=ye+(Le^(Me|~Ee))+de[13]+1309151649&4294967295,ye=Me+(Pe<<21&4294967295|Pe>>>11),Pe=Ee+(Me^(ye|~Le))+de[4]+4149444226&4294967295,Ee=ye+(Pe<<6&4294967295|Pe>>>26),Pe=Le+(ye^(Ee|~Me))+de[11]+3174756917&4294967295,Le=Ee+(Pe<<10&4294967295|Pe>>>22),Pe=Me+(Ee^(Le|~ye))+de[2]+718787259&4294967295,Me=Le+(Pe<<15&4294967295|Pe>>>17),Pe=ye+(Le^(Me|~Ee))+de[9]+3951481745&4294967295,Se.g[0]=Se.g[0]+Ee&4294967295,Se.g[1]=Se.g[1]+(Me+(Pe<<21&4294967295|Pe>>>11))&4294967295,Se.g[2]=Se.g[2]+Me&4294967295,Se.g[3]=Se.g[3]+Le&4294967295}o.prototype.u=function(Se,Ee){Ee===void 0&&(Ee=Se.length);for(var ye=Ee-this.blockSize,de=this.B,Me=this.h,Le=0;Le<Ee;){if(Me==0)for(;Le<=ye;)y(this,Se,Le),Le+=this.blockSize;if(typeof Se=="string"){for(;Le<Ee;)if(de[Me++]=Se.charCodeAt(Le++),Me==this.blockSize){y(this,de),Me=0;break}}else for(;Le<Ee;)if(de[Me++]=Se[Le++],Me==this.blockSize){y(this,de),Me=0;break}}this.h=Me,this.o+=Ee},o.prototype.v=function(){var Se=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);Se[0]=128;for(var Ee=1;Ee<Se.length-8;++Ee)Se[Ee]=0;var ye=8*this.o;for(Ee=Se.length-8;Ee<Se.length;++Ee)Se[Ee]=ye&255,ye/=256;for(this.u(Se),Se=Array(16),Ee=ye=0;4>Ee;++Ee)for(var de=0;32>de;de+=8)Se[ye++]=this.g[Ee]>>>de&255;return Se};function R(Se,Ee){var ye=K;return Object.prototype.hasOwnProperty.call(ye,Se)?ye[Se]:ye[Se]=Ee(Se)}function G(Se,Ee){this.h=Ee;for(var ye=[],de=!0,Me=Se.length-1;0<=Me;Me--){var Le=Se[Me]|0;de&&Le==Ee||(ye[Me]=Le,de=!1)}this.g=ye}var K={};function Y(Se){return-128<=Se&&128>Se?R(Se,function(Ee){return new G([Ee|0],0>Ee?-1:0)}):new G([Se|0],0>Se?-1:0)}function Q(Se){if(isNaN(Se)||!isFinite(Se))return ie;if(0>Se)return oe(Q(-Se));for(var Ee=[],ye=1,de=0;Se>=ye;de++)Ee[de]=Se/ye|0,ye*=4294967296;return new G(Ee,0)}function ee(Se,Ee){if(Se.length==0)throw Error("number format error: empty string");if(Ee=Ee||10,2>Ee||36<Ee)throw Error("radix out of range: "+Ee);if(Se.charAt(0)=="-")return oe(ee(Se.substring(1),Ee));if(0<=Se.indexOf("-"))throw Error('number format error: interior "-" character');for(var ye=Q(Math.pow(Ee,8)),de=ie,Me=0;Me<Se.length;Me+=8){var Le=Math.min(8,Se.length-Me),Pe=parseInt(Se.substring(Me,Me+Le),Ee);8>Le?(Le=Q(Math.pow(Ee,Le)),de=de.j(Le).add(Q(Pe))):(de=de.j(ye),de=de.add(Q(Pe)))}return de}var ie=Y(0),re=Y(1),se=Y(16777216);r=G.prototype,r.m=function(){if(ce(this))return-oe(this).m();for(var Se=0,Ee=1,ye=0;ye<this.g.length;ye++){var de=this.i(ye);Se+=(0<=de?de:4294967296+de)*Ee,Ee*=4294967296}return Se},r.toString=function(Se){if(Se=Se||10,2>Se||36<Se)throw Error("radix out of range: "+Se);if(le(this))return"0";if(ce(this))return"-"+oe(this).toString(Se);for(var Ee=Q(Math.pow(Se,6)),ye=this,de="";;){var Me=_e(ye,Ee).g;ye=ue(ye,Me.j(Ee));var Le=((0<ye.g.length?ye.g[0]:ye.h)>>>0).toString(Se);if(ye=Me,le(ye))return Le+de;for(;6>Le.length;)Le="0"+Le;de=Le+de}},r.i=function(Se){return 0>Se?0:Se<this.g.length?this.g[Se]:this.h};function le(Se){if(Se.h!=0)return!1;for(var Ee=0;Ee<Se.g.length;Ee++)if(Se.g[Ee]!=0)return!1;return!0}function ce(Se){return Se.h==-1}r.l=function(Se){return Se=ue(this,Se),ce(Se)?-1:le(Se)?0:1};function oe(Se){for(var Ee=Se.g.length,ye=[],de=0;de<Ee;de++)ye[de]=~Se.g[de];return new G(ye,~Se.h).add(re)}r.abs=function(){return ce(this)?oe(this):this},r.add=function(Se){for(var Ee=Math.max(this.g.length,Se.g.length),ye=[],de=0,Me=0;Me<=Ee;Me++){var Le=de+(this.i(Me)&65535)+(Se.i(Me)&65535),Pe=(Le>>>16)+(this.i(Me)>>>16)+(Se.i(Me)>>>16);de=Pe>>>16,Le&=65535,Pe&=65535,ye[Me]=Pe<<16|Le}return new G(ye,ye[ye.length-1]&-2147483648?-1:0)};function ue(Se,Ee){return Se.add(oe(Ee))}r.j=function(Se){if(le(this)||le(Se))return ie;if(ce(this))return ce(Se)?oe(this).j(oe(Se)):oe(oe(this).j(Se));if(ce(Se))return oe(this.j(oe(Se)));if(0>this.l(se)&&0>Se.l(se))return Q(this.m()*Se.m());for(var Ee=this.g.length+Se.g.length,ye=[],de=0;de<2*Ee;de++)ye[de]=0;for(de=0;de<this.g.length;de++)for(var Me=0;Me<Se.g.length;Me++){var Le=this.i(de)>>>16,Pe=this.i(de)&65535,Ue=Se.i(Me)>>>16,$e=Se.i(Me)&65535;ye[2*de+2*Me]+=Pe*$e,ge(ye,2*de+2*Me),ye[2*de+2*Me+1]+=Le*$e,ge(ye,2*de+2*Me+1),ye[2*de+2*Me+1]+=Pe*Ue,ge(ye,2*de+2*Me+1),ye[2*de+2*Me+2]+=Le*Ue,ge(ye,2*de+2*Me+2)}for(de=0;de<Ee;de++)ye[de]=ye[2*de+1]<<16|ye[2*de];for(de=Ee;de<2*Ee;de++)ye[de]=0;return new G(ye,0)};function ge(Se,Ee){for(;(Se[Ee]&65535)!=Se[Ee];)Se[Ee+1]+=Se[Ee]>>>16,Se[Ee]&=65535,Ee++}function ve(Se,Ee){this.g=Se,this.h=Ee}function _e(Se,Ee){if(le(Ee))throw Error("division by zero");if(le(Se))return new ve(ie,ie);if(ce(Se))return Ee=_e(oe(Se),Ee),new ve(oe(Ee.g),oe(Ee.h));if(ce(Ee))return Ee=_e(Se,oe(Ee)),new ve(oe(Ee.g),Ee.h);if(30<Se.g.length){if(ce(Se)||ce(Ee))throw Error("slowDivide_ only works with positive integers.");for(var ye=re,de=Ee;0>=de.l(Se);)ye=be(ye),de=be(de);var Me=Re(ye,1),Le=Re(de,1);for(de=Re(de,2),ye=Re(ye,2);!le(de);){var Pe=Le.add(de);0>=Pe.l(Se)&&(Me=Me.add(ye),Le=Pe),de=Re(de,1),ye=Re(ye,1)}return Ee=ue(Se,Me.j(Ee)),new ve(Me,Ee)}for(Me=ie;0<=Se.l(Ee);){for(ye=Math.max(1,Math.floor(Se.m()/Ee.m())),de=Math.ceil(Math.log(ye)/Math.LN2),de=48>=de?1:Math.pow(2,de-48),Le=Q(ye),Pe=Le.j(Ee);ce(Pe)||0<Pe.l(Se);)ye-=de,Le=Q(ye),Pe=Le.j(Ee);le(Le)&&(Le=re),Me=Me.add(Le),Se=ue(Se,Pe)}return new ve(Me,Se)}r.A=function(Se){return _e(this,Se).h},r.and=function(Se){for(var Ee=Math.max(this.g.length,Se.g.length),ye=[],de=0;de<Ee;de++)ye[de]=this.i(de)&Se.i(de);return new G(ye,this.h&Se.h)},r.or=function(Se){for(var Ee=Math.max(this.g.length,Se.g.length),ye=[],de=0;de<Ee;de++)ye[de]=this.i(de)|Se.i(de);return new G(ye,this.h|Se.h)},r.xor=function(Se){for(var Ee=Math.max(this.g.length,Se.g.length),ye=[],de=0;de<Ee;de++)ye[de]=this.i(de)^Se.i(de);return new G(ye,this.h^Se.h)};function be(Se){for(var Ee=Se.g.length+1,ye=[],de=0;de<Ee;de++)ye[de]=Se.i(de)<<1|Se.i(de-1)>>>31;return new G(ye,Se.h)}function Re(Se,Ee){var ye=Ee>>5;Ee%=32;for(var de=Se.g.length-ye,Me=[],Le=0;Le<de;Le++)Me[Le]=0<Ee?Se.i(Le+ye)>>>Ee|Se.i(Le+ye+1)<<32-Ee:Se.i(Le+ye);return new G(Me,Se.h)}o.prototype.digest=o.prototype.v,o.prototype.reset=o.prototype.s,o.prototype.update=o.prototype.u,Md5=o,G.prototype.add=G.prototype.add,G.prototype.multiply=G.prototype.j,G.prototype.modulo=G.prototype.A,G.prototype.compare=G.prototype.l,G.prototype.toNumber=G.prototype.m,G.prototype.toString=G.prototype.toString,G.prototype.getBits=G.prototype.i,G.fromNumber=Q,G.fromString=ee,Integer=G}).apply(typeof commonjsGlobal$1<"u"?commonjsGlobal$1:typeof self<"u"?self:typeof window<"u"?window:{});var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var XhrIo,WebChannel,EventType,ErrorCode,Stat,Event,getStatEventTarget,createWebChannelTransport;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(fe,we,Fe){return fe==Array.prototype||fe==Object.prototype||(fe[we]=Fe.value),fe};function t(fe){fe=[typeof globalThis=="object"&&globalThis,fe,typeof window=="object"&&window,typeof self=="object"&&self,typeof commonjsGlobal=="object"&&commonjsGlobal];for(var we=0;we<fe.length;++we){var Fe=fe[we];if(Fe&&Fe.Math==Math)return Fe}throw Error("Cannot find global object")}var o=t(this);function y(fe,we){if(we)e:{var Fe=o;fe=fe.split(".");for(var We=0;We<fe.length-1;We++){var Lt=fe[We];if(!(Lt in Fe))break e;Fe=Fe[Lt]}fe=fe[fe.length-1],We=Fe[fe],we=we(We),we!=We&&we!=null&&e(Fe,fe,{configurable:!0,writable:!0,value:we})}}function R(fe,we){fe instanceof String&&(fe+="");var Fe=0,We=!1,Lt={next:function(){if(!We&&Fe<fe.length){var Sn=Fe++;return{value:we(Sn,fe[Sn]),done:!1}}return We=!0,{done:!0,value:void 0}}};return Lt[Symbol.iterator]=function(){return Lt},Lt}y("Array.prototype.values",function(fe){return fe||function(){return R(this,function(we,Fe){return Fe})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var G=G||{},K=this||self;function Y(fe){var we=typeof fe;return we=we!="object"?we:fe?Array.isArray(fe)?"array":we:"null",we=="array"||we=="object"&&typeof fe.length=="number"}function Q(fe){var we=typeof fe;return we=="object"&&fe!=null||we=="function"}function ee(fe,we,Fe){return fe.call.apply(fe.bind,arguments)}function ie(fe,we,Fe){if(!fe)throw Error();if(2<arguments.length){var We=Array.prototype.slice.call(arguments,2);return function(){var Lt=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Lt,We),fe.apply(we,Lt)}}return function(){return fe.apply(we,arguments)}}function re(fe,we,Fe){return re=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?ee:ie,re.apply(null,arguments)}function se(fe,we){var Fe=Array.prototype.slice.call(arguments,1);return function(){var We=Fe.slice();return We.push.apply(We,arguments),fe.apply(this,We)}}function le(fe,we){function Fe(){}Fe.prototype=we.prototype,fe.aa=we.prototype,fe.prototype=new Fe,fe.prototype.constructor=fe,fe.Qb=function(We,Lt,Sn){for(var Wn=Array(arguments.length-2),Ni=2;Ni<arguments.length;Ni++)Wn[Ni-2]=arguments[Ni];return we.prototype[Lt].apply(We,Wn)}}function ce(fe){const we=fe.length;if(0<we){const Fe=Array(we);for(let We=0;We<we;We++)Fe[We]=fe[We];return Fe}return[]}function oe(fe,we){for(let Fe=1;Fe<arguments.length;Fe++){const We=arguments[Fe];if(Y(We)){const Lt=fe.length||0,Sn=We.length||0;fe.length=Lt+Sn;for(let Wn=0;Wn<Sn;Wn++)fe[Lt+Wn]=We[Wn]}else fe.push(We)}}class ue{constructor(we,Fe){this.i=we,this.j=Fe,this.h=0,this.g=null}get(){let we;return 0<this.h?(this.h--,we=this.g,this.g=we.next,we.next=null):we=this.i(),we}}function ge(fe){return/^[\s\xa0]*$/.test(fe)}function ve(){var fe=K.navigator;return fe&&(fe=fe.userAgent)?fe:""}function _e(fe){return _e[" "](fe),fe}_e[" "]=function(){};var be=ve().indexOf("Gecko")!=-1&&!(ve().toLowerCase().indexOf("webkit")!=-1&&ve().indexOf("Edge")==-1)&&!(ve().indexOf("Trident")!=-1||ve().indexOf("MSIE")!=-1)&&ve().indexOf("Edge")==-1;function Re(fe,we,Fe){for(const We in fe)we.call(Fe,fe[We],We,fe)}function Se(fe,we){for(const Fe in fe)we.call(void 0,fe[Fe],Fe,fe)}function Ee(fe){const we={};for(const Fe in fe)we[Fe]=fe[Fe];return we}const ye="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function de(fe,we){let Fe,We;for(let Lt=1;Lt<arguments.length;Lt++){We=arguments[Lt];for(Fe in We)fe[Fe]=We[Fe];for(let Sn=0;Sn<ye.length;Sn++)Fe=ye[Sn],Object.prototype.hasOwnProperty.call(We,Fe)&&(fe[Fe]=We[Fe])}}function Me(fe){var we=1;fe=fe.split(":");const Fe=[];for(;0<we&&fe.length;)Fe.push(fe.shift()),we--;return fe.length&&Fe.push(fe.join(":")),Fe}function Le(fe){K.setTimeout(()=>{throw fe},0)}function Pe(){var fe=Oe;let we=null;return fe.g&&(we=fe.g,fe.g=fe.g.next,fe.g||(fe.h=null),we.next=null),we}class Ue{constructor(){this.h=this.g=null}add(we,Fe){const We=$e.get();We.set(we,Fe),this.h?this.h.next=We:this.g=We,this.h=We}}var $e=new ue(()=>new Ve,fe=>fe.reset());class Ve{constructor(){this.next=this.g=this.h=null}set(we,Fe){this.h=we,this.g=Fe,this.next=null}reset(){this.next=this.g=this.h=null}}let Ce,De=!1,Oe=new Ue,Te=()=>{const fe=K.Promise.resolve(void 0);Ce=()=>{fe.then(Ne)}};var Ne=()=>{for(var fe;fe=Pe();){try{fe.h.call(fe.g)}catch(Fe){Le(Fe)}var we=$e;we.j(fe),100>we.h&&(we.h++,fe.next=we.g,we.g=fe)}De=!1};function Ye(){this.s=this.s,this.C=this.C}Ye.prototype.s=!1,Ye.prototype.ma=function(){this.s||(this.s=!0,this.N())},Ye.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Qe(fe,we){this.type=fe,this.g=this.target=we,this.defaultPrevented=!1}Qe.prototype.h=function(){this.defaultPrevented=!0};var qe=function(){if(!K.addEventListener||!Object.defineProperty)return!1;var fe=!1,we=Object.defineProperty({},"passive",{get:function(){fe=!0}});try{const Fe=()=>{};K.addEventListener("test",Fe,we),K.removeEventListener("test",Fe,we)}catch{}return fe}();function Ze(fe,we){if(Qe.call(this,fe?fe.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,fe){var Fe=this.type=fe.type,We=fe.changedTouches&&fe.changedTouches.length?fe.changedTouches[0]:null;if(this.target=fe.target||fe.srcElement,this.g=we,we=fe.relatedTarget){if(be){e:{try{_e(we.nodeName);var Lt=!0;break e}catch{}Lt=!1}Lt||(we=null)}}else Fe=="mouseover"?we=fe.fromElement:Fe=="mouseout"&&(we=fe.toElement);this.relatedTarget=we,We?(this.clientX=We.clientX!==void 0?We.clientX:We.pageX,this.clientY=We.clientY!==void 0?We.clientY:We.pageY,this.screenX=We.screenX||0,this.screenY=We.screenY||0):(this.clientX=fe.clientX!==void 0?fe.clientX:fe.pageX,this.clientY=fe.clientY!==void 0?fe.clientY:fe.pageY,this.screenX=fe.screenX||0,this.screenY=fe.screenY||0),this.button=fe.button,this.key=fe.key||"",this.ctrlKey=fe.ctrlKey,this.altKey=fe.altKey,this.shiftKey=fe.shiftKey,this.metaKey=fe.metaKey,this.pointerId=fe.pointerId||0,this.pointerType=typeof fe.pointerType=="string"?fe.pointerType:ct[fe.pointerType]||"",this.state=fe.state,this.i=fe,fe.defaultPrevented&&Ze.aa.h.call(this)}}le(Ze,Qe);var ct={2:"touch",3:"pen",4:"mouse"};Ze.prototype.h=function(){Ze.aa.h.call(this);var fe=this.i;fe.preventDefault?fe.preventDefault():fe.returnValue=!1};var xt="closure_listenable_"+(1e6*Math.random()|0),un=0;function Vn(fe,we,Fe,We,Lt){this.listener=fe,this.proxy=null,this.src=we,this.type=Fe,this.capture=!!We,this.ha=Lt,this.key=++un,this.da=this.fa=!1}function In(fe){fe.da=!0,fe.listener=null,fe.proxy=null,fe.src=null,fe.ha=null}function Un(fe){this.src=fe,this.g={},this.h=0}Un.prototype.add=function(fe,we,Fe,We,Lt){var Sn=fe.toString();fe=this.g[Sn],fe||(fe=this.g[Sn]=[],this.h++);var Wn=Ln(fe,we,We,Lt);return-1<Wn?(we=fe[Wn],Fe||(we.fa=!1)):(we=new Vn(we,this.src,Sn,!!We,Lt),we.fa=Fe,fe.push(we)),we};function kn(fe,we){var Fe=we.type;if(Fe in fe.g){var We=fe.g[Fe],Lt=Array.prototype.indexOf.call(We,we,void 0),Sn;(Sn=0<=Lt)&&Array.prototype.splice.call(We,Lt,1),Sn&&(In(we),fe.g[Fe].length==0&&(delete fe.g[Fe],fe.h--))}}function Ln(fe,we,Fe,We){for(var Lt=0;Lt<fe.length;++Lt){var Sn=fe[Lt];if(!Sn.da&&Sn.listener==we&&Sn.capture==!!Fe&&Sn.ha==We)return Lt}return-1}var Ke="closure_lm_"+(1e6*Math.random()|0),Qn={};function yn(fe,we,Fe,We,Lt){if(Array.isArray(we)){for(var Sn=0;Sn<we.length;Sn++)yn(fe,we[Sn],Fe,We,Lt);return null}return Fe=En(Fe),fe&&fe[xt]?fe.K(we,Fe,Q(We)?!!We.capture:!1,Lt):kt(fe,we,Fe,!1,We,Lt)}function kt(fe,we,Fe,We,Lt,Sn){if(!we)throw Error("Invalid event type");var Wn=Q(Lt)?!!Lt.capture:!!Lt,Ni=Mt(fe);if(Ni||(fe[Ke]=Ni=new Un(fe)),Fe=Ni.add(we,Fe,We,Wn,Sn),Fe.proxy)return Fe;if(We=cn(),Fe.proxy=We,We.src=fe,We.listener=Fe,fe.addEventListener)qe||(Lt=Wn),Lt===void 0&&(Lt=!1),fe.addEventListener(we.toString(),We,Lt);else if(fe.attachEvent)fe.attachEvent(He(we.toString()),We);else if(fe.addListener&&fe.removeListener)fe.addListener(We);else throw Error("addEventListener and attachEvent are unavailable.");return Fe}function cn(){function fe(Fe){return we.call(fe.src,fe.listener,Fe)}const we=ze;return fe}function Mn(fe,we,Fe,We,Lt){if(Array.isArray(we))for(var Sn=0;Sn<we.length;Sn++)Mn(fe,we[Sn],Fe,We,Lt);else We=Q(We)?!!We.capture:!!We,Fe=En(Fe),fe&&fe[xt]?(fe=fe.i,we=String(we).toString(),we in fe.g&&(Sn=fe.g[we],Fe=Ln(Sn,Fe,We,Lt),-1<Fe&&(In(Sn[Fe]),Array.prototype.splice.call(Sn,Fe,1),Sn.length==0&&(delete fe.g[we],fe.h--)))):fe&&(fe=Mt(fe))&&(we=fe.g[we.toString()],fe=-1,we&&(fe=Ln(we,Fe,We,Lt)),(Fe=-1<fe?we[fe]:null)&&Qt(Fe))}function Qt(fe){if(typeof fe!="number"&&fe&&!fe.da){var we=fe.src;if(we&&we[xt])kn(we.i,fe);else{var Fe=fe.type,We=fe.proxy;we.removeEventListener?we.removeEventListener(Fe,We,fe.capture):we.detachEvent?we.detachEvent(He(Fe),We):we.addListener&&we.removeListener&&we.removeListener(We),(Fe=Mt(we))?(kn(Fe,fe),Fe.h==0&&(Fe.src=null,we[Ke]=null)):In(fe)}}}function He(fe){return fe in Qn?Qn[fe]:Qn[fe]="on"+fe}function ze(fe,we){if(fe.da)fe=!0;else{we=new Ze(we,this);var Fe=fe.listener,We=fe.ha||fe.src;fe.fa&&Qt(fe),fe=Fe.call(We,we)}return fe}function Mt(fe){return fe=fe[Ke],fe instanceof Un?fe:null}var hn="__closure_events_fn_"+(1e9*Math.random()>>>0);function En(fe){return typeof fe=="function"?fe:(fe[hn]||(fe[hn]=function(we){return fe.handleEvent(we)}),fe[hn])}function an(){Ye.call(this),this.i=new Un(this),this.M=this,this.F=null}le(an,Ye),an.prototype[xt]=!0,an.prototype.removeEventListener=function(fe,we,Fe,We){Mn(this,fe,we,Fe,We)};function Cn(fe,we){var Fe,We=fe.F;if(We)for(Fe=[];We;We=We.F)Fe.push(We);if(fe=fe.M,We=we.type||we,typeof we=="string")we=new Qe(we,fe);else if(we instanceof Qe)we.target=we.target||fe;else{var Lt=we;we=new Qe(We,fe),de(we,Lt)}if(Lt=!0,Fe)for(var Sn=Fe.length-1;0<=Sn;Sn--){var Wn=we.g=Fe[Sn];Lt=Pn(Wn,We,!0,we)&&Lt}if(Wn=we.g=fe,Lt=Pn(Wn,We,!0,we)&&Lt,Lt=Pn(Wn,We,!1,we)&&Lt,Fe)for(Sn=0;Sn<Fe.length;Sn++)Wn=we.g=Fe[Sn],Lt=Pn(Wn,We,!1,we)&&Lt}an.prototype.N=function(){if(an.aa.N.call(this),this.i){var fe=this.i,we;for(we in fe.g){for(var Fe=fe.g[we],We=0;We<Fe.length;We++)In(Fe[We]);delete fe.g[we],fe.h--}}this.F=null},an.prototype.K=function(fe,we,Fe,We){return this.i.add(String(fe),we,!1,Fe,We)},an.prototype.L=function(fe,we,Fe,We){return this.i.add(String(fe),we,!0,Fe,We)};function Pn(fe,we,Fe,We){if(we=fe.i.g[String(we)],!we)return!0;we=we.concat();for(var Lt=!0,Sn=0;Sn<we.length;++Sn){var Wn=we[Sn];if(Wn&&!Wn.da&&Wn.capture==Fe){var Ni=Wn.listener,Ar=Wn.ha||Wn.src;Wn.fa&&kn(fe.i,Wn),Lt=Ni.call(Ar,We)!==!1&&Lt}}return Lt&&!We.defaultPrevented}function Fn(fe,we,Fe){if(typeof fe=="function")Fe&&(fe=re(fe,Fe));else if(fe&&typeof fe.handleEvent=="function")fe=re(fe.handleEvent,fe);else throw Error("Invalid listener argument");return 2147483647<Number(we)?-1:K.setTimeout(fe,we||0)}function pi(fe){fe.g=Fn(()=>{fe.g=null,fe.i&&(fe.i=!1,pi(fe))},fe.l);const we=fe.h;fe.h=null,fe.m.apply(null,we)}class On extends Ye{constructor(we,Fe){super(),this.m=we,this.l=Fe,this.h=null,this.i=!1,this.g=null}j(we){this.h=arguments,this.g?this.i=!0:pi(this)}N(){super.N(),this.g&&(K.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Kn(fe){Ye.call(this),this.h=fe,this.g={}}le(Kn,Ye);var ei=[];function ti(fe){Re(fe.g,function(we,Fe){this.g.hasOwnProperty(Fe)&&Qt(we)},fe),fe.g={}}Kn.prototype.N=function(){Kn.aa.N.call(this),ti(this)},Kn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Gn=K.JSON.stringify,yt=K.JSON.parse,xn=class{stringify(fe){return K.JSON.stringify(fe,void 0)}parse(fe){return K.JSON.parse(fe,void 0)}};function Xn(){}Xn.prototype.h=null;function pt(fe){return fe.h||(fe.h=fe.i())}function Nn(){}var gn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Tn(){Qe.call(this,"d")}le(Tn,Qe);function $n(){Qe.call(this,"c")}le($n,Qe);var Hn={},ri=null;function Ei(){return ri=ri||new an}Hn.La="serverreachability";function Hi(fe){Qe.call(this,Hn.La,fe)}le(Hi,Qe);function gi(fe){const we=Ei();Cn(we,new Hi(we))}Hn.STAT_EVENT="statevent";function vr(fe,we){Qe.call(this,Hn.STAT_EVENT,fe),this.stat=we}le(vr,Qe);function Ci(fe){const we=Ei();Cn(we,new vr(we,fe))}Hn.Ma="timingevent";function Er(fe,we){Qe.call(this,Hn.Ma,fe),this.size=we}le(Er,Qe);function pr(fe,we){if(typeof fe!="function")throw Error("Fn must not be null and must be a function");return K.setTimeout(function(){fe()},we)}function Cr(){this.g=!0}Cr.prototype.xa=function(){this.g=!1};function ms(fe,we,Fe,We,Lt,Sn){fe.info(function(){if(fe.g)if(Sn)for(var Wn="",Ni=Sn.split("&"),Ar=0;Ar<Ni.length;Ar++){var Fi=Ni[Ar].split("=");if(1<Fi.length){var Or=Fi[0];Fi=Fi[1];var jr=Or.split("_");Wn=2<=jr.length&&jr[1]=="type"?Wn+(Or+"="+Fi+"&"):Wn+(Or+"=redacted&")}}else Wn=null;else Wn=Sn;return"XMLHTTP REQ ("+We+") [attempt "+Lt+"]: "+we+`
`+Fe+`
`+Wn})}function xl(fe,we,Fe,We,Lt,Sn,Wn){fe.info(function(){return"XMLHTTP RESP ("+We+") [ attempt "+Lt+"]: "+we+`
`+Fe+`
`+Sn+" "+Wn})}function Jr(fe,we,Fe,We){fe.info(function(){return"XMLHTTP TEXT ("+we+"): "+Hs(fe,Fe)+(We?" "+We:"")})}function ls(fe,we){fe.info(function(){return"TIMEOUT: "+we})}Cr.prototype.info=function(){};function Hs(fe,we){if(!fe.g)return we;if(!we)return null;try{var Fe=JSON.parse(we);if(Fe){for(fe=0;fe<Fe.length;fe++)if(Array.isArray(Fe[fe])){var We=Fe[fe];if(!(2>We.length)){var Lt=We[1];if(Array.isArray(Lt)&&!(1>Lt.length)){var Sn=Lt[0];if(Sn!="noop"&&Sn!="stop"&&Sn!="close")for(var Wn=1;Wn<Lt.length;Wn++)Lt[Wn]=""}}}}return Gn(Fe)}catch{return we}}var ji={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Vs={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ts;function js(){}le(js,Xn),js.prototype.g=function(){return new XMLHttpRequest},js.prototype.i=function(){return{}},Ts=new js;function es(fe,we,Fe,We){this.j=fe,this.i=we,this.l=Fe,this.R=We||1,this.U=new Kn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Sr}function Sr(){this.i=null,this.g="",this.h=!1}var po={},Wa={};function bs(fe,we,Fe){fe.L=1,fe.v=Tr(Hr(we)),fe.m=Fe,fe.P=!0,Ge(fe,null)}function Ge(fe,we){fe.F=Date.now(),pn(fe),fe.A=Hr(fe.v);var Fe=fe.A,We=fe.R;Array.isArray(We)||(We=[String(We)]),Jl(Fe.i,"t",We),fe.C=0,Fe=fe.j.J,fe.h=new Sr,fe.g=da(fe.j,Fe?we:null,!fe.m),0<fe.O&&(fe.M=new On(re(fe.Y,fe,fe.g),fe.O)),we=fe.U,Fe=fe.g,We=fe.ca;var Lt="readystatechange";Array.isArray(Lt)||(Lt&&(ei[0]=Lt.toString()),Lt=ei);for(var Sn=0;Sn<Lt.length;Sn++){var Wn=yn(Fe,Lt[Sn],We||we.handleEvent,!1,we.h||we);if(!Wn)break;we.g[Wn.key]=Wn}we=fe.H?Ee(fe.H):{},fe.m?(fe.u||(fe.u="POST"),we["Content-Type"]="application/x-www-form-urlencoded",fe.g.ea(fe.A,fe.u,fe.m,we)):(fe.u="GET",fe.g.ea(fe.A,fe.u,null,we)),gi(),ms(fe.i,fe.u,fe.A,fe.l,fe.R,fe.m)}es.prototype.ca=function(fe){fe=fe.target;const we=this.M;we&&Ws(fe)==3?we.j():this.Y(fe)},es.prototype.Y=function(fe){try{if(fe==this.g)e:{const jr=Ws(this.g);var we=this.g.Ba();const Nr=this.g.Z();if(!(3>jr)&&(jr!=3||this.g&&(this.h.h||this.g.oa()||Wc(this.g)))){this.J||jr!=4||we==7||(we==8||0>=Nr?gi(3):gi(2)),Dn(this);var Fe=this.g.Z();this.X=Fe;t:if(Ct(this)){var We=Wc(this.g);fe="";var Lt=We.length,Sn=Ws(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){qn(this),jn(this);var Wn="";break t}this.h.i=new K.TextDecoder}for(we=0;we<Lt;we++)this.h.h=!0,fe+=this.h.i.decode(We[we],{stream:!(Sn&&we==Lt-1)});We.length=0,this.h.g+=fe,this.C=0,Wn=this.h.g}else Wn=this.g.oa();if(this.o=Fe==200,xl(this.i,this.u,this.A,this.l,this.R,jr,Fe),this.o){if(this.T&&!this.K){t:{if(this.g){var Ni,Ar=this.g;if((Ni=Ar.g?Ar.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ge(Ni)){var Fi=Ni;break t}}Fi=null}if(Fe=Fi)Jr(this.i,this.l,Fe,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Zn(this,Fe);else{this.o=!1,this.s=3,Ci(12),qn(this),jn(this);break e}}if(this.P){Fe=!0;let ts;for(;!this.J&&this.C<Wn.length;)if(ts=dn(this,Wn),ts==Wa){jr==4&&(this.s=4,Ci(14),Fe=!1),Jr(this.i,this.l,null,"[Incomplete Response]");break}else if(ts==po){this.s=4,Ci(15),Jr(this.i,this.l,Wn,"[Invalid Chunk]"),Fe=!1;break}else Jr(this.i,this.l,ts,null),Zn(this,ts);if(Ct(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),jr!=4||Wn.length!=0||this.h.h||(this.s=1,Ci(16),Fe=!1),this.o=this.o&&Fe,!Fe)Jr(this.i,this.l,Wn,"[Invalid Chunked Response]"),qn(this),jn(this);else if(0<Wn.length&&!this.W){this.W=!0;var Or=this.j;Or.g==this&&Or.ba&&!Or.M&&(Or.j.info("Great, no buffering proxy detected. Bytes received: "+Wn.length),_o(Or),Or.M=!0,Ci(11))}}else Jr(this.i,this.l,Wn,null),Zn(this,Wn);jr==4&&qn(this),this.o&&!this.J&&(jr==4?nc(this.j,this):(this.o=!1,pn(this)))}else Ah(this.g),Fe==400&&0<Wn.indexOf("Unknown SID")?(this.s=3,Ci(12)):(this.s=0,Ci(13)),qn(this),jn(this)}}}catch{}finally{}};function Ct(fe){return fe.g?fe.u=="GET"&&fe.L!=2&&fe.j.Ca:!1}function dn(fe,we){var Fe=fe.C,We=we.indexOf(`
`,Fe);return We==-1?Wa:(Fe=Number(we.substring(Fe,We)),isNaN(Fe)?po:(We+=1,We+Fe>we.length?Wa:(we=we.slice(We,We+Fe),fe.C=We+Fe,we)))}es.prototype.cancel=function(){this.J=!0,qn(this)};function pn(fe){fe.S=Date.now()+fe.I,Ot(fe,fe.I)}function Ot(fe,we){if(fe.B!=null)throw Error("WatchDog timer not null");fe.B=pr(re(fe.ba,fe),we)}function Dn(fe){fe.B&&(K.clearTimeout(fe.B),fe.B=null)}es.prototype.ba=function(){this.B=null;const fe=Date.now();0<=fe-this.S?(ls(this.i,this.A),this.L!=2&&(gi(),Ci(17)),qn(this),this.s=2,jn(this)):Ot(this,this.S-fe)};function jn(fe){fe.j.G==0||fe.J||nc(fe.j,fe)}function qn(fe){Dn(fe);var we=fe.M;we&&typeof we.ma=="function"&&we.ma(),fe.M=null,ti(fe.U),fe.g&&(we=fe.g,fe.g=null,we.abort(),we.ma())}function Zn(fe,we){try{var Fe=fe.j;if(Fe.G!=0&&(Fe.g==fe||Vi(Fe.h,fe))){if(!fe.K&&Vi(Fe.h,fe)&&Fe.G==3){try{var We=Fe.Da.g.parse(we)}catch{We=null}if(Array.isArray(We)&&We.length==3){var Lt=We;if(Lt[0]==0){e:if(!Fe.u){if(Fe.g)if(Fe.g.F+3e3<fe.F)Xo(Fe),Ml(Fe);else break e;wl(Fe),Ci(18)}}else Fe.za=Lt[1],0<Fe.za-Fe.T&&37500>Lt[2]&&Fe.F&&Fe.v==0&&!Fe.C&&(Fe.C=pr(re(Fe.Za,Fe),6e3));if(1>=Mi(Fe.h)&&Fe.ca){try{Fe.ca()}catch{}Fe.ca=void 0}}else Ka(Fe,11)}else if((fe.K||Fe.g==fe)&&Xo(Fe),!ge(we))for(Lt=Fe.Da.g.parse(we),we=0;we<Lt.length;we++){let Fi=Lt[we];if(Fe.T=Fi[0],Fi=Fi[1],Fe.G==2)if(Fi[0]=="c"){Fe.K=Fi[1],Fe.ia=Fi[2];const Or=Fi[3];Or!=null&&(Fe.la=Or,Fe.j.info("VER="+Fe.la));const jr=Fi[4];jr!=null&&(Fe.Aa=jr,Fe.j.info("SVER="+Fe.Aa));const Nr=Fi[5];Nr!=null&&typeof Nr=="number"&&0<Nr&&(We=1.5*Nr,Fe.L=We,Fe.j.info("backChannelRequestTimeoutMs_="+We)),We=Fe;const ts=fe.g;if(ts){const ga=ts.g?ts.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ga){var Sn=We.h;Sn.g||ga.indexOf("spdy")==-1&&ga.indexOf("quic")==-1&&ga.indexOf("h2")==-1||(Sn.j=Sn.l,Sn.g=new Set,Sn.h&&(nr(Sn,Sn.h),Sn.h=null))}if(We.D){const ac=ts.g?ts.g.getResponseHeader("X-HTTP-Session-Id"):null;ac&&(We.ya=ac,Si(We.I,We.D,ac))}}Fe.G=3,Fe.l&&Fe.l.ua(),Fe.ba&&(Fe.R=Date.now()-fe.F,Fe.j.info("Handshake RTT: "+Fe.R+"ms")),We=Fe;var Wn=fe;if(We.qa=Zc(We,We.J?We.ia:null,We.W),Wn.K){Pi(We.h,Wn);var Ni=Wn,Ar=We.L;Ar&&(Ni.I=Ar),Ni.B&&(Dn(Ni),pn(Ni)),We.g=Wn}else Kc(We);0<Fe.i.length&&Rl(Fe)}else Fi[0]!="stop"&&Fi[0]!="close"||Ka(Fe,7);else Fe.G==3&&(Fi[0]=="stop"||Fi[0]=="close"?Fi[0]=="stop"?Ka(Fe,7):tc(Fe):Fi[0]!="noop"&&Fe.l&&Fe.l.ta(Fi),Fe.v=0)}}gi(4)}catch{}}var ui=class{constructor(fe,we){this.g=fe,this.map=we}};function si(fe){this.l=fe||10,K.PerformanceNavigationTiming?(fe=K.performance.getEntriesByType("navigation"),fe=0<fe.length&&(fe[0].nextHopProtocol=="hq"||fe[0].nextHopProtocol=="h2")):fe=!!(K.chrome&&K.chrome.loadTimes&&K.chrome.loadTimes()&&K.chrome.loadTimes().wasFetchedViaSpdy),this.j=fe?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ii(fe){return fe.h?!0:fe.g?fe.g.size>=fe.j:!1}function Mi(fe){return fe.h?1:fe.g?fe.g.size:0}function Vi(fe,we){return fe.h?fe.h==we:fe.g?fe.g.has(we):!1}function nr(fe,we){fe.g?fe.g.add(we):fe.h=we}function Pi(fe,we){fe.h&&fe.h==we?fe.h=null:fe.g&&fe.g.has(we)&&fe.g.delete(we)}si.prototype.cancel=function(){if(this.i=Ii(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const fe of this.g.values())fe.cancel();this.g.clear()}};function Ii(fe){if(fe.h!=null)return fe.i.concat(fe.h.D);if(fe.g!=null&&fe.g.size!==0){let we=fe.i;for(const Fe of fe.g.values())we=we.concat(Fe.D);return we}return ce(fe.i)}function oi(fe){if(fe.V&&typeof fe.V=="function")return fe.V();if(typeof Map<"u"&&fe instanceof Map||typeof Set<"u"&&fe instanceof Set)return Array.from(fe.values());if(typeof fe=="string")return fe.split("");if(Y(fe)){for(var we=[],Fe=fe.length,We=0;We<Fe;We++)we.push(fe[We]);return we}we=[],Fe=0;for(We in fe)we[Fe++]=fe[We];return we}function mr(fe){if(fe.na&&typeof fe.na=="function")return fe.na();if(!fe.V||typeof fe.V!="function"){if(typeof Map<"u"&&fe instanceof Map)return Array.from(fe.keys());if(!(typeof Set<"u"&&fe instanceof Set)){if(Y(fe)||typeof fe=="string"){var we=[];fe=fe.length;for(var Fe=0;Fe<fe;Fe++)we.push(Fe);return we}we=[],Fe=0;for(const We in fe)we[Fe++]=We;return we}}}function Li(fe,we){if(fe.forEach&&typeof fe.forEach=="function")fe.forEach(we,void 0);else if(Y(fe)||typeof fe=="string")Array.prototype.forEach.call(fe,we,void 0);else for(var Fe=mr(fe),We=oi(fe),Lt=We.length,Sn=0;Sn<Lt;Sn++)we.call(void 0,We[Sn],Fe&&Fe[Sn],fe)}var Gr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function la(fe,we){if(fe){fe=fe.split("&");for(var Fe=0;Fe<fe.length;Fe++){var We=fe[Fe].indexOf("="),Lt=null;if(0<=We){var Sn=fe[Fe].substring(0,We);Lt=fe[Fe].substring(We+1)}else Sn=fe[Fe];we(Sn,Lt?decodeURIComponent(Lt.replace(/\+/g," ")):"")}}}function zi(fe){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,fe instanceof zi){this.h=fe.h,qi(this,fe.j),this.o=fe.o,this.g=fe.g,Pr(this,fe.s),this.l=fe.l;var we=fe.i,Fe=new Xa;Fe.i=we.i,we.g&&(Fe.g=new Map(we.g),Fe.h=we.h),xr(this,Fe),this.m=fe.m}else fe&&(we=String(fe).match(Gr))?(this.h=!1,qi(this,we[1]||"",!0),this.o=Lr(we[2]||""),this.g=Lr(we[3]||"",!0),Pr(this,we[4]),this.l=Lr(we[5]||"",!0),xr(this,we[6]||"",!0),this.m=Lr(we[7]||"")):(this.h=!1,this.i=new Xa(null,this.h))}zi.prototype.toString=function(){var fe=[],we=this.j;we&&fe.push(gs(we,Uo,!0),":");var Fe=this.g;return(Fe||we=="file")&&(fe.push("//"),(we=this.o)&&fe.push(gs(we,Uo,!0),"@"),fe.push(encodeURIComponent(String(Fe)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),Fe=this.s,Fe!=null&&fe.push(":",String(Fe))),(Fe=this.l)&&(this.g&&Fe.charAt(0)!="/"&&fe.push("/"),fe.push(gs(Fe,Fe.charAt(0)=="/"?Hc:Ql,!0))),(Fe=this.i.toString())&&fe.push("?",Fe),(Fe=this.m)&&fe.push("#",gs(Fe,bl)),fe.join("")};function Hr(fe){return new zi(fe)}function qi(fe,we,Fe){fe.j=Fe?Lr(we,!0):we,fe.j&&(fe.j=fe.j.replace(/:$/,""))}function Pr(fe,we){if(we){if(we=Number(we),isNaN(we)||0>we)throw Error("Bad port number "+we);fe.s=we}else fe.s=null}function xr(fe,we,Fe){we instanceof Xa?(fe.i=we,jc(fe.i,fe.h)):(Fe||(we=gs(we,wu)),fe.i=new Xa(we,fe.h))}function Si(fe,we,Fe){fe.i.set(we,Fe)}function Tr(fe){return Si(fe,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),fe}function Lr(fe,we){return fe?we?decodeURI(fe.replace(/%25/g,"%2525")):decodeURIComponent(fe):""}function gs(fe,we,Fe){return typeof fe=="string"?(fe=encodeURI(fe).replace(we,Tl),Fe&&(fe=fe.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),fe):null}function Tl(fe){return fe=fe.charCodeAt(0),"%"+(fe>>4&15).toString(16)+(fe&15).toString(16)}var Uo=/[#\/\?@]/g,Ql=/[#\?:]/g,Hc=/[#\?]/g,wu=/[#\?@]/g,bl=/#/g;function Xa(fe,we){this.h=this.g=null,this.i=fe||null,this.j=!!we}function qs(fe){fe.g||(fe.g=new Map,fe.h=0,fe.i&&la(fe.i,function(we,Fe){fe.add(decodeURIComponent(we.replace(/\+/g," ")),Fe)}))}r=Xa.prototype,r.add=function(fe,we){qs(this),this.i=null,fe=ca(this,fe);var Fe=this.g.get(fe);return Fe||this.g.set(fe,Fe=[]),Fe.push(we),this.h+=1,this};function wa(fe,we){qs(fe),we=ca(fe,we),fe.g.has(we)&&(fe.i=null,fe.h-=fe.g.get(we).length,fe.g.delete(we))}function $a(fe,we){return qs(fe),we=ca(fe,we),fe.g.has(we)}r.forEach=function(fe,we){qs(this),this.g.forEach(function(Fe,We){Fe.forEach(function(Lt){fe.call(we,Lt,We,this)},this)},this)},r.na=function(){qs(this);const fe=Array.from(this.g.values()),we=Array.from(this.g.keys()),Fe=[];for(let We=0;We<we.length;We++){const Lt=fe[We];for(let Sn=0;Sn<Lt.length;Sn++)Fe.push(we[We])}return Fe},r.V=function(fe){qs(this);let we=[];if(typeof fe=="string")$a(this,fe)&&(we=we.concat(this.g.get(ca(this,fe))));else{fe=Array.from(this.g.values());for(let Fe=0;Fe<fe.length;Fe++)we=we.concat(fe[Fe])}return we},r.set=function(fe,we){return qs(this),this.i=null,fe=ca(this,fe),$a(this,fe)&&(this.h-=this.g.get(fe).length),this.g.set(fe,[we]),this.h+=1,this},r.get=function(fe,we){return fe?(fe=this.V(fe),0<fe.length?String(fe[0]):we):we};function Jl(fe,we,Fe){wa(fe,we),0<Fe.length&&(fe.i=null,fe.g.set(ca(fe,we),ce(Fe)),fe.h+=Fe.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const fe=[],we=Array.from(this.g.keys());for(var Fe=0;Fe<we.length;Fe++){var We=we[Fe];const Sn=encodeURIComponent(String(We)),Wn=this.V(We);for(We=0;We<Wn.length;We++){var Lt=Sn;Wn[We]!==""&&(Lt+="="+encodeURIComponent(String(Wn[We]))),fe.push(Lt)}}return this.i=fe.join("&")};function ca(fe,we){return we=String(we),fe.j&&(we=we.toLowerCase()),we}function jc(fe,we){we&&!fe.j&&(qs(fe),fe.i=null,fe.g.forEach(function(Fe,We){var Lt=We.toLowerCase();We!=Lt&&(wa(this,We),Jl(this,Lt,Fe))},fe)),fe.j=we}function zo(fe,we){const Fe=new Cr;if(K.Image){const We=new Image;We.onload=se(Ls,Fe,"TestLoadImage: loaded",!0,we,We),We.onerror=se(Ls,Fe,"TestLoadImage: error",!1,we,We),We.onabort=se(Ls,Fe,"TestLoadImage: abort",!1,we,We),We.ontimeout=se(Ls,Fe,"TestLoadImage: timeout",!1,we,We),K.setTimeout(function(){We.ontimeout&&We.ontimeout()},1e4),We.src=fe}else we(!1)}function ua(fe,we){const Fe=new Cr,We=new AbortController,Lt=setTimeout(()=>{We.abort(),Ls(Fe,"TestPingServer: timeout",!1,we)},1e4);fetch(fe,{signal:We.signal}).then(Sn=>{clearTimeout(Lt),Sn.ok?Ls(Fe,"TestPingServer: ok",!0,we):Ls(Fe,"TestPingServer: server error",!1,we)}).catch(()=>{clearTimeout(Lt),Ls(Fe,"TestPingServer: error",!1,we)})}function Ls(fe,we,Fe,We,Lt){try{Lt&&(Lt.onload=null,Lt.onerror=null,Lt.onabort=null,Lt.ontimeout=null),We(Fe)}catch{}}function ko(){this.g=new xn}function Ia(fe,we,Fe){const We=Fe||"";try{Li(fe,function(Lt,Sn){let Wn=Lt;Q(Lt)&&(Wn=Gn(Lt)),we.push(We+Sn+"="+encodeURIComponent(Wn))})}catch(Lt){throw we.push(We+"type="+encodeURIComponent("_badmap")),Lt}}function Go(fe){this.l=fe.Ub||null,this.j=fe.eb||!1}le(Go,Xn),Go.prototype.g=function(){return new mo(this.l,this.j)},Go.prototype.i=function(fe){return function(){return fe}}({});function mo(fe,we){an.call(this),this.D=fe,this.o=we,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}le(mo,an),r=mo.prototype,r.open=function(fe,we){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=fe,this.A=we,this.readyState=1,ha(this)},r.send=function(fe){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const we={headers:this.u,method:this.B,credentials:this.m,cache:void 0};fe&&(we.body=fe),(this.D||K).fetch(new Request(this.A,we)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Os(this)),this.readyState=0},r.Sa=function(fe){if(this.g&&(this.l=fe,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=fe.headers,this.readyState=2,ha(this)),this.g&&(this.readyState=3,ha(this),this.g)))if(this.responseType==="arraybuffer")fe.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof K.ReadableStream<"u"&&"body"in fe){if(this.j=fe.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ec(this)}else fe.text().then(this.Ra.bind(this),this.ga.bind(this))};function ec(fe){fe.j.read().then(fe.Pa.bind(fe)).catch(fe.ga.bind(fe))}r.Pa=function(fe){if(this.g){if(this.o&&fe.value)this.response.push(fe.value);else if(!this.o){var we=fe.value?fe.value:new Uint8Array(0);(we=this.v.decode(we,{stream:!fe.done}))&&(this.response=this.responseText+=we)}fe.done?Os(this):ha(this),this.readyState==3&&ec(this)}},r.Ra=function(fe){this.g&&(this.response=this.responseText=fe,Os(this))},r.Qa=function(fe){this.g&&(this.response=fe,Os(this))},r.ga=function(){this.g&&Os(this)};function Os(fe){fe.readyState=4,fe.l=null,fe.j=null,fe.v=null,ha(fe)}r.setRequestHeader=function(fe,we){this.u.append(fe,we)},r.getResponseHeader=function(fe){return this.h&&this.h.get(fe.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const fe=[],we=this.h.entries();for(var Fe=we.next();!Fe.done;)Fe=Fe.value,fe.push(Fe[0]+": "+Fe[1]),Fe=we.next();return fe.join(`\r
`)};function ha(fe){fe.onreadystatechange&&fe.onreadystatechange.call(fe)}Object.defineProperty(mo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(fe){this.m=fe?"include":"same-origin"}});function Ho(fe){let we="";return Re(fe,function(Fe,We){we+=We,we+=":",we+=Fe,we+=`\r
`}),we}function $r(fe,we,Fe){e:{for(We in Fe){var We=!1;break e}We=!0}We||(Fe=Ho(Fe),typeof fe=="string"?Fe!=null&&encodeURIComponent(String(Fe)):Si(fe,we,Fe))}function Yi(fe){an.call(this),this.headers=new Map,this.o=fe||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}le(Yi,an);var jo=/^https?$/i,qo=["POST","PUT"];r=Yi.prototype,r.Ha=function(fe){this.J=fe},r.ea=function(fe,we,Fe,We){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+fe);we=we?we.toUpperCase():"GET",this.D=fe,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ts.g(),this.v=this.o?pt(this.o):pt(Ts),this.g.onreadystatechange=re(this.Ea,this);try{this.B=!0,this.g.open(we,String(fe),!0),this.B=!1}catch(Sn){qc(this,Sn);return}if(fe=Fe||"",Fe=new Map(this.headers),We)if(Object.getPrototypeOf(We)===Object.prototype)for(var Lt in We)Fe.set(Lt,We[Lt]);else if(typeof We.keys=="function"&&typeof We.get=="function")for(const Sn of We.keys())Fe.set(Sn,We.get(Sn));else throw Error("Unknown input type for opt_headers: "+String(We));We=Array.from(Fe.keys()).find(Sn=>Sn.toLowerCase()=="content-type"),Lt=K.FormData&&fe instanceof K.FormData,!(0<=Array.prototype.indexOf.call(qo,we,void 0))||We||Lt||Fe.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Sn,Wn]of Fe)this.g.setRequestHeader(Sn,Wn);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{yo(this),this.u=!0,this.g.send(fe),this.u=!1}catch(Sn){qc(this,Sn)}};function qc(fe,we){fe.h=!1,fe.g&&(fe.j=!0,fe.g.abort(),fe.j=!1),fe.l=we,fe.m=5,fa(fe),Da(fe)}function fa(fe){fe.A||(fe.A=!0,Cn(fe,"complete"),Cn(fe,"error"))}r.abort=function(fe){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=fe||7,Cn(this,"complete"),Cn(this,"abort"),Da(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Da(this,!0)),Yi.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?go(this):this.bb())},r.bb=function(){go(this)};function go(fe){if(fe.h&&typeof G<"u"&&(!fe.v[1]||Ws(fe)!=4||fe.Z()!=2)){if(fe.u&&Ws(fe)==4)Fn(fe.Ea,0,fe);else if(Cn(fe,"readystatechange"),Ws(fe)==4){fe.h=!1;try{const Wn=fe.Z();e:switch(Wn){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var we=!0;break e;default:we=!1}var Fe;if(!(Fe=we)){var We;if(We=Wn===0){var Lt=String(fe.D).match(Gr)[1]||null;!Lt&&K.self&&K.self.location&&(Lt=K.self.location.protocol.slice(0,-1)),We=!jo.test(Lt?Lt.toLowerCase():"")}Fe=We}if(Fe)Cn(fe,"complete"),Cn(fe,"success");else{fe.m=6;try{var Sn=2<Ws(fe)?fe.g.statusText:""}catch{Sn=""}fe.l=Sn+" ["+fe.Z()+"]",fa(fe)}}finally{Da(fe)}}}}function Da(fe,we){if(fe.g){yo(fe);const Fe=fe.g,We=fe.v[0]?()=>{}:null;fe.g=null,fe.v=null,we||Cn(fe,"ready");try{Fe.onreadystatechange=We}catch{}}}function yo(fe){fe.I&&(K.clearTimeout(fe.I),fe.I=null)}r.isActive=function(){return!!this.g};function Ws(fe){return fe.g?fe.g.readyState:0}r.Z=function(){try{return 2<Ws(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(fe){if(this.g){var we=this.g.responseText;return fe&&we.indexOf(fe)==0&&(we=we.substring(fe.length)),yt(we)}};function Wc(fe){try{if(!fe.g)return null;if("response"in fe.g)return fe.g.response;switch(fe.H){case"":case"text":return fe.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in fe.g)return fe.g.mozResponseArrayBuffer}return null}catch{return null}}function Ah(fe){const we={};fe=(fe.g&&2<=Ws(fe)&&fe.g.getAllResponseHeaders()||"").split(`\r
`);for(let We=0;We<fe.length;We++){if(ge(fe[We]))continue;var Fe=Me(fe[We]);const Lt=Fe[0];if(Fe=Fe[1],typeof Fe!="string")continue;Fe=Fe.trim();const Sn=we[Lt]||[];we[Lt]=Sn,Sn.push(Fe)}Se(we,function(We){return We.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function br(fe,we,Fe){return Fe&&Fe.internalChannelParams&&Fe.internalChannelParams[fe]||we}function Al(fe){this.Aa=0,this.i=[],this.j=new Cr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=br("failFast",!1,fe),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=br("baseRetryDelayMs",5e3,fe),this.cb=br("retryDelaySeedMs",1e4,fe),this.Wa=br("forwardChannelMaxRetries",2,fe),this.wa=br("forwardChannelRequestTimeoutMs",2e4,fe),this.pa=fe&&fe.xmlHttpFactory||void 0,this.Xa=fe&&fe.Tb||void 0,this.Ca=fe&&fe.useFetchStreams||!1,this.L=void 0,this.J=fe&&fe.supportsCrossDomainXhr||!1,this.K="",this.h=new si(fe&&fe.concurrentRequestLimit),this.Da=new ko,this.P=fe&&fe.fastHandshake||!1,this.O=fe&&fe.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=fe&&fe.Rb||!1,fe&&fe.xa&&this.j.xa(),fe&&fe.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&fe&&fe.detectBufferingProxy||!1,this.ja=void 0,fe&&fe.longPollingTimeout&&0<fe.longPollingTimeout&&(this.ja=fe.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=Al.prototype,r.la=8,r.G=1,r.connect=function(fe,we,Fe,We){Ci(0),this.W=fe,this.H=we||{},Fe&&We!==void 0&&(this.H.OSID=Fe,this.H.OAID=We),this.F=this.X,this.I=Zc(this,null,this.W),Rl(this)};function tc(fe){if(Xc(fe),fe.G==3){var we=fe.U++,Fe=Hr(fe.I);if(Si(Fe,"SID",fe.K),Si(Fe,"RID",we),Si(Fe,"TYPE","terminate"),Wo(fe,Fe),we=new es(fe,fe.j,we),we.L=2,we.v=Tr(Hr(Fe)),Fe=!1,K.navigator&&K.navigator.sendBeacon)try{Fe=K.navigator.sendBeacon(we.v.toString(),"")}catch{}!Fe&&K.Image&&(new Image().src=we.v,Fe=!0),Fe||(we.g=da(we.j,null),we.g.ea(we.v)),we.F=Date.now(),pn(we)}ic(fe)}function Ml(fe){fe.g&&(_o(fe),fe.g.cancel(),fe.g=null)}function Xc(fe){Ml(fe),fe.u&&(K.clearTimeout(fe.u),fe.u=null),Xo(fe),fe.h.cancel(),fe.s&&(typeof fe.s=="number"&&K.clearTimeout(fe.s),fe.s=null)}function Rl(fe){if(!ii(fe.h)&&!fe.s){fe.s=!0;var we=fe.Ga;Ce||Te(),De||(Ce(),De=!0),Oe.add(we,fe),fe.B=0}}function Cl(fe,we){return Mi(fe.h)>=fe.h.j-(fe.s?1:0)?!1:fe.s?(fe.i=we.D.concat(fe.i),!0):fe.G==1||fe.G==2||fe.B>=(fe.Va?0:fe.Wa)?!1:(fe.s=pr(re(fe.Ga,fe,we),Il(fe,fe.B)),fe.B++,!0)}r.Ga=function(fe){if(this.s)if(this.s=null,this.G==1){if(!fe){this.U=Math.floor(1e5*Math.random()),fe=this.U++;const Lt=new es(this,this.j,fe);let Sn=this.o;if(this.S&&(Sn?(Sn=Ee(Sn),de(Sn,this.S)):Sn=this.S),this.m!==null||this.O||(Lt.H=Sn,Sn=null),this.P)e:{for(var we=0,Fe=0;Fe<this.i.length;Fe++){t:{var We=this.i[Fe];if("__data__"in We.map&&(We=We.map.__data__,typeof We=="string")){We=We.length;break t}We=void 0}if(We===void 0)break;if(we+=We,4096<we){we=Fe;break e}if(we===4096||Fe===this.i.length-1){we=Fe+1;break e}}we=1e3}else we=1e3;we=$c(this,Lt,we),Fe=Hr(this.I),Si(Fe,"RID",fe),Si(Fe,"CVER",22),this.D&&Si(Fe,"X-HTTP-Session-Id",this.D),Wo(this,Fe),Sn&&(this.O?we="headers="+encodeURIComponent(String(Ho(Sn)))+"&"+we:this.m&&$r(Fe,this.m,Sn)),nr(this.h,Lt),this.Ua&&Si(Fe,"TYPE","init"),this.P?(Si(Fe,"$req",we),Si(Fe,"SID","null"),Lt.T=!0,bs(Lt,Fe,null)):bs(Lt,Fe,we),this.G=2}}else this.G==3&&(fe?Pl(this,fe):this.i.length==0||ii(this.h)||Pl(this))};function Pl(fe,we){var Fe;we?Fe=we.l:Fe=fe.U++;const We=Hr(fe.I);Si(We,"SID",fe.K),Si(We,"RID",Fe),Si(We,"AID",fe.T),Wo(fe,We),fe.m&&fe.o&&$r(We,fe.m,fe.o),Fe=new es(fe,fe.j,Fe,fe.B+1),fe.m===null&&(Fe.H=fe.o),we&&(fe.i=we.D.concat(fe.i)),we=$c(fe,Fe,1e3),Fe.I=Math.round(.5*fe.wa)+Math.round(.5*fe.wa*Math.random()),nr(fe.h,Fe),bs(Fe,We,we)}function Wo(fe,we){fe.H&&Re(fe.H,function(Fe,We){Si(we,We,Fe)}),fe.l&&Li({},function(Fe,We){Si(we,We,Fe)})}function $c(fe,we,Fe){Fe=Math.min(fe.i.length,Fe);var We=fe.l?re(fe.l.Na,fe.l,fe):null;e:{var Lt=fe.i;let Sn=-1;for(;;){const Wn=["count="+Fe];Sn==-1?0<Fe?(Sn=Lt[0].g,Wn.push("ofs="+Sn)):Sn=0:Wn.push("ofs="+Sn);let Ni=!0;for(let Ar=0;Ar<Fe;Ar++){let Fi=Lt[Ar].g;const Or=Lt[Ar].map;if(Fi-=Sn,0>Fi)Sn=Math.max(0,Lt[Ar].g-100),Ni=!1;else try{Ia(Or,Wn,"req"+Fi+"_")}catch{We&&We(Or)}}if(Ni){We=Wn.join("&");break e}}}return fe=fe.i.splice(0,Fe),we.D=fe,We}function Kc(fe){if(!fe.g&&!fe.u){fe.Y=1;var we=fe.Fa;Ce||Te(),De||(Ce(),De=!0),Oe.add(we,fe),fe.v=0}}function wl(fe){return fe.g||fe.u||3<=fe.v?!1:(fe.Y++,fe.u=pr(re(fe.Fa,fe),Il(fe,fe.v)),fe.v++,!0)}r.Fa=function(){if(this.u=null,Yc(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var fe=2*this.R;this.j.info("BP detection timer enabled: "+fe),this.A=pr(re(this.ab,this),fe)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ci(10),Ml(this),Yc(this))};function _o(fe){fe.A!=null&&(K.clearTimeout(fe.A),fe.A=null)}function Yc(fe){fe.g=new es(fe,fe.j,"rpc",fe.Y),fe.m===null&&(fe.g.H=fe.o),fe.g.O=0;var we=Hr(fe.qa);Si(we,"RID","rpc"),Si(we,"SID",fe.K),Si(we,"AID",fe.T),Si(we,"CI",fe.F?"0":"1"),!fe.F&&fe.ja&&Si(we,"TO",fe.ja),Si(we,"TYPE","xmlhttp"),Wo(fe,we),fe.m&&fe.o&&$r(we,fe.m,fe.o),fe.L&&(fe.g.I=fe.L);var Fe=fe.g;fe=fe.ia,Fe.L=1,Fe.v=Tr(Hr(we)),Fe.m=null,Fe.P=!0,Ge(Fe,fe)}r.Za=function(){this.C!=null&&(this.C=null,Ml(this),wl(this),Ci(19))};function Xo(fe){fe.C!=null&&(K.clearTimeout(fe.C),fe.C=null)}function nc(fe,we){var Fe=null;if(fe.g==we){Xo(fe),_o(fe),fe.g=null;var We=2}else if(Vi(fe.h,we))Fe=we.D,Pi(fe.h,we),We=1;else return;if(fe.G!=0){if(we.o)if(We==1){Fe=we.m?we.m.length:0,we=Date.now()-we.F;var Lt=fe.B;We=Ei(),Cn(We,new Er(We,Fe)),Rl(fe)}else Kc(fe);else if(Lt=we.s,Lt==3||Lt==0&&0<we.X||!(We==1&&Cl(fe,we)||We==2&&wl(fe)))switch(Fe&&0<Fe.length&&(we=fe.h,we.i=we.i.concat(Fe)),Lt){case 1:Ka(fe,5);break;case 4:Ka(fe,10);break;case 3:Ka(fe,6);break;default:Ka(fe,2)}}}function Il(fe,we){let Fe=fe.Ta+Math.floor(Math.random()*fe.cb);return fe.isActive()||(Fe*=2),Fe*we}function Ka(fe,we){if(fe.j.info("Error code "+we),we==2){var Fe=re(fe.fb,fe),We=fe.Xa;const Lt=!We;We=new zi(We||"//www.google.com/images/cleardot.gif"),K.location&&K.location.protocol=="http"||qi(We,"https"),Tr(We),Lt?zo(We.toString(),Fe):ua(We.toString(),Fe)}else Ci(2);fe.G=0,fe.l&&fe.l.sa(we),ic(fe),Xc(fe)}r.fb=function(fe){fe?(this.j.info("Successfully pinged google.com"),Ci(2)):(this.j.info("Failed to ping google.com"),Ci(1))};function ic(fe){if(fe.G=0,fe.ka=[],fe.l){const we=Ii(fe.h);(we.length!=0||fe.i.length!=0)&&(oe(fe.ka,we),oe(fe.ka,fe.i),fe.h.i.length=0,ce(fe.i),fe.i.length=0),fe.l.ra()}}function Zc(fe,we,Fe){var We=Fe instanceof zi?Hr(Fe):new zi(Fe);if(We.g!="")we&&(We.g=we+"."+We.g),Pr(We,We.s);else{var Lt=K.location;We=Lt.protocol,we=we?we+"."+Lt.hostname:Lt.hostname,Lt=+Lt.port;var Sn=new zi(null);We&&qi(Sn,We),we&&(Sn.g=we),Lt&&Pr(Sn,Lt),Fe&&(Sn.l=Fe),We=Sn}return Fe=fe.D,we=fe.ya,Fe&&we&&Si(We,Fe,we),Si(We,"VER",fe.la),Wo(fe,We),We}function da(fe,we,Fe){if(we&&!fe.J)throw Error("Can't create secondary domain capable XhrIo object.");return we=fe.Ca&&!fe.pa?new Yi(new Go({eb:Fe})):new Yi(fe.pa),we.Ha(fe.J),we}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function rc(){}r=rc.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function sc(){}sc.prototype.g=function(fe,we){return new ys(fe,we)};function ys(fe,we){an.call(this),this.g=new Al(we),this.l=fe,this.h=we&&we.messageUrlParams||null,fe=we&&we.messageHeaders||null,we&&we.clientProtocolHeaderRequired&&(fe?fe["X-Client-Protocol"]="webchannel":fe={"X-Client-Protocol":"webchannel"}),this.g.o=fe,fe=we&&we.initMessageHeaders||null,we&&we.messageContentType&&(fe?fe["X-WebChannel-Content-Type"]=we.messageContentType:fe={"X-WebChannel-Content-Type":we.messageContentType}),we&&we.va&&(fe?fe["X-WebChannel-Client-Profile"]=we.va:fe={"X-WebChannel-Client-Profile":we.va}),this.g.S=fe,(fe=we&&we.Sb)&&!ge(fe)&&(this.g.m=fe),this.v=we&&we.supportsCrossDomainXhr||!1,this.u=we&&we.sendRawJson||!1,(we=we&&we.httpSessionIdParam)&&!ge(we)&&(this.g.D=we,fe=this.h,fe!==null&&we in fe&&(fe=this.h,we in fe&&delete fe[we])),this.j=new ma(this)}le(ys,an),ys.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ys.prototype.close=function(){tc(this.g)},ys.prototype.o=function(fe){var we=this.g;if(typeof fe=="string"){var Fe={};Fe.__data__=fe,fe=Fe}else this.u&&(Fe={},Fe.__data__=Gn(fe),fe=Fe);we.i.push(new ui(we.Ya++,fe)),we.G==3&&Rl(we)},ys.prototype.N=function(){this.g.l=null,delete this.j,tc(this.g),delete this.g,ys.aa.N.call(this)};function Va(fe){Tn.call(this),fe.__headers__&&(this.headers=fe.__headers__,this.statusCode=fe.__status__,delete fe.__headers__,delete fe.__status__);var we=fe.__sm__;if(we){e:{for(const Fe in we){fe=Fe;break e}fe=void 0}(this.i=fe)&&(fe=this.i,we=we!==null&&fe in we?we[fe]:void 0),this.data=we}else this.data=fe}le(Va,Tn);function pa(){$n.call(this),this.status=1}le(pa,$n);function ma(fe){this.g=fe}le(ma,rc),ma.prototype.ua=function(){Cn(this.g,"a")},ma.prototype.ta=function(fe){Cn(this.g,new Va(fe))},ma.prototype.sa=function(fe){Cn(this.g,new pa)},ma.prototype.ra=function(){Cn(this.g,"b")},sc.prototype.createWebChannel=sc.prototype.g,ys.prototype.send=ys.prototype.o,ys.prototype.open=ys.prototype.m,ys.prototype.close=ys.prototype.close,createWebChannelTransport=function(){return new sc},getStatEventTarget=function(){return Ei()},Event=Hn,Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ji.NO_ERROR=0,ji.TIMEOUT=8,ji.HTTP_ERROR=6,ErrorCode=ji,Vs.COMPLETE="complete",EventType=Vs,Nn.EventType=gn,gn.OPEN="a",gn.CLOSE="b",gn.ERROR="c",gn.MESSAGE="d",an.prototype.listen=an.prototype.K,WebChannel=Nn,Yi.prototype.listenOnce=Yi.prototype.L,Yi.prototype.getLastError=Yi.prototype.Ka,Yi.prototype.getLastErrorCode=Yi.prototype.Ba,Yi.prototype.getStatus=Yi.prototype.Z,Yi.prototype.getResponseJson=Yi.prototype.Oa,Yi.prototype.getResponseText=Yi.prototype.oa,Yi.prototype.send=Yi.prototype.ea,Yi.prototype.setWithCredentials=Yi.prototype.Ha,XhrIo=Yi}).apply(typeof commonjsGlobal<"u"?commonjsGlobal:typeof self<"u"?self:typeof window<"u"?window:{});const S="@firebase/firestore",D="4.7.11";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class User{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}User.UNAUTHENTICATED=new User(null),User.GOOGLE_CREDENTIALS=new User("google-credentials-uid"),User.FIRST_PARTY=new User("first-party-uid"),User.MOCK_USER=new User("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let v="11.6.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C=new Logger("@firebase/firestore");function __PRIVATE_getLogLevel(){return C.logLevel}function __PRIVATE_logDebug(r,...e){if(C.logLevel<=LogLevel.DEBUG){const t=e.map(__PRIVATE_argToString);C.debug(`Firestore (${v}): ${r}`,...t)}}function __PRIVATE_logError(r,...e){if(C.logLevel<=LogLevel.ERROR){const t=e.map(__PRIVATE_argToString);C.error(`Firestore (${v}): ${r}`,...t)}}function __PRIVATE_logWarn(r,...e){if(C.logLevel<=LogLevel.WARN){const t=e.map(__PRIVATE_argToString);C.warn(`Firestore (${v}): ${r}`,...t)}}function __PRIVATE_argToString(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fail(r,e,t){let o="Unexpected state";typeof e=="string"?o=e:t=e,__PRIVATE__fail(r,o,t)}function __PRIVATE__fail(r,e,t){let o=`FIRESTORE (${v}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{o+=" CONTEXT: "+JSON.stringify(t)}catch{o+=" CONTEXT: "+t}throw __PRIVATE_logError(o),new Error(o)}function __PRIVATE_hardAssert(r,e,t,o){let y="Unexpected state";typeof t=="string"?y=t:o=t,r||__PRIVATE__fail(e,y,o)}function __PRIVATE_debugCast(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class FirestoreError extends FirebaseError{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_Deferred{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_OAuthToken{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class __PRIVATE_EmptyAuthCredentialsProvider{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(User.UNAUTHENTICATED))}shutdown(){}}class __PRIVATE_EmulatorAuthCredentialsProvider{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class __PRIVATE_FirebaseAuthCredentialsProvider{constructor(e){this.t=e,this.currentUser=User.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){__PRIVATE_hardAssert(this.o===void 0,42304);let o=this.i;const y=Y=>this.i!==o?(o=this.i,t(Y)):Promise.resolve();let R=new __PRIVATE_Deferred;this.o=()=>{this.i++,this.currentUser=this.u(),R.resolve(),R=new __PRIVATE_Deferred,e.enqueueRetryable(()=>y(this.currentUser))};const G=()=>{const Y=R;e.enqueueRetryable(async()=>{await Y.promise,await y(this.currentUser)})},K=Y=>{__PRIVATE_logDebug("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=Y,this.o&&(this.auth.addAuthTokenListener(this.o),G())};this.t.onInit(Y=>K(Y)),setTimeout(()=>{if(!this.auth){const Y=this.t.getImmediate({optional:!0});Y?K(Y):(__PRIVATE_logDebug("FirebaseAuthCredentialsProvider","Auth not yet detected"),R.resolve(),R=new __PRIVATE_Deferred)}},0),G()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(o=>this.i!==e?(__PRIVATE_logDebug("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(__PRIVATE_hardAssert(typeof o.accessToken=="string",31837,{l:o}),new __PRIVATE_OAuthToken(o.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return __PRIVATE_hardAssert(e===null||typeof e=="string",2055,{h:e}),new User(e)}}class __PRIVATE_FirstPartyToken{constructor(e,t,o){this.P=e,this.T=t,this.I=o,this.type="FirstParty",this.user=User.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class __PRIVATE_FirstPartyAuthCredentialsProvider{constructor(e,t,o){this.P=e,this.T=t,this.I=o}getToken(){return Promise.resolve(new __PRIVATE_FirstPartyToken(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(User.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class AppCheckToken{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class __PRIVATE_FirebaseAppCheckTokenProvider{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,_isFirebaseServerApp(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){__PRIVATE_hardAssert(this.o===void 0,3512);const o=R=>{R.error!=null&&__PRIVATE_logDebug("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${R.error.message}`);const G=R.token!==this.m;return this.m=R.token,__PRIVATE_logDebug("FirebaseAppCheckTokenProvider",`Received ${G?"new":"existing"} token.`),G?t(R.token):Promise.resolve()};this.o=R=>{e.enqueueRetryable(()=>o(R))};const y=R=>{__PRIVATE_logDebug("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=R,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(R=>y(R)),setTimeout(()=>{if(!this.appCheck){const R=this.V.getImmediate({optional:!0});R?y(R):__PRIVATE_logDebug("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new AppCheckToken(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(__PRIVATE_hardAssert(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new AppCheckToken(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_randomBytes(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let o=0;o<r;o++)t[o]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_newTextEncoder(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_AutoId{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let o="";for(;o.length<20;){const y=__PRIVATE_randomBytes(40);for(let R=0;R<y.length;++R)o.length<20&&y[R]<t&&(o+=e.charAt(y[R]%62))}return o}}function __PRIVATE_primitiveComparator(r,e){return r<e?-1:r>e?1:0}function __PRIVATE_compareUtf8Strings(r,e){let t=0;for(;t<r.length&&t<e.length;){const o=r.codePointAt(t),y=e.codePointAt(t);if(o!==y){if(o<128&&y<128)return __PRIVATE_primitiveComparator(o,y);{const R=__PRIVATE_newTextEncoder(),G=__PRIVATE_compareByteArrays$1(R.encode(__PRIVATE_getUtf8SafeSubstring(r,t)),R.encode(__PRIVATE_getUtf8SafeSubstring(e,t)));return G!==0?G:__PRIVATE_primitiveComparator(o,y)}}t+=o>65535?2:1}return __PRIVATE_primitiveComparator(r.length,e.length)}function __PRIVATE_getUtf8SafeSubstring(r,e){return r.codePointAt(e)>65535?r.substring(e,e+2):r.substring(e,e+1)}function __PRIVATE_compareByteArrays$1(r,e){for(let t=0;t<r.length&&t<e.length;++t)if(r[t]!==e[t])return __PRIVATE_primitiveComparator(r[t],e[t]);return __PRIVATE_primitiveComparator(r.length,e.length)}function __PRIVATE_arrayEquals(r,e,t){return r.length===e.length&&r.every((o,y)=>t(o,e[y]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M=-62135596800,x=1e6;class Timestamp{static now(){return Timestamp.fromMillis(Date.now())}static fromDate(e){return Timestamp.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),o=Math.floor((e-1e3*t)*x);return new Timestamp(t,o)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new FirestoreError(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new FirestoreError(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<M)throw new FirestoreError(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new FirestoreError(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/x}_compareTo(e){return this.seconds===e.seconds?__PRIVATE_primitiveComparator(this.nanoseconds,e.nanoseconds):__PRIVATE_primitiveComparator(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-M;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SnapshotVersion{static fromTimestamp(e){return new SnapshotVersion(e)}static min(){return new SnapshotVersion(new Timestamp(0,0))}static max(){return new SnapshotVersion(new Timestamp(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O="__name__";class BasePath{constructor(e,t,o){t===void 0?t=0:t>e.length&&fail(637,{offset:t,range:e.length}),o===void 0?o=e.length-t:o>e.length-t&&fail(1746,{length:o,range:e.length-t}),this.segments=e,this.offset=t,this.len=o}get length(){return this.len}isEqual(e){return BasePath.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof BasePath?e.forEach(o=>{t.push(o)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,o=this.limit();t<o;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const o=Math.min(e.length,t.length);for(let y=0;y<o;y++){const R=BasePath.compareSegments(e.get(y),t.get(y));if(R!==0)return R}return __PRIVATE_primitiveComparator(e.length,t.length)}static compareSegments(e,t){const o=BasePath.isNumericId(e),y=BasePath.isNumericId(t);return o&&!y?-1:!o&&y?1:o&&y?BasePath.extractNumericId(e).compare(BasePath.extractNumericId(t)):__PRIVATE_compareUtf8Strings(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Integer.fromString(e.substring(4,e.length-2))}}class ResourcePath extends BasePath{construct(e,t,o){return new ResourcePath(e,t,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const o of e){if(o.indexOf("//")>=0)throw new FirestoreError(F.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);t.push(...o.split("/").filter(y=>y.length>0))}return new ResourcePath(t)}static emptyPath(){return new ResourcePath([])}}const N=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class FieldPath$1 extends BasePath{construct(e,t,o){return new FieldPath$1(e,t,o)}static isValidIdentifier(e){return N.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),FieldPath$1.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===O}static keyField(){return new FieldPath$1([O])}static fromServerFormat(e){const t=[];let o="",y=0;const R=()=>{if(o.length===0)throw new FirestoreError(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(o),o=""};let G=!1;for(;y<e.length;){const K=e[y];if(K==="\\"){if(y+1===e.length)throw new FirestoreError(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const Y=e[y+1];if(Y!=="\\"&&Y!=="."&&Y!=="`")throw new FirestoreError(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);o+=Y,y+=2}else K==="`"?(G=!G,y++):K!=="."||G?(o+=K,y++):(R(),y++)}if(R(),G)throw new FirestoreError(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new FieldPath$1(t)}static emptyPath(){return new FieldPath$1([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DocumentKey{constructor(e){this.path=e}static fromPath(e){return new DocumentKey(ResourcePath.fromString(e))}static fromName(e){return new DocumentKey(ResourcePath.fromString(e).popFirst(5))}static empty(){return new DocumentKey(ResourcePath.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ResourcePath.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ResourcePath.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new DocumentKey(new ResourcePath(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B=-1;function __PRIVATE_newIndexOffsetSuccessorFromReadTime(r,e){const t=r.toTimestamp().seconds,o=r.toTimestamp().nanoseconds+1,y=SnapshotVersion.fromTimestamp(o===1e9?new Timestamp(t+1,0):new Timestamp(t,o));return new IndexOffset(y,DocumentKey.empty(),e)}function __PRIVATE_newIndexOffsetFromDocument(r){return new IndexOffset(r.readTime,r.key,B)}class IndexOffset{constructor(e,t,o){this.readTime=e,this.documentKey=t,this.largestBatchId=o}static min(){return new IndexOffset(SnapshotVersion.min(),DocumentKey.empty(),B)}static max(){return new IndexOffset(SnapshotVersion.max(),DocumentKey.empty(),B)}}function __PRIVATE_indexOffsetComparator(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=DocumentKey.comparator(r.documentKey,e.documentKey),t!==0?t:__PRIVATE_primitiveComparator(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class PersistenceTransaction{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function __PRIVATE_ignoreIfPrimaryLeaseLoss(r){if(r.code!==F.FAILED_PRECONDITION||r.message!==L)throw r;__PRIVATE_logDebug("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PersistencePromise{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&fail(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new PersistencePromise((o,y)=>{this.nextCallback=R=>{this.wrapSuccess(e,R).next(o,y)},this.catchCallback=R=>{this.wrapFailure(t,R).next(o,y)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof PersistencePromise?t:PersistencePromise.resolve(t)}catch(t){return PersistencePromise.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):PersistencePromise.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):PersistencePromise.reject(t)}static resolve(e){return new PersistencePromise((t,o)=>{t(e)})}static reject(e){return new PersistencePromise((t,o)=>{o(e)})}static waitFor(e){return new PersistencePromise((t,o)=>{let y=0,R=0,G=!1;e.forEach(K=>{++y,K.next(()=>{++R,G&&R===y&&t()},Y=>o(Y))}),G=!0,R===y&&t()})}static or(e){let t=PersistencePromise.resolve(!1);for(const o of e)t=t.next(y=>y?PersistencePromise.resolve(y):o());return t}static forEach(e,t){const o=[];return e.forEach((y,R)=>{o.push(t.call(this,y,R))}),this.waitFor(o)}static mapArray(e,t){return new PersistencePromise((o,y)=>{const R=e.length,G=new Array(R);let K=0;for(let Y=0;Y<R;Y++){const Q=Y;t(e[Q]).next(ee=>{G[Q]=ee,++K,K===R&&o(G)},ee=>y(ee))}})}static doWhile(e,t){return new PersistencePromise((o,y)=>{const R=()=>{e()===!0?t().next(()=>{R()},y):o()};R()})}}function __PRIVATE_getAndroidVersion(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function __PRIVATE_isIndexedDbTransactionError(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_ListenSequence{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=o=>this.ue(o),this.ce=o=>t.writeSequenceNumber(o))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}__PRIVATE_ListenSequence.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $=-1;function __PRIVATE_isNullOrUndefined(r){return r==null}function __PRIVATE_isNegativeZero(r){return r===0&&1/r==-1/0}function isSafeInteger(r){return typeof r=="number"&&Number.isInteger(r)&&!__PRIVATE_isNegativeZero(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U="";function __PRIVATE_encodeResourcePath(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=__PRIVATE_encodeSeparator(e)),e=__PRIVATE_encodeSegment(r.get(t),e);return __PRIVATE_encodeSeparator(e)}function __PRIVATE_encodeSegment(r,e){let t=e;const o=r.length;for(let y=0;y<o;y++){const R=r.charAt(y);switch(R){case"\0":t+="";break;case U:t+="";break;default:t+=R}}return t}function __PRIVATE_encodeSeparator(r){return r+U+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_objectSize(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function forEach(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function isEmpty(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SortedMap{constructor(e,t){this.comparator=e,this.root=t||LLRBNode.EMPTY}insert(e,t){return new SortedMap(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,LLRBNode.BLACK,null,null))}remove(e){return new SortedMap(this.comparator,this.root.remove(e,this.comparator).copy(null,null,LLRBNode.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const o=this.comparator(e,t.key);if(o===0)return t.value;o<0?t=t.left:o>0&&(t=t.right)}return null}indexOf(e){let t=0,o=this.root;for(;!o.isEmpty();){const y=this.comparator(e,o.key);if(y===0)return t+o.left.size;y<0?o=o.left:(t+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,o)=>(e(t,o),!1))}toString(){const e=[];return this.inorderTraversal((t,o)=>(e.push(`${t}:${o}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new SortedMapIterator(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new SortedMapIterator(this.root,e,this.comparator,!1)}getReverseIterator(){return new SortedMapIterator(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new SortedMapIterator(this.root,e,this.comparator,!0)}}class SortedMapIterator{constructor(e,t,o,y){this.isReverse=y,this.nodeStack=[];let R=1;for(;!e.isEmpty();)if(R=t?o(e.key,t):1,t&&y&&(R*=-1),R<0)e=this.isReverse?e.left:e.right;else{if(R===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class LLRBNode{constructor(e,t,o,y,R){this.key=e,this.value=t,this.color=o??LLRBNode.RED,this.left=y??LLRBNode.EMPTY,this.right=R??LLRBNode.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,o,y,R){return new LLRBNode(e??this.key,t??this.value,o??this.color,y??this.left,R??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,o){let y=this;const R=o(e,y.key);return y=R<0?y.copy(null,null,null,y.left.insert(e,t,o),null):R===0?y.copy(null,t,null,null,null):y.copy(null,null,null,null,y.right.insert(e,t,o)),y.fixUp()}removeMin(){if(this.left.isEmpty())return LLRBNode.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let o,y=this;if(t(e,y.key)<0)y.left.isEmpty()||y.left.isRed()||y.left.left.isRed()||(y=y.moveRedLeft()),y=y.copy(null,null,null,y.left.remove(e,t),null);else{if(y.left.isRed()&&(y=y.rotateRight()),y.right.isEmpty()||y.right.isRed()||y.right.left.isRed()||(y=y.moveRedRight()),t(e,y.key)===0){if(y.right.isEmpty())return LLRBNode.EMPTY;o=y.right.min(),y=y.copy(o.key,o.value,null,null,y.right.removeMin())}y=y.copy(null,null,null,null,y.right.remove(e,t))}return y.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,LLRBNode.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,LLRBNode.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw fail(43730,{key:this.key,value:this.value});if(this.right.isRed())throw fail(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw fail(27949);return e+(this.isRed()?0:1)}}LLRBNode.EMPTY=null,LLRBNode.RED=!0,LLRBNode.BLACK=!1;LLRBNode.EMPTY=new class{constructor(){this.size=0}get key(){throw fail(57766)}get value(){throw fail(16141)}get color(){throw fail(16727)}get left(){throw fail(29726)}get right(){throw fail(36894)}copy(e,t,o,y,R){return this}insert(e,t,o){return new LLRBNode(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SortedSet{constructor(e){this.comparator=e,this.data=new SortedMap(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,o)=>(e(t),!1))}forEachInRange(e,t){const o=this.data.getIteratorFrom(e[0]);for(;o.hasNext();){const y=o.getNext();if(this.comparator(y.key,e[1])>=0)return;t(y.key)}}forEachWhile(e,t){let o;for(o=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();o.hasNext();)if(!e(o.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new SortedSetIterator(this.data.getIterator())}getIteratorFrom(e){return new SortedSetIterator(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(o=>{t=t.add(o)}),t}isEqual(e){if(!(e instanceof SortedSet)||this.size!==e.size)return!1;const t=this.data.getIterator(),o=e.data.getIterator();for(;t.hasNext();){const y=t.getNext().key,R=o.getNext().key;if(this.comparator(y,R)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new SortedSet(this.comparator);return t.data=e,t}}class SortedSetIterator{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FieldMask{constructor(e){this.fields=e,e.sort(FieldPath$1.comparator)}static empty(){return new FieldMask([])}unionWith(e){let t=new SortedSet(FieldPath$1.comparator);for(const o of this.fields)t=t.add(o);for(const o of e)t=t.add(o);return new FieldMask(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return __PRIVATE_arrayEquals(this.fields,e.fields,(t,o)=>t.isEqual(o))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_Base64DecodeError extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ByteString{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(y){try{return atob(y)}catch(R){throw typeof DOMException<"u"&&R instanceof DOMException?new __PRIVATE_Base64DecodeError("Invalid base64 string: "+R):R}}(e);return new ByteString(t)}static fromUint8Array(e){const t=function(y){let R="";for(let G=0;G<y.length;++G)R+=String.fromCharCode(y[G]);return R}(e);return new ByteString(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const o=new Uint8Array(t.length);for(let y=0;y<t.length;y++)o[y]=t.charCodeAt(y);return o}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return __PRIVATE_primitiveComparator(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ByteString.EMPTY_BYTE_STRING=new ByteString("");const Xe=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function __PRIVATE_normalizeTimestamp(r){if(__PRIVATE_hardAssert(!!r,39018),typeof r=="string"){let e=0;const t=Xe.exec(r);if(__PRIVATE_hardAssert(!!t,46558,{timestamp:r}),t[1]){let y=t[1];y=(y+"000000000").substr(0,9),e=Number(y)}const o=new Date(r);return{seconds:Math.floor(o.getTime()/1e3),nanos:e}}return{seconds:__PRIVATE_normalizeNumber(r.seconds),nanos:__PRIVATE_normalizeNumber(r.nanos)}}function __PRIVATE_normalizeNumber(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function __PRIVATE_normalizeByteString(r){return typeof r=="string"?ByteString.fromBase64String(r):ByteString.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const et="server_timestamp",tt="__type__",nt="__previous_value__",rt="__local_write_time__";function __PRIVATE_isServerTimestamp(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[tt])===null||t===void 0?void 0:t.stringValue)===et}function __PRIVATE_getPreviousValue(r){const e=r.mapValue.fields[nt];return __PRIVATE_isServerTimestamp(e)?__PRIVATE_getPreviousValue(e):e}function __PRIVATE_getLocalWriteTime(r){const e=__PRIVATE_normalizeTimestamp(r.mapValue.fields[rt].timestampValue);return new Timestamp(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DatabaseInfo{constructor(e,t,o,y,R,G,K,Y,Q){this.databaseId=e,this.appId=t,this.persistenceKey=o,this.host=y,this.ssl=R,this.forceLongPolling=G,this.autoDetectLongPolling=K,this.longPollingOptions=Y,this.useFetchStreams=Q}}const it="(default)";class DatabaseId{constructor(e,t){this.projectId=e,this.database=t||it}static empty(){return new DatabaseId("","")}get isDefaultDatabase(){return this.database===it}isEqual(e){return e instanceof DatabaseId&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const st="__type__",ot="__max__",_t={mapValue:{}},at="__vector__",ut="value";function __PRIVATE_typeOrder(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?__PRIVATE_isServerTimestamp(r)?4:__PRIVATE_isMaxValue(r)?9007199254740991:__PRIVATE_isVectorValue(r)?10:11:fail(28295,{value:r})}function __PRIVATE_valueEquals(r,e){if(r===e)return!0;const t=__PRIVATE_typeOrder(r);if(t!==__PRIVATE_typeOrder(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return __PRIVATE_getLocalWriteTime(r).isEqual(__PRIVATE_getLocalWriteTime(e));case 3:return function(y,R){if(typeof y.timestampValue=="string"&&typeof R.timestampValue=="string"&&y.timestampValue.length===R.timestampValue.length)return y.timestampValue===R.timestampValue;const G=__PRIVATE_normalizeTimestamp(y.timestampValue),K=__PRIVATE_normalizeTimestamp(R.timestampValue);return G.seconds===K.seconds&&G.nanos===K.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return function(y,R){return __PRIVATE_normalizeByteString(y.bytesValue).isEqual(__PRIVATE_normalizeByteString(R.bytesValue))}(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return function(y,R){return __PRIVATE_normalizeNumber(y.geoPointValue.latitude)===__PRIVATE_normalizeNumber(R.geoPointValue.latitude)&&__PRIVATE_normalizeNumber(y.geoPointValue.longitude)===__PRIVATE_normalizeNumber(R.geoPointValue.longitude)}(r,e);case 2:return function(y,R){if("integerValue"in y&&"integerValue"in R)return __PRIVATE_normalizeNumber(y.integerValue)===__PRIVATE_normalizeNumber(R.integerValue);if("doubleValue"in y&&"doubleValue"in R){const G=__PRIVATE_normalizeNumber(y.doubleValue),K=__PRIVATE_normalizeNumber(R.doubleValue);return G===K?__PRIVATE_isNegativeZero(G)===__PRIVATE_isNegativeZero(K):isNaN(G)&&isNaN(K)}return!1}(r,e);case 9:return __PRIVATE_arrayEquals(r.arrayValue.values||[],e.arrayValue.values||[],__PRIVATE_valueEquals);case 10:case 11:return function(y,R){const G=y.mapValue.fields||{},K=R.mapValue.fields||{};if(__PRIVATE_objectSize(G)!==__PRIVATE_objectSize(K))return!1;for(const Y in G)if(G.hasOwnProperty(Y)&&(K[Y]===void 0||!__PRIVATE_valueEquals(G[Y],K[Y])))return!1;return!0}(r,e);default:return fail(52216,{left:r})}}function __PRIVATE_arrayValueContains(r,e){return(r.values||[]).find(t=>__PRIVATE_valueEquals(t,e))!==void 0}function __PRIVATE_valueCompare(r,e){if(r===e)return 0;const t=__PRIVATE_typeOrder(r),o=__PRIVATE_typeOrder(e);if(t!==o)return __PRIVATE_primitiveComparator(t,o);switch(t){case 0:case 9007199254740991:return 0;case 1:return __PRIVATE_primitiveComparator(r.booleanValue,e.booleanValue);case 2:return function(R,G){const K=__PRIVATE_normalizeNumber(R.integerValue||R.doubleValue),Y=__PRIVATE_normalizeNumber(G.integerValue||G.doubleValue);return K<Y?-1:K>Y?1:K===Y?0:isNaN(K)?isNaN(Y)?0:-1:1}(r,e);case 3:return __PRIVATE_compareTimestamps(r.timestampValue,e.timestampValue);case 4:return __PRIVATE_compareTimestamps(__PRIVATE_getLocalWriteTime(r),__PRIVATE_getLocalWriteTime(e));case 5:return __PRIVATE_compareUtf8Strings(r.stringValue,e.stringValue);case 6:return function(R,G){const K=__PRIVATE_normalizeByteString(R),Y=__PRIVATE_normalizeByteString(G);return K.compareTo(Y)}(r.bytesValue,e.bytesValue);case 7:return function(R,G){const K=R.split("/"),Y=G.split("/");for(let Q=0;Q<K.length&&Q<Y.length;Q++){const ee=__PRIVATE_primitiveComparator(K[Q],Y[Q]);if(ee!==0)return ee}return __PRIVATE_primitiveComparator(K.length,Y.length)}(r.referenceValue,e.referenceValue);case 8:return function(R,G){const K=__PRIVATE_primitiveComparator(__PRIVATE_normalizeNumber(R.latitude),__PRIVATE_normalizeNumber(G.latitude));return K!==0?K:__PRIVATE_primitiveComparator(__PRIVATE_normalizeNumber(R.longitude),__PRIVATE_normalizeNumber(G.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return __PRIVATE_compareArrays(r.arrayValue,e.arrayValue);case 10:return function(R,G){var K,Y,Q,ee;const ie=R.fields||{},re=G.fields||{},se=(K=ie[ut])===null||K===void 0?void 0:K.arrayValue,le=(Y=re[ut])===null||Y===void 0?void 0:Y.arrayValue,ce=__PRIVATE_primitiveComparator(((Q=se==null?void 0:se.values)===null||Q===void 0?void 0:Q.length)||0,((ee=le==null?void 0:le.values)===null||ee===void 0?void 0:ee.length)||0);return ce!==0?ce:__PRIVATE_compareArrays(se,le)}(r.mapValue,e.mapValue);case 11:return function(R,G){if(R===_t.mapValue&&G===_t.mapValue)return 0;if(R===_t.mapValue)return 1;if(G===_t.mapValue)return-1;const K=R.fields||{},Y=Object.keys(K),Q=G.fields||{},ee=Object.keys(Q);Y.sort(),ee.sort();for(let ie=0;ie<Y.length&&ie<ee.length;++ie){const re=__PRIVATE_compareUtf8Strings(Y[ie],ee[ie]);if(re!==0)return re;const se=__PRIVATE_valueCompare(K[Y[ie]],Q[ee[ie]]);if(se!==0)return se}return __PRIVATE_primitiveComparator(Y.length,ee.length)}(r.mapValue,e.mapValue);default:throw fail(23264,{Pe:t})}}function __PRIVATE_compareTimestamps(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return __PRIVATE_primitiveComparator(r,e);const t=__PRIVATE_normalizeTimestamp(r),o=__PRIVATE_normalizeTimestamp(e),y=__PRIVATE_primitiveComparator(t.seconds,o.seconds);return y!==0?y:__PRIVATE_primitiveComparator(t.nanos,o.nanos)}function __PRIVATE_compareArrays(r,e){const t=r.values||[],o=e.values||[];for(let y=0;y<t.length&&y<o.length;++y){const R=__PRIVATE_valueCompare(t[y],o[y]);if(R)return R}return __PRIVATE_primitiveComparator(t.length,o.length)}function canonicalId(r){return __PRIVATE_canonifyValue(r)}function __PRIVATE_canonifyValue(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(t){const o=__PRIVATE_normalizeTimestamp(t);return`time(${o.seconds},${o.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?function(t){return __PRIVATE_normalizeByteString(t).toBase64()}(r.bytesValue):"referenceValue"in r?function(t){return DocumentKey.fromName(t).toString()}(r.referenceValue):"geoPointValue"in r?function(t){return`geo(${t.latitude},${t.longitude})`}(r.geoPointValue):"arrayValue"in r?function(t){let o="[",y=!0;for(const R of t.values||[])y?y=!1:o+=",",o+=__PRIVATE_canonifyValue(R);return o+"]"}(r.arrayValue):"mapValue"in r?function(t){const o=Object.keys(t.fields||{}).sort();let y="{",R=!0;for(const G of o)R?R=!1:y+=",",y+=`${G}:${__PRIVATE_canonifyValue(t.fields[G])}`;return y+"}"}(r.mapValue):fail(61005,{value:r})}function __PRIVATE_estimateByteSize(r){switch(__PRIVATE_typeOrder(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=__PRIVATE_getPreviousValue(r);return e?16+__PRIVATE_estimateByteSize(e):16;case 5:return 2*r.stringValue.length;case 6:return __PRIVATE_normalizeByteString(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return function(o){return(o.values||[]).reduce((y,R)=>y+__PRIVATE_estimateByteSize(R),0)}(r.arrayValue);case 10:case 11:return function(o){let y=0;return forEach(o.fields,(R,G)=>{y+=R.length+__PRIVATE_estimateByteSize(G)}),y}(r.mapValue);default:throw fail(13486,{value:r})}}function isInteger(r){return!!r&&"integerValue"in r}function isArray(r){return!!r&&"arrayValue"in r}function __PRIVATE_isNullValue(r){return!!r&&"nullValue"in r}function __PRIVATE_isNanValue(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function __PRIVATE_isMapValue(r){return!!r&&"mapValue"in r}function __PRIVATE_isVectorValue(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[st])===null||t===void 0?void 0:t.stringValue)===at}function __PRIVATE_deepClone(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return forEach(r.mapValue.fields,(t,o)=>e.mapValue.fields[t]=__PRIVATE_deepClone(o)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=__PRIVATE_deepClone(r.arrayValue.values[t]);return e}return Object.assign({},r)}function __PRIVATE_isMaxValue(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===ot}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ObjectValue{constructor(e){this.value=e}static empty(){return new ObjectValue({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let o=0;o<e.length-1;++o)if(t=(t.mapValue.fields||{})[e.get(o)],!__PRIVATE_isMapValue(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=__PRIVATE_deepClone(t)}setAll(e){let t=FieldPath$1.emptyPath(),o={},y=[];e.forEach((G,K)=>{if(!t.isImmediateParentOf(K)){const Y=this.getFieldsMap(t);this.applyChanges(Y,o,y),o={},y=[],t=K.popLast()}G?o[K.lastSegment()]=__PRIVATE_deepClone(G):y.push(K.lastSegment())});const R=this.getFieldsMap(t);this.applyChanges(R,o,y)}delete(e){const t=this.field(e.popLast());__PRIVATE_isMapValue(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return __PRIVATE_valueEquals(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let o=0;o<e.length;++o){let y=t.mapValue.fields[e.get(o)];__PRIVATE_isMapValue(y)&&y.mapValue.fields||(y={mapValue:{fields:{}}},t.mapValue.fields[e.get(o)]=y),t=y}return t.mapValue.fields}applyChanges(e,t,o){forEach(t,(y,R)=>e[y]=R);for(const y of o)delete e[y]}clone(){return new ObjectValue(__PRIVATE_deepClone(this.value))}}function __PRIVATE_extractFieldMask(r){const e=[];return forEach(r.fields,(t,o)=>{const y=new FieldPath$1([t]);if(__PRIVATE_isMapValue(o)){const R=__PRIVATE_extractFieldMask(o.mapValue).fields;if(R.length===0)e.push(y);else for(const G of R)e.push(y.child(G))}else e.push(y)}),new FieldMask(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MutableDocument{constructor(e,t,o,y,R,G,K){this.key=e,this.documentType=t,this.version=o,this.readTime=y,this.createTime=R,this.data=G,this.documentState=K}static newInvalidDocument(e){return new MutableDocument(e,0,SnapshotVersion.min(),SnapshotVersion.min(),SnapshotVersion.min(),ObjectValue.empty(),0)}static newFoundDocument(e,t,o,y){return new MutableDocument(e,1,t,SnapshotVersion.min(),o,y,0)}static newNoDocument(e,t){return new MutableDocument(e,2,t,SnapshotVersion.min(),SnapshotVersion.min(),ObjectValue.empty(),0)}static newUnknownDocument(e,t){return new MutableDocument(e,3,t,SnapshotVersion.min(),SnapshotVersion.min(),ObjectValue.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(SnapshotVersion.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ObjectValue.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ObjectValue.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=SnapshotVersion.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof MutableDocument&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new MutableDocument(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bound{constructor(e,t){this.position=e,this.inclusive=t}}function __PRIVATE_boundCompareToDocument(r,e,t){let o=0;for(let y=0;y<r.position.length;y++){const R=e[y],G=r.position[y];if(R.field.isKeyField()?o=DocumentKey.comparator(DocumentKey.fromName(G.referenceValue),t.key):o=__PRIVATE_valueCompare(G,t.data.field(R.field)),R.dir==="desc"&&(o*=-1),o!==0)break}return o}function __PRIVATE_boundEquals(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!__PRIVATE_valueEquals(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OrderBy{constructor(e,t="asc"){this.field=e,this.dir=t}}function __PRIVATE_orderByEquals(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Filter{}class FieldFilter extends Filter{constructor(e,t,o){super(),this.field=e,this.op=t,this.value=o}static create(e,t,o){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,o):new __PRIVATE_KeyFieldFilter(e,t,o):t==="array-contains"?new __PRIVATE_ArrayContainsFilter(e,o):t==="in"?new __PRIVATE_InFilter(e,o):t==="not-in"?new __PRIVATE_NotInFilter(e,o):t==="array-contains-any"?new __PRIVATE_ArrayContainsAnyFilter(e,o):new FieldFilter(e,t,o)}static createKeyFieldInFilter(e,t,o){return t==="in"?new __PRIVATE_KeyFieldInFilter(e,o):new __PRIVATE_KeyFieldNotInFilter(e,o)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(__PRIVATE_valueCompare(t,this.value)):t!==null&&__PRIVATE_typeOrder(this.value)===__PRIVATE_typeOrder(t)&&this.matchesComparison(__PRIVATE_valueCompare(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return fail(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class CompositeFilter extends Filter{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new CompositeFilter(e,t)}matches(e){return __PRIVATE_compositeFilterIsConjunction(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function __PRIVATE_compositeFilterIsConjunction(r){return r.op==="and"}function __PRIVATE_compositeFilterIsFlatConjunction(r){return __PRIVATE_compositeFilterIsFlat(r)&&__PRIVATE_compositeFilterIsConjunction(r)}function __PRIVATE_compositeFilterIsFlat(r){for(const e of r.filters)if(e instanceof CompositeFilter)return!1;return!0}function __PRIVATE_canonifyFilter(r){if(r instanceof FieldFilter)return r.field.canonicalString()+r.op.toString()+canonicalId(r.value);if(__PRIVATE_compositeFilterIsFlatConjunction(r))return r.filters.map(e=>__PRIVATE_canonifyFilter(e)).join(",");{const e=r.filters.map(t=>__PRIVATE_canonifyFilter(t)).join(",");return`${r.op}(${e})`}}function __PRIVATE_filterEquals(r,e){return r instanceof FieldFilter?function(o,y){return y instanceof FieldFilter&&o.op===y.op&&o.field.isEqual(y.field)&&__PRIVATE_valueEquals(o.value,y.value)}(r,e):r instanceof CompositeFilter?function(o,y){return y instanceof CompositeFilter&&o.op===y.op&&o.filters.length===y.filters.length?o.filters.reduce((R,G,K)=>R&&__PRIVATE_filterEquals(G,y.filters[K]),!0):!1}(r,e):void fail(19439)}function __PRIVATE_stringifyFilter(r){return r instanceof FieldFilter?function(t){return`${t.field.canonicalString()} ${t.op} ${canonicalId(t.value)}`}(r):r instanceof CompositeFilter?function(t){return t.op.toString()+" {"+t.getFilters().map(__PRIVATE_stringifyFilter).join(" ,")+"}"}(r):"Filter"}class __PRIVATE_KeyFieldFilter extends FieldFilter{constructor(e,t,o){super(e,t,o),this.key=DocumentKey.fromName(o.referenceValue)}matches(e){const t=DocumentKey.comparator(e.key,this.key);return this.matchesComparison(t)}}class __PRIVATE_KeyFieldInFilter extends FieldFilter{constructor(e,t){super(e,"in",t),this.keys=__PRIVATE_extractDocumentKeysFromArrayValue("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class __PRIVATE_KeyFieldNotInFilter extends FieldFilter{constructor(e,t){super(e,"not-in",t),this.keys=__PRIVATE_extractDocumentKeysFromArrayValue("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function __PRIVATE_extractDocumentKeysFromArrayValue(r,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(o=>DocumentKey.fromName(o.referenceValue))}class __PRIVATE_ArrayContainsFilter extends FieldFilter{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return isArray(t)&&__PRIVATE_arrayValueContains(t.arrayValue,this.value)}}class __PRIVATE_InFilter extends FieldFilter{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&__PRIVATE_arrayValueContains(this.value.arrayValue,t)}}class __PRIVATE_NotInFilter extends FieldFilter{constructor(e,t){super(e,"not-in",t)}matches(e){if(__PRIVATE_arrayValueContains(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!__PRIVATE_arrayValueContains(this.value.arrayValue,t)}}class __PRIVATE_ArrayContainsAnyFilter extends FieldFilter{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!isArray(t)||!t.arrayValue.values)&&t.arrayValue.values.some(o=>__PRIVATE_arrayValueContains(this.value.arrayValue,o))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_TargetImpl{constructor(e,t=null,o=[],y=[],R=null,G=null,K=null){this.path=e,this.collectionGroup=t,this.orderBy=o,this.filters=y,this.limit=R,this.startAt=G,this.endAt=K,this.Ie=null}}function __PRIVATE_newTarget(r,e=null,t=[],o=[],y=null,R=null,G=null){return new __PRIVATE_TargetImpl(r,e,t,o,y,R,G)}function __PRIVATE_canonifyTarget(r){const e=__PRIVATE_debugCast(r);if(e.Ie===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(o=>__PRIVATE_canonifyFilter(o)).join(","),t+="|ob:",t+=e.orderBy.map(o=>function(R){return R.field.canonicalString()+R.dir}(o)).join(","),__PRIVATE_isNullOrUndefined(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(o=>canonicalId(o)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(o=>canonicalId(o)).join(",")),e.Ie=t}return e.Ie}function __PRIVATE_targetEquals(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!__PRIVATE_orderByEquals(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!__PRIVATE_filterEquals(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!__PRIVATE_boundEquals(r.startAt,e.startAt)&&__PRIVATE_boundEquals(r.endAt,e.endAt)}function __PRIVATE_targetIsDocumentTarget(r){return DocumentKey.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_QueryImpl{constructor(e,t=null,o=[],y=[],R=null,G="F",K=null,Y=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=o,this.filters=y,this.limit=R,this.limitType=G,this.startAt=K,this.endAt=Y,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function __PRIVATE_newQuery(r,e,t,o,y,R,G,K){return new __PRIVATE_QueryImpl(r,e,t,o,y,R,G,K)}function __PRIVATE_newQueryForPath(r){return new __PRIVATE_QueryImpl(r)}function __PRIVATE_queryMatchesAllDocuments(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function __PRIVATE_isCollectionGroupQuery(r){return r.collectionGroup!==null}function __PRIVATE_queryNormalizedOrderBy(r){const e=__PRIVATE_debugCast(r);if(e.Ee===null){e.Ee=[];const t=new Set;for(const R of e.explicitOrderBy)e.Ee.push(R),t.add(R.field.canonicalString());const o=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(G){let K=new SortedSet(FieldPath$1.comparator);return G.filters.forEach(Y=>{Y.getFlattenedFilters().forEach(Q=>{Q.isInequality()&&(K=K.add(Q.field))})}),K})(e).forEach(R=>{t.has(R.canonicalString())||R.isKeyField()||e.Ee.push(new OrderBy(R,o))}),t.has(FieldPath$1.keyField().canonicalString())||e.Ee.push(new OrderBy(FieldPath$1.keyField(),o))}return e.Ee}function __PRIVATE_queryToTarget(r){const e=__PRIVATE_debugCast(r);return e.de||(e.de=__PRIVATE__queryToTarget(e,__PRIVATE_queryNormalizedOrderBy(r))),e.de}function __PRIVATE__queryToTarget(r,e){if(r.limitType==="F")return __PRIVATE_newTarget(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map(y=>{const R=y.dir==="desc"?"asc":"desc";return new OrderBy(y.field,R)});const t=r.endAt?new Bound(r.endAt.position,r.endAt.inclusive):null,o=r.startAt?new Bound(r.startAt.position,r.startAt.inclusive):null;return __PRIVATE_newTarget(r.path,r.collectionGroup,e,r.filters,r.limit,t,o)}}function __PRIVATE_queryWithLimit(r,e,t){return new __PRIVATE_QueryImpl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function __PRIVATE_queryEquals(r,e){return __PRIVATE_targetEquals(__PRIVATE_queryToTarget(r),__PRIVATE_queryToTarget(e))&&r.limitType===e.limitType}function __PRIVATE_canonifyQuery(r){return`${__PRIVATE_canonifyTarget(__PRIVATE_queryToTarget(r))}|lt:${r.limitType}`}function __PRIVATE_stringifyQuery(r){return`Query(target=${function(t){let o=t.path.canonicalString();return t.collectionGroup!==null&&(o+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(o+=`, filters: [${t.filters.map(y=>__PRIVATE_stringifyFilter(y)).join(", ")}]`),__PRIVATE_isNullOrUndefined(t.limit)||(o+=", limit: "+t.limit),t.orderBy.length>0&&(o+=`, orderBy: [${t.orderBy.map(y=>function(G){return`${G.field.canonicalString()} (${G.dir})`}(y)).join(", ")}]`),t.startAt&&(o+=", startAt: ",o+=t.startAt.inclusive?"b:":"a:",o+=t.startAt.position.map(y=>canonicalId(y)).join(",")),t.endAt&&(o+=", endAt: ",o+=t.endAt.inclusive?"a:":"b:",o+=t.endAt.position.map(y=>canonicalId(y)).join(",")),`Target(${o})`}(__PRIVATE_queryToTarget(r))}; limitType=${r.limitType})`}function __PRIVATE_queryMatches(r,e){return e.isFoundDocument()&&function(o,y){const R=y.key.path;return o.collectionGroup!==null?y.key.hasCollectionId(o.collectionGroup)&&o.path.isPrefixOf(R):DocumentKey.isDocumentKey(o.path)?o.path.isEqual(R):o.path.isImmediateParentOf(R)}(r,e)&&function(o,y){for(const R of __PRIVATE_queryNormalizedOrderBy(o))if(!R.field.isKeyField()&&y.data.field(R.field)===null)return!1;return!0}(r,e)&&function(o,y){for(const R of o.filters)if(!R.matches(y))return!1;return!0}(r,e)&&function(o,y){return!(o.startAt&&!function(G,K,Y){const Q=__PRIVATE_boundCompareToDocument(G,K,Y);return G.inclusive?Q<=0:Q<0}(o.startAt,__PRIVATE_queryNormalizedOrderBy(o),y)||o.endAt&&!function(G,K,Y){const Q=__PRIVATE_boundCompareToDocument(G,K,Y);return G.inclusive?Q>=0:Q>0}(o.endAt,__PRIVATE_queryNormalizedOrderBy(o),y))}(r,e)}function __PRIVATE_queryCollectionGroup(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function __PRIVATE_newQueryComparator(r){return(e,t)=>{let o=!1;for(const y of __PRIVATE_queryNormalizedOrderBy(r)){const R=__PRIVATE_compareDocs(y,e,t);if(R!==0)return R;o=o||y.field.isKeyField()}return 0}}function __PRIVATE_compareDocs(r,e,t){const o=r.field.isKeyField()?DocumentKey.comparator(e.key,t.key):function(R,G,K){const Y=G.data.field(R),Q=K.data.field(R);return Y!==null&&Q!==null?__PRIVATE_valueCompare(Y,Q):fail(42886)}(r.field,e,t);switch(r.dir){case"asc":return o;case"desc":return-1*o;default:return fail(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ObjectMap{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),o=this.inner[t];if(o!==void 0){for(const[y,R]of o)if(this.equalsFn(y,e))return R}}has(e){return this.get(e)!==void 0}set(e,t){const o=this.mapKeyFn(e),y=this.inner[o];if(y===void 0)return this.inner[o]=[[e,t]],void this.innerSize++;for(let R=0;R<y.length;R++)if(this.equalsFn(y[R][0],e))return void(y[R]=[e,t]);y.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),o=this.inner[t];if(o===void 0)return!1;for(let y=0;y<o.length;y++)if(this.equalsFn(o[y][0],e))return o.length===1?delete this.inner[t]:o.splice(y,1),this.innerSize--,!0;return!1}forEach(e){forEach(this.inner,(t,o)=>{for(const[y,R]of o)e(y,R)})}isEmpty(){return isEmpty(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ht=new SortedMap(DocumentKey.comparator);function __PRIVATE_mutableDocumentMap(){return ht}const Pt=new SortedMap(DocumentKey.comparator);function documentMap(...r){let e=Pt;for(const t of r)e=e.insert(t.key,t);return e}function __PRIVATE_convertOverlayedDocumentMapToDocumentMap(r){let e=Pt;return r.forEach((t,o)=>e=e.insert(t,o.overlayedDocument)),e}function __PRIVATE_newOverlayMap(){return __PRIVATE_newDocumentKeyMap()}function __PRIVATE_newMutationMap(){return __PRIVATE_newDocumentKeyMap()}function __PRIVATE_newDocumentKeyMap(){return new ObjectMap(r=>r.toString(),(r,e)=>r.isEqual(e))}const Tt=new SortedMap(DocumentKey.comparator),It=new SortedSet(DocumentKey.comparator);function __PRIVATE_documentKeySet(...r){let e=It;for(const t of r)e=e.add(t);return e}const Et=new SortedSet(__PRIVATE_primitiveComparator);function __PRIVATE_targetIdSet(){return Et}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_toDouble(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:__PRIVATE_isNegativeZero(e)?"-0":e}}function __PRIVATE_toInteger(r){return{integerValue:""+r}}function toNumber(r,e){return isSafeInteger(e)?__PRIVATE_toInteger(e):__PRIVATE_toDouble(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TransformOperation{constructor(){this._=void 0}}function __PRIVATE_applyTransformOperationToLocalView(r,e,t){return r instanceof __PRIVATE_ServerTimestampTransform?function(y,R){const G={fields:{[tt]:{stringValue:et},[rt]:{timestampValue:{seconds:y.seconds,nanos:y.nanoseconds}}}};return R&&__PRIVATE_isServerTimestamp(R)&&(R=__PRIVATE_getPreviousValue(R)),R&&(G.fields[nt]=R),{mapValue:G}}(t,e):r instanceof __PRIVATE_ArrayUnionTransformOperation?__PRIVATE_applyArrayUnionTransformOperation(r,e):r instanceof __PRIVATE_ArrayRemoveTransformOperation?__PRIVATE_applyArrayRemoveTransformOperation(r,e):function(y,R){const G=__PRIVATE_computeTransformOperationBaseValue(y,R),K=asNumber(G)+asNumber(y.Re);return isInteger(G)&&isInteger(y.Re)?__PRIVATE_toInteger(K):__PRIVATE_toDouble(y.serializer,K)}(r,e)}function __PRIVATE_applyTransformOperationToRemoteDocument(r,e,t){return r instanceof __PRIVATE_ArrayUnionTransformOperation?__PRIVATE_applyArrayUnionTransformOperation(r,e):r instanceof __PRIVATE_ArrayRemoveTransformOperation?__PRIVATE_applyArrayRemoveTransformOperation(r,e):t}function __PRIVATE_computeTransformOperationBaseValue(r,e){return r instanceof __PRIVATE_NumericIncrementTransformOperation?function(o){return isInteger(o)||function(R){return!!R&&"doubleValue"in R}(o)}(e)?e:{integerValue:0}:null}class __PRIVATE_ServerTimestampTransform extends TransformOperation{}class __PRIVATE_ArrayUnionTransformOperation extends TransformOperation{constructor(e){super(),this.elements=e}}function __PRIVATE_applyArrayUnionTransformOperation(r,e){const t=__PRIVATE_coercedFieldValuesArray(e);for(const o of r.elements)t.some(y=>__PRIVATE_valueEquals(y,o))||t.push(o);return{arrayValue:{values:t}}}class __PRIVATE_ArrayRemoveTransformOperation extends TransformOperation{constructor(e){super(),this.elements=e}}function __PRIVATE_applyArrayRemoveTransformOperation(r,e){let t=__PRIVATE_coercedFieldValuesArray(e);for(const o of r.elements)t=t.filter(y=>!__PRIVATE_valueEquals(y,o));return{arrayValue:{values:t}}}class __PRIVATE_NumericIncrementTransformOperation extends TransformOperation{constructor(e,t){super(),this.serializer=e,this.Re=t}}function asNumber(r){return __PRIVATE_normalizeNumber(r.integerValue||r.doubleValue)}function __PRIVATE_coercedFieldValuesArray(r){return isArray(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FieldTransform{constructor(e,t){this.field=e,this.transform=t}}function __PRIVATE_fieldTransformEquals(r,e){return r.field.isEqual(e.field)&&function(o,y){return o instanceof __PRIVATE_ArrayUnionTransformOperation&&y instanceof __PRIVATE_ArrayUnionTransformOperation||o instanceof __PRIVATE_ArrayRemoveTransformOperation&&y instanceof __PRIVATE_ArrayRemoveTransformOperation?__PRIVATE_arrayEquals(o.elements,y.elements,__PRIVATE_valueEquals):o instanceof __PRIVATE_NumericIncrementTransformOperation&&y instanceof __PRIVATE_NumericIncrementTransformOperation?__PRIVATE_valueEquals(o.Re,y.Re):o instanceof __PRIVATE_ServerTimestampTransform&&y instanceof __PRIVATE_ServerTimestampTransform}(r.transform,e.transform)}class MutationResult{constructor(e,t){this.version=e,this.transformResults=t}}class Precondition{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Precondition}static exists(e){return new Precondition(void 0,e)}static updateTime(e){return new Precondition(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function __PRIVATE_preconditionIsValidForDocument(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Mutation{}function __PRIVATE_calculateOverlayMutation(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new __PRIVATE_DeleteMutation(r.key,Precondition.none()):new __PRIVATE_SetMutation(r.key,r.data,Precondition.none());{const t=r.data,o=ObjectValue.empty();let y=new SortedSet(FieldPath$1.comparator);for(let R of e.fields)if(!y.has(R)){let G=t.field(R);G===null&&R.length>1&&(R=R.popLast(),G=t.field(R)),G===null?o.delete(R):o.set(R,G),y=y.add(R)}return new __PRIVATE_PatchMutation(r.key,o,new FieldMask(y.toArray()),Precondition.none())}}function __PRIVATE_mutationApplyToRemoteDocument(r,e,t){r instanceof __PRIVATE_SetMutation?function(y,R,G){const K=y.value.clone(),Y=__PRIVATE_serverTransformResults(y.fieldTransforms,R,G.transformResults);K.setAll(Y),R.convertToFoundDocument(G.version,K).setHasCommittedMutations()}(r,e,t):r instanceof __PRIVATE_PatchMutation?function(y,R,G){if(!__PRIVATE_preconditionIsValidForDocument(y.precondition,R))return void R.convertToUnknownDocument(G.version);const K=__PRIVATE_serverTransformResults(y.fieldTransforms,R,G.transformResults),Y=R.data;Y.setAll(__PRIVATE_getPatch(y)),Y.setAll(K),R.convertToFoundDocument(G.version,Y).setHasCommittedMutations()}(r,e,t):function(y,R,G){R.convertToNoDocument(G.version).setHasCommittedMutations()}(0,e,t)}function __PRIVATE_mutationApplyToLocalView(r,e,t,o){return r instanceof __PRIVATE_SetMutation?function(R,G,K,Y){if(!__PRIVATE_preconditionIsValidForDocument(R.precondition,G))return K;const Q=R.value.clone(),ee=__PRIVATE_localTransformResults(R.fieldTransforms,Y,G);return Q.setAll(ee),G.convertToFoundDocument(G.version,Q).setHasLocalMutations(),null}(r,e,t,o):r instanceof __PRIVATE_PatchMutation?function(R,G,K,Y){if(!__PRIVATE_preconditionIsValidForDocument(R.precondition,G))return K;const Q=__PRIVATE_localTransformResults(R.fieldTransforms,Y,G),ee=G.data;return ee.setAll(__PRIVATE_getPatch(R)),ee.setAll(Q),G.convertToFoundDocument(G.version,ee).setHasLocalMutations(),K===null?null:K.unionWith(R.fieldMask.fields).unionWith(R.fieldTransforms.map(ie=>ie.field))}(r,e,t,o):function(R,G,K){return __PRIVATE_preconditionIsValidForDocument(R.precondition,G)?(G.convertToNoDocument(G.version).setHasLocalMutations(),null):K}(r,e,t)}function __PRIVATE_mutationExtractBaseValue(r,e){let t=null;for(const o of r.fieldTransforms){const y=e.data.field(o.field),R=__PRIVATE_computeTransformOperationBaseValue(o.transform,y||null);R!=null&&(t===null&&(t=ObjectValue.empty()),t.set(o.field,R))}return t||null}function __PRIVATE_mutationEquals(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!function(o,y){return o===void 0&&y===void 0||!(!o||!y)&&__PRIVATE_arrayEquals(o,y,(R,G)=>__PRIVATE_fieldTransformEquals(R,G))}(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class __PRIVATE_SetMutation extends Mutation{constructor(e,t,o,y=[]){super(),this.key=e,this.value=t,this.precondition=o,this.fieldTransforms=y,this.type=0}getFieldMask(){return null}}class __PRIVATE_PatchMutation extends Mutation{constructor(e,t,o,y,R=[]){super(),this.key=e,this.data=t,this.fieldMask=o,this.precondition=y,this.fieldTransforms=R,this.type=1}getFieldMask(){return this.fieldMask}}function __PRIVATE_getPatch(r){const e=new Map;return r.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const o=r.data.field(t);e.set(t,o)}}),e}function __PRIVATE_serverTransformResults(r,e,t){const o=new Map;__PRIVATE_hardAssert(r.length===t.length,32656,{Ve:t.length,me:r.length});for(let y=0;y<t.length;y++){const R=r[y],G=R.transform,K=e.data.field(R.field);o.set(R.field,__PRIVATE_applyTransformOperationToRemoteDocument(G,K,t[y]))}return o}function __PRIVATE_localTransformResults(r,e,t){const o=new Map;for(const y of r){const R=y.transform,G=t.data.field(y.field);o.set(y.field,__PRIVATE_applyTransformOperationToLocalView(R,G,e))}return o}class __PRIVATE_DeleteMutation extends Mutation{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class __PRIVATE_VerifyMutation extends Mutation{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MutationBatch{constructor(e,t,o,y){this.batchId=e,this.localWriteTime=t,this.baseMutations=o,this.mutations=y}applyToRemoteDocument(e,t){const o=t.mutationResults;for(let y=0;y<this.mutations.length;y++){const R=this.mutations[y];R.key.isEqual(e.key)&&__PRIVATE_mutationApplyToRemoteDocument(R,e,o[y])}}applyToLocalView(e,t){for(const o of this.baseMutations)o.key.isEqual(e.key)&&(t=__PRIVATE_mutationApplyToLocalView(o,e,t,this.localWriteTime));for(const o of this.mutations)o.key.isEqual(e.key)&&(t=__PRIVATE_mutationApplyToLocalView(o,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const o=__PRIVATE_newMutationMap();return this.mutations.forEach(y=>{const R=e.get(y.key),G=R.overlayedDocument;let K=this.applyToLocalView(G,R.mutatedFields);K=t.has(y.key)?null:K;const Y=__PRIVATE_calculateOverlayMutation(G,K);Y!==null&&o.set(y.key,Y),G.isValidDocument()||G.convertToNoDocument(SnapshotVersion.min())}),o}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),__PRIVATE_documentKeySet())}isEqual(e){return this.batchId===e.batchId&&__PRIVATE_arrayEquals(this.mutations,e.mutations,(t,o)=>__PRIVATE_mutationEquals(t,o))&&__PRIVATE_arrayEquals(this.baseMutations,e.baseMutations,(t,o)=>__PRIVATE_mutationEquals(t,o))}}class MutationBatchResult{constructor(e,t,o,y){this.batch=e,this.commitVersion=t,this.mutationResults=o,this.docVersions=y}static from(e,t,o){__PRIVATE_hardAssert(e.mutations.length===o.length,58842,{fe:e.mutations.length,ge:o.length});let y=function(){return Tt}();const R=e.mutations;for(let G=0;G<R.length;G++)y=y.insert(R[G].key,o[G].version);return new MutationBatchResult(e,t,o,y)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Overlay{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ExistenceFilter{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dt,At;function __PRIVATE_isPermanentError(r){switch(r){case F.OK:return fail(64938);case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0;default:return fail(15467,{code:r})}}function __PRIVATE_mapCodeFromRpcCode(r){if(r===void 0)return __PRIVATE_logError("GRPC error has no .code"),F.UNKNOWN;switch(r){case dt.OK:return F.OK;case dt.CANCELLED:return F.CANCELLED;case dt.UNKNOWN:return F.UNKNOWN;case dt.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case dt.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case dt.INTERNAL:return F.INTERNAL;case dt.UNAVAILABLE:return F.UNAVAILABLE;case dt.UNAUTHENTICATED:return F.UNAUTHENTICATED;case dt.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case dt.NOT_FOUND:return F.NOT_FOUND;case dt.ALREADY_EXISTS:return F.ALREADY_EXISTS;case dt.PERMISSION_DENIED:return F.PERMISSION_DENIED;case dt.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case dt.ABORTED:return F.ABORTED;case dt.OUT_OF_RANGE:return F.OUT_OF_RANGE;case dt.UNIMPLEMENTED:return F.UNIMPLEMENTED;case dt.DATA_LOSS:return F.DATA_LOSS;default:return fail(39323,{code:r})}}(At=dt||(dt={}))[At.OK=0]="OK",At[At.CANCELLED=1]="CANCELLED",At[At.UNKNOWN=2]="UNKNOWN",At[At.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",At[At.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",At[At.NOT_FOUND=5]="NOT_FOUND",At[At.ALREADY_EXISTS=6]="ALREADY_EXISTS",At[At.PERMISSION_DENIED=7]="PERMISSION_DENIED",At[At.UNAUTHENTICATED=16]="UNAUTHENTICATED",At[At.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",At[At.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",At[At.ABORTED=10]="ABORTED",At[At.OUT_OF_RANGE=11]="OUT_OF_RANGE",At[At.UNIMPLEMENTED=12]="UNIMPLEMENTED",At[At.INTERNAL=13]="INTERNAL",At[At.UNAVAILABLE=14]="UNAVAILABLE",At[At.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vt=new Integer([4294967295,4294967295],0);function __PRIVATE_getMd5HashValue(r){const e=__PRIVATE_newTextEncoder().encode(r),t=new Md5;return t.update(e),new Uint8Array(t.digest())}function __PRIVATE_get64BitUints(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),o=e.getUint32(4,!0),y=e.getUint32(8,!0),R=e.getUint32(12,!0);return[new Integer([t,o],0),new Integer([y,R],0)]}class BloomFilter{constructor(e,t,o){if(this.bitmap=e,this.padding=t,this.hashCount=o,t<0||t>=8)throw new __PRIVATE_BloomFilterError(`Invalid padding: ${t}`);if(o<0)throw new __PRIVATE_BloomFilterError(`Invalid hash count: ${o}`);if(e.length>0&&this.hashCount===0)throw new __PRIVATE_BloomFilterError(`Invalid hash count: ${o}`);if(e.length===0&&t!==0)throw new __PRIVATE_BloomFilterError(`Invalid padding when bitmap length is 0: ${t}`);this.pe=8*e.length-t,this.ye=Integer.fromNumber(this.pe)}we(e,t,o){let y=e.add(t.multiply(Integer.fromNumber(o)));return y.compare(Vt)===1&&(y=new Integer([y.getBits(0),y.getBits(1)],0)),y.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const t=__PRIVATE_getMd5HashValue(e),[o,y]=__PRIVATE_get64BitUints(t);for(let R=0;R<this.hashCount;R++){const G=this.we(o,y,R);if(!this.be(G))return!1}return!0}static create(e,t,o){const y=e%8==0?0:8-e%8,R=new Uint8Array(Math.ceil(e/8)),G=new BloomFilter(R,y,t);return o.forEach(K=>G.insert(K)),G}insert(e){if(this.pe===0)return;const t=__PRIVATE_getMd5HashValue(e),[o,y]=__PRIVATE_get64BitUints(t);for(let R=0;R<this.hashCount;R++){const G=this.we(o,y,R);this.Se(G)}}Se(e){const t=Math.floor(e/8),o=e%8;this.bitmap[t]|=1<<o}}class __PRIVATE_BloomFilterError extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RemoteEvent{constructor(e,t,o,y,R){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=o,this.documentUpdates=y,this.resolvedLimboDocuments=R}static createSynthesizedRemoteEventForCurrentChange(e,t,o){const y=new Map;return y.set(e,TargetChange.createSynthesizedTargetChangeForCurrentChange(e,t,o)),new RemoteEvent(SnapshotVersion.min(),y,new SortedMap(__PRIVATE_primitiveComparator),__PRIVATE_mutableDocumentMap(),__PRIVATE_documentKeySet())}}class TargetChange{constructor(e,t,o,y,R){this.resumeToken=e,this.current=t,this.addedDocuments=o,this.modifiedDocuments=y,this.removedDocuments=R}static createSynthesizedTargetChangeForCurrentChange(e,t,o){return new TargetChange(o,t,__PRIVATE_documentKeySet(),__PRIVATE_documentKeySet(),__PRIVATE_documentKeySet())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_DocumentWatchChange{constructor(e,t,o,y){this.De=e,this.removedTargetIds=t,this.key=o,this.ve=y}}class __PRIVATE_ExistenceFilterChange{constructor(e,t){this.targetId=e,this.Ce=t}}class __PRIVATE_WatchTargetChange{constructor(e,t,o=ByteString.EMPTY_BYTE_STRING,y=null){this.state=e,this.targetIds=t,this.resumeToken=o,this.cause=y}}class __PRIVATE_TargetState{constructor(){this.Fe=0,this.Me=__PRIVATE_snapshotChangesMap(),this.xe=ByteString.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=__PRIVATE_documentKeySet(),t=__PRIVATE_documentKeySet(),o=__PRIVATE_documentKeySet();return this.Me.forEach((y,R)=>{switch(R){case 0:e=e.add(y);break;case 2:t=t.add(y);break;case 1:o=o.add(y);break;default:fail(38017,{changeType:R})}}),new TargetChange(this.xe,this.Oe,e,t,o)}Qe(){this.Ne=!1,this.Me=__PRIVATE_snapshotChangesMap()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,__PRIVATE_hardAssert(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class __PRIVATE_WatchChangeAggregator{constructor(e){this.ze=e,this.je=new Map,this.He=__PRIVATE_mutableDocumentMap(),this.Je=__PRIVATE_documentTargetMap(),this.Ye=__PRIVATE_documentTargetMap(),this.Ze=new SortedMap(__PRIVATE_primitiveComparator)}Xe(e){for(const t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(const t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,t=>{const o=this.rt(t);switch(e.state){case 0:this.it(t)&&o.ke(e.resumeToken);break;case 1:o.We(),o.Be||o.Qe(),o.ke(e.resumeToken);break;case 2:o.We(),o.Be||this.removeTarget(t);break;case 3:this.it(t)&&(o.Ge(),o.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),o.ke(e.resumeToken));break;default:fail(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach((o,y)=>{this.it(y)&&t(y)})}ot(e){const t=e.targetId,o=e.Ce.count,y=this._t(t);if(y){const R=y.target;if(__PRIVATE_targetIsDocumentTarget(R))if(o===0){const G=new DocumentKey(R.path);this.tt(t,G,MutableDocument.newNoDocument(G,SnapshotVersion.min()))}else __PRIVATE_hardAssert(o===1,20013,{expectedCount:o});else{const G=this.ut(t);if(G!==o){const K=this.ct(e),Y=K?this.lt(K,e,G):1;if(Y!==0){this.st(t);const Q=Y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,Q)}}}}}ct(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:o="",padding:y=0},hashCount:R=0}=t;let G,K;try{G=__PRIVATE_normalizeByteString(o).toUint8Array()}catch(Y){if(Y instanceof __PRIVATE_Base64DecodeError)return __PRIVATE_logWarn("Decoding the base64 bloom filter in existence filter failed ("+Y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw Y}try{K=new BloomFilter(G,y,R)}catch(Y){return __PRIVATE_logWarn(Y instanceof __PRIVATE_BloomFilterError?"BloomFilter error: ":"Applying bloom filter failed: ",Y),null}return K.pe===0?null:K}lt(e,t,o){return t.Ce.count===o-this.Tt(e,t.targetId)?0:2}Tt(e,t){const o=this.ze.getRemoteKeysForTarget(t);let y=0;return o.forEach(R=>{const G=this.ze.Pt(),K=`projects/${G.projectId}/databases/${G.database}/documents/${R.path.canonicalString()}`;e.mightContain(K)||(this.tt(t,R,null),y++)}),y}It(e){const t=new Map;this.je.forEach((R,G)=>{const K=this._t(G);if(K){if(R.current&&__PRIVATE_targetIsDocumentTarget(K.target)){const Y=new DocumentKey(K.target.path);this.Et(Y).has(G)||this.dt(G,Y)||this.tt(G,Y,MutableDocument.newNoDocument(Y,e))}R.Le&&(t.set(G,R.qe()),R.Qe())}});let o=__PRIVATE_documentKeySet();this.Ye.forEach((R,G)=>{let K=!0;G.forEachWhile(Y=>{const Q=this._t(Y);return!Q||Q.purpose==="TargetPurposeLimboResolution"||(K=!1,!1)}),K&&(o=o.add(R))}),this.He.forEach((R,G)=>G.setReadTime(e));const y=new RemoteEvent(e,t,this.Ze,this.He,o);return this.He=__PRIVATE_mutableDocumentMap(),this.Je=__PRIVATE_documentTargetMap(),this.Ye=__PRIVATE_documentTargetMap(),this.Ze=new SortedMap(__PRIVATE_primitiveComparator),y}et(e,t){if(!this.it(e))return;const o=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,o),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,o){if(!this.it(e))return;const y=this.rt(e);this.dt(e,t)?y.$e(t,1):y.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),o&&(this.He=this.He.insert(t,o))}removeTarget(e){this.je.delete(e)}ut(e){const t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new __PRIVATE_TargetState,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new SortedSet(__PRIVATE_primitiveComparator),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new SortedSet(__PRIVATE_primitiveComparator),this.Je=this.Je.insert(e,t)),t}it(e){const t=this._t(e)!==null;return t||__PRIVATE_logDebug("WatchChangeAggregator","Detected inactive target",e),t}_t(e){const t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new __PRIVATE_TargetState),this.ze.getRemoteKeysForTarget(e).forEach(t=>{this.tt(e,t,null)})}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}}function __PRIVATE_documentTargetMap(){return new SortedMap(DocumentKey.comparator)}function __PRIVATE_snapshotChangesMap(){return new SortedMap(DocumentKey.comparator)}const mt={asc:"ASCENDING",desc:"DESCENDING"},ft={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},gt={and:"AND",or:"OR"};class JsonProtoSerializer{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function __PRIVATE_toInt32Proto(r,e){return r.useProto3Json||__PRIVATE_isNullOrUndefined(e)?e:{value:e}}function toTimestamp(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function __PRIVATE_toBytes(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function __PRIVATE_toVersion(r,e){return toTimestamp(r,e.toTimestamp())}function __PRIVATE_fromVersion(r){return __PRIVATE_hardAssert(!!r,49232),SnapshotVersion.fromTimestamp(function(t){const o=__PRIVATE_normalizeTimestamp(t);return new Timestamp(o.seconds,o.nanos)}(r))}function __PRIVATE_toResourceName(r,e){return __PRIVATE_toResourcePath(r,e).canonicalString()}function __PRIVATE_toResourcePath(r,e){const t=function(y){return new ResourcePath(["projects",y.projectId,"databases",y.database])}(r).child("documents");return e===void 0?t:t.child(e)}function __PRIVATE_fromResourceName(r){const e=ResourcePath.fromString(r);return __PRIVATE_hardAssert(__PRIVATE_isValidResourceName(e),10190,{key:e.toString()}),e}function __PRIVATE_toName(r,e){return __PRIVATE_toResourceName(r.databaseId,e.path)}function fromName(r,e){const t=__PRIVATE_fromResourceName(e);if(t.get(1)!==r.databaseId.projectId)throw new FirestoreError(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new FirestoreError(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new DocumentKey(__PRIVATE_extractLocalPathFromResourceName(t))}function __PRIVATE_toQueryPath(r,e){return __PRIVATE_toResourceName(r.databaseId,e)}function __PRIVATE_fromQueryPath(r){const e=__PRIVATE_fromResourceName(r);return e.length===4?ResourcePath.emptyPath():__PRIVATE_extractLocalPathFromResourceName(e)}function __PRIVATE_getEncodedDatabaseId(r){return new ResourcePath(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function __PRIVATE_extractLocalPathFromResourceName(r){return __PRIVATE_hardAssert(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function __PRIVATE_toMutationDocument(r,e,t){return{name:__PRIVATE_toName(r,e),fields:t.value.mapValue.fields}}function __PRIVATE_fromWatchChange(r,e){let t;if("targetChange"in e){e.targetChange;const o=function(Q){return Q==="NO_CHANGE"?0:Q==="ADD"?1:Q==="REMOVE"?2:Q==="CURRENT"?3:Q==="RESET"?4:fail(39313,{state:Q})}(e.targetChange.targetChangeType||"NO_CHANGE"),y=e.targetChange.targetIds||[],R=function(Q,ee){return Q.useProto3Json?(__PRIVATE_hardAssert(ee===void 0||typeof ee=="string",58123),ByteString.fromBase64String(ee||"")):(__PRIVATE_hardAssert(ee===void 0||ee instanceof Buffer||ee instanceof Uint8Array,16193),ByteString.fromUint8Array(ee||new Uint8Array))}(r,e.targetChange.resumeToken),G=e.targetChange.cause,K=G&&function(Q){const ee=Q.code===void 0?F.UNKNOWN:__PRIVATE_mapCodeFromRpcCode(Q.code);return new FirestoreError(ee,Q.message||"")}(G);t=new __PRIVATE_WatchTargetChange(o,y,R,K||null)}else if("documentChange"in e){e.documentChange;const o=e.documentChange;o.document,o.document.name,o.document.updateTime;const y=fromName(r,o.document.name),R=__PRIVATE_fromVersion(o.document.updateTime),G=o.document.createTime?__PRIVATE_fromVersion(o.document.createTime):SnapshotVersion.min(),K=new ObjectValue({mapValue:{fields:o.document.fields}}),Y=MutableDocument.newFoundDocument(y,R,G,K),Q=o.targetIds||[],ee=o.removedTargetIds||[];t=new __PRIVATE_DocumentWatchChange(Q,ee,Y.key,Y)}else if("documentDelete"in e){e.documentDelete;const o=e.documentDelete;o.document;const y=fromName(r,o.document),R=o.readTime?__PRIVATE_fromVersion(o.readTime):SnapshotVersion.min(),G=MutableDocument.newNoDocument(y,R),K=o.removedTargetIds||[];t=new __PRIVATE_DocumentWatchChange([],K,G.key,G)}else if("documentRemove"in e){e.documentRemove;const o=e.documentRemove;o.document;const y=fromName(r,o.document),R=o.removedTargetIds||[];t=new __PRIVATE_DocumentWatchChange([],R,y,null)}else{if(!("filter"in e))return fail(11601,{Vt:e});{e.filter;const o=e.filter;o.targetId;const{count:y=0,unchangedNames:R}=o,G=new ExistenceFilter(y,R),K=o.targetId;t=new __PRIVATE_ExistenceFilterChange(K,G)}}return t}function toMutation(r,e){let t;if(e instanceof __PRIVATE_SetMutation)t={update:__PRIVATE_toMutationDocument(r,e.key,e.value)};else if(e instanceof __PRIVATE_DeleteMutation)t={delete:__PRIVATE_toName(r,e.key)};else if(e instanceof __PRIVATE_PatchMutation)t={update:__PRIVATE_toMutationDocument(r,e.key,e.data),updateMask:__PRIVATE_toDocumentMask(e.fieldMask)};else{if(!(e instanceof __PRIVATE_VerifyMutation))return fail(16599,{ft:e.type});t={verify:__PRIVATE_toName(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(o=>function(R,G){const K=G.transform;if(K instanceof __PRIVATE_ServerTimestampTransform)return{fieldPath:G.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(K instanceof __PRIVATE_ArrayUnionTransformOperation)return{fieldPath:G.field.canonicalString(),appendMissingElements:{values:K.elements}};if(K instanceof __PRIVATE_ArrayRemoveTransformOperation)return{fieldPath:G.field.canonicalString(),removeAllFromArray:{values:K.elements}};if(K instanceof __PRIVATE_NumericIncrementTransformOperation)return{fieldPath:G.field.canonicalString(),increment:K.Re};throw fail(20930,{transform:G.transform})}(0,o))),e.precondition.isNone||(t.currentDocument=function(y,R){return R.updateTime!==void 0?{updateTime:__PRIVATE_toVersion(y,R.updateTime)}:R.exists!==void 0?{exists:R.exists}:fail(27497)}(r,e.precondition)),t}function __PRIVATE_fromWriteResults(r,e){return r&&r.length>0?(__PRIVATE_hardAssert(e!==void 0,14353),r.map(t=>function(y,R){let G=y.updateTime?__PRIVATE_fromVersion(y.updateTime):__PRIVATE_fromVersion(R);return G.isEqual(SnapshotVersion.min())&&(G=__PRIVATE_fromVersion(R)),new MutationResult(G,y.transformResults||[])}(t,e))):[]}function __PRIVATE_toDocumentsTarget(r,e){return{documents:[__PRIVATE_toQueryPath(r,e.path)]}}function __PRIVATE_toQueryTarget(r,e){const t={structuredQuery:{}},o=e.path;let y;e.collectionGroup!==null?(y=o,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(y=o.popLast(),t.structuredQuery.from=[{collectionId:o.lastSegment()}]),t.parent=__PRIVATE_toQueryPath(r,y);const R=function(Q){if(Q.length!==0)return __PRIVATE_toFilter(CompositeFilter.create(Q,"and"))}(e.filters);R&&(t.structuredQuery.where=R);const G=function(Q){if(Q.length!==0)return Q.map(ee=>function(re){return{field:__PRIVATE_toFieldPathReference(re.field),direction:__PRIVATE_toDirection(re.dir)}}(ee))}(e.orderBy);G&&(t.structuredQuery.orderBy=G);const K=__PRIVATE_toInt32Proto(r,e.limit);return K!==null&&(t.structuredQuery.limit=K),e.startAt&&(t.structuredQuery.startAt=function(Q){return{before:Q.inclusive,values:Q.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(Q){return{before:!Q.inclusive,values:Q.position}}(e.endAt)),{gt:t,parent:y}}function __PRIVATE_convertQueryTargetToQuery(r){let e=__PRIVATE_fromQueryPath(r.parent);const t=r.structuredQuery,o=t.from?t.from.length:0;let y=null;if(o>0){__PRIVATE_hardAssert(o===1,65062);const ee=t.from[0];ee.allDescendants?y=ee.collectionId:e=e.child(ee.collectionId)}let R=[];t.where&&(R=function(ie){const re=__PRIVATE_fromFilter(ie);return re instanceof CompositeFilter&&__PRIVATE_compositeFilterIsFlatConjunction(re)?re.getFilters():[re]}(t.where));let G=[];t.orderBy&&(G=function(ie){return ie.map(re=>function(le){return new OrderBy(__PRIVATE_fromFieldPathReference(le.field),function(oe){switch(oe){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(le.direction))}(re))}(t.orderBy));let K=null;t.limit&&(K=function(ie){let re;return re=typeof ie=="object"?ie.value:ie,__PRIVATE_isNullOrUndefined(re)?null:re}(t.limit));let Y=null;t.startAt&&(Y=function(ie){const re=!!ie.before,se=ie.values||[];return new Bound(se,re)}(t.startAt));let Q=null;return t.endAt&&(Q=function(ie){const re=!ie.before,se=ie.values||[];return new Bound(se,re)}(t.endAt)),__PRIVATE_newQuery(e,y,G,R,K,"F",Y,Q)}function __PRIVATE_toListenRequestLabels(r,e){const t=function(y){switch(y){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return fail(28987,{purpose:y})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function __PRIVATE_fromFilter(r){return r.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const o=__PRIVATE_fromFieldPathReference(t.unaryFilter.field);return FieldFilter.create(o,"==",{doubleValue:NaN});case"IS_NULL":const y=__PRIVATE_fromFieldPathReference(t.unaryFilter.field);return FieldFilter.create(y,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const R=__PRIVATE_fromFieldPathReference(t.unaryFilter.field);return FieldFilter.create(R,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const G=__PRIVATE_fromFieldPathReference(t.unaryFilter.field);return FieldFilter.create(G,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return fail(61313);default:return fail(60726)}}(r):r.fieldFilter!==void 0?function(t){return FieldFilter.create(__PRIVATE_fromFieldPathReference(t.fieldFilter.field),function(y){switch(y){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return fail(58110);default:return fail(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(r):r.compositeFilter!==void 0?function(t){return CompositeFilter.create(t.compositeFilter.filters.map(o=>__PRIVATE_fromFilter(o)),function(y){switch(y){case"AND":return"and";case"OR":return"or";default:return fail(1026)}}(t.compositeFilter.op))}(r):fail(30097,{filter:r})}function __PRIVATE_toDirection(r){return mt[r]}function __PRIVATE_toOperatorName(r){return ft[r]}function __PRIVATE_toCompositeOperatorName(r){return gt[r]}function __PRIVATE_toFieldPathReference(r){return{fieldPath:r.canonicalString()}}function __PRIVATE_fromFieldPathReference(r){return FieldPath$1.fromServerFormat(r.fieldPath)}function __PRIVATE_toFilter(r){return r instanceof FieldFilter?function(t){if(t.op==="=="){if(__PRIVATE_isNanValue(t.value))return{unaryFilter:{field:__PRIVATE_toFieldPathReference(t.field),op:"IS_NAN"}};if(__PRIVATE_isNullValue(t.value))return{unaryFilter:{field:__PRIVATE_toFieldPathReference(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(__PRIVATE_isNanValue(t.value))return{unaryFilter:{field:__PRIVATE_toFieldPathReference(t.field),op:"IS_NOT_NAN"}};if(__PRIVATE_isNullValue(t.value))return{unaryFilter:{field:__PRIVATE_toFieldPathReference(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:__PRIVATE_toFieldPathReference(t.field),op:__PRIVATE_toOperatorName(t.op),value:t.value}}}(r):r instanceof CompositeFilter?function(t){const o=t.getFilters().map(y=>__PRIVATE_toFilter(y));return o.length===1?o[0]:{compositeFilter:{op:__PRIVATE_toCompositeOperatorName(t.op),filters:o}}}(r):fail(54877,{filter:r})}function __PRIVATE_toDocumentMask(r){const e=[];return r.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function __PRIVATE_isValidResourceName(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TargetData{constructor(e,t,o,y,R=SnapshotVersion.min(),G=SnapshotVersion.min(),K=ByteString.EMPTY_BYTE_STRING,Y=null){this.target=e,this.targetId=t,this.purpose=o,this.sequenceNumber=y,this.snapshotVersion=R,this.lastLimboFreeSnapshotVersion=G,this.resumeToken=K,this.expectedCount=Y}withSequenceNumber(e){return new TargetData(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new TargetData(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new TargetData(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new TargetData(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_LocalSerializer{constructor(e){this.wt=e}}function __PRIVATE_fromBundledQuery(r){const e=__PRIVATE_convertQueryTargetToQuery({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?__PRIVATE_queryWithLimit(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryIndexManager{constructor(){this.yn=new __PRIVATE_MemoryCollectionParentIndex}addToCollectionParentIndex(e,t){return this.yn.add(t),PersistencePromise.resolve()}getCollectionParents(e,t){return PersistencePromise.resolve(this.yn.getEntries(t))}addFieldIndex(e,t){return PersistencePromise.resolve()}deleteFieldIndex(e,t){return PersistencePromise.resolve()}deleteAllFieldIndexes(e){return PersistencePromise.resolve()}createTargetIndexes(e,t){return PersistencePromise.resolve()}getDocumentsMatchingTarget(e,t){return PersistencePromise.resolve(null)}getIndexType(e,t){return PersistencePromise.resolve(0)}getFieldIndexes(e,t){return PersistencePromise.resolve([])}getNextCollectionGroupToUpdate(e){return PersistencePromise.resolve(null)}getMinOffset(e,t){return PersistencePromise.resolve(IndexOffset.min())}getMinOffsetFromCollectionGroup(e,t){return PersistencePromise.resolve(IndexOffset.min())}updateCollectionGroup(e,t,o){return PersistencePromise.resolve()}updateIndexEntries(e,t){return PersistencePromise.resolve()}}class __PRIVATE_MemoryCollectionParentIndex{constructor(){this.index={}}add(e){const t=e.lastSegment(),o=e.popLast(),y=this.index[t]||new SortedSet(ResourcePath.comparator),R=!y.has(o);return this.index[t]=y.add(o),R}has(e){const t=e.lastSegment(),o=e.popLast(),y=this.index[t];return y&&y.has(o)}getEntries(e){return(this.index[e]||new SortedSet(ResourcePath.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bt={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},St=41943040;class LruParams{static withCacheSize(e){return new LruParams(e,LruParams.DEFAULT_COLLECTION_PERCENTILE,LruParams.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,o){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */LruParams.DEFAULT_COLLECTION_PERCENTILE=10,LruParams.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,LruParams.DEFAULT=new LruParams(St,LruParams.DEFAULT_COLLECTION_PERCENTILE,LruParams.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),LruParams.DISABLED=new LruParams(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_TargetIdGenerator{constructor(e){this.nr=e}next(){return this.nr+=2,this.nr}static rr(){return new __PRIVATE_TargetIdGenerator(0)}static ir(){return new __PRIVATE_TargetIdGenerator(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dt="LruGarbageCollector",vt=1048576;function __PRIVATE_bufferEntryComparator([r,e],[t,o]){const y=__PRIVATE_primitiveComparator(r,t);return y===0?__PRIVATE_primitiveComparator(e,o):y}class __PRIVATE_RollingSequenceNumberBuffer{constructor(e){this.cr=e,this.buffer=new SortedSet(__PRIVATE_bufferEntryComparator),this.lr=0}hr(){return++this.lr}Pr(e){const t=[e,this.hr()];if(this.buffer.size<this.cr)this.buffer=this.buffer.add(t);else{const o=this.buffer.last();__PRIVATE_bufferEntryComparator(t,o)<0&&(this.buffer=this.buffer.delete(o).add(t))}}get maxValue(){return this.buffer.last()[0]}}class __PRIVATE_LruScheduler{constructor(e,t,o){this.garbageCollector=e,this.asyncQueue=t,this.localStore=o,this.Tr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ir(6e4)}stop(){this.Tr&&(this.Tr.cancel(),this.Tr=null)}get started(){return this.Tr!==null}Ir(e){__PRIVATE_logDebug(Dt,`Garbage collection scheduled in ${e}ms`),this.Tr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Tr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){__PRIVATE_isIndexedDbTransactionError(t)?__PRIVATE_logDebug(Dt,"Ignoring IndexedDB error during garbage collection: ",t):await __PRIVATE_ignoreIfPrimaryLeaseLoss(t)}await this.Ir(3e5)})}}class __PRIVATE_LruGarbageCollectorImpl{constructor(e,t){this.Er=e,this.params=t}calculateTargetCount(e,t){return this.Er.dr(e).next(o=>Math.floor(t/100*o))}nthSequenceNumber(e,t){if(t===0)return PersistencePromise.resolve(__PRIVATE_ListenSequence.le);const o=new __PRIVATE_RollingSequenceNumberBuffer(t);return this.Er.forEachTarget(e,y=>o.Pr(y.sequenceNumber)).next(()=>this.Er.Ar(e,y=>o.Pr(y))).next(()=>o.maxValue)}removeTargets(e,t,o){return this.Er.removeTargets(e,t,o)}removeOrphanedDocuments(e,t){return this.Er.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(__PRIVATE_logDebug("LruGarbageCollector","Garbage collection skipped; disabled"),PersistencePromise.resolve(bt)):this.getCacheSize(e).next(o=>o<this.params.cacheSizeCollectionThreshold?(__PRIVATE_logDebug("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),bt):this.Rr(e,t))}getCacheSize(e){return this.Er.getCacheSize(e)}Rr(e,t){let o,y,R,G,K,Y,Q;const ee=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(ie=>(ie>this.params.maximumSequenceNumbersToCollect?(__PRIVATE_logDebug("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${ie}`),y=this.params.maximumSequenceNumbersToCollect):y=ie,G=Date.now(),this.nthSequenceNumber(e,y))).next(ie=>(o=ie,K=Date.now(),this.removeTargets(e,o,t))).next(ie=>(R=ie,Y=Date.now(),this.removeOrphanedDocuments(e,o))).next(ie=>(Q=Date.now(),__PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${G-ee}ms
	Determined least recently used ${y} in `+(K-G)+`ms
	Removed ${R} targets in `+(Y-K)+`ms
	Removed ${ie} documents in `+(Q-Y)+`ms
Total Duration: ${Q-ee}ms`),PersistencePromise.resolve({didRun:!0,sequenceNumbersCollected:y,targetsRemoved:R,documentsRemoved:ie})))}}function __PRIVATE_newLruGarbageCollector(r,e){return new __PRIVATE_LruGarbageCollectorImpl(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RemoteDocumentChangeBuffer{constructor(){this.changes=new ObjectMap(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,MutableDocument.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const o=this.changes.get(t);return o!==void 0?PersistencePromise.resolve(o):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OverlayedDocument{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LocalDocumentsView{constructor(e,t,o,y){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=o,this.indexManager=y}getDocument(e,t){let o=null;return this.documentOverlayCache.getOverlay(e,t).next(y=>(o=y,this.remoteDocumentCache.getEntry(e,t))).next(y=>(o!==null&&__PRIVATE_mutationApplyToLocalView(o.mutation,y,FieldMask.empty(),Timestamp.now()),y))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(o=>this.getLocalViewOfDocuments(e,o,__PRIVATE_documentKeySet()).next(()=>o))}getLocalViewOfDocuments(e,t,o=__PRIVATE_documentKeySet()){const y=__PRIVATE_newOverlayMap();return this.populateOverlays(e,y,t).next(()=>this.computeViews(e,t,y,o).next(R=>{let G=documentMap();return R.forEach((K,Y)=>{G=G.insert(K,Y.overlayedDocument)}),G}))}getOverlayedDocuments(e,t){const o=__PRIVATE_newOverlayMap();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,__PRIVATE_documentKeySet()))}populateOverlays(e,t,o){const y=[];return o.forEach(R=>{t.has(R)||y.push(R)}),this.documentOverlayCache.getOverlays(e,y).next(R=>{R.forEach((G,K)=>{t.set(G,K)})})}computeViews(e,t,o,y){let R=__PRIVATE_mutableDocumentMap();const G=__PRIVATE_newDocumentKeyMap(),K=function(){return __PRIVATE_newDocumentKeyMap()}();return t.forEach((Y,Q)=>{const ee=o.get(Q.key);y.has(Q.key)&&(ee===void 0||ee.mutation instanceof __PRIVATE_PatchMutation)?R=R.insert(Q.key,Q):ee!==void 0?(G.set(Q.key,ee.mutation.getFieldMask()),__PRIVATE_mutationApplyToLocalView(ee.mutation,Q,ee.mutation.getFieldMask(),Timestamp.now())):G.set(Q.key,FieldMask.empty())}),this.recalculateAndSaveOverlays(e,R).next(Y=>(Y.forEach((Q,ee)=>G.set(Q,ee)),t.forEach((Q,ee)=>{var ie;return K.set(Q,new OverlayedDocument(ee,(ie=G.get(Q))!==null&&ie!==void 0?ie:null))}),K))}recalculateAndSaveOverlays(e,t){const o=__PRIVATE_newDocumentKeyMap();let y=new SortedMap((G,K)=>G-K),R=__PRIVATE_documentKeySet();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(G=>{for(const K of G)K.keys().forEach(Y=>{const Q=t.get(Y);if(Q===null)return;let ee=o.get(Y)||FieldMask.empty();ee=K.applyToLocalView(Q,ee),o.set(Y,ee);const ie=(y.get(K.batchId)||__PRIVATE_documentKeySet()).add(Y);y=y.insert(K.batchId,ie)})}).next(()=>{const G=[],K=y.getReverseIterator();for(;K.hasNext();){const Y=K.getNext(),Q=Y.key,ee=Y.value,ie=__PRIVATE_newMutationMap();ee.forEach(re=>{if(!R.has(re)){const se=__PRIVATE_calculateOverlayMutation(t.get(re),o.get(re));se!==null&&ie.set(re,se),R=R.add(re)}}),G.push(this.documentOverlayCache.saveOverlays(e,Q,ie))}return PersistencePromise.waitFor(G)}).next(()=>o)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(o=>this.recalculateAndSaveOverlays(e,o))}getDocumentsMatchingQuery(e,t,o,y){return function(G){return DocumentKey.isDocumentKey(G.path)&&G.collectionGroup===null&&G.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):__PRIVATE_isCollectionGroupQuery(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,o,y):this.getDocumentsMatchingCollectionQuery(e,t,o,y)}getNextDocuments(e,t,o,y){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,o,y).next(R=>{const G=y-R.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,o.largestBatchId,y-R.size):PersistencePromise.resolve(__PRIVATE_newOverlayMap());let K=B,Y=R;return G.next(Q=>PersistencePromise.forEach(Q,(ee,ie)=>(K<ie.largestBatchId&&(K=ie.largestBatchId),R.get(ee)?PersistencePromise.resolve():this.remoteDocumentCache.getEntry(e,ee).next(re=>{Y=Y.insert(ee,re)}))).next(()=>this.populateOverlays(e,Q,R)).next(()=>this.computeViews(e,Y,Q,__PRIVATE_documentKeySet())).next(ee=>({batchId:K,changes:__PRIVATE_convertOverlayedDocumentMapToDocumentMap(ee)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new DocumentKey(t)).next(o=>{let y=documentMap();return o.isFoundDocument()&&(y=y.insert(o.key,o)),y})}getDocumentsMatchingCollectionGroupQuery(e,t,o,y){const R=t.collectionGroup;let G=documentMap();return this.indexManager.getCollectionParents(e,R).next(K=>PersistencePromise.forEach(K,Y=>{const Q=function(ie,re){return new __PRIVATE_QueryImpl(re,null,ie.explicitOrderBy.slice(),ie.filters.slice(),ie.limit,ie.limitType,ie.startAt,ie.endAt)}(t,Y.child(R));return this.getDocumentsMatchingCollectionQuery(e,Q,o,y).next(ee=>{ee.forEach((ie,re)=>{G=G.insert(ie,re)})})}).next(()=>G))}getDocumentsMatchingCollectionQuery(e,t,o,y){let R;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,o.largestBatchId).next(G=>(R=G,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,o,R,y))).next(G=>{R.forEach((Y,Q)=>{const ee=Q.getKey();G.get(ee)===null&&(G=G.insert(ee,MutableDocument.newInvalidDocument(ee)))});let K=documentMap();return G.forEach((Y,Q)=>{const ee=R.get(Y);ee!==void 0&&__PRIVATE_mutationApplyToLocalView(ee.mutation,Q,FieldMask.empty(),Timestamp.now()),__PRIVATE_queryMatches(t,Q)&&(K=K.insert(Y,Q))}),K})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryBundleCache{constructor(e){this.serializer=e,this.Fr=new Map,this.Mr=new Map}getBundleMetadata(e,t){return PersistencePromise.resolve(this.Fr.get(t))}saveBundleMetadata(e,t){return this.Fr.set(t.id,function(y){return{id:y.id,version:y.version,createTime:__PRIVATE_fromVersion(y.createTime)}}(t)),PersistencePromise.resolve()}getNamedQuery(e,t){return PersistencePromise.resolve(this.Mr.get(t))}saveNamedQuery(e,t){return this.Mr.set(t.name,function(y){return{name:y.name,query:__PRIVATE_fromBundledQuery(y.bundledQuery),readTime:__PRIVATE_fromVersion(y.readTime)}}(t)),PersistencePromise.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryDocumentOverlayCache{constructor(){this.overlays=new SortedMap(DocumentKey.comparator),this.Or=new Map}getOverlay(e,t){return PersistencePromise.resolve(this.overlays.get(t))}getOverlays(e,t){const o=__PRIVATE_newOverlayMap();return PersistencePromise.forEach(t,y=>this.getOverlay(e,y).next(R=>{R!==null&&o.set(y,R)})).next(()=>o)}saveOverlays(e,t,o){return o.forEach((y,R)=>{this.St(e,t,R)}),PersistencePromise.resolve()}removeOverlaysForBatchId(e,t,o){const y=this.Or.get(o);return y!==void 0&&(y.forEach(R=>this.overlays=this.overlays.remove(R)),this.Or.delete(o)),PersistencePromise.resolve()}getOverlaysForCollection(e,t,o){const y=__PRIVATE_newOverlayMap(),R=t.length+1,G=new DocumentKey(t.child("")),K=this.overlays.getIteratorFrom(G);for(;K.hasNext();){const Y=K.getNext().value,Q=Y.getKey();if(!t.isPrefixOf(Q.path))break;Q.path.length===R&&Y.largestBatchId>o&&y.set(Y.getKey(),Y)}return PersistencePromise.resolve(y)}getOverlaysForCollectionGroup(e,t,o,y){let R=new SortedMap((Q,ee)=>Q-ee);const G=this.overlays.getIterator();for(;G.hasNext();){const Q=G.getNext().value;if(Q.getKey().getCollectionGroup()===t&&Q.largestBatchId>o){let ee=R.get(Q.largestBatchId);ee===null&&(ee=__PRIVATE_newOverlayMap(),R=R.insert(Q.largestBatchId,ee)),ee.set(Q.getKey(),Q)}}const K=__PRIVATE_newOverlayMap(),Y=R.getIterator();for(;Y.hasNext()&&(Y.getNext().value.forEach((Q,ee)=>K.set(Q,ee)),!(K.size()>=y)););return PersistencePromise.resolve(K)}St(e,t,o){const y=this.overlays.get(o.key);if(y!==null){const G=this.Or.get(y.largestBatchId).delete(o.key);this.Or.set(y.largestBatchId,G)}this.overlays=this.overlays.insert(o.key,new Overlay(t,o));let R=this.Or.get(t);R===void 0&&(R=__PRIVATE_documentKeySet(),this.Or.set(t,R)),this.Or.set(t,R.add(o.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryGlobalsCache{constructor(){this.sessionToken=ByteString.EMPTY_BYTE_STRING}getSessionToken(e){return PersistencePromise.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,PersistencePromise.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_ReferenceSet{constructor(){this.Nr=new SortedSet(__PRIVATE_DocReference.Br),this.Lr=new SortedSet(__PRIVATE_DocReference.kr)}isEmpty(){return this.Nr.isEmpty()}addReference(e,t){const o=new __PRIVATE_DocReference(e,t);this.Nr=this.Nr.add(o),this.Lr=this.Lr.add(o)}qr(e,t){e.forEach(o=>this.addReference(o,t))}removeReference(e,t){this.Qr(new __PRIVATE_DocReference(e,t))}$r(e,t){e.forEach(o=>this.removeReference(o,t))}Ur(e){const t=new DocumentKey(new ResourcePath([])),o=new __PRIVATE_DocReference(t,e),y=new __PRIVATE_DocReference(t,e+1),R=[];return this.Lr.forEachInRange([o,y],G=>{this.Qr(G),R.push(G.key)}),R}Kr(){this.Nr.forEach(e=>this.Qr(e))}Qr(e){this.Nr=this.Nr.delete(e),this.Lr=this.Lr.delete(e)}Wr(e){const t=new DocumentKey(new ResourcePath([])),o=new __PRIVATE_DocReference(t,e),y=new __PRIVATE_DocReference(t,e+1);let R=__PRIVATE_documentKeySet();return this.Lr.forEachInRange([o,y],G=>{R=R.add(G.key)}),R}containsKey(e){const t=new __PRIVATE_DocReference(e,0),o=this.Nr.firstAfterOrEqual(t);return o!==null&&e.isEqual(o.key)}}class __PRIVATE_DocReference{constructor(e,t){this.key=e,this.Gr=t}static Br(e,t){return DocumentKey.comparator(e.key,t.key)||__PRIVATE_primitiveComparator(e.Gr,t.Gr)}static kr(e,t){return __PRIVATE_primitiveComparator(e.Gr,t.Gr)||DocumentKey.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryMutationQueue{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Jn=1,this.zr=new SortedSet(__PRIVATE_DocReference.Br)}checkEmpty(e){return PersistencePromise.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,o,y){const R=this.Jn;this.Jn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const G=new MutationBatch(R,t,o,y);this.mutationQueue.push(G);for(const K of y)this.zr=this.zr.add(new __PRIVATE_DocReference(K.key,R)),this.indexManager.addToCollectionParentIndex(e,K.key.path.popLast());return PersistencePromise.resolve(G)}lookupMutationBatch(e,t){return PersistencePromise.resolve(this.jr(t))}getNextMutationBatchAfterBatchId(e,t){const o=t+1,y=this.Hr(o),R=y<0?0:y;return PersistencePromise.resolve(this.mutationQueue.length>R?this.mutationQueue[R]:null)}getHighestUnacknowledgedBatchId(){return PersistencePromise.resolve(this.mutationQueue.length===0?$:this.Jn-1)}getAllMutationBatches(e){return PersistencePromise.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const o=new __PRIVATE_DocReference(t,0),y=new __PRIVATE_DocReference(t,Number.POSITIVE_INFINITY),R=[];return this.zr.forEachInRange([o,y],G=>{const K=this.jr(G.Gr);R.push(K)}),PersistencePromise.resolve(R)}getAllMutationBatchesAffectingDocumentKeys(e,t){let o=new SortedSet(__PRIVATE_primitiveComparator);return t.forEach(y=>{const R=new __PRIVATE_DocReference(y,0),G=new __PRIVATE_DocReference(y,Number.POSITIVE_INFINITY);this.zr.forEachInRange([R,G],K=>{o=o.add(K.Gr)})}),PersistencePromise.resolve(this.Jr(o))}getAllMutationBatchesAffectingQuery(e,t){const o=t.path,y=o.length+1;let R=o;DocumentKey.isDocumentKey(R)||(R=R.child(""));const G=new __PRIVATE_DocReference(new DocumentKey(R),0);let K=new SortedSet(__PRIVATE_primitiveComparator);return this.zr.forEachWhile(Y=>{const Q=Y.key.path;return!!o.isPrefixOf(Q)&&(Q.length===y&&(K=K.add(Y.Gr)),!0)},G),PersistencePromise.resolve(this.Jr(K))}Jr(e){const t=[];return e.forEach(o=>{const y=this.jr(o);y!==null&&t.push(y)}),t}removeMutationBatch(e,t){__PRIVATE_hardAssert(this.Yr(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let o=this.zr;return PersistencePromise.forEach(t.mutations,y=>{const R=new __PRIVATE_DocReference(y.key,t.batchId);return o=o.delete(R),this.referenceDelegate.markPotentiallyOrphaned(e,y.key)}).next(()=>{this.zr=o})}Xn(e){}containsKey(e,t){const o=new __PRIVATE_DocReference(t,0),y=this.zr.firstAfterOrEqual(o);return PersistencePromise.resolve(t.isEqual(y&&y.key))}performConsistencyCheck(e){return this.mutationQueue.length,PersistencePromise.resolve()}Yr(e,t){return this.Hr(e)}Hr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}jr(e){const t=this.Hr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryRemoteDocumentCacheImpl{constructor(e){this.Zr=e,this.docs=function(){return new SortedMap(DocumentKey.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const o=t.key,y=this.docs.get(o),R=y?y.size:0,G=this.Zr(t);return this.docs=this.docs.insert(o,{document:t.mutableCopy(),size:G}),this.size+=G-R,this.indexManager.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const o=this.docs.get(t);return PersistencePromise.resolve(o?o.document.mutableCopy():MutableDocument.newInvalidDocument(t))}getEntries(e,t){let o=__PRIVATE_mutableDocumentMap();return t.forEach(y=>{const R=this.docs.get(y);o=o.insert(y,R?R.document.mutableCopy():MutableDocument.newInvalidDocument(y))}),PersistencePromise.resolve(o)}getDocumentsMatchingQuery(e,t,o,y){let R=__PRIVATE_mutableDocumentMap();const G=t.path,K=new DocumentKey(G.child("__id-9223372036854775808__")),Y=this.docs.getIteratorFrom(K);for(;Y.hasNext();){const{key:Q,value:{document:ee}}=Y.getNext();if(!G.isPrefixOf(Q.path))break;Q.path.length>G.length+1||__PRIVATE_indexOffsetComparator(__PRIVATE_newIndexOffsetFromDocument(ee),o)<=0||(y.has(ee.key)||__PRIVATE_queryMatches(t,ee))&&(R=R.insert(ee.key,ee.mutableCopy()))}return PersistencePromise.resolve(R)}getAllFromCollectionGroup(e,t,o,y){fail(9500)}Xr(e,t){return PersistencePromise.forEach(this.docs,o=>t(o))}newChangeBuffer(e){return new __PRIVATE_MemoryRemoteDocumentChangeBuffer(this)}getSize(e){return PersistencePromise.resolve(this.size)}}class __PRIVATE_MemoryRemoteDocumentChangeBuffer extends RemoteDocumentChangeBuffer{constructor(e){super(),this.vr=e}applyChanges(e){const t=[];return this.changes.forEach((o,y)=>{y.isValidDocument()?t.push(this.vr.addEntry(e,y)):this.vr.removeEntry(o)}),PersistencePromise.waitFor(t)}getFromCache(e,t){return this.vr.getEntry(e,t)}getAllFromCache(e,t){return this.vr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryTargetCache{constructor(e){this.persistence=e,this.ei=new ObjectMap(t=>__PRIVATE_canonifyTarget(t),__PRIVATE_targetEquals),this.lastRemoteSnapshotVersion=SnapshotVersion.min(),this.highestTargetId=0,this.ti=0,this.ni=new __PRIVATE_ReferenceSet,this.targetCount=0,this.ri=__PRIVATE_TargetIdGenerator.rr()}forEachTarget(e,t){return this.ei.forEach((o,y)=>t(y)),PersistencePromise.resolve()}getLastRemoteSnapshotVersion(e){return PersistencePromise.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return PersistencePromise.resolve(this.ti)}allocateTargetId(e){return this.highestTargetId=this.ri.next(),PersistencePromise.resolve(this.highestTargetId)}setTargetsMetadata(e,t,o){return o&&(this.lastRemoteSnapshotVersion=o),t>this.ti&&(this.ti=t),PersistencePromise.resolve()}ar(e){this.ei.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ri=new __PRIVATE_TargetIdGenerator(t),this.highestTargetId=t),e.sequenceNumber>this.ti&&(this.ti=e.sequenceNumber)}addTargetData(e,t){return this.ar(t),this.targetCount+=1,PersistencePromise.resolve()}updateTargetData(e,t){return this.ar(t),PersistencePromise.resolve()}removeTargetData(e,t){return this.ei.delete(t.target),this.ni.Ur(t.targetId),this.targetCount-=1,PersistencePromise.resolve()}removeTargets(e,t,o){let y=0;const R=[];return this.ei.forEach((G,K)=>{K.sequenceNumber<=t&&o.get(K.targetId)===null&&(this.ei.delete(G),R.push(this.removeMatchingKeysForTargetId(e,K.targetId)),y++)}),PersistencePromise.waitFor(R).next(()=>y)}getTargetCount(e){return PersistencePromise.resolve(this.targetCount)}getTargetData(e,t){const o=this.ei.get(t)||null;return PersistencePromise.resolve(o)}addMatchingKeys(e,t,o){return this.ni.qr(t,o),PersistencePromise.resolve()}removeMatchingKeys(e,t,o){this.ni.$r(t,o);const y=this.persistence.referenceDelegate,R=[];return y&&t.forEach(G=>{R.push(y.markPotentiallyOrphaned(e,G))}),PersistencePromise.waitFor(R)}removeMatchingKeysForTargetId(e,t){return this.ni.Ur(t),PersistencePromise.resolve()}getMatchingKeysForTargetId(e,t){const o=this.ni.Wr(t);return PersistencePromise.resolve(o)}containsKey(e,t){return PersistencePromise.resolve(this.ni.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryPersistence{constructor(e,t){this.ii={},this.overlays={},this.si=new __PRIVATE_ListenSequence(0),this.oi=!1,this.oi=!0,this._i=new __PRIVATE_MemoryGlobalsCache,this.referenceDelegate=e(this),this.ai=new __PRIVATE_MemoryTargetCache(this),this.indexManager=new __PRIVATE_MemoryIndexManager,this.remoteDocumentCache=function(y){return new __PRIVATE_MemoryRemoteDocumentCacheImpl(y)}(o=>this.referenceDelegate.ui(o)),this.serializer=new __PRIVATE_LocalSerializer(t),this.ci=new __PRIVATE_MemoryBundleCache(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.oi=!1,Promise.resolve()}get started(){return this.oi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new __PRIVATE_MemoryDocumentOverlayCache,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let o=this.ii[e.toKey()];return o||(o=new __PRIVATE_MemoryMutationQueue(t,this.referenceDelegate),this.ii[e.toKey()]=o),o}getGlobalsCache(){return this._i}getTargetCache(){return this.ai}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.ci}runTransaction(e,t,o){__PRIVATE_logDebug("MemoryPersistence","Starting transaction:",e);const y=new __PRIVATE_MemoryTransaction(this.si.next());return this.referenceDelegate.li(),o(y).next(R=>this.referenceDelegate.hi(y).next(()=>R)).toPromise().then(R=>(y.raiseOnCommittedEvent(),R))}Pi(e,t){return PersistencePromise.or(Object.values(this.ii).map(o=>()=>o.containsKey(e,t)))}}class __PRIVATE_MemoryTransaction extends PersistenceTransaction{constructor(e){super(),this.currentSequenceNumber=e}}class __PRIVATE_MemoryEagerDelegate{constructor(e){this.persistence=e,this.Ti=new __PRIVATE_ReferenceSet,this.Ii=null}static Ei(e){return new __PRIVATE_MemoryEagerDelegate(e)}get di(){if(this.Ii)return this.Ii;throw fail(60996)}addReference(e,t,o){return this.Ti.addReference(o,t),this.di.delete(o.toString()),PersistencePromise.resolve()}removeReference(e,t,o){return this.Ti.removeReference(o,t),this.di.add(o.toString()),PersistencePromise.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),PersistencePromise.resolve()}removeTarget(e,t){this.Ti.Ur(t.targetId).forEach(y=>this.di.add(y.toString()));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(e,t.targetId).next(y=>{y.forEach(R=>this.di.add(R.toString()))}).next(()=>o.removeTargetData(e,t))}li(){this.Ii=new Set}hi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return PersistencePromise.forEach(this.di,o=>{const y=DocumentKey.fromPath(o);return this.Ai(e,y).next(R=>{R||t.removeEntry(y,SnapshotVersion.min())})}).next(()=>(this.Ii=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ai(e,t).next(o=>{o?this.di.delete(t.toString()):this.di.add(t.toString())})}ui(e){return 0}Ai(e,t){return PersistencePromise.or([()=>PersistencePromise.resolve(this.Ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Pi(e,t)])}}class __PRIVATE_MemoryLruDelegate{constructor(e,t){this.persistence=e,this.Ri=new ObjectMap(o=>__PRIVATE_encodeResourcePath(o.path),(o,y)=>o.isEqual(y)),this.garbageCollector=__PRIVATE_newLruGarbageCollector(this,t)}static Ei(e,t){return new __PRIVATE_MemoryLruDelegate(e,t)}li(){}hi(e){return PersistencePromise.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.Vr(e);return this.persistence.getTargetCache().getTargetCount(e).next(o=>t.next(y=>o+y))}Vr(e){let t=0;return this.Ar(e,o=>{t++}).next(()=>t)}Ar(e,t){return PersistencePromise.forEach(this.Ri,(o,y)=>this.gr(e,o,y).next(R=>R?PersistencePromise.resolve():t(y)))}removeTargets(e,t,o){return this.persistence.getTargetCache().removeTargets(e,t,o)}removeOrphanedDocuments(e,t){let o=0;const y=this.persistence.getRemoteDocumentCache(),R=y.newChangeBuffer();return y.Xr(e,G=>this.gr(e,G,t).next(K=>{K||(o++,R.removeEntry(G,SnapshotVersion.min()))})).next(()=>R.apply(e)).next(()=>o)}markPotentiallyOrphaned(e,t){return this.Ri.set(t,e.currentSequenceNumber),PersistencePromise.resolve()}removeTarget(e,t){const o=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,o)}addReference(e,t,o){return this.Ri.set(o,e.currentSequenceNumber),PersistencePromise.resolve()}removeReference(e,t,o){return this.Ri.set(o,e.currentSequenceNumber),PersistencePromise.resolve()}updateLimboDocument(e,t){return this.Ri.set(t,e.currentSequenceNumber),PersistencePromise.resolve()}ui(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=__PRIVATE_estimateByteSize(e.data.value)),t}gr(e,t,o){return PersistencePromise.or([()=>this.persistence.Pi(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const y=this.Ri.get(t);return PersistencePromise.resolve(y!==void 0&&y>o)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_LocalViewChanges{constructor(e,t,o,y){this.targetId=e,this.fromCache=t,this.ls=o,this.hs=y}static Ps(e,t){let o=__PRIVATE_documentKeySet(),y=__PRIVATE_documentKeySet();for(const R of t.docChanges)switch(R.type){case 0:o=o.add(R.doc.key);break;case 1:y=y.add(R.doc.key)}return new __PRIVATE_LocalViewChanges(e,t.fromCache,o,y)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QueryContext{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_QueryEngine{constructor(){this.Ts=!1,this.Is=!1,this.Es=100,this.ds=function(){return isSafari()?8:__PRIVATE_getAndroidVersion(getUA())>0?6:4}()}initialize(e,t){this.As=e,this.indexManager=t,this.Ts=!0}getDocumentsMatchingQuery(e,t,o,y){const R={result:null};return this.Rs(e,t).next(G=>{R.result=G}).next(()=>{if(!R.result)return this.Vs(e,t,y,o).next(G=>{R.result=G})}).next(()=>{if(R.result)return;const G=new QueryContext;return this.fs(e,t,G).next(K=>{if(R.result=K,this.Is)return this.gs(e,t,G,K.size)})}).next(()=>R.result)}gs(e,t,o,y){return o.documentReadCount<this.Es?(__PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","SDK will not create cache indexes for query:",__PRIVATE_stringifyQuery(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Es,"documents"),PersistencePromise.resolve()):(__PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","Query:",__PRIVATE_stringifyQuery(t),"scans",o.documentReadCount,"local documents and returns",y,"documents as results."),o.documentReadCount>this.ds*y?(__PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","The SDK decides to create cache indexes for query:",__PRIVATE_stringifyQuery(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,__PRIVATE_queryToTarget(t))):PersistencePromise.resolve())}Rs(e,t){if(__PRIVATE_queryMatchesAllDocuments(t))return PersistencePromise.resolve(null);let o=__PRIVATE_queryToTarget(t);return this.indexManager.getIndexType(e,o).next(y=>y===0?null:(t.limit!==null&&y===1&&(t=__PRIVATE_queryWithLimit(t,null,"F"),o=__PRIVATE_queryToTarget(t)),this.indexManager.getDocumentsMatchingTarget(e,o).next(R=>{const G=__PRIVATE_documentKeySet(...R);return this.As.getDocuments(e,G).next(K=>this.indexManager.getMinOffset(e,o).next(Y=>{const Q=this.ps(t,K);return this.ys(t,Q,G,Y.readTime)?this.Rs(e,__PRIVATE_queryWithLimit(t,null,"F")):this.ws(e,Q,t,Y)}))})))}Vs(e,t,o,y){return __PRIVATE_queryMatchesAllDocuments(t)||y.isEqual(SnapshotVersion.min())?PersistencePromise.resolve(null):this.As.getDocuments(e,o).next(R=>{const G=this.ps(t,R);return this.ys(t,G,o,y)?PersistencePromise.resolve(null):(__PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","Re-using previous result from %s to execute query: %s",y.toString(),__PRIVATE_stringifyQuery(t)),this.ws(e,G,t,__PRIVATE_newIndexOffsetSuccessorFromReadTime(y,B)).next(K=>K))})}ps(e,t){let o=new SortedSet(__PRIVATE_newQueryComparator(e));return t.forEach((y,R)=>{__PRIVATE_queryMatches(e,R)&&(o=o.add(R))}),o}ys(e,t,o,y){if(e.limit===null)return!1;if(o.size!==t.size)return!0;const R=e.limitType==="F"?t.last():t.first();return!!R&&(R.hasPendingWrites||R.version.compareTo(y)>0)}fs(e,t,o){return __PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","Using full collection scan to execute query:",__PRIVATE_stringifyQuery(t)),this.As.getDocumentsMatchingQuery(e,t,IndexOffset.min(),o)}ws(e,t,o,y){return this.As.getDocumentsMatchingQuery(e,o,y).next(R=>(t.forEach(G=>{R=R.insert(G.key,G)}),R))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nt="LocalStore",Bt=3e8;class __PRIVATE_LocalStoreImpl{constructor(e,t,o,y){this.persistence=e,this.bs=t,this.serializer=y,this.Ss=new SortedMap(__PRIVATE_primitiveComparator),this.Ds=new ObjectMap(R=>__PRIVATE_canonifyTarget(R),__PRIVATE_targetEquals),this.vs=new Map,this.Cs=e.getRemoteDocumentCache(),this.ai=e.getTargetCache(),this.ci=e.getBundleCache(),this.Fs(o)}Fs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new LocalDocumentsView(this.Cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Cs.setIndexManager(this.indexManager),this.bs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ss))}}function __PRIVATE_newLocalStore(r,e,t,o){return new __PRIVATE_LocalStoreImpl(r,e,t,o)}async function __PRIVATE_localStoreHandleUserChange(r,e){const t=__PRIVATE_debugCast(r);return await t.persistence.runTransaction("Handle user change","readonly",o=>{let y;return t.mutationQueue.getAllMutationBatches(o).next(R=>(y=R,t.Fs(e),t.mutationQueue.getAllMutationBatches(o))).next(R=>{const G=[],K=[];let Y=__PRIVATE_documentKeySet();for(const Q of y){G.push(Q.batchId);for(const ee of Q.mutations)Y=Y.add(ee.key)}for(const Q of R){K.push(Q.batchId);for(const ee of Q.mutations)Y=Y.add(ee.key)}return t.localDocuments.getDocuments(o,Y).next(Q=>({Ms:Q,removedBatchIds:G,addedBatchIds:K}))})})}function __PRIVATE_localStoreAcknowledgeBatch(r,e){const t=__PRIVATE_debugCast(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",o=>{const y=e.batch.keys(),R=t.Cs.newChangeBuffer({trackRemovals:!0});return function(K,Y,Q,ee){const ie=Q.batch,re=ie.keys();let se=PersistencePromise.resolve();return re.forEach(le=>{se=se.next(()=>ee.getEntry(Y,le)).next(ce=>{const oe=Q.docVersions.get(le);__PRIVATE_hardAssert(oe!==null,48541),ce.version.compareTo(oe)<0&&(ie.applyToRemoteDocument(ce,Q),ce.isValidDocument()&&(ce.setReadTime(Q.commitVersion),ee.addEntry(ce)))})}),se.next(()=>K.mutationQueue.removeMutationBatch(Y,ie))}(t,o,e,R).next(()=>R.apply(o)).next(()=>t.mutationQueue.performConsistencyCheck(o)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(o,y,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(o,function(K){let Y=__PRIVATE_documentKeySet();for(let Q=0;Q<K.mutationResults.length;++Q)K.mutationResults[Q].transformResults.length>0&&(Y=Y.add(K.batch.mutations[Q].key));return Y}(e))).next(()=>t.localDocuments.getDocuments(o,y))})}function __PRIVATE_localStoreGetLastRemoteSnapshotVersion(r){const e=__PRIVATE_debugCast(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.ai.getLastRemoteSnapshotVersion(t))}function __PRIVATE_localStoreApplyRemoteEventToLocalCache(r,e){const t=__PRIVATE_debugCast(r),o=e.snapshotVersion;let y=t.Ss;return t.persistence.runTransaction("Apply remote event","readwrite-primary",R=>{const G=t.Cs.newChangeBuffer({trackRemovals:!0});y=t.Ss;const K=[];e.targetChanges.forEach((ee,ie)=>{const re=y.get(ie);if(!re)return;K.push(t.ai.removeMatchingKeys(R,ee.removedDocuments,ie).next(()=>t.ai.addMatchingKeys(R,ee.addedDocuments,ie)));let se=re.withSequenceNumber(R.currentSequenceNumber);e.targetMismatches.get(ie)!==null?se=se.withResumeToken(ByteString.EMPTY_BYTE_STRING,SnapshotVersion.min()).withLastLimboFreeSnapshotVersion(SnapshotVersion.min()):ee.resumeToken.approximateByteSize()>0&&(se=se.withResumeToken(ee.resumeToken,o)),y=y.insert(ie,se),function(ce,oe,ue){return ce.resumeToken.approximateByteSize()===0||oe.snapshotVersion.toMicroseconds()-ce.snapshotVersion.toMicroseconds()>=Bt?!0:ue.addedDocuments.size+ue.modifiedDocuments.size+ue.removedDocuments.size>0}(re,se,ee)&&K.push(t.ai.updateTargetData(R,se))});let Y=__PRIVATE_mutableDocumentMap(),Q=__PRIVATE_documentKeySet();if(e.documentUpdates.forEach(ee=>{e.resolvedLimboDocuments.has(ee)&&K.push(t.persistence.referenceDelegate.updateLimboDocument(R,ee))}),K.push(__PRIVATE_populateDocumentChangeBuffer(R,G,e.documentUpdates).next(ee=>{Y=ee.xs,Q=ee.Os})),!o.isEqual(SnapshotVersion.min())){const ee=t.ai.getLastRemoteSnapshotVersion(R).next(ie=>t.ai.setTargetsMetadata(R,R.currentSequenceNumber,o));K.push(ee)}return PersistencePromise.waitFor(K).next(()=>G.apply(R)).next(()=>t.localDocuments.getLocalViewOfDocuments(R,Y,Q)).next(()=>Y)}).then(R=>(t.Ss=y,R))}function __PRIVATE_populateDocumentChangeBuffer(r,e,t){let o=__PRIVATE_documentKeySet(),y=__PRIVATE_documentKeySet();return t.forEach(R=>o=o.add(R)),e.getEntries(r,o).next(R=>{let G=__PRIVATE_mutableDocumentMap();return t.forEach((K,Y)=>{const Q=R.get(K);Y.isFoundDocument()!==Q.isFoundDocument()&&(y=y.add(K)),Y.isNoDocument()&&Y.version.isEqual(SnapshotVersion.min())?(e.removeEntry(K,Y.readTime),G=G.insert(K,Y)):!Q.isValidDocument()||Y.version.compareTo(Q.version)>0||Y.version.compareTo(Q.version)===0&&Q.hasPendingWrites?(e.addEntry(Y),G=G.insert(K,Y)):__PRIVATE_logDebug(Nt,"Ignoring outdated watch update for ",K,". Current version:",Q.version," Watch version:",Y.version)}),{xs:G,Os:y}})}function __PRIVATE_localStoreGetNextMutationBatch(r,e){const t=__PRIVATE_debugCast(r);return t.persistence.runTransaction("Get next mutation batch","readonly",o=>(e===void 0&&(e=$),t.mutationQueue.getNextMutationBatchAfterBatchId(o,e)))}function __PRIVATE_localStoreAllocateTarget(r,e){const t=__PRIVATE_debugCast(r);return t.persistence.runTransaction("Allocate target","readwrite",o=>{let y;return t.ai.getTargetData(o,e).next(R=>R?(y=R,PersistencePromise.resolve(y)):t.ai.allocateTargetId(o).next(G=>(y=new TargetData(e,G,"TargetPurposeListen",o.currentSequenceNumber),t.ai.addTargetData(o,y).next(()=>y))))}).then(o=>{const y=t.Ss.get(o.targetId);return(y===null||o.snapshotVersion.compareTo(y.snapshotVersion)>0)&&(t.Ss=t.Ss.insert(o.targetId,o),t.Ds.set(e,o.targetId)),o})}async function __PRIVATE_localStoreReleaseTarget(r,e,t){const o=__PRIVATE_debugCast(r),y=o.Ss.get(e),R=t?"readwrite":"readwrite-primary";try{t||await o.persistence.runTransaction("Release target",R,G=>o.persistence.referenceDelegate.removeTarget(G,y))}catch(G){if(!__PRIVATE_isIndexedDbTransactionError(G))throw G;__PRIVATE_logDebug(Nt,`Failed to update sequence numbers for target ${e}: ${G}`)}o.Ss=o.Ss.remove(e),o.Ds.delete(y.target)}function __PRIVATE_localStoreExecuteQuery(r,e,t){const o=__PRIVATE_debugCast(r);let y=SnapshotVersion.min(),R=__PRIVATE_documentKeySet();return o.persistence.runTransaction("Execute query","readwrite",G=>function(Y,Q,ee){const ie=__PRIVATE_debugCast(Y),re=ie.Ds.get(ee);return re!==void 0?PersistencePromise.resolve(ie.Ss.get(re)):ie.ai.getTargetData(Q,ee)}(o,G,__PRIVATE_queryToTarget(e)).next(K=>{if(K)return y=K.lastLimboFreeSnapshotVersion,o.ai.getMatchingKeysForTargetId(G,K.targetId).next(Y=>{R=Y})}).next(()=>o.bs.getDocumentsMatchingQuery(G,e,t?y:SnapshotVersion.min(),t?R:__PRIVATE_documentKeySet())).next(K=>(__PRIVATE_setMaxReadTime(o,__PRIVATE_queryCollectionGroup(e),K),{documents:K,Ns:R})))}function __PRIVATE_setMaxReadTime(r,e,t){let o=r.vs.get(e)||SnapshotVersion.min();t.forEach((y,R)=>{R.readTime.compareTo(o)>0&&(o=R.readTime)}),r.vs.set(e,o)}class __PRIVATE_LocalClientState{constructor(){this.activeTargetIds=__PRIVATE_targetIdSet()}$s(e){this.activeTargetIds=this.activeTargetIds.add(e)}Us(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Qs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class __PRIVATE_MemorySharedClientState{constructor(){this.So=new __PRIVATE_LocalClientState,this.Do={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,o){}addLocalQueryTarget(e,t=!0){return t&&this.So.$s(e),this.Do[e]||"not-current"}updateQueryState(e,t,o){this.Do[e]=t}removeLocalQueryTarget(e){this.So.Us(e)}isLocalQueryTarget(e){return this.So.activeTargetIds.has(e)}clearQueryState(e){delete this.Do[e]}getAllActiveQueryTargets(){return this.So.activeTargetIds}isActiveQueryTarget(e){return this.So.activeTargetIds.has(e)}start(){return this.So=new __PRIVATE_LocalClientState,Promise.resolve()}handleUserChange(e,t,o){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_NoopConnectivityMonitor{vo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $t="ConnectivityMonitor";class __PRIVATE_BrowserConnectivityMonitor{constructor(){this.Co=()=>this.Fo(),this.Mo=()=>this.xo(),this.Oo=[],this.No()}vo(e){this.Oo.push(e)}shutdown(){window.removeEventListener("online",this.Co),window.removeEventListener("offline",this.Mo)}No(){window.addEventListener("online",this.Co),window.addEventListener("offline",this.Mo)}Fo(){__PRIVATE_logDebug($t,"Network connectivity changed: AVAILABLE");for(const e of this.Oo)e(0)}xo(){__PRIVATE_logDebug($t,"Network connectivity changed: UNAVAILABLE");for(const e of this.Oo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ut=null;function __PRIVATE_generateUniqueDebugId(){return Ut===null?Ut=function(){return 268435456+Math.round(2147483648*Math.random())}():Ut++,"0x"+Ut.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kt="RestConnection",Wt={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class __PRIVATE_RestConnection{get Bo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),y=encodeURIComponent(this.databaseId.database);this.Lo=t+"://"+e.host,this.ko=`projects/${o}/databases/${y}`,this.qo=this.databaseId.database===it?`project_id=${o}`:`project_id=${o}&database_id=${y}`}Qo(e,t,o,y,R){const G=__PRIVATE_generateUniqueDebugId(),K=this.$o(e,t.toUriEncodedString());__PRIVATE_logDebug(Kt,`Sending RPC '${e}' ${G}:`,K,o);const Y={"google-cloud-resource-prefix":this.ko,"x-goog-request-params":this.qo};return this.Uo(Y,y,R),this.Ko(e,K,Y,o).then(Q=>(__PRIVATE_logDebug(Kt,`Received RPC '${e}' ${G}: `,Q),Q),Q=>{throw __PRIVATE_logWarn(Kt,`RPC '${e}' ${G} failed with error: `,Q,"url: ",K,"request:",o),Q})}Wo(e,t,o,y,R,G){return this.Qo(e,t,o,y,R)}Uo(e,t,o){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+v}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((y,R)=>e[R]=y),o&&o.headers.forEach((y,R)=>e[R]=y)}$o(e,t){const o=Wt[e];return`${this.Lo}/v1/${t}:${o}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_StreamBridge{constructor(e){this.Go=e.Go,this.zo=e.zo}jo(e){this.Ho=e}Jo(e){this.Yo=e}Zo(e){this.Xo=e}onMessage(e){this.e_=e}close(){this.zo()}send(e){this.Go(e)}t_(){this.Ho()}n_(){this.Yo()}r_(e){this.Xo(e)}i_(e){this.e_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gt="WebChannelConnection";class __PRIVATE_WebChannelConnection extends __PRIVATE_RestConnection{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ko(e,t,o,y){const R=__PRIVATE_generateUniqueDebugId();return new Promise((G,K)=>{const Y=new XhrIo;Y.setWithCredentials(!0),Y.listenOnce(EventType.COMPLETE,()=>{try{switch(Y.getLastErrorCode()){case ErrorCode.NO_ERROR:const ee=Y.getResponseJson();__PRIVATE_logDebug(Gt,`XHR for RPC '${e}' ${R} received:`,JSON.stringify(ee)),G(ee);break;case ErrorCode.TIMEOUT:__PRIVATE_logDebug(Gt,`RPC '${e}' ${R} timed out`),K(new FirestoreError(F.DEADLINE_EXCEEDED,"Request time out"));break;case ErrorCode.HTTP_ERROR:const ie=Y.getStatus();if(__PRIVATE_logDebug(Gt,`RPC '${e}' ${R} failed with status:`,ie,"response text:",Y.getResponseText()),ie>0){let re=Y.getResponseJson();Array.isArray(re)&&(re=re[0]);const se=re==null?void 0:re.error;if(se&&se.status&&se.message){const le=function(oe){const ue=oe.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(ue)>=0?ue:F.UNKNOWN}(se.status);K(new FirestoreError(le,se.message))}else K(new FirestoreError(F.UNKNOWN,"Server responded with status "+Y.getStatus()))}else K(new FirestoreError(F.UNAVAILABLE,"Connection failed."));break;default:fail(9055,{s_:e,streamId:R,o_:Y.getLastErrorCode(),__:Y.getLastError()})}}finally{__PRIVATE_logDebug(Gt,`RPC '${e}' ${R} completed.`)}});const Q=JSON.stringify(y);__PRIVATE_logDebug(Gt,`RPC '${e}' ${R} sending request:`,y),Y.send(t,"POST",Q,o,15)})}a_(e,t,o){const y=__PRIVATE_generateUniqueDebugId(),R=[this.Lo,"/","google.firestore.v1.Firestore","/",e,"/channel"],G=createWebChannelTransport(),K=getStatEventTarget(),Y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},Q=this.longPollingOptions.timeoutSeconds;Q!==void 0&&(Y.longPollingTimeout=Math.round(1e3*Q)),this.useFetchStreams&&(Y.useFetchStreams=!0),this.Uo(Y.initMessageHeaders,t,o),Y.encodeInitMessageHeaders=!0;const ee=R.join("");__PRIVATE_logDebug(Gt,`Creating RPC '${e}' stream ${y}: ${ee}`,Y);const ie=G.createWebChannel(ee,Y);let re=!1,se=!1;const le=new __PRIVATE_StreamBridge({Go:oe=>{se?__PRIVATE_logDebug(Gt,`Not sending because RPC '${e}' stream ${y} is closed:`,oe):(re||(__PRIVATE_logDebug(Gt,`Opening RPC '${e}' stream ${y} transport.`),ie.open(),re=!0),__PRIVATE_logDebug(Gt,`RPC '${e}' stream ${y} sending:`,oe),ie.send(oe))},zo:()=>ie.close()}),ce=(oe,ue,ge)=>{oe.listen(ue,ve=>{try{ge(ve)}catch(_e){setTimeout(()=>{throw _e},0)}})};return ce(ie,WebChannel.EventType.OPEN,()=>{se||(__PRIVATE_logDebug(Gt,`RPC '${e}' stream ${y} transport opened.`),le.t_())}),ce(ie,WebChannel.EventType.CLOSE,()=>{se||(se=!0,__PRIVATE_logDebug(Gt,`RPC '${e}' stream ${y} transport closed`),le.r_())}),ce(ie,WebChannel.EventType.ERROR,oe=>{se||(se=!0,__PRIVATE_logWarn(Gt,`RPC '${e}' stream ${y} transport errored. Name:`,oe.name,"Message:",oe.message),le.r_(new FirestoreError(F.UNAVAILABLE,"The operation could not be completed")))}),ce(ie,WebChannel.EventType.MESSAGE,oe=>{var ue;if(!se){const ge=oe.data[0];__PRIVATE_hardAssert(!!ge,16349);const ve=ge,_e=(ve==null?void 0:ve.error)||((ue=ve[0])===null||ue===void 0?void 0:ue.error);if(_e){__PRIVATE_logDebug(Gt,`RPC '${e}' stream ${y} received error:`,_e);const be=_e.status;let Re=function(ye){const de=dt[ye];if(de!==void 0)return __PRIVATE_mapCodeFromRpcCode(de)}(be),Se=_e.message;Re===void 0&&(Re=F.INTERNAL,Se="Unknown error status: "+be+" with message "+_e.message),se=!0,le.r_(new FirestoreError(Re,Se)),ie.close()}else __PRIVATE_logDebug(Gt,`RPC '${e}' stream ${y} received:`,ge),le.i_(ge)}}),ce(K,Event.STAT_EVENT,oe=>{oe.stat===Stat.PROXY?__PRIVATE_logDebug(Gt,`RPC '${e}' stream ${y} detected buffering proxy`):oe.stat===Stat.NOPROXY&&__PRIVATE_logDebug(Gt,`RPC '${e}' stream ${y} detected no buffering proxy`)}),setTimeout(()=>{le.n_()},0),le}}function getDocument(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_newSerializer(r){return new JsonProtoSerializer(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_ExponentialBackoff{constructor(e,t,o=1e3,y=1.5,R=6e4){this.bi=e,this.timerId=t,this.u_=o,this.c_=y,this.l_=R,this.h_=0,this.P_=null,this.T_=Date.now(),this.reset()}reset(){this.h_=0}I_(){this.h_=this.l_}E_(e){this.cancel();const t=Math.floor(this.h_+this.d_()),o=Math.max(0,Date.now()-this.T_),y=Math.max(0,t-o);y>0&&__PRIVATE_logDebug("ExponentialBackoff",`Backing off for ${y} ms (base delay: ${this.h_} ms, delay with jitter: ${t} ms, last attempt: ${o} ms ago)`),this.P_=this.bi.enqueueAfterDelay(this.timerId,y,()=>(this.T_=Date.now(),e())),this.h_*=this.c_,this.h_<this.u_&&(this.h_=this.u_),this.h_>this.l_&&(this.h_=this.l_)}A_(){this.P_!==null&&(this.P_.skipDelay(),this.P_=null)}cancel(){this.P_!==null&&(this.P_.cancel(),this.P_=null)}d_(){return(Math.random()-.5)*this.h_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zt="PersistentStream";class __PRIVATE_PersistentStream{constructor(e,t,o,y,R,G,K,Y){this.bi=e,this.R_=o,this.V_=y,this.connection=R,this.authCredentialsProvider=G,this.appCheckCredentialsProvider=K,this.listener=Y,this.state=0,this.m_=0,this.f_=null,this.g_=null,this.stream=null,this.p_=0,this.y_=new __PRIVATE_ExponentialBackoff(e,t)}w_(){return this.state===1||this.state===5||this.b_()}b_(){return this.state===2||this.state===3}start(){this.p_=0,this.state!==4?this.auth():this.S_()}async stop(){this.w_()&&await this.close(0)}D_(){this.state=0,this.y_.reset()}v_(){this.b_()&&this.f_===null&&(this.f_=this.bi.enqueueAfterDelay(this.R_,6e4,()=>this.C_()))}F_(e){this.M_(),this.stream.send(e)}async C_(){if(this.b_())return this.close(0)}M_(){this.f_&&(this.f_.cancel(),this.f_=null)}x_(){this.g_&&(this.g_.cancel(),this.g_=null)}async close(e,t){this.M_(),this.x_(),this.y_.cancel(),this.m_++,e!==4?this.y_.reset():t&&t.code===F.RESOURCE_EXHAUSTED?(__PRIVATE_logError(t.toString()),__PRIVATE_logError("Using maximum backoff delay to prevent overloading the backend."),this.y_.I_()):t&&t.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.O_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Zo(t)}O_(){}auth(){this.state=1;const e=this.N_(this.m_),t=this.m_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([o,y])=>{this.m_===t&&this.B_(o,y)},o=>{e(()=>{const y=new FirestoreError(F.UNKNOWN,"Fetching auth token failed: "+o.message);return this.L_(y)})})}B_(e,t){const o=this.N_(this.m_);this.stream=this.k_(e,t),this.stream.jo(()=>{o(()=>this.listener.jo())}),this.stream.Jo(()=>{o(()=>(this.state=2,this.g_=this.bi.enqueueAfterDelay(this.V_,1e4,()=>(this.b_()&&(this.state=3),Promise.resolve())),this.listener.Jo()))}),this.stream.Zo(y=>{o(()=>this.L_(y))}),this.stream.onMessage(y=>{o(()=>++this.p_==1?this.q_(y):this.onNext(y))})}S_(){this.state=5,this.y_.E_(async()=>{this.state=0,this.start()})}L_(e){return __PRIVATE_logDebug(zt,`close with error: ${e}`),this.stream=null,this.close(4,e)}N_(e){return t=>{this.bi.enqueueAndForget(()=>this.m_===e?t():(__PRIVATE_logDebug(zt,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class __PRIVATE_PersistentListenStream extends __PRIVATE_PersistentStream{constructor(e,t,o,y,R,G){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,o,y,G),this.serializer=R}k_(e,t){return this.connection.a_("Listen",e,t)}q_(e){return this.onNext(e)}onNext(e){this.y_.reset();const t=__PRIVATE_fromWatchChange(this.serializer,e),o=function(R){if(!("targetChange"in R))return SnapshotVersion.min();const G=R.targetChange;return G.targetIds&&G.targetIds.length?SnapshotVersion.min():G.readTime?__PRIVATE_fromVersion(G.readTime):SnapshotVersion.min()}(e);return this.listener.Q_(t,o)}U_(e){const t={};t.database=__PRIVATE_getEncodedDatabaseId(this.serializer),t.addTarget=function(R,G){let K;const Y=G.target;if(K=__PRIVATE_targetIsDocumentTarget(Y)?{documents:__PRIVATE_toDocumentsTarget(R,Y)}:{query:__PRIVATE_toQueryTarget(R,Y).gt},K.targetId=G.targetId,G.resumeToken.approximateByteSize()>0){K.resumeToken=__PRIVATE_toBytes(R,G.resumeToken);const Q=__PRIVATE_toInt32Proto(R,G.expectedCount);Q!==null&&(K.expectedCount=Q)}else if(G.snapshotVersion.compareTo(SnapshotVersion.min())>0){K.readTime=toTimestamp(R,G.snapshotVersion.toTimestamp());const Q=__PRIVATE_toInt32Proto(R,G.expectedCount);Q!==null&&(K.expectedCount=Q)}return K}(this.serializer,e);const o=__PRIVATE_toListenRequestLabels(this.serializer,e);o&&(t.labels=o),this.F_(t)}K_(e){const t={};t.database=__PRIVATE_getEncodedDatabaseId(this.serializer),t.removeTarget=e,this.F_(t)}}class __PRIVATE_PersistentWriteStream extends __PRIVATE_PersistentStream{constructor(e,t,o,y,R,G){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,o,y,G),this.serializer=R}get W_(){return this.p_>0}start(){this.lastStreamToken=void 0,super.start()}O_(){this.W_&&this.G_([])}k_(e,t){return this.connection.a_("Write",e,t)}q_(e){return __PRIVATE_hardAssert(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,__PRIVATE_hardAssert(!e.writeResults||e.writeResults.length===0,55816),this.listener.z_()}onNext(e){__PRIVATE_hardAssert(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.y_.reset();const t=__PRIVATE_fromWriteResults(e.writeResults,e.commitTime),o=__PRIVATE_fromVersion(e.commitTime);return this.listener.j_(o,t)}H_(){const e={};e.database=__PRIVATE_getEncodedDatabaseId(this.serializer),this.F_(e)}G_(e){const t={streamToken:this.lastStreamToken,writes:e.map(o=>toMutation(this.serializer,o))};this.F_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Datastore{}class __PRIVATE_DatastoreImpl extends Datastore{constructor(e,t,o,y){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=o,this.serializer=y,this.J_=!1}Y_(){if(this.J_)throw new FirestoreError(F.FAILED_PRECONDITION,"The client has already been terminated.")}Qo(e,t,o,y){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([R,G])=>this.connection.Qo(e,__PRIVATE_toResourcePath(t,o),y,R,G)).catch(R=>{throw R.name==="FirebaseError"?(R.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),R):new FirestoreError(F.UNKNOWN,R.toString())})}Wo(e,t,o,y,R){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([G,K])=>this.connection.Wo(e,__PRIVATE_toResourcePath(t,o),y,G,K,R)).catch(G=>{throw G.name==="FirebaseError"?(G.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),G):new FirestoreError(F.UNKNOWN,G.toString())})}terminate(){this.J_=!0,this.connection.terminate()}}class __PRIVATE_OnlineStateTracker{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.Z_=0,this.X_=null,this.ea=!0}ta(){this.Z_===0&&(this.na("Unknown"),this.X_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.X_=null,this.ra("Backend didn't respond within 10 seconds."),this.na("Offline"),Promise.resolve())))}ia(e){this.state==="Online"?this.na("Unknown"):(this.Z_++,this.Z_>=1&&(this.sa(),this.ra(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.na("Offline")))}set(e){this.sa(),this.Z_=0,e==="Online"&&(this.ea=!1),this.na(e)}na(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ra(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ea?(__PRIVATE_logError(t),this.ea=!1):__PRIVATE_logDebug("OnlineStateTracker",t)}sa(){this.X_!==null&&(this.X_.cancel(),this.X_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jt="RemoteStore";class __PRIVATE_RemoteStoreImpl{constructor(e,t,o,y,R){this.localStore=e,this.datastore=t,this.asyncQueue=o,this.remoteSyncer={},this.oa=[],this._a=new Map,this.aa=new Set,this.ua=[],this.ca=R,this.ca.vo(G=>{o.enqueueAndForget(async()=>{__PRIVATE_canUseNetwork(this)&&(__PRIVATE_logDebug(jt,"Restarting streams for network reachability change."),await async function(Y){const Q=__PRIVATE_debugCast(Y);Q.aa.add(4),await __PRIVATE_disableNetworkInternal(Q),Q.la.set("Unknown"),Q.aa.delete(4),await __PRIVATE_enableNetworkInternal(Q)}(this))})}),this.la=new __PRIVATE_OnlineStateTracker(o,y)}}async function __PRIVATE_enableNetworkInternal(r){if(__PRIVATE_canUseNetwork(r))for(const e of r.ua)await e(!0)}async function __PRIVATE_disableNetworkInternal(r){for(const e of r.ua)await e(!1)}function __PRIVATE_remoteStoreListen(r,e){const t=__PRIVATE_debugCast(r);t._a.has(e.targetId)||(t._a.set(e.targetId,e),__PRIVATE_shouldStartWatchStream(t)?__PRIVATE_startWatchStream(t):__PRIVATE_ensureWatchStream(t).b_()&&__PRIVATE_sendWatchRequest(t,e))}function __PRIVATE_remoteStoreUnlisten(r,e){const t=__PRIVATE_debugCast(r),o=__PRIVATE_ensureWatchStream(t);t._a.delete(e),o.b_()&&__PRIVATE_sendUnwatchRequest(t,e),t._a.size===0&&(o.b_()?o.v_():__PRIVATE_canUseNetwork(t)&&t.la.set("Unknown"))}function __PRIVATE_sendWatchRequest(r,e){if(r.ha.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(SnapshotVersion.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}__PRIVATE_ensureWatchStream(r).U_(e)}function __PRIVATE_sendUnwatchRequest(r,e){r.ha.Ke(e),__PRIVATE_ensureWatchStream(r).K_(e)}function __PRIVATE_startWatchStream(r){r.ha=new __PRIVATE_WatchChangeAggregator({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>r._a.get(e)||null,Pt:()=>r.datastore.serializer.databaseId}),__PRIVATE_ensureWatchStream(r).start(),r.la.ta()}function __PRIVATE_shouldStartWatchStream(r){return __PRIVATE_canUseNetwork(r)&&!__PRIVATE_ensureWatchStream(r).w_()&&r._a.size>0}function __PRIVATE_canUseNetwork(r){return __PRIVATE_debugCast(r).aa.size===0}function __PRIVATE_cleanUpWatchStreamState(r){r.ha=void 0}async function __PRIVATE_onWatchStreamConnected(r){r.la.set("Online")}async function __PRIVATE_onWatchStreamOpen(r){r._a.forEach((e,t)=>{__PRIVATE_sendWatchRequest(r,e)})}async function __PRIVATE_onWatchStreamClose(r,e){__PRIVATE_cleanUpWatchStreamState(r),__PRIVATE_shouldStartWatchStream(r)?(r.la.ia(e),__PRIVATE_startWatchStream(r)):r.la.set("Unknown")}async function __PRIVATE_onWatchStreamChange(r,e,t){if(r.la.set("Online"),e instanceof __PRIVATE_WatchTargetChange&&e.state===2&&e.cause)try{await async function(y,R){const G=R.cause;for(const K of R.targetIds)y._a.has(K)&&(await y.remoteSyncer.rejectListen(K,G),y._a.delete(K),y.ha.removeTarget(K))}(r,e)}catch(o){__PRIVATE_logDebug(jt,"Failed to remove targets %s: %s ",e.targetIds.join(","),o),await __PRIVATE_disableNetworkUntilRecovery(r,o)}else if(e instanceof __PRIVATE_DocumentWatchChange?r.ha.Xe(e):e instanceof __PRIVATE_ExistenceFilterChange?r.ha.ot(e):r.ha.nt(e),!t.isEqual(SnapshotVersion.min()))try{const o=await __PRIVATE_localStoreGetLastRemoteSnapshotVersion(r.localStore);t.compareTo(o)>=0&&await function(R,G){const K=R.ha.It(G);return K.targetChanges.forEach((Y,Q)=>{if(Y.resumeToken.approximateByteSize()>0){const ee=R._a.get(Q);ee&&R._a.set(Q,ee.withResumeToken(Y.resumeToken,G))}}),K.targetMismatches.forEach((Y,Q)=>{const ee=R._a.get(Y);if(!ee)return;R._a.set(Y,ee.withResumeToken(ByteString.EMPTY_BYTE_STRING,ee.snapshotVersion)),__PRIVATE_sendUnwatchRequest(R,Y);const ie=new TargetData(ee.target,Y,Q,ee.sequenceNumber);__PRIVATE_sendWatchRequest(R,ie)}),R.remoteSyncer.applyRemoteEvent(K)}(r,t)}catch(o){__PRIVATE_logDebug(jt,"Failed to raise snapshot:",o),await __PRIVATE_disableNetworkUntilRecovery(r,o)}}async function __PRIVATE_disableNetworkUntilRecovery(r,e,t){if(!__PRIVATE_isIndexedDbTransactionError(e))throw e;r.aa.add(1),await __PRIVATE_disableNetworkInternal(r),r.la.set("Offline"),t||(t=()=>__PRIVATE_localStoreGetLastRemoteSnapshotVersion(r.localStore)),r.asyncQueue.enqueueRetryable(async()=>{__PRIVATE_logDebug(jt,"Retrying IndexedDB access"),await t(),r.aa.delete(1),await __PRIVATE_enableNetworkInternal(r)})}function __PRIVATE_executeWithRecovery(r,e){return e().catch(t=>__PRIVATE_disableNetworkUntilRecovery(r,t,e))}async function __PRIVATE_fillWritePipeline(r){const e=__PRIVATE_debugCast(r),t=__PRIVATE_ensureWriteStream(e);let o=e.oa.length>0?e.oa[e.oa.length-1].batchId:$;for(;__PRIVATE_canAddToWritePipeline(e);)try{const y=await __PRIVATE_localStoreGetNextMutationBatch(e.localStore,o);if(y===null){e.oa.length===0&&t.v_();break}o=y.batchId,__PRIVATE_addToWritePipeline(e,y)}catch(y){await __PRIVATE_disableNetworkUntilRecovery(e,y)}__PRIVATE_shouldStartWriteStream(e)&&__PRIVATE_startWriteStream(e)}function __PRIVATE_canAddToWritePipeline(r){return __PRIVATE_canUseNetwork(r)&&r.oa.length<10}function __PRIVATE_addToWritePipeline(r,e){r.oa.push(e);const t=__PRIVATE_ensureWriteStream(r);t.b_()&&t.W_&&t.G_(e.mutations)}function __PRIVATE_shouldStartWriteStream(r){return __PRIVATE_canUseNetwork(r)&&!__PRIVATE_ensureWriteStream(r).w_()&&r.oa.length>0}function __PRIVATE_startWriteStream(r){__PRIVATE_ensureWriteStream(r).start()}async function __PRIVATE_onWriteStreamOpen(r){__PRIVATE_ensureWriteStream(r).H_()}async function __PRIVATE_onWriteHandshakeComplete(r){const e=__PRIVATE_ensureWriteStream(r);for(const t of r.oa)e.G_(t.mutations)}async function __PRIVATE_onMutationResult(r,e,t){const o=r.oa.shift(),y=MutationBatchResult.from(o,e,t);await __PRIVATE_executeWithRecovery(r,()=>r.remoteSyncer.applySuccessfulWrite(y)),await __PRIVATE_fillWritePipeline(r)}async function __PRIVATE_onWriteStreamClose(r,e){e&&__PRIVATE_ensureWriteStream(r).W_&&await async function(o,y){if(function(G){return __PRIVATE_isPermanentError(G)&&G!==F.ABORTED}(y.code)){const R=o.oa.shift();__PRIVATE_ensureWriteStream(o).D_(),await __PRIVATE_executeWithRecovery(o,()=>o.remoteSyncer.rejectFailedWrite(R.batchId,y)),await __PRIVATE_fillWritePipeline(o)}}(r,e),__PRIVATE_shouldStartWriteStream(r)&&__PRIVATE_startWriteStream(r)}async function __PRIVATE_remoteStoreHandleCredentialChange(r,e){const t=__PRIVATE_debugCast(r);t.asyncQueue.verifyOperationInProgress(),__PRIVATE_logDebug(jt,"RemoteStore received new credentials");const o=__PRIVATE_canUseNetwork(t);t.aa.add(3),await __PRIVATE_disableNetworkInternal(t),o&&t.la.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.aa.delete(3),await __PRIVATE_enableNetworkInternal(t)}async function __PRIVATE_remoteStoreApplyPrimaryState(r,e){const t=__PRIVATE_debugCast(r);e?(t.aa.delete(2),await __PRIVATE_enableNetworkInternal(t)):e||(t.aa.add(2),await __PRIVATE_disableNetworkInternal(t),t.la.set("Unknown"))}function __PRIVATE_ensureWatchStream(r){return r.Pa||(r.Pa=function(t,o,y){const R=__PRIVATE_debugCast(t);return R.Y_(),new __PRIVATE_PersistentListenStream(o,R.connection,R.authCredentials,R.appCheckCredentials,R.serializer,y)}(r.datastore,r.asyncQueue,{jo:__PRIVATE_onWatchStreamConnected.bind(null,r),Jo:__PRIVATE_onWatchStreamOpen.bind(null,r),Zo:__PRIVATE_onWatchStreamClose.bind(null,r),Q_:__PRIVATE_onWatchStreamChange.bind(null,r)}),r.ua.push(async e=>{e?(r.Pa.D_(),__PRIVATE_shouldStartWatchStream(r)?__PRIVATE_startWatchStream(r):r.la.set("Unknown")):(await r.Pa.stop(),__PRIVATE_cleanUpWatchStreamState(r))})),r.Pa}function __PRIVATE_ensureWriteStream(r){return r.Ta||(r.Ta=function(t,o,y){const R=__PRIVATE_debugCast(t);return R.Y_(),new __PRIVATE_PersistentWriteStream(o,R.connection,R.authCredentials,R.appCheckCredentials,R.serializer,y)}(r.datastore,r.asyncQueue,{jo:()=>Promise.resolve(),Jo:__PRIVATE_onWriteStreamOpen.bind(null,r),Zo:__PRIVATE_onWriteStreamClose.bind(null,r),z_:__PRIVATE_onWriteHandshakeComplete.bind(null,r),j_:__PRIVATE_onMutationResult.bind(null,r)}),r.ua.push(async e=>{e?(r.Ta.D_(),await __PRIVATE_fillWritePipeline(r)):(await r.Ta.stop(),r.oa.length>0&&(__PRIVATE_logDebug(jt,`Stopping write stream with ${r.oa.length} pending writes`),r.oa=[]))})),r.Ta}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DelayedOperation{constructor(e,t,o,y,R){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=o,this.op=y,this.removalCallback=R,this.deferred=new __PRIVATE_Deferred,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(G=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,o,y,R){const G=Date.now()+o,K=new DelayedOperation(e,t,G,y,R);return K.start(o),K}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new FirestoreError(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function __PRIVATE_wrapInUserErrorIfRecoverable(r,e){if(__PRIVATE_logError("AsyncQueue",`${e}: ${r}`),__PRIVATE_isIndexedDbTransactionError(r))return new FirestoreError(F.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DocumentSet{static emptySet(e){return new DocumentSet(e.comparator)}constructor(e){this.comparator=e?(t,o)=>e(t,o)||DocumentKey.comparator(t.key,o.key):(t,o)=>DocumentKey.comparator(t.key,o.key),this.keyedMap=documentMap(),this.sortedSet=new SortedMap(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,o)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof DocumentSet)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),o=e.sortedSet.getIterator();for(;t.hasNext();){const y=t.getNext().key,R=o.getNext().key;if(!y.isEqual(R))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const o=new DocumentSet;return o.comparator=this.comparator,o.keyedMap=e,o.sortedSet=t,o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_DocumentChangeSet{constructor(){this.Ia=new SortedMap(DocumentKey.comparator)}track(e){const t=e.doc.key,o=this.Ia.get(t);o?e.type!==0&&o.type===3?this.Ia=this.Ia.insert(t,e):e.type===3&&o.type!==1?this.Ia=this.Ia.insert(t,{type:o.type,doc:e.doc}):e.type===2&&o.type===2?this.Ia=this.Ia.insert(t,{type:2,doc:e.doc}):e.type===2&&o.type===0?this.Ia=this.Ia.insert(t,{type:0,doc:e.doc}):e.type===1&&o.type===0?this.Ia=this.Ia.remove(t):e.type===1&&o.type===2?this.Ia=this.Ia.insert(t,{type:1,doc:o.doc}):e.type===0&&o.type===1?this.Ia=this.Ia.insert(t,{type:2,doc:e.doc}):fail(63341,{Vt:e,Ea:o}):this.Ia=this.Ia.insert(t,e)}da(){const e=[];return this.Ia.inorderTraversal((t,o)=>{e.push(o)}),e}}class ViewSnapshot{constructor(e,t,o,y,R,G,K,Y,Q){this.query=e,this.docs=t,this.oldDocs=o,this.docChanges=y,this.mutatedKeys=R,this.fromCache=G,this.syncStateChanged=K,this.excludesMetadataChanges=Y,this.hasCachedResults=Q}static fromInitialDocuments(e,t,o,y,R){const G=[];return t.forEach(K=>{G.push({type:0,doc:K})}),new ViewSnapshot(e,t,DocumentSet.emptySet(t),G,o,y,!0,!1,R)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&__PRIVATE_queryEquals(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,o=e.docChanges;if(t.length!==o.length)return!1;for(let y=0;y<t.length;y++)if(t[y].type!==o[y].type||!t[y].doc.isEqual(o[y].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_QueryListenersInfo{constructor(){this.Aa=void 0,this.Ra=[]}Va(){return this.Ra.some(e=>e.ma())}}class __PRIVATE_EventManagerImpl{constructor(){this.queries=__PRIVATE_newQueriesObjectMap(),this.onlineState="Unknown",this.fa=new Set}terminate(){(function(t,o){const y=__PRIVATE_debugCast(t),R=y.queries;y.queries=__PRIVATE_newQueriesObjectMap(),R.forEach((G,K)=>{for(const Y of K.Ra)Y.onError(o)})})(this,new FirestoreError(F.ABORTED,"Firestore shutting down"))}}function __PRIVATE_newQueriesObjectMap(){return new ObjectMap(r=>__PRIVATE_canonifyQuery(r),__PRIVATE_queryEquals)}async function __PRIVATE_eventManagerListen(r,e){const t=__PRIVATE_debugCast(r);let o=3;const y=e.query;let R=t.queries.get(y);R?!R.Va()&&e.ma()&&(o=2):(R=new __PRIVATE_QueryListenersInfo,o=e.ma()?0:1);try{switch(o){case 0:R.Aa=await t.onListen(y,!0);break;case 1:R.Aa=await t.onListen(y,!1);break;case 2:await t.onFirstRemoteStoreListen(y)}}catch(G){const K=__PRIVATE_wrapInUserErrorIfRecoverable(G,`Initialization of query '${__PRIVATE_stringifyQuery(e.query)}' failed`);return void e.onError(K)}t.queries.set(y,R),R.Ra.push(e),e.ga(t.onlineState),R.Aa&&e.pa(R.Aa)&&__PRIVATE_raiseSnapshotsInSyncEvent(t)}async function __PRIVATE_eventManagerUnlisten(r,e){const t=__PRIVATE_debugCast(r),o=e.query;let y=3;const R=t.queries.get(o);if(R){const G=R.Ra.indexOf(e);G>=0&&(R.Ra.splice(G,1),R.Ra.length===0?y=e.ma()?0:1:!R.Va()&&e.ma()&&(y=2))}switch(y){case 0:return t.queries.delete(o),t.onUnlisten(o,!0);case 1:return t.queries.delete(o),t.onUnlisten(o,!1);case 2:return t.onLastRemoteStoreUnlisten(o);default:return}}function __PRIVATE_eventManagerOnWatchChange(r,e){const t=__PRIVATE_debugCast(r);let o=!1;for(const y of e){const R=y.query,G=t.queries.get(R);if(G){for(const K of G.Ra)K.pa(y)&&(o=!0);G.Aa=y}}o&&__PRIVATE_raiseSnapshotsInSyncEvent(t)}function __PRIVATE_eventManagerOnWatchError(r,e,t){const o=__PRIVATE_debugCast(r),y=o.queries.get(e);if(y)for(const R of y.Ra)R.onError(t);o.queries.delete(e)}function __PRIVATE_raiseSnapshotsInSyncEvent(r){r.fa.forEach(e=>{e.next()})}var Ht,Jt;(Jt=Ht||(Ht={})).ya="default",Jt.Cache="cache";class __PRIVATE_QueryListener{constructor(e,t,o){this.query=e,this.wa=t,this.ba=!1,this.Sa=null,this.onlineState="Unknown",this.options=o||{}}pa(e){if(!this.options.includeMetadataChanges){const o=[];for(const y of e.docChanges)y.type!==3&&o.push(y);e=new ViewSnapshot(e.query,e.docs,e.oldDocs,o,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ba?this.Da(e)&&(this.wa.next(e),t=!0):this.va(e,this.onlineState)&&(this.Ca(e),t=!0),this.Sa=e,t}onError(e){this.wa.error(e)}ga(e){this.onlineState=e;let t=!1;return this.Sa&&!this.ba&&this.va(this.Sa,e)&&(this.Ca(this.Sa),t=!0),t}va(e,t){if(!e.fromCache||!this.ma())return!0;const o=t!=="Offline";return(!this.options.Fa||!o)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Da(e){if(e.docChanges.length>0)return!0;const t=this.Sa&&this.Sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Ca(e){e=ViewSnapshot.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ba=!0,this.wa.next(e)}ma(){return this.options.source!==Ht.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_AddedLimboDocument{constructor(e){this.key=e}}class __PRIVATE_RemovedLimboDocument{constructor(e){this.key=e}}class __PRIVATE_View{constructor(e,t){this.query=e,this.qa=t,this.Qa=null,this.hasCachedResults=!1,this.current=!1,this.$a=__PRIVATE_documentKeySet(),this.mutatedKeys=__PRIVATE_documentKeySet(),this.Ua=__PRIVATE_newQueryComparator(e),this.Ka=new DocumentSet(this.Ua)}get Wa(){return this.qa}Ga(e,t){const o=t?t.za:new __PRIVATE_DocumentChangeSet,y=t?t.Ka:this.Ka;let R=t?t.mutatedKeys:this.mutatedKeys,G=y,K=!1;const Y=this.query.limitType==="F"&&y.size===this.query.limit?y.last():null,Q=this.query.limitType==="L"&&y.size===this.query.limit?y.first():null;if(e.inorderTraversal((ee,ie)=>{const re=y.get(ee),se=__PRIVATE_queryMatches(this.query,ie)?ie:null,le=!!re&&this.mutatedKeys.has(re.key),ce=!!se&&(se.hasLocalMutations||this.mutatedKeys.has(se.key)&&se.hasCommittedMutations);let oe=!1;re&&se?re.data.isEqual(se.data)?le!==ce&&(o.track({type:3,doc:se}),oe=!0):this.ja(re,se)||(o.track({type:2,doc:se}),oe=!0,(Y&&this.Ua(se,Y)>0||Q&&this.Ua(se,Q)<0)&&(K=!0)):!re&&se?(o.track({type:0,doc:se}),oe=!0):re&&!se&&(o.track({type:1,doc:re}),oe=!0,(Y||Q)&&(K=!0)),oe&&(se?(G=G.add(se),R=ce?R.add(ee):R.delete(ee)):(G=G.delete(ee),R=R.delete(ee)))}),this.query.limit!==null)for(;G.size>this.query.limit;){const ee=this.query.limitType==="F"?G.last():G.first();G=G.delete(ee.key),R=R.delete(ee.key),o.track({type:1,doc:ee})}return{Ka:G,za:o,ys:K,mutatedKeys:R}}ja(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,o,y){const R=this.Ka;this.Ka=e.Ka,this.mutatedKeys=e.mutatedKeys;const G=e.za.da();G.sort((ee,ie)=>function(se,le){const ce=oe=>{switch(oe){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return fail(20277,{Vt:oe})}};return ce(se)-ce(le)}(ee.type,ie.type)||this.Ua(ee.doc,ie.doc)),this.Ha(o),y=y!=null&&y;const K=t&&!y?this.Ja():[],Y=this.$a.size===0&&this.current&&!y?1:0,Q=Y!==this.Qa;return this.Qa=Y,G.length!==0||Q?{snapshot:new ViewSnapshot(this.query,e.Ka,R,G,e.mutatedKeys,Y===0,Q,!1,!!o&&o.resumeToken.approximateByteSize()>0),Ya:K}:{Ya:K}}ga(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ka:this.Ka,za:new __PRIVATE_DocumentChangeSet,mutatedKeys:this.mutatedKeys,ys:!1},!1)):{Ya:[]}}Za(e){return!this.qa.has(e)&&!!this.Ka.has(e)&&!this.Ka.get(e).hasLocalMutations}Ha(e){e&&(e.addedDocuments.forEach(t=>this.qa=this.qa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.qa=this.qa.delete(t)),this.current=e.current)}Ja(){if(!this.current)return[];const e=this.$a;this.$a=__PRIVATE_documentKeySet(),this.Ka.forEach(o=>{this.Za(o.key)&&(this.$a=this.$a.add(o.key))});const t=[];return e.forEach(o=>{this.$a.has(o)||t.push(new __PRIVATE_RemovedLimboDocument(o))}),this.$a.forEach(o=>{e.has(o)||t.push(new __PRIVATE_AddedLimboDocument(o))}),t}Xa(e){this.qa=e.Ns,this.$a=__PRIVATE_documentKeySet();const t=this.Ga(e.documents);return this.applyChanges(t,!0)}eu(){return ViewSnapshot.fromInitialDocuments(this.query,this.Ka,this.mutatedKeys,this.Qa===0,this.hasCachedResults)}}const Yt="SyncEngine";class __PRIVATE_QueryView{constructor(e,t,o){this.query=e,this.targetId=t,this.view=o}}class LimboResolution{constructor(e){this.key=e,this.tu=!1}}class __PRIVATE_SyncEngineImpl{constructor(e,t,o,y,R,G){this.localStore=e,this.remoteStore=t,this.eventManager=o,this.sharedClientState=y,this.currentUser=R,this.maxConcurrentLimboResolutions=G,this.nu={},this.ru=new ObjectMap(K=>__PRIVATE_canonifyQuery(K),__PRIVATE_queryEquals),this.iu=new Map,this.su=new Set,this.ou=new SortedMap(DocumentKey.comparator),this._u=new Map,this.au=new __PRIVATE_ReferenceSet,this.uu={},this.cu=new Map,this.lu=__PRIVATE_TargetIdGenerator.ir(),this.onlineState="Unknown",this.hu=void 0}get isPrimaryClient(){return this.hu===!0}}async function __PRIVATE_syncEngineListen(r,e,t=!0){const o=__PRIVATE_ensureWatchCallbacks(r);let y;const R=o.ru.get(e);return R?(o.sharedClientState.addLocalQueryTarget(R.targetId),y=R.view.eu()):y=await __PRIVATE_allocateTargetAndMaybeListen(o,e,t,!0),y}async function __PRIVATE_triggerRemoteStoreListen(r,e){const t=__PRIVATE_ensureWatchCallbacks(r);await __PRIVATE_allocateTargetAndMaybeListen(t,e,!0,!1)}async function __PRIVATE_allocateTargetAndMaybeListen(r,e,t,o){const y=await __PRIVATE_localStoreAllocateTarget(r.localStore,__PRIVATE_queryToTarget(e)),R=y.targetId,G=r.sharedClientState.addLocalQueryTarget(R,t);let K;return o&&(K=await __PRIVATE_initializeViewAndComputeSnapshot(r,e,R,G==="current",y.resumeToken)),r.isPrimaryClient&&t&&__PRIVATE_remoteStoreListen(r.remoteStore,y),K}async function __PRIVATE_initializeViewAndComputeSnapshot(r,e,t,o,y){r.Pu=(ie,re,se)=>async function(ce,oe,ue,ge){let ve=oe.view.Ga(ue);ve.ys&&(ve=await __PRIVATE_localStoreExecuteQuery(ce.localStore,oe.query,!1).then(({documents:Se})=>oe.view.Ga(Se,ve)));const _e=ge&&ge.targetChanges.get(oe.targetId),be=ge&&ge.targetMismatches.get(oe.targetId)!=null,Re=oe.view.applyChanges(ve,ce.isPrimaryClient,_e,be);return __PRIVATE_updateTrackedLimbos(ce,oe.targetId,Re.Ya),Re.snapshot}(r,ie,re,se);const R=await __PRIVATE_localStoreExecuteQuery(r.localStore,e,!0),G=new __PRIVATE_View(e,R.Ns),K=G.Ga(R.documents),Y=TargetChange.createSynthesizedTargetChangeForCurrentChange(t,o&&r.onlineState!=="Offline",y),Q=G.applyChanges(K,r.isPrimaryClient,Y);__PRIVATE_updateTrackedLimbos(r,t,Q.Ya);const ee=new __PRIVATE_QueryView(e,t,G);return r.ru.set(e,ee),r.iu.has(t)?r.iu.get(t).push(e):r.iu.set(t,[e]),Q.snapshot}async function __PRIVATE_syncEngineUnlisten(r,e,t){const o=__PRIVATE_debugCast(r),y=o.ru.get(e),R=o.iu.get(y.targetId);if(R.length>1)return o.iu.set(y.targetId,R.filter(G=>!__PRIVATE_queryEquals(G,e))),void o.ru.delete(e);o.isPrimaryClient?(o.sharedClientState.removeLocalQueryTarget(y.targetId),o.sharedClientState.isActiveQueryTarget(y.targetId)||await __PRIVATE_localStoreReleaseTarget(o.localStore,y.targetId,!1).then(()=>{o.sharedClientState.clearQueryState(y.targetId),t&&__PRIVATE_remoteStoreUnlisten(o.remoteStore,y.targetId),__PRIVATE_removeAndCleanupTarget(o,y.targetId)}).catch(__PRIVATE_ignoreIfPrimaryLeaseLoss)):(__PRIVATE_removeAndCleanupTarget(o,y.targetId),await __PRIVATE_localStoreReleaseTarget(o.localStore,y.targetId,!0))}async function __PRIVATE_triggerRemoteStoreUnlisten(r,e){const t=__PRIVATE_debugCast(r),o=t.ru.get(e),y=t.iu.get(o.targetId);t.isPrimaryClient&&y.length===1&&(t.sharedClientState.removeLocalQueryTarget(o.targetId),__PRIVATE_remoteStoreUnlisten(t.remoteStore,o.targetId))}async function __PRIVATE_syncEngineWrite(r,e,t){const o=__PRIVATE_syncEngineEnsureWriteCallbacks(r);try{const y=await function(G,K){const Y=__PRIVATE_debugCast(G),Q=Timestamp.now(),ee=K.reduce((se,le)=>se.add(le.key),__PRIVATE_documentKeySet());let ie,re;return Y.persistence.runTransaction("Locally write mutations","readwrite",se=>{let le=__PRIVATE_mutableDocumentMap(),ce=__PRIVATE_documentKeySet();return Y.Cs.getEntries(se,ee).next(oe=>{le=oe,le.forEach((ue,ge)=>{ge.isValidDocument()||(ce=ce.add(ue))})}).next(()=>Y.localDocuments.getOverlayedDocuments(se,le)).next(oe=>{ie=oe;const ue=[];for(const ge of K){const ve=__PRIVATE_mutationExtractBaseValue(ge,ie.get(ge.key).overlayedDocument);ve!=null&&ue.push(new __PRIVATE_PatchMutation(ge.key,ve,__PRIVATE_extractFieldMask(ve.value.mapValue),Precondition.exists(!0)))}return Y.mutationQueue.addMutationBatch(se,Q,ue,K)}).next(oe=>{re=oe;const ue=oe.applyToLocalDocumentSet(ie,ce);return Y.documentOverlayCache.saveOverlays(se,oe.batchId,ue)})}).then(()=>({batchId:re.batchId,changes:__PRIVATE_convertOverlayedDocumentMapToDocumentMap(ie)}))}(o.localStore,e);o.sharedClientState.addPendingMutation(y.batchId),function(G,K,Y){let Q=G.uu[G.currentUser.toKey()];Q||(Q=new SortedMap(__PRIVATE_primitiveComparator)),Q=Q.insert(K,Y),G.uu[G.currentUser.toKey()]=Q}(o,y.batchId,t),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(o,y.changes),await __PRIVATE_fillWritePipeline(o.remoteStore)}catch(y){const R=__PRIVATE_wrapInUserErrorIfRecoverable(y,"Failed to persist write");t.reject(R)}}async function __PRIVATE_syncEngineApplyRemoteEvent(r,e){const t=__PRIVATE_debugCast(r);try{const o=await __PRIVATE_localStoreApplyRemoteEventToLocalCache(t.localStore,e);e.targetChanges.forEach((y,R)=>{const G=t._u.get(R);G&&(__PRIVATE_hardAssert(y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size<=1,22616),y.addedDocuments.size>0?G.tu=!0:y.modifiedDocuments.size>0?__PRIVATE_hardAssert(G.tu,14607):y.removedDocuments.size>0&&(__PRIVATE_hardAssert(G.tu,42227),G.tu=!1))}),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(t,o,e)}catch(o){await __PRIVATE_ignoreIfPrimaryLeaseLoss(o)}}function __PRIVATE_syncEngineApplyOnlineStateChange(r,e,t){const o=__PRIVATE_debugCast(r);if(o.isPrimaryClient&&t===0||!o.isPrimaryClient&&t===1){const y=[];o.ru.forEach((R,G)=>{const K=G.view.ga(e);K.snapshot&&y.push(K.snapshot)}),function(G,K){const Y=__PRIVATE_debugCast(G);Y.onlineState=K;let Q=!1;Y.queries.forEach((ee,ie)=>{for(const re of ie.Ra)re.ga(K)&&(Q=!0)}),Q&&__PRIVATE_raiseSnapshotsInSyncEvent(Y)}(o.eventManager,e),y.length&&o.nu.Q_(y),o.onlineState=e,o.isPrimaryClient&&o.sharedClientState.setOnlineState(e)}}async function __PRIVATE_syncEngineRejectListen(r,e,t){const o=__PRIVATE_debugCast(r);o.sharedClientState.updateQueryState(e,"rejected",t);const y=o._u.get(e),R=y&&y.key;if(R){let G=new SortedMap(DocumentKey.comparator);G=G.insert(R,MutableDocument.newNoDocument(R,SnapshotVersion.min()));const K=__PRIVATE_documentKeySet().add(R),Y=new RemoteEvent(SnapshotVersion.min(),new Map,new SortedMap(__PRIVATE_primitiveComparator),G,K);await __PRIVATE_syncEngineApplyRemoteEvent(o,Y),o.ou=o.ou.remove(R),o._u.delete(e),__PRIVATE_pumpEnqueuedLimboResolutions(o)}else await __PRIVATE_localStoreReleaseTarget(o.localStore,e,!1).then(()=>__PRIVATE_removeAndCleanupTarget(o,e,t)).catch(__PRIVATE_ignoreIfPrimaryLeaseLoss)}async function __PRIVATE_syncEngineApplySuccessfulWrite(r,e){const t=__PRIVATE_debugCast(r),o=e.batch.batchId;try{const y=await __PRIVATE_localStoreAcknowledgeBatch(t.localStore,e);__PRIVATE_processUserCallback(t,o,null),__PRIVATE_triggerPendingWritesCallbacks(t,o),t.sharedClientState.updateMutationState(o,"acknowledged"),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(t,y)}catch(y){await __PRIVATE_ignoreIfPrimaryLeaseLoss(y)}}async function __PRIVATE_syncEngineRejectFailedWrite(r,e,t){const o=__PRIVATE_debugCast(r);try{const y=await function(G,K){const Y=__PRIVATE_debugCast(G);return Y.persistence.runTransaction("Reject batch","readwrite-primary",Q=>{let ee;return Y.mutationQueue.lookupMutationBatch(Q,K).next(ie=>(__PRIVATE_hardAssert(ie!==null,37113),ee=ie.keys(),Y.mutationQueue.removeMutationBatch(Q,ie))).next(()=>Y.mutationQueue.performConsistencyCheck(Q)).next(()=>Y.documentOverlayCache.removeOverlaysForBatchId(Q,ee,K)).next(()=>Y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(Q,ee)).next(()=>Y.localDocuments.getDocuments(Q,ee))})}(o.localStore,e);__PRIVATE_processUserCallback(o,e,t),__PRIVATE_triggerPendingWritesCallbacks(o,e),o.sharedClientState.updateMutationState(e,"rejected",t),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(o,y)}catch(y){await __PRIVATE_ignoreIfPrimaryLeaseLoss(y)}}function __PRIVATE_triggerPendingWritesCallbacks(r,e){(r.cu.get(e)||[]).forEach(t=>{t.resolve()}),r.cu.delete(e)}function __PRIVATE_processUserCallback(r,e,t){const o=__PRIVATE_debugCast(r);let y=o.uu[o.currentUser.toKey()];if(y){const R=y.get(e);R&&(t?R.reject(t):R.resolve(),y=y.remove(e)),o.uu[o.currentUser.toKey()]=y}}function __PRIVATE_removeAndCleanupTarget(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const o of r.iu.get(e))r.ru.delete(o),t&&r.nu.Tu(o,t);r.iu.delete(e),r.isPrimaryClient&&r.au.Ur(e).forEach(o=>{r.au.containsKey(o)||__PRIVATE_removeLimboTarget(r,o)})}function __PRIVATE_removeLimboTarget(r,e){r.su.delete(e.path.canonicalString());const t=r.ou.get(e);t!==null&&(__PRIVATE_remoteStoreUnlisten(r.remoteStore,t),r.ou=r.ou.remove(e),r._u.delete(t),__PRIVATE_pumpEnqueuedLimboResolutions(r))}function __PRIVATE_updateTrackedLimbos(r,e,t){for(const o of t)o instanceof __PRIVATE_AddedLimboDocument?(r.au.addReference(o.key,e),__PRIVATE_trackLimboChange(r,o)):o instanceof __PRIVATE_RemovedLimboDocument?(__PRIVATE_logDebug(Yt,"Document no longer in limbo: "+o.key),r.au.removeReference(o.key,e),r.au.containsKey(o.key)||__PRIVATE_removeLimboTarget(r,o.key)):fail(19791,{Iu:o})}function __PRIVATE_trackLimboChange(r,e){const t=e.key,o=t.path.canonicalString();r.ou.get(t)||r.su.has(o)||(__PRIVATE_logDebug(Yt,"New document in limbo: "+t),r.su.add(o),__PRIVATE_pumpEnqueuedLimboResolutions(r))}function __PRIVATE_pumpEnqueuedLimboResolutions(r){for(;r.su.size>0&&r.ou.size<r.maxConcurrentLimboResolutions;){const e=r.su.values().next().value;r.su.delete(e);const t=new DocumentKey(ResourcePath.fromString(e)),o=r.lu.next();r._u.set(o,new LimboResolution(t)),r.ou=r.ou.insert(t,o),__PRIVATE_remoteStoreListen(r.remoteStore,new TargetData(__PRIVATE_queryToTarget(__PRIVATE_newQueryForPath(t.path)),o,"TargetPurposeLimboResolution",__PRIVATE_ListenSequence.le))}}async function __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(r,e,t){const o=__PRIVATE_debugCast(r),y=[],R=[],G=[];o.ru.isEmpty()||(o.ru.forEach((K,Y)=>{G.push(o.Pu(Y,e,t).then(Q=>{var ee;if((Q||t)&&o.isPrimaryClient){const ie=Q?!Q.fromCache:(ee=t==null?void 0:t.targetChanges.get(Y.targetId))===null||ee===void 0?void 0:ee.current;o.sharedClientState.updateQueryState(Y.targetId,ie?"current":"not-current")}if(Q){y.push(Q);const ie=__PRIVATE_LocalViewChanges.Ps(Y.targetId,Q);R.push(ie)}}))}),await Promise.all(G),o.nu.Q_(y),await async function(Y,Q){const ee=__PRIVATE_debugCast(Y);try{await ee.persistence.runTransaction("notifyLocalViewChanges","readwrite",ie=>PersistencePromise.forEach(Q,re=>PersistencePromise.forEach(re.ls,se=>ee.persistence.referenceDelegate.addReference(ie,re.targetId,se)).next(()=>PersistencePromise.forEach(re.hs,se=>ee.persistence.referenceDelegate.removeReference(ie,re.targetId,se)))))}catch(ie){if(!__PRIVATE_isIndexedDbTransactionError(ie))throw ie;__PRIVATE_logDebug(Nt,"Failed to update sequence numbers: "+ie)}for(const ie of Q){const re=ie.targetId;if(!ie.fromCache){const se=ee.Ss.get(re),le=se.snapshotVersion,ce=se.withLastLimboFreeSnapshotVersion(le);ee.Ss=ee.Ss.insert(re,ce)}}}(o.localStore,R))}async function __PRIVATE_syncEngineHandleCredentialChange(r,e){const t=__PRIVATE_debugCast(r);if(!t.currentUser.isEqual(e)){__PRIVATE_logDebug(Yt,"User change. New user:",e.toKey());const o=await __PRIVATE_localStoreHandleUserChange(t.localStore,e);t.currentUser=e,function(R,G){R.cu.forEach(K=>{K.forEach(Y=>{Y.reject(new FirestoreError(F.CANCELLED,G))})}),R.cu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,o.removedBatchIds,o.addedBatchIds),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(t,o.Ms)}}function __PRIVATE_syncEngineGetRemoteKeysForTarget(r,e){const t=__PRIVATE_debugCast(r),o=t._u.get(e);if(o&&o.tu)return __PRIVATE_documentKeySet().add(o.key);{let y=__PRIVATE_documentKeySet();const R=t.iu.get(e);if(!R)return y;for(const G of R){const K=t.ru.get(G);y=y.unionWith(K.view.Wa)}return y}}function __PRIVATE_ensureWatchCallbacks(r){const e=__PRIVATE_debugCast(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=__PRIVATE_syncEngineApplyRemoteEvent.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=__PRIVATE_syncEngineGetRemoteKeysForTarget.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=__PRIVATE_syncEngineRejectListen.bind(null,e),e.nu.Q_=__PRIVATE_eventManagerOnWatchChange.bind(null,e.eventManager),e.nu.Tu=__PRIVATE_eventManagerOnWatchError.bind(null,e.eventManager),e}function __PRIVATE_syncEngineEnsureWriteCallbacks(r){const e=__PRIVATE_debugCast(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=__PRIVATE_syncEngineApplySuccessfulWrite.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=__PRIVATE_syncEngineRejectFailedWrite.bind(null,e),e}class __PRIVATE_MemoryOfflineComponentProvider{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=__PRIVATE_newSerializer(e.databaseInfo.databaseId),this.sharedClientState=this.Au(e),this.persistence=this.Ru(e),await this.persistence.start(),this.localStore=this.Vu(e),this.gcScheduler=this.mu(e,this.localStore),this.indexBackfillerScheduler=this.fu(e,this.localStore)}mu(e,t){return null}fu(e,t){return null}Vu(e){return __PRIVATE_newLocalStore(this.persistence,new __PRIVATE_QueryEngine,e.initialUser,this.serializer)}Ru(e){return new __PRIVATE_MemoryPersistence(__PRIVATE_MemoryEagerDelegate.Ei,this.serializer)}Au(e){return new __PRIVATE_MemorySharedClientState}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}__PRIVATE_MemoryOfflineComponentProvider.provider={build:()=>new __PRIVATE_MemoryOfflineComponentProvider};class __PRIVATE_LruGcMemoryOfflineComponentProvider extends __PRIVATE_MemoryOfflineComponentProvider{constructor(e){super(),this.cacheSizeBytes=e}mu(e,t){__PRIVATE_hardAssert(this.persistence.referenceDelegate instanceof __PRIVATE_MemoryLruDelegate,46915);const o=this.persistence.referenceDelegate.garbageCollector;return new __PRIVATE_LruScheduler(o,e.asyncQueue,t)}Ru(e){const t=this.cacheSizeBytes!==void 0?LruParams.withCacheSize(this.cacheSizeBytes):LruParams.DEFAULT;return new __PRIVATE_MemoryPersistence(o=>__PRIVATE_MemoryLruDelegate.Ei(o,t),this.serializer)}}class OnlineComponentProvider{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=o=>__PRIVATE_syncEngineApplyOnlineStateChange(this.syncEngine,o,1),this.remoteStore.remoteSyncer.handleCredentialChange=__PRIVATE_syncEngineHandleCredentialChange.bind(null,this.syncEngine),await __PRIVATE_remoteStoreApplyPrimaryState(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new __PRIVATE_EventManagerImpl}()}createDatastore(e){const t=__PRIVATE_newSerializer(e.databaseInfo.databaseId),o=function(R){return new __PRIVATE_WebChannelConnection(R)}(e.databaseInfo);return function(R,G,K,Y){return new __PRIVATE_DatastoreImpl(R,G,K,Y)}(e.authCredentials,e.appCheckCredentials,o,t)}createRemoteStore(e){return function(o,y,R,G,K){return new __PRIVATE_RemoteStoreImpl(o,y,R,G,K)}(this.localStore,this.datastore,e.asyncQueue,t=>__PRIVATE_syncEngineApplyOnlineStateChange(this.syncEngine,t,0),function(){return __PRIVATE_BrowserConnectivityMonitor.C()?new __PRIVATE_BrowserConnectivityMonitor:new __PRIVATE_NoopConnectivityMonitor}())}createSyncEngine(e,t){return function(y,R,G,K,Y,Q,ee){const ie=new __PRIVATE_SyncEngineImpl(y,R,G,K,Y,Q);return ee&&(ie.hu=!0),ie}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(y){const R=__PRIVATE_debugCast(y);__PRIVATE_logDebug(jt,"RemoteStore shutting down."),R.aa.add(5),await __PRIVATE_disableNetworkInternal(R),R.ca.shutdown(),R.la.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}OnlineComponentProvider.provider={build:()=>new OnlineComponentProvider};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_AsyncObserver{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.pu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.pu(this.observer.error,e):__PRIVATE_logError("Uncaught Error in snapshot listener:",e.toString()))}yu(){this.muted=!0}pu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zt="FirestoreClient";class FirestoreClient{constructor(e,t,o,y,R){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=o,this.databaseInfo=y,this.user=User.UNAUTHENTICATED,this.clientId=__PRIVATE_AutoId.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=R,this.authCredentials.start(o,async G=>{__PRIVATE_logDebug(Zt,"Received user=",G.uid),await this.authCredentialListener(G),this.user=G}),this.appCheckCredentials.start(o,G=>(__PRIVATE_logDebug(Zt,"Received new app check token=",G),this.appCheckCredentialListener(G,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new __PRIVATE_Deferred;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const o=__PRIVATE_wrapInUserErrorIfRecoverable(t,"Failed to shutdown persistence");e.reject(o)}}),e.promise}}async function __PRIVATE_setOfflineComponentProvider(r,e){r.asyncQueue.verifyOperationInProgress(),__PRIVATE_logDebug(Zt,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let o=t.initialUser;r.setCredentialChangeListener(async y=>{o.isEqual(y)||(await __PRIVATE_localStoreHandleUserChange(e.localStore,y),o=y)}),e.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=e}async function __PRIVATE_setOnlineComponentProvider(r,e){r.asyncQueue.verifyOperationInProgress();const t=await __PRIVATE_ensureOfflineComponents(r);__PRIVATE_logDebug(Zt,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener(o=>__PRIVATE_remoteStoreHandleCredentialChange(e.remoteStore,o)),r.setAppCheckTokenChangeListener((o,y)=>__PRIVATE_remoteStoreHandleCredentialChange(e.remoteStore,y)),r._onlineComponents=e}async function __PRIVATE_ensureOfflineComponents(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){__PRIVATE_logDebug(Zt,"Using user provided OfflineComponentProvider");try{await __PRIVATE_setOfflineComponentProvider(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(y){return y.name==="FirebaseError"?y.code===F.FAILED_PRECONDITION||y.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&y instanceof DOMException)||y.code===22||y.code===20||y.code===11}(t))throw t;__PRIVATE_logWarn("Error using user provided cache. Falling back to memory cache: "+t),await __PRIVATE_setOfflineComponentProvider(r,new __PRIVATE_MemoryOfflineComponentProvider)}}else __PRIVATE_logDebug(Zt,"Using default OfflineComponentProvider"),await __PRIVATE_setOfflineComponentProvider(r,new __PRIVATE_LruGcMemoryOfflineComponentProvider(void 0));return r._offlineComponents}async function __PRIVATE_ensureOnlineComponents(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(__PRIVATE_logDebug(Zt,"Using user provided OnlineComponentProvider"),await __PRIVATE_setOnlineComponentProvider(r,r._uninitializedComponentsProvider._online)):(__PRIVATE_logDebug(Zt,"Using default OnlineComponentProvider"),await __PRIVATE_setOnlineComponentProvider(r,new OnlineComponentProvider))),r._onlineComponents}function __PRIVATE_getSyncEngine(r){return __PRIVATE_ensureOnlineComponents(r).then(e=>e.syncEngine)}async function __PRIVATE_getEventManager(r){const e=await __PRIVATE_ensureOnlineComponents(r),t=e.eventManager;return t.onListen=__PRIVATE_syncEngineListen.bind(null,e.syncEngine),t.onUnlisten=__PRIVATE_syncEngineUnlisten.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=__PRIVATE_triggerRemoteStoreListen.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=__PRIVATE_triggerRemoteStoreUnlisten.bind(null,e.syncEngine),t}function __PRIVATE_firestoreClientGetDocumentViaSnapshotListener(r,e,t={}){const o=new __PRIVATE_Deferred;return r.asyncQueue.enqueueAndForget(async()=>function(R,G,K,Y,Q){const ee=new __PRIVATE_AsyncObserver({next:re=>{ee.yu(),G.enqueueAndForget(()=>__PRIVATE_eventManagerUnlisten(R,ie));const se=re.docs.has(K);!se&&re.fromCache?Q.reject(new FirestoreError(F.UNAVAILABLE,"Failed to get document because the client is offline.")):se&&re.fromCache&&Y&&Y.source==="server"?Q.reject(new FirestoreError(F.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):Q.resolve(re)},error:re=>Q.reject(re)}),ie=new __PRIVATE_QueryListener(__PRIVATE_newQueryForPath(K.path),ee,{includeMetadataChanges:!0,Fa:!0});return __PRIVATE_eventManagerListen(R,ie)}(await __PRIVATE_getEventManager(r),r.asyncQueue,e,t,o)),o.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_cloneLongPollingOptions(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xt=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_validateNonEmptyArgument(r,e,t){if(!t)throw new FirestoreError(F.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function __PRIVATE_validateIsNotUsedTogether(r,e,t,o){if(e===!0&&o===!0)throw new FirestoreError(F.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function __PRIVATE_validateDocumentPath(r){if(!DocumentKey.isDocumentKey(r))throw new FirestoreError(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function __PRIVATE_valueDescription(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=function(o){return o.constructor?o.constructor.name:null}(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":fail(12329,{type:typeof r})}function __PRIVATE_cast(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new FirestoreError(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=__PRIVATE_valueDescription(r);throw new FirestoreError(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const en="firestore.googleapis.com",tn=!0;class FirestoreSettingsImpl{constructor(e){var t,o;if(e.host===void 0){if(e.ssl!==void 0)throw new FirestoreError(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=en,this.ssl=tn}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:tn;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=St;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<vt)throw new FirestoreError(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}__PRIVATE_validateIsNotUsedTogether("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=__PRIVATE_cloneLongPollingOptions((o=e.experimentalLongPollingOptions)!==null&&o!==void 0?o:{}),function(R){if(R.timeoutSeconds!==void 0){if(isNaN(R.timeoutSeconds))throw new FirestoreError(F.INVALID_ARGUMENT,`invalid long polling timeout: ${R.timeoutSeconds} (must not be NaN)`);if(R.timeoutSeconds<5)throw new FirestoreError(F.INVALID_ARGUMENT,`invalid long polling timeout: ${R.timeoutSeconds} (minimum allowed value is 5)`);if(R.timeoutSeconds>30)throw new FirestoreError(F.INVALID_ARGUMENT,`invalid long polling timeout: ${R.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(o,y){return o.timeoutSeconds===y.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Firestore$1{constructor(e,t,o,y){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=o,this._app=y,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new FirestoreSettingsImpl({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new FirestoreError(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new FirestoreError(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new FirestoreSettingsImpl(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(o){if(!o)return new __PRIVATE_EmptyAuthCredentialsProvider;switch(o.type){case"firstParty":return new __PRIVATE_FirstPartyAuthCredentialsProvider(o.sessionIndex||"0",o.iamToken||null,o.authTokenFactory||null);case"provider":return o.client;default:throw new FirestoreError(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const o=Xt.get(t);o&&(__PRIVATE_logDebug("ComponentProvider","Removing Datastore"),Xt.delete(t),o.terminate())}(this),Promise.resolve()}}function connectFirestoreEmulator(r,e,t,o={}){var y;const R=(r=__PRIVATE_cast(r,Firestore$1))._getSettings(),G=Object.assign(Object.assign({},R),{emulatorOptions:r._getEmulatorOptions()}),K=`${e}:${t}`;R.host!==en&&R.host!==K&&__PRIVATE_logWarn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const Y=Object.assign(Object.assign({},R),{host:K,ssl:!1,emulatorOptions:o});if(!deepEqual(Y,G)&&(r._setSettings(Y),o.mockUserToken)){let Q,ee;if(typeof o.mockUserToken=="string")Q=o.mockUserToken,ee=User.MOCK_USER;else{Q=createMockUserToken(o.mockUserToken,(y=r._app)===null||y===void 0?void 0:y.options.projectId);const ie=o.mockUserToken.sub||o.mockUserToken.user_id;if(!ie)throw new FirestoreError(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");ee=new User(ie)}r._authCredentials=new __PRIVATE_EmulatorAuthCredentialsProvider(new __PRIVATE_OAuthToken(Q,ee))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Query{constructor(e,t,o){this.converter=t,this._query=o,this.type="query",this.firestore=e}withConverter(e){return new Query(this.firestore,e,this._query)}}class DocumentReference{constructor(e,t,o){this.converter=t,this._key=o,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new CollectionReference(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new DocumentReference(this.firestore,e,this._key)}}class CollectionReference extends Query{constructor(e,t,o){super(e,t,__PRIVATE_newQueryForPath(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new DocumentReference(this.firestore,null,new DocumentKey(e))}withConverter(e){return new CollectionReference(this.firestore,e,this._path)}}function doc(r,e,...t){if(r=getModularInstance(r),arguments.length===1&&(e=__PRIVATE_AutoId.newId()),__PRIVATE_validateNonEmptyArgument("doc","path",e),r instanceof Firestore$1){const o=ResourcePath.fromString(e,...t);return __PRIVATE_validateDocumentPath(o),new DocumentReference(r,null,new DocumentKey(o))}{if(!(r instanceof DocumentReference||r instanceof CollectionReference))throw new FirestoreError(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=r._path.child(ResourcePath.fromString(e,...t));return __PRIVATE_validateDocumentPath(o),new DocumentReference(r.firestore,r instanceof CollectionReference?r.converter:null,new DocumentKey(o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nn="AsyncQueue";class __PRIVATE_AsyncQueueImpl{constructor(e=Promise.resolve()){this.Qu=[],this.$u=!1,this.Uu=[],this.Ku=null,this.Wu=!1,this.Gu=!1,this.zu=[],this.y_=new __PRIVATE_ExponentialBackoff(this,"async_queue_retry"),this.ju=()=>{const o=getDocument();o&&__PRIVATE_logDebug(nn,"Visibility state changed to "+o.visibilityState),this.y_.A_()},this.Hu=e;const t=getDocument();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.ju)}get isShuttingDown(){return this.$u}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ju(),this.Yu(e)}enterRestrictedMode(e){if(!this.$u){this.$u=!0,this.Gu=e||!1;const t=getDocument();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.ju)}}enqueue(e){if(this.Ju(),this.$u)return new Promise(()=>{});const t=new __PRIVATE_Deferred;return this.Yu(()=>this.$u&&this.Gu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qu.push(e),this.Zu()))}async Zu(){if(this.Qu.length!==0){try{await this.Qu[0](),this.Qu.shift(),this.y_.reset()}catch(e){if(!__PRIVATE_isIndexedDbTransactionError(e))throw e;__PRIVATE_logDebug(nn,"Operation failed with retryable error: "+e)}this.Qu.length>0&&this.y_.E_(()=>this.Zu())}}Yu(e){const t=this.Hu.then(()=>(this.Wu=!0,e().catch(o=>{throw this.Ku=o,this.Wu=!1,__PRIVATE_logError("INTERNAL UNHANDLED ERROR: ",__PRIVATE_getMessageOrStack(o)),o}).then(o=>(this.Wu=!1,o))));return this.Hu=t,t}enqueueAfterDelay(e,t,o){this.Ju(),this.zu.indexOf(e)>-1&&(t=0);const y=DelayedOperation.createAndSchedule(this,e,t,o,R=>this.Xu(R));return this.Uu.push(y),y}Ju(){this.Ku&&fail(47125,{ec:__PRIVATE_getMessageOrStack(this.Ku)})}verifyOperationInProgress(){}async tc(){let e;do e=this.Hu,await e;while(e!==this.Hu)}nc(e){for(const t of this.Uu)if(t.timerId===e)return!0;return!1}rc(e){return this.tc().then(()=>{this.Uu.sort((t,o)=>t.targetTimeMs-o.targetTimeMs);for(const t of this.Uu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.tc()})}sc(e){this.zu.push(e)}Xu(e){const t=this.Uu.indexOf(e);this.Uu.splice(t,1)}}function __PRIVATE_getMessageOrStack(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class Firestore extends Firestore$1{constructor(e,t,o,y){super(e,t,o,y),this.type="firestore",this._queue=new __PRIVATE_AsyncQueueImpl,this._persistenceKey=(y==null?void 0:y.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new __PRIVATE_AsyncQueueImpl(e),this._firestoreClient=void 0,await e}}}function getFirestore(r,e){const t=typeof r=="object"?r:getApp(),o=typeof r=="string"?r:it,y=_getProvider(t,"firestore").getImmediate({identifier:o});if(!y._initialized){const R=getDefaultEmulatorHostnameAndPort("firestore");R&&connectFirestoreEmulator(y,...R)}return y}function ensureFirestoreConfigured(r){if(r._terminated)throw new FirestoreError(F.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||__PRIVATE_configureFirestore(r),r._firestoreClient}function __PRIVATE_configureFirestore(r){var e,t,o;const y=r._freezeSettings(),R=function(K,Y,Q,ee){return new DatabaseInfo(K,Y,Q,ee.host,ee.ssl,ee.experimentalForceLongPolling,ee.experimentalAutoDetectLongPolling,__PRIVATE_cloneLongPollingOptions(ee.experimentalLongPollingOptions),ee.useFetchStreams)}(r._databaseId,((e=r._app)===null||e===void 0?void 0:e.options.appId)||"",r._persistenceKey,y);r._componentsProvider||!((t=y.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((o=y.localCache)===null||o===void 0)&&o._onlineComponentProvider)&&(r._componentsProvider={_offline:y.localCache._offlineComponentProvider,_online:y.localCache._onlineComponentProvider}),r._firestoreClient=new FirestoreClient(r._authCredentials,r._appCheckCredentials,r._queue,R,r._componentsProvider&&function(K){const Y=K==null?void 0:K._online.build();return{_offline:K==null?void 0:K._offline.build(Y),_online:Y}}(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bytes{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Bytes(ByteString.fromBase64String(e))}catch(t){throw new FirestoreError(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Bytes(ByteString.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FieldPath{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new FirestoreError(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new FieldPath$1(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FieldValue{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GeoPoint{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new FirestoreError(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new FirestoreError(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return __PRIVATE_primitiveComparator(this._lat,e._lat)||__PRIVATE_primitiveComparator(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VectorValue{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(o,y){if(o.length!==y.length)return!1;for(let R=0;R<o.length;++R)if(o[R]!==y[R])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sn=/^__.*__$/;class ParsedSetData{constructor(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}toMutation(e,t){return this.fieldMask!==null?new __PRIVATE_PatchMutation(e,this.data,this.fieldMask,t,this.fieldTransforms):new __PRIVATE_SetMutation(e,this.data,t,this.fieldTransforms)}}class ParsedUpdateData{constructor(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}toMutation(e,t){return new __PRIVATE_PatchMutation(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function __PRIVATE_isWrite(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw fail(40011,{oc:r})}}class __PRIVATE_ParseContextImpl{constructor(e,t,o,y,R,G){this.settings=e,this.databaseId=t,this.serializer=o,this.ignoreUndefinedProperties=y,R===void 0&&this._c(),this.fieldTransforms=R||[],this.fieldMask=G||[]}get path(){return this.settings.path}get oc(){return this.settings.oc}ac(e){return new __PRIVATE_ParseContextImpl(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}uc(e){var t;const o=(t=this.path)===null||t===void 0?void 0:t.child(e),y=this.ac({path:o,cc:!1});return y.lc(e),y}hc(e){var t;const o=(t=this.path)===null||t===void 0?void 0:t.child(e),y=this.ac({path:o,cc:!1});return y._c(),y}Pc(e){return this.ac({path:void 0,cc:!0})}Tc(e){return __PRIVATE_createError(e,this.settings.methodName,this.settings.Ic||!1,this.path,this.settings.Ec)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}_c(){if(this.path)for(let e=0;e<this.path.length;e++)this.lc(this.path.get(e))}lc(e){if(e.length===0)throw this.Tc("Document fields must not be empty");if(__PRIVATE_isWrite(this.oc)&&sn.test(e))throw this.Tc('Document fields cannot begin and end with "__"')}}class __PRIVATE_UserDataReader{constructor(e,t,o){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=o||__PRIVATE_newSerializer(e)}dc(e,t,o,y=!1){return new __PRIVATE_ParseContextImpl({oc:e,methodName:t,Ec:o,path:FieldPath$1.emptyPath(),cc:!1,Ic:y},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function __PRIVATE_newUserDataReader(r){const e=r._freezeSettings(),t=__PRIVATE_newSerializer(r._databaseId);return new __PRIVATE_UserDataReader(r._databaseId,!!e.ignoreUndefinedProperties,t)}function __PRIVATE_parseSetData(r,e,t,o,y,R={}){const G=r.dc(R.merge||R.mergeFields?2:0,e,t,y);__PRIVATE_validatePlainObject("Data must be an object, but it was:",G,o);const K=__PRIVATE_parseObject(o,G);let Y,Q;if(R.merge)Y=new FieldMask(G.fieldMask),Q=G.fieldTransforms;else if(R.mergeFields){const ee=[];for(const ie of R.mergeFields){const re=__PRIVATE_fieldPathFromArgument$1(e,ie,t);if(!G.contains(re))throw new FirestoreError(F.INVALID_ARGUMENT,`Field '${re}' is specified in your field mask but missing from your input data.`);__PRIVATE_fieldMaskContains(ee,re)||ee.push(re)}Y=new FieldMask(ee),Q=G.fieldTransforms.filter(ie=>Y.covers(ie.field))}else Y=null,Q=G.fieldTransforms;return new ParsedSetData(new ObjectValue(K),Y,Q)}class __PRIVATE_DeleteFieldValueImpl extends FieldValue{_toFieldTransform(e){if(e.oc!==2)throw e.oc===1?e.Tc(`${this._methodName}() can only appear at the top level of your update data`):e.Tc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof __PRIVATE_DeleteFieldValueImpl}}class __PRIVATE_NumericIncrementFieldValueImpl extends FieldValue{constructor(e,t){super(e),this.Rc=t}_toFieldTransform(e){const t=new __PRIVATE_NumericIncrementTransformOperation(e.serializer,toNumber(e.serializer,this.Rc));return new FieldTransform(e.path,t)}isEqual(e){return e instanceof __PRIVATE_NumericIncrementFieldValueImpl&&this.Rc===e.Rc}}function __PRIVATE_parseUpdateData(r,e,t,o){const y=r.dc(1,e,t);__PRIVATE_validatePlainObject("Data must be an object, but it was:",y,o);const R=[],G=ObjectValue.empty();forEach(o,(Y,Q)=>{const ee=__PRIVATE_fieldPathFromDotSeparatedString(e,Y,t);Q=getModularInstance(Q);const ie=y.hc(ee);if(Q instanceof __PRIVATE_DeleteFieldValueImpl)R.push(ee);else{const re=__PRIVATE_parseData(Q,ie);re!=null&&(R.push(ee),G.set(ee,re))}});const K=new FieldMask(R);return new ParsedUpdateData(G,K,y.fieldTransforms)}function __PRIVATE_parseUpdateVarargs(r,e,t,o,y,R){const G=r.dc(1,e,t),K=[__PRIVATE_fieldPathFromArgument$1(e,o,t)],Y=[y];if(R.length%2!=0)throw new FirestoreError(F.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let re=0;re<R.length;re+=2)K.push(__PRIVATE_fieldPathFromArgument$1(e,R[re])),Y.push(R[re+1]);const Q=[],ee=ObjectValue.empty();for(let re=K.length-1;re>=0;--re)if(!__PRIVATE_fieldMaskContains(Q,K[re])){const se=K[re];let le=Y[re];le=getModularInstance(le);const ce=G.hc(se);if(le instanceof __PRIVATE_DeleteFieldValueImpl)Q.push(se);else{const oe=__PRIVATE_parseData(le,ce);oe!=null&&(Q.push(se),ee.set(se,oe))}}const ie=new FieldMask(Q);return new ParsedUpdateData(ee,ie,G.fieldTransforms)}function __PRIVATE_parseData(r,e){if(__PRIVATE_looksLikeJsonObject(r=getModularInstance(r)))return __PRIVATE_validatePlainObject("Unsupported field value:",e,r),__PRIVATE_parseObject(r,e);if(r instanceof FieldValue)return function(o,y){if(!__PRIVATE_isWrite(y.oc))throw y.Tc(`${o._methodName}() can only be used with update() and set()`);if(!y.path)throw y.Tc(`${o._methodName}() is not currently supported inside arrays`);const R=o._toFieldTransform(y);R&&y.fieldTransforms.push(R)}(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.cc&&e.oc!==4)throw e.Tc("Nested arrays are not supported");return function(o,y){const R=[];let G=0;for(const K of o){let Y=__PRIVATE_parseData(K,y.Pc(G));Y==null&&(Y={nullValue:"NULL_VALUE"}),R.push(Y),G++}return{arrayValue:{values:R}}}(r,e)}return function(o,y){if((o=getModularInstance(o))===null)return{nullValue:"NULL_VALUE"};if(typeof o=="number")return toNumber(y.serializer,o);if(typeof o=="boolean")return{booleanValue:o};if(typeof o=="string")return{stringValue:o};if(o instanceof Date){const R=Timestamp.fromDate(o);return{timestampValue:toTimestamp(y.serializer,R)}}if(o instanceof Timestamp){const R=new Timestamp(o.seconds,1e3*Math.floor(o.nanoseconds/1e3));return{timestampValue:toTimestamp(y.serializer,R)}}if(o instanceof GeoPoint)return{geoPointValue:{latitude:o.latitude,longitude:o.longitude}};if(o instanceof Bytes)return{bytesValue:__PRIVATE_toBytes(y.serializer,o._byteString)};if(o instanceof DocumentReference){const R=y.databaseId,G=o.firestore._databaseId;if(!G.isEqual(R))throw y.Tc(`Document reference is for database ${G.projectId}/${G.database} but should be for database ${R.projectId}/${R.database}`);return{referenceValue:__PRIVATE_toResourceName(o.firestore._databaseId||y.databaseId,o._key.path)}}if(o instanceof VectorValue)return function(G,K){return{mapValue:{fields:{[st]:{stringValue:at},[ut]:{arrayValue:{values:G.toArray().map(Q=>{if(typeof Q!="number")throw K.Tc("VectorValues must only contain numeric values.");return __PRIVATE_toDouble(K.serializer,Q)})}}}}}}(o,y);throw y.Tc(`Unsupported field value: ${__PRIVATE_valueDescription(o)}`)}(r,e)}function __PRIVATE_parseObject(r,e){const t={};return isEmpty(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):forEach(r,(o,y)=>{const R=__PRIVATE_parseData(y,e.uc(o));R!=null&&(t[o]=R)}),{mapValue:{fields:t}}}function __PRIVATE_looksLikeJsonObject(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof Timestamp||r instanceof GeoPoint||r instanceof Bytes||r instanceof DocumentReference||r instanceof FieldValue||r instanceof VectorValue)}function __PRIVATE_validatePlainObject(r,e,t){if(!__PRIVATE_looksLikeJsonObject(t)||!function(y){return typeof y=="object"&&y!==null&&(Object.getPrototypeOf(y)===Object.prototype||Object.getPrototypeOf(y)===null)}(t)){const o=__PRIVATE_valueDescription(t);throw o==="an object"?e.Tc(r+" a custom object"):e.Tc(r+" "+o)}}function __PRIVATE_fieldPathFromArgument$1(r,e,t){if((e=getModularInstance(e))instanceof FieldPath)return e._internalPath;if(typeof e=="string")return __PRIVATE_fieldPathFromDotSeparatedString(r,e);throw __PRIVATE_createError("Field path arguments must be of type string or ",r,!1,void 0,t)}const on=new RegExp("[~\\*/\\[\\]]");function __PRIVATE_fieldPathFromDotSeparatedString(r,e,t){if(e.search(on)>=0)throw __PRIVATE_createError(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new FieldPath(...e.split("."))._internalPath}catch{throw __PRIVATE_createError(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function __PRIVATE_createError(r,e,t,o,y){const R=o&&!o.isEmpty(),G=y!==void 0;let K=`Function ${e}() called with invalid data`;t&&(K+=" (via `toFirestore()`)"),K+=". ";let Y="";return(R||G)&&(Y+=" (found",R&&(Y+=` in field ${o}`),G&&(Y+=` in document ${y}`),Y+=")"),new FirestoreError(F.INVALID_ARGUMENT,K+r+Y)}function __PRIVATE_fieldMaskContains(r,e){return r.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DocumentSnapshot$1{constructor(e,t,o,y,R){this._firestore=e,this._userDataWriter=t,this._key=o,this._document=y,this._converter=R}get id(){return this._key.path.lastSegment()}get ref(){return new DocumentReference(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new QueryDocumentSnapshot$1(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(__PRIVATE_fieldPathFromArgument("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class QueryDocumentSnapshot$1 extends DocumentSnapshot$1{data(){return super.data()}}function __PRIVATE_fieldPathFromArgument(r,e){return typeof e=="string"?__PRIVATE_fieldPathFromDotSeparatedString(r,e):e instanceof FieldPath?e._internalPath:e._delegate._internalPath}class AbstractUserDataWriter{convertValue(e,t="none"){switch(__PRIVATE_typeOrder(e)){case 0:return null;case 1:return e.booleanValue;case 2:return __PRIVATE_normalizeNumber(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(__PRIVATE_normalizeByteString(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw fail(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const o={};return forEach(e,(y,R)=>{o[y]=this.convertValue(R,t)}),o}convertVectorValue(e){var t,o,y;const R=(y=(o=(t=e.fields)===null||t===void 0?void 0:t[ut].arrayValue)===null||o===void 0?void 0:o.values)===null||y===void 0?void 0:y.map(G=>__PRIVATE_normalizeNumber(G.doubleValue));return new VectorValue(R)}convertGeoPoint(e){return new GeoPoint(__PRIVATE_normalizeNumber(e.latitude),__PRIVATE_normalizeNumber(e.longitude))}convertArray(e,t){return(e.values||[]).map(o=>this.convertValue(o,t))}convertServerTimestamp(e,t){switch(t){case"previous":const o=__PRIVATE_getPreviousValue(e);return o==null?null:this.convertValue(o,t);case"estimate":return this.convertTimestamp(__PRIVATE_getLocalWriteTime(e));default:return null}}convertTimestamp(e){const t=__PRIVATE_normalizeTimestamp(e);return new Timestamp(t.seconds,t.nanos)}convertDocumentKey(e,t){const o=ResourcePath.fromString(e);__PRIVATE_hardAssert(__PRIVATE_isValidResourceName(o),9688,{name:e});const y=new DatabaseId(o.get(1),o.get(3)),R=new DocumentKey(o.popFirst(5));return y.isEqual(t)||__PRIVATE_logError(`Document ${R} contains a document reference within a different database (${y.projectId}/${y.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),R}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_applyFirestoreDataConverter(r,e,t){let o;return o=r?r.toFirestore(e):e,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SnapshotMetadata{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class DocumentSnapshot extends DocumentSnapshot$1{constructor(e,t,o,y,R,G){super(e,t,o,y,G),this._firestore=e,this._firestoreImpl=e,this.metadata=R}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new QueryDocumentSnapshot(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const o=this._document.data.field(__PRIVATE_fieldPathFromArgument("DocumentSnapshot.get",e));if(o!==null)return this._userDataWriter.convertValue(o,t.serverTimestamps)}}}class QueryDocumentSnapshot extends DocumentSnapshot{data(e={}){return super.data(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getDoc(r){r=__PRIVATE_cast(r,DocumentReference);const e=__PRIVATE_cast(r.firestore,Firestore);return __PRIVATE_firestoreClientGetDocumentViaSnapshotListener(ensureFirestoreConfigured(e),r._key).then(t=>__PRIVATE_convertToDocSnapshot(e,r,t))}class __PRIVATE_ExpUserDataWriter extends AbstractUserDataWriter{constructor(e){super(),this.firestore=e}convertBytes(e){return new Bytes(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new DocumentReference(this.firestore,null,t)}}function setDoc(r,e,t){r=__PRIVATE_cast(r,DocumentReference);const o=__PRIVATE_cast(r.firestore,Firestore),y=__PRIVATE_applyFirestoreDataConverter(r.converter,e);return executeWrite(o,[__PRIVATE_parseSetData(__PRIVATE_newUserDataReader(o),"setDoc",r._key,y,r.converter!==null,t).toMutation(r._key,Precondition.none())])}function updateDoc(r,e,t,...o){r=__PRIVATE_cast(r,DocumentReference);const y=__PRIVATE_cast(r.firestore,Firestore),R=__PRIVATE_newUserDataReader(y);let G;return G=typeof(e=getModularInstance(e))=="string"||e instanceof FieldPath?__PRIVATE_parseUpdateVarargs(R,"updateDoc",r._key,e,t,o):__PRIVATE_parseUpdateData(R,"updateDoc",r._key,e),executeWrite(y,[G.toMutation(r._key,Precondition.exists(!0))])}function executeWrite(r,e){return function(o,y){const R=new __PRIVATE_Deferred;return o.asyncQueue.enqueueAndForget(async()=>__PRIVATE_syncEngineWrite(await __PRIVATE_getSyncEngine(o),y,R)),R.promise}(ensureFirestoreConfigured(r),e)}function __PRIVATE_convertToDocSnapshot(r,e,t){const o=t.docs.get(e._key),y=new __PRIVATE_ExpUserDataWriter(r);return new DocumentSnapshot(r,y,e._key,o,new SnapshotMetadata(t.hasPendingWrites,t.fromCache),e.converter)}function increment(r){return new __PRIVATE_NumericIncrementFieldValueImpl("increment",r)}(function r(e,t=!0){(function(y){v=y})(SDK_VERSION),_registerComponent(new Component("firestore",(o,{instanceIdentifier:y,options:R})=>{const G=o.getProvider("app").getImmediate(),K=new Firestore(new __PRIVATE_FirebaseAuthCredentialsProvider(o.getProvider("auth-internal")),new __PRIVATE_FirebaseAppCheckTokenProvider(G,o.getProvider("app-check-internal")),function(Q,ee){if(!Object.prototype.hasOwnProperty.apply(Q.options,["projectId"]))throw new FirestoreError(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new DatabaseId(Q.options.projectId,ee)}(G,y),G);return R=Object.assign({useFetchStreams:t},R),K._setSettings(R),K},"PUBLIC").setMultipleInstances(!0)),registerVersion(S,D,e),registerVersion(S,D,"esm2017")})();var name="firebase",version="11.6.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */registerVersion(name,version,"app");const firebaseConfig={apiKey:"AIzaSyDRboiV6Z3f7BZ57xaRcCbVU0kCj6rAg0I",authDomain:"visitor-counter-2618a.firebaseapp.com",projectId:"visitor-counter-2618a",storageBucket:"visitor-counter-2618a.firebasestorage.app",messagingSenderId:"487740842825",appId:"1:487740842825:web:9acf69d54f2362f59f3098"},app=initializeApp(firebaseConfig),db=getFirestore(app);function VisitorCounter(){const[r,e]=reactExports.useState(null),[t,o]=reactExports.useState(0),[y,R]=reactExports.useState(!1),G=useMotionValue(0),K=useTransform(G,[0,50,100,500,1e3],["#999","#6b5","#4a4","#27ae60","#e67e22"]);return reactExports.useEffect(()=>{const Y=G.on("change",Q=>{o(Math.round(Q))});return()=>Y()},[G]),reactExports.useEffect(()=>{async function Y(){try{let Q=sessionStorage.getItem("user-ip");Q||(Q=(await(await fetch("https://api.ipify.org?format=json")).json()).ip,sessionStorage.setItem("user-ip",Q));const ee=JSON.parse(sessionStorage.getItem("visited-ips")||"[]"),ie=doc(db,"visitors","count");let re;if(!ee.includes(Q))(await getDoc(ie)).exists()?(await updateDoc(ie,{value:increment(1)}),re=(await getDoc(ie)).data().value):(await setDoc(ie,{value:1}),re=1),ee.push(Q),sessionStorage.setItem("visited-ips",JSON.stringify(ee));else{const se=await getDoc(ie);re=se.exists()?se.data().value:1}e(re)}catch(Q){console.error("Visitor counter error:",Q),R(!0)}}Y()},[]),reactExports.useEffect(()=>{if(r!==null){const Y=animate(G,r,{duration:1.5,ease:"easeOut"});return()=>Y.stop()}},[r,G]),y?jsxRuntimeExports.jsx("p",{children:"Could not load visitor count."}):r===null?jsxRuntimeExports.jsx("p",{children:"Loading visitor count..."}):jsxRuntimeExports.jsx(motion.p,{style:{color:K,fontSize:"1.6rem",fontWeight:"bold",display:"inline-block"},initial:{scale:.9},animate:{scale:1.05},transition:{type:"spring",stiffness:100},children:t})}const PersonalInfo=()=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"translucent-container p-6 custom-green rounded-2xl my-4 w-[95%]",children:[jsxRuntimeExports.jsx("p",{className:"text-xl text-left text-white",children:"Age"}),jsxRuntimeExports.jsx("p",{className:"text-3xl text-left",children:"33"})]}),jsxRuntimeExports.jsxs("div",{className:"translucent-container p-6 custom-green rounded-2xl my-4 w-[95%]",children:[jsxRuntimeExports.jsx("p",{className:"text-xl text-left text-white",children:"Nationality"}),jsxRuntimeExports.jsx("p",{className:"text-3xl text-left",children:"Indian"})]}),jsxRuntimeExports.jsxs("div",{className:"translucent-container p-6 custom-green rounded-2xl w-[95%] my-4",children:[jsxRuntimeExports.jsx("p",{className:"text-xl text-left text-white",children:"Tech Stack"}),jsxRuntimeExports.jsx("div",{className:"text-[46px] text-left",children:jsxRuntimeExports.jsxs("div",{className:"flex gap-x-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-y-4",children:[jsxRuntimeExports.jsx(RiNextjsLine,{}),jsxRuntimeExports.jsx(RiReactjsFill,{}),jsxRuntimeExports.jsx(RiNodejsLine,{}),jsxRuntimeExports.jsx(SiExpress,{})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-y-4",children:[jsxRuntimeExports.jsx(SiFlask,{}),jsxRuntimeExports.jsx(SiPytorch,{}),jsxRuntimeExports.jsx(SiTensorflow,{}),jsxRuntimeExports.jsx(SiPandas,{})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-y-4",children:[jsxRuntimeExports.jsx(SiScikitlearn,{}),jsxRuntimeExports.jsx(RiBootstrapFill,{}),jsxRuntimeExports.jsx(RiTailwindCssLine,{}),jsxRuntimeExports.jsx(RiGithubFill,{})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-y-4",children:[jsxRuntimeExports.jsx(SiDocker,{}),jsxRuntimeExports.jsx(SiMongodb,{}),jsxRuntimeExports.jsx(SiRabbitmq,{}),jsxRuntimeExports.jsx(SiUnity,{})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-y-4",children:[jsxRuntimeExports.jsx(SiMysql,{}),jsxRuntimeExports.jsx(SiSqlalchemy,{}),jsxRuntimeExports.jsx(SiGnubash,{})]})]})})]}),jsxRuntimeExports.jsxs("div",{className:"translucent-container p-6 custom-green rounded-2xl my-4 w-[95%]",children:[jsxRuntimeExports.jsx("p",{className:"text-xl text-left text-white",children:"Visitors"}),jsxRuntimeExports.jsx("p",{className:"text-3xl text-left",children:jsxRuntimeExports.jsx(VisitorCounter,{})})]})]}),reactsvg="/icons/react.svg",nextsvg="/icons/nextjs-original.png",nodejssvg="/icons/nodejs-original.png",dockersvg="/icons/docker-original.png",pythonsvg="/icons/python-original.png",gitsvg="/icons/git-original.png",expressSvg="/icons/express-original.png",flasksvg="/icons/flask-original.png",pytorchsvg="/icons/pytorch-original.png",tensorflow="/icons/tensorflow-original.png",pandasSvg="/icons/pandas-original.png",scikitlearnsvg="/icons/scikitlearn-original.png",bootstrapsvg="/icons/bootstrap-original.png",tailwindcsssvg="/icons/tailwindcss-original.png",githubsvg="/icons/github-original.png",mongodbsvg="/icons/mongodb-original.png",rabbitmqsvg="/icons/rabbitmq-original.png",unitysvg="/icons/unity-original.png",mysqlsvg="/icons/mysql-original.png",sqlapng="/icons/SQLAlchemy.png",bashsvg="/icons/bash-original.png",iconFiles=[reactsvg,nextsvg,nodejssvg,dockersvg,pythonsvg,gitsvg,expressSvg,flasksvg,pytorchsvg,tensorflow,pandasSvg,scikitlearnsvg,bootstrapsvg,tailwindcsssvg,githubsvg,mongodbsvg,rabbitmqsvg,unitysvg,mysqlsvg,sqlapng,bashsvg];function Icon({iconUrl:r,position:e}){const t=useTexture(r);return jsxRuntimeExports.jsxs("mesh",{position:e,children:[jsxRuntimeExports.jsx("planeGeometry",{args:[3,3]})," ",jsxRuntimeExports.jsx("meshBasicMaterial",{map:t,transparent:!0,alphaTest:.5,side:DoubleSide})]})}function SphereWithIcons(){const r=reactExports.useRef(),e=12;useFrame(({clock:y})=>{const R=y.getElapsedTime();r.current.rotation.y=R*.3});const t=iconFiles.length,o=iconFiles.map((y,R)=>{const G=Math.acos(-1+2*R/t),K=Math.sqrt(t*Math.PI)*G,Y=e*Math.cos(K)*Math.sin(G),Q=e*Math.sin(K)*Math.sin(G),ee=e*Math.cos(G),ie=new Vector3(Y,Q,ee),re=ie.clone().normalize();return jsxRuntimeExports.jsx("group",{position:ie,children:jsxRuntimeExports.jsx(Icon,{iconUrl:y,position:[0,0,0],rotation:new Euler().setFromQuaternion(new Quaternion().setFromUnitVectors(new Vector3(0,0,1),re))})},R)});return jsxRuntimeExports.jsxs("group",{ref:r,children:[jsxRuntimeExports.jsxs("mesh",{children:[jsxRuntimeExports.jsx("sphereGeometry",{args:[e,64,64]}),jsxRuntimeExports.jsx("meshBasicMaterial",{wireframe:!0,wireframeLinewidth:2,color:"#20C20E",transparent:!0,opacity:.2})]}),o]})}function RotatingSphereWithIcons(){return jsxRuntimeExports.jsxs(Canvas,{camera:{position:[0,0,60],fov:35},style:{width:"100%",height:"100vh",display:"block"},children:[jsxRuntimeExports.jsx("ambientLight",{intensity:.5}),jsxRuntimeExports.jsx(SphereWithIcons,{}),jsxRuntimeExports.jsx(OrbitControls,{enableZoom:!1,autoRotate:!0,autoRotateSpeed:.5,minDistance:40,maxDistance:100})]})}const backgroundMusic="/assets/background-music-B14HosVN.mp3";function App(){const[r,e]=reactExports.useState(!1),[t,o]=reactExports.useState(window.innerWidth>1024),[y,R]=reactExports.useState(!1),G=reactExports.useRef(null);return reactExports.useEffect(()=>{setTimeout(()=>e(!0),300);const K=()=>{o(window.innerWidth>1024)};return window.addEventListener("resize",K),G.current&&(y?G.current.play().catch(Y=>{console.warn("Play failed:",Y)}):G.current.pause()),()=>{G.current&&G.current.pause(),window.removeEventListener("resize",K)}},[y]),jsxRuntimeExports.jsxs("div",{className:`select-none font-custom flex flex-col min-h-screen justify-between text-white transition-all duration-700 ease-in ${r?"opacity-100":"opacity-0"}`,children:[jsxRuntimeExports.jsx("div",{className:"flex justify-center items-center",children:jsxRuntimeExports.jsx(Navbar,{isPlaying:y,setIsPlaying:R})}),jsxRuntimeExports.jsxs("section",{className:`mt-[5vh] h-auto items-center ${t?"grid grid-cols-2":"flex flex-col"}`,children:[jsxRuntimeExports.jsxs("div",{className:`flex-grow flex flex-col justify-center items-center custom-green ${t?"mx-[4vw] text-[54px]":"mb-4 mx-10 text-[21px]"}`,children:[jsxRuntimeExports.jsx(Headline,{}),jsxRuntimeExports.jsx(Intro,{})]}),jsxRuntimeExports.jsxs("div",{className:`h-[45vh] rounded-3xl translucent-container flex-grow flex flex-col justify-center items-center ${t?"mx-[4vw] my-5":"my-4 mx-10"}`,children:[jsxRuntimeExports.jsx(BrainCanvas,{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("div",{className:"md:w-1/2 flex justify-center",children:jsxRuntimeExports.jsx(ArrowDown,{})})]})]}),jsxRuntimeExports.jsx("section",{className:"mt-[5vh] mb-0.5 flex flex-col h-auto items-center",children:jsxRuntimeExports.jsx(StreamerText,{texts:[" Next.js "," React.js "," Node.js "," Express.js "," Flask "," PyTorch "," TensorFlow "," Pandas "," MatPlotLib "," Scikit-Learn "," Bootstrap "," TailwindCSS "," Git "," Docker "," MongoDB "," RabbitMQ "," Render "," Unity "," Vite "," SQLAlchemy "," AJAX "," PyTest "],direction:1,speed:.3})}),jsxRuntimeExports.jsx("section",{className:"mb-[5vh] mt-0.5 flex flex-col h-auto items-center",children:jsxRuntimeExports.jsx(StreamerText,{texts:[" Data Science "," Machine Learning "," Predictive Modelling "," Statistical Analysis "," Software Development "," Algorithms "," Data Structures "," Web Development "," Problem-Solving "," Containerisation "," User Authentication "," Responsive Design "," Version Control "," Product Design "," Data Engineering "," High Performance Computing "," Accelerated Computing "],direction:-1,speed:.3})}),jsxRuntimeExports.jsx("section",{className:"h-auto flex items-center justify-center",children:jsxRuntimeExports.jsx(Projects,{className:"curZur"})}),jsxRuntimeExports.jsxs("div",{className:`items-center justify-center ${t?"grid grid-cols-2":"flex flex-col"}`,children:[t&&jsxRuntimeExports.jsx("div",{className:"flex justify-center items-center flex-col mx-[4vw] scale-110",children:jsxRuntimeExports.jsx(RotatingSphereWithIcons,{})}),jsxRuntimeExports.jsx("div",{className:`flex flex-col justify-center items-center ${t?"mx-[5vw]":"mx-10 mb-4"}`,children:jsxRuntimeExports.jsx(PersonalInfo,{})})]}),jsxRuntimeExports.jsx("section",{className:" text-[#20C20E] flex items-center justify-center",children:jsxRuntimeExports.jsx("footer",{children:jsxRuntimeExports.jsx(Footer,{})})}),jsxRuntimeExports.jsx("audio",{ref:G,src:backgroundMusic,loop:!0,style:{display:"none"}})]})}const font1="/assets/matrixFont-DHEWCNpy.ttf",MatrixRainingCode=()=>{const r=reactExports.useRef(null);return reactExports.useEffect(()=>{const e=r.current,t=e.getContext("2d"),o=22;let y=e.width=window.innerWidth,R=e.height=window.innerHeight,G=Math.floor(y/20);const Y=`abcdefghijklmnopqrstuvwxyz0123456789$+-*/=%"'#&_(),.;:?!\\|{}<>[]^~`.split("");let Q=Array.from({length:G},(le,ce)=>({chars:[],y:Math.random()*R}));const ee=25;let ie=Date.now();(async()=>{const le=new FontFace("MatrixFont",`url(${new URL(font1,import.meta.url)})`);await le.load(),document.fonts.add(le)})().then(()=>{t.font="18px MatrixFont",t.fillStyle="black",t.fillRect(0,0,y,R);const le=()=>{t.fillStyle="rgba(0, 0, 0, 0.04)",t.fillRect(0,0,y,R),t.font="18px MatrixFont",Q.forEach((oe,ue)=>{const ge=Y[Math.floor(Math.random()*Y.length)];oe.chars.unshift({char:ge,opacity:1}),oe.chars.length>20&&oe.chars.pop(),oe.chars.forEach((ve,_e)=>{const be=ue*20,Re=oe.y-_e*o;Re<0||(t.fillStyle=_e===0?"#fff":`rgba(0, 255, 0, ${ve.opacity})`,t.fillText(ve.char,be,Re),_e>0&&(ve.opacity*=.85))}),oe.y+=o,oe.y>R&&Math.random()>.975&&(oe.y=0,oe.chars=[])})},ce=()=>{const oe=Date.now();oe-ie>1e3/ee&&(le(),ie=oe),requestAnimationFrame(ce)};ce()});const se=()=>{y=e.width=window.innerWidth,R=e.height=window.innerHeight,G=Math.floor(y/20),Q=Array.from({length:G},()=>({chars:[],y:Math.random()*R}))};return window.addEventListener("resize",se),()=>{window.removeEventListener("resize",se)}},[]),jsxRuntimeExports.jsx("canvas",{className:"matrix-canvas fixed top-0 left-0 z-[-1]",ref:r})};clientExports.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsxs(reactExports.StrictMode,{children:[jsxRuntimeExports.jsx("div",{style:{position:"absolute",width:"100vw",height:"100vh"},children:jsxRuntimeExports.jsx(MatrixRainingCode,{})}),jsxRuntimeExports.jsx(App,{})]}));
